jQuery.sap.declare("sap.rules.ui.parser.businessLanguage.lib.parseUtils");jQuery.sap.require("sap.rules.ui.parser.businessLanguage.lib.constants");jQuery.sap.require("sap.rules.ui.parser.businessLanguage.lib.antlr3_all_min");jQuery.sap.require("sap.rules.ui.parser.businessLanguage.lib.vocabularyUtils");jQuery.sap.require("sap.rules.ui.parser.businessLanguage.lib.utils");jQuery.sap.require("sap.rules.ui.parser.businessLanguage.lib.parserTokens");jQuery.sap.require("sap.rules.ui.parser.infrastructure.messageHandling.lib.responseCollector");jQuery.sap.require("sap.rules.ui.parser.infrastructure.errorHandling.hrfException");sap.rules.ui.parser.businessLanguage.lib.parseUtils=sap.rules.ui.parser.businessLanguage.lib.parseUtils||{};sap.rules.ui.parser.businessLanguage.lib.parseUtils.lib=(function(){var c=sap.rules.ui.parser.businessLanguage.lib.constants.lib;var p=sap.rules.ui.parser.businessLanguage.lib.parserTokens.lib;var v=sap.rules.ui.parser.businessLanguage.lib.vocabularyUtils.lib;var a=new v.vocabularyUtilsLib();var u=new sap.rules.ui.parser.businessLanguage.lib.utils.lib();var R=sap.rules.ui.parser.infrastructure.messageHandling.lib.responseCollector.lib.ResponseCollector;var o=sap.rules.ui.parser.businessLanguage.lib.antlr3_all_min.lib;var h=sap.rules.ui.parser.infrastructure.errorHandling.hrfException.lib;var d={ANY_OF:"any of the following conditions is true:",ALL_OF:"all of the following conditions are true:",BULLET:"<add line>",VALUE_HELP:"<value help>",END_STRUCT:";",COLON:":",ANY:"any",CONDITIONS:"conditions",FOLLOWING:"following",OR:"or",AND:"and",LROUNDB:"(",RROUNDB:")",STRING:"<'string'>",DATESTRING:"<'yyyy-MM-dd'>",TIMESTAMPSTRING:"<'yyyy-MM-dd HH:mm:ss'>",TIMESTRING:"<'HH:mm:ss'>",ALL:"all ",PLUS:"+",MINUS:"-",WHERE:"where",FILTER:"filter",BY:"by",IS:"is",NOT:"not",THE:"the",LAST:"last",NEXT:"next",INT:"<number>",DECIMAL:"<number>",THIS:"this",TODAY:"today",YESTERDAY:"yesterday",TOMORROW:"tomorrow",BEFORE:"is before",AFTER:"is after",BETWEEN:"is between",TO:"to",SECOND:"seconds",MINUTE:"minutes",HOUR:"hours",DAY:"days",WEEK:"weeks",MONTH:"months",YEAR:"years",CONTAINS:"contains",STARTS:"starts",ENDS:"ends",WITH:"with",LIKE:"is like",EQUALS:"equals",IN:"in",NOT_SIGN:"!",EQ_SIGN:"=",NOT_EQUAL_SIGN:"!=",GREATER_EQUAL_SIGN:">=",LESS_EQUAL_SIGN:"<=",LESS:"less",GREATER:"greater",THAN:"than",AVERAGE:"average",OF:"of",SUM:"sum",COUNT:"count",COUNTD:"countd",DISTINCT:"distinct",FIRST:"first",ID:"ID",DOT:".",GROUP:"group",MULT:"*",DIV:"/",EQ:"eq",EQUAL:"equal",PER:"per",ONE:"one",DO:"do",EXISTS:"exists",GREATER_SIGN:">",COMMA:",",SEMICOLON:";",LESS_SIGN:"<",IS_GREATER_THAN:"is greater than",IS_LESS_THAN:"is less than",GREATER_THAN:"is greater than",LESS_THAN:"is less than",IS_EQUAL:"is equal to",IS_NOT_EQUAL:"is not equal to",DOES_NOT_EQUAL:"does not equal",NOT_EQUAL:"not equals",EXISTS_IN:"exists in",DOES_NOT_EXISTS_IN:"does not exist in",NOT_EXISTS_IN:"not exists in",IS_IN_THE:"is in the",IS_NOT_IN_THE:"is not in the",IN_THE:"in the",NOT_IN_THE:"not in the",IS_LIKE:"is like",IS_NOT_LIKE:"is not like",NOT_LIKE:"is not like",IS_IN:"is in",IS_NOT_IN:"is not in",NOT_IN:"does not exist in",DOES_NOT_CONTAIN:"does not contain",PATTERN:"pattern",DOES_CONTAIN:"does contain",NOT_CONTAIN:"not contains",WITH_FUZZY:"with a fuzzy score of",ZERO_TO_ONE:"<value from 0 to 1>",ZERO_OR_ONE:"<0 or 1>",OCCURENCES_REGEXP:"occurrences containing pattern",DOES_NOT_START:"does not start with",DOES_START:"does start with",NOT_START:"not starts with",START_WITH:"starts with",DOES_NOT_END:"does not end with",DOES_END:"does end with",NOT_END:"not ends with",COUNT_OF:"count of",COUNTD_OF:"countd of",COUNT_DISTINCT_OF:"count distinct of",IS_BEFORE:"is before",IS_AFTER:"is after",IS_NOT_BEFORE:"is not before",IS_NOT_AFTER:"is not after",IS_BETWEEN:"is between",IS_NOT_BETWEEN:"is not between",END_WITH:"ends with",MINIMUM_OF:"minimum of",MAXIMUM_OF:"maximum of",AVERAGE_OF:"average of",GROUP_BY:"grouped by",FILTER_BY:"filter by",SUM_OF:"sum of",IS_EQUAL_OR_LESS_THAN:"is equal or less than",IS_EQUAL_OR_GREATER_THAN:"is equal or greater than",GREATER_THAN_OR_EQUAL:"is equal or greater than",IS_IN_THE_LAST:"is in the last",IS_IN_THE_NEXT:"is in the next",IS_NOT_IN_THE_LAST:"is not in the last",IS_NOT_IN_THE_NEXT:"is not in the next",SORTED_BY:"sorted by",WITH_THE_EARLIEST:"with the earliest",WITH_THE_MOST_RECENT:"with the most recent",EARLIEST:"earliest",MOST_RECENT:"most recent",WITH_THE_HIGHEST:"with the highest",WITH_THE_LOWEST:"with the lowest",HIGHEST:"highest",LOWEST:"lowest",SORTED_FROM_A_TO_Z_BY:"sorted from A to Z by",SORTED_FROM_Z_TO_A_BY:"sorted from Z to A by",NUMBER_OF:"number of",NUMBER_OF_UNIQUE:"number of unique"};function b(){}b.prototype.alfabetReservedWordsArr=["FIRST","OF","WITH","SORTED","WHERE","FILTER","IS","BY","PER","GROUP","GROUPED","COUNT","COUNTD","DISTINCT","AND","OR","ANY","ALL","THE","FOLLOWING","CONDITIONS","ARE","TO","TRUE","FALSE","NULL","CURRENT","DOES","EQUALS","EQUAL","NOT","LAST","MOST","MAXIMUM","EARLIEST","MINIMUM","ONE","EXISTS","IN","EXIST","TODAY","YESTERDAY","TOMORROW","MINUS","GREATER","LESS","ROUND","POWER","SIN","COS","LOG","LESS","THAN","NEXT","BEFORE","AFTER","BETWEEN","CONCATENATE","CONTAINS","LIKE","PATTERN","CONTAIN","START","STARTS","END","ENDS","NUMBER","HIGHEST","LOWEST","AVERAGE","SUM","RECENT","SECOND","SECONDS","MINUTE","MINUTES","HOUR","HOURS","DAY","DAYS","WEEK","WEEKS","MONTH","MONTHS","YEAR","YEARS","SORTED","OCCURRENCES","FROM","LINE","NEW","LIST","UNIQUE","FUZZY","SCORE","NOW","IF","THIS"];b.prototype.DateFormatEnum={MMDDYYYY:1,DDMMYYYY:2,YYYYMMDD:3};b.prototype.TimeFormatEnum={HHMISS:1,HHMISSAMPM:2};b.prototype.isBlank=function(s){return(!s||/^\s*$/.test(s));};b.prototype.isAutocompleteMode=function(m){return(m===c.AUTOCOMPLETE_MODE_LOWERCASE||m===c.AUTOCOMPLETE_MODE);};b.prototype.isCollectionOperator=function(t){if(t===undefined||t===null){return false;}return(t===p.COUNT_DISTINCT_OF||t===p.COUNT_OF||t===p.LAST||t===p.MOST_RECENT||t===p.MAXIMUM_OF||t===p.HIGHEST||t===p.LOWEST||t===p.EARLIEST||t===p.MINIMUM_OF||t===p.NUMBER_OF||t===p.AVERAGE_OF||t===p.SUM_OF||t===p.FIRST||t===p.OF);};b.prototype.parseType=function(f,t){try{var g=t;if(typeof t==="undefined"||t===null){g=c.TYPE_ALL;}switch(g){case c.TYPE_ALL:f.model();break;case c.TYPE_BOOLEAN:f.modelBooleanPure();break;case c.TYPE_NUMERIC:f.modelNumric();break;case c.TYPE_STRING:f.modelString();break;case c.TYPE_DATE:f.modelDate();break;case c.TYPE_TIMESPAN:f.modelTimespan();break;case c.TYPE_TIMESTAMP:f.modelTimestamp();break;case c.TYPE_TIME:f.modelTime();break;case c.TYPE_SINGLE_EXPRESSION:f.modelSingleExpression();break;case c.TYPE_SINGLE_EXPRESSION_BOOLEAN:f.modelBooleanType();break;case c.TYPE_BOOLEAN_ENHANCED:f.modelBoolean();break;case c.TYPE_COLLECTION:f.modelCollection();break;case c.TYPE_BOOLEAN_COLLECTION:f.modelBooleanCollection();break;case c.TYPE_STRING_COLLECTION:f.modelStringCollection();break;case c.TYPE_NUMERIC_COLLECTION:f.modelNumricCollection();break;case c.TYPE_DATE_COLLECTION:f.modelDateCollection();break;case c.TYPE_TIMESPAN_COLLECTION:f.modelTimespanCollection();break;case c.TYPE_TIMESTAMP_COLLECTION:f.modelTimestampCollection();break;case c.TYPE_TIME_COLLECTION:f.modelTimeCollection();break;case c.TYPE_AUTOCOMPLETE:f.modelAllAutocomplete();break;case c.TYPE_NON_COLLECTION:f.modelNonCollection();break;default:throw new h.HrfException("ERROR: incorrect parst type!");}}catch(i){}};b.prototype.getLocaleFormat=function(m,i){function g(f,l){var j;if(f.hasOwnProperty(c.propertiesEnum.localeSettings)&&f[c.propertiesEnum.localeSettings]&&f[c.propertiesEnum.localeSettings].hasOwnProperty(c.propertiesEnum.number)){if(i||!f.hasOwnProperty(c.propertiesEnum.convert)||!f[c.propertiesEnum.convert][c.propertiesEnum.source]||f[c.propertiesEnum.convert][c.propertiesEnum.source]===c.DISPLAY_TEXT){j=f[c.propertiesEnum.localeSettings][c.propertiesEnum.number][c.propertiesEnum.groupSeparator];j=(j===' ')?'':j;l.INT="<123"+j+"456"+j+"789"+f[c.propertiesEnum.localeSettings][c.propertiesEnum.number][c.propertiesEnum.decimalSeparator]+"00>";l.DECIMAL="<123"+j+"456"+j+"789"+f[c.propertiesEnum.localeSettings][c.propertiesEnum.number][c.propertiesEnum.decimalSeparator]+"00>";}}}var l={DATESTRING:d.DATESTRING,TIMESTRING:d.TIMESTRING,TIMESTAMPSTRING:d.TIMESTAMPSTRING,INT:d.INT,DECIMAL:d.DECIMAL};if(m&&m.hasOwnProperty(c.propertiesEnum.flags)&&m[c.propertiesEnum.flags]&&m[c.propertiesEnum.flags].hasOwnProperty(c.propertiesEnum.locale)&&m[c.propertiesEnum.flags][c.propertiesEnum.locale]){var f=m[c.propertiesEnum.flags][c.propertiesEnum.locale];if(f.hasOwnProperty(c.propertiesEnum.localeSettings)&&f[c.propertiesEnum.localeSettings]&&f[c.propertiesEnum.localeSettings].hasOwnProperty(c.propertiesEnum.dateFormat)&&f[c.propertiesEnum.localeSettings].hasOwnProperty(c.propertiesEnum.timeFormat)){if(i||!f.hasOwnProperty(c.propertiesEnum.convert)||!f[c.propertiesEnum.convert][c.propertiesEnum.source]||f[c.propertiesEnum.convert][c.propertiesEnum.source]===c.DISPLAY_TEXT){var t=f[c.propertiesEnum.localeSettings][c.propertiesEnum.timeFormat];var z=t.indexOf('z');if(z>=0){t=t.substring(0,z-1);}l={DATESTRING:"<'"+f[c.propertiesEnum.localeSettings][c.propertiesEnum.dateFormat]+"'>",TIMESTRING:"<'"+t+"'>",TIMESTAMPSTRING:"<'"+f[c.propertiesEnum.localeSettings][c.propertiesEnum.dateFormat]+' '+t+"'>"};}}g(f,l);}return l;};b.prototype.getTokensDisplayMap=function(m){var t=JSON.parse(JSON.stringify(d));var l=this.getLocaleFormat(m,true);t.DATESTRING=l.DATESTRING;t.TIMESTRING=l.TIMESTRING;t.TIMESTAMPSTRING=l.TIMESTAMPSTRING;t.INT=l.INT;t.DECIMAL=l.DECIMAL;return t;};b.prototype.sortAndRemoveDuplicates=function(f){return f.sort().filter(function(i,g){return!g||i!==f[g-1];});};b.prototype.getSingleTokenType=function(t){var f=t;switch(t){case p.TYPENUMBERCOLLECTION:f=p.TYPENUMBER;break;case p.TYPEBOOLEANCOLLECTION:f=p.TYPEBOOLEAN;break;case p.TYPESTRINGCOLLECTION:f=p.TYPESTRING;break;case p.TYPEDATECOLLECTION:f=p.TYPEDATE;break;case p.TYPETIMECOLLECTION:f=p.TYPETIME;break;case p.TYPETIMESTAMPCOLLECTION:f=p.TYPETIMESTAMP;break;case p.TYPETIMEINTERVALCOLLECTION:f=p.TYPETIMEINTERVAL;break;}return f;};b.prototype.getNavigationPathFromTextPos=function(t,f){var n=t.substring(f);n=n.split(' ')[0];return n;};b.prototype.getNavigationObjectType=function(f){if(f===undefined||f===null||!f.isValid){return null;}var t=null;if(f.attribute.businessDataType===null&&f.root.businessDataType===null){t=p.TYPECOLLECTION;}else{var g=(f.root.isAlias)?f.root.businessDataType:f.attribute.businessDataType;var i=c.SIMPLE_SELECTION_VALUE_TYPE.getByValue("string",g);switch(i.string){case c.SIMPLE_SELECTION_VALUE_TYPE.INTEGER.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPENUMBERDT:p.TYPENUMBERCOLLECTION;}else{t=p.TYPENUMBER;}break;case c.SIMPLE_SELECTION_VALUE_TYPE.BOOLEAN.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPEBOOLEANDT:p.TYPEBOOLEANCOLLECTION;}else{t=p.TYPEBOOLEAN;}break;case c.SIMPLE_SELECTION_VALUE_TYPE.STRING.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPESTRINGDT:p.TYPESTRINGCOLLECTION;}else{t=p.TYPESTRING;}break;case c.SIMPLE_SELECTION_VALUE_TYPE.DATE.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPEDATEDT:p.TYPEDATECOLLECTION;}else{t=p.TYPEDATE;}break;case c.SIMPLE_SELECTION_VALUE_TYPE.TIME.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPETIMEDT:p.TYPETIMECOLLECTION;}else{t=p.TYPETIME;}break;case c.SIMPLE_SELECTION_VALUE_TYPE.TIMESTAMP.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPETIMESTAMPDT:p.TYPETIMESTAMPCOLLECTION;}else{t=p.TYPETIMESTAMP;}break;case c.SIMPLE_SELECTION_VALUE_TYPE.TIMESPAN.string:if(f.isCollection){t=(f.root.isDTAlias)?p.TYPETIMEINTERVALDT:p.TYPETIMEINTERVALCOLLECTION;}else{t=p.TYPETIMEINTERVAL;}break;}}return t;};b.prototype.getStringArray=function(f){var s="\n [\n ";var i;for(i=0;i<f.length;i++){if(f[i]instanceof Object){s+=f[i].getString();}else{s+=f[i];}if(i===(f.length-1)){s+="\n ";}else{s+=",\n ";}}s+="]\n ";return s;};b.prototype.getNavigationParts=function(n){var f=[];var t;var r=0;while(r>-1){r=n.indexOf(".");if(r===-1){f.push(n);return f;}t=n.slice(0,r);f.push(t);n=n.slice(r+1);}return f;};b.prototype.getCollectionRelTypeFromBusinessDT=function(f){var r;switch(f){case c.TYPE_BOOLEAN:r=c.TYPE_BOOLEAN_COLLECTION;break;case c.TYPE_STRING:r=c.TYPE_STRING_COLLECTION;break;case c.TYPE_NUMERIC:r=c.TYPE_NUMERIC_COLLECTION;break;case c.TYPE_DATE:r=c.TYPE_DATE_COLLECTION;break;case c.TYPE_TIMESPAN:r=c.TYPE_TIMESPAN_COLLECTION;break;case c.TYPE_TIMESTAMP:r=c.TYPE_TIMESTAMP_COLLECTION;break;case c.TYPE_TIME:r=c.TYPE_TIME_COLLECTION;break;default:r=f;break;}return r;};b.prototype.getBusinessDTFromRelType=function(r){var f={};f[c.propertiesEnum.isCollection]=false;f[c.propertiesEnum.businessType]=r;switch(r){case c.TYPE_SINGLE_EXPRESSION_BOOLEAN:f[c.propertiesEnum.businessType]=c.TYPE_BOOLEAN;break;case c.TYPE_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=null;break;case c.TYPE_BOOLEAN_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_BOOLEAN;break;case c.TYPE_STRING_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_STRING;break;case c.TYPE_NUMERIC_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_NUMERIC;break;case c.TYPE_DATE_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_DATE;break;case c.TYPE_TIMESPAN_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_TIMESPAN;break;case c.TYPE_TIMESTAMP_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_TIMESTAMP;break;case c.TYPE_TIME_COLLECTION:f[c.propertiesEnum.isCollection]=true;f[c.propertiesEnum.businessType]=c.TYPE_TIME;break;default:}return f;};b.prototype.updateValueListTokenType=function(f,t,s,g,m){var i=m.getValueListAttribute();if(i){f.input.tokens[t].isFromValueList=true;f.input.tokens[t].valueListName=i.attributeValueList;}};b.prototype.getTokenTypeInfoForConstant=function(t){var i={};i.category=null;i.type=null;switch(t){case p.STRING:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_STRING;break;case p.INT:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_NUMERIC;break;case p.ZERO_TO_ONE:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_NUMERIC;break;case p.ZERO_OR_ONE:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_NUMERIC;break;case p.DECIMAL:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_NUMERIC;break;case p.TIMESTRING:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_TIME;break;case p.DATESTRING:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_DATE;break;case p.TIMESTAMPSTRING:i.category=c.tokenCategoryEnum.dynamic;i.type=c.TYPE_TIMESTAMP;break;case p.TRUE:i.category=c.tokenCategoryEnum.fixed;i.type=c.TYPE_BOOLEAN;break;case p.FALSE:i.category=c.tokenCategoryEnum.fixed;i.type=c.TYPE_BOOLEAN;break;case p.NULL:i.category=c.tokenCategoryEnum.fixed;i.type=null;break;default:break;}return i;};b.prototype.getTokenTypeInfoForReservedword=function(t){var i={};i.category=null;switch(t){case p.OR:case p.AND:i.category=c.tokenCategoryEnum.conjunctionOp;break;case p.EQ_SIGN:case p.NOT_EQUAL_SIGN:case p.GREATER_EQUAL_SIGN:case p.LESS_EQUAL_SIGN:case p.GREATER_SIGN:case p.LESS_SIGN:case p.IS_EQUAL:case p.IS_NOT_EQUAL:case p.IS_GREATER_THAN:case p.IS_LESS_THAN:case p.IS_EQUAL_OR_GREATER_THAN:case p.IS_EQUAL_OR_LESS_THAN:case p.IS_LIKE:case p.LIKE:case p.IS_NOT_LIKE:case p.NOT_LIKE:case p.CONTAINS:case p.DOES_NOT_CONTAIN:case p.START_WITH:case p.DOES_NOT_START:case p.END_WITH:case p.DOES_NOT_END:case p.IN:case p.IS_BEFORE:case p.BEFORE:case p.IS_NOT_BEFORE:case p.IS_AFTER:case p.AFTER:case p.IS_NOT_AFTER:i.category=c.tokenCategoryEnum.comparisonOp;break;case p.IS_IN_THE_LAST:case p.IS_NOT_IN_THE_LAST:case p.IS_IN_THE_NEXT:case p.IS_NOT_IN_THE_NEXT:i.category=c.tokenCategoryEnum.comparisonDateTimeOp;break;case p.BETWEEN:case p.IS_BETWEEN:case p.IS_NOT_BETWEEN:i.category=c.tokenCategoryEnum.comparisonBetweenOp;break;case p.NOT_IN:case p.EXISTS_IN:case p.DOES_NOT_EXISTS_IN:i.category=c.tokenCategoryEnum.comparisonExistOp;break;case p.NUMBER_OF:case p.COUNT_DISTINCT_OF:case p.SUM_OF:case p.AVERAGE_OF:case p.LOWEST:case p.HIGHEST:case p.EARLIEST:case p.MOST_RECENT:i.category=c.tokenCategoryEnum.func;break;case p.CONCATENATE:case p.ROUND:case p.POWER:case p.SIN:case p.COS:case p.LOG:case p.WITH_FUZZY:case p.PATTERN:case p.OCCURENCES_REGEXP:i.category=c.tokenCategoryEnum.funcAdvances;break;case p.PLUS:case p.MINUS:case p.MULT:case p.DIV:i.category=c.tokenCategoryEnum.arithmeticOp;break;case p.TODAY:case p.TOMORROW:case p.YESTERDAY:i.category=c.tokenCategoryEnum.value;break;case p.SECOND:case p.MINUTE:case p.HOUR:case p.DAY:case p.WEEK:case p.MONTH:case p.YEAR:i.category=c.tokenCategoryEnum.UOM;break;case p.WITH_THE_HIGHEST:case p.WITH_THE_LOWEST:case p.WITH_THE_MOST_RECENT:case p.WITH_THE_EARLIEST:case p.SORTED_FROM_Z_TO_A_BY:case p.SORTED_FROM_A_TO_Z_BY:i.category=c.tokenCategoryEnum.sortingOp;break;case p.ALL_OF:case p.ANY_OF:i.category=c.tokenCategoryEnum.structuredCond;break;case p.WHERE:i.category=c.tokenCategoryEnum.filterOp;break;case p.GROUP_BY:case p.PER:i.category=c.tokenCategoryEnum.groupOp;break;default:break;}return i;};b.prototype.getTokenTypeMetadata=function(t,n,f,i,m){var r={};if(typeof t==="undefined"||t===null){return r;}if(f===o.antlr.runtime.Token.HIDDEN_CHANNEL&&!this.isEmptyString(n)){r.group=c.tokenTypesEnum.vocabulary;return r;}switch(t){case p.WS:r.group=c.tokenTypesEnum.whitespace;break;case p.NAVIGATION:r.group=(f===o.antlr.runtime.Token.HIDDEN_CHANNEL)?c.tokenTypesEnum.vocabulary:c.tokenTypesEnum.unknown;break;case p.ANYCHAR:case p.COLON:r.group=c.tokenTypesEnum.unknown;break;case p.STRING:case p.INT:case p.ZERO_TO_ONE:case p.ZERO_OR_ONE:case p.DECIMAL:case p.TIMESTRING:case p.DATESTRING:case p.TIMESTAMPSTRING:case p.TRUE:case p.FALSE:case p.NULL:if(i){r.group=c.tokenTypesEnum.valueList;}else{r.group=c.tokenTypesEnum.constant;r.info=this.getTokenTypeInfoForConstant(t);}break;case p.TYPENUMBERCOLLECTION:case p.TYPENUMBER:case p.TYPEBOOLEANCOLLECTION:case p.TYPEBOOLEAN:case p.TYPESTRINGCOLLECTION:case p.TYPESTRING:case p.TYPEDATECOLLECTION:case p.TYPEDATE:case p.TYPETIMECOLLECTION:case p.TYPETIME:case p.TYPETIMESTAMPCOLLECTION:case p.TYPETIMESTAMP:case p.TYPETIMEINTERVALCOLLECTION:case p.TYPETIMEINTERVAL:case p.TYPECOLLECTION:case p.TYPEATTRIBUTE:r.group=c.tokenTypesEnum.vocabulary;var g=m.getCurrentNavigationObject(n);if(g!==undefined&&g!==null&&g.isValid){r.group=g.root.isAlias?c.tokenTypesEnum.alias:c.tokenTypesEnum.vocabulary;}break;case p.TYPENUMBERDT:case p.TYPEBOOLEANDT:case p.TYPESTRINGDT:case p.TYPEDATEDT:case p.TYPETIMEDT:case p.TYPETIMESTAMPDT:case p.TYPETIMEINTERVALDT:r.group=c.tokenTypesEnum.alias;r.info=this.getTokenTypeInfoForReservedword(t);break;case p.TYPENUMBERPARAMETER:case p.TYPESTRINGPARAMETER:case p.TYPEDATEPARAMETER:case p.TYPEBOOLEANPARAMETER:case p.TYPETIMEINTERVALPARAMETER:case p.TYPETIMEPARAMETER:case p.TYPETIMESTAMPPARAMETER:var j=m.getCurrentNavigationObject(n);if(j.isValid){r.group=c.tokenTypesEnum.parameter;}break;default:if(f===o.antlr.runtime.Token.HIDDEN_CHANNEL){r.group=c.tokenTypesEnum.vocabulary;}else{r.group=c.tokenTypesEnum.reservedWord;r.info=this.getTokenTypeInfoForReservedword(t);}break;}return r;};b.prototype.TokenInfo=function(t,f,i,s,g,j,m){this.start=s;this.end=g;this.tokenType=f;if(j){this.info={};var k=m.vocaRTServ.getValueListType(m.vocabulary,j);switch(k){case'Internal':this.info.key=j;break;case'External':this.info.id=j;var l=m.vocaRTServ.getValueList(m.vocabulary,j);var n=l.metadata;n.businessDataType=l.businessDataType;this.info.metadata=n;break;default:this.info.key=j;}}else if(i){this.info=i;}this.token=t;};function e(f,g,m,t,i,n){var j=null;var k=t[i];var l=t[i+2];if(l&&l.type===n){var q=g.substring(k.start,l.stop+1);var r=f.getTokenTypeMetadata(l.type,q,l.channel,false,m);j=new f.TokenInfo(q,r.group,r.info,k.start,l.stop,null,m);}return j;}b.prototype.buildTokenTypes=function(f,g,m){var s={};s[p.CONTAINS]=p.PATTERN;s[p.DOES_NOT_CONTAIN]=p.PATTERN;s[p.NUMBER_OF]=p.OCCURENCES_REGEXP;var j=g.replace(/\\/g,"\\\\");var t,k=[];var l=j.length;var q,r,w,x,y;var z=false;var A=null;var B=f.input.tokens;if(B.length===0){var n=j.length;t=new this.TokenInfo(j,c.tokenTypesEnum.unknown,null,0,n,null,m);k.push(t);}var i=0;while(i<B.length){q=B[i];r=q.start;w=q.stop;z=(q.hasOwnProperty("isFromValueList")?q.isFromValueList:false);A=(q.hasOwnProperty("valueListName")?q.valueListName:null);x=j.substring(r,w+1);if(f.lexerErrorOccurred&&f.lexerErrorStartIndex===r){x=j.substring(r,l+1);t=new this.TokenInfo(x,c.tokenTypesEnum.unknown,null,r,l,null,m);k.push(t);break;}else{y=this.getTokenTypeMetadata(q.type,x,q.channel,z,m);if(s.hasOwnProperty(q.type)){t=e(this,j,m,B,i,s[q.type]);if(t===null){t=new this.TokenInfo(x,y.group,y.info,r,w,A,m);i++;}else{i=i+3;}}else{t=new this.TokenInfo(x,y.group,y.info,r,w,A,m);i++;}k.push(t);}}return k;};b.prototype.parseWithValidation=function(l,f,t,m){this.overwriteLexerReportError(f,l,m);this.overwriteParserReportErrorValidateMode(f,m);this.parseType(f,t);};b.prototype.handleError=function(m,f,g){var t=(g.hasOwnProperty(c.propertiesEnum.flags)&&g.flags.hasOwnProperty(c.propertiesEnum.raiseError)&&g.flags[c.propertiesEnum.raiseError]===false)?false:true;if(f){var i=R.getInstance().getMessage(m,f);if(g.parseResult.errorDetails.indexOf(i)<0){if(t){R.getInstance().addMessage(m,f);}g.parseResult.errorDetails.push(i);}}g.parseResult.errorID=m;g.parseResult.status=c.statusEnum.ERROR;};b.prototype.handleWarning=function(m,f){if(!f||!this.isAutocompleteMode(f)){throw new h.HrfException(m);}};b.prototype.validateRootObjectContext=function(n,m){var i=0;if(m.flags[c.propertiesEnum.rootObjectContext]&&n.isValid&&!n.root.isAlias&&!n.isVocaRule&&!n.modifiers.all){if(!m[c.propertiesEnum.rootObjectContext].name){m[c.propertiesEnum.rootObjectContext].name=n.root.name;}else if(m[c.propertiesEnum.rootObjectContext].name!==n.root.name){this.handleError("error_in_expression_root_object_validation_message",[m[c.propertiesEnum.rootObjectContext].name,n.root.name],m);throw new h.HrfException();}if(m[c.propertiesEnum.rootObjectContext].name){if(n.associations.path.length>0){var f=n.associations.path[0].name;if(!m[c.propertiesEnum.rootObjectContext].assocNames.hasOwnProperty(f)){m[c.propertiesEnum.rootObjectContext].assocNames[f]=true;var g=m.vocaRTServ.getAssociation(m.vocabulary,n.root.name,n.associations.path[0].name,true);if(a.isCardinalityCollection(g.cardinality)){for(i=0;i<g.attrs.length;i++){m[c.propertiesEnum.rootObjectContext].assocs.push(g.attrs[i].source);}}}}}}};b.prototype.getNavigationObjectFromPath=function(n,k,m){var f=m.getValueListAttribute();var g=m.vocabulary;var i=a.validateNavigationDetails(n,m.vocaRTServ,g,[],f,m.termMode);i.isParameter=false;m.setCurrentNavigationObject(k,i);this.validateRootObjectContext(i,m);return m.getCurrentNavigationObject(k);};b.prototype.endsWith=function(s,f){return s.indexOf(f,s.length-f.length)!==-1;};b.prototype.validateNumberOfArguments=function(f,g,i){if(f!==g){this.handleWarning(i+":  incompatible number of required arguments, exactly "+g.toString()+"arguments required.");return false;}return true;};b.prototype.validateArgumentExist=function(f,g){if(!f||!(typeof f==='object')){this.handleWarning(g+": incompatible number of required arguments.");return false;}return true;};b.prototype.validateArgumentType=function(f,g,j,k,l){var m=l+": "+g+" input arg must be instance of ";var n=false;var q;var i;for(i=0;i<j.length;++i){m+=k[i];if(i<j.length-1){m+=" or ";}q=j[i];if(f instanceof q){n=true;}}m+=".";if(!n){this.handleWarning(m);}return n;};b.prototype.validateArgumentsType=function(f,g,j){var k=this.validateArgumentExist(f,g);if(!k){return false;}var i,l,m;for(i=0;i<j.length;++i){l=j[i].name;if(!(f.hasOwnProperty(l))){if(j[i].required){this.handleWarning(g+": incompatible number of required arguments.");return false;}continue;}if(j[i].hasOwnProperty("type")){m=f[l];if(this.validateArgumentType(m,l,j[i].type,j[i].typeName,g)===false){k=false;}}}return k;};b.prototype.isEmptyString=function(s){if(/\S/.test(s)){return false;}return true;};b.prototype.getTokensStartWithString=function(f,s){var t=f.getTokenNames();var m=f.parseModelLib.getModelManger();var g=this.getTokensDisplayMap(m);var r=[];var i,j,k;for(i=0;i<t.length;++i){j=t[i];k=(g.hasOwnProperty(j)?g[j]:j);if(k===undefined||k===null){continue;}k=k.toLowerCase();if(k.indexOf(s)===0){r.push(k);}}return r;};b.prototype.getTokensNames=function(f,g){var j=f.getTokenNames();var m=f.parseModelLib.getModelManger();var k=this.getTokensDisplayMap(m);var r=[];var l=[];var n=u.removeDuplicate(g);var i,t,q,s,w,x;for(i=0;i<n.length;i++){t=n[i];if(t===undefined||t==='-1'||t===-1||t==='-2'||t===-2){continue;}q=j[t];if(q.indexOf("PARAMETER")!==-1||q.indexOf("TYPECOLLECTION")!==-1||q.indexOf("DT")!==-1){continue;}if(q.indexOf("COLLECTION")!==-1){s=q.split("COLLECTION");q=s[0];}w=(k.hasOwnProperty(q)?k[q]:q);if(w===undefined||w===null){continue;}w=w.toLowerCase();l.push("'"+w+"' ");x=w.split("type");if(x.length>1&&!k.hasOwnProperty(x[1])){r.push(" "+x[1]);}}r=this.sortAndRemoveDuplicates(r);if(r.length){r[0]=r[0].substring(1);}else if(l.length&&l.length<=3&&r.length===0){l[l.length-1]=l[l.length-1].replace(/\s?$/,'');return l;}return r;};b.prototype.isFirstErrorAfterWS=function(f){var g=f.input.tokens;var i;for(i=0;i<g.length;i++){if(g[i].type!==p.WS){break;}}if(i===f.errorIndex){return true;}return false;};b.prototype.getLastTokenTypeAndIgnoreWS=function(f){var g=f.input.tokens;var i=g.length;if(i===0){return-1;}for(i=i-1;i>=0;i--){if(g[i].type!==p.WS&&g[i].type!==p.NAVIGATION&&g[i].channel!==o.antlr.runtime.Token.HIDDEN_CHANNEL){break;}}return(i===-1)?-1:g[i].type;};b.prototype.getLastTokenAndIgnoreWS=function(f){var g=f.input.tokens;var i=g.length;if(i===0){return-1;}for(i=i-1;i>=0;i--){if(g[i].type!==p.WS&&g[i].channel!==o.antlr.runtime.Token.HIDDEN_CHANNEL){break;}}return(i===-1)?null:g[i];};b.prototype.isTokenOnlyPartOfRealToken=function(f,t){return(t===p.IS_A||t===p.EOF||(f.lexerErrorOccurred&&t===p.WS)||t===p.NAVIGATION||t===p.NOT||t===p.IS||t===p.DOES||t===p.AVERAGE||t===p.COUNTD||t===p.FILTER||t===p.SUM||t===p.ENDS||t===p.STARTS||t===p.MAXIMUM||t===p.MINIMUM||t===p.EXIST||t===p.EXISTS||t===p.TO||t===p.THE);};b.prototype.isLastTokenPartialText=function(f){var l=this.getLastTokenAndIgnoreWS(f);if(l===null){return false;}if(l.type===p.NAVIGATION||l.text===undefined){return true;}return(this.isTokenOnlyPartOfRealToken(f,l.type));};b.prototype.isErrorTokenPartialText=function(f,g){if(g===p.EOF){return false;}if(g===p.NAVIGATION){return true;}return(this.isTokenOnlyPartOfRealToken(f,g));};b.prototype.getTokenTypeOfFirstErrorAfterWS=function(f){var g=f.input.tokens;var i=f.token.index;while(i<g.length&&g[i].type===p.WS){i++;}return g[i].type;};b.prototype.hasWhiteSpace=function(s){var i=s.lastIndexOf(' ');return i>=0&&i!==(s.length-1);};b.prototype.overwriteParserReportErrorAutocompleteModeFailedDFA=function(f,g){var m=this;f.reportError=function(i){if(i.decisionNumber!==undefined&&u.isInArray(i.decisionNumber,this.DFA_decisions)){m.handleAllDFAOptions(f,i.decisionNumber);}else{g.isPartialText=g.isPartialText||m.isErrorTokenPartialText(this,i.c);}throw new h.HrfException();};};b.prototype.overwriteParserReportErrorValidateModeFailedDFA=function(f){var m=this;f.reportError=function(g){if(g.decisionNumber!==undefined&&u.isInArray(g.decisionNumber,this.DFA_decisions)){m.handleAllDFAOptions(f,g.decisionNumber);}else{if(g.charPositionInLine&&(g.charPositionInLine===-1||(f.errorIndex!==-1&&g.charPositionInLine>=f.errorIndex))){f.tokenError=f.getTokenErrorDisplay(g.token);f.errorTokenType=g.token.type;if((g.charPositionInLine===-1&&f.errorIndex!==-1)||(g.charPositionInLine!==-1&&g.charPositionInLine>f.errorIndex)){f.outputTokens.nextTokens=[];}f.errorIndex=g.charPositionInLine;}}throw new h.HrfException();};};b.prototype.isCollection=function(t){if(t===p.TYPEBOOLEANCOLLECTION||t===p.TYPETIMEINTERVALCOLLECTION||t===p.TYPENUMBERCOLLECTION||t===p.TYPESTRINGCOLLECTION||t===p.TYPEDATECOLLECTION||t===p.TYPETIMESTAMPCOLLECTION||t===p.TYPETIMECOLLECTION||t===p.TYPEBOOLEANDT||t===p.TYPETIMEINTERVALDT||t===p.TYPENUMBERDT||t===p.TYPESTRINGDT||t===p.TYPEDATEDT||t===p.TYPETIMESTAMPDT||t===p.TYPETIMEDT){return true;}return false;};b.prototype.getLocaleTypeFormatArray=function(t,m){var f=[];var g=this.getLocaleFormat(m,false);var i;for(i=0;i<t.length;i++){if(t[i].indexOf('timestamp')>=0){f.push(g.TIMESTAMPSTRING);}else if(t[i].indexOf('time')>=0){f.push(g.TIMESTRING);}else if(t[i].indexOf('date')>=0){f.push(g.DATESTRING);}}return f;};b.prototype.overwriteParserReportErrorValidateMode=function(f,m){var g=this;f.reportError=function(A){m.parseResult.status=c.statusEnum.ERROR;var i=[];f.tokenError=null;f.errorIndex=null;f.errorTokenType=null;var j={};j.key="";j.args=[];if(A instanceof o.antlr.runtime.UnwantedTokenException&&A.expecting===-1){f.errorIndex=A.charPositionInLine;f.tokenError=f.getTokenErrorDisplay(A.getUnexpectedToken());j.key="error_in_expression_invalid_token_message";j.args[0]=f.tokenError;}else{if(A instanceof o.antlr.runtime.NoViableAltException){if(u.isInArray(A.decisionNumber,this.DFA_decisions)){g.handleFailedDFA(f,A);i=f.lastExpecting.expecting;}else{i=A.grammarDecisionDescription.slice();f.tokenError=(f.tokenError===null?f.getTokenErrorDisplay(A.token):f.tokenError);f.errorIndex=(f.errorIndex===null?A.charPositionInLine:f.errorIndex);}}else if(A instanceof o.antlr.runtime.MismatchedSetException){i=A.expecting.slice();f.errorIndex=A.charPositionInLine;f.tokenError=f.getTokenErrorDisplay(A.token);}else if(i.length===0&&A instanceof o.antlr.runtime.MismatchedTokenException){i.push(A.expecting);f.errorIndex=A.charPositionInLine;f.tokenError=f.getTokenErrorDisplay(A.token);}f.errorIndex=(f.errorIndex===null?0:f.errorIndex);if(f.errorIndex===0||g.isFirstErrorAfterWS(f)){if(g.isCollection(f.input.tokens[f.errorIndex].type)&&(!m.flags[c.propertiesEnum.isCollection])){j.key="error_in_expression_single_value_missing_message";j.args[0]=f.getTokenErrorDisplay(A.token);}else{j.key="error_in_expression_invalid_statement_message";j.args[0]=f.getTokenErrorDisplay(A.token);}}else if(f.tokenError!==null&&(f.tokenError.match("EOF")||f.tokenError.indexOf("EOF")!==-1)){j.key="incomplete_expression_message";}else{var k=f.errorTokenType!==null?f.errorTokenType:g.getTokenTypeOfFirstErrorAfterWS(A);var t=g.getTokensNames(f,i);if(t.length){if(t[0].indexOf('timestamp')>=0||t[0].indexOf('time')>=0||t[0].indexOf('date')>=0){j.key="error_in_expression_enter_suggestions_format_instead_message";j.args[0]=t;j.args[1]=g.getLocaleTypeFormatArray(t,m);j.args[2]=f.tokenError;}else if(t[0].indexOf('string')>=0&&(k===p.INT||k===p.DECIMAL)){j.key="error_in_expression_enter_string_in_single_quotes_instead_message";j.args[0]=f.tokenError;j.args[1]=u.removeSingleQuotes(f.tokenError);}else{j.key="error_in_expression_enter_suggestions_instead_message";j.args[0]=t;j.args[1]=f.tokenError;}}else{j.key="error_in_expression_invalid_entry_message";j.args[0]=f.tokenError;}if((k!==null&&k!==undefined&&(g.isCollection(k)))&&(u.isInArray(p.TYPEBOOLEAN,i)||u.isInArray(p.TYPEDATE,i)||u.isInArray(p.TYPETIMEINTERVAL,i)||u.isInArray(p.TYPENUMBER,i)||u.isInArray(p.TYPESTRING,i)||u.isInArray(p.TYPETIME,i)||u.isInArray(p.TYPETIMESTAMP,i))){var l=f.getTokenNames()[k].toLowerCase();var n=l.split("collection");var q=n[0].split("type");q=q[1];q=(q==="date"?"valid date":q);if(u.isInArray(q+" ",t)||u.isInArray(" "+q,t)||u.isInArray(q,t)){j.key="error_in_expression_single_value_missing_message";j.args[0]=f.tokenError;}}}}m.parseResult.cursorPosition=f.errorIndex;g.handleError(j.key,j.args,m);throw new h.HrfException();};};b.prototype.overwriteLexerReportError=function(f,l,m){var g=this;l.reportError=function(A){m.parseResult.status=c.statusEnum.ERROR;f.lexerErrorStartIndex=A.input.markers[1].charPositionInLine;var j;var k;var n=A.charPositionInLine;var q="";var r={};r.key="";r.args=[];if(f.lexerErrorOccurred===false){f.lexerErrorOccurred=true;if(A instanceof o.antlr.runtime.NoViableAltException||A instanceof o.antlr.runtime.MismatchedSetException||A instanceof o.antlr.runtime.MismatchedRangeException){j=f.input.tokens.length;k=A.input.data;if(j>0){var s=f.input.tokens[j-1].stop+1;q=k.substring(s,A.charPositionInLine);}else{q=k.substring(0,A.charPositionInLine);}q=q.replace(/\s\s+/g,' ');}var t=g.getTokensStartWithString(f,q);t=g.sortAndRemoveDuplicates(t);var w="";var i=0;var x="";for(i=0;i<t.length;i++){w+=x+"'"+t[i]+"'";x=", ";}if(q.indexOf("EOF")!==-1){r.key="error_in_expression_missing_token_at_the_end_of_the_expression_message";r.args[0]=w;}else{r.key="error_in_expression_missing_token_message";r.args[0]=w;r.args[1]=q;}if(A instanceof o.antlr.runtime.MismatchedTokenException){r.args[0]=this.getCharErrorDisplay(A.expecting);if(this.getCharErrorDisplay(A.c).indexOf("EOF")!==-1){r.key="error_in_expression_missing_token_at_the_end_of_the_expression_message";}else{r.key="error_in_expression_missing_token_message";r.args[1]=this.getCharErrorDisplay(A.c);}}if(A instanceof o.antlr.runtime.MismatchedRangeException){var y=new RegExp(/^\d(\d|\.|\,)*?$/);if(y.test(q)){r.key="error_in_expression_enter_suggestions_format_instead_message_two_cases";r.args[0]=q;r.args[1]='number';r.args[2]=g.getLocaleFormat(m,false).DECIMAL;r.args[3]='date';r.args[4]=g.getLocaleFormat(m,false).DATESTRING;if(j>0){n=f.input.tokens[j-1].start;}else{n=0;}}}}m.parseResult.cursorPosition=n;g.handleError(r.key,r.args,m);throw new h.HrfException();};};b.prototype.zeroPad=function(n,f){var z=f-n.toString().length+1;return[].constructor(+(z>0&&z)).join("0")+n;};b.prototype.isTimeString=function(s,t){s=s.replace(/[']+/g,'');var f=null;if(t===this.TimeFormatEnum.HHMISS){f=/^(T?)(?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)$/;}else if(t===this.TimeFormatEnum.HHMISSAMPM){f=/^(T?)(?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)( )+[AP]M$/;}return f.test(s);};b.prototype.isTimestampString=function(s,f,t){s=s.replace(/[']+/g,'');var g=null;if(f===this.DateFormatEnum.MMDDYYYY){if(t===this.TimeFormatEnum.HHMISS){g=/^(0?[1-9]|1[012])[\-\/.](0?[1-9]|[12][0-9]|3[01])[\-\/.](19|20)\d\d[\ \T](?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)$/;}else if(t===this.TimeFormatEnum.HHMISSAMPM){g=/^(0?[1-9]|1[012])[\-\/.](0?[1-9]|[12][0-9]|3[01])[\-\/.](19|20)\d\d[\ \T](?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)( )+[AP]M$/;}}else if(f===this.DateFormatEnum.DDMMYYYY){if(t===this.TimeFormatEnum.HHMISS){g=/^(0?[1-9]|[12][0-9]|3[01])[\-\/.](0?[1-9]|1[012])[\-\/.](19|20)\d\d[\ \T](?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)$/;}else if(t===this.TimeFormatEnum.HHMISSAMPM){g=/^(0?[1-9]|[12][0-9]|3[01])[\-\/.](0?[1-9]|1[012])[\-\/.](19|20)\d\d[\ \T](?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)( )+[AP]M$/;}}else if(f===this.DateFormatEnum.YYYYMMDD){if(this.timeFormat===this.TimeFormatEnum.HHMISS){g=/^(19|20)\d\d[\-\/.](0?[1-9]|1[012])[\-\/.](0?[1-9]|[12][0-9]|3[01])[\ \T](?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)$/;}else if(t===this.TimeFormatEnum.HHMISSAMPM){g=/^(19|20)\d\d[\-\/.](0?[1-9]|1[012])[\-\/.](0?[1-9]|[12][0-9]|3[01])[\ \T](?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9](Z?)( )+[AP]M$/;}}return g.test(s);};b.prototype.convertTo24Hour=function(t){var n=t.toLowerCase();var f=parseInt(n.substr(0,2),10);if(n.indexOf('am')!==-1&&f===12){n=n.replace('12','0');}if(n.indexOf('pm')!==-1&&f<12){n=n.replace(f,(f+12));}return n.replace(/(am|pm)/,'');};b.prototype.buildHanaDateString=function(f,g,t){f=f.replace(/[']+/g,'');var s=f.split(/[\.\-\/T ]/);var i="";var j="00:00:00.000000";switch(g){case this.DateFormatEnum.MMDDYYYY:i=this.zeroPad(s[2],4)+"-"+this.zeroPad(s[0],2)+"-"+this.zeroPad(s[1],2);break;case this.DateFormatEnum.DDMMYYYY:i=this.zeroPad(s[2],4)+"-"+this.zeroPad(s[1],2)+"-"+this.zeroPad(s[0],2);break;case this.DateFormatEnum.YYYYMMDD:i=this.zeroPad(s[0],4)+"-"+this.zeroPad(s[1],2)+"-"+this.zeroPad(s[2],2);break;}var k=0;if(g!==""){k=3;}else if(f.indexOf('T')===0){k=1;}switch(t){case this.TimeFormatEnum.HHMISS:j=s[k]+".000000";break;case this.TimeFormatEnum.HHMISSAMPM:j=this.convertTo24Hour(s[k])+".000000";break;}var l="";if(i!==""){l=" ";}return"'"+i+l+j+"'";};b.prototype.updateTokenType=function(t,m){var r=t.type;var f=m.contextQueue.length;if(f===0){return r;}var g=m.contextQueue[f-1];if(g.root.isAlias||g.root.isParameter){return r;}var n=t.expression;if(t.type===p.NAVIGATION){var j=g.navigation.split(".");if(g.attribute.isValid){j.pop();}var k=(j.length===0)?g.navigation+"."+n:j.join(".")+"."+n;var l=this.getNavigationObjectFromPath(k,n,m);var q=this.getNavigationObjectType(l);if(q!==null){r=this.getSingleTokenType(q);return r;}}if(this.isCollection(n.type)){var s=n.split(".");n=s[0];if(g.root.name!==s[0]){return r;}var i=1;while(i<s.length&&i<=g.associations.path.length&&s[i]===g.associations.path[i-1].name){n=g.associations.path[i-1].object;i++;}for(i;i<s.length;i++){n=n+"."+s[i];}var w=a.validateNavigationDetails(n,m.vocaRTServ,m.vocabulary,[]);if(w.isCollection){return r;}r=this.getSingleTokenType(t.type);}return r;};b.prototype.advancedFunctions={round:"round",power:"power",sin:"sin",cos:"cos",log:"log",'pattern':"textSearch",'with a fuzzy score of':"textSearch",'occurrences containing pattern':"textSearch"};b.prototype.handleAllDFAOptions=function(f,g){var j='dfa'+g+'NumberOfAlt';var k='dfa'+g+'AltNumber';var l='failedPredictDFA'+g;var D='dfa'+g+'InRule';var m='dfa'+g+'Mark';f[l]=true;var i=0,r;for(i=1;i<(f[j]+1);i++){try{f.setPred(true);f[k]=i;f.input.rewind(f[m]);r=f[D];f[r+"_DFAcall"]=true;f[r]();}catch(n){}}};b.prototype.handleFailedDFA=function(f,g,i){if(f.mode===c.AUTOCOMPLETE_MODE||f.mode===c.AUTOCOMPLETE_MODE_LOWERCASE){this.overwriteParserReportErrorAutocompleteModeFailedDFA(f,i);}else if(f.mode===c.PARSE_MODE||f.mode===c.VALIDATE_MODE){this.overwriteParserReportErrorValidateModeFailedDFA(f);}this.handleAllDFAOptions(f,g.decisionNumber);};return{parseUtilsLib:b};}());

// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
(function(m){this.CodeMirror=m();})(function(){"use strict";var c=/gecko\/\d/i.test(navigator.userAgent);var q=/MSIE \d/.test(navigator.userAgent);var s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var t=q||s;var u=t&&(q?document.documentMode||6:s[1]);var v=/WebKit\//.test(navigator.userAgent);var z=v&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var A=/Chrome\//.test(navigator.userAgent);var B=/Opera\//.test(navigator.userAgent);var C=/Apple Computer/.test(navigator.vendor);var D=/KHTML\//.test(navigator.userAgent);var E=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var F=/PhantomJS/.test(navigator.userAgent);var G=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var H=G||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var I=G||/Mac/.test(navigator.platform);var J=/win/i.test(navigator.platform);var K=B&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(K)K=Number(K[1]);if(K&&K>=15){B=false;v=true;}var L=I&&(z||B&&(K==null||K<12.11));var M=c||(t&&u>=9);var N=false,O=false;function P(p,o){if(!(this instanceof P))return new P(p,o);this.options=o=o||{};m7(J4,o,false);c1(o);var d=o.value;if(typeof d=="string")d=new h6(d,o.mode);this.doc=d;var a=this.display=new Q(p,d);a.wrapper.CodeMirror=this;Z(this);X(this);if(o.lineWrapping)this.display.wrapper.className+=" CodeMirror-wrap";if(o.autofocus&&!H)B3(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new c7()};if(t&&u<11)setTimeout(n7(A3,this,true),20);E3(this);G7();var b=this;j3(this,function(){b.curOp.forceUpdate=true;l6(b,d);if((o.autofocus&&!H)||z7()==a.input)setTimeout(n7(g4,b),20);else h4(b);for(var e in K4)if(K4.hasOwnProperty(e))K4[e](b,o[e],M4);i1(b);for(var i=0;i<Q4.length;++i)Q4[i](b);});}function Q(p,a){var d=this;var i=d.input=u7("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(v)i.style.width="1000px";else i.setAttribute("wrap","off");if(G)i.style.border="1px solid black";i.setAttribute("autocorrect","off");i.setAttribute("autocapitalize","off");i.setAttribute("spellcheck","false");d.inputDiv=u7("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");d.scrollbarH=u7("div",[u7("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.scrollbarV=u7("div",[u7("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");d.scrollbarFiller=u7("div",null,"CodeMirror-scrollbar-filler");d.gutterFiller=u7("div",null,"CodeMirror-gutter-filler");d.lineDiv=u7("div",null,"CodeMirror-code");d.selectionDiv=u7("div",null,null,"position: relative; z-index: 1");d.cursorDiv=u7("div",null,"CodeMirror-cursors");d.measure=u7("div",null,"CodeMirror-measure");d.lineMeasure=u7("div",null,"CodeMirror-measure");d.lineSpace=u7("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");d.mover=u7("div",[u7("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative");d.sizer=u7("div",[d.mover],"CodeMirror-sizer");d.heightForcer=u7("div",null,null,"position: absolute; height: "+Z6+"px; width: 1px;");d.gutters=u7("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=u7("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=u7("div",[d.inputDiv,d.scrollbarH,d.scrollbarV,d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(t&&u<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0;}if(G)i.style.width="0px";if(!v)d.scroller.draggable=true;if(D){d.inputDiv.style.height="1px";d.inputDiv.style.position="absolute";}if(t&&u<8)d.scrollbarH.style.minHeight=d.scrollbarV.style.minWidth="18px";if(p.appendChild)p.appendChild(d.wrapper);else p(d.wrapper);d.viewFrom=d.viewTo=a.first;d.view=[];d.externalMeasured=null;d.viewOffset=0;d.lastSizeC=0;d.updateLineNumbers=null;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.prevInput="";d.alignWidgets=false;d.pollingFast=false;d.poll=new c7();d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.inaccurateSelection=false;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;}function R(a){a.doc.mode=P.getMode(a.options,a.doc.modeOption);S(a);}function S(a){a.doc.iter(function(l){if(l.stateAfter)l.stateAfter=null;if(l.styles)l.styles=null;});a.doc.frontier=a.doc.first;r2(a,100);a.state.modeGen++;if(a.curOp)p3(a);}function T(a){if(a.options.lineWrapping){C7(a.display.wrapper,"CodeMirror-wrap");a.display.sizer.style.minWidth="";}else{B7(a.display.wrapper,"CodeMirror-wrap");b1(a);}V(a);p3(a);M2(a);setTimeout(function(){f1(a);},100);}function U(a){var b=Y2(a.display),w=a.options.lineWrapping;var p=w&&Math.max(5,a.display.scroller.clientWidth/Z2(a.display)-3);return function(l){if(E5(a.doc,l))return 0;var d=0;if(l.widgets)for(var i=0;i<l.widgets.length;i++){if(l.widgets[i].height)d+=l.widgets[i].height;}if(w)return d+(Math.ceil(l.text.length/p)||1)*b;else return d+b;};}function V(a){var d=a.doc,e=U(a);d.iter(function(l){var b=e(l);if(b!=l.height)p6(l,b);});}function W(a){var k7=V4[a.options.keyMap],b=k7.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"");}function X(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");M2(a);}function Y(a){Z(a);p3(a);setTimeout(function(){h1(a);},20);}function Z(a){var g=a.display.gutters,b=a.options.gutters;w7(g);for(var i=0;i<b.length;++i){var d=b[i];var e=g.appendChild(u7("div",null,"CodeMirror-gutter "+d));if(d=="CodeMirror-linenumbers"){a.display.lineGutter=e;e.style.width=(a.display.lineNumWidth||1)+"px";}}g.style.display=i?"":"none";$(a);}function $(a){var w=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=w+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?w+"px":0;}function _(l){if(l.height==0)return 0;var a=l.text.length,m,b=l;while(m=x5(b)){var f=m.find(0,true);b=f.from.line;a+=f.from.ch-f.to.ch;}b=l;while(m=y5(b)){var f=m.find(0,true);a-=b.text.length-f.from.ch;b=f.to.line;a+=b.text.length-f.to.ch;}return a;}function b1(a){var d=a.display,b=a.doc;d.maxLine=m6(b,b.first);d.maxLineLength=_(d.maxLine);d.maxLineChanged=true;b.iter(function(l){var e=_(l);if(e>d.maxLineLength){d.maxLineLength=e;d.maxLine=l;}});}function c1(o){var f=j7(o.gutters,"CodeMirror-linenumbers");if(f==-1&&o.lineNumbers){o.gutters=o.gutters.concat(["CodeMirror-linenumbers"]);}else if(f>-1&&!o.lineNumbers){o.gutters=o.gutters.slice(0);o.gutters.splice(f,1);}}function d1(a){return a.display.scroller.clientHeight-a.display.wrapper.clientHeight<Z6-3;}function e1(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,hScrollbarTakesSpace:d1(a),barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+w2(a.display))};}function f1(a,m){if(!m)m=e1(a);var d=a.display,b=K7(d.measure);var f=m.docHeight+Z6;var n=m.scrollWidth>m.clientWidth;if(n&&m.scrollWidth<=m.clientWidth+1&&b>0&&!m.hScrollbarTakesSpace)n=false;var g=f>m.clientHeight;if(g){d.scrollbarV.style.display="block";d.scrollbarV.style.bottom=n?b+"px":"0";d.scrollbarV.firstChild.style.height=Math.max(0,f-m.clientHeight+(m.barHeight||d.scrollbarV.clientHeight))+"px";}else{d.scrollbarV.style.display="";d.scrollbarV.firstChild.style.height="0";}if(n){d.scrollbarH.style.display="block";d.scrollbarH.style.right=g?b+"px":"0";d.scrollbarH.firstChild.style.width=(m.scrollWidth-m.clientWidth+(m.barWidth||d.scrollbarH.clientWidth))+"px";}else{d.scrollbarH.style.display="";d.scrollbarH.firstChild.style.width="0";}if(n&&g){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=d.scrollbarFiller.style.width=b+"px";}else d.scrollbarFiller.style.display="";if(n&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=b+"px";d.gutterFiller.style.width=d.gutters.offsetWidth+"px";}else d.gutterFiller.style.display="";if(!a.state.checkedOverlayScrollbar&&m.clientHeight>0){if(b===0){var w=I&&!E?"12px":"18px";d.scrollbarV.style.minWidth=d.scrollbarH.style.minHeight=w;var h=function(e){if(N6(e)!=d.scrollbarV&&N6(e)!=d.scrollbarH)k3(a,I3)(e);};on(d.scrollbarV,"mousedown",h);on(d.scrollbarH,"mousedown",h);}a.state.checkedOverlayScrollbar=true;}}function g1(d,a,b){var e=b&&b.top!=null?Math.max(0,b.top):d.scroller.scrollTop;e=Math.floor(e-v2(d));var f=b&&b.bottom!=null?b.bottom:e+d.wrapper.clientHeight;var g=r6(a,e),h=r6(a,f);if(b&&b.ensure){var i=b.ensure.from.line,j=b.ensure.to.line;if(i<g)return{from:i,to:r6(a,s6(m6(a,i))+d.wrapper.clientHeight)};if(Math.min(j,a.lastLine())>=h)return{from:r6(a,s6(m6(a,j))-d.wrapper.clientHeight),to:j};}return{from:g,to:Math.max(h,g+1)};}function h1(a){var d=a.display,b=d.view;if(!d.alignWidgets&&(!d.gutters.firstChild||!a.options.fixedGutter))return;var e=k1(d)-d.scroller.scrollLeft+a.doc.scrollLeft;var g=d.gutters.offsetWidth,l=e+"px";for(var i=0;i<b.length;i++)if(!b[i].hidden){if(a.options.fixedGutter&&b[i].gutter)b[i].gutter.style.left=l;var f=b[i].alignable;if(f)for(var j=0;j<f.length;j++)f[j].style.left=l;}if(a.options.fixedGutter)d.gutters.style.left=(e+g)+"px";}function i1(a){if(!a.options.lineNumbers)return false;var d=a.doc,l=j1(a.options,d.first+d.size-1),b=a.display;if(l.length!=b.lineNumChars){var e=b.measure.appendChild(u7("div",[u7("div",l)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var i=e.firstChild.offsetWidth,p=e.offsetWidth-i;b.lineGutter.style.width="";b.lineNumInnerWidth=Math.max(i,b.lineGutter.offsetWidth-p);b.lineNumWidth=b.lineNumInnerWidth+p;b.lineNumChars=b.lineNumInnerWidth?l.length:-1;b.lineGutter.style.width=b.lineNumWidth+"px";$(a);return true;}return false;}function j1(o,i){return String(o.lineNumberFormatter(i+o.firstLineNumber));}function k1(d){try{return d.scroller.getBoundingClientRect().left-d.sizer.getBoundingClientRect().left;}catch(e){return 0;}}function l1(a,b,f){var d=a.display;this.viewport=b;this.visible=g1(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.oldViewFrom=d.viewFrom;this.oldViewTo=d.viewTo;this.oldScrollerWidth=d.scroller.clientWidth;this.force=f;this.dims=u1(a);}function m1(a,b){var d=a.display,e=a.doc;if(b.editorIsHidden){r3(a);return false;}if(!b.force&&b.visible.from>=d.viewFrom&&b.visible.to<=d.viewTo&&(d.updateLineNumbers==null||d.updateLineNumbers>=d.viewTo)&&v3(a)==0)return false;if(i1(a)){r3(a);b.dims=u1(a);}var f=e.first+e.size;var g=Math.max(b.visible.from-a.options.viewportMargin,e.first);var h=Math.min(f,b.visible.to+a.options.viewportMargin);if(d.viewFrom<g&&g-d.viewFrom<20)g=Math.max(e.first,d.viewFrom);if(d.viewTo>h&&d.viewTo-h<20)h=Math.min(f,d.viewTo);if(O){g=C5(a.doc,g);h=D5(a.doc,h);}var i=g!=d.viewFrom||h!=d.viewTo||d.lastSizeC!=b.wrapperHeight;u3(a,g,h);d.viewOffset=s6(m6(a.doc,d.viewFrom));a.display.mover.style.top=d.viewOffset+"px";var j=v3(a);if(!i&&j==0&&!b.force&&(d.updateLineNumbers==null||d.updateLineNumbers>=d.viewTo))return false;var k=z7();if(j>4)d.lineDiv.style.display="none";v1(a,d.updateLineNumbers,b.dims);if(j>4)d.lineDiv.style.display="";if(k&&z7()!=k&&k.offsetHeight)k.focus();w7(d.cursorDiv);w7(d.selectionDiv);if(i){d.lastSizeC=b.wrapperHeight;r2(a,400);}d.updateLineNumbers=null;return true;}function n1(a,b){var f=b.force,d=b.viewport;for(var e=true;;e=false){if(e&&a.options.lineWrapping&&b.oldScrollerWidth!=a.display.scroller.clientWidth){f=true;}else{f=false;if(d&&d.top!=null)d={top:Math.min(a.doc.height+w2(a.display)-Z6-a.display.scroller.clientHeight,d.top)};b.visible=g1(a.display,a.doc,d);if(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;}if(!m1(a,b))break;s1(a);var g=e1(a);n2(a);p1(a,g);f1(a,g);}T6(a,"update",a);if(a.display.viewFrom!=b.oldViewFrom||a.display.viewTo!=b.oldViewTo)T6(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo);}function o1(a,b){var d=new l1(a,b);if(m1(a,d)){s1(a);n1(a,d);var e=e1(a);n2(a);p1(a,e);f1(a,e);}}function p1(a,m){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=m.docHeight+"px";a.display.gutters.style.height=Math.max(m.docHeight,m.clientHeight-Z6)+"px";}function q1(a,m){if(a.display.sizer.offsetWidth+a.display.gutters.offsetWidth<a.display.scroller.clientWidth-1){a.display.sizer.style.minHeight=a.display.heightForcer.style.top="0px";a.display.gutters.style.height=m.docHeight+"px";}}function s1(a){var d=a.display;var p=d.lineDiv.offsetTop;for(var i=0;i<d.view.length;i++){var b=d.view[i],h;if(b.hidden)continue;if(t&&u<8){var e=b.node.offsetTop+b.node.offsetHeight;h=e-p;p=e;}else{var f=b.node.getBoundingClientRect();h=f.bottom-f.top;}var g=b.line.height-h;if(h<2)h=Y2(d);if(g>.001||g<-.001){p6(b.line,h);t1(b.line);if(b.rest)for(var j=0;j<b.rest.length;j++)t1(b.rest[j]);}}}function t1(l){if(l.widgets)for(var i=0;i<l.widgets.length;++i)l.widgets[i].height=l.widgets[i].node.offsetHeight;}function u1(a){var d=a.display,l={},w={};for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){l[a.options.gutters[i]]=n.offsetLeft;w[a.options.gutters[i]]=n.offsetWidth;}return{fixedPos:k1(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:l,gutterWidth:w,wrapperWidth:d.wrapper.clientWidth};}function v1(a,b,d){var e=a.display,l=a.options.lineNumbers;var f=e.lineDiv,g=f.firstChild;function r(n){var o=n.nextSibling;if(v&&I&&a.display.currentWheelTarget==n)n.style.display="none";else n.parentNode.removeChild(n);return o;}var h=e.view,j=e.viewFrom;for(var i=0;i<h.length;i++){var k=h[i];if(k.hidden){}else if(!k.node){var n=G1(a,k,j,d);f.insertBefore(n,g);}else{while(g!=k.node)g=r(g);var m=l&&b!=null&&b<=j&&k.lineNumber;if(k.changes){if(j7(k.changes,"gutter")>-1)m=false;w1(a,k,j,d);}if(m){w7(k.lineNumber);k.lineNumber.appendChild(document.createTextNode(j1(a.options,j)));}g=k.node.nextSibling;}j+=k.size;}while(g)g=r(g);}function w1(a,l,b,d){for(var j=0;j<l.changes.length;j++){var e=l.changes[j];if(e=="text")C1(a,l);else if(e=="gutter")E1(a,l,b,d);else if(e=="class")D1(l);else if(e=="widget")F1(l,d);}l.changes=null;}function z1(l){if(l.node==l.text){l.node=u7("div",null,null,"position: relative");if(l.text.parentNode)l.text.parentNode.replaceChild(l.node,l.text);l.node.appendChild(l.text);if(t&&u<8)l.node.style.zIndex=2;}return l.node;}function A1(l){var a=l.bgClass?l.bgClass+" "+(l.line.bgClass||""):l.line.bgClass;if(a)a+=" CodeMirror-linebackground";if(l.background){if(a)l.background.className=a;else{l.background.parentNode.removeChild(l.background);l.background=null;}}else if(a){var w=z1(l);l.background=w.insertBefore(u7("div",null,a),w.firstChild);}}function B1(a,l){var e=a.display.externalMeasured;if(e&&e.line==l.line){a.display.externalMeasured=null;l.measure=e.measure;return e.built;}return X5(a,l);}function C1(a,l){var b=l.text.className;var d=B1(a,l);if(l.text==l.node)l.node=d.pre;l.text.parentNode.replaceChild(d.pre,l.text);l.text=d.pre;if(d.bgClass!=l.bgClass||d.textClass!=l.textClass){l.bgClass=d.bgClass;l.textClass=d.textClass;D1(l);}else if(b){l.text.className=b;}}function D1(l){A1(l);if(l.line.wrapClass)z1(l).className=l.line.wrapClass;else if(l.node!=l.text)l.node.className="";var a=l.textClass?l.textClass+" "+(l.line.textClass||""):l.line.textClass;l.text.className=a||"";}function E1(a,l,b,d){if(l.gutter){l.node.removeChild(l.gutter);l.gutter=null;}var m=l.line.gutterMarkers;if(a.options.lineNumbers||m){var w=z1(l);var g=l.gutter=w.insertBefore(u7("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),l.text);if(a.options.lineNumbers&&(!m||!m["CodeMirror-linenumbers"]))l.lineNumber=g.appendChild(u7("div",j1(a.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"));if(m)for(var k=0;k<a.options.gutters.length;++k){var i=a.options.gutters[k],f=m.hasOwnProperty(i)&&m[i];if(f)g.appendChild(u7("div",[f],"CodeMirror-gutter-elt","left: "+d.gutterLeft[i]+"px; width: "+d.gutterWidth[i]+"px"));}}}function F1(l,d){if(l.alignable)l.alignable=null;for(var n=l.node.firstChild,a;n;n=a){var a=n.nextSibling;if(n.className=="CodeMirror-linewidget")l.node.removeChild(n);}H1(l,d);}function G1(a,l,b,d){var e=B1(a,l);l.text=l.node=e.pre;if(e.bgClass)l.bgClass=e.bgClass;if(e.textClass)l.textClass=e.textClass;D1(l);E1(a,l,b,d);H1(l,d);return l.node;}function H1(l,d){I1(l.line,l,d,true);if(l.rest)for(var i=0;i<l.rest.length;i++)I1(l.rest[i],l,d,false);}function I1(l,a,d,b){if(!l.widgets)return;var w=z1(a);for(var i=0,e=l.widgets;i<e.length;++i){var f=e[i],n=u7("div",[f.node],"CodeMirror-linewidget");if(!f.handleMouseEvents)n.ignoreEvents=true;J1(f,n,a,d);if(b&&f.above)w.insertBefore(n,a.gutter||a.text);else w.appendChild(n);T6(f,"redraw");}}function J1(w,n,l,d){if(w.noHScroll){(l.alignable||(l.alignable=[])).push(n);var a=d.wrapperWidth;n.style.left=d.fixedPos+"px";if(!w.coverGutter){a-=d.gutterTotalWidth;n.style.paddingLeft=d.gutterTotalWidth+"px";}n.style.width=a+"px";}if(w.coverGutter){n.style.zIndex=5;n.style.position="relative";if(!w.noHScroll)n.style.marginLeft=-d.gutterTotalWidth+"px";}}var K1=P.Pos=function(l,a){if(!(this instanceof K1))return new K1(l,a);this.line=l;this.ch=a;};var L1=P.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch;};function M1(x){return K1(x.line,x.ch);}function N1(a,b){return L1(a,b)<0?b:a;}function O1(a,b){return L1(a,b)<0?a:b;}function P1(r,p){this.ranges=r;this.primIndex=p;}P1.prototype={primary:function(){return this.ranges[this.primIndex];},equals:function(o){if(o==this)return true;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return false;for(var i=0;i<this.ranges.length;i++){var h=this.ranges[i],a=o.ranges[i];if(L1(h.anchor,a.anchor)!=0||L1(h.head,a.head)!=0)return false;}return true;},deepCopy:function(){for(var o=[],i=0;i<this.ranges.length;i++)o[i]=new Q1(M1(this.ranges[i].anchor),M1(this.ranges[i].head));return new P1(o,this.primIndex);},somethingSelected:function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return true;return false;},contains:function(p,e){if(!e)e=p;for(var i=0;i<this.ranges.length;i++){var v7=this.ranges[i];if(L1(e,v7.from())>=0&&L1(p,v7.to())<=0)return i;}return-1;}};function Q1(a,h){this.anchor=a;this.head=h;}Q1.prototype={from:function(){return O1(this.anchor,this.head);},to:function(){return N1(this.anchor,this.head);},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch;}};function R1(r,p){var d=r[p];r.sort(function(a,b){return L1(a.from(),b.from());});p=j7(r,d);for(var i=1;i<r.length;i++){var e=r[i],f=r[i-1];if(L1(f.to(),e.from())>=0){var g=O1(f.from(),e.from()),h=N1(f.to(),e.to());var j=f.empty()?e.from()==e.head:f.from()==f.head;if(i<=p)--p;r.splice(--i,2,new Q1(j?h:g,j?g:h));}}return new P1(r,p);}function S1(a,h){return new P1([new Q1(a,h||a)],0);}function T1(d,n){return Math.max(d.first,Math.min(n,d.first+d.size-1));}function U1(d,p){if(p.line<d.first)return K1(d.first,0);var l=d.first+d.size-1;if(p.line>l)return K1(l,m6(d,l).text.length);return V1(p,m6(d,p.line).text.length);}function V1(p,l){var a=p.ch;if(a==null||a>l)return K1(p.line,l);else if(a<0)return K1(p.line,0);else return p;}function W1(d,l){return l>=d.first&&l<d.first+d.size;}function X1(d,a){for(var o=[],i=0;i<a.length;i++)o[i]=U1(d,a[i]);return o;}function Y1(d,v7,h,o){if(d.cm&&d.cm.display.shift||d.extend){var a=v7.anchor;if(o){var p=L1(h,a)<0;if(p!=(L1(o,a)<0)){a=h;h=o;}else if(p!=(L1(h,o)<0)){h=o;}}return new Q1(a,h);}else{return new Q1(o||h,h);}}function Z1(d,h,o,a){f2(d,new P1([Y1(d,d.sel.primary(),h,o)],0),a);}function $1(d,h,o){for(var a=[],i=0;i<d.sel.ranges.length;i++)a[i]=Y1(d,d.sel.ranges[i],h[i],null);var n=R1(a,d.sel.primIndex);f2(d,n,o);}function _1(d,i,v7,o){var r=d.sel.ranges.slice(0);r[i]=v7;f2(d,R1(r,d.sel.primIndex),o);}function b2(d,a,h,o){f2(d,S1(a,h),o);}function c2(d,a){var o={ranges:a.ranges,update:function(r){this.ranges=[];for(var i=0;i<r.length;i++)this.ranges[i]=new Q1(U1(d,r[i].anchor),U1(d,r[i].head));}};R6(d,"beforeSelectionChange",d,o);if(d.cm)R6(d.cm,"beforeSelectionChange",d.cm,o);if(o.ranges!=a.ranges)return R1(o.ranges,o.ranges.length-1);else return a;}function d2(d,a,o){var b=d.history.done,l=h7(b);if(l&&l.ranges){b[b.length-1]=a;g2(d,a,o);}else{f2(d,a,o);}}function f2(d,a,o){g2(d,a,o);A6(d,d.sel,d.cm?d.cm.curOp.id:NaN,o);}function g2(d,a,o){if(X6(d,"beforeSelectionChange")||d.cm&&X6(d.cm,"beforeSelectionChange"))a=c2(d,a);var b=o&&o.bias||(L1(a.primary().head,d.sel.primary().head)<0?-1:1);h2(d,j2(d,a,b,true));if(!(o&&o.scroll===false)&&d.cm)C4(d.cm);}function h2(d,a){if(a.equals(d.sel))return;d.sel=a;if(d.cm){d.cm.curOp.updateInput=d.cm.curOp.selectionChanged=true;W6(d.cm);}T6(d,"cursorActivity",d);}function i2(d){h2(d,j2(d,d.sel,null,false),_6);}function j2(d,a,b,m){var o;for(var i=0;i<a.ranges.length;i++){var v7=a.ranges[i];var n=k2(d,v7.anchor,b,m);var e=k2(d,v7.head,b,m);if(o||n!=v7.anchor||e!=v7.head){if(!o)o=a.ranges.slice(0,i);o[i]=new Q1(n,e);}}return o?R1(o,a.primIndex):a;}function k2(d,p,b,a){var f=false,e=p;var g=b||1;d.cantEdit=false;search:for(;;){var l=m6(d,e.line);if(l.markedSpans){for(var i=0;i<l.markedSpans.length;++i){var h=l.markedSpans[i],m=h.marker;if((h.from==null||(m.inclusiveLeft?h.from<=e.ch:h.from<e.ch))&&(h.to==null||(m.inclusiveRight?h.to>=e.ch:h.to>e.ch))){if(a){R6(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!l.markedSpans)break;else{--i;continue;}}}if(!m.atomic)continue;var n=m.find(g<0?-1:1);if(L1(n,e)==0){n.ch+=g;if(n.ch<0){if(n.line>d.first)n=U1(d,K1(n.line-1));else n=null;}else if(n.ch>l.text.length){if(n.line<d.first+d.size-1)n=K1(n.line+1,0);else n=null;}if(!n){if(f){if(!a)return k2(d,p,b,true);d.cantEdit=true;return K1(d.first,0);}f=true;n=p;g=-g;}}e=n;continue search;}}}return e;}}function l2(a){var d=a.display,b=a.doc,r={};var e=r.cursors=document.createDocumentFragment();var f=r.selection=document.createDocumentFragment();for(var i=0;i<b.sel.ranges.length;i++){var v7=b.sel.ranges[i];var g=v7.empty();if(g||a.options.showCursorWhenSelecting)o2(a,v7,e);if(!g)p2(a,v7,f);}if(a.options.moveInputWithCursor){var h=S2(a,b.sel.primary().head,"div");var w=d.wrapper.getBoundingClientRect(),l=d.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,h.top+l.top-w.top));r.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,h.left+l.left-w.left));}return r;}function m2(a,d){x7(a.display.cursorDiv,d.cursors);x7(a.display.selectionDiv,d.selection);if(d.teTop!=null){a.display.inputDiv.style.top=d.teTop+"px";a.display.inputDiv.style.left=d.teLeft+"px";}}function n2(a){m2(a,l2(a));}function o2(a,v7,o){var p=S2(a,v7.head,"div",null,null,!a.options.singleCursorHeightPerLine);var b=o.appendChild(u7("div","\u00a0","CodeMirror-cursor"));b.style.left=p.left+"px";b.style.top=p.top+"px";b.style.height=Math.max(0,p.bottom-p.top)*a.options.cursorHeight+"px";if(p.other){var d=o.appendChild(u7("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));d.style.display="";d.style.left=p.other.left+"px";d.style.top=p.other.top+"px";d.style.height=(p.other.bottom-p.other.top)*.85+"px";}}function p2(a,v7,o){var d=a.display,b=a.doc;var f=document.createDocumentFragment();var p=z2(a.display),l=p.left,r=d.lineSpace.offsetWidth-p.right;function e(x,y,a1,r1){if(y<0)y=0;y=Math.round(y);r1=Math.round(r1);f.appendChild(u7("div",null,"CodeMirror-selected","position: absolute; left: "+x+"px; top: "+y+"px; width: "+(a1==null?r-x:a1)+"px; height: "+(r1-y)+"px"));}function g(x,y,a1){var r1=m6(b,x);var x1=r1.text.length;var y1,a2;function e2(ch,x2){return R2(a,K1(x,ch),"div",r1,x2);}V7(t6(r1),y||0,a1==null?x1:a1,function(x2,to,P6){var i8=e2(x2,"left"),j8,k8,l8;if(x2==to){j8=i8;k8=l8=i8.left;}else{j8=e2(to-1,"right");if(P6=="rtl"){var m8=i8;i8=j8;j8=m8;}k8=i8.left;l8=j8.right;}if(y==null&&x2==0)k8=l;if(j8.top-i8.top>3){e(k8,i8.top,null,i8.bottom);k8=l;if(i8.bottom<j8.top)e(k8,i8.bottom,null,j8.top);}if(a1==null&&to==x1)l8=r;if(!y1||i8.top<y1.top||i8.top==y1.top&&i8.left<y1.left)y1=i8;if(!a2||j8.bottom>a2.bottom||j8.bottom==a2.bottom&&j8.right>a2.right)a2=j8;if(k8<l+1)k8=l;e(k8,j8.top,l8-k8,j8.bottom);});return{start:y1,end:a2};}var h=v7.from(),i=v7.to();if(h.line==i.line){g(h.line,h.ch,i.ch);}else{var j=m6(b,h.line),k=m6(b,i.line);var m=A5(j)==A5(k);var n=g(h.line,h.ch,m?j.text.length+1:null).end;var w=g(i.line,m?0:null,i.ch).start;if(m){if(n.top<w.top-2){e(n.right,n.top,null,n.bottom);e(l,w.top,w.left,w.bottom);}else{e(n.right,n.top,w.left-n.right,n.bottom);}}if(n.bottom<w.top)e(l,n.bottom,null,w.top);}o.appendChild(f);}function q2(a){if(!a.state.focused)return;var d=a.display;clearInterval(d.blinker);var o=true;d.cursorDiv.style.visibility="";if(a.options.cursorBlinkRate>0)d.blinker=setInterval(function(){d.cursorDiv.style.visibility=(o=!o)?"":"hidden";},a.options.cursorBlinkRate);else if(a.options.cursorBlinkRate<0)d.cursorDiv.style.visibility="hidden";}function r2(a,b){if(a.doc.mode.startState&&a.doc.frontier<a.display.viewTo)a.state.highlight.set(b,n7(s2,a));}function s2(a){var d=a.doc;if(d.frontier<d.first)d.frontier=d.first;if(d.frontier>=a.display.viewTo)return;var e=+new Date+a.options.workTime;var b=S4(d.mode,u2(a,d.frontier));var f=[];d.iter(d.frontier,Math.min(d.first+d.size,a.display.viewTo+500),function(l){if(d.frontier>=a.display.viewFrom){var o=l.styles;var h=R5(a,l,b,true);l.styles=h.styles;var g=l.styleClasses,n=h.classes;if(n)l.styleClasses=n;else if(g)l.styleClasses=null;var j=!o||o.length!=l.styles.length||g!=n&&(!g||!n||g.bgClass!=n.bgClass||g.textClass!=n.textClass);for(var i=0;!j&&i<o.length;++i)j=o[i]!=l.styles[i];if(j)f.push(d.frontier);l.stateAfter=S4(d.mode,b);}else{T5(a,l.text,b);l.stateAfter=d.frontier%5==0?S4(d.mode,b):null;}++d.frontier;if(+new Date>e){r2(a,a.options.workDelay);return true;}});if(f.length)j3(a,function(){for(var i=0;i<f.length;i++)q3(a,f[i],"text");});}function t2(a,n,p){var m,b,d=a.doc;var l=p?-1:n-(a.doc.mode.innerMode?1000:100);for(var e=n;e>l;--e){if(e<=d.first)return d.first;var f=m6(d,e-1);if(f.stateAfter&&(!p||e<=d.frontier))return e;var i=d7(f.text,null,a.options.tabSize);if(b==null||m>i){b=e-1;m=i;}}return b;}function u2(a,n,p){var d=a.doc,b=a.display;if(!d.mode.startState)return true;var e=t2(a,n,p),f=e>d.first&&m6(d,e-1).stateAfter;if(!f)f=T4(d.mode);else f=S4(d.mode,f);d.iter(e,n,function(l){T5(a,l.text,f);var g=e==n-1||e%5==0||e>=b.viewFrom&&e<b.viewTo;l.stateAfter=g?S4(d.mode,f):null;++e;});if(p)d.frontier=e;return f;}function v2(d){return d.lineSpace.offsetTop;}function w2(d){return d.mover.offsetHeight-d.lineSpace.offsetHeight;}function z2(d){if(d.cachedPaddingH)return d.cachedPaddingH;var e=x7(d.measure,u7("pre","x"));var a=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var b={left:parseInt(a.paddingLeft),right:parseInt(a.paddingRight)};if(!isNaN(b.left)&&!isNaN(b.right))d.cachedPaddingH=b;return b;}function A2(a,l,r){var w=a.options.lineWrapping;var b=w&&a.display.scroller.clientWidth;if(!l.measure.heights||w&&l.measure.width!=b){var h=l.measure.heights=[];if(w){l.measure.width=b;var d=l.text.firstChild.getClientRects();for(var i=0;i<d.length-1;i++){var e=d[i],n=d[i+1];if(Math.abs(e.bottom-n.bottom)>2)h.push((e.bottom+n.top)/2-r.top);}}h.push(r.bottom-r.top);}}function B2(l,a,b){if(l.line==a)return{map:l.measure.map,cache:l.measure.cache};for(var i=0;i<l.rest.length;i++)if(l.rest[i]==a)return{map:l.measure.maps[i],cache:l.measure.caches[i]};for(var i=0;i<l.rest.length;i++)if(q6(l.rest[i])>b)return{map:l.measure.maps[i],cache:l.measure.caches[i],before:true};}function C2(a,l){l=A5(l);var b=q6(l);var d=a.display.externalMeasured=new n3(a.doc,l,b);d.lineN=b;var e=d.built=X5(a,d);d.text=e.pre;x7(a.display.lineMeasure,e.pre);return d;}function D2(a,l,b,d){return G2(a,F2(a,l),b,d);}function E2(a,l){if(l>=a.display.viewFrom&&l<a.display.viewTo)return a.display.view[s3(a,l)];var e=a.display.externalMeasured;if(e&&l>=e.lineN&&l<e.lineN+e.size)return e;}function F2(a,l){var b=q6(l);var d=E2(a,b);if(d&&!d.text)d=null;else if(d&&d.changes)w1(a,d,b,u1(a));if(!d)d=C2(a,l);var i=B2(d,l,b);return{line:l,view:d,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:false};}function G2(a,p,b,d,e){if(p.before)b=-1;var k=b+(d||""),f;if(p.cache.hasOwnProperty(k)){f=p.cache[k];}else{if(!p.rect)p.rect=p.view.text.getBoundingClientRect();if(!p.hasHeights){A2(a,p.view,p.rect);p.hasHeights=true;}f=I2(a,p,b,d);if(!f.bogus)p.cache[k]=f;}return{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom};}var H2={left:0,right:0,top:0,bottom:0};function I2(a,p,b,d){var k7=p.map;var n,e,f,g;for(var i=0;i<k7.length;i+=3){var m=k7[i],h=k7[i+1];if(b<m){e=0;f=1;g="left";}else if(b<h){e=b-m;f=e+1;}else if(i==k7.length-3||b==h&&k7[i+3]>b){f=h-m;e=f-1;if(b>=h)g="right";}if(e!=null){n=k7[i+2];if(m==h&&d==(n.insertLeft?"left":"right"))g=d;if(d=="left"&&e==0)while(i&&k7[i-2]==k7[i-3]&&k7[i-1].insertLeft){n=k7[(i-=3)+2];g="left";}if(d=="right"&&e==h-m)while(i<k7.length-3&&k7[i+3]==k7[i+4]&&!k7[i+5].insertLeft){n=k7[(i+=3)+2];g="right";}break;}}var r;if(n.nodeType==3){for(var i=0;i<4;i++){while(e&&t7(p.line.text.charAt(m+e)))--e;while(m+f<h&&t7(p.line.text.charAt(m+f)))++f;if(t&&u<9&&e==0&&f==h-m){r=n.parentNode.getBoundingClientRect();}else if(t&&a.options.lineWrapping){var j=v7(n,e,f).getClientRects();if(j.length)r=j[d=="right"?j.length-1:0];else r=H2;}else{r=v7(n,e,f).getBoundingClientRect()||H2;}if(r.left||r.right||e==0)break;f=e;e=e-1;g="right";}if(t&&u<11)r=J2(a.display.measure,r);}else{if(e>0)g=d="right";var j;if(a.options.lineWrapping&&(j=n.getClientRects()).length>1)r=j[d=="right"?j.length-1:0];else r=n.getBoundingClientRect();}if(t&&u<9&&!e&&(!r||!r.left&&!r.right)){var k=n.parentNode.getClientRects()[0];if(k)r={left:k.left,right:k.left+Z2(a.display),top:k.top,bottom:k.bottom};else r=H2;}var l=r.top-p.rect.top,o=r.bottom-p.rect.top;var w=(l+o)/2;var x=p.view.measure.heights;for(var i=0;i<x.length-1;i++)if(w<x[i])break;var y=i?x[i-1]:0,a1=x[i];var r1={left:(g=="right"?r.right:r.left)-p.rect.left,right:(g=="left"?r.left:r.right)-p.rect.left,top:y,bottom:a1};if(!r.left&&!r.right)r1.bogus=true;if(!a.options.singleCursorHeightPerLine){r1.rtop=l;r1.rbottom=o;}return r1;}function J2(m,r){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!T7(m))return r;var a=screen.logicalXDPI/screen.deviceXDPI;var b=screen.logicalYDPI/screen.deviceYDPI;return{left:r.left*a,right:r.right*a,top:r.top*b,bottom:r.bottom*b};}function K2(l){if(l.measure){l.measure.cache={};l.measure.heights=null;if(l.rest)for(var i=0;i<l.rest.length;i++)l.measure.caches[i]={};}}function L2(a){a.display.externalMeasure=null;w7(a.display.lineMeasure);for(var i=0;i<a.display.view.length;i++)K2(a.display.view[i]);}function M2(a){L2(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;if(!a.options.lineWrapping)a.display.maxLineChanged=true;a.display.lineNumChars=null;}function N2(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft;}function O2(){return window.pageYOffset||(document.documentElement||document.body).scrollTop;}function P2(a,l,r,b){if(l.widgets)for(var i=0;i<l.widgets.length;++i)if(l.widgets[i].above){var d=I5(l.widgets[i]);r.top+=d;r.bottom+=d;}if(b=="line")return r;if(!b)b="local";var y=s6(l);if(b=="local")y+=v2(a.display);else y-=a.display.viewOffset;if(b=="page"||b=="window"){var e=a.display.lineSpace.getBoundingClientRect();y+=e.top+(b=="window"?0:O2());var x=e.left+(b=="window"?0:N2());r.left+=x;r.right+=x;}r.top+=y;r.bottom+=y;return r;}function Q2(a,b,d){if(d=="div")return b;var l=b.left,e=b.top;if(d=="page"){l-=N2();e-=O2();}else if(d=="local"||!d){var f=a.display.sizer.getBoundingClientRect();l+=f.left;e+=f.top;}var g=a.display.lineSpace.getBoundingClientRect();return{left:l-g.left,top:e-g.top};}function R2(a,p,b,l,d){if(!l)l=m6(a.doc,p.line);return P2(a,l,D2(a,l,p.ch,d),b);}function S2(a,p,b,l,d,e){l=l||m6(a.doc,p.line);if(!d)d=F2(a,l);function g(h,r){var m=G2(a,d,h,r?"right":"left",e);if(r)m.left=m.right;else m.right=m.left;return P2(a,l,m,b);}function f(h,i){var k=o[i],r=k.level%2;if(h==W7(k)&&i&&k.level<o[i-1].level){k=o[--i];h=X7(k)-(k.level%2?0:1);r=true;}else if(h==X7(k)&&i<o.length-1&&k.level<o[i+1].level){k=o[++i];h=W7(k)-k.level%2;r=false;}if(r&&h==k.to&&h>k.from)return g(h-1);return g(h,r);}var o=t6(l),h=p.ch;if(!o)return g(h);var i=d8(o,h);var j=f(h,i);if(c8!=null)j.other=f(h,c8);return j;}function T2(a,p){var l=0,p=U1(a.doc,p);if(!a.options.lineWrapping)l=Z2(a.display)*p.ch;var b=m6(a.doc,p.line);var d=s6(b)+v2(a.display);return{left:l,right:l,top:d,bottom:d+b.height};}function U2(l,a,o,x){var p=K1(l,a);p.xRel=x;if(o)p.outside=true;return p;}function V2(a,x,y){var d=a.doc;y+=a.display.viewOffset;if(y<0)return U2(d.first,0,true,-1);var l=r6(d,y),b=d.first+d.size-1;if(l>b)return U2(d.first+d.size-1,m6(d,b).text.length,true,1);if(x<0)x=0;var e=m6(d,l);for(;;){var f=W2(a,e,l,x,y);var m=y5(e);var g=m&&m.find(0,true);if(m&&(f.ch>g.from.ch||f.ch==g.from.ch&&f.xRel>0))l=q6(e=g.to.line);else return f;}}function W2(a,l,q6,x,y){var b=y-s6(l);var w=false,d=2*a.display.wrapper.clientWidth;var p=F2(a,l);function g(r){var sp=S2(a,K1(q6,r),"line",l,p);w=true;if(b>sp.bottom)return sp.left-d;else if(b<sp.top)return sp.left+d;else w=false;return sp.left;}var e=t6(l),f=l.text.length;var h=Y7(l),j=Z7(l);var k=g(h),m=w,n=g(j),o=w;if(x>n)return U2(q6,j,o,1);for(;;){if(e?j==h||j==f8(l,h,1):j-h<=1){var r=x<k||x-k<=n-x?h:j;var a1=x-(r==h?k:n);while(t7(l.text.charAt(r)))++r;var r1=U2(q6,r,r==h?m:o,a1<-1?-1:a1>1?1:0);return r1;}var x1=Math.ceil(f/2),y1=h+x1;if(e){y1=h;for(var i=0;i<x1;++i)y1=f8(l,y1,1);}var a2=g(y1);if(a2>x){j=y1;n=a2;if(o=w)n+=1000;f=x1;}else{h=y1;k=a2;m=w;f-=x1;}}}var X2;function Y2(d){if(d.cachedTextHeight!=null)return d.cachedTextHeight;if(X2==null){X2=u7("pre");for(var i=0;i<49;++i){X2.appendChild(document.createTextNode("x"));X2.appendChild(u7("br"));}X2.appendChild(document.createTextNode("x"));}x7(d.measure,X2);var h=X2.offsetHeight/50;if(h>3)d.cachedTextHeight=h;w7(d.measure);return h||1;}function Z2(d){if(d.cachedCharWidth!=null)return d.cachedCharWidth;var a=u7("span","xxxxxxxxxx");var p=u7("pre",[a]);x7(d.measure,p);var r=a.getBoundingClientRect(),w=(r.right-r.left)/10;if(w>2)d.cachedCharWidth=w;return w||10;}var $2=null;var _2=0;function a3(a){a.curOp={cm:a,viewChanged:false,startHeight:a.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++_2};if($2){$2.ops.push(a.curOp);}else{a.curOp.ownsGroup=$2={ops:[a.curOp],delayedCallbacks:[]};}}function b3(g){var a=g.delayedCallbacks,i=0;do{for(;i<a.length;i++)a[i]();for(var j=0;j<g.ops.length;j++){var o=g.ops[j];if(o.cursorActivityHandlers)while(o.cursorActivityCalled<o.cursorActivityHandlers.length)o.cursorActivityHandlers[o.cursorActivityCalled++](o.cm);}}while(i<a.length);}function c3(a){var o=a.curOp,g=o.ownsGroup;if(!g)return;try{b3(g);}finally{$2=null;for(var i=0;i<g.ops.length;i++)g.ops[i].cm.curOp=null;d3(g);}}function d3(g){var o=g.ops;for(var i=0;i<o.length;i++)e3(o[i]);for(var i=0;i<o.length;i++)f3(o[i]);for(var i=0;i<o.length;i++)g3(o[i]);for(var i=0;i<o.length;i++)h3(o[i]);for(var i=0;i<o.length;i++)i3(o[i]);}function e3(o){var a=o.cm,d=a.display;if(o.updateMaxLine)b1(a);o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<d.viewFrom||o.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&a.options.lineWrapping;o.update=o.mustUpdate&&new l1(a,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate);}function f3(o){o.updatedDisplay=o.mustUpdate&&m1(o.cm,o.update);}function g3(o){var a=o.cm,d=a.display;if(o.updatedDisplay)s1(a);o.barMeasure=e1(a);if(d.maxLineChanged&&!a.options.lineWrapping){o.adjustWidthTo=D2(a,d.maxLine,d.maxLine.text.length).left+3;o.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+o.adjustWidthTo+Z6-d.scroller.clientWidth);}if(o.updatedDisplay||o.selectionChanged)o.newSelectionNodes=l2(a);}function h3(o){var a=o.cm;if(o.adjustWidthTo!=null){a.display.sizer.style.minWidth=o.adjustWidthTo+"px";if(o.maxScrollLeft<a.doc.scrollLeft)U3(a,Math.min(a.display.scroller.scrollLeft,o.maxScrollLeft),true);a.display.maxLineChanged=false;}if(o.newSelectionNodes)m2(a,o.newSelectionNodes);if(o.updatedDisplay)p1(a,o.barMeasure);if(o.updatedDisplay||o.startHeight!=a.doc.height)f1(a,o.barMeasure);if(o.selectionChanged)q2(a);if(a.state.focused&&o.updateInput)A3(a,o.typing);}function i3(o){var a=o.cm,d=a.display,b=a.doc;if(o.adjustWidthTo!=null&&Math.abs(o.barMeasure.scrollWidth-a.display.scroller.scrollWidth)>1)f1(a);if(o.updatedDisplay)n1(a,o.update);if(d.wheelStartX!=null&&(o.scrollTop!=null||o.scrollLeft!=null||o.scrollToPos))d.wheelStartX=d.wheelStartY=null;if(o.scrollTop!=null&&(d.scroller.scrollTop!=o.scrollTop||o.forceScroll)){var e=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,o.scrollTop));d.scroller.scrollTop=d.scrollbarV.scrollTop=b.scrollTop=e;}if(o.scrollLeft!=null&&(d.scroller.scrollLeft!=o.scrollLeft||o.forceScroll)){var l=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,o.scrollLeft));d.scroller.scrollLeft=d.scrollbarH.scrollLeft=b.scrollLeft=l;h1(a);}if(o.scrollToPos){var f=y4(a,U1(b,o.scrollToPos.from),U1(b,o.scrollToPos.to),o.scrollToPos.margin);if(o.scrollToPos.isCursor&&a.state.focused)x4(a,f);}var h=o.maybeHiddenMarkers,g=o.maybeUnhiddenMarkers;if(h)for(var i=0;i<h.length;++i)if(!h[i].lines.length)R6(h[i],"hide");if(g)for(var i=0;i<g.length;++i)if(g[i].lines.length)R6(g[i],"unhide");if(d.wrapper.offsetHeight)b.scrollTop=a.display.scroller.scrollTop;if(o.updatedDisplay&&v){if(a.options.lineWrapping)q1(a,o.barMeasure);if(o.barMeasure.scrollWidth>o.barMeasure.clientWidth&&o.barMeasure.scrollWidth<o.barMeasure.clientWidth+1&&!d1(a))f1(a);}if(o.changeObjs)R6(a,"changes",a,o.changeObjs);}function j3(a,f){if(a.curOp)return f();a3(a);try{return f();}finally{c3(a);}}function k3(a,f){return function(){if(a.curOp)return f.apply(a,arguments);a3(a);try{return f.apply(a,arguments);}finally{c3(a);}};}function l3(f){return function(){if(this.curOp)return f.apply(this,arguments);a3(this);try{return f.apply(this,arguments);}finally{c3(this);}};}function m3(f){return function(){var a=this.cm;if(!a||a.curOp)return f.apply(this,arguments);a3(a);try{return f.apply(this,arguments);}finally{c3(a);}};}function n3(d,l,a){this.line=l;this.rest=B5(l);this.size=this.rest?q6(h7(this.rest))-a+1:1;this.node=this.text=null;this.hidden=E5(d,l);}function o3(a,f,b){var d=[],n;for(var p=f;p<b;p=n){var e=new n3(a.doc,m6(a.doc,p),p);n=p+e.size;d.push(e);}return d;}function p3(a,f,b,l){if(f==null)f=a.doc.first;if(b==null)b=a.doc.first+a.doc.size;if(!l)l=0;var d=a.display;if(l&&b<d.viewTo&&(d.updateLineNumbers==null||d.updateLineNumbers>f))d.updateLineNumbers=f;a.curOp.viewChanged=true;if(f>=d.viewTo){if(O&&C5(a.doc,f)<d.viewTo)r3(a);}else if(b<=d.viewFrom){if(O&&D5(a.doc,b+l)>d.viewFrom){r3(a);}else{d.viewFrom+=l;d.viewTo+=l;}}else if(f<=d.viewFrom&&b>=d.viewTo){r3(a);}else if(f<=d.viewFrom){var e=t3(a,b,b+l,1);if(e){d.view=d.view.slice(e.index);d.viewFrom=e.lineN;d.viewTo+=l;}else{r3(a);}}else if(b>=d.viewTo){var e=t3(a,f,f,-1);if(e){d.view=d.view.slice(0,e.index);d.viewTo=e.lineN;}else{r3(a);}}else{var g=t3(a,f,f,-1);var h=t3(a,b,b+l,1);if(g&&h){d.view=d.view.slice(0,g.index).concat(o3(a,g.lineN,h.lineN)).concat(d.view.slice(h.index));d.viewTo+=l;}else{r3(a);}}var i=d.externalMeasured;if(i){if(b<i.lineN)i.lineN+=l;else if(f<i.lineN+i.size)d.externalMeasured=null;}}function q3(a,l,b){a.curOp.viewChanged=true;var d=a.display,e=a.display.externalMeasured;if(e&&l>=e.lineN&&l<e.lineN+e.size)d.externalMeasured=null;if(l<d.viewFrom||l>=d.viewTo)return;var f=d.view[s3(a,l)];if(f.node==null)return;var g=f.changes||(f.changes=[]);if(j7(g,b)==-1)g.push(b);}function r3(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0;}function s3(a,n){if(n>=a.display.viewTo)return null;n-=a.display.viewFrom;if(n<0)return null;var b=a.display.view;for(var i=0;i<b.length;i++){n-=b[i].size;if(n<0)return i;}}function t3(a,o,b,d){var e=s3(a,o),f,g=a.display.view;if(!O||b==a.doc.first+a.doc.size)return{index:e,lineN:b};for(var i=0,n=a.display.viewFrom;i<e;i++)n+=g[i].size;if(n!=o){if(d>0){if(e==g.length-1)return null;f=(n+g[e].size)-o;e++;}else{f=n-o;}o+=f;b+=f;}while(C5(a.doc,b)!=b){if(e==(d<0?0:g.length-1))return null;b+=d*g[e-(d<0?1:0)].size;e+=d;}return{index:e,lineN:b};}function u3(a,f,b){var d=a.display,e=d.view;if(e.length==0||f>=d.viewTo||b<=d.viewFrom){d.view=o3(a,f,b);d.viewFrom=f;}else{if(d.viewFrom>f)d.view=o3(a,f,d.viewFrom).concat(d.view);else if(d.viewFrom<f)d.view=d.view.slice(s3(a,f));d.viewFrom=f;if(d.viewTo<b)d.view=d.view.concat(o3(a,d.viewTo,b));else if(d.viewTo>b)d.view=d.view.slice(0,s3(a,b));}d.viewTo=b;}function v3(a){var b=a.display.view,d=0;for(var i=0;i<b.length;i++){var l=b[i];if(!l.hidden&&(!l.node||l.changes))++d;}return d;}function w3(a){if(a.display.pollingFast)return;a.display.poll.set(a.options.pollInterval,function(){z3(a);if(a.state.focused)w3(a);});}function x3(a){var m=false;a.display.pollingFast=true;function p(){var b=z3(a);if(!b&&!m){m=true;a.display.poll.set(60,p);}else{a.display.pollingFast=false;w3(a);}}a.display.poll.set(20,p);}var y3=null;function z3(a){var b=a.display.input,p=a.display.prevInput,d=a.doc;if(!a.state.focused||(Q7(b)&&!p)||D3(a)||a.options.disableInput)return false;if(a.state.pasteIncoming&&a.state.fakedLastChar){b.value=b.value.substring(0,b.value.length-1);a.state.fakedLastChar=false;}var e=b.value;if(e==p&&!a.somethingSelected())return false;if(t&&u>=9&&a.display.inputHasSelection===e||I&&/[\uf700-\uf7ff]/.test(e)){A3(a);return false;}var w=!a.curOp;if(w)a3(a);a.display.shift=false;if(e.charCodeAt(0)==0x200b&&d.sel==a.display.selForContextMenu&&!p)p="\u200b";var f=0,l=Math.min(p.length,e.length);while(f<l&&p.charCodeAt(f)==e.charCodeAt(f))++f;var g=e.slice(f),h=P7(g);var m=null;if(a.state.pasteIncoming&&d.sel.ranges.length>1){if(y3&&y3.join("\n")==g)m=d.sel.ranges.length%y3.length==0&&k7(y3,P7);else if(h.length==d.sel.ranges.length)m=k7(h,function(l){return[l];});}for(var i=d.sel.ranges.length-1;i>=0;i--){var v7=d.sel.ranges[i];var k=v7.from(),n=v7.to();if(f<p.length)k=K1(k.line,k.ch-(p.length-f));else if(a.state.overwrite&&v7.empty()&&!a.state.pasteIncoming)n=K1(n.line,Math.min(m6(d,n.line).text.length,n.ch+h7(h).length));var o=a.curOp.updateInput;var r={from:k,to:n,text:m?m[i%m.length]:h,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};q4(a.doc,r);T6(a,"inputRead",a,r);if(g&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&v7.head.ch<100&&(!i||d.sel.ranges[i-1].head.line!=v7.head.line)){var x=a.getModeAt(v7.head);var y=k4(r);if(x.electricChars){for(var j=0;j<x.electricChars.length;j++)if(g.indexOf(x.electricChars.charAt(j))>-1){E4(a,y.line,"smart");break;}}else if(x.electricInput){if(x.electricInput.test(m6(d,y.line).text.slice(0,y.ch)))E4(a,y.line,"smart");}}}C4(a);a.curOp.updateInput=o;a.curOp.typing=true;if(e.length>1000||e.indexOf("\n")>-1)b.value=a.display.prevInput="";else a.display.prevInput=e;if(w)c3(a);a.state.pasteIncoming=a.state.cutIncoming=false;return true;}function A3(a,b){var m,d,e=a.doc;if(a.somethingSelected()){a.display.prevInput="";var v7=e.sel.primary();m=R7&&(v7.to().line-v7.from().line>100||(d=a.getSelection()).length>1000);var f=m?"-":d||a.getSelection();a.display.input.value=f;if(a.state.focused)i7(a.display.input);if(t&&u>=9)a.display.inputHasSelection=f;}else if(!b){a.display.prevInput=a.display.input.value="";if(t&&u>=9)a.display.inputHasSelection=null;}a.display.inaccurateSelection=m;}function B3(a){if(a.options.readOnly!="nocursor"&&(!H||z7()!=a.display.input))a.display.input.focus();}function C3(a){if(!a.state.focused){B3(a);g4(a);}}function D3(a){return a.options.readOnly||a.doc.cantEdit;}function E3(a){var d=a.display;on(d.scroller,"mousedown",k3(a,I3));if(t&&u<11)on(d.scroller,"dblclick",k3(a,function(e){if(V6(a,e))return;var f=H3(a,e);if(!f||P3(a,e)||G3(a.display,e))return;J6(e);var w=a.findWordAt(f);Z1(a.doc,w.anchor,w.head);}));else on(d.scroller,"dblclick",function(e){V6(a,e)||J6(e);});on(d.lineSpace,"selectstart",function(e){if(!G3(d,e))J6(e);});if(!M)on(d.scroller,"contextmenu",function(e){i4(a,e);});on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){T3(a,d.scroller.scrollTop);U3(a,d.scroller.scrollLeft,true);R6(a,"scroll",a);}});on(d.scrollbarV,"scroll",function(){if(d.scroller.clientHeight)T3(a,d.scrollbarV.scrollTop);});on(d.scrollbarH,"scroll",function(){if(d.scroller.clientHeight)U3(a,d.scrollbarH.scrollLeft);});on(d.scroller,"mousewheel",function(e){X3(a,e);});on(d.scroller,"DOMMouseScroll",function(e){X3(a,e);});function r(){if(a.state.focused)setTimeout(n7(B3,a),0);}on(d.scrollbarH,"mousedown",r);on(d.scrollbarV,"mousedown",r);on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0;});on(d.input,"keyup",function(e){e4.call(a,e);});on(d.input,"input",function(){if(t&&u>=9&&a.display.inputHasSelection)a.display.inputHasSelection=null;x3(a);});on(d.input,"keydown",k3(a,c4));on(d.input,"keypress",k3(a,f4));on(d.input,"focus",n7(g4,a));on(d.input,"blur",n7(h4,a));function b(e){if(!V6(a,e))M6(e);}if(a.options.dragDrop){on(d.scroller,"dragstart",function(e){S3(a,e);});on(d.scroller,"dragenter",b);on(d.scroller,"dragover",b);on(d.scroller,"drop",k3(a,R3));}on(d.scroller,"paste",function(e){if(G3(d,e))return;a.state.pasteIncoming=true;B3(a);x3(a);});on(d.input,"paste",function(){if(v&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var e=d.input.selectionStart,f=d.input.selectionEnd;d.input.value+="$";d.input.selectionEnd=f;d.input.selectionStart=e;a.state.fakedLastChar=true;}a.state.pasteIncoming=true;x3(a);});function p(e){if(a.somethingSelected()){y3=a.getSelections();if(d.inaccurateSelection){d.prevInput="";d.inaccurateSelection=false;d.input.value=y3.join("\n");i7(d.input);}}else{var f=[],g=[];for(var i=0;i<a.doc.sel.ranges.length;i++){var l=a.doc.sel.ranges[i].head.line;var h={anchor:K1(l,0),head:K1(l+1,0)};g.push(h);f.push(a.getRange(h.anchor,h.head));}if(e.type=="cut"){a.setSelections(g,null,_6);}else{d.prevInput="";d.input.value=f.join("\n");i7(d.input);}y3=f;}if(e.type=="cut")a.state.cutIncoming=true;}on(d.input,"cut",p);on(d.input,"copy",p);if(D)on(d.sizer,"mouseup",function(){if(z7()==d.input)d.input.blur();B3(a);});}function F3(a){var d=a.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;a.setSize();}function G3(d,e){for(var n=N6(e);n!=d.wrapper;n=n.parentNode){if(!n||n.ignoreEvents||n.parentNode==d.sizer&&n!=d.mover)return true;}}function H3(a,e,l,f){var d=a.display;if(!l){var b=N6(e);if(b==d.scrollbarH||b==d.scrollbarV||b==d.scrollbarFiller||b==d.gutterFiller)return null;}var x,y,g=d.lineSpace.getBoundingClientRect();try{x=e.clientX-g.left;y=e.clientY-g.top;}catch(e){return null;}var h=V2(a,x,y),i;if(f&&h.xRel==1&&(i=m6(a.doc,h.line).text).length==h.ch){var j=d7(i,i.length,a.options.tabSize)-i.length;h=K1(h.line,Math.max(0,Math.round((x-z2(a.display).left)/Z2(a.display))-j));}return h;}function I3(e){if(V6(this,e))return;var a=this,d=a.display;d.shift=e.shiftKey;if(G3(d,e)){if(!v){d.scroller.draggable=false;setTimeout(function(){d.scroller.draggable=true;},100);}return;}if(P3(a,e))return;var b=H3(a,e);window.focus();switch(O6(e)){case 1:if(b)L3(a,e,b);else if(N6(e)==d.scroller)J6(e);break;case 2:if(v)a.state.lastMiddleDown=+new Date;if(b)Z1(a.doc,b);setTimeout(n7(B3,a),20);J6(e);break;case 3:if(M)i4(a,e);break;}}var J3,K3;function L3(a,e,b){setTimeout(n7(C3,a),0);var n=+new Date,d;if(K3&&K3.time>n-400&&L1(K3.pos,b)==0){d="triple";}else if(J3&&J3.time>n-400&&L1(J3.pos,b)==0){d="double";K3={time:n,pos:b};}else{d="single";J3={time:n,pos:b};}var f=a.doc.sel,m=I?e.metaKey:e.ctrlKey;if(a.options.dragDrop&&I7&&!D3(a)&&d=="single"&&f.contains(b)>-1&&f.somethingSelected())M3(a,e,b,m);else N3(a,e,b,d,m);}function M3(a,e,b,m){var d=a.display;var f=k3(a,function(g){if(v)d.scroller.draggable=false;a.state.draggingText=false;Q6(document,"mouseup",f);Q6(d.scroller,"drop",f);if(Math.abs(e.clientX-g.clientX)+Math.abs(e.clientY-g.clientY)<10){J6(g);if(!m)Z1(a.doc,b);B3(a);if(t&&u==9)setTimeout(function(){document.body.focus();B3(a);},20);}});if(v)d.scroller.draggable=true;a.state.draggingText=f;if(d.scroller.dragDrop)d.scroller.dragDrop();on(document,"mouseup",f);on(d.scroller,"drop",f);}function N3(a,e,b,d,f){var g=a.display,h=a.doc;J6(e);var o,i,j=h.sel;if(f&&!e.shiftKey){i=h.sel.contains(b);if(i>-1)o=h.sel.ranges[i];else o=new Q1(b,b);}else{o=h.sel.primary();}if(e.altKey){d="rect";if(!f)o=new Q1(b,b);b=H3(a,e,true,true);i=-1;}else if(d=="double"){var w=a.findWordAt(b);if(a.display.shift||h.extend)o=Y1(h,o,w.anchor,w.head);else o=w;}else if(d=="triple"){var l=new Q1(K1(b.line,0),U1(h,K1(b.line+1,0)));if(a.display.shift||h.extend)o=Y1(h,o,l.anchor,l.head);else o=l;}else{o=Y1(h,o,b);}if(!f){i=0;f2(h,new P1([o],0),a7);j=h.sel;}else if(i>-1){_1(h,i,o,a7);}else{i=h.sel.ranges.length;f2(h,R1(h.sel.ranges.concat([o]),i),{scroll:false,origin:"*mouse"});}var k=b;function m(a1){if(L1(k,a1)==0)return;k=a1;if(d=="rect"){var r1=[],x1=a.options.tabSize;var y1=d7(m6(h,b.line).text,b.ch,x1);var a2=d7(m6(h,a1.line).text,a1.ch,x1);var e2=Math.min(y1,a2),x2=Math.max(y1,a2);for(var l=Math.min(b.line,a1.line),y2=Math.min(a.lastLine(),Math.max(b.line,a1.line));l<=y2;l++){var P6=m6(h,l).text,i8=e7(P6,e2,x1);if(e2==x2)r1.push(new Q1(K1(l,i8),K1(l,i8)));else if(P6.length>i8)r1.push(new Q1(K1(l,i8),K1(l,e7(P6,x2,x1))));}if(!r1.length)r1.push(new Q1(b,b));f2(h,R1(j.ranges.slice(0,i).concat(r1),i),{origin:"*mouse",scroll:false});a.scrollIntoView(a1);}else{var j8=o;var k8=j8.anchor,l8=a1;if(d!="single"){if(d=="double")var v7=a.findWordAt(a1);else var v7=new Q1(K1(a1.line,0),U1(h,K1(a1.line+1,0)));if(L1(v7.anchor,k8)>0){l8=v7.head;k8=O1(j8.from(),v7.anchor);}else{l8=v7.anchor;k8=N1(j8.to(),v7.head);}}var r1=j.ranges.slice(0);r1[i]=new Q1(U1(h,k8),l8);f2(h,R1(r1,i),a7);}}var n=g.wrapper.getBoundingClientRect();var p=0;function r(e){var a1=++p;var r1=H3(a,e,true,d=="rect");if(!r1)return;if(L1(r1,k)!=0){C3(a);m(r1);var x1=g1(g,h);if(r1.line>=x1.to||r1.line<x1.from)setTimeout(k3(a,function(){if(p==a1)r(e);}),150);}else{var y1=e.clientY<n.top?-20:e.clientY>n.bottom?20:0;if(y1)setTimeout(k3(a,function(){if(p!=a1)return;g.scroller.scrollTop+=y1;r(e);}),50);}}function x(e){p=Infinity;J6(e);B3(a);Q6(document,"mousemove",y);Q6(document,"mouseup",up);h.history.lastSelOrigin=null;}var y=k3(a,function(e){if(!O6(e))x(e);else r(e);});var up=k3(a,x);on(document,"mousemove",y);on(document,"mouseup",up);}function O3(a,e,b,p,d){try{var x=e.clientX,y=e.clientY;}catch(e){return false;}if(x>=Math.floor(a.display.gutters.getBoundingClientRect().right))return false;if(p)J6(e);var f=a.display;var l=f.lineDiv.getBoundingClientRect();if(y>l.bottom||!X6(a,b))return L6(e);y-=l.top-f.viewOffset;for(var i=0;i<a.options.gutters.length;++i){var g=f.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=x){var h=r6(a.doc,y);var j=a.options.gutters[i];d(a,b,a,h,j,e);return L6(e);}}}function P3(a,e){return O3(a,e,"gutterClick",true,T6);}var Q3=0;function R3(e){var a=this;if(V6(a,e)||G3(a.display,e))return;J6(e);if(t)Q3=+new Date;var p=H3(a,e,true),f=e.dataTransfer.files;if(!p||D3(a))return;if(f&&f.length&&window.FileReader&&window.File){var n=f.length,b=Array(n),r=0;var l=function(g,i){var h=new FileReader;h.onload=k3(a,function(){b[i]=h.result;if(++r==n){p=U1(a.doc,p);var j={from:p,to:p,text:P7(b.join("\n")),origin:"paste"};q4(a.doc,j);d2(a.doc,S1(p,k4(j)));}});h.readAsText(g);};for(var i=0;i<n;++i)l(f[i],i);}else{if(a.state.draggingText&&a.doc.sel.contains(p)>-1){a.state.draggingText(e);setTimeout(n7(B3,a),20);return;}try{var b=e.dataTransfer.getData("Text");if(b){if(a.state.draggingText&&!(I?e.metaKey:e.ctrlKey))var d=a.listSelections();g2(a.doc,S1(p,p));if(d)for(var i=0;i<d.length;++i)w4(a.doc,"",d[i].anchor,d[i].head,"drag");a.replaceSelection(b,"around","paste");B3(a);}}catch(e){}}}function S3(a,e){if(t&&(!a.state.draggingText||+new Date-Q3<100)){M6(e);return;}if(V6(a,e)||G3(a.display,e))return;e.dataTransfer.setData("Text",a.getSelection());if(e.dataTransfer.setDragImage&&!C){var i=u7("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(B){i.width=i.height=1;a.display.wrapper.appendChild(i);i._top=i.offsetTop;}e.dataTransfer.setDragImage(i,0,0);if(B)i.parentNode.removeChild(i);}}function T3(a,b){if(Math.abs(a.doc.scrollTop-b)<2)return;a.doc.scrollTop=b;if(!c)o1(a,{top:b});if(a.display.scroller.scrollTop!=b)a.display.scroller.scrollTop=b;if(a.display.scrollbarV.scrollTop!=b)a.display.scrollbarV.scrollTop=b;if(c)o1(a);r2(a,100);}function U3(a,b,i){if(i?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)return;b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);a.doc.scrollLeft=b;h1(a);if(a.display.scroller.scrollLeft!=b)a.display.scroller.scrollLeft=b;if(a.display.scrollbarH.scrollLeft!=b)a.display.scrollbarH.scrollLeft=b;}var V3=0,W3=null;if(t)W3=-.53;else if(c)W3=15;else if(A)W3=-.7;else if(C)W3=-1/3;function X3(a,e){var d=e.wheelDeltaX,b=e.wheelDeltaY;if(d==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS)d=e.detail;if(b==null&&e.detail&&e.axis==e.VERTICAL_AXIS)b=e.detail;else if(b==null)b=e.wheelDelta;var f=a.display,g=f.scroller;if(!(d&&g.scrollWidth>g.clientWidth||b&&g.scrollHeight>g.clientHeight))return;if(b&&I&&v){outer:for(var h=e.target,j=f.view;h!=g;h=h.parentNode){for(var i=0;i<j.length;i++){if(j[i].node==h){a.display.currentWheelTarget=h;break outer;}}}}if(d&&!c&&!B&&W3!=null){if(b)T3(a,Math.max(0,Math.min(g.scrollTop+b*W3,g.scrollHeight-g.clientHeight)));U3(a,Math.max(0,Math.min(g.scrollLeft+d*W3,g.scrollWidth-g.clientWidth)));J6(e);f.wheelStartX=null;return;}if(b&&W3!=null){var p=b*W3;var k=a.doc.scrollTop,l=k+f.wrapper.clientHeight;if(p<0)k=Math.max(0,k+p-50);else l=Math.min(a.doc.height,l+p+50);o1(a,{top:k,bottom:l});}if(V3<20){if(f.wheelStartX==null){f.wheelStartX=g.scrollLeft;f.wheelStartY=g.scrollTop;f.wheelDX=d;f.wheelDY=b;setTimeout(function(){if(f.wheelStartX==null)return;var m=g.scrollLeft-f.wheelStartX;var n=g.scrollTop-f.wheelStartY;var o=(n&&f.wheelDY&&n/f.wheelDY)||(m&&f.wheelDX&&m/f.wheelDX);f.wheelStartX=f.wheelStartY=null;if(!o)return;W3=(W3*V3+o)/(V3+1);++V3;},200);}else{f.wheelDX+=d;f.wheelDY+=b;}}}function Y3(a,b,d){if(typeof b=="string"){b=U4[b];if(!b)return false;}if(a.display.pollingFast&&z3(a))a.display.pollingFast=false;var p=a.display.shift,e=false;try{if(D3(a))a.state.suppressEdits=true;if(d)a.display.shift=false;e=b(a)!=$6;}finally{a.display.shift=p;a.state.suppressEdits=false;}return e;}function Z3(a){var m=a.state.keyMaps.slice(0);if(a.options.extraKeys)m.push(a.options.extraKeys);m.push(a.options.keyMap);return m;}var $3;function _3(a,e){var d=W4(a.options.keyMap),n=d.auto;clearTimeout($3);if(n&&!Y4(e))$3=setTimeout(function(){if(W4(a.options.keyMap)==d){a.options.keyMap=(n.call?n.call(null,a):n);W(a);}},50);var f=Z4(e,true),h=false;if(!f)return false;var k=Z3(a);if(e.shiftKey){h=X4("Shift-"+f,k,function(b){return Y3(a,b,true);})||X4(f,k,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion)return Y3(a,b);});}else{h=X4(f,k,function(b){return Y3(a,b);});}if(h){J6(e);q2(a);T6(a,"keyHandled",a,f,e);}return h;}function a4(a,e,d){var h=X4("'"+d+"'",Z3(a),function(b){return Y3(a,b,true);});if(h){J6(e);q2(a);T6(a,"keyHandled",a,"'"+d+"'",e);}return h;}var b4=null;function c4(e){var a=this;C3(a);if(V6(a,e))return;if(t&&u<11&&e.keyCode==27)e.returnValue=false;var b=e.keyCode;a.display.shift=b==16||e.shiftKey;var h=_3(a,e);if(B){b4=h?b:null;if(!h&&b==88&&!R7&&(I?e.metaKey:e.ctrlKey))a.replaceSelection("",null,"cut");}if(b==18&&!/\bCodeMirror-crosshair\b/.test(a.display.lineDiv.className))d4(a);}function d4(a){var l=a.display.lineDiv;C7(l,"CodeMirror-crosshair");function b(e){if(e.keyCode==18||!e.altKey){B7(l,"CodeMirror-crosshair");Q6(document,"keyup",b);Q6(document,"mouseover",b);}}on(document,"keyup",b);on(document,"mouseover",b);}function e4(e){if(e.keyCode==16)this.doc.sel.shift=false;V6(this,e);}function f4(e){var a=this;if(V6(a,e)||e.ctrlKey&&!e.altKey||I&&e.metaKey)return;var k=e.keyCode,b=e.charCode;if(B&&k==b4){b4=null;J6(e);return;}if(((B&&(!e.which||e.which<10))||D)&&_3(a,e))return;var d=String.fromCharCode(b==null?k:b);if(a4(a,e,d))return;if(t&&u>=9)a.display.inputHasSelection=null;x3(a);}function g4(a){if(a.options.readOnly=="nocursor")return;if(!a.state.focused){R6(a,"focus",a);a.state.focused=true;C7(a.display.wrapper,"CodeMirror-focused");if(!a.curOp&&a.display.selForContextMenu!=a.doc.sel){A3(a);if(v)setTimeout(n7(A3,a,true),0);}}w3(a);q2(a);}function h4(a){if(a.state.focused){R6(a,"blur",a);a.state.focused=false;B7(a.display.wrapper,"CodeMirror-focused");}clearInterval(a.display.blinker);setTimeout(function(){if(!a.state.focused)a.display.shift=false;},150);}function i4(a,e){if(V6(a,e,"contextmenu"))return;var d=a.display;if(G3(d,e)||j4(a,e))return;var p=H3(a,e),b=d.scroller.scrollTop;if(!p||B)return;var r=a.options.resetSelectionOnContextMenu;if(r&&a.doc.sel.contains(p)==-1)k3(a,f2)(a.doc,S1(p),_6);var o=d.input.style.cssText;d.inputDiv.style.position="absolute";d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(t?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(v)var f=window.scrollY;B3(a);if(v)window.scrollTo(null,f);A3(a);if(!a.somethingSelected())d.input.value=d.prevInput=" ";d.selForContextMenu=a.doc.sel;clearTimeout(d.detectingSelectAll);function g(){if(d.input.selectionStart!=null){var i=a.somethingSelected();var j=d.input.value="\u200b"+(i?d.input.value:"");d.prevInput=i?"":"\u200b";d.input.selectionStart=1;d.input.selectionEnd=j.length;d.selForContextMenu=a.doc.sel;}}function h(){d.inputDiv.style.position="relative";d.input.style.cssText=o;if(t&&u<9)d.scrollbarV.scrollTop=d.scroller.scrollTop=b;w3(a);if(d.input.selectionStart!=null){if(!t||(t&&u<9))g();var i=0,j=function(){if(d.selForContextMenu==a.doc.sel&&d.input.selectionStart==0)k3(a,U4.selectAll)(a);else if(i++<10)d.detectingSelectAll=setTimeout(j,500);else A3(a);};d.detectingSelectAll=setTimeout(j,200);}}if(t&&u>=9)g();if(M){M6(e);var m=function(){Q6(window,"mouseup",m);setTimeout(h,20);};on(window,"mouseup",m);}else{setTimeout(h,50);}}function j4(a,e){if(!X6(a,"gutterContextMenu"))return false;return O3(a,e,"gutterContextMenu",false,R6);}var k4=P.changeEnd=function(a){if(!a.text)return a.to;return K1(a.from.line+a.text.length-1,h7(a.text).length+(a.text.length==1?a.from.ch:0));};function l4(p,a){if(L1(p,a.from)<0)return p;if(L1(p,a.to)<=0)return k4(a);var l=p.line+a.text.length-(a.to.line-a.from.line)-1,b=p.ch;if(p.line==a.to.line)b+=k4(a).ch-a.to.ch;return K1(l,b);}function m4(d,a){var o=[];for(var i=0;i<d.sel.ranges.length;i++){var v7=d.sel.ranges[i];o.push(new Q1(l4(v7.anchor,a),l4(v7.head,a)));}return R1(o,d.sel.primIndex);}function n4(p,o,n){if(p.line==o.line)return K1(n.line,p.ch-o.ch+n.ch);else return K1(n.line+(p.line-o.line),p.ch);}function o4(d,a,h){var o=[];var b=K1(d.first,0),n=b;for(var i=0;i<a.length;i++){var e=a[i];var f=n4(e.from,b,n);var g=n4(k4(e),b,n);b=e.to;n=g;if(h=="around"){var v7=d.sel.ranges[i],j=L1(v7.head,v7.anchor)<0;o[i]=new Q1(j?g:f,j?f:g);}else{o[i]=new Q1(f,f);}}return new P1(o,d.sel.primIndex);}function p4(d,a,b){var o={canceled:false,from:a.from,to:a.to,text:a.text,origin:a.origin,cancel:function(){this.canceled=true;}};if(b)o.update=function(f,e,g,h){if(f)this.from=U1(d,f);if(e)this.to=U1(d,e);if(g)this.text=g;if(h!==undefined)this.origin=h;};R6(d,"beforeChange",d,o);if(d.cm)R6(d.cm,"beforeChange",d.cm,o);if(o.canceled)return null;return{from:o.from,to:o.to,text:o.text,origin:o.origin};}function q4(d,a,b){if(d.cm){if(!d.cm.curOp)return k3(d.cm,q4)(d,a,b);if(d.cm.state.suppressEdits)return;}if(X6(d,"beforeChange")||d.cm&&X6(d.cm,"beforeChange")){a=p4(d,a,true);if(!a)return;}var e=N&&!b&&q5(d,a.from,a.to);if(e){for(var i=e.length-1;i>=0;--i)r4(d,{from:e[i].from,to:e[i].to,text:i?[""]:a.text});}else{r4(d,a);}}function r4(d,a){if(a.text.length==1&&a.text[0]==""&&L1(a.from,a.to)==0)return;var b=m4(d,a);y6(d,a,b,d.cm?d.cm.curOp.id:NaN);u4(d,a,b,n5(d,a));var r=[];k6(d,function(d,e){if(!e&&j7(r,d.history)==-1){I6(d.history,a);r.push(d.history);}u4(d,a,null,n5(d,a));});}function s4(d,a,b){if(d.cm&&d.cm.state.suppressEdits)return;var h=d.history,e,f=d.sel;var g=a=="undo"?h.done:h.undone,j=a=="undo"?h.undone:h.done;for(var i=0;i<g.length;i++){e=g[i];if(b?e.ranges&&!e.equals(d.sel):!e.ranges)break;}if(i==g.length)return;h.lastOrigin=h.lastSelOrigin=null;for(;;){e=g.pop();if(e.ranges){B6(e,j);if(b&&!e.equals(d.sel)){f2(d,e,{clearRedo:false});return;}f=e;}else break;}var k=[];B6(f,j);j.push({changes:k,generation:h.generation});h.generation=e.generation||++h.maxGeneration;var l=X6(d,"beforeChange")||d.cm&&X6(d.cm,"beforeChange");for(var i=e.changes.length-1;i>=0;--i){var m=e.changes[i];m.origin=a;if(l&&!p4(d,m,false)){g.length=0;return;}k.push(v6(d,m));var n=i?m4(d,m):h7(g);u4(d,m,n,p5(d,m));if(!i&&d.cm)d.cm.scrollIntoView({from:m.from,to:k4(m)});var r=[];k6(d,function(d,o){if(!o&&j7(r,d.history)==-1){I6(d.history,m);r.push(d.history);}u4(d,m,null,p5(d,m));});}}function t4(a,b){if(b==0)return;a.first+=b;a.sel=new P1(k7(a.sel.ranges,function(v7){return new Q1(K1(v7.anchor.line+b,v7.anchor.ch),K1(v7.head.line+b,v7.head.ch));}),a.sel.primIndex);if(a.cm){p3(a.cm,a.first,a.first-b,b);for(var d=a.cm.display,l=d.viewFrom;l<d.viewTo;l++)q3(a.cm,l,"gutter");}}function u4(d,a,b,e){if(d.cm&&!d.cm.curOp)return k3(d.cm,u4)(d,a,b,e);if(a.to.line<d.first){t4(d,a.text.length-1-(a.to.line-a.from.line));return;}if(a.from.line>d.lastLine())return;if(a.from.line<d.first){var f=a.text.length-1-(d.first-a.from.line);t4(d,f);a={from:K1(d.first,0),to:K1(a.to.line+f,a.to.ch),text:[h7(a.text)],origin:a.origin};}var l=d.lastLine();if(a.to.line>l){a={from:a.from,to:K1(l,m6(d,l).text.length),text:[a.text[0]],origin:a.origin};}a.removed=n6(d,a.from,a.to);if(!b)b=m4(d,a);if(d.cm)v4(d.cm,a,e);else d6(d,a,e);g2(d,b,_6);}function v4(a,b,d){var e=a.doc,f=a.display,g=b.from,h=b.to;var r=false,i=g.line;if(!a.options.lineWrapping){i=q6(A5(m6(e,g.line)));e.iter(i,h.line+1,function(m){if(m==f.maxLine){r=true;return true;}});}if(e.sel.contains(b.from,b.to)>-1)W6(a);d6(e,b,d,U(a));if(!a.options.lineWrapping){e.iter(i,g.line+b.text.length,function(m){var n=_(m);if(n>f.maxLineLength){f.maxLine=m;f.maxLineLength=n;f.maxLineChanged=true;r=false;}});if(r)a.curOp.updateMaxLine=true;}e.frontier=Math.min(e.frontier,g.line);r2(a,400);var l=b.text.length-(h.line-g.line)-1;if(g.line==h.line&&b.text.length==1&&!c6(a.doc,b))q3(a,g.line,"text");else p3(a,g.line,h.line+1,l);var j=X6(a,"changes"),k=X6(a,"change");if(k||j){var o={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin};if(k)T6(a,"change",a,o);if(j)(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(o);}a.display.selForContextMenu=null;}function w4(d,a,f,b,o){if(!b)b=f;if(L1(b,f)<0){var e=b;b=f;f=e;}if(typeof a=="string")a=P7(a);q4(d,{from:f,to:b,text:a,origin:o});}function x4(a,b){var d=a.display,e=d.sizer.getBoundingClientRect(),f=null;if(b.top+e.top<0)f=true;else if(b.bottom+e.top>(window.innerHeight||document.documentElement.clientHeight))f=false;if(f!=null&&!F){var g=u7("div","\u200b",null,"position: absolute; top: "+(b.top-d.viewOffset-v2(a.display))+"px; height: "+(b.bottom-b.top+Z6)+"px; left: "+b.left+"px; width: 2px;");a.display.lineSpace.appendChild(g);g.scrollIntoView(f);a.display.lineSpace.removeChild(g);}}function y4(a,p,e,m){if(m==null)m=0;for(;;){var b=false,d=S2(a,p);var f=!e||e==p?d:S2(a,e);var g=A4(a,Math.min(d.left,f.left),Math.min(d.top,f.top)-m,Math.max(d.left,f.left),Math.max(d.bottom,f.bottom)+m);var h=a.doc.scrollTop,i=a.doc.scrollLeft;if(g.scrollTop!=null){T3(a,g.scrollTop);if(Math.abs(a.doc.scrollTop-h)>1)b=true;}if(g.scrollLeft!=null){U3(a,g.scrollLeft);if(Math.abs(a.doc.scrollLeft-i)>1)b=true;}if(!b)return d;}}function z4(a,x,y,b,d){var e=A4(a,x,y,b,d);if(e.scrollTop!=null)T3(a,e.scrollTop);if(e.scrollLeft!=null)U3(a,e.scrollLeft);}function A4(a,x,y,b,d){var e=a.display,f=Y2(a.display);if(y<0)y=0;var g=a.curOp&&a.curOp.scrollTop!=null?a.curOp.scrollTop:e.scroller.scrollTop;var h=e.scroller.clientHeight-Z6,r={};if(d-y>h)d=y+h;var i=a.doc.height+w2(e);var j=y<f,k=d>i-f;if(y<g){r.scrollTop=j?0:y;}else if(d>g+h){var n=Math.min(y,(k?i:d)-h);if(n!=g)r.scrollTop=n;}var l=a.curOp&&a.curOp.scrollLeft!=null?a.curOp.scrollLeft:e.scroller.scrollLeft;var m=e.scroller.clientWidth-Z6-e.gutters.offsetWidth;var o=b-x>m;if(o)b=y+h;if(x<10)r.scrollLeft=0;else if(x<l)r.scrollLeft=Math.max(0,x-(o?0:10));else if(b>m+l-3)r.scrollLeft=b+(o?0:10)-m;return r;}function B4(a,l,b){if(l!=null||b!=null)D4(a);if(l!=null)a.curOp.scrollLeft=(a.curOp.scrollLeft==null?a.doc.scrollLeft:a.curOp.scrollLeft)+l;if(b!=null)a.curOp.scrollTop=(a.curOp.scrollTop==null?a.doc.scrollTop:a.curOp.scrollTop)+b;}function C4(a){D4(a);var b=a.getCursor(),f=b,d=b;if(!a.options.lineWrapping){f=b.ch?K1(b.line,b.ch-1):b;d=K1(b.line,b.ch+1);}a.curOp.scrollToPos={from:f,to:d,margin:a.options.cursorScrollMargin,isCursor:true};}function D4(a){var v7=a.curOp.scrollToPos;if(v7){a.curOp.scrollToPos=null;var f=T2(a,v7.from),b=T2(a,v7.to);var p=A4(a,Math.min(f.left,b.left),Math.min(f.top,b.top)-v7.margin,Math.max(f.right,b.right),Math.max(f.bottom,b.bottom)+v7.margin);a.scrollTo(p.scrollLeft,p.scrollTop);}}function E4(a,n,h,b){var d=a.doc,e;if(h==null)h="add";if(h=="smart"){if(!d.mode.indent)h="prev";else e=u2(a,n);}var f=a.options.tabSize;var l=m6(d,n),g=d7(l.text,null,f);if(l.stateAfter)l.stateAfter=null;var j=l.text.match(/^\s*/)[0],k;if(!b&&!/\S/.test(l.text)){k=0;h="not";}else if(h=="smart"){k=d.mode.indent(e,l.text.slice(j.length),l.text);if(k==$6||k>150){if(!b)return;h="prev";}}if(h=="prev"){if(n>d.first)k=d7(m6(d,n-1).text,null,f);else k=0;}else if(h=="add"){k=g+a.options.indentUnit;}else if(h=="subtract"){k=g-a.options.indentUnit;}else if(typeof h=="number"){k=g+h;}k=Math.max(0,k);var m="",p=0;if(a.options.indentWithTabs)for(var i=Math.floor(k/f);i;--i){p+=f;m+="\t";}if(p<k)m+=g7(k-p);if(m!=j){w4(d,m,K1(n,0),K1(n,j.length),"+input");}else{for(var i=0;i<d.sel.ranges.length;i++){var v7=d.sel.ranges[i];if(v7.head.line==n&&v7.head.ch<j.length){var p=K1(n,j.length);_1(d,i,new Q1(p,p));break;}}}l.stateAfter=null;}function F4(d,h,a,o){var n=h,l=h;if(typeof h=="number")l=m6(d,T1(d,h));else n=q6(h);if(n==null)return null;if(o(l,n)&&d.cm)q3(d.cm,n,a);return l;}function G4(a,b){var r=a.doc.sel.ranges,k=[];for(var i=0;i<r.length;i++){var d=b(r[i]);while(k.length&&L1(d.from,h7(k).to)<=0){var e=k.pop();if(L1(e.from,d.from)<0){d.from=e.from;break;}}k.push(d);}j3(a,function(){for(var i=k.length-1;i>=0;i--)w4(a.doc,"",k[i].from,k[i].to,"+delete");C4(a);});}function H4(d,p,a,b,e){var f=p.line,g=p.ch,o=a;var h=m6(d,f);var i=true;function j(){var l=f+a;if(l<d.first||l>=d.first+d.size)return(i=false);f=l;return h=m6(d,l);}function m(l){var r1=(e?f8:g8)(h,g,a,true);if(r1==null){if(!l&&j()){if(e)g=(a<0?Z7:Y7)(h);else g=a<0?h.text.length:0;}else return(i=false);}else g=r1;return true;}if(b=="char")m();else if(b=="column")m(true);else if(b=="word"||b=="group"){var k=null,n=b=="group";var r=d.cm&&d.cm.getHelper(p,"wordChars");for(var w=true;;w=false){if(a<0&&!m(!w))break;var x=h.text.charAt(g)||"\n";var y=q7(x,r)?"w":n&&x=="\n"?"n":!n||/\s/.test(x)?null:"p";if(n&&!w&&!y)y="s";if(k&&k!=y){if(a<0){a=1;m();}break;}if(y)k=y;if(a>0&&!m(!w))break;}}var a1=k2(d,K1(f,g),o,true);if(!i)a1.hitSide=true;return a1;}function I4(a,p,d,b){var e=a.doc,x=p.left,y;if(b=="page"){var f=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);y=p.top+d*(f-(d<0?1.5:.5)*Y2(a.display));}else if(b=="line"){y=d>0?p.bottom+3:p.top-3;}for(;;){var g=V2(a,x,y);if(!g.outside)break;if(d<0?y<=0:y>=e.height){g.hitSide=true;break;}y+=d*5;}return g;}P.prototype={constructor:P,focus:function(){window.focus();B3(this);x3(this);},setOption:function(L4,a){var o=this.options,b=o[L4];if(o[L4]==a&&L4!="mode")return;o[L4]=a;if(K4.hasOwnProperty(L4))k3(this,K4[L4])(this,a,b);},getOption:function(L4){return this.options[L4];},getDoc:function(){return this.doc;},addKeyMap:function(k7,b){this.state.keyMaps[b?"push":"unshift"](k7);},removeKeyMap:function(k7){var m=this.state.keyMaps;for(var i=0;i<m.length;++i)if(m[i]==k7||(typeof m[i]!="string"&&m[i].name==k7)){m.splice(i,1);return true;}},addOverlay:l3(function(a,o){var m=a.token?a:P.getMode(this.options,a);if(m.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:m,modeSpec:a,opaque:o&&o.opaque});this.state.modeGen++;p3(this);}),removeOverlay:l3(function(a){var o=this.state.overlays;for(var i=0;i<o.length;++i){var b=o[i].modeSpec;if(b==a||typeof a=="string"&&b.name==a){o.splice(i,1);this.state.modeGen++;p3(this);return;}}}),indentLine:l3(function(n,d,a){if(typeof d!="string"&&typeof d!="number"){if(d==null)d=this.options.smartIndent?"smart":"prev";else d=d?"add":"subtract";}if(W1(this.doc,n))E4(this,n,d,a);}),indentSelection:l3(function(h){var r=this.doc.sel.ranges,e=-1;for(var i=0;i<r.length;i++){var v7=r[i];if(!v7.empty()){var f=v7.from(),a=v7.to();var b=Math.max(e,f.line);e=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var j=b;j<e;++j)E4(this,j,h);var n=this.doc.sel.ranges;if(f.ch==0&&r.length==n.length&&n[i].from().ch>0)_1(this.doc,i,new Q1(f,n[i].to()),_6);}else if(v7.head.line>e){E4(this,v7.head.line,h,true);e=v7.head.line;if(i==this.doc.sel.primIndex)C4(this);}}}),getTokenAt:function(p,a){var d=this.doc;p=U1(d,p);var b=u2(this,p.line,a),m=this.doc.mode;var l=m6(d,p.line);var e=new $4(l.text,this.options.tabSize);while(e.pos<p.ch&&!e.eol()){e.start=e.pos;var f=P5(m,e,b);}return{start:e.start,end:e.pos,string:e.current(),type:f||null,state:b};},getTokenTypeAt:function(p){p=U1(this.doc,p);var a=S5(this,m6(this.doc,p.line));var b=0,d=(a.length-1)/2,e=p.ch;var f;if(e==0)f=a[2];else for(;;){var m=(b+d)>>1;if((m?a[m*2-1]:0)>=e)d=m;else if(a[m*2+1]<e)b=m+1;else{f=a[m*2+2];break;}}var g=f?f.indexOf("cm-overlay "):-1;return g<0?f:g==0?null:f.slice(0,g-1);},getModeAt:function(p){var m=this.doc.mode;if(!m.innerMode)return m;return P.innerMode(m,this.getTokenAt(p).state).mode;},getHelper:function(p,a){return this.getHelpers(p,a)[0];},getHelpers:function(p,a){var f=[];if(!R4.hasOwnProperty(a))return R4;var h=R4[a],m=this.getModeAt(p);if(typeof m[a]=="string"){if(h[m[a]])f.push(h[m[a]]);}else if(m[a]){for(var i=0;i<m[a].length;i++){var b=h[m[a][i]];if(b)f.push(b);}}else if(m.helperType&&h[m.helperType]){f.push(h[m.helperType]);}else if(h[m.name]){f.push(h[m.name]);}for(var i=0;i<h._global.length;i++){var d=h._global[i];if(d.pred(m,this)&&j7(f,d.val)==-1)f.push(d.val);}return f;},getStateAfter:function(l,p){var d=this.doc;l=T1(d,l==null?d.first+d.size-1:l);return u2(this,l+1,p);},cursorCoords:function(a,m){var p,v7=this.doc.sel.primary();if(a==null)p=v7.head;else if(typeof a=="object")p=U1(this.doc,a);else p=a?v7.from():v7.to();return S2(this,p,m||"page");},charCoords:function(p,m){return R2(this,U1(this.doc,p),m||"page");},coordsChar:function(a,m){a=Q2(this,a,m||"page");return V2(this,a.left,a.top);},lineAtHeight:function(h,m){h=Q2(this,{top:h,left:0},m||"page").top;return r6(this.doc,h+this.display.viewOffset);},heightAtLine:function(l,m){var e=false,a=this.doc.first+this.doc.size-1;if(l<this.doc.first)l=this.doc.first;else if(l>a){l=a;e=true;}var b=m6(this.doc,l);return P2(this,b,{top:0,left:0},m||"page").top+(e?this.doc.height-s6(b):0);},defaultTextHeight:function(){return Y2(this.display);},defaultCharWidth:function(){return Z2(this.display);},setGutterMarker:l3(function(l,g,a){return F4(this.doc,l,"gutter",function(l){var m=l.gutterMarkers||(l.gutterMarkers={});m[g]=a;if(!a&&r7(m))l.gutterMarkers=null;return true;});}),clearGutter:l3(function(g){var a=this,d=a.doc,i=d.first;d.iter(function(l){if(l.gutterMarkers&&l.gutterMarkers[g]){l.gutterMarkers[g]=null;q3(a,i,"gutter");if(r7(l.gutterMarkers))l.gutterMarkers=null;}++i;});}),addLineWidget:l3(function(h,n,o){return J5(this,h,n,o);}),removeLineWidget:function(w){w.clear();},lineInfo:function(l){if(typeof l=="number"){if(!W1(this.doc,l))return null;var n=l;l=m6(this.doc,l);if(!l)return null;}else{var n=q6(l);if(n==null)return null;}return{line:n,handle:l,text:l.text,gutterMarkers:l.gutterMarkers,textClass:l.textClass,bgClass:l.bgClass,wrapClass:l.wrapClass,widgets:l.widgets};},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo};},addWidget:function(p,n,a,b,h){var d=this.display;p=S2(this,U1(this.doc,p));var e=p.bottom,l=p.left;n.style.position="absolute";d.sizer.appendChild(n);if(b=="over"){e=p.top;}else if(b=="above"||b=="near"){var f=Math.max(d.wrapper.clientHeight,this.doc.height),g=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);if((b=='above'||p.bottom+n.offsetHeight>f)&&p.top>n.offsetHeight)e=p.top-n.offsetHeight;else if(p.bottom+n.offsetHeight<=f)e=p.bottom;if(l+n.offsetWidth>g)l=g-n.offsetWidth;}n.style.top=e+"px";n.style.left=n.style.right="";if(h=="right"){l=d.sizer.clientWidth-n.offsetWidth;n.style.right="0px";}else{if(h=="left")l=0;else if(h=="middle")l=(d.sizer.clientWidth-n.offsetWidth)/2;n.style.left=l+"px";}if(a)z4(this,l,e,l+n.offsetWidth,e+n.offsetHeight);},triggerOnKeyDown:l3(c4),triggerOnKeyPress:l3(f4),triggerOnKeyUp:e4,execCommand:function(a){if(U4.hasOwnProperty(a))return U4[a](this);},findPosH:function(f,a,b,d){var e=1;if(a<0){e=-1;a=-a;}for(var i=0,g=U1(this.doc,f);i<a;++i){g=H4(this.doc,g,e,b,d);if(g.hitSide)break;}return g;},moveH:l3(function(d,a){var b=this;b.extendSelectionsBy(function(v7){if(b.display.shift||b.doc.extend||v7.empty())return H4(b.doc,v7.head,d,a,b.options.rtlMoveVisually);else return d<0?v7.from():v7.to();},b7);}),deleteH:l3(function(d,a){var b=this.doc.sel,e=this.doc;if(b.somethingSelected())e.replaceSelection("",null,"+delete");else G4(this,function(v7){var o=H4(e,v7.head,d,a,false);return d<0?{from:o,to:v7.head}:{from:v7.head,to:o};});}),findPosV:function(f,a,b,g){var d=1,x=g;if(a<0){d=-1;a=-a;}for(var i=0,e=U1(this.doc,f);i<a;++i){var h=S2(this,e,"div");if(x==null)x=h.left;else h.left=x;e=I4(this,h,d,b);if(e.hitSide)break;}return e;},moveV:l3(function(d,a){var b=this,e=this.doc,g=[];var f=!b.display.shift&&!e.extend&&e.sel.somethingSelected();e.extendSelectionsBy(function(v7){if(f)return d<0?v7.from():v7.to();var h=S2(b,v7.head,"div");if(v7.goalColumn!=null)h.left=v7.goalColumn;g.push(h.left);var p=I4(b,h,d,a);if(a=="page"&&v7==e.sel.primary())B4(b,null,R2(b,p,"div").top-h.top);return p;},b7);if(g.length)for(var i=0;i<e.sel.ranges.length;i++)e.sel.ranges[i].goalColumn=g[i];}),findWordAt:function(p){var d=this.doc,l=m6(d,p.line).text;var a=p.ch,e=p.ch;if(l){var h=this.getHelper(p,"wordChars");if((p.xRel<0||e==l.length)&&a)--a;else++e;var b=l.charAt(a);var f=q7(b,h)?function(g){return q7(g,h);}:/\s/.test(b)?function(g){return/\s/.test(g);}:function(g){return!/\s/.test(g)&&!q7(g);};while(a>0&&f(l.charAt(a-1)))--a;while(e<l.length&&f(l.charAt(e)))++e;}return new Q1(K1(p.line,a),K1(p.line,e));},toggleOverwrite:function(a){if(a!=null&&a==this.state.overwrite)return;if(this.state.overwrite=!this.state.overwrite)C7(this.display.cursorDiv,"CodeMirror-overwrite");else B7(this.display.cursorDiv,"CodeMirror-overwrite");R6(this,"overwriteToggle",this,this.state.overwrite);},hasFocus:function(){return z7()==this.display.input;},scrollTo:l3(function(x,y){if(x!=null||y!=null)D4(this);if(x!=null)this.curOp.scrollLeft=x;if(y!=null)this.curOp.scrollTop=y;}),getScrollInfo:function(){var a=this.display.scroller,b=Z6;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b};},scrollIntoView:l3(function(v7,m){if(v7==null){v7={from:this.doc.sel.primary().head,to:null};if(m==null)m=this.options.cursorScrollMargin;}else if(typeof v7=="number"){v7={from:K1(v7,0),to:null};}else if(v7.from==null){v7={from:v7,to:null};}if(!v7.to)v7.to=v7.from;v7.margin=m||0;if(v7.from.line!=null){D4(this);this.curOp.scrollToPos=v7;}else{var p=A4(this,Math.min(v7.from.left,v7.to.left),Math.min(v7.from.top,v7.to.top)-v7.margin,Math.max(v7.from.right,v7.to.right),Math.max(v7.from.bottom,v7.to.bottom)+v7.margin);this.scrollTo(p.scrollLeft,p.scrollTop);}}),setSize:l3(function(w,h){var a=this;function b(d){return typeof d=="number"||/^\d+$/.test(String(d))?d+"px":d;}if(w!=null)a.display.wrapper.style.width=b(w);if(h!=null)a.display.wrapper.style.height=b(h);if(a.options.lineWrapping)L2(this);var q6=a.display.viewFrom;a.doc.iter(q6,a.display.viewTo,function(l){if(l.widgets)for(var i=0;i<l.widgets.length;i++)if(l.widgets[i].noHScroll){q3(a,q6,"widget");break;}++q6;});a.curOp.forceUpdate=true;R6(a,"refresh",this);}),operation:function(f){return j3(this,f);},refresh:l3(function(){var o=this.display.cachedTextHeight;p3(this);this.curOp.forceUpdate=true;M2(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);$(this);if(o==null||Math.abs(o-Y2(this.display))>.5)V(this);R6(this,"refresh",this);}),swapDoc:l3(function(d){var o=this.doc;o.cm=null;l6(this,d);M2(this);A3(this);this.scrollTo(d.scrollLeft,d.scrollTop);this.curOp.forceScroll=true;T6(this,"swapDoc",this,o);return o;}),getInputField:function(){return this.display.input;},getWrapperElement:function(){return this.display.wrapper;},getScrollerElement:function(){return this.display.scroller;},getGutterElement:function(){return this.display.gutters;}};Y6(P);var J4=P.defaults={};var K4=P.optionHandlers={};function L4(n,d,h,a){P.defaults[n]=d;if(h)K4[n]=a?function(b,e,o){if(o!=M4)h(b,e,o);}:h;}var M4=P.Init={toString:function(){return"CodeMirror.Init";}};L4("value","",function(a,b){a.setValue(b);},true);L4("mode",null,function(a,b){a.doc.modeOption=b;R(a);},true);L4("indentUnit",2,R,true);L4("indentWithTabs",false);L4("smartIndent",true);L4("tabSize",4,function(a){S(a);M2(a);p3(a);},true);L4("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh();},true);L4("specialCharPlaceholder",Y5,function(a){a.refresh();},true);L4("electricChars",true);L4("rtlMoveVisually",!J);L4("wholeLineUpdateBefore",true);L4("theme","default",function(a){X(a);Y(a);},true);L4("keyMap","default",W);L4("extraKeys",null);L4("lineWrapping",false,T,true);L4("gutters",[],function(a){c1(a.options);Y(a);},true);L4("fixedGutter",true,function(a,b){a.display.gutters.style.left=b?k1(a.display)+"px":"0";a.refresh();},true);L4("coverGutterNextToScrollbar",false,f1,true);L4("lineNumbers",false,function(a){c1(a.options);Y(a);},true);L4("firstLineNumber",1,Y,true);L4("lineNumberFormatter",function(i){return i;},Y,true);L4("showCursorWhenSelecting",false,n2,true);L4("resetSelectionOnContextMenu",true);L4("readOnly",false,function(a,b){if(b=="nocursor"){h4(a);a.display.input.blur();a.display.disabled=true;}else{a.display.disabled=false;if(!b)A3(a);}});L4("disableInput",false,function(a,b){if(!b)A3(a);},true);L4("dragDrop",true);L4("cursorBlinkRate",530);L4("cursorScrollMargin",0);L4("cursorHeight",1,n2,true);L4("singleCursorHeightPerLine",true,n2,true);L4("workTime",100);L4("workDelay",100);L4("flattenSpans",true,S,true);L4("addModeClass",false,S,true);L4("pollInterval",100);L4("undoDepth",200,function(a,b){a.doc.history.undoDepth=b;});L4("historyEventDelay",1250);L4("viewportMargin",10,function(a){a.refresh();},true);L4("maxHighlightLength",10000,S,true);L4("moveInputWithCursor",true,function(a,b){if(!b)a.display.inputDiv.style.top=a.display.inputDiv.style.left=0;});L4("tabindex",null,function(a,b){a.display.input.tabIndex=b||"";});L4("autofocus",null);var N4=P.modes={},O4=P.mimeModes={};P.defineMode=function(n,m){if(!P.defaults.mode&&n!="null")P.defaults.mode=n;if(arguments.length>2){m.dependencies=[];for(var i=2;i<arguments.length;++i)m.dependencies.push(arguments[i]);}N4[n]=m;};P.defineMIME=function(m,a){O4[m]=a;};P.resolveMode=function(a){if(typeof a=="string"&&O4.hasOwnProperty(a)){a=O4[a];}else if(a&&typeof a.name=="string"&&O4.hasOwnProperty(a.name)){var f=O4[a.name];if(typeof f=="string")f={name:f};a=l7(f,a);a.name=f.name;}else if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a)){return P.resolveMode("application/xml");}if(typeof a=="string")return{name:a};else return a||{name:"null"};};P.getMode=function(o,a){var a=P.resolveMode(a);var m=N4[a.name];if(!m)return P.getMode(o,"text/plain");var b=m(o,a);if(P4.hasOwnProperty(a.name)){var e=P4[a.name];for(var j6 in e){if(!e.hasOwnProperty(j6))continue;if(b.hasOwnProperty(j6))b["_"+j6]=b[j6];b[j6]=e[j6];}}b.name=a.name;if(a.helperType)b.helperType=a.helperType;if(a.modeProps)for(var j6 in a.modeProps)b[j6]=a.modeProps[j6];return b;};P.defineMode("null",function(){return{token:function(a){a.skipToEnd();}};});P.defineMIME("text/plain","null");var P4=P.modeExtensions={};P.extendMode=function(m,p){var e=P4.hasOwnProperty(m)?P4[m]:(P4[m]={});m7(p,e);};P.defineExtension=function(n,f){P.prototype[n]=f;};P.defineDocExtension=function(n,f){h6.prototype[n]=f;};P.defineOption=L4;var Q4=[];P.defineInitHook=function(f){Q4.push(f);};var R4=P.helpers={};P.registerHelper=function(a,n,b){if(!R4.hasOwnProperty(a))R4[a]=P[a]={_global:[]};R4[a][n]=b;};P.registerGlobalHelper=function(a,n,p,b){P.registerHelper(a,n,b);R4[a]._global.push({pred:p,val:b});};var S4=P.copyState=function(m,a){if(a===true)return a;if(m.copyState)return m.copyState(a);var b={};for(var n in a){var d=a[n];if(d instanceof Array)d=d.concat([]);b[n]=d;}return b;};var T4=P.startState=function(m,a,b){return m.startState?m.startState(a,b):true;};P.innerMode=function(m,a){while(m.innerMode){var i=m.innerMode(a);if(!i||i.mode==m)break;a=i.state;m=i.mode;}return i||{mode:m,state:a};};var U4=P.commands={selectAll:function(a){a.setSelection(K1(a.firstLine(),0),K1(a.lastLine()),_6);},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),_6);},killLine:function(a){G4(a,function(v7){if(v7.empty()){var l=m6(a.doc,v7.head.line).text.length;if(v7.head.ch==l&&v7.head.line<a.lastLine())return{from:v7.head,to:K1(v7.head.line+1,0)};else return{from:v7.head,to:K1(v7.head.line,l)};}else{return{from:v7.from(),to:v7.to()};}});},deleteLine:function(a){G4(a,function(v7){return{from:K1(v7.from().line,0),to:U1(a.doc,K1(v7.to().line+1,0))};});},delLineLeft:function(a){G4(a,function(v7){return{from:K1(v7.from().line,0),to:v7.from()};});},delWrappedLineLeft:function(a){G4(a,function(v7){var b=a.charCoords(v7.head,"div").top+5;var l=a.coordsChar({left:0,top:b},"div");return{from:l,to:v7.from()};});},delWrappedLineRight:function(a){G4(a,function(v7){var b=a.charCoords(v7.head,"div").top+5;var r=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div");return{from:v7.from(),to:r};});},undo:function(a){a.undo();},redo:function(a){a.redo();},undoSelection:function(a){a.undoSelection();},redoSelection:function(a){a.redoSelection();},goDocStart:function(a){a.extendSelection(K1(a.firstLine(),0));},goDocEnd:function(a){a.extendSelection(K1(a.lastLine()));},goLineStart:function(a){a.extendSelectionsBy(function(v7){return $7(a,v7.head.line);},{origin:"+move",bias:1});},goLineStartSmart:function(a){a.extendSelectionsBy(function(v7){return a8(a,v7.head);},{origin:"+move",bias:1});},goLineEnd:function(a){a.extendSelectionsBy(function(v7){return _7(a,v7.head.line);},{origin:"+move",bias:-1});},goLineRight:function(a){a.extendSelectionsBy(function(v7){var b=a.charCoords(v7.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div");},b7);},goLineLeft:function(a){a.extendSelectionsBy(function(v7){var b=a.charCoords(v7.head,"div").top+5;return a.coordsChar({left:0,top:b},"div");},b7);},goLineLeftSmart:function(a){a.extendSelectionsBy(function(v7){var b=a.charCoords(v7.head,"div").top+5;var p=a.coordsChar({left:0,top:b},"div");if(p.ch<a.getLine(p.line).search(/\S/))return a8(a,v7.head);return p;},b7);},goLineUp:function(a){a.moveV(-1,"line");},goLineDown:function(a){a.moveV(1,"line");},goPageUp:function(a){a.moveV(-1,"page");},goPageDown:function(a){a.moveV(1,"page");},goCharLeft:function(a){a.moveH(-1,"char");},goCharRight:function(a){a.moveH(1,"char");},goColumnLeft:function(a){a.moveH(-1,"column");},goColumnRight:function(a){a.moveH(1,"column");},goWordLeft:function(a){a.moveH(-1,"word");},goGroupRight:function(a){a.moveH(1,"group");},goGroupLeft:function(a){a.moveH(-1,"group");},goWordRight:function(a){a.moveH(1,"word");},delCharBefore:function(a){a.deleteH(-1,"char");},delCharAfter:function(a){a.deleteH(1,"char");},delWordBefore:function(a){a.deleteH(-1,"word");},delWordAfter:function(a){a.deleteH(1,"word");},delGroupBefore:function(a){a.deleteH(-1,"group");},delGroupAfter:function(a){a.deleteH(1,"group");},indentAuto:function(a){a.indentSelection("smart");},indentMore:function(a){a.indentSelection("add");},indentLess:function(a){a.indentSelection("subtract");},insertTab:function(a){a.replaceSelection("\t");},insertSoftTab:function(a){var b=[],r=a.listSelections(),d=a.options.tabSize;for(var i=0;i<r.length;i++){var p=r[i].from();var e=d7(a.getLine(p.line),p.ch,d);b.push(new Array(d-e%d+1).join(" "));}a.replaceSelections(b);},defaultTab:function(a){if(a.somethingSelected())a.indentSelection("add");else a.execCommand("insertTab");},transposeChars:function(a){j3(a,function(){var r=a.listSelections(),n=[];for(var i=0;i<r.length;i++){var b=r[i].head,l=m6(a.doc,b.line).text;if(l){if(b.ch==l.length)b=new K1(b.line,b.ch-1);if(b.ch>0){b=new K1(b.line,b.ch+1);a.replaceRange(l.charAt(b.ch-1)+l.charAt(b.ch-2),K1(b.line,b.ch-2),b,"+transpose");}else if(b.line>a.doc.first){var p=m6(a.doc,b.line-1).text;if(p)a.replaceRange(l.charAt(0)+"\n"+p.charAt(p.length-1),K1(b.line-1,p.length-1),K1(b.line,1),"+transpose");}}n.push(new Q1(b,b));}a.setSelections(n);});},newlineAndIndent:function(a){j3(a,function(){var l=a.listSelections().length;for(var i=0;i<l;i++){var v7=a.listSelections()[i];a.replaceRange("\n",v7.anchor,v7.head,"+input");a.indentLine(v7.from().line+1,null,true);C4(a);}});},toggleOverwrite:function(a){a.toggleOverwrite();}};var V4=P.keyMap={};V4.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};V4.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};V4.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};V4.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};V4["default"]=I?V4.macDefault:V4.pcDefault;function W4(a){if(typeof a=="string")return V4[a];else return a;}var X4=P.lookupKey=function(n,m,h){function l(k7){k7=W4(k7);var f=k7[n];if(f===false)return"stop";if(f!=null&&h(f))return true;if(k7.nofallthrough)return"stop";var a=k7.fallthrough;if(a==null)return false;if(Object.prototype.toString.call(a)!="[object Array]")return l(a);for(var i=0;i<a.length;++i){var d=l(a[i]);if(d)return d;}return false;}for(var i=0;i<m.length;++i){var d=l(m[i]);if(d)return d!="stop";}};var Y4=P.isModifierKey=function(e){var n=U7[e.keyCode];return n=="Ctrl"||n=="Alt"||n=="Shift"||n=="Mod";};var Z4=P.keyName=function(e,n){if(B&&e.keyCode==34&&e["char"])return false;var a=U7[e.keyCode];if(a==null||e.altGraphKey)return false;if(e.altKey)a="Alt-"+a;if(L?e.metaKey:e.ctrlKey)a="Ctrl-"+a;if(L?e.ctrlKey:e.metaKey)a="Cmd-"+a;if(!n&&e.shiftKey)a="Shift-"+a;return a;};P.fromTextArea=function(a,o){if(!o)o={};o.value=a.value;if(!o.tabindex&&a.tabindex)o.tabindex=a.tabindex;if(!o.placeholder&&a.placeholder)o.placeholder=a.placeholder;if(o.autofocus==null){var h=z7();o.autofocus=h==a||a.getAttribute("autofocus")!=null&&h==document.body;}function b(){a.value=d.getValue();}if(a.form){on(a.form,"submit",b);if(!o.leaveSubmitMethodAlone){var f=a.form,r=f.submit;try{var w=f.submit=function(){b();f.submit=r;f.submit();f.submit=w;};}catch(e){}}}a.style.display="none";var d=P(function(n){a.parentNode.insertBefore(n,a.nextSibling);},o);d.save=b;d.getTextArea=function(){return a;};d.toTextArea=function(){b();a.parentNode.removeChild(d.getWrapperElement());a.style.display="";if(a.form){Q6(a.form,"submit",b);if(typeof a.form.submit=="function")a.form.submit=r;}};return d;};var $4=P.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;};$4.prototype={eol:function(){return this.pos>=this.string.length;},sol:function(){return this.pos==this.lineStart;},peek:function(){return this.string.charAt(this.pos)||undefined;},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++);},eat:function(m){var a=this.string.charAt(this.pos);if(typeof m=="string")var o=a==m;else var o=a&&(m.test?m.test(a):m(a));if(o){++this.pos;return a;}},eatWhile:function(m){var a=this.pos;while(this.eat(m)){}return this.pos>a;},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a;},skipToEnd:function(){this.pos=this.string.length;},skipTo:function(a){var f=this.string.indexOf(a,this.pos);if(f>-1){this.pos=f;return true;}},backUp:function(n){this.pos-=n;},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=d7(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start;}return this.lastColumnValue-(this.lineStart?d7(this.string,this.lineStart,this.tabSize):0);},indentation:function(){return d7(this.string,null,this.tabSize)-(this.lineStart?d7(this.string,this.lineStart,this.tabSize):0);},match:function(p,a,b){if(typeof p=="string"){var d=function(f){return b?f.toLowerCase():f;};var e=this.string.substr(this.pos,p.length);if(d(e)==d(p)){if(a!==false)this.pos+=p.length;return true;}}else{var m=this.string.slice(this.pos).match(p);if(m&&m.index>0)return null;if(m&&a!==false)this.pos+=m[0].length;return m;}},current:function(){return this.string.slice(this.start,this.pos);},hideFirstChars:function(n,i){this.lineStart+=n;try{return i();}finally{this.lineStart-=n;}}};var _4=P.TextMarker=function(d,a){this.lines=[];this.type=a;this.doc=d;};Y6(_4);_4.prototype.clear=function(){if(this.explicitlyCleared)return;var a=this.doc.cm,w=a&&!a.curOp;if(w)a3(a);if(X6(this,"clear")){var f=this.find();if(f)T6(this,"clear",f.from,f.to);}var m=null,b=null;for(var i=0;i<this.lines.length;++i){var l=this.lines[i];var d=i5(l.markedSpans,this);if(a&&!this.collapsed)q3(a,q6(l),"text");else if(a){if(d.to!=null)b=q6(l);if(d.from!=null)m=q6(l);}l.markedSpans=j5(l.markedSpans,d);if(d.from==null&&this.collapsed&&!E5(this.doc,l)&&a)p6(l,Y2(a.display));}if(a&&this.collapsed&&!a.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var e=A5(this.lines[i]),g=_(e);if(g>a.display.maxLineLength){a.display.maxLine=e;a.display.maxLineLength=g;a.display.maxLineChanged=true;}}if(m!=null&&a&&this.collapsed)p3(a,m,b+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(a)i2(a.doc);}if(a)T6(a,"markerCleared",a,this);if(w)c3(a);if(this.parent)this.parent.clear();};_4.prototype.find=function(a,l){if(a==null&&this.type=="bookmark")a=1;var f,b;for(var i=0;i<this.lines.length;++i){var d=this.lines[i];var e=i5(d.markedSpans,this);if(e.from!=null){f=K1(l?d:q6(d),e.from);if(a==-1)return f;}if(e.to!=null){b=K1(l?d:q6(d),e.to);if(a==1)return b;}}return f&&{from:f,to:b};};_4.prototype.changed=function(){var p=this.find(-1,true),w=this,a=this.doc.cm;if(!p||!a)return;j3(a,function(){var l=p.line,b=q6(p.line);var d=E2(a,b);if(d){K2(d);a.curOp.selectionChanged=a.curOp.forceUpdate=true;}a.curOp.updateMaxLine=true;if(!E5(w.doc,l)&&w.height!=null){var o=w.height;w.height=null;var h=I5(w)-o;if(h)p6(l,l.height+h);}});};_4.prototype.attachLine=function(l){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;if(!o.maybeHiddenMarkers||j7(o.maybeHiddenMarkers,this)==-1)(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this);}this.lines.push(l);};_4.prototype.detachLine=function(l){this.lines.splice(j7(this.lines,l),1);if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this);}};var a5=0;function b5(d,f,a,o,b){if(o&&o.shared)return d5(d,f,a,o,b);if(d.cm&&!d.cm.curOp)return k3(d.cm,b5)(d,f,a,o,b);var m=new _4(d,b),e=L1(f,a);if(o)m7(o,m,false);if(e>0||e==0&&m.clearWhenEmpty!==false)return m;if(m.replacedWith){m.collapsed=true;m.widgetNode=u7("span",[m.replacedWith],"CodeMirror-widget");if(!o.handleMouseEvents)m.widgetNode.ignoreEvents=true;if(o.insertLeft)m.widgetNode.insertLeft=true;}if(m.collapsed){if(z5(d,f.line,f,a,m)||f.line!=a.line&&z5(d,a.line,f,a,m))throw new Error("Inserting collapsed marker partially overlapping an existing one");O=true;}if(m.addToHistory)y6(d,{from:f,to:a,origin:"markText"},d.sel,NaN);var g=f.line,h=d.cm,j;d.iter(g,a.line+1,function(l){if(h&&m.collapsed&&!h.options.lineWrapping&&A5(l)==h.display.maxLine)j=true;if(m.collapsed&&g!=f.line)p6(l,0);k5(l,new h5(m,g==f.line?f.ch:null,g==a.line?a.ch:null));++g;});if(m.collapsed)d.iter(f.line,a.line+1,function(l){if(E5(d,l))p6(l,0);});if(m.clearOnEnter)on(m,"beforeCursorEnter",function(){m.clear();});if(m.readOnly){N=true;if(d.history.done.length||d.history.undone.length)d.clearHistory();}if(m.collapsed){m.id=++a5;m.atomic=true;}if(h){if(j)h.curOp.updateMaxLine=true;if(m.collapsed)p3(h,f.line,a.line+1);else if(m.className||m.title||m.startStyle||m.endStyle)for(var i=f.line;i<=a.line;i++)q3(h,i,"text");if(m.atomic)i2(h.doc);T6(h,"markerAdded",h,m);}return m;}var c5=P.SharedTextMarker=function(m,p){this.markers=m;this.primary=p;for(var i=0;i<m.length;++i)m[i].parent=this;};Y6(c5);c5.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();T6(this,"clear");};c5.prototype.find=function(a,l){return this.primary.find(a,l);};function d5(d,f,a,o,b){o=m7(o);o.shared=false;var m=[b5(d,f,a,o,b)],p=m[0];var w=o.widgetNode;k6(d,function(d){if(w)o.widgetNode=w.cloneNode(true);m.push(b5(d,U1(d,f),U1(d,a),o,b));for(var i=0;i<d.linked.length;++i)if(d.linked[i].isParent)return;p=h7(m);});return new c5(m,p);}function e5(d){return d.findMarks(K1(d.first,0),d.clipPos(K1(d.lastLine())),function(m){return m.parent;});}function f5(d,m){for(var i=0;i<m.length;i++){var a=m[i],p=a.find();var f=d.clipPos(p.from),b=d.clipPos(p.to);if(L1(f,b)){var e=b5(d,f,b,a.primary,a.primary.type);a.markers.push(e);e.parent=a;}}}function g5(m){for(var i=0;i<m.length;i++){var a=m[i],l=[a.primary.doc];;k6(a.primary.doc,function(d){l.push(d);});for(var j=0;j<a.markers.length;j++){var b=a.markers[j];if(j7(l,b.doc)==-1){b.parent=null;a.markers.splice(j--,1);}}}}function h5(m,f,a){this.marker=m;this.from=f;this.to=a;}function i5(a,m){if(a)for(var i=0;i<a.length;++i){var b=a[i];if(b.marker==m)return b;}}function j5(a,b){for(var r,i=0;i<a.length;++i)if(a[i]!=b)(r||(r=[])).push(a[i]);return r;}function k5(l,a){l.markedSpans=l.markedSpans?l.markedSpans.concat([a]):[a];a.marker.attachLine(l);}function l5(o,a,b){if(o)for(var i=0,n;i<o.length;++i){var d=o[i],m=d.marker;var e=d.from==null||(m.inclusiveLeft?d.from<=a:d.from<a);if(e||d.from==a&&m.type=="bookmark"&&(!b||!d.marker.insertLeft)){var f=d.to==null||(m.inclusiveRight?d.to>=a:d.to>a);(n||(n=[])).push(new h5(m,d.from,f?null:d.to));}}return n;}function m5(o,e,a){if(o)for(var i=0,n;i<o.length;++i){var b=o[i],m=b.marker;var d=b.to==null||(m.inclusiveRight?b.to>=e:b.to>e);if(d||b.from==e&&m.type=="bookmark"&&(!a||b.marker.insertLeft)){var f=b.from==null||(m.inclusiveLeft?b.from<=e:b.from<e);(n||(n=[])).push(new h5(m,f?null:b.from-e,b.to==null?null:b.to-e));}}return n;}function n5(d,a){var o=W1(d,a.from.line)&&m6(d,a.from.line).markedSpans;var b=W1(d,a.to.line)&&m6(d,a.to.line).markedSpans;if(!o&&!b)return null;var e=a.from.ch,f=a.to.ch,g=L1(a.from,a.to)==0;var h=l5(o,e,g);var l=m5(b,f,g);var j=a.text.length==1,k=h7(a.text).length+(j?e:0);if(h){for(var i=0;i<h.length;++i){var m=h[i];if(m.to==null){var n=i5(l,m.marker);if(!n)m.to=e;else if(j)m.to=n.to==null?null:n.to+k;}}}if(l){for(var i=0;i<l.length;++i){var m=l[i];if(m.to!=null)m.to+=k;if(m.from==null){var n=i5(h,m.marker);if(!n){m.from=k;if(j)(h||(h=[])).push(m);}}else{m.from+=k;if(j)(h||(h=[])).push(m);}}}if(h)h=o5(h);if(l&&l!=h)l=o5(l);var p=[h];if(!j){var r=a.text.length-2,w;if(r>0&&h)for(var i=0;i<h.length;++i)if(h[i].to==null)(w||(w=[])).push(new h5(h[i].marker,null,null));for(var i=0;i<r;++i)p.push(w);p.push(l);}return p;}function o5(a){for(var i=0;i<a.length;++i){var b=a[i];if(b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==false)a.splice(i--,1);}if(!a.length)return null;return a;}function p5(d,a){var o=E6(d,a);var b=n5(d,a);if(!o)return b;if(!b)return o;for(var i=0;i<o.length;++i){var e=o[i],f=b[i];if(e&&f){spans:for(var j=0;j<f.length;++j){var g=f[j];for(var k=0;k<e.length;++k)if(e[k].marker==g.marker)continue spans;e.push(g);}}else if(f){o[i]=f;}}return o;}function q5(d,f,a){var b=null;d.iter(f.line,a.line+1,function(l){if(l.markedSpans)for(var i=0;i<l.markedSpans.length;++i){var o=l.markedSpans[i].marker;if(o.readOnly&&(!b||j7(b,o)==-1))(b||(b=[])).push(o);}});if(!b)return null;var e=[{from:f,to:a}];for(var i=0;i<b.length;++i){var g=b[i],m=g.find(0);for(var j=0;j<e.length;++j){var p=e[j];if(L1(p.to,m.from)<0||L1(p.from,m.to)>0)continue;var n=[j,1],h=L1(p.from,m.from),k=L1(p.to,m.to);if(h<0||!g.inclusiveLeft&&!h)n.push({from:p.from,to:m.from});if(k>0||!g.inclusiveRight&&!k)n.push({from:m.to,to:p.to});e.splice.apply(e,n);j+=n.length-1;}}return e;}function r5(l){var a=l.markedSpans;if(!a)return;for(var i=0;i<a.length;++i)a[i].marker.detachLine(l);l.markedSpans=null;}function s5(l,a){if(!a)return;for(var i=0;i<a.length;++i)a[i].marker.attachLine(l);l.markedSpans=a;}function t5(m){return m.inclusiveLeft?-1:0;}function u5(m){return m.inclusiveRight?1:0;}function v5(a,b){var l=a.lines.length-b.lines.length;if(l!=0)return l;var p=a.find(),d=b.find();var f=L1(p.from,d.from)||t5(a)-t5(b);if(f)return-f;var e=L1(p.to,d.to)||u5(a)-u5(b);if(e)return e;return b.id-a.id;}function w5(l,a){var b=O&&l.markedSpans,f;if(b)for(var d,i=0;i<b.length;++i){d=b[i];if(d.marker.collapsed&&(a?d.from:d.to)==null&&(!f||v5(f,d.marker)<0))f=d.marker;}return f;}function x5(l){return w5(l,true);}function y5(l){return w5(l,false);}function z5(d,q6,f,a,m){var l=m6(d,q6);var b=O&&l.markedSpans;if(b)for(var i=0;i<b.length;++i){var e=b[i];if(!e.marker.collapsed)continue;var g=e.marker.find(0);var h=L1(g.from,f)||t5(e.marker)-t5(m);var j=L1(g.to,a)||u5(e.marker)-u5(m);if(h>=0&&j<=0||h<=0&&j>=0)continue;if(h<=0&&(L1(g.to,f)>0||(e.marker.inclusiveRight&&m.inclusiveLeft))||h>=0&&(L1(g.from,a)<0||(e.marker.inclusiveLeft&&m.inclusiveRight)))return true;}}function A5(l){var m;while(m=x5(l))l=m.find(-1,true).line;return l;}function B5(l){var m,a;while(m=y5(l)){l=m.find(1,true).line;(a||(a=[])).push(l);}return a;}function C5(d,l){var a=m6(d,l),b=A5(a);if(a==b)return l;return q6(b);}function D5(d,l){if(l>d.lastLine())return l;var a=m6(d,l),m;if(!E5(d,a))return l;while(m=y5(a))a=m.find(1,true).line;return q6(a)+1;}function E5(d,l){var a=O&&l.markedSpans;if(a)for(var b,i=0;i<a.length;++i){b=a[i];if(!b.marker.collapsed)continue;if(b.from==null)return true;if(b.marker.widgetNode)continue;if(b.from==0&&b.marker.inclusiveLeft&&F5(d,l,b))return true;}}function F5(d,l,a){if(a.to==null){var e=a.marker.find(1,true);return F5(d,e.line,i5(e.line.markedSpans,a.marker));}if(a.marker.inclusiveRight&&a.to==l.text.length)return true;for(var b,i=0;i<l.markedSpans.length;++i){b=l.markedSpans[i];if(b.marker.collapsed&&!b.marker.widgetNode&&b.from==a.to&&(b.to==null||b.to!=a.from)&&(b.marker.inclusiveLeft||a.marker.inclusiveRight)&&F5(d,l,b))return true;}}var G5=P.LineWidget=function(a,n,o){if(o)for(var b in o)if(o.hasOwnProperty(b))this[b]=o[b];this.cm=a;this.node=n;};Y6(G5);function H5(a,l,d){if(s6(l)<((a.curOp&&a.curOp.scrollTop)||a.doc.scrollTop))B4(a,null,d);}G5.prototype.clear=function(){var a=this.cm,w=this.line.widgets,l=this.line,n=q6(l);if(n==null||!w)return;for(var i=0;i<w.length;++i)if(w[i]==this)w.splice(i--,1);if(!w.length)l.widgets=null;var h=I5(this);j3(a,function(){H5(a,l,-h);q3(a,n,"widget");p6(l,Math.max(0,l.height-h));});};G5.prototype.changed=function(){var o=this.height,a=this.cm,l=this.line;this.height=null;var d=I5(this)-o;if(!d)return;j3(a,function(){a.curOp.forceUpdate=true;H5(a,l,d);p6(l,l.height+d);});};function I5(w){if(w.height!=null)return w.height;if(!y7(document.body,w.node)){var p="position: relative;";if(w.coverGutter)p+="margin-left: -"+w.cm.getGutterElement().offsetWidth+"px;";x7(w.cm.display.measure,u7("div",[w.node],null,p));}return w.height=w.node.offsetHeight;}function J5(a,h,n,o){var w=new G5(a,n,o);if(w.noHScroll)a.display.alignWidgets=true;F4(a.doc,h,"widget",function(l){var b=l.widgets||(l.widgets=[]);if(w.insertAt==null)b.push(w);else b.splice(Math.min(b.length-1,Math.max(0,w.insertAt)),0,w);w.line=l;if(!E5(a.doc,l)){var d=s6(l)<a.doc.scrollTop;p6(l,l.height+I5(w));if(d)B4(a,null,w.height);a.curOp.forceUpdate=true;}return true;});return w;}var K5=P.Line=function(a,m,U){this.text=a;s5(this,m);this.height=U?U(this):1;};Y6(K5);K5.prototype.lineNo=function(){return q6(this);};function L5(l,a,m,U){l.text=a;if(l.stateAfter)l.stateAfter=null;if(l.styles)l.styles=null;if(l.order!=null)l.order=null;r5(l);s5(l,m);var e=U?U(l):1;if(e!=l.height)p6(l,e);}function M5(l){l.parent=null;r5(l);}function N5(a,o){if(a)for(;;){var l=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!l)break;a=a.slice(0,l.index)+a.slice(l.index+l[0].length);var j6=l[1]?"bgClass":"textClass";if(o[j6]==null)o[j6]=l[2];else if(!(new RegExp("(?:^|\s)"+l[2]+"(?:$|\s)")).test(o[j6]))o[j6]+=" "+l[2];}return a;}function O5(m,a){if(m.blankLine)return m.blankLine(a);if(!m.innerMode)return;var i=P.innerMode(m,a);if(i.mode.blankLine)return i.mode.blankLine(i.state);}function P5(m,a,b){for(var i=0;i<10;i++){var d=m.token(a,b);if(a.pos>a.start)return d;}throw new Error("Mode "+m.name+" failed to advance stream.");}function Q5(a,b,m,d,f,l,e){var g=m.flattenSpans;if(g==null)g=a.options.flattenSpans;var h=0,i=null;var j=new $4(b,a.options.tabSize),k;if(b=="")N5(O5(m,d),l);while(!j.eol()){if(j.pos>a.options.maxHighlightLength){g=false;if(e)T5(a,b,d,j.pos);j.pos=b.length;k=null;}else{k=N5(P5(m,j,d),l);}if(a.options.addModeClass){var n=P.innerMode(m,d).mode.name;if(n)k="m-"+(k?n+" "+k:n);}if(!g||i!=k){if(h<j.start)f(j.start,i);h=j.start;i=k;}j.start=j.pos;}while(h<j.pos){var p=Math.min(j.pos,h+50000);f(p,i);h=p;}}function R5(a,l,b,f){var d=[a.state.modeGen],e={};Q5(a,l.text,a.doc.mode,b,function(j,k){d.push(j,k);},e,f);for(var o=0;o<a.state.overlays.length;++o){var g=a.state.overlays[o],i=1,h=0;Q5(a,l.text,g.mode,true,function(j,k){var m=i;while(h<j){var n=d[i];if(n>j)d.splice(i,1,j,d[i+1],n);i+=2;h=Math.min(j,n);}if(!k)return;if(g.opaque){d.splice(m,i-m,j,"cm-overlay "+k);i=m+2;}else{for(;m<i;m+=2){var p=d[m+1];d[m+1]=(p?p+" ":"")+"cm-overlay "+k;}}},e);}return{styles:d,classes:e.bgClass||e.textClass?e:null};}function S5(a,l){if(!l.styles||l.styles[0]!=a.state.modeGen){var r=R5(a,l,l.stateAfter=u2(a,q6(l)));l.styles=r.styles;if(r.classes)l.styleClasses=r.classes;else if(l.styleClasses)l.styleClasses=null;}return l.styles;}function T5(a,b,d,e){var m=a.doc.mode;var f=new $4(b,a.options.tabSize);f.start=f.pos=e||0;if(b=="")O5(m,d);while(!f.eol()&&f.pos<=a.options.maxHighlightLength){P5(m,f,d);f.start=f.pos;}}var U5={},V5={};function W5(a,o){if(!a||/^\s*$/.test(a))return null;var b=o.addModeClass?V5:U5;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"));}function X5(a,l){var b=u7("span",null,null,v?"padding-right: .1px":null);var d={pre:u7("pre",[b]),content:b,col:0,pos:0,cm:a};l.measure={};for(var i=0;i<=(l.rest?l.rest.length:0);i++){var e=i?l.rest[i-1]:l.line,o;d.pos=0;d.addToken=Z5;if((t||v)&&a.getOption("lineWrapping"))d.addToken=$5(d.addToken);if(O7(a.display.measure)&&(o=t6(e)))d.addToken=_5(d.addToken,o);d.map=[];b6(e,d,S5(a,e));if(e.styleClasses){if(e.styleClasses.bgClass)d.bgClass=D7(e.styleClasses.bgClass,d.bgClass||"");if(e.styleClasses.textClass)d.textClass=D7(e.styleClasses.textClass,d.textClass||"");}if(d.map.length==0)d.map.push(0,0,d.content.appendChild(M7(a.display.measure)));if(i==0){l.measure.map=d.map;l.measure.cache={};}else{(l.measure.maps||(l.measure.maps=[])).push(d.map);(l.measure.caches||(l.measure.caches=[])).push({});}}R6(a,"renderLine",a,l.line,d.pre);if(d.pre.className)d.textClass=D7(d.pre.className,d.textClass||"");return d;}function Y5(a){var b=u7("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);return b;}function Z5(b,a,d,e,f,g){if(!a)return;var h=b.cm.options.specialChars,i=false;if(!h.test(a)){b.col+=a.length;var j=document.createTextNode(a);b.map.push(b.pos,b.pos+a.length,j);if(t&&u<9)i=true;b.pos+=a.length;}else{var j=document.createDocumentFragment(),p=0;while(true){h.lastIndex=p;var m=h.exec(a);var k=m?m.index-p:a.length-p;if(k){var l=document.createTextNode(a.slice(p,p+k));if(t&&u<9)j.appendChild(u7("span",[l]));else j.appendChild(l);b.map.push(b.pos,b.pos+k,l);b.col+=k;b.pos+=k;}if(!m)break;p+=k+1;if(m[0]=="\t"){var n=b.cm.options.tabSize,o=n-b.col%n;var l=j.appendChild(u7("span",g7(o),"cm-tab"));b.col+=o;}else{var l=b.cm.options.specialCharPlaceholder(m[0]);if(t&&u<9)j.appendChild(u7("span",[l]));else j.appendChild(l);b.col+=1;}b.map.push(b.pos,b.pos+1,l);b.pos++;}}if(d||e||f||i){var r=d||"";if(e)r+=e;if(f)r+=f;var w=u7("span",[j],r);if(g)w.title=g;return b.content.appendChild(w);}b.content.appendChild(j);}function $5(a){function b(o){var d=" ";for(var i=0;i<o.length-2;++i)d+=i%2?" ":"\u00a0";d+=" ";return d;}return function(d,e,f,g,h,i){a(d,e.replace(/ {3,}/g,b),f,g,h,i);};}function _5(a,o){return function(b,d,e,f,g,h){e=e?e+" cm-force-border":"cm-force-border";var j=b.pos,k=j+d.length;for(;;){for(var i=0;i<o.length;i++){var p=o[i];if(p.to>j&&p.from<=j)break;}if(p.to>=k)return a(b,d,e,f,g,h);a(b,d.slice(0,p.to-j),e,f,null,h);f=null;d=d.slice(p.to-j);j=p.to;}};}function a6(b,a,m,i){var w=!i&&m.widgetNode;if(w){b.map.push(b.pos,b.pos+a,w);b.content.appendChild(w);}b.pos+=a;}function b6(l,b,a){var d=l.markedSpans,e=l.text,f=0;if(!d){for(var i=1;i<a.length;i+=2)b.addToken(b,e.slice(f,f=a[i]),W5(a[i+1],b.cm.options));return;}var g=e.length,p=0,i=1,h="",k;var n=0,o,r,w,x,y;for(;;){if(n==p){o=r=w=x="";y=null;n=Infinity;var a1=[];for(var j=0;j<d.length;++j){var sp=d[j],m=sp.marker;if(sp.from<=p&&(sp.to==null||sp.to>p)){if(sp.to!=null&&n>sp.to){n=sp.to;r="";}if(m.className)o+=" "+m.className;if(m.startStyle&&sp.from==p)w+=" "+m.startStyle;if(m.endStyle&&sp.to==n)r+=" "+m.endStyle;if(m.title&&!x)x=m.title;if(m.collapsed&&(!y||v5(y.marker,m)<0))y=sp;}else if(sp.from>p&&n>sp.from){n=sp.from;}if(m.type=="bookmark"&&sp.from==p&&m.widgetNode)a1.push(m);}if(y&&(y.from||0)==p){a6(b,(y.to==null?g+1:y.to)-p,y.marker,y.from==null);if(y.to==null)return;}if(!y&&a1.length)for(var j=0;j<a1.length;++j)a6(b,0,a1[j]);}if(p>=g)break;var r1=Math.min(g,n);while(true){if(h){var x1=p+h.length;if(!y){var y1=x1>r1?h.slice(0,r1-p):h;b.addToken(b,y1,k?k+o:o,w,p+y1.length==n?r:"",x);}if(x1>=r1){h=h.slice(r1-p);p=r1;break;}p=x1;w="";}h=e.slice(f,f=a[i++]);k=W5(a[i++],b.cm.options);}}}function c6(d,a){return a.from.ch==0&&a.to.ch==0&&h7(a.text)==""&&(!d.cm||d.cm.options.wholeLineUpdateBefore);}function d6(d,a,m,U){function b(n){return m?m[n]:null;}function e(n,h,w){L5(n,h,w,U);T6(n,"change",n,a);}var f=a.from,g=a.to,h=a.text;var j=m6(d,f.line),l=m6(d,g.line);var k=h7(h),o=b(h.length-1),p=g.line-f.line;if(c6(d,a)){for(var i=0,r=[];i<h.length-1;++i)r.push(new K5(h[i],b(i),U));e(l,l.text,o);if(p)d.remove(f.line,p);if(r.length)d.insert(f.line,r);}else if(j==l){if(h.length==1){e(j,j.text.slice(0,f.ch)+k+j.text.slice(g.ch),o);}else{for(var r=[],i=1;i<h.length-1;++i)r.push(new K5(h[i],b(i),U));r.push(new K5(k+j.text.slice(g.ch),o,U));e(j,j.text.slice(0,f.ch)+h[0],b(0));d.insert(f.line+1,r);}}else if(h.length==1){e(j,j.text.slice(0,f.ch)+h[0]+l.text.slice(g.ch),b(0));d.remove(f.line+1,p);}else{e(j,j.text.slice(0,f.ch)+h[0],b(0));e(l,k+l.text.slice(g.ch),o);for(var i=1,r=[];i<h.length-1;++i)r.push(new K5(h[i],b(i),U));if(p>1)d.remove(f.line+1,p-1);d.insert(f.line+1,r);}T6(d,"change",d,a);}function e6(l){this.lines=l;this.parent=null;for(var i=0,h=0;i<l.length;++i){l[i].parent=this;h+=l[i].height;}this.height=h;}e6.prototype={chunkSize:function(){return this.lines.length;},removeInner:function(a,n){for(var i=a,e=a+n;i<e;++i){var l=this.lines[i];this.height-=l.height;M5(l);T6(l,"delete");}this.lines.splice(a,n);},collapse:function(l){l.push.apply(l,this.lines);},insertInner:function(a,l,h){this.height+=h;this.lines=this.lines.slice(0,a).concat(l).concat(this.lines.slice(a));for(var i=0;i<l.length;++i)l[i].parent=this;},iterN:function(a,n,o){for(var e=a+n;a<e;++a)if(o(this.lines[a]))return true;}};function f6(a){this.children=a;var b=0,h=0;for(var i=0;i<a.length;++i){var d=a[i];b+=d.chunkSize();h+=d.height;d.parent=this;}this.size=b;this.height=h;this.parent=null;}f6.prototype={chunkSize:function(){return this.size;},removeInner:function(a,n){this.size-=n;for(var i=0;i<this.children.length;++i){var b=this.children[i],d=b.chunkSize();if(a<d){var r=Math.min(n,d-a),o=b.height;b.removeInner(a,r);this.height-=o-b.height;if(d==r){this.children.splice(i--,1);b.parent=null;}if((n-=r)==0)break;a=0;}else a-=d;}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof e6))){var l=[];this.collapse(l);this.children=[new e6(l)];this.children[0].parent=this;}},collapse:function(l){for(var i=0;i<this.children.length;++i)this.children[i].collapse(l);},insertInner:function(a,l,h){this.size+=l.length;this.height+=h;for(var i=0;i<this.children.length;++i){var b=this.children[i],d=b.chunkSize();if(a<=d){b.insertInner(a,l,h);if(b.lines&&b.lines.length>50){while(b.lines.length>50){var e=b.lines.splice(b.lines.length-25,25);var n=new e6(e);b.height-=n.height;this.children.splice(i+1,0,n);n.parent=this;}this.maybeSpill();}break;}a-=d;}},maybeSpill:function(){if(this.children.length<=10)return;var m=this;do{var a=m.children.splice(m.children.length-5,5);var b=new f6(a);if(!m.parent){var d=new f6(m.children);d.parent=m;m.children=[d,b];m=d;}else{m.size-=b.size;m.height-=b.height;var e=j7(m.parent.children,m);m.parent.children.splice(e+1,0,b);}b.parent=m.parent;}while(m.children.length>10);m.parent.maybeSpill();},iterN:function(a,n,o){for(var i=0;i<this.children.length;++i){var b=this.children[i],d=b.chunkSize();if(a<d){var e=Math.min(n,d-a);if(b.iterN(a,e,o))return true;if((n-=e)==0)break;a=0;}else a-=d;}}};var g6=0;var h6=P.Doc=function(a,m,f){if(!(this instanceof h6))return new h6(a,m,f);if(f==null)f=0;f6.call(this,[new e6([new K5("",null)])]);this.first=f;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=f;var b=K1(f,0);this.sel=S1(b);this.history=new u6(null);this.id=++g6;this.modeOption=m;if(typeof a=="string")a=P7(a);d6(this,{from:b,to:b,text:a});f2(this,S1(b),_6);};h6.prototype=l7(f6.prototype,{constructor:h6,iter:function(f,a,o){if(o)this.iterN(f-this.first,a-f,o);else this.iterN(this.first,this.first+this.size,f);},insert:function(a,l){var h=0;for(var i=0;i<l.length;++i)h+=l[i].height;this.insertInner(a-this.first,l,h);},remove:function(a,n){this.removeInner(a-this.first,n);},getValue:function(l){var a=o6(this,this.first,this.first+this.size);if(l===false)return a;return a.join(l||"\n");},setValue:m3(function(a){var b=K1(this.first,0),l=this.first+this.size-1;q4(this,{from:b,to:K1(l,m6(this,l).text.length),text:P7(a),origin:"setValue"},true);f2(this,S1(b));}),replaceRange:function(a,f,b,o){f=U1(this,f);b=b?U1(this,b):f;w4(this,a,f,b,o);},getRange:function(f,a,l){var b=n6(this,U1(this,f),U1(this,a));if(l===false)return b;return b.join(l||"\n");},getLine:function(a){var l=this.getLineHandle(a);return l&&l.text;},getLineHandle:function(l){if(W1(this,l))return m6(this,l);},getLineNumber:function(l){return q6(l);},getLineHandleVisualStart:function(l){if(typeof l=="number")l=m6(this,l);return A5(l);},lineCount:function(){return this.size;},firstLine:function(){return this.first;},lastLine:function(){return this.first+this.size-1;},clipPos:function(p){return U1(this,p);},getCursor:function(a){var v7=this.sel.primary(),p;if(a==null||a=="head")p=v7.head;else if(a=="anchor")p=v7.anchor;else if(a=="end"||a=="to"||a===false)p=v7.to();else p=v7.from();return p;},listSelections:function(){return this.sel.ranges;},somethingSelected:function(){return this.sel.somethingSelected();},setCursor:m3(function(l,a,o){b2(this,U1(this,typeof l=="number"?K1(l,a||0):l),null,o);}),setSelection:m3(function(a,h,o){b2(this,U1(this,a),U1(this,h||a),o);}),extendSelection:m3(function(h,o,a){Z1(this,U1(this,h),o&&U1(this,o),a);}),extendSelections:m3(function(h,o){$1(this,X1(this,h,o));}),extendSelectionsBy:m3(function(f,o){$1(this,k7(this.sel.ranges,f),o);}),setSelections:m3(function(r,p,o){if(!r.length)return;for(var i=0,a=[];i<r.length;i++)a[i]=new Q1(U1(this,r[i].anchor),U1(this,r[i].head));if(p==null)p=Math.min(r.length-1,this.sel.primIndex);f2(this,R1(a,p),o);}),addSelection:m3(function(a,h,o){var r=this.sel.ranges.slice(0);r.push(new Q1(U1(this,a),U1(this,h||a)));f2(this,R1(r,r.length-1),o);}),getSelection:function(l){var r=this.sel.ranges,a;for(var i=0;i<r.length;i++){var b=n6(this,r[i].from(),r[i].to());a=a?a.concat(b):b;}if(l===false)return a;else return a.join(l||"\n");},getSelections:function(l){var p=[],r=this.sel.ranges;for(var i=0;i<r.length;i++){var a=n6(this,r[i].from(),r[i].to());if(l!==false)a=a.join(l||"\n");p[i]=a;}return p;},replaceSelection:function(a,b,o){var d=[];for(var i=0;i<this.sel.ranges.length;i++)d[i]=a;this.replaceSelections(d,b,o||"+input");},replaceSelections:m3(function(a,b,o){var d=[],e=this.sel;for(var i=0;i<e.ranges.length;i++){var v7=e.ranges[i];d[i]={from:v7.from(),to:v7.to(),text:P7(a[i]),origin:o};}var n=b&&b!="end"&&o4(this,d,b);for(var i=d.length-1;i>=0;i--)q4(this,d[i]);if(n)d2(this,n);else if(this.cm)C4(this.cm);}),undo:m3(function(){s4(this,"undo");}),redo:m3(function(){s4(this,"redo");}),undoSelection:m3(function(){s4(this,"undo",true);}),redoSelection:m3(function(){s4(this,"redo",true);}),setExtending:function(a){this.extend=a;},getExtending:function(){return this.extend;},historySize:function(){var h=this.history,d=0,a=0;for(var i=0;i<h.done.length;i++)if(!h.done[i].ranges)++d;for(var i=0;i<h.undone.length;i++)if(!h.undone[i].ranges)++a;return{undo:d,redo:a};},clearHistory:function(){this.history=new u6(this.history.maxGeneration);},markClean:function(){this.cleanGeneration=this.changeGeneration(true);},changeGeneration:function(f){if(f)this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null;return this.history.generation;},isClean:function(g){return this.history.generation==(g||this.cleanGeneration);},getHistory:function(){return{done:F6(this.history.done),undone:F6(this.history.undone)};},setHistory:function(h){var a=this.history=new u6(this.history.maxGeneration);a.done=F6(h.done.slice(0),null,true);a.undone=F6(h.undone.slice(0),null,true);},addLineClass:m3(function(h,w,a){return F4(this,h,"class",function(l){var j6=w=="text"?"textClass":w=="background"?"bgClass":"wrapClass";if(!l[j6])l[j6]=a;else if(new RegExp("(?:^|\\s)"+a+"(?:$|\\s)").test(l[j6]))return false;else l[j6]+=" "+a;return true;});}),removeLineClass:m3(function(h,w,a){return F4(this,h,"class",function(l){var j6=w=="text"?"textClass":w=="background"?"bgClass":"wrapClass";var b=l[j6];if(!b)return false;else if(a==null)l[j6]=null;else{var f=b.match(new RegExp("(?:^|\\s+)"+a+"(?:$|\\s+)"));if(!f)return false;var e=f.index+f[0].length;l[j6]=b.slice(0,f.index)+(!f.index||e==b.length?"":" ")+b.slice(e)||null;}return true;});}),markText:function(f,a,o){return b5(this,U1(this,f),U1(this,a),o,"range");},setBookmark:function(p,o){var r={replacedWith:o&&(o.nodeType==null?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:false,shared:o&&o.shared};p=U1(this,p);return b5(this,p,p,r,"bookmark");},findMarksAt:function(p){p=U1(this,p);var m=[],a=m6(this,p.line).markedSpans;if(a)for(var i=0;i<a.length;++i){var b=a[i];if((b.from==null||b.from<=p.ch)&&(b.to==null||b.to>=p.ch))m.push(b.marker.parent||b.marker);}return m;},findMarks:function(f,a,b){f=U1(this,f);a=U1(this,a);var d=[],q6=f.line;this.iter(f.line,a.line+1,function(l){var e=l.markedSpans;if(e)for(var i=0;i<e.length;i++){var g=e[i];if(!(q6==f.line&&f.ch>g.to||g.from==null&&q6!=f.line||q6==a.line&&g.from>a.ch)&&(!b||b(g.marker)))d.push(g.marker.parent||g.marker);}++q6;});return d;},getAllMarks:function(){var m=[];this.iter(function(l){var a=l.markedSpans;if(a)for(var i=0;i<a.length;++i)if(a[i].from!=null)m.push(a[i].marker);});return m;},posFromIndex:function(Q6){var a,q6=this.first;this.iter(function(l){var b=l.text.length+1;if(b>Q6){a=Q6;return true;}Q6-=b;++q6;});return U1(this,K1(q6,a));},indexFromPos:function(a){a=U1(this,a);var i=a.ch;if(a.line<this.first||a.ch<0)return 0;this.iter(this.first,a.line,function(l){i+=l.text.length+1;});return i;},copy:function(a){var d=new h6(o6(this,this.first,this.first+this.size),this.modeOption,this.first);d.scrollTop=this.scrollTop;d.scrollLeft=this.scrollLeft;d.sel=this.sel;d.extend=false;if(a){d.history.undoDepth=this.history.undoDepth;d.setHistory(this.getHistory());}return d;},linkedDoc:function(o){if(!o)o={};var f=this.first,a=this.first+this.size;if(o.from!=null&&o.from>f)f=o.from;if(o.to!=null&&o.to<a)a=o.to;var b=new h6(o6(this,f,a),o.mode||this.modeOption,f);if(o.sharedHist)b.history=this.history;(this.linked||(this.linked=[])).push({doc:b,sharedHist:o.sharedHist});b.linked=[{doc:this,isParent:true,sharedHist:o.sharedHist}];f5(b,e5(this));return b;},unlinkDoc:function(o){if(o instanceof P)o=o.doc;if(this.linked)for(var i=0;i<this.linked.length;++i){var l=this.linked[i];if(l.doc!=o)continue;this.linked.splice(i,1);o.unlinkDoc(this);g5(e5(this));break;}if(o.history==this.history){var a=[o.id];k6(o,function(d){a.push(d.id);},true);o.history=new u6(null);o.history.done=F6(this.history.done,a);o.history.undone=F6(this.history.undone,a);}},iterLinkedDocs:function(f){k6(this,f);},getMode:function(){return this.mode;},getEditor:function(){return this.cm;}});h6.prototype.eachLine=h6.prototype.iter;var i6="iter insert remove copy getEditor".split(" ");for(var j6 in h6.prototype)if(h6.prototype.hasOwnProperty(j6)&&j7(i6,j6)<0)P.prototype[j6]=(function(m){return function(){return m.apply(this.doc,arguments);};})(h6.prototype[j6]);Y6(h6);function k6(d,f,a){function p(d,b,e){if(d.linked)for(var i=0;i<d.linked.length;++i){var r=d.linked[i];if(r.doc==b)continue;var g=e&&r.sharedHist;if(a&&!g)continue;f(r.doc,g);p(r.doc,d,g);}}p(d,null,true);}function l6(a,d){if(d.cm)throw new Error("This document is already in use.");a.doc=d;d.cm=a;V(a);R(a);if(!a.options.lineWrapping)b1(a);a.options.mode=d.modeOption;p3(a);}function m6(d,n){n-=d.first;if(n<0||n>=d.size)throw new Error("There is no line "+(n+d.first)+" in the document.");for(var a=d;!a.lines;){for(var i=0;;++i){var b=a.children[i],e=b.chunkSize();if(n<e){a=b;break;}n-=e;}}return a.lines[n];}function n6(d,a,e){var o=[],n=a.line;d.iter(a.line,e.line+1,function(l){var b=l.text;if(n==e.line)b=b.slice(0,e.ch);if(n==a.line)b=b.slice(a.ch);o.push(b);++n;});return o;}function o6(d,f,a){var o=[];d.iter(f,a,function(l){o.push(l.text);});return o;}function p6(l,h){var d=h-l.height;if(d)for(var n=l;n;n=n.parent)n.height+=d;}function q6(l){if(l.parent==null)return null;var a=l.parent,n=j7(a.lines,l);for(var b=a.parent;b;a=b,b=b.parent){for(var i=0;;++i){if(b.children[i]==a)break;n+=b.children[i].chunkSize();}}return n+a.first;}function r6(a,h){var n=a.first;outer:do{for(var i=0;i<a.children.length;++i){var b=a.children[i],d=b.height;if(h<d){a=b;continue outer;}h-=d;n+=b.chunkSize();}return n;}while(!a.lines);for(var i=0;i<a.lines.length;++i){var l=a.lines[i],e=l.height;if(h<e)break;h-=e;}return n+i;}function s6(l){l=A5(l);var h=0,a=l.parent;for(var i=0;i<a.lines.length;++i){var b=a.lines[i];if(b==l)break;else h+=b.height;}for(var p=a.parent;p;a=p,p=a.parent){for(var i=0;i<p.children.length;++i){var d=p.children[i];if(d==a)break;else h+=d.height;}}return h;}function t6(l){var o=l.order;if(o==null)o=l.order=h8(l.text);return o;}function u6(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=a||1;}function v6(d,a){var h={from:M1(a.from),to:k4(a),text:n6(d,a.from,a.to)};C6(d,h,a.from.line,a.to.line+1);k6(d,function(d){C6(d,h,a.from.line,a.to.line+1);},true);return h;}function w6(a){while(a.length){var l=h7(a);if(l.ranges)a.pop();else break;}}function x6(h,f){if(f){w6(h.done);return h7(h.done);}else if(h.done.length&&!h7(h.done).ranges){return h7(h.done);}else if(h.done.length>1&&!h.done[h.done.length-2].ranges){h.done.pop();return h7(h.done);}}function y6(d,a,b,o){var h=d.history;h.undone.length=0;var e=+new Date,f;if((h.lastOp==o||h.lastOrigin==a.origin&&a.origin&&((a.origin.charAt(0)=="+"&&d.cm&&h.lastModTime>e-d.cm.options.historyEventDelay)||a.origin.charAt(0)=="*"))&&(f=x6(h,h.lastOp==o))){var l=h7(f.changes);if(L1(a.from,a.to)==0&&L1(a.from,l.to)==0){l.to=k4(a);}else{f.changes.push(v6(d,a));}}else{var g=h7(h.done);if(!g||!g.ranges)B6(d.sel,h.done);f={changes:[v6(d,a)],generation:h.generation};h.done.push(f);while(h.done.length>h.undoDepth){h.done.shift();if(!h.done[0].ranges)h.done.shift();}}h.done.push(b);h.generation=++h.maxGeneration;h.lastModTime=h.lastSelTime=e;h.lastOp=h.lastSelOp=o;h.lastOrigin=h.lastSelOrigin=a.origin;if(!l)R6(d,"historyAdded");}function z6(d,o,p,a){var b=o.charAt(0);return b=="*"||b=="+"&&p.ranges.length==a.ranges.length&&p.somethingSelected()==a.somethingSelected()&&new Date-d.history.lastSelTime<=(d.cm?d.cm.options.historyEventDelay:500);}function A6(d,a,o,b){var h=d.history,e=b&&b.origin;if(o==h.lastSelOp||(e&&h.lastSelOrigin==e&&(h.lastModTime==h.lastSelTime&&h.lastOrigin==e||z6(d,e,h7(h.done),a))))h.done[h.done.length-1]=a;else B6(a,h.done);h.lastSelTime=+new Date;h.lastSelOrigin=e;h.lastSelOp=o;if(b&&b.clearRedo!==false)w6(h.undone);}function B6(a,d){var b=h7(d);if(!(b&&b.ranges&&b.equals(a)))d.push(a);}function C6(d,a,f,b){var e=a["spans_"+d.id],n=0;d.iter(Math.max(d.first,f),Math.min(d.first+d.size,b),function(l){if(l.markedSpans)(e||(e=a["spans_"+d.id]={}))[n]=l.markedSpans;++n;});}function D6(a){if(!a)return null;for(var i=0,o;i<a.length;++i){if(a[i].marker.explicitlyCleared){if(!o)o=a.slice(0,i);}else if(o)o.push(a[i]);}return!o?a:o.length?o:null;}function E6(d,a){var f=a["spans_"+d.id];if(!f)return null;for(var i=0,n=[];i<a.text.length;++i)n.push(D6(f[i]));return n;}function F6(e,n,a){for(var i=0,b=[];i<e.length;++i){var d=e[i];if(d.ranges){b.push(a?P1.prototype.deepCopy.call(d):d);continue;}var f=d.changes,g=[];b.push({changes:g});for(var j=0;j<f.length;++j){var h=f[j],m;g.push({from:h.from,to:h.to,text:h.text});if(n)for(var j6 in h)if(m=j6.match(/^spans_(\d+)$/)){if(j7(n,Number(m[1]))>-1){h7(g)[j6]=h[j6];delete h[j6];}}}}return b;}function G6(p,f,a,d){if(a<p.line){p.line+=d;}else if(f<p.line){p.line=f;p.ch=0;}}function H6(a,f,b,d){for(var i=0;i<a.length;++i){var e=a[i],o=true;if(e.ranges){if(!e.copied){e=a[i]=e.deepCopy();e.copied=true;}for(var j=0;j<e.ranges.length;j++){G6(e.ranges[j].anchor,f,b,d);G6(e.ranges[j].head,f,b,d);}continue;}for(var j=0;j<e.changes.length;++j){var g=e.changes[j];if(b<g.from.line){g.from=K1(g.from.line+d,g.from.ch);g.to=K1(g.to.line+d,g.to.ch);}else if(f<=g.to.line){o=false;break;}}if(!o){a.splice(0,i+1);i=0;}}}function I6(h,a){var f=a.from.line,b=a.to.line,d=a.text.length-(b-f)-1;H6(h.done,f,b,d);H6(h.undone,f,b,d);}var J6=P.e_preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false;};var K6=P.e_stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;};function L6(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false;}var M6=P.e_stop=function(e){J6(e);K6(e);};function N6(e){return e.target||e.srcElement;}function O6(e){var b=e.which;if(b==null){if(e.button&1)b=1;else if(e.button&2)b=3;else if(e.button&4)b=2;}if(I&&e.ctrlKey&&b==1)b=3;return b;}var on=P.on=function(e,a,f){if(e.addEventListener)e.addEventListener(a,f,false);else if(e.attachEvent)e.attachEvent("on"+a,f);else{var k7=e._handlers||(e._handlers={});var b=k7[a]||(k7[a]=[]);b.push(f);}};var Q6=P.off=function(e,a,f){if(e.removeEventListener)e.removeEventListener(a,f,false);else if(e.detachEvent)e.detachEvent("on"+a,f);else{var b=e._handlers&&e._handlers[a];if(!b)return;for(var i=0;i<b.length;++i)if(b[i]==f){b.splice(i,1);break;}}};var R6=P.signal=function(e,a){var b=e._handlers&&e._handlers[a];if(!b)return;var d=Array.prototype.slice.call(arguments,2);for(var i=0;i<b.length;++i)b[i].apply(null,d);};var S6=null;function T6(e,a){var b=e._handlers&&e._handlers[a];if(!b)return;var d=Array.prototype.slice.call(arguments,2),l;if($2){l=$2.delayedCallbacks;}else if(S6){l=S6;}else{l=S6=[];setTimeout(U6,0);}function g(f){return function(){f.apply(null,d);};};for(var i=0;i<b.length;++i)l.push(g(b[i]));}function U6(){var d=S6;S6=null;for(var i=0;i<d.length;++i)d[i]();}function V6(a,e,o){R6(a,o||e.type,a,e);return L6(e)||e.codemirrorIgnore;}function W6(a){var b=a._handlers&&a._handlers.cursorActivity;if(!b)return;var d=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var i=0;i<b.length;++i)if(j7(d,b[i])==-1)d.push(b[i]);}function X6(e,a){var b=e._handlers&&e._handlers[a];return b&&b.length>0;}function Y6(a){a.prototype.on=function(b,f){on(this,b,f);};a.prototype.off=function(b,f){Q6(this,b,f);};}var Z6=30;var $6=P.Pass={toString:function(){return"CodeMirror.Pass";}};var _6={scroll:false},a7={origin:"*mouse"},b7={origin:"+move"};function c7(){this.id=null;}c7.prototype.set=function(m,f){clearTimeout(this.id);this.id=setTimeout(f,m);};var d7=P.countColumn=function(a,e,b,d,f){if(e==null){e=a.search(/[^\s\u00a0]/);if(e==-1)e=a.length;}for(var i=d||0,n=f||0;;){var g=a.indexOf("\t",i);if(g<0||g>=e)return n+(e-i);n+=g-i;n+=b-(n%b);i=g+1;}};function e7(a,g,b){for(var p=0,d=0;;){var n=a.indexOf("\t",p);if(n==-1)n=a.length;var e=n-p;if(n==a.length||d+e>=g)return p+Math.min(e,g-d);d+=n-p;d+=b-(d%b);p=n+1;if(d>=g)return p;}}var f7=[""];function g7(n){while(f7.length<=n)f7.push(h7(f7)+" ");return f7[n];}function h7(a){return a[a.length-1];}var i7=function(n){n.select();};if(G)i7=function(n){n.selectionStart=0;n.selectionEnd=n.value.length;};else if(t)i7=function(n){try{n.select();}catch(a){}};function j7(a,u7){for(var i=0;i<a.length;++i)if(a[i]==u7)return i;return-1;}if([].indexOf)j7=function(a,u7){return a.indexOf(u7);};function k7(a,f){var o=[];for(var i=0;i<a.length;i++)o[i]=f(a[i],i);return o;}if([].map)k7=function(a,f){return a.map(f);};function l7(b,p){var i;if(Object.create){i=Object.create(b);}else{var a=function(){};a.prototype=b;i=new a();}if(p)m7(p,i);return i;};function m7(o,a,b){if(!a)a={};for(var j6 in o)if(o.hasOwnProperty(j6)&&(b!==false||!a.hasOwnProperty(j6)))a[j6]=o[j6];return a;}function n7(f){var a=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,a);};}var o7=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var p7=P.isWordChar=function(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||o7.test(a));};function q7(a,h){if(!h)return p7(a);if(h.source.indexOf("\\w")>-1&&p7(a))return true;return h.test(a);}function r7(o){for(var n in o)if(o.hasOwnProperty(n)&&o[n])return false;return true;}var s7=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function t7(a){return a.charCodeAt(0)>=768&&s7.test(a);}function u7(a,b,d,f){var e=document.createElement(a);if(d)e.className=d;if(f)e.style.cssText=f;if(typeof b=="string")e.appendChild(document.createTextNode(b));else if(b)for(var i=0;i<b.length;++i)e.appendChild(b[i]);return e;}var v7;if(document.createRange)v7=function(n,a,e){var r=document.createRange();r.setEnd(n,e);r.setStart(n,a);return r;};else v7=function(n,a,e){var r=document.body.createTextRange();r.moveToElementText(n.parentNode);r.collapse(true);r.moveEnd("character",e);r.moveStart("character",a);return r;};function w7(e){for(var a=e.childNodes.length;a>0;--a)e.removeChild(e.firstChild);return e;}function x7(p,e){return w7(p).appendChild(e);}function y7(p,a){if(p.contains)return p.contains(a);while(a=a.parentNode)if(a==p)return true;}function z7(){return document.activeElement;}if(t&&u<11)z7=function(){try{return document.activeElement;}catch(e){return document.body;}};function A7(a){return new RegExp("\\b"+a+"\\b\\s*");}function B7(n,a){var b=A7(a);if(b.test(n.className))n.className=n.className.replace(b,"");}function C7(n,a){if(!A7(a).test(n.className))n.className+=" "+a;}function D7(a,b){var d=a.split(" ");for(var i=0;i<d.length;i++)if(d[i]&&!A7(d[i]).test(b))b+=" "+d[i];return b;}function E7(f){if(!document.body.getElementsByClassName)return;var b=document.body.getElementsByClassName("CodeMirror");for(var i=0;i<b.length;i++){var a=b[i].CodeMirror;if(a)f(a);}}var F7=false;function G7(){if(F7)return;H7();F7=true;}function H7(){var r;on(window,"resize",function(){if(r==null)r=setTimeout(function(){r=null;J7=null;E7(F3);},100);});on(window,"blur",function(){E7(h4);});}var I7=function(){if(t&&u<9)return false;var d=u7('div');return"draggable"in d||"dragDrop"in d;}();var J7;function K7(m){if(J7!=null)return J7;var a=u7("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");x7(m,a);if(a.offsetWidth)J7=a.offsetHeight-a.clientHeight;return J7||0;}var L7;function M7(m){if(L7==null){var a=u7("span","\u200b");x7(m,u7("span",[a,document.createTextNode("x")]));if(m.firstChild.offsetHeight!=0)L7=a.offsetWidth<=1&&a.offsetHeight>2&&!(t&&u<8);}if(L7)return u7("span","\u200b");else return u7("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");}var N7;function O7(m){if(N7!=null)return N7;var a=x7(m,document.createTextNode("A\u062eA"));var r=v7(a,0,1).getBoundingClientRect();if(!r||r.left==r.right)return false;var b=v7(a,1,2).getBoundingClientRect();return N7=(b.right-r.right<3);}var P7=P.splitLines="\n\nb".split(/\n/).length!=3?function(a){var p=0,r=[],l=a.length;while(p<=l){var n=a.indexOf("\n",p);if(n==-1)n=a.length;var b=a.slice(p,a.charAt(n-1)=="\r"?n-1:n);var d=b.indexOf("\r");if(d!=-1){r.push(b.slice(0,d));p+=d+1;}else{r.push(b);p=n+1;}}return r;}:function(a){return a.split(/\r\n?|\n/);};var Q7=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd;}catch(e){return false;}}:function(a){try{var v7=a.ownerDocument.selection.createRange();}catch(e){}if(!v7||v7.parentElement()!=a)return false;return v7.compareEndPoints("StartToEnd",v7)!=0;};var R7=(function(){var e=u7("div");if("oncopy"in e)return true;e.setAttribute("oncopy","return;");return typeof e.oncopy=="function";})();var S7=null;function T7(m){if(S7!=null)return S7;var n=x7(m,u7("span","x"));var a=n.getBoundingClientRect();var f=v7(n,0,1).getBoundingClientRect();return S7=Math.abs(a.left-f.left)>1;}var U7={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};P.keyNames=U7;(function(){for(var i=0;i<10;i++)U7[i+48]=U7[i+96]=String(i);for(var i=65;i<=90;i++)U7[i]=String.fromCharCode(i);for(var i=1;i<=12;i++)U7[i+111]=U7[i+63235]="F"+i;})();function V7(o,a,b,f){if(!o)return f(a,b,"ltr");var d=false;for(var i=0;i<o.length;++i){var p=o[i];if(p.from<b&&p.to>a||a==b&&p.to==a){f(Math.max(p.from,a),Math.min(p.to,b),p.level==1?"rtl":"ltr");d=true;}}if(!d)f(a,b,"ltr");}function W7(p){return p.level%2?p.to:p.from;}function X7(p){return p.level%2?p.from:p.to;}function Y7(l){var o=t6(l);return o?W7(o[0]):0;}function Z7(l){var o=t6(l);if(!o)return l.text.length;return X7(h7(o));}function $7(a,l){var b=m6(a.doc,l);var d=A5(b);if(d!=b)l=q6(d);var o=t6(d);var e=!o?0:o[0].level%2?Z7(d):Y7(d);return K1(l,e);}function _7(a,l){var m,b=m6(a.doc,l);while(m=y5(b)){b=m.find(1,true).line;l=null;}var o=t6(b);var d=!o?b.text.length:o[0].level%2?Y7(b):Z7(b);return K1(l==null?q6(b):l,d);}function a8(a,p){var b=$7(a,p.line);var l=m6(a.doc,b.line);var o=t6(l);if(!o||o[0].level==0){var f=Math.max(0,l.text.search(/\S/));var i=p.line==b.line&&p.ch<=f&&p.ch;return K1(b.line,i?0:f);}return b;}function b8(o,a,b){var l=o[0].level;if(a==l)return true;if(b==l)return false;return a<b;}var c8;function d8(o,p){c8=null;for(var i=0,f;i<o.length;++i){var a=o[i];if(a.from<p&&a.to>p)return i;if((a.from==p||a.to==p)){if(f==null){f=i;}else if(b8(o,a.level,o[f].level)){if(a.from!=a.to)c8=f;return i;}else{if(a.from!=a.to)c8=i;return f;}}}return f;}function e8(l,p,d,b){if(!b)return p+d;do p+=d;while(p>0&&t7(l.text.charAt(p)));return p;}function f8(l,a,d,b){var e=t6(l);if(!e)return g8(l,a,d,b);var p=d8(e,a),f=e[p];var g=e8(l,a,f.level%2?-d:d,b);for(;;){if(g>f.from&&g<f.to)return g;if(g==f.from||g==f.to){if(d8(e,g)==p)return g;f=e[p+=d];return(d>0)==f.level%2?f.to:f.from;}else{f=e[p+=d];if(!f)return null;if((d>0)==f.level%2)g=e8(l,f.to,-1,b);else g=e8(l,f.from,1,b);}}}function g8(l,a,d,b){var e=a+d;if(b)while(e>0&&t7(l.text.charAt(e)))e+=d;return e<0||e>l.text.length?null:e;}var h8=(function(){var l="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var a="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function b(i){if(i<=0xf7)return l.charAt(i);else if(0x590<=i&&i<=0x5f4)return"R";else if(0x600<=i&&i<=0x6ed)return a.charAt(i-0x600);else if(0x6ee<=i&&i<=0x8ac)return"r";else if(0x2000<=i&&i<=0x200b)return"w";else if(i==0x200c)return"b";else return"L";}var d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/;var o="L";function k(i,j,m){this.level=i;this.from=j;this.to=m;}return function(n){if(!d.test(n))return false;var p=n.length,r=[];for(var i=0,w;i<p;++i)r.push(w=b(n.charCodeAt(i)));for(var i=0,x=o;i<p;++i){var w=r[i];if(w=="m")r[i]=x;else x=w;}for(var i=0,y=o;i<p;++i){var w=r[i];if(w=="1"&&y=="r")r[i]="n";else if(f.test(w)){y=w;if(w=="r")r[i]="R";}}for(var i=1,x=r[0];i<p-1;++i){var w=r[i];if(w=="+"&&x=="1"&&r[i+1]=="1")r[i]="1";else if(w==","&&x==r[i+1]&&(x=="1"||x=="n"))r[i]=x;x=w;}for(var i=0;i<p;++i){var w=r[i];if(w==",")r[i]="N";else if(w=="%"){for(var a1=i+1;a1<p&&r[a1]=="%";++a1){}var r1=(i&&r[i-1]=="!")||(a1<p&&r[a1]=="1")?"1":"N";for(var j=i;j<a1;++j)r[j]=r1;i=a1-1;}}for(var i=0,y=o;i<p;++i){var w=r[i];if(y=="L"&&w=="1")r[i]="L";else if(f.test(w))y=w;}for(var i=0;i<p;++i){if(e.test(r[i])){for(var a1=i+1;a1<p&&e.test(r[a1]);++a1){}var x1=(i?r[i-1]:o)=="L";var y1=(a1<p?r[a1]:o)=="L";var r1=x1||y1?"L":"R";for(var j=i;j<a1;++j)r[j]=r1;i=a1-1;}}var a2=[],m;for(var i=0;i<p;){if(g.test(r[i])){var e2=i;for(++i;i<p&&g.test(r[i]);++i){}a2.push(new k(0,e2,i));}else{var x2=i,at=a2.length;for(++i;i<p&&r[i]!="L";++i){}for(var j=x2;j<i;){if(h.test(r[j])){if(x2<j)a2.splice(at,0,new k(1,x2,j));var P6=j;for(++j;j<i&&h.test(r[j]);++j){}a2.splice(at,0,new k(2,P6,j));x2=j;}else++j;}if(x2<i)a2.splice(at,0,new k(1,x2,i));}}if(a2[0].level==1&&(m=n.match(/^\s+/))){a2[0].from=m[0].length;a2.unshift(new k(0,0,m[0].length));}if(h7(a2).level==1&&(m=n.match(/\s+$/))){h7(a2).to-=m[0].length;a2.push(new k(0,p-m[0].length,p));}if(a2[0].level!=h7(a2).level)a2.push(new k(a2[0].level,p,p));return a2;};})();P.version="4.6.0";return P;});

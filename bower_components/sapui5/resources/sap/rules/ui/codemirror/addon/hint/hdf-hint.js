(function(){"use strict";var P=CodeMirror.Pos;function g(c,o){o.completeSingle=false;var a=c.getCursor();var b=null;var n=0;var s=0;var f=[];var d=c.getRange({line:0,ch:0},a);if(c.options.headerValue){var p=c.options.headerValue+" ";if(c.options.fixedOperator){p=p+c.options.fixedOperator+" ";}d=p+d;}var e={};function _(i,S){return i.slice(0,S.length)===S;}function h(q){var r={};r.suggs=[];for(var i=0;i<q.suggs.length;i++){if(q.suggs[i].info){if(q.suggs[i].info.category){if(q.suggs[i].info.category==="structuredCond"){continue;}}}r.suggs.push(q.suggs[i]);}return r;}function j(l){var i=0;if(c.currentHintData&&l.length>=c.currentHintData.key.length){f=c.currentHintData.data.listCompletion.filter(function(q){if(_((c.currentHintData.key+q.completion),l)===true){var x=l.substring(c.currentHintData.key.length,l.length).length;q.completion=q.completion.substring(x,q.completion.length);if(q.completion.length===0){return false;}return true;}return false;});i=f.length;e.listCompletion=f;}else{i=0;}return i;}function k(f,l){var i=f[0];var x=l+i.completion;var q=x.split("\n");x=q[a.line];if(s===0){if(i.tokenType==="valueList"){s=x.substring(0,x.toLowerCase().lastIndexOf("")).length;}else{s=x.substring(0,x.toLowerCase().lastIndexOf(i.text.toLowerCase())).length;}}e.from=CodeMirror.Pos(a.line,s);e.to=CodeMirror.Pos(a.line,l.length);c.currentHintData={key:l,data:e};if(c.options.stillNeedShowHint){return{list:f,from:e.from,to:e.to};}}var l=d;n=j(l);var m={};if(c.options.relDelegate){m=c.options.relDelegate.getSuggestions(d,c.options.returnType,c.options.collection);if(c.options.filterOutStructuredCond){m=h(m);}if(typeof(b)!=="object"){b=JSON.parse(m);}else{b=m;}if(b.suggs instanceof Array){n=b.suggs.length;f=e.listCompletion=b.suggs;}}if(f.length>0){return k(f,l);}else{return null;}}CodeMirror.hdfHint=g;CodeMirror.registerHelper("hint","hdf",g);})();

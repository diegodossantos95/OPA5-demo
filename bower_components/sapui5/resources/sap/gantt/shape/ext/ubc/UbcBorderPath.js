/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/gantt/misc/Utility","sap/gantt/misc/Format","sap/gantt/shape/Path"],function(U,F,P){"use strict";var a=P.extend("sap.gantt.shape.ext.ubc.UbcBorderPath",{});a.prototype.getEnableSelection=function(d,r){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",d);}return false;};a.prototype.getD=function(d,r){var p="";if(this.mShapeConfig.hasShapeProperty("d")){p=this._configFirst("d",d);}else{var b=d.drawData?d.drawData:d.period;if(b.length>0){var m=this._getMaxTotalRevised(d);var c=this._getMaxY(d,r);var e=r.rowHeight-1;var A=this.getAxisTime();for(var i=0;i<b.length;i++){var x,f,y,g;x=A.timeToView(F.abapTimestampToDate(b[i].start_date)).toFixed(1);if(i<b.length-1){f=A.timeToView(F.abapTimestampToDate(b[i+1].start_date)).toFixed(1);}else{f=A.timeToView(F.abapTimestampToDate(b[i].start_date)).toFixed(1);}if(!jQuery.isNumeric(x)){x=A.timeToView(0).toFixed(1);}if(!jQuery.isNumeric(f)){x=A.timeToView(0).toFixed(1);}y=c-b[i].demand/m*e;y=y.toFixed(1);if(y<r.y){y=r.y;}if(i<b.length-1){g=c-b[i+1].demand/m*e;}else{f=A.timeToView(F.abapTimestampToDate(b[i].start_date)).toFixed(1);g=c-b[i].demand/m*e;}g=g.toFixed(1);if(g<r.y){g=r.y;}p+=" M "+x+" "+y+"L"+f+" "+y;p+=" M "+f+" "+y+"L"+f+" "+g;}}}if(this.isValid(p)){return p;}else{jQuery.sap.log.warning("UbcBorderPath shape generated invalid d: "+p+" from the given data: "+d);return null;}};a.prototype.getStroke=function(d,r){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",d);}return"blue";};a.prototype.getStrokeWidth=function(d,r){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",d);}return 0.3;};a.prototype._getMaxY=function(d,r){var t=r.y;var b=r.rowHeight-1;var m=t+b;return m;};a.prototype._getMaxTotalRevised=function(d){var m=this._getMaxTotal(d);var b=m+this._getmaxExceedCap(d);return b;};a.prototype._getMaxTotal=function(d){var m=Math.max.apply(Math,d.period.map(function(o){return o.supply;}));if(m<=0){m=1;}return m;};a.prototype._getmaxExceedCap=function(d){var m=this._getMaxTotal(d);var b=25;if(this.mShapeConfig.hasShapeProperty("maxExceedCapacity")){b=this._configFirst("maxExceedCapacity",d);}return m*b/100;};return a;},true);

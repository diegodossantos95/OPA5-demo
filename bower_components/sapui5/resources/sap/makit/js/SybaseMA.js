/*
Copyright (c) 2003-2008 Terence Parr. All rights reserved.
Code licensed under the BSD License:
http://www.antlr.org/license.html

Some parts of the ANTLR class:
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
*/
if(typeof org=="undefined"||!org){var org={}}if(typeof org.antlr=="undefined"||!org.antlr){org.antlr={}}org.antlr.global=(function(){return this}).call(null);org.antlr.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=A[C].split(".");E=org.antlr.global;for(B=0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]]}}return E};org.antlr.env=org.antlr.env||{};org.antlr.env.ua=function(){var D={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,rhino:false};var B,A;try{B=navigator.userAgent;if((/KHTML/).test(B)){D.webkit=1}A=B.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){D.webkit=parseFloat(A[1]);if(/ Mobile\//.test(B)){D.mobile="Apple"}else{A=B.match(/NokiaN[^\/]*/);if(A){D.mobile=A[0]}}A=B.match(/AdobeAIR\/([^\s]*)/);if(A){D.air=A[0]}}if(!D.webkit){A=B.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){D.opera=parseFloat(A[1]);A=B.match(/Opera Mini[^;]*/);if(A){D.mobile=A[0]}}else{A=B.match(/MSIE\s([^;]*)/);if(A&&A[1]){D.ie=parseFloat(A[1])}else{A=B.match(/Gecko\/([^\s]*)/);if(A){D.gecko=1;A=B.match(/rv:([^\s\)]*)/);if(A&&A[1]){D.gecko=parseFloat(A[1])}}}}}}catch(C){}try{if(typeof window=="undefined"&&loadClass){D.rhino=true}}catch(C){}return D}();org.antlr.namespace("org.antlr.runtime.tree");org.antlr.lang=org.antlr.lang||{isArray:function(B){if(B){var A=org.antlr.lang;return A.isNumber(B.length)&&A.isFunction(B.splice)}return false},isBoolean:function(A){return typeof A==="boolean"},isFunction:function(A){return typeof A==="function"},isNull:function(A){return A===null},isNumber:function(A){return typeof A==="number"&&isFinite(A)},isObject:function(A){return(A&&(typeof A==="object"||org.antlr.lang.isFunction(A)))||false},isString:function(A){return typeof A==="string"},isUndefined:function(A){return typeof A==="undefined"},_IEEnumFix:function(C,B){if(org.antlr.env.ua.ie){var E=["toString","valueOf"],A;for(A=0;A<E.length;A=A+1){var F=E[A],D=B[F];if(org.antlr.lang.isFunction(D)&&D!=Object.prototype[F]){C[F]=D}}}},extend:function(D,E,C){if(!E||!D){throw new Error("org.antlr.lang.extend failed, please check that all dependencies are included.")}var B=function(){};B.prototype=E.prototype;D.prototype=new B();D.prototype.constructor=D;D.superclass=E.prototype;if(E.prototype.constructor==Object.prototype.constructor){E.prototype.constructor=E}if(C){for(var A in C){D.prototype[A]=C[A]}org.antlr.lang._IEEnumFix(D.prototype,C)}},augmentObject:function(E,D){if(!D||!E){throw new Error("Absorb failed, verify dependencies.")}var A=arguments,C,F,B=A[2];if(B&&B!==true){for(C=2;C<A.length;C=C+1){E[A[C]]=D[A[C]]}}else{for(F in D){if(B||!E[F]){E[F]=D[F]}}org.antlr.lang._IEEnumFix(E,D)}},augmentProto:function(D,C){if(!C||!D){throw new Error("Augment failed, verify dependencies.")}var A=[D.prototype,C.prototype];for(var B=2;B<arguments.length;B=B+1){A.push(arguments[B])}org.antlr.lang.augmentObject.apply(this,A)},merge:function(){var D={},B=arguments;for(var C=0,A=B.length;C<A;C=C+1){org.antlr.lang.augmentObject(D,B[C],true)}return D},isValue:function(B){var A=org.antlr.lang;return(A.isObject(B)||A.isString(B)||A.isNumber(B)||A.isBoolean(B))},array:{peek:function(B){if(!org.antlr.lang.isArray(B)){throw new Error("org.antlr.lang.array.peek: a is not an array.")}var A=B.length;if(A<=0){throw new Error("org.antlr.lang.array.peek: a is empty.")}return B[A-1]}}};org.antlr.runtime.RecognizerSharedState=function(){this.following=[];this._fsp=-1;this.errorRecovery=false;this.lastErrorIndex=-1;this.failed=false;this.syntaxErrors=0;this.backtracking=0;this.ruleMemo=null;this.token=null;this.tokenStartCharIndex=-1;this.text=null};org.antlr.runtime.IndexOutOfBoundsException=function(A){org.antlr.runtime.IndexOutOfBoundsException.superclass.constructor.call(this,A)};org.antlr.lang.extend(org.antlr.runtime.IndexOutOfBoundsException,Error,{name:"org.antlr.runtime.IndexOutOfBoundsException"});org.antlr.runtime.RecognitionException=function(A){org.antlr.runtime.RecognitionException.superclass.constructor.call(this);this.input=A;this.index=A.index();if(A instanceof org.antlr.runtime.CommonTokenStream){this.token=A.LT(1);this.line=this.token.getLine();this.charPositionInLine=this.token.getCharPositionInLine()}if(A instanceof org.antlr.runtime.tree.TreeNodeStream){this.extractInformationFromTreeNodeStream(A)}else{if(A instanceof org.antlr.runtime.ANTLRStringStream){this.c=A.LA(1);this.line=A.getLine();this.charPositionInLine=A.getCharPositionInLine()}else{this.c=A.LA(1)}}this.message=this.toString()};org.antlr.lang.extend(org.antlr.runtime.RecognitionException,Error,{input:null,index:null,token:null,node:null,c:null,line:null,name:"org.antlr.runtime.RecognitionException",charPositionInLine:null,approximateLineInfo:null,extractInformationFromTreeNodeStream:function(F){var A=F,E,I,D,H,C;this.node=A.LT(1);var B=A.getTreeAdaptor(),G=B.getToken(this.node);if(G){this.token=G;if(G.getLine()<=0){C=-1;E=A.LT(C);while(E){priorPayload=B.getToken(E);if(priorPayload&&priorPayload.getLine()>0){this.line=priorPayload.getLine();this.charPositionInLine=priorPayload.getCharPositionInLine();this.approximateLineInfo=true;break}--C;E=A.LT(C)}}else{this.line=G.getLine();this.charPositionInLine=G.getCharPositionInLine()}}else{if(this.node instanceof org.antlr.runtime.tree.CommonTree){this.line=this.node.getLine();this.charPositionInLine=this.node.getCharPositionInLine();if(this.node instanceof org.antlr.runtime.tree.CommonTree){this.token=this.node.token}}else{D=B.getType(this.node);H=B.getText(this.node);this.token=new org.antlr.runtime.CommonToken(D,H)}}},getUnexpectedType:function(){if(this.input instanceof org.antlr.runtime.CommonTokenStream){return this.token.getType()}else{if(this.input instanceof org.antlr.runtime.tree.TreeNodeStream){var A=this.input;var B=A.getTreeAdaptor();return B.getType(this.node)}else{return this.c}}}});org.antlr.runtime.MismatchedTokenException=function(B,A){if(arguments.length===0){this.expecting=org.antlr.runtime.Token.INVALID_TOKEN_TYPE}else{org.antlr.runtime.MismatchedTokenException.superclass.constructor.call(this,A);this.expecting=B}};org.antlr.lang.extend(org.antlr.runtime.MismatchedTokenException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedTokenException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedTokenException"});org.antlr.runtime.UnwantedTokenException=function(B,A){if(arguments.length>0){org.antlr.runtime.UnwantedTokenException.superclass.constructor.call(this,B,A)}};org.antlr.lang.extend(org.antlr.runtime.UnwantedTokenException,org.antlr.runtime.MismatchedTokenException,{getUnexpectedToken:function(){return this.token},toString:function(){var A=", expected "+this.expecting;if(this.expecting===org.antlr.runtime.Token.INVALID_TOKEN_TYPE){A=""}if(!org.antlr.lang.isValue(this.token)){return"UnwantedTokenException(found="+A+")"}return"UnwantedTokenException(found="+this.token.getText()+A+")"},name:"org.antlr.runtime.UnwantedTokenException"});org.antlr.runtime.MissingTokenException=function(B,A,C){if(arguments.length>0){org.antlr.runtime.MissingTokenException.superclass.constructor.call(this,B,A);this.inserted=C}};org.antlr.lang.extend(org.antlr.runtime.MissingTokenException,org.antlr.runtime.MismatchedTokenException,{getMissingType:function(){return this.expecting},toString:function(){if(org.antlr.lang.isValue(this.inserted)&&org.antlr.lang.isValue(this.token)){return"MissingTokenException(inserted "+this.inserted+" at "+this.token.getText()+")"}if(org.antlr.lang.isValue(this.token)){return"MissingTokenException(at "+this.token.getText()+")"}return"MissingTokenException"},name:"org.antlr.runtime.MissingTokenException"});org.antlr.runtime.NoViableAltException=function(C,B,D,A){org.antlr.runtime.NoViableAltException.superclass.constructor.call(this,A);this.grammarDecisionDescription=C;this.decisionNumber=B;this.stateNumber=D};org.antlr.lang.extend(org.antlr.runtime.NoViableAltException,org.antlr.runtime.RecognitionException,{toString:function(){if(this.input instanceof org.antlr.runtime.ANTLRStringStream){return"NoViableAltException('"+this.getUnexpectedType()+"'@["+this.grammarDecisionDescription+"])"}else{return"NoViableAltException("+this.getUnexpectedType()+"@["+this.grammarDecisionDescription+"])"}},name:"org.antlr.runtime.NoViableAltException"});org.antlr.runtime.EarlyExitException=function(B,A){org.antlr.runtime.EarlyExitException.superclass.constructor.call(this,A);this.decisionNumber=B};org.antlr.lang.extend(org.antlr.runtime.EarlyExitException,org.antlr.runtime.RecognitionException,{name:"org.antlr.runtime.EarlyExitException"});org.antlr.runtime.MismatchedSetException=function(B,A){org.antlr.runtime.MismatchedSetException.superclass.constructor.call(this,A);this.expecting=B};org.antlr.lang.extend(org.antlr.runtime.MismatchedSetException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedSetException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedSetException"});org.antlr.runtime.MismatchedNotSetException=function(B,A){org.antlr.runtime.MismatchedNotSetException.superclass.constructor.call(this,B,A)};org.antlr.lang.extend(org.antlr.runtime.MismatchedNotSetException,org.antlr.runtime.MismatchedSetException,{toString:function(){return"MismatchedNotSetException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedNotSetException"});org.antlr.runtime.MismatchedRangeException=function(B,A,C){if(arguments.length===0){return this}org.antlr.runtime.MismatchedRangeException.superclass.constructor.call(this,C);this.a=B;this.b=A};org.antlr.lang.extend(org.antlr.runtime.MismatchedRangeException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedRangeException("+this.getUnexpectedType()+" not in ["+this.a+","+this.b+"])"},name:"org.antlr.runtime.MismatchedRangeException"});org.antlr.runtime.FailedPredicateException=function(A,C,B){org.antlr.runtime.FailedPredicateException.superclass.constructor.call(this,A);this.ruleName=C;this.predicateText=B};org.antlr.lang.extend(org.antlr.runtime.FailedPredicateException,org.antlr.runtime.RecognitionException,{toString:function(){return"FailedPredicateException("+this.ruleName+",{"+this.predicateText+"}?)"},name:"org.antlr.runtime.FailedPredicateException"});org.antlr.runtime.BitSet=function(A){if(!A){A=org.antlr.runtime.BitSet.BITS}if(org.antlr.lang.isArray(A)){this.bits=A}else{if(org.antlr.lang.isNumber(A)){this.bits=[]}}};org.antlr.lang.augmentObject(org.antlr.runtime.BitSet,{BITS:32,LOG_BITS:5,MOD_MASK:31,bitMask:function(B){var A=B&org.antlr.runtime.BitSet.MOD_MASK;return 1<<A},numWordsToHold:function(A){return(A>>org.antlr.runtime.BitSet.LOG_BITS)+1},wordNumber:function(A){return A>>org.antlr.runtime.BitSet.LOG_BITS},of:function(D,A){var B,F,C,E;if(org.antlr.lang.isNumber(D)){if(org.antlr.lang.isNumber(A)){C=new org.antlr.runtime.BitSet(A+1);for(B=D;B<=A;B++){F=org.antlr.runtime.BitSet.wordNumber(B);C.bits[F]|=org.antlr.runtime.BitSet.bitMask(B)}return C}else{C=new org.antlr.runtime.BitSet(D+1);C.add(D);return C}}else{if(org.antlr.lang.isArray(D)){C=new org.antlr.runtime.BitSet();for(B=D.length-1;B>=0;B--){C.add(D[B])}return C}else{if(D instanceof org.antlr.runtime.BitSet){if(!D){return null}return D}else{if(D instanceof org.antlr.runtime.IntervalSet){if(!D){return null}C=new org.antlr.runtime.BitSet();C.addAll(D);return C}else{if(org.antlr.lang.isObject(D)){E=[];for(B in D){if(org.antlr.lang.isNumber(B)){E.push(B)}}return org.antlr.runtime.BitSet.of(E)}}}}}}});org.antlr.runtime.BitSet.prototype={add:function(A){var B=org.antlr.runtime.BitSet.wordNumber(A);if(B>=this.bits.length){this.growToInclude(A)}this.bits[B]|=org.antlr.runtime.BitSet.bitMask(A)},addAll:function(C){var A,B,D;if(C instanceof org.antlr.runtime.BitSet){this.orInPlace(C)}else{if(C instanceof org.antlr.runtime.IntervalSet){A=C}else{if(org.antlr.lang.isArray(C)){for(B=0;B<C.length;B++){D=C[B];this.add(D)}}else{return }}}},and:function(A){var B=this.clone();B.andInPlace(A);return B},andInPlace:function(A){var C=Math.min(this.bits.length,A.bits.length),B;for(B=C-1;B>=0;B--){this.bits[B]&=A.bits[B]}for(B=C;B<this.bits.length;B++){this.bits[B]=0}},clear:function(B){if(arguments.length===0){var A;for(A=this.bits.length-1;A>=0;A--){this.bits[A]=0}return }var C=org.antlr.runtime.BitSet.wordNumber(B);if(C>=this.bits.length){this.growToInclude(B)}this.bits[C]&=~org.antlr.runtime.BitSet.bitMask(B)},clone:function(){var C,B,A=[];for(C=0,B=this.bits.length;C<B;C++){A[C]=this.bits[C]}return new org.antlr.runtime.BitSet(A)},size:function(){var B=0,A,C,D;for(A=this.bits.length-1;A>=0;A--){C=this.bits[A];if(C!==0){for(D=org.antlr.runtime.BitSet.BITS-1;D>=0;D--){if((C&(1<<D))!==0){B++}}}}return B},equals:function(A){if(!A||!(A instanceof org.antlr.runtime.BitSet)){return false}var B=A,C,D=Math.min(this.bits.length,B.bits.length);for(C=0;C<D;C++){if(this.bits[C]!=B.bits[C]){return false}}if(this.bits.length>D){for(C=D+1;C<this.bits.length;C++){if(this.bits[C]!==0){return false}}}else{if(B.bits.length>D){for(C=D+1;C<B.bits.length;C++){if(B.bits[C]!==0){return false}}}}return true},growToInclude:function(D){var A=Math.max(this.bits.length<<1,org.antlr.runtime.BitSet.numWordsToHold(D)),C=[],B;for(B=0,len=this.bits.length;B<len;B++){C[B]=this.bits[B]}this.bits=C},member:function(A){var B=org.antlr.runtime.BitSet.wordNumber(A);if(B>=this.bits.length){return false}return(this.bits[B]&org.antlr.runtime.BitSet.bitMask(A))!==0},getSingleElement:function(){var A;for(A=0;A<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);A++){if(this.member(A)){return A}}return -1},isNil:function(){var A;for(A=this.bits.length-1;A>=0;A--){if(this.bits[A]!==0){return false}}return true},complement:function(B){if(B){return B.subtract(this)}else{var A=this.clone();A.notInPlace();return A}},notInPlace:function(){var A,D,B,C;if(arguments.length===0){for(B=this.bits.length-1;B>=0;B--){this.bits[B]=~this.bits[B]}}else{if(arguments.length===1){A=0;D=arguments[0]}else{A=arguments[0];D=arguments[1]}this.growToInclude(D);for(B=A;B<=D;B++){C=org.antlr.runtime.BitSet.wordNumber(B);this.bits[C]^=org.antlr.runtime.BitSet.bitMask(B)}}},or:function(A){if(!A){return this}var B=this.clone();B.orInPlace(A);return B},orInPlace:function(A){if(!A){return }if(A.bits.length>this.bits.length){this.setSize(A.bits.length)}var C=Math.min(this.bits.length,A.bits.length),B;for(B=C-1;B>=0;B--){this.bits[B]|=A.bits[B]}},remove:function(A){var B=org.antlr.runtime.BitSet.wordNumber(A);if(B>=this.bits.length){this.growToInclude(A)}this.bits[B]&=~org.antlr.runtime.BitSet.bitMask(A)},setSize:function(A){var B=A-this.bits.length;while(B>=0){this.bits.push(0);B--}},numBits:function(){return this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS},lengthInLongWords:function(){return this.bits.length},subset:function(A){if(!A){return false}return this.and(A).equals(this)},subtractInPlace:function(A){if(!A){return }var B;for(B=0;B<this.bits.length&&B<A.bits.length;B++){this.bits[B]&=~A.bits[B]}},subtract:function(A){if(!A||!(A instanceof org.antlr.runtime.BitSet)){return null}var B=this.clone();B.subtractInPlace(A);return B},toArray:function(){var A=[],C,B=0;for(C=0;C<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);C++){if(this.member(C)){A[B++]=C}}return A},toPackedArray:function(){return this.bits},toString:function(){if(arguments.length===0){return this.toString1(null)}else{if(org.antlr.lang.isString(arguments[0])){if(!org.antlr.lang.isValue(arguments[1])){return this.toString1(null)}else{return this.toString2(arguments[0],arguments[1])}}else{return this.toString1(arguments[0])}}},toString1:function(D){var A="{",E=",",B,C=false;for(B=0;B<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);B++){if(this.member(B)){if(B>0&&C){A+=E}if(D){A+=D.getTokenDisplayName(B)}else{A+=B.toString()}C=true}}return A+"}"},toString2:function(C,B){var D="",A;for(A=0;A<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);A++){if(this.member(A)){if(D.length>0){D+=C}if(A>=B.size()){D+="'"+A+"'"}else{if(!org.antlr.lang.isValue(B.get(A))){D+="'"+A+"'"}else{D+=B.get(A)}}}}return D}};org.antlr.runtime.CharStream={EOF:-1};org.antlr.runtime.CommonToken=function(){var A;this.charPositionInLine=-1;this.channel=0;this.index=-1;if(arguments.length==1){if(org.antlr.lang.isNumber(arguments[0])){this.type=arguments[0]}else{A=arguments[0];this.text=A.getText();this.type=A.getType();this.line=A.getLine();this.index=A.getTokenIndex();this.charPositionInLine=A.getCharPositionInLine();this.channel=A.getChannel();if(A instanceof org.antlr.runtime.CommonToken){this.start=A.start;this.stop=A.stop}}}else{if(arguments.length==2){this.type=arguments[0];this.text=arguments[1];this.channel=0}else{if(arguments.length==5){this.input=arguments[0];this.type=arguments[1];this.channel=arguments[2];this.start=arguments[3];this.stop=arguments[4]}}}};org.antlr.runtime.CommonToken.prototype={getType:function(){return this.type},setLine:function(A){this.line=A},getText:function(){if(org.antlr.lang.isString(this.text)){return this.text}if(!this.input){return null}this.text=this.input.substring(this.start,this.stop);return this.text},setText:function(A){this.text=A},getLine:function(){return this.line},getCharPositionInLine:function(){return this.charPositionInLine},setCharPositionInLine:function(A){this.charPositionInLine=A},getChannel:function(){return this.channel},setChannel:function(A){this.channel=A},setType:function(A){this.type=A},getStartIndex:function(){return this.start},setStartIndex:function(A){this.start=A},getStopIndex:function(){return this.stop},setStopIndex:function(A){this.stop=A},getTokenIndex:function(){return this.index},setTokenIndex:function(A){this.index=A},getInputStream:function(){return this.input},setInputStream:function(A){this.input=A},toString:function(){var B="";if(this.channel>0){B=",channel="+this.channel}var A=this.getText();if(!org.antlr.lang.isNull(A)){A=A.replace(/\n/g,"\\\\n");A=A.replace(/\r/g,"\\\\r");A=A.replace(/\t/g,"\\\\t")}else{A="<no text>"}return"[@"+this.getTokenIndex()+","+this.start+":"+this.stop+"='"+A+"',<"+this.type+">"+B+","+this.line+":"+this.getCharPositionInLine()+"]"}};org.antlr.runtime.Token=function(){};org.antlr.lang.augmentObject(org.antlr.runtime.Token,{EOR_TOKEN_TYPE:1,DOWN:2,UP:3,MIN_TOKEN_TYPE:4,EOF:org.antlr.runtime.CharStream.EOF,EOF_TOKEN:new org.antlr.runtime.CommonToken(org.antlr.runtime.CharStream.EOF),INVALID_TOKEN_TYPE:0,INVALID_TOKEN:new org.antlr.runtime.CommonToken(0),SKIP_TOKEN:new org.antlr.runtime.CommonToken(0),DEFAULT_CHANNEL:0,HIDDEN_CHANNEL:99});org.antlr.lang.augmentObject(org.antlr.runtime.CommonToken,org.antlr.runtime.Token);org.antlr.runtime.tree.RewriteCardinalityException=function(A){this.elementDescription=A};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteCardinalityException,Error,{getMessage:function(){if(org.antlr.lang.isString(this.elementDescription)){return this.elementDescription}return null},name:function(){return"org.antlr.runtime.tree.RewriteCardinalityException"}});org.antlr.runtime.tree.RewriteEmptyStreamException=function(B){var A=org.antlr.runtime.tree.RewriteEmptyStreamException.superclass;A.constructor.call(this,B)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteEmptyStreamException,org.antlr.runtime.tree.RewriteCardinalityException,{name:function(){return"org.antlr.runtime.tree.RewriteEmptyStreamException"}});org.antlr.runtime.tree.RewriteEarlyExitException=function(B){var A=org.antlr.runtime.tree.RewriteEarlyExitException.superclass;if(org.antlr.lang.isUndefined(B)){B=null}A.constructor.call(this,B)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteEarlyExitException,org.antlr.runtime.tree.RewriteCardinalityException,{name:function(){return"org.antlr.runtime.tree.RewriteEarlyExitException"}});org.antlr.runtime.MismatchedTreeNodeException=function(B,A){if(B&&A){org.antlr.runtime.MismatchedTreeNodeException.superclass.constructor.call(this,A);this.expecting=B}};org.antlr.lang.extend(org.antlr.runtime.MismatchedTreeNodeException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedTreeNodeException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedTreeNodeException"});org.antlr.runtime.tree.BaseTree=function(){};org.antlr.runtime.tree.BaseTree.prototype={getChild:function(A){if(!this.children||A>=this.children.length){return null}return this.children[A]},getChildren:function(){return this.children},getFirstChildWithType:function(C){var B,A;for(B=0;this.children&&B<this.children.length;B++){A=this.children[B];if(A.getType()===C){return A}}return null},getChildCount:function(){if(!this.children){return 0}return this.children.length},addChild:function(B){if(!org.antlr.lang.isValue(B)){return }var C=B,E,A,D;if(C.isNil()){if(this.children&&this.children==C.children){throw new Error("attempt to add child list to itself")}if(C.children){if(this.children){E=C.children.length;for(A=0;A<E;A++){D=C.children[A];this.children.push(D);D.setParent(this);D.setChildIndex(this.children.length-1)}}else{this.children=C.children;this.freshenParentAndChildIndexes()}}}else{if(!this.children){this.children=this.createChildrenList()}this.children.push(B);C.setParent(this);C.setChildIndex(this.children.length-1)}},addChildren:function(A){var C,B;for(C=0;C<A.length;C++){B=A[C];this.addChild(B)}},setChild:function(B,A){if(!A){return }if(A.isNil()){throw new Error("Can't set single child to a list")}if(!this.children){this.children=this.createChildrenList()}this.children[B]=A;A.setParent(this);A.setChildIndex(B)},deleteChild:function(B){if(!this.children){return null}if(B<0||B>=this.children.length){throw new Error("Index out of bounds.")}var A=this.children.splice(B,1)[0];this.freshenParentAndChildIndexes(B);return A},replaceChildren:function(H,I,P){if(!this.children){throw new Error("indexes invalid; no children in list")}var O=I-H+1;var A;var K=P;var D=null;if(K.isNil()){D=K.children}else{D=[];D.push(K)}A=D.length;var B=D.length;var N=O-A;var F,G,C,E,M,J,L;if(N===0){F=0;for(G=H;G<=I;G++){C=D[F];this.children[G]=C;C.setParent(this);C.setChildIndex(G);F++}}else{if(N>0){for(F=0;F<B;F++){this.children[H+F]=D[F]}E=H+B;for(M=E;M<=I;M++){J=this.children.splice(E,1)[0]}this.freshenParentAndChildIndexes(H)}else{for(F=0;F<O;F++){this.children[H+F]=D[F]}L=A-O;for(F=O;F<A;F++){this.children.splice(H+F,0,D[F])}this.freshenParentAndChildIndexes(H)}}},createChildrenList:function(){return[]},isNil:function(){return false},freshenParentAndChildIndexes:function(A){if(!org.antlr.lang.isNumber(A)){A=0}var D=this.getChildCount(),C,B;for(C=A;C<D;C++){B=this.getChild(C);B.setChildIndex(C);B.setParent(this)}},sanityCheckParentAndChildIndexes:function(B,A){if(arguments.length===0){B=null;A=-1}if(B!==this.getParent()){throw new Error("parents don't match; expected "+B+" found "+this.getParent())}if(A!==this.getChildIndex()){throw new Error("child indexes don't match; expected "+A+" found "+this.getChildIndex())}var E=this.getChildCount(),D,C;for(D=0;D<E;D++){C=this.getChild(D);C.sanityCheckParentAndChildIndexes(this,D)}},getChildIndex:function(){return 0},setChildIndex:function(A){},getParent:function(){return null},setParent:function(A){},getTree:function(){return this},toStringTree:function(){if(!this.children||this.children.length===0){return this.toString()}var A="",C,B;if(!this.isNil()){A+="(";A+=this.toString();A+=" "}for(C=0;this.children&&C<this.children.length;C++){B=this.children[C];if(C>0){A+=" "}A+=B.toStringTree()}if(!this.isNil()){A+=")"}return A},getLine:function(){return 0},getCharPositionInLine:function(){return 0}};org.antlr.runtime.tree.CommonTree=function(A){this.startIndex=-1;this.stopIndex=-1;this.childIndex=-1;this.parent=null;this.token=null;if(A instanceof org.antlr.runtime.tree.CommonTree){org.antlr.runtime.tree.CommonTree.superclass.constructor.call(this,A);this.token=A.token;this.startIndex=A.startIndex;this.stopIndex=A.stopIndex}else{if(A instanceof org.antlr.runtime.CommonToken){this.token=A}}};org.antlr.lang.extend(org.antlr.runtime.tree.CommonTree,org.antlr.runtime.tree.BaseTree,{getToken:function(){return this.token},dupNode:function(){return new org.antlr.runtime.tree.CommonTree(this)},isNil:function(){return !this.token},getType:function(){if(!this.token){return org.antlr.runtime.Token.INVALID_TOKEN_TYPE}return this.token.getType()},getText:function(){if(!this.token){return null}return this.token.getText()},getLine:function(){if(!this.token||this.token.getLine()===0){if(this.getChildCount()>0){return this.getChild(0).getLine()}return 0}return this.token.getLine()},getCharPositionInLine:function(){if(!this.token||this.token.getCharPositionInLine()===-1){if(this.getChildCount()>0){return this.getChild(0).getCharPositionInLine()}return 0}return this.token.getCharPositionInLine()},getTokenStartIndex:function(){if(this.token){return this.token.getTokenIndex()}return this.startIndex},setTokenStartIndex:function(A){this.startIndex=A},getTokenStopIndex:function(){if(this.token){return this.token.getTokenIndex()}return this.stopIndex},setTokenStopIndex:function(A){this.stopIndex=A},getChildIndex:function(){return this.childIndex},getParent:function(){return this.parent},setParent:function(A){this.parent=A},setChildIndex:function(A){this.childIndex=A},toString:function(){if(this.isNil()){return"nil"}if(this.getType()===org.antlr.runtime.Token.INVALID_TOKEN_TYPE){return"<errornode>"}if(!this.token){return null}return this.token.getText()}});org.antlr.runtime.tree.Tree={INVALID_NODE:new org.antlr.runtime.tree.CommonTree(org.antlr.runtime.Token.INVALID_TOKEN)};org.antlr.runtime.tree.CommonErrorNode=function(A,D,B,C){if(!B||(B.getTokenIndex()<D.getTokenIndex()&&B.getType()!=org.antlr.runtime.Token.EOF)){B=D}this.input=A;this.start=D;this.stop=B;this.trappedException=C};org.antlr.lang.extend(org.antlr.runtime.tree.CommonErrorNode,org.antlr.runtime.tree.CommonTree,{isNil:function(){return false},getType:function(){return org.antlr.runtime.Token.INVALID_TOKEN_TYPE},getText:function(){var C=null;if(this.start instanceof org.antlr.runtime.CommonToken){var B=this.start.getTokenIndex();var A=this.stop.getTokenIndex();if(this.stop.getType()===org.antlr.runtime.Token.EOF){A=this.input.size()}C=this.input.toString(B,A)}else{if(this.start instanceof org.antlr.runtime.tree.CommonTree){C=this.input.toString(this.start,this.stop)}else{C="<unknown>"}}return C},toString:function(){if(this.trappedException instanceof org.antlr.runtime.MissingTokenException){return"<missing type: "+this.trappedException.getMissingType()+">"}else{if(this.trappedException instanceof org.antlr.runtime.UnwantedTokenException){return"<extraneous: "+this.trappedException.getUnexpectedToken()+", resync="+this.getText()+">"}else{if(this.trappedException instanceof org.antlr.runtime.MismatchedTokenException){return"<mismatched token: "+this.trappedException.token+", resync="+this.getText()+">"}else{if(this.trappedException instanceof org.antlr.runtime.NoViableAltException){return"<unexpected: "+this.trappedException.token+", resync="+this.getText()+">"}}}}return"<error: "+this.getText()+">"}});org.antlr.runtime.tree.BaseTreeAdaptor=function(){this.uniqueNodeID=1};org.antlr.runtime.tree.BaseTreeAdaptor.prototype={nil:function(){return this.create(null)},errorNode:function(A,E,C,D){var B=new org.antlr.runtime.tree.CommonErrorNode(A,E,C,D);return B},isNil:function(A){return A.isNil()},dupTree:function(B,C){if(arguments.length===1){C=null}if(!B){return null}var D=this.dupNode(B);this.setChildIndex(D,this.getChildIndex(B));this.setParent(D,C);var G=this.getChildCount(B),A,F,E;for(A=0;A<G;A++){F=this.getChild(B,A);E=this.dupTree(F,B);this.addChild(D,E)}return D},addChild:function(A,B){if(A&&org.antlr.lang.isValue(B)){A.addChild(B)}},becomeRoot:function(D,C){if(D instanceof org.antlr.runtime.CommonToken||!D){D=this.create(D)}var A=D,B=C;if(!C){return D}if(A.isNil()){if(A.getChildCount()>1){throw new Error("more than one node as root (TODO: make exception hierarchy)")}A=A.getChild(0)}A.addChild(B);return A},rulePostProcessing:function(A){var B=A;if(B&&B.isNil()){if(B.getChildCount()===0){B=null}else{if(B.getChildCount()===1){B=B.getChild(0);B.setParent(null);B.setChildIndex(-1)}}}return B},create:function(C,B){var D,A;if(arguments.length===2){if(org.antlr.lang.isString(arguments[1])){D=arguments[1];B=this.createToken(C,D);A=this.create(B);return A}else{B=this.createToken(B);B.setType(C);A=this.create(B);return A}}else{if(arguments.length===3){D=arguments[2];B=this.createToken(B);B.setType(C);B.setText(D);A=this.create(B);return A}}},getType:function(A){A.getType();return 0},setType:function(A,B){throw new Error("don't know enough about Tree node")},getText:function(A){return A.getText()},setText:function(A,B){throw new Error("don't know enough about Tree node")},getChild:function(B,A){return B.getChild(A)},setChild:function(B,A,C){B.setChild(A,C)},deleteChild:function(B,A){return B.deleteChild(A)},getChildCount:function(A){return A.getChildCount()},getUniqueID:function(B){if(!this.treeToUniqueIDMap){this.treeToUniqueIDMap={}}var C=this.treeToUniqueIDMap[B];if(org.antlr.lang.isValue(C)){return C}var A=this.uniqueNodeID;this.treeToUniqueIDMap[B]=A;this.uniqueNodeID++;return A}};org.antlr.runtime.tree.CommonTreeAdaptor=function(){};org.antlr.lang.extend(org.antlr.runtime.tree.CommonTreeAdaptor,org.antlr.runtime.tree.BaseTreeAdaptor,{dupNode:function(A){if(!org.antlr.lang.isValue(A)){return null}return A.dupNode()},create:function(A){if(arguments.length>1){return org.antlr.runtime.tree.CommonTreeAdaptor.superclass.create.apply(this,arguments)}return new org.antlr.runtime.tree.CommonTree(A)},createToken:function(A){if(arguments.length===2){return new org.antlr.runtime.CommonToken(arguments[0],arguments[1])}else{return new org.antlr.runtime.CommonToken(arguments[0])}},setTokenBoundaries:function(C,E,A){if(!org.antlr.lang.isValue(C)){return }var D=0,B=0;if(org.antlr.lang.isValue(E)){if(E.getTokenIndex){D=E.getTokenIndex()}else{if(E.getStartIndex){D=E.getStartIndex()}else{D=E.getTokenStartIndex()}}}if(org.antlr.lang.isValue(A)){if(B.getTokenIndex){B=A.getTokenIndex()}else{if(A.getStopIndex){B=A.getStopIndex()}else{B=A.getTokenStopIndex()}}}C.setTokenStartIndex(D);C.setTokenStopIndex(B)},getTokenStartIndex:function(A){if(!A){return -1}return A.getTokenStartIndex()},getTokenStopIndex:function(A){if(!A){return -1}return A.getTokenStopIndex()},getText:function(A){if(!A){return null}return A.getText()},getType:function(A){if(!A){return org.antlr.runtime.Token.INVALID_TOKEN_TYPE}return A.getType()},getToken:function(A){if(A instanceof org.antlr.runtime.tree.CommonTree){return A.getToken()}return null},getChild:function(B,A){if(!B){return null}return B.getChild(A)},getChildCount:function(A){if(!A){return 0}return A.getChildCount()},getParent:function(A){return A.getParent()},setParent:function(A,B){A.setParent(B)},getChildIndex:function(A){return A.getChildIndex()},setChildIndex:function(B,A){B.setChildIndex(A)},replaceChildren:function(D,B,A,C){if(D){D.replaceChildren(B,A,C)}}});org.antlr.runtime.ANTLRStringStream=function(A){this.p=0;this.line=1;this.charPositionInLine=0;this.markDepth=0;this.markers=null;this.lastMarker=null;this.data=A;this.n=A.length};org.antlr.runtime.ANTLRStringStream.prototype={reset:function(){this.p=0;this.line=1;this.charPositionInLine=0;this.markDepth=0},consume:function(){if(this.p<this.n){this.charPositionInLine++;if(this.data.charAt(this.p)==="\n"){this.line++;this.charPositionInLine=0}this.p++}},LA:function(B){if(B<0){B++}var A=this.p+B-1;if(A>=this.n||A<0){return org.antlr.runtime.CharStream.EOF}return this.data.charAt(A)},index:function(){return this.p},size:function(){return this.n},mark:function(){if(!this.markers){this.markers=[];this.markers.push(null)}this.markDepth++;var A=null;if(this.markDepth>=this.markers.length){A={};this.markers.push(A)}else{A=this.markers[this.markDepth]}A.p=this.p;A.line=this.line;A.charPositionInLine=this.charPositionInLine;this.lastMarker=this.markDepth;return this.markDepth},rewind:function(A){if(!org.antlr.lang.isNumber(A)){A=this.lastMarker}var B=this.markers[A];this.seek(B.p);this.line=B.line;this.charPositionInLine=B.charPositionInLine;this.release(A)},release:function(A){this.markDepth=A;this.markDepth--},seek:function(A){if(A<=this.p){this.p=A;return }while(this.p<A){this.consume()}},substring:function(B,A){return this.data.substr(B,A-B+1)},getLine:function(){return this.line},getCharPositionInLine:function(){return this.charPositionInLine},setLine:function(A){this.line=A},setCharPositionInLine:function(A){this.charPositionInLine=A},getSourceName:function(){return null}};org.antlr.runtime.ANTLRStringStream.LT=org.antlr.runtime.ANTLRStringStream.LA;org.antlr.runtime.CommonTokenStream=function(A,B){this.p=-1;this.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL;this.v_discardOffChannelTokens=false;this.tokens=[];if(arguments.length>=2){this.channel=B}else{if(arguments.length===1){this.tokenSource=A}}};org.antlr.runtime.CommonTokenStream.prototype={setTokenSource:function(A){this.tokenSource=A;this.tokens=[];this.p=-1;this.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL},fillBuffer:function(){var B=0,C=this.tokenSource.nextToken(),A,D;while(org.antlr.lang.isValue(C)&&C.getType()!=org.antlr.runtime.CharStream.EOF){A=false;if(this.channelOverrideMap){D=this.channelOverrideMap[C.getType()];if(org.antlr.lang.isValue(D)){C.setChannel(D)}}if(this.discardSet&&this.discardSet[C.getType()]){A=true}else{if(this.v_discardOffChannelTokens&&C.getChannel()!=this.channel){A=true}}if(!A){C.setTokenIndex(B);this.tokens.push(C);B++}C=this.tokenSource.nextToken()}this.p=0;this.p=this.skipOffTokenChannels(this.p)},consume:function(){if(this.p<this.tokens.length){this.p++;this.p=this.skipOffTokenChannels(this.p)}},skipOffTokenChannels:function(A){var B=this.tokens.length;while(A<B&&(this.tokens[A]).getChannel()!=this.channel){A++}return A},skipOffTokenChannelsReverse:function(A){while(A>=0&&(this.tokens[A]).getChannel()!=this.channel){A--}return A},setTokenTypeChannel:function(B,A){if(!this.channelOverrideMap){this.channelOverrideMap={}}this.channelOverrideMap[B]=A},discardTokenType:function(A){if(!this.discardSet){this.discardSet={}}this.discardSet[A]=true},discardOffChannelTokens:function(A){this.v_discardOffChannelTokens=A},getTokens:function(F,D,C){if(this.p===-1){this.fillBuffer()}if(arguments.length===0){return this.tokens}if(org.antlr.lang.isArray(C)){C=new org.antlr.runtime.BitSet(C)}else{if(org.antlr.lang.isNumber(C)){C=org.antlr.runtime.BitSet.of(C)}}if(D>=this.tokens.length){D=this.tokens.length-1}if(F<0){F=0}if(F>D){return null}var E=[],B,A;for(B=F;B<=D;B++){A=this.tokens[B];if(!this.types||C.member(A.getType())){E.push(A)}}if(E.length===0){E=null}return E},LT:function(A){if(this.p===-1){this.fillBuffer()}if(A===0){return null}if(A<0){return this.LB(-1*A)}if((this.p+A-1)>=this.tokens.length){return org.antlr.runtime.Token.EOF_TOKEN}var B=this.p,C=1;while(C<A){B=this.skipOffTokenChannels(B+1);C++}if(B>=this.tokens.length){return org.antlr.runtime.Token.EOF_TOKEN}return this.tokens[B]},LB:function(A){if(this.p===-1){this.fillBuffer()}if(A===0){return null}if((this.p-A)<0){return null}var B=this.p,C=1;while(C<=A){B=this.skipOffTokenChannelsReverse(B-1);C++}if(B<0){return null}return this.tokens[B]},get:function(A){return this.tokens[A]},LA:function(A){return this.LT(A).getType()},mark:function(){if(this.p===-1){this.fillBuffer()}this.lastMarker=this.index();return this.lastMarker},release:function(A){},size:function(){return this.tokens.length},index:function(){return this.p},rewind:function(A){if(!org.antlr.lang.isNumber(A)){A=this.lastMarker}this.seek(A)},reset:function(){this.p=-1;this.lastMarker=0},seek:function(A){this.p=A},getTokenSource:function(){return this.tokenSource},getSourceName:function(){return this.getTokenSource().getSourceName()},toString:function(D,C){if(arguments.length===0){if(this.p===-1){this.fillBuffer()}D=0;C=this.tokens.length-1}if(!org.antlr.lang.isNumber(D)&&!org.antlr.lang.isNumber(C)){if(org.antlr.lang.isValue(D)&&org.antlr.lang.isValue(C)){D=D.getTokenIndex();C=C.getTokenIndex()}else{return null}}var A="",B;if(D<0||C<0){return null}if(this.p==-1){this.fillBuffer()}if(C>=this.tokens.length){C=this.tokens.length-1}for(B=D;B<=C;B++){t=this.tokens[B];A=A+this.tokens[B].getText()}return A}};org.antlr.runtime.TokenRewriteStream=function(){var A=org.antlr.runtime.TokenRewriteStream.superclass;this.programs=null;this.lastRewriteTokenIndexes=null;if(arguments.length===0){this.init()}else{A.constructor.apply(this,arguments);this.init()}};(function(){var A=org.antlr.runtime.TokenRewriteStream;org.antlr.lang.augmentObject(A,{DEFAULT_PROGRAM_NAME:"default",PROGRAM_INIT_SIZE:100,MIN_TOKEN_INDEX:0});A.RewriteOperation=function(B,C){this.index=B;this.text=C};A.RewriteOperation.prototype={execute:function(B){return this.index},toString:function(){return this.text}};A.InsertBeforeOp=function(B,C){A.InsertBeforeOp.superclass.constructor.call(this,B,C)};org.antlr.lang.extend(A.InsertBeforeOp,A.RewriteOperation,{execute:function(B){B.push(this.text);return this.index}});A.ReplaceOp=function(D,C,B){A.ReplaceOp.superclass.constructor.call(this,D,B);this.lastIndex=C};org.antlr.lang.extend(A.ReplaceOp,A.RewriteOperation,{execute:function(B){if(org.antlr.lang.isValue(this.text)){B.push(this.text)}return this.lastIndex+1}});A.DeleteOp=function(C,B){A.DeleteOp.superclass.constructor.call(this,C,B)};org.antlr.lang.extend(A.DeleteOp,A.ReplaceOp);org.antlr.lang.extend(A,org.antlr.runtime.CommonTokenStream,{init:function(){this.programs={};this.programs[A.DEFAULT_PROGRAM_NAME]=[];this.lastRewriteTokenIndexes={}},rollback:function(){var B,C;if(arguments.length===1){B=A.DEFAULT_PROGRAM_NAME;C=arguments[0]}else{if(arguments.length===2){B=arguments[0];C=arguments[1]}}var D=this.programs[B];if(D){programs[B]=D.slice(A.MIN_TOKEN_INDEX,this.instructionIndex)}},deleteProgram:function(B){B=B||A.DEFAULT_PROGRAM_NAME;this.rollback(B,A.MIN_TOKEN_INDEX)},addToSortedRewriteList:function(){var H,E;if(arguments.length===1){H=A.DEFAULT_PROGRAM_NAME;E=arguments[0]}else{if(arguments.length===2){H=arguments[0];E=arguments[1]}}var F=this.getProgram(H);var G,I,D,J,B,C;for(I=0,G=F.length;I<G;I++){D=F[I];if(D.index===E.index){if(E instanceof A.ReplaceOp){J=false;for(C=I;C<F.length;C++){B=F[I];if(B.index!==E.index){break}if(B instanceof A.ReplaceOp){F[I]=E;J=true;break}}if(!J){F.splice(C,0,E)}}else{F.splice(I,0,E)}break}else{if(D.index>E.index){F.splice(I,0,E);break}}}if(I===G){F.push(E)}},insertAfter:function(){var C,B,D;if(arguments.length===2){B=A.DEFAULT_PROGRAM_NAME;C=arguments[0];D=arguments[1]}else{if(arguments.length===3){B=arguments[0];C=arguments[1];D=arguments[2]}}if(C instanceof org.antlr.runtime.CommonToken){C=C.index}this.insertBefore(B,C+1,D)},insertBefore:function(){var C,B,D;if(arguments.length===2){B=A.DEFAULT_PROGRAM_NAME;C=arguments[0];D=arguments[1]}else{if(arguments.length===3){B=arguments[0];C=arguments[1];D=arguments[2]}}if(C instanceof org.antlr.runtime.CommonToken){C=C.index}this.addToSortedRewriteList(B,new A.InsertBeforeOp(C,D))},replace:function(){var B,E,C,D;if(arguments.length===2){B=A.DEFAULT_PROGRAM_NAME;E=arguments[0];C=arguments[0];D=arguments[1]}else{if(arguments.length===3){B=A.DEFAULT_PROGRAM_NAME;E=arguments[0];C=arguments[1];D=arguments[2]}}if(arguments.length===4){B=arguments[0];E=arguments[1];C=arguments[2];D=arguments[3]}if(E instanceof org.antlr.runtime.CommonToken){E=E.index}if(C instanceof org.antlr.runtime.CommonToken){C=C.index}if(E>C||C<0||E<0){return }this.addToSortedRewriteList(B,new A.ReplaceOp(E,C,D))},remove:function(){var B=[],C=arguments.length-1;while(C>=0){B[C]=arguments[C];C--}B.push("");this.replace.apply(this,B)},getLastRewriteTokenIndex:function(B){B=B||A.DEFAULT_PROGRAM_NAME;return this.lastRewriteTokenIndexes[B]||-1},setLastRewriteTokenIndex:function(B,C){this.lastRewriteTokenIndexes[B]=C},getProgram:function(B){var C=this.programs[B];if(!C){C=this.initializeProgram(B)}return C},initializeProgram:function(B){var C=[];this.programs[B]=C;return C},toOriginalString:function(E,B){if(!org.antlr.lang.isNumber(E)){E=A.MIN_TOKEN_INDEX}if(!org.antlr.lang.isNumber(B)){B=this.size()-1}var C=[],D;for(D=E;D>=A.MIN_TOKEN_INDEX&&D<=B&&D<this.tokens.length;D++){C.push(this.get(D).getText())}return C.join("")},toString:function(){var J,B,F;if(arguments.length===0){J=A.DEFAULT_PROGRAM_NAME;B=A.MIN_TOKEN_INDEX;F=this.size()-1}else{if(arguments.length===1){J=arguments[0];B=A.MIN_TOKEN_INDEX;F=this.size()-1}else{if(arguments.length===2){J=A.DEFAULT_PROGRAM_NAME;B=arguments[0];F=arguments[1]}}}var H=this.programs[J];if(!H||H.length===0){return this.toOriginalString(B,F)}var E=0,D=B,C=[],G;while(D>=A.MIN_TOKEN_INDEX&&D<=F&&D<this.tokens.length){if(E<H.length){G=H[E];while(G.index<D&&E<H.length){E++;if(E<H.length){G=H[E]}}while(D===G.index&&E<H.length){D=G.execute(C);E++;if(E<H.length){G=H[E]}}}if(D<=F){C.push(this.get(D).getText());D++}}var I;for(I=E;I<H.length;I++){G=H[I];if(G.index>=this.size()){G.execute(C)}}return C.join("")},toDebugString:function(E,B){if(!org.antlr.lang.isNumber(E)){E=A.MIN_TOKEN_INDEX}if(!org.antlr.lang.isNumber(B)){B=this.size()-1}var C=[],D;for(D=E;D>=A.MIN_TOKEN_INDEX&&D<=B&&D<this.tokens.length;D++){C.push(this.get(D))}return C.join("")}})})();org.antlr.runtime.tree.TreeNodeStream=function(){};org.antlr.runtime.tree.CommonTreeNodeStream=function(D,A,B){if(arguments.length===1){A=D;D=new org.antlr.runtime.tree.CommonTreeAdaptor()}if(arguments.length<=2){B=org.antlr.runtime.tree.CommonTreeNodeStream.DEFAULT_INITIAL_BUFFER_SIZE}this.uniqueNavigationNodes=false;this.p=-1;var C=org.antlr.runtime.Token;this.root=A;this.adaptor=D;this.nodes=[];this.down=this.adaptor.create(C.DOWN,"DOWN");this.up=this.adaptor.create(C.UP,"UP");this.eof=this.adaptor.create(C.EOF,"EOF")};org.antlr.lang.augmentObject(org.antlr.runtime.tree.CommonTreeNodeStream,{DEFAULT_INITIAL_BUFFER_SIZE:100,INITIAL_CALL_STACK_SIZE:10});org.antlr.lang.extend(org.antlr.runtime.tree.CommonTreeNodeStream,org.antlr.runtime.tree.TreeNodeStream,{StreamIterator:function(){var C=0,B=this.nodes,A=this.eof;return{hasNext:function(){return C<B.length},next:function(){var D=C;C++;if(D<B.length){return B[D]}return A},remove:function(){throw new Error("cannot remove nodes from stream")}}},fillBuffer:function(C){var B=false;if(org.antlr.lang.isUndefined(C)){C=this.root;B=true}var A=this.adaptor.isNil(C);if(!A){this.nodes.push(C)}var F=this.adaptor.getChildCount(C);if(!A&&F>0){this.addNavigationNode(org.antlr.runtime.Token.DOWN)}var E,D;for(E=0;E<F;E++){D=this.adaptor.getChild(C,E);this.fillBuffer(D)}if(!A&&F>0){this.addNavigationNode(org.antlr.runtime.Token.UP)}if(B){this.p=0}},getNodeIndex:function(C){if(this.p==-1){this.fillBuffer()}var B,A;for(B=0;B<this.nodes.length;B++){A=this.nodes[B];if(A===C){return B}}return -1},addNavigationNode:function(B){var A=null;if(B===org.antlr.runtime.Token.DOWN){if(this.hasUniqueNavigationNodes()){A=this.adaptor.create(org.antlr.runtime.Token.DOWN,"DOWN")}else{A=this.down}}else{if(this.hasUniqueNavigationNodes()){A=this.adaptor.create(org.antlr.runtime.Token.UP,"UP")}else{A=this.up}}this.nodes.push(A)},get:function(A){if(this.p===-1){this.fillBuffer()}return this.nodes[A]},LT:function(A){if(this.p===-1){this.fillBuffer()}if(A===0){return null}if(A<0){return this.LB(-1*A)}if((this.p+A-1)>=this.nodes.length){return this.eof}return this.nodes[this.p+A-1]},getCurrentSymbol:function(){return this.LT(1)},LB:function(A){if(A===0){return null}if((this.p-A)<0){return null}return this.nodes[this.p-A]},getTreeSource:function(){return this.root},getSourceName:function(){return this.getTokenStream().getSourceName()},getTokenStream:function(){return this.tokens},setTokenStream:function(A){this.tokens=A},getTreeAdaptor:function(){return this.adaptor},setTreeAdaptor:function(A){this.adaptor=A},hasUniqueNavigationNodes:function(){return this.uniqueNavigationNodes},setUniqueNavigationNodes:function(A){this.uniqueNavigationNodes=A},consume:function(){if(this.p===-1){this.fillBuffer()}this.p++},LA:function(A){return this.adaptor.getType(this.LT(A))},mark:function(){if(this.p===-1){this.fillBuffer()}this.lastMarker=this.index();return this.lastMarker},release:function(A){},index:function(){return this.p},rewind:function(A){if(!org.antlr.lang.isNumber(A)){A=this.lastMarker}this.seek(A)},seek:function(A){if(this.p===-1){this.fillBuffer()}this.p=A},push:function(A){if(!this.calls){this.calls=[]}this.calls.push(this.p);this.seek(A)},pop:function(){var A=this.calls.pop();this.seek(A);return A},reset:function(){this.p=-1;this.lastMarker=0;if(this.calls){this.calls=[]}},size:function(){if(this.p===-1){this.fillBuffer()}return this.nodes.length},iterator:function(){if(this.p===-1){this.fillBuffer()}return this.StreamIterator()},replaceChildren:function(D,B,A,C){if(D){this.adaptor.replaceChildren(D,B,A,C)}},toTokenString:function(E,D){if(this.p===-1){this.fillBuffer()}var A="",C,B;for(C=E;C<this.nodes.length&&C<=D;C++){B=this.nodes[C];A+=" "+this.adaptor.getToken(B)}return A},toString:function(H,D){var A="",E,C,B;if(arguments.length===0){if(this.p===-1){this.fillBuffer()}for(B=0;B<this.nodes.length;B++){C=this.nodes[B];A+=" ";A+=this.adaptor.getType(C)}return A}else{if(!org.antlr.lang.isNumber(H)||!org.antlr.lang.isNumber(D)){return null}if(this.p===-1){this.fillBuffer()}if(H instanceof org.antlr.runtime.tree.CommonTree){}else{}if(D instanceof org.antlr.runtime.tree.CommonTree){}else{}var G,F;if(this.tokens){G=this.adaptor.getTokenStartIndex(H);F=this.adaptor.getTokenStopIndex(D);if(this.adaptor.getType(D)===org.antlr.runtime.Token.UP){F=this.adaptor.getTokenStopIndex(H)}else{if(this.adaptor.getType(D)==org.antlr.runtime.Token.EOF){F=this.size()-2}}return this.tokens.toString(G,F)}C=null;B=0;for(;B<this.nodes.length;B++){C=this.nodes[B];if(C===H){break}}A=E="";C=this.nodes[B];while(C!==D){E=this.adaptor.getText(C);if(!org.antlr.lang.isString(E)){E=" "+this.adaptor.getType(C).toString()}A+=E;B++;C=nodes[B]}E=this.adaptor.getText(D);if(!org.antlr.lang.isString(E)){E=" "+this.adaptor.getType(D).toString()}A+=E;return A}}});org.antlr.runtime.tree.RewriteRuleElementStream=function(C,B,A){this.cursor=0;this.dirty=false;this.elementDescription=B;this.adaptor=C;if(A){if(org.antlr.lang.isArray(A)){this.singleElement=null;this.elements=A}else{this.add(A)}}};org.antlr.runtime.tree.RewriteRuleElementStream.prototype={reset:function(){this.cursor=0;this.dirty=true},add:function(A){if(!org.antlr.lang.isValue(A)){return }if(this.elements){this.elements.push(A);return }if(!org.antlr.lang.isValue(this.singleElement)){this.singleElement=A;return }this.elements=[];this.elements.push(this.singleElement);this.singleElement=null;this.elements.push(A)},nextTree:function(){var B=this.size(),A;if(this.dirty||(this.cursor>=B&&B==1)){A=this._next();return this.dup(A)}A=this._next();return A},_next:function(){var B=this.size();if(B===0){throw new org.antlr.runtime.tree.RewriteEmptyStreamException(this.elementDescription)}if(this.cursor>=B){if(B===1){return this.toTree(this.singleElement)}throw new org.antlr.runtime.tree.RewriteCardinalityException(this.elementDescription)}if(org.antlr.lang.isValue(this.singleElement)){this.cursor++;return this.toTree(this.singleElement)}var A=this.toTree(this.elements[this.cursor]);this.cursor++;return A},toTree:function(A){if(A&&A.getTree){return A.getTree()}return A},hasNext:function(){return(org.antlr.lang.isValue(this.singleElement)&&this.cursor<1)||(this.elements&&this.cursor<this.elements.length)},size:function(){var A=0;if(org.antlr.lang.isValue(this.singleElement)){A=1}if(this.elements){return this.elements.length}return A},getDescription:function(){return this.elementDescription}};org.antlr.runtime.tree.RewriteRuleNodeStream=function(C,B,A){org.antlr.runtime.tree.RewriteRuleNodeStream.superclass.constructor.apply(this,arguments)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteRuleNodeStream,org.antlr.runtime.tree.RewriteRuleElementStream,{nextNode:function(){return this._next()},toTree:function(A){return this.adaptor.dupNode(A)},dup:function(){throw new Error("dup can't be called for a node stream.")}});org.antlr.runtime.tree.RewriteRuleTokenStream=function(D,C,B){var A=org.antlr.runtime.tree.RewriteRuleTokenStream.superclass;A.constructor.apply(this,arguments)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteRuleTokenStream,org.antlr.runtime.tree.RewriteRuleElementStream,{nextNode:function(){var A=this._next();return this.adaptor.create(A)},nextToken:function(){return this._next()},toTree:function(A){return A},dup:function(A){throw new Error("dup can't be called for a token stream.")}});org.antlr.runtime.tree.RewriteRuleSubtreeStream=function(){var A=org.antlr.runtime.tree.RewriteRuleSubtreeStream.superclass;A.constructor.apply(this,arguments)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteRuleSubtreeStream,org.antlr.runtime.tree.RewriteRuleElementStream,{nextNode:function(){var B=this.size(),A;if(this.dirty||(this.cursor>=B&&B===1)){A=this._next();return this.adaptor.dupNode(A)}A=this._next();return A},dup:function(A){return this.adaptor.dupTree(A)}});org.antlr.runtime.BaseRecognizer=function(A){this.state=A||new org.antlr.runtime.RecognizerSharedState()};org.antlr.lang.augmentObject(org.antlr.runtime.BaseRecognizer,{MEMO_RULE_FAILED:-2,MEMO_RULE_UNKNOWN:-1,INITIAL_FOLLOW_STACK_SIZE:100,MEMO_RULE_FAILED_I:-2,DEFAULT_TOKEN_CHANNEL:org.antlr.runtime.Token.DEFAULT_CHANNEL,HIDDEN:org.antlr.runtime.Token.HIDDEN_CHANNEL,NEXT_TOKEN_RULE_NAME:"nextToken"});org.antlr.runtime.BaseRecognizer.prototype={reset:function(){var B,A;if(!this.state){return }this.state._fsp=-1;this.state.errorRecovery=false;this.state.lastErrorIndex=-1;this.state.failed=false;this.state.syntaxErrors=0;this.state.backtracking=0;if(this.state.ruleMemo){for(B=0,A=this.state.ruleMemo.length;B<A;B++){this.state.ruleMemo[B]=null}}},match:function(B,D,A){var C=this.getCurrentInputSymbol(B);if(B.LA(1)===D){B.consume();this.state.errorRecovery=false;this.state.failed=false;return C}if(this.state.backtracking>0){this.state.failed=true;return C}C=this.recoverFromMismatchedToken(B,D,A);return C},matchAny:function(A){this.state.errorRecovery=false;this.state.failed=false;A.consume()},mismatchIsUnwantedToken:function(A,B){return A.LA(2)===B},mismatchIsMissingToken:function(C,A){if(!A){return false}if(A.member(org.antlr.runtime.Token.EOR_TOKEN_TYPE)){if(this.state._fsp>=0){A.remove(org.antlr.runtime.Token.EOR_TOKEN_TYPE)}var B=this.computeContextSensitiveRuleFOLLOW();A=A.or(this.viableTokensFollowingThisRule)}if(A.member(C.LA(1))||A.member(org.antlr.runtime.Token.EOR_TOKEN_TYPE)){return true}return false},mismatch:function(B,C,A){if(this.mismatchIsUnwantedToken(B,C)){throw new org.antlr.runtime.UnwantedTokenException(C,B)}else{if(this.mismatchIsMissingToken(B,A)){throw new org.antlr.runtime.MissingTokenException(C,B,null)}}throw new org.antlr.runtime.MismatchedTokenException(C,B)},reportError:function(A){if(this.state.errorRecovery){return }this.state.syntaxErrors++;this.state.errorRecovery=true;this.displayRecognitionError(this.getTokenNames(),A)},displayRecognitionError:function(A,B){var D=this.getErrorHeader(B),C=this.getErrorMessage(B,A);this.emitErrorMessage(D+" "+C)},getErrorHeader:function(A){if(!org.antlr.lang.isNumber(A.line)){A.line=0}return"line "+A.line+":"+A.charPositionInLine},emitErrorMessage:function(A){if(typeof (window)!="undefined"&&window.alert){alert(A)}else{print(A)}},getErrorMessage:function(E,D){var F=(E&&E.getMessage)?E.getMessage():null,A,C;if(E instanceof org.antlr.runtime.UnwantedTokenException){var B=E;C="<unknown>";if(B.expecting==org.antlr.runtime.Token.EOF){C="EOF"}else{C=D[B.expecting]}F="extraneous input "+this.getTokenErrorDisplay(B.getUnexpectedToken())+" expecting "+C}else{if(E instanceof org.antlr.runtime.MissingTokenException){A=E;C="<unknown>";if(A.expecting==org.antlr.runtime.Token.EOF){C="EOF"}else{C=D[A.expecting]}F="missing "+C+" at "+this.getTokenErrorDisplay(E.token)}else{if(E instanceof org.antlr.runtime.MismatchedTokenException){A=E;C="<unknown>";if(A.expecting==org.antlr.runtime.Token.EOF){C="EOF"}else{C=D[A.expecting]}F="mismatched input "+this.getTokenErrorDisplay(E.token)+" expecting "+C}else{if(E instanceof org.antlr.runtime.NoViableAltException){F="no viable alternative at input "+this.getTokenErrorDisplay(E.token)}else{if(E instanceof org.antlr.runtime.EarlyExitException){F="required (...)+ loop did not match anything at input "+this.getTokenErrorDisplay(E.token)}else{if(E instanceof org.antlr.runtime.MismatchedSetException){F="mismatched input "+this.getTokenErrorDisplay(E.token)+" expecting set "+E.expecting}else{if(E instanceof org.antlr.runtime.MismatchedNotSetException){F="mismatched input "+this.getTokenErrorDisplay(E.token)+" expecting set "+E.expecting}else{if(E instanceof org.antlr.runtime.FailedPredicateException){F="rule "+E.ruleName+" failed predicate: {"+E.predicateText+"}?"}}}}}}}}return F},getNumberOfSyntaxErrors:function(){return this.state.syntaxErrors},getTokenErrorDisplay:function(A){var B=A.getText();if(!org.antlr.lang.isValue(B)){if(A.getType()==org.antlr.runtime.Token.EOF){B="<EOF>"}else{B="<"+A.getType()+">"}}B=B.replace(/\n/g,"\\n");B=B.replace(/\r/g,"\\r");B=B.replace(/\t/g,"\\t");return"'"+B+"'"},recover:function(A,B){if(this.state.lastErrorIndex==A.index()){A.consume()}this.state.lastErrorIndex=A.index();var C=this.computeErrorRecoverySet();this.beginResync();this.consumeUntil(A,C);this.endResync()},beginResync:function(){},endResync:function(){},computeErrorRecoverySet:function(){return this.combineFollows(false)},computeContextSensitiveRuleFOLLOW:function(){return this.combineFollows(true)},combineFollows:function(C){var E=this.state._fsp,B,A,D=new org.antlr.runtime.BitSet();for(B=E;B>=0;B--){A=this.state.following[B];D.orInPlace(A);if(C){if(A.member(org.antlr.runtime.Token.EOR_TOKEN_TYPE)){if(B>0){D.remove(org.antlr.runtime.Token.EOR_TOKEN_TYPE)}}else{break}}}return D},recoverFromMismatchedToken:function(B,F,A){var E=null;if(this.mismatchIsUnwantedToken(B,F)){E=new org.antlr.runtime.UnwantedTokenException(F,B);this.beginResync();B.consume();this.endResync();this.reportError(E);var D=this.getCurrentInputSymbol(B);B.consume();return D}if(this.mismatchIsMissingToken(B,A)){var C=this.getMissingSymbol(B,E,F,A);E=new org.antlr.runtime.MissingTokenException(F,B,C);this.reportError(E);return C}E=new org.antlr.runtime.MismatchedTokenException(F,B);throw E},recoverFromMismatchedSet:function(B,C,A){if(this.mismatchIsMissingToken(B,A)){this.reportError(C);return this.getMissingSymbol(B,C,org.antlr.runtime.Token.INVALID_TOKEN_TYPE,A)}throw C},getCurrentInputSymbol:function(A){return null},getMissingSymbol:function(B,D,C,A){return null},consumeUntil:function(A,C){var B=A.LA(1);while(B!=org.antlr.runtime.Token.EOF&&!C.member(B)){A.consume();B=A.LA(1)}},pushFollow:function(A){if((this.state._fsp+1)>=this.state.following.length){var C=[];var B;for(B=this.state.following.length-1;B>=0;B--){C[B]=this.state.following[B]}this.state.following=C}this.state._fsp++;this.state.following[this.state._fsp]=A},getRuleInvocationStack:function(B,A){throw new Error("Not implemented.")},getBacktrackingLevel:function(){return this.state.backtracking},getTokenNames:function(){return null},getGrammarFileName:function(){return null},toStrings:function(C){if(!C){return null}var A=[];var B;for(B=0;B<C.length;B++){A.push(C[B].getText())}return A},getRuleMemoization:function(B,A){if(!this.state.ruleMemo[B]){this.state.ruleMemo[B]={}}var C=this.state.ruleMemo[B][A];if(!org.antlr.lang.isNumber(C)){return org.antlr.runtime.BaseRecognizer.MEMO_RULE_UNKNOWN}return C},alreadyParsedRule:function(B,C){var A=this.getRuleMemoization(C,B.index());if(A==org.antlr.runtime.BaseRecognizer.MEMO_RULE_UNKNOWN){return false}if(A==org.antlr.runtime.BaseRecognizer.MEMO_RULE_FAILED){this.state.failed=true}else{B.seek(A+1)}return true},memoize:function(C,D,B){var A=this.state.failed?org.antlr.runtime.BaseRecognizer.MEMO_RULE_FAILED:C.index()-1;if(!org.antlr.lang.isValue(this.state.ruleMemo)){throw new Error("!!!!!!!!! memo array is null for "+this.getGrammarFileName())}if(D>=this.state.ruleMemo.length){throw new Error("!!!!!!!!! memo size is "+this.state.ruleMemo.length+", but rule index is "+D)}if(org.antlr.lang.isValue(this.state.ruleMemo[D])){this.state.ruleMemo[D][B]=A}},getRuleMemoizationCacheSize:function(){var C=0,A;for(A=0;this.state.ruleMemo&&A<this.state.ruleMemo.length;A++){var B=this.state.ruleMemo[A];if(B){C+=B.length}}return C},traceIn:function(C,B,A){this.emitErrorMessage("enter "+C+" "+A);if(this.state.failed){this.emitErrorMessage(" failed="+this.failed)}if(this.state.backtracking>0){this.emitErrorMessage(" backtracking="+this.state.backtracking)}},traceOut:function(C,B,A){this.emitErrorMessage("exit "+C+" "+A);if(this.state.failed){this.emitErrorMessage(" failed="+this.state.failed)}if(this.state.backtracking>0){this.emitErrorMessage(" backtracking="+this.state.backtracking)}}};org.antlr.runtime.Lexer=function(A,B){if(B){org.antlr.runtime.Lexer.superclass.constructor.call(this,B)}if(A){this.input=A}};org.antlr.lang.extend(org.antlr.runtime.Lexer,org.antlr.runtime.BaseRecognizer,{reset:function(){org.antlr.runtime.Lexer.superclass.reset.call(this);if(org.antlr.lang.isValue(this.input)){this.input.seek(0)}if(!org.antlr.lang.isValue(this.state)){return }this.state.token=null;this.state.type=org.antlr.runtime.Token.INVALID_TOKEN_TYPE;this.state.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL;this.state.tokenStartCharIndex=-1;this.state.tokenStartCharPositionInLine=-1;this.state.tokenStartLine=-1;this.state.text=null},nextToken:function(){while(true){this.state.token=null;this.state.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL;this.state.tokenStartCharIndex=this.input.index();this.state.tokenStartCharPositionInLine=this.input.getCharPositionInLine();this.state.tokenStartLine=this.input.getLine();this.state.text=null;if(this.input.LA(1)===org.antlr.runtime.CharStream.EOF){return org.antlr.runtime.Token.EOF_TOKEN}try{this.mTokens();if(!org.antlr.lang.isValue(this.state.token)){this.emit()}else{if(this.state.token==org.antlr.runtime.Token.SKIP_TOKEN){continue}}return this.state.token}catch(A){if(A instanceof org.antlr.runtime.RecognitionException){this.reportError(A)}else{if(A instanceof org.antlr.runtime.NoViableAltException){this.reportError(A);this.recover(A)}else{throw A}}}}},skip:function(){this.state.token=org.antlr.runtime.Token.SKIP_TOKEN},setCharStream:function(A){this.input=null;this.reset();this.input=A},getCharStream:function(){return this.input},getSourceName:function(){return this.input.getSourceName()},emit:function(){if(arguments.length===0){var A=new org.antlr.runtime.CommonToken(this.input,this.state.type,this.state.channel,this.state.tokenStartCharIndex,this.getCharIndex()-1);A.setLine(this.state.tokenStartLine);A.setText(this.state.text);A.setCharPositionInLine(this.state.tokenStartCharPositionInLine);this.state.token=A;return A}else{this.state.token=arguments[0]}},match:function(C){var B=0,A;if(org.antlr.lang.isString(C)){while(B<C.length){if(this.input.LA(1)!=C.charAt(B)){if(this.state.backtracking>0){this.state.failed=true;return }A=new org.antlr.runtime.MismatchedTokenException(C.charAt(B),this.input);this.recover(A);throw A}B++;this.input.consume();this.state.failed=false}}else{if(org.antlr.lang.isNumber(C)){if(this.input.LA(1)!=C){if(this.state.backtracking>0){this.state.failed=true;return }A=new org.antlr.runtime.MismatchedTokenException(C,this.input);this.recover(A);throw A}this.input.consume();this.state.failed=false}}},matchAny:function(){this.input.consume()},matchRange:function(B,A){if(this.input.LA(1)<B||this.input.LA(1)>A){if(this.state.backtracking>0){this.state.failed=true;return }mre=new org.antlr.runtime.MismatchedRangeException(B,A,this.input);this.recover(mre);throw mre}this.input.consume();this.state.failed=false},getLine:function(){return this.input.getLine()},getCharPositionInLine:function(){return this.input.getCharPositionInLine()},getCharIndex:function(){return this.input.index()},getText:function(){if(org.antlr.lang.isString(this.state.text)){return this.state.text}return this.input.substring(this.state.tokenStartCharIndex,this.getCharIndex()-1)},setText:function(A){this.state.text=A},reportError:function(A){this.displayRecognitionError(this.getTokenNames(),A)},getErrorMessage:function(B,A){var C=null;if(B instanceof org.antlr.runtime.MismatchedTokenException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting "+this.getCharErrorDisplay(B.expecting)}else{if(B instanceof org.antlr.runtime.NoViableAltException){C="no viable alternative at character "+this.getCharErrorDisplay(B.c)}else{if(B instanceof org.antlr.runtime.EarlyExitException){C="required (...)+ loop did not match anything at character "+this.getCharErrorDisplay(B.c)}else{if(B instanceof org.antlr.runtime.MismatchedNotSetException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting set "+B.expecting}else{if(B instanceof org.antlr.runtime.MismatchedSetException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting set "+B.expecting}else{if(B instanceof org.antlr.runtime.MismatchedRangeException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting set "+this.getCharErrorDisplay(B.a)+".."+this.getCharErrorDisplay(B.b)}else{C=org.antlr.runtime.Lexer.superclass.getErrorMessage.call(this,B,A)}}}}}}return C},getCharErrorDisplay:function(B){var A=B;switch(A){case org.antlr.runtime.Token.EOF:A="<EOF>";break;case"\n":A="\\n";break;case"\t":A="\\t";break;case"\r":A="\\r";break}return"'"+A+"'"},recover:function(A){this.input.consume()},traceIn:function(C,B){var A=String.fromCharCode(this.input.LT(1))+" line="+this.getLine()+":"+this.getCharPositionInLine();org.antlr.runtime.Lexer.superclass.traceIn.call(this,C,B,A)},traceOut:function(C,B){var A=String.fromCharCode(this.input.LT(1))+" line="+this.getLine()+":"+this.getCharPositionInLine();org.antlr.runtime.Lexer.superclass.traceOut.call(this,C,B,A)}});org.antlr.runtime.ParserRuleReturnScope=function(){};org.antlr.runtime.ParserRuleReturnScope.prototype={getStart:function(){return this.start},getStop:function(){return this.stop}};org.antlr.runtime.tree.TreeRuleReturnScope=function(){};org.antlr.runtime.tree.TreeRuleReturnScope.prototype={getStart:function(){return this.start}};org.antlr.runtime.Parser=function(A,B){org.antlr.runtime.Parser.superclass.constructor.call(this,B);this.setTokenStream(A)};org.antlr.lang.extend(org.antlr.runtime.Parser,org.antlr.runtime.BaseRecognizer,{reset:function(){org.antlr.runtime.Parser.superclass.reset.call(this);if(org.antlr.lang.isValue(this.input)){this.input.seek(0)}},getCurrentInputSymbol:function(A){return A.LT(1)},getMissingSymbol:function(C,G,E,A){var B="<missing "+this.getTokenNames()[E]+">";var D=new org.antlr.runtime.CommonToken(E,B);var F=C.LT(1);var H;if(F.getType()===org.antlr.runtime.Token.EOF){H=F;F=C.LT(-1);if(!F){F=H}}D.line=F.getLine();D.charPositionInLine=F.getCharPositionInLine();D.channel=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;return D},setTokenStream:function(A){this.input=null;this.reset();this.input=A},getTokenStream:function(){return this.input},getSourceName:function(){return this.input.getSourceName()},traceIn:function(B,A){org.antlr.runtime.Parser.superclass.traceIn.call(this,B,A,this.input.LT(1))},traceOut:function(B,A){org.antlr.runtime.Parser.superclass.traceOut.call(this,B,A,this.input.LT(1))}});org.antlr.runtime.DFA=function(){};org.antlr.runtime.DFA.prototype={predict:function(C){var F=C.mark(),D=0,B,E,A;try{while(true){B=this.special[D];if(B>=0){D=this.specialStateTransition(B,C);if(D===-1){this.noViableAlt(D,C);return 0}C.consume();continue}if(this.accept[D]>=1){return this.accept[D]}E=C.LA(1);if(E===org.antlr.runtime.Token.EOF){E=-1}else{if(org.antlr.lang.isString(E)){E=E.charCodeAt(0)}}if(E>=this.min[D]&&E<=this.max[D]){A=this.transition[D][E-this.min[D]];if(A<0){if(this.eot[D]>=0){D=this.eot[D];C.consume();continue}this.noViableAlt(D,C);return 0}D=A;C.consume();continue}if(this.eot[D]>=0){D=this.eot[D];C.consume();continue}if(E==org.antlr.runtime.Token.EOF&&this.eof[D]>=0){return this.accept[this.eof[D]]}this.noViableAlt(D,C);return 0}}finally{C.rewind(F)}},noViableAlt:function(C,A){if(this.recognizer.state.backtracking>0){this.recognizer.state.failed=true;return }var B=new org.antlr.runtime.NoViableAltException(this.getDescription(),this.decisionNumber,C,A);this.error(B);throw B},error:function(A){},specialStateTransition:function(B,A){return -1},getDescription:function(){return"n/a"}};org.antlr.lang.augmentObject(org.antlr.runtime.DFA,{unpackEncodedString:function(D){var C,F=[],E=0,G,A,B;for(C=0;C<D.length;C+=2){G=D.charCodeAt(C);A=D.charCodeAt(C+1);if(A===65535){A=-1}for(B=1;B<=G;B++){F[E++]=A}}return F},unpackEncodedStringToUnsignedChars:function(A){return org.antlr.runtime.DFA.unpackEncodedString(A)}});org.antlr.runtime.tree.TreeParser=function(A){org.antlr.runtime.tree.TreeParser.superclass.constructor.call(this,arguments[1]);this.setTreeNodeStream(A)};(function(){var A=org.antlr.runtime.tree.TreeParser;org.antlr.lang.augmentObject(A,{DOWN:org.antlr.runtime.Token.DOWN,UP:org.antlr.runtime.Token.UP});org.antlr.lang.extend(A,org.antlr.runtime.BaseRecognizer,{reset:function(){A.superclass.reset.call(this);if(this.input){this.input.seek(0)}},setTreeNodeStream:function(B){this.input=B},getTreeNodeStream:function(){return this.input},getSourceName:function(){return this.input.getSourceName()},getCurrentInputSymbol:function(B){return B.LT(1)},getMissingSymbol:function(D,F,E,B){var C="<missing "+this.getTokenNames()[E]+">";return new org.antlr.runtime.tree.CommonTree(new org.antlr.runtime.CommonToken(E,C))},matchAny:function(E){this.state.errorRecovery=false;this.state.failed=false;var B=this.input.LT(1);if(this.input.getTreeAdaptor().getChildCount(B)===0){this.input.consume();return }var D=0,C=this.input.getTreeAdaptor().getType(B);while(C!==org.antlr.runtime.Token.EOF&&!(C===A.UP&&D===0)){this.input.consume();B=this.input.LT(1);C=this.input.getTreeAdaptor().getType(B);if(C===A.DOWN){D++}else{if(C===A.UP){D--}}}this.input.consume()},mismatch:function(C,D,B){throw new org.antlr.runtime.MismatchedTreeNodeException(D,C)},getErrorHeader:function(B){return this.getGrammarFileName()+": node from "+(B.approximateLineInfo?"after ":"")+"line "+B.line+":"+B.charPositionInLine},getErrorMessage:function(C,B){var D;if(this instanceof A){D=C.input.getTreeAdaptor();C.token=D.getToken(C.node);if(!org.antlr.lang.isValue(C.token)){C.token=new org.antlr.runtime.CommonToken(D.getType(C.node),D.getText(C.node))}}return A.superclass.getErrorMessage.call(this,C,B)},traceIn:function(C,B){A.superclass.traceIn.call(this,C,B,this.input.LT(1))},traceOut:function(C,B){A.superclass.traceOut.call(this,C,B,this.input.LT(1))}})})();/*
Copyright (c) 2003-2008 Terence Parr. All rights reserved.
Code licensed under the BSD License:
http://www.antlr.org/license.html

Some parts of the ANTLR class:
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
*/
org.antlr.runtime.ANTLRFileStream=function(D,A){this.fileName=D;var C;if(typeof java!=="undefined"){C="loadFileUsingJava"}else{throw new Error("ANTLR File I/O is not supported in this JS implementation.")}var B=this[C](D,A);org.antlr.runtime.ANTLRFileStream.superclass.constructor.call(this,B)};org.antlr.lang.extend(org.antlr.runtime.ANTLRFileStream,org.antlr.runtime.ANTLRStringStream,{getSourceName:function(){return this.fileName},loadFileUsingJava:function(H,E){var G=new java.io.File(H),C=G.length(),B,D=new java.io.FileInputStream(G);if(E){B=new java.io.InputStreamReader(D,E)}else{B=new java.io.InputStreamReader(D)}var A,F=[];while((A=B.read())>=0){F.push(String.fromCharCode(A))}return F.join("")}});window.$MA||($MA={});$MA=function(a){if((a=document.getElementById(a))&&a.macontrol)return a.macontrol};$MA.yTicLabels={allInteger:!0,decimalSymbol:""};
$MA.labelNumberString=function(a){var b=!1,c=a;0>a&&(b=!0,c=-a);var d;a=void 0===$MA.locale?"en":$MA.locale;999999999999<c?(d=c/1E12,c=$MA.getLocalisation(a,"Trillion_ShortForm","T")):999999999<c?(d=c/1E9,c=$MA.getLocalisation(a,"Billion_ShortForm","B")):999999<c?(d=c/1E6,c=$MA.getLocalisation(a,"Million_ShortForm","M")):999<c?(d=c/1E3,c=$MA.getLocalisation(a,"Thousand_ShortForm","K")):(d=c,c="");1<d&&0!=d%1?(d=Math.floor(10*d),d/=10,$MA.yTicLabels.allInteger=!1,$MA.yTicLabels.decimalSymbol=c):c&&
($MA.yTicLabels.decimalSymbol=c);a=$MA.Locale.getLocale(a);""!=c&&(/^-?[0-9]+$/.test(d)?a.decimalLength=0:a.decimalLength=1);d=$MA.Locale.formatNumber(d,a);d+=c;return b?"-"+d:d};$MA.createXHR=function(){var a;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){$MA.log.error($MA.getLocalisation(null,"Error_NoAJAX","Your browser does not support AJAX!"));return}}return a};
$MA.isCSSFileLoaded=function(a){var b=!1;if(document.styleSheets){var c;for(c=0;c<document.styleSheets.length;c++){var d=document.styleSheets[c];d.href&&0<=d.href.indexOf(a)&&(b=!0)}}return b};
$MA.initCSSRule=function(){$MA.CSSStyleSheets=new $MA.Hash;try{var a,b=[".chart;.graph;.chart_xaxis;.chart_yaxis;.defaultFillPalette;.defaultStrokePalette;.defaultInsetShadowPalette;.hierarchy_chart_table_lines;.chart_legend;.chart_table_shadow;.chart_titlebar;.chart_titlebar > .chart_title;.chart_titlebar > .fullscreen_icon;.chart_table;.chart_table_dimension_title;.chart_table_row_header;.chart_table_column_headers;.chart_table_contents;.chart_table_highlight;.chart_range_selector_stroke;.chart_range_selector_text;.chart_value_bubble;.chart_value_bubble_outline;.chart_breadcrumbs"];if(document.styleSheets){var c;
for(c=0;c<document.styleSheets.length;c++){var d=document.styleSheets[c];if(d.cssRules)for(var e=0,f=d.cssRules.length,g=!1;e<f;){g=d.cssRules[e];if("3"==g.type&&g.styleSheet.cssRules)for(var h=0,k=g.styleSheet.cssRules.length,l;h<k;)l=g.styleSheet.cssRules[h],l.selectorText&&(a=l.selectorText.toLowerCase(),-1<b.indexOf(a)&&$MA.CSSStyleSheets.set(a,l)),h++;else"1"==g.type&&g.selectorText&&(a=g.selectorText.toLowerCase(),-1<b.indexOf(a)&&$MA.CSSStyleSheets.set(a,g));e++}}}}catch(p){}};
$MA.getCSSRule=function(a){return $MA.CSSStyleSheets.get(a.toLowerCase())};
$MA.getAbsolutePosition=function(a){if(document.documentElement.hasOwnProperty("getBoundingClientRect"))try{var b=a.getBoundingClientRect();return{x:b.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft)-(document.documentElement.clientLeft||document.body.clientLeft||0),y:b.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-(document.documentElement.clientTop||document.body.clientTop||0)}}catch(c){}for(var d=b=0,e=null,e=a.offsetParent,
f=a,g=a;null!=g.parentNode;){g=g.parentNode;if(null!=g.offsetParent){var h=!0;!window.opera||g!=f.parentNode&&"TR"!=g.nodeName||(h=!1);h&&(g.scrollTop&&0<g.scrollTop&&(d-=g.scrollTop),g.scrollLeft&&0<g.scrollLeft&&(b-=g.scrollLeft));var h=window.getComputedStyle(g,null),k=h.getPropertyValue("transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-webkit-transform")||h.getPropertyValue("-ms-transform");k&&"none"!=k&&(k=k.substr(7,k.length-8).split(", "),h=parseInt(k[4],10),k=parseInt(k[5],
10),isNaN(h)||isNaN(k)||(b+=h,d+=k))}g==e&&(b+=a.offsetLeft,g.clientLeft&&"TABLE"!=g.nodeName&&(b+=g.clientLeft),d+=a.offsetTop,g.clientTop&&"TABLE"!=g.nodeName&&(d+=g.clientTop),a=g,null==a.offsetParent&&(a.offsetLeft&&(b+=a.offsetLeft),a.offsetTop&&(d+=a.offsetTop)),e=a.offsetParent)}return{x:b,y:d}};
$MA.getRelativePosition=function(a,b){var c,d;a=a||window.event;var e=a.target||a.srcElement,f;if(!window.opera&&a.offsetX){f={x:a.offsetX,y:a.offsetY};for(var g=e;g;)g.mouseX=f.x,g.mouseY=f.y,f.x+=g.offsetLeft,f.y+=g.offsetTop,g=g.offsetParent;for(var g=f=0,h=b;h;){if(h.mouseX){c=h.mouseX-f;d=h.mouseY-g;break}f+=h.offsetLeft;g+=h.offsetTop;h=h.offsetParent}for(g=e;g;)g.mouseX=void 0,g.mouseY=void 0,g=g.offsetParent}else f=$MA.getAbsolutePosition(b),c=a.pageX-f.x,d=a.pageY-f.y;return{x:c,y:d}};
$MA.getMouseXY=function(a,b){b=void 0==b?document.all&&event?event.srcElement:a.target:b;return $MA.getRelativePosition(a,b)};$MA.getDouble=function(a){if(!a)return 0;var b=0;"number"==typeof a?b=a:"string"==typeof a&&(b=parseFloat(a));return b};$MA.imagesFolder="./images/";$MA.setImagesFolder=function(a){$MA.imagesFolder=a};
$MA.disableiScrollEventHandlers=function(a){var b=window.hasOwnProperty("ontouchstart"),c=b?"touchmove":"mousemove",d=b?"touchend":"mouseup";a.element.removeEventListener(b?"touchstart":"mousedown",a,!1);a.element.removeEventListener(c,a,!1);a.element.removeEventListener(d,a,!1)};
$MA.enableiScrollEventHandlers=function(a){var b=window.hasOwnProperty("ontouchstart"),c=b?"touchmove":"mousemove",d=b?"touchend":"mouseup";a.element.addEventListener(b?"touchstart":"mousedown",a,!1);a.element.addEventListener(c,a,!1);a.element.addEventListener(d,a,!1)};$MA.triggerJQueryEvent=function(a,b){window.jQuery&&($=jQuery.noConflict(),$(a).trigger(b))};
$MA.Hash=function(){this.length=0;this.items=[];var a;for(a=0;a<arguments.length;a+=2)void 0!=arguments[a+1]&&(this.items[arguments[a]]=arguments[a+1],this.length++)};$MA.Hash.prototype.remove=function(a){var b;void 0!=this.items[a]&&(this.length--,b=this.items[a],delete this.items[a]);return b};$MA.Hash.prototype.get=function(a){return this.items[a]};$MA.Hash.prototype.set=function(a,b){var c;void 0!=b&&(void 0==this.items[a]?this.length++:c=this.items[a],this.items[a]=b);return c};
$MA.Hash.prototype.containsKey=function(a){return void 0!=this.items[a]};$MA.Hash.prototype.clear=function(){for(var a in this.items)delete this.items[a];this.length=0};
$MA.Browser={dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"Andriod 4.0.",identity:"AndriodICSNative",versionSearch:"Version"},{string:navigator.userAgent,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,
subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"Trident"},{string:navigator.userAgent,subString:"WebKit",identity:"WebKit",versionSearch:"Version"},
{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},
{string:navigator.platform,subString:"Linux",identity:"Linux"}],searchString:function(a){var b;for(b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},init:function(){var a=navigator.userAgent;this.isJBStockBrowser=
(0<a.indexOf("Android 4.1")||0<a.indexOf("Android 4.2"))&&0>a.indexOf("Chrome");this.isJB42StockBrowser=0<a.indexOf("Android 4.2")&&0>a.indexOf("Chrome");this.isICSStockBrowser=0<a.indexOf("Android 4.0")&&0>a.indexOf("Chrome");this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(a)||this.searchVersion(navigator.appVersion)||"An unknown version";this.os=this.searchString(this.dataOS)||"An unknown OS"}};$MA.Browser.init();
$MA.isBrowserCompatible=function(){var a=[{browser:"Chrome",versions:[{os:"Windows",version:15}]},{browser:"Safari",versions:[{os:"Mac",version:5},{os:"iPad",version:5}]},{browser:"WebKit",versions:[{os:"Android",version:4}]}],b,c;for(b=0;b<a.length;b++)if($MA.Browser.browser==a[b].browser){for(c=0;c<a[b].versions.length;c++)if($MA.Browser.version>=a[b].versions[c].version&&(null==a[b].versions[c].os||a[b].versions[c].os==$MA.Browser.os))return!0;break}return!1};
$MA.isTouchEventSupported=function(){var a=!1;if("undefined"!==typeof window.ontouchstart||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints)a=!0;return a}();$MA.initCSSRule();
$MA.getColors=function(){$MA.COLORS||($MA.COLORS={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",
darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",
gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",
lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",
oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",
skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});return $MA.COLORS};$MA.colorToHex=function(a){var b=$MA.getColors();return b[a]?b[a]:"#000000"};
$MA.convertRgbToHex=function(a){var b=/^rgb\(\s*?(\d+?)\s*?,\s*?(\d+?)\s*?,\s*?(\d+?)\s*?\)$/i.exec(a);if(4==b.length){var c=parseInt(b[1],10);a=parseInt(b[2],10);b=parseInt(b[3],10);c=c.toString(16);c=1==c.length?"0"+c:c;a=a.toString(16);a=1==a.length?"0"+a:a;b=b.toString(16);b=1==b.length?"0"+b:b;a="#"+c+a+b}return a};
$MA.getColorInt=function(a){if(isNaN(a)){if(0==a.indexOf("rgba(")||0==a.indexOf("transparent"))return a;0==a.indexOf("rgb(")?a=$MA.convertRgbToHex(a):0!=a.indexOf("#")&&(a=$MA.colorToHex(a));a=parseInt(a.substr(1),16)}return a=Number(a)};$MA.rgb2hsv=function(a,b,c){a/=255;b/=255;c/=255;var d=Math.min(a,Math.min(b,c)),e=Math.max(a,Math.max(b,c));return d==e?[0,0,d]:[((a==d?3:c==d?1:5)-(a==d?b-c:c==d?a-b:c-a)/(e-d))/6,(e-d)/e,e]};
$MA.hsv2rgb=function(a,b,c){var d=[];if(0==b)d[0]=d[1]=d[2]=Math.round(255*c);else{var e=6*a;6==e&&(e=0);var f=Math.floor(e);a=c*(1-b);var g=c*(1-b*(e-f));b=c*(1-b*(1-(e-f)));0==f?(f=c,e=b,c=a):1==f?(f=g,e=c,c=a):2==f?(f=a,e=c,c=b):3==f?(f=a,e=g):4==f?(f=b,e=a):(f=c,e=a,c=g);d[0]=Math.round(255*f);d[1]=Math.round(255*e);d[2]=Math.round(255*c)}return d};
$MA.convertor={processFormat:function(a){var b="number",c=",",d="",e="",f="##",g=".",h=[];a&&(h=/(#+|\d+)\S+(#+|\d+)/,h=a.replace(h,"#"),"#"===h?b="number":0<h.indexOf("%")?(b="percent",e="%",a=a.replace("%","")):(b="currency",h=h.split("#"),d=h[0],e=h[1],a=a.replace(d,""),a=a.replace(e,"")),h=/(#+|\d+)/g,h=a.replace(h,""),h=h.replace(/([\x00-\x7f])(?=.*?\1)/gi,""),1===h.length?(c=h[0],f=g=""):2===h.length?(c=h[0],g=h[1]):$MA.log.error("format string is not correct!"),""!==g&&(f=a.substr(a.indexOf(g)+
1)));return{datatype:b,thousandSep:c,decimalSep:g,decimalStr:f,prefix:d,suffix:e}},format:function(a,b){return b?"number"===b.datatype?this.formatNumber(a,b):"percent"===b.datatype?this.formatPercent(a,b):this.formatCurrency(a,b):a},formatNumber:function(a,b){var c;if(isNaN(a))$MA.log.error("Invalid number for formatting!");else{var d=[],e,f,g;c=b.decimalStr;d=b.decimalStr.length;e=b.thousandSep;f=b.decimalSep;g=/\B(?=(?:\d{3})+(?!\d))/g;0<d?(/\d+/.test(c)||(a=Math.round(a*Math.pow(10,d))/Math.pow(10,
d)),d=a.toString().split(f),/\d+/.test(c)&&(d[1]=c),3<d[0]+0&&(d[0]=d[0].replace(g,e)),c=d.join(f)):(d=Math.round(a).toString(),c=d.replace(g,e))}return c},formatPercent:function(a,b){var c;c=this.formatNumber(a,b);return c+=b.suffix},formatCurrency:function(a,b){var c;c=this.formatNumber(a,b);return c=b.prefix+c+b.suffix}};$MA.LONG_MONTH_NAMES="January February March April May June July Augest September October November December".split(" ");$MA.SHORT_MONTH_NAMES="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");
$MA.LONG_WEEKDAY_NAMES="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");$MA.SHORT_WEEKDAY_NAMES="Sun Mon Tue Wed Thu Fri Sat".split(" ");$MA.COLORS=void 0;
$MA.format=function(a,b,c){if(void 0==a)return"";var d;if(window.jQuery&&($=jQuery.noConflict(),$.globalization)){if("string"===typeof a)return $MA.formatString(a,b);void 0==c&&(c=$MA.locale);a instanceof Date?(void 0==b?b="d":(b=b.toLowerCase(),"month"==b?b="MMMM":"shortmonth"==b?b="MMM":"weekday"==b?b="dddd":"shortweekday"==b?b="ddd":"shortdate"==b?b="d":"longdate"==b&&(b="D")),d=$.format(a,b,c,$MA.defaultCurrencySymbol)):"number"===typeof a?b?(b=b.toLowerCase(),"number"==b?b="N":"currency"==b?
b="C":"percent"==b?b="P":0==b.indexOf("rounded")&&(d=b.length,7<d&&(b="n"+b.substring(7,d))),d="C"===b?$MA.Locale.formatCurrency(a,c):$.format(a,b,c,$MA.defaultCurrencySymbol)):d=a.toString():d=a.toString();return d}"currency"===b&&"number"==typeof a?d=$MA.Locale.formatCurrency(a,c):"number"==typeof a?d=$MA.formatNumber(a,b):"string"==typeof a?d=$MA.formatString(a,b):a instanceof Date&&(d=$MA.formatDateTime(a,b));return d};$MA.formatString=function(a,b){return a.toString()};
$MA.formatMoney=function(a,b,c,d){var e=isNaN(b=Math.abs(b))?2:b;b=void 0==c?",":c;d=void 0==d?".":d;c=0>a?"-":"";var f=parseInt(a=Math.abs(+a||0).toFixed(e),10).toString(),g=f.length,g=3<g?g%3:0;return c+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(e?b+Math.abs(a-f).toFixed(e).slice(2):"")};
$MA.formatNumber=function(a,b){if(b){var c=b.toLowerCase(),d=a;if("currency"==c)c=""==$MA.defaultCurrencySymbol?"$":$MA.defaultCurrencySymbol,d=0>a?"-"+c+$MA.formatMoney(Number(-a),2,".",","):c+$MA.formatMoney(Number(a),2,".",",");else if("percent"==c)d=a.toFixed(2)+"%";else if(0==c.indexOf("rounded")){var e=c.length;7<e&&(c=c.substring(7,e),d=0>a?"-"+$MA.formatMoney(Number(-a),c,".",","):$MA.formatMoney(Number(a),c,".",","))}return d}return a.toString()};
$MA.formatDateTime=function(a,b){if(b){var c=b.toLowerCase(),d;"month"==c?d=$MA.LONG_MONTH_NAMES[a.getMonth()]:"shortmonth"==c?d=$MA.SHORT_MONTH_NAMES[a.getMonth()]:"weekday"==c?d=$MA.LONG_WEEKDAY_NAMES[a.getDay()]:"shortweekday"==c?d=$MA.SHORT_WEEKDAY_NAMES[a.getDay()]:"longdate"==c&&(d=a.toLocaleDateString());if(d)return d}var e=a.getFullYear(),c=a.getMonth()+1;d=a.getDate();e+="-";10>c&&(e+="0");e+=c;e+="-";10>d&&(e+="0");return e+=d};$MA.defaultLocale=window.navigator.userLanguage||window.navigator.language;
$MA.locale=$MA.defaultLocale;$MA.setLocale=function(a){$MA.locale=a};$MA.defaultCurrencySymbol="";$MA.setCurrencySymbol=function(a){$MA.defaultCurrencySymbol=a};$MA.getLocalisation=function(a,b,c){var d=$MA.GlobalizedResource,e;if(void 0==d)return c;if(""==a||null==a)a=$MA.locale;d[a]?e=d[a][b]:d[a.substring(0,2)]&&(e=d[a.substring(0,2)][b]);return void 0==e?c:e};
$MA.getMetadataUrl=function(a){var b;if($MA.locale==$MA.defaultLocale)b=a;else{var c=a.lastIndexOf("/");0<c?(b=a.substring(0,c),a=a.substring(c+1,a.length),b=b+"/"+$MA.locale+"/"+a):b=$MA.locale+"/"+a}return b};$MA.defaultDir=function(){var a="ltr";"rtl"===(window!=window.top?window.self.document.documentElement.getAttribute("dir"):document.documentElement.getAttribute("dir"))&&(a="rtl");return a}();$MA.dir=$MA.defaultDir;$MA.setDir=function(a){$MA.dir=a};
$MA.Locale={getLocale:function(a){a=a&&a.replace(/^\s+|\s+$/g,"");if(void 0===a||""===a||"default"===a)a=$MA.locale;var b="$",c="%s%n",d="(%s%n)",e=".",f=",";switch(a.split("-")[0]){case "en":-1!==["en-029","en-AU","en-CA","en-NZ"].indexOf(a)?d="-%s%n":"en-BZ"===a?b="BZ$":"en-PH"===a?b="Php":"en-TT"===a?b="TT$":"en-ZW"===a?b="Z$":"en-MY"===a?b="RM":"en-GB"===a?(d="-%s%n",b="\u00a3"):"en-IE"===a?(d="-%s%n",b="\u20ac"):"en-JM"===a?(d="-%s%n",b="J$"):"en-IN"===a?(c="%s %n",d="%s -%n",b="Rs."):"en-ZA"===
a&&(c="%s %n",d="%s -%n",b="R");break;case "zh":"zh-SG"===a?b="$":"zh-HK"===a?b="HK$":"zh-MO"===a?b="MOP":"zh-CN"===a?(b="\u00a5",d="%s-%n"):"zh-TW"===a?(b="NT$",d="-%s%n"):(b="\u00a5",d="%s-%n");break;case "de":b="\u20ac";c="%n %s";d="-%n %s";e=",";f=".";"de-AT"===a?d="-%s %n":"de-CH"===a?(b="SFr.",d="%s-%n",f="\\"):"de-LI"===a&&(b="CHF",d="%s-%n",f="\\");break;case "fr":b="\u20ac";c="%n %s";d="-%n %s";e=",";f=" ";"fr-BE"===a?(c="%s %n",d="%s -%n"):"fr-CA"===a?(b="$",c="%n %s",d="(%n %s)"):"fr-CH"===
a&&(d="%s-%n",e=".",f="\\");break;case "es":b="$";e=",";f=".";"es"===a||"es-ES"===a?(b="\u20ac",c="%s %n",d="-%n %s"):-1!==["es-EC","es-CO"].indexOf(a)?(c="%s %n",d="(%s %n)"):"es-PR"===a?(c="%s %n",d="(%s %n)",e=".",f=","):-1!==["es-US","es-SV"].indexOf(a)?(c="%s%n",d="(%s%n)",e=".",f=","):"es-MX"===a?(c="%s%n",d="-%s%n",e=".",f=","):"es-AR"===a?(c="%s %n",d="%s-%n"):"es-CL"===a?(c="%s %n",d="-%s %n"):"es-BO"===a?(b="$b",c="%s %n",d="(%s %n)"):"es-CR"===a?(b="\u00a2",c="%s%n",d="(%s%n)"):"es-DO"===
a?(b="RD$",c="%s%n",d="(%s%n)",e=".",f=","):"es-GT"===a?(b="Q",c="%s%n",d="(%s%n)",e=".",f=","):"es-HN"===a?(b="L.",c="%s %n",d="%s -%n",e=".",f=","):"es-NI"===a?(b="C$",c="%s %n",d="(%s %n)",e=".",f=","):"es-PA"===a?(b="B/.",c="%s %n",d="(%s %n)",e=".",f=","):"es-PE"===a?(b="S/.",c="%s %n",d="(%s %n)",e=".",f=","):"es-PY"===a?(b="Gs",c="%s %n",d="(%s %n)"):"es-UY"===a?(b="$U",c="%s %n",d="(%s %n)"):"es-VE"===a?(b="Bs",c="%s %n",d="%s -%n"):(b="\u20ac",c="%s %n",d="-%n %s");break;case "ru":b="\u0440.";
c="%n%s";d="-%n%s";e=",";f=" ";break;case "ja":b="\u00a5";c="%s%n";d="-%s%n";e=".";f=",";break;case "pt":b="\u20ac",c="%n %s",d="-%n %s",e=",",f=".","pt-BR"===a&&(b="R$",c="%s %n",d="-%s %n")}return{symbol:b,positiveFormat:c,negativeFormat:d,decimalSymbol:e,decimalLength:2,digitGroupSymbol:f,groupDigits:!0}},formatCurrency:function(a,b){var c=$MA.Locale.getLocale(b),d=0<=a?c.positiveFormat:c.negativeFormat,e=this.formatNumber(a,c),c=d.replace(/%s/g,c.symbol);return c=c.replace(/%n/g,e)},formatNumber:function(a,
b){var c;a=Math.abs(a);if(isNaN(a))$MA.log.error("Invalid number for formatting!");else{var d=[],e,f,d=b.decimalLength;c=b.digitGroupSymbol;e=b.decimalSymbol;f=/\B(?=(?:\d{3})+(?!\d))/g;0<d?(a=a.toFixed(d),d=a.toString().split("."),3<d[0]+0&&(d[0]=d[0].replace(f,c)),c=d.join(e)):(d=Math.round(a).toString(),c=d.replace(f,c))}return c}};
$MA.log=function(){var a=function(a,b){return("000"+String(a)).slice(-b)},b=function(b,d){var e=new Date,e={time:a(e.getHours(),2)+":"+a(e.getMinutes(),2)+":"+a(e.getSeconds(),2),date:a(e.getFullYear(),4)+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2),timestamp:e.getTime(),level:b,message:d||""};if(window.console){var f=e.date+" "+e.time+" "+e.message;switch(b){case 0:console.error(f+" [fatal]");break;case 1:console.error(f);break;case 2:console.warn(f);break;case 3:console.info?console.info(f):console.log(f);
break;case 4:console.debug?console.debug(f):console.log(f);break;case 5:console.trace?console.trace(f):console.log(f)}}return e};return{fatal:function(a){b(0,a)},error:function(a){b(1,a)},warning:function(a){b(2,a)},info:function(a){b(3,a)},debug:function(a,d){0<$MA.trace&&a<=$MA.trace&&b(4,d)},trace:function(a){b(5,a)}}}();$MA.log.debug("$MA Logging Enabled");$MA.assert=function(a,b){a||(window.console&&console.assert?console.assert(a,b):$MA.log.debug("[Assertions] "+b))};
$MA.setTrace=function(a){$MA.trace=a};$MA.trace=0;$MA.TRACE_LEVEL0=0;$MA.TRACE_LEVEL1=1;$MA.TRACE_LEVEL2=2;$MA.TRACE_LEVEL3=3;$MA.parseFloat=function(a){var b=a;void 0!=a&&("number"==typeof a?b=a:"string"==typeof a&&(b=parseFloat(a),isNaN(b)&&$MA.log.error($MA.getLocalisation(null,"Error_DataParsing",a+" is not a number"))));return b};$MA.parseBool=function(a){var b=!1;if(void 0!=a)if("boolean"==typeof a)b=a;else if("true"==a.toLowerCase()||"1"==a)b=!0;return b};
$MA.parseExpr=function(a,b,c){if(void 0!=a){var d;c&&(d=a);c=a.indexOf("~t");0<=c&&(d=a.substring(c+2,a.length));return d?$MA.Expression.parse(d,b):a}};
$MA.parseDuration=function(a){var b=/^([\+\-])?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d+))?S)?)?/.exec(a);if(null===b)$MA.log.error("Invalid duration value.");else{a=b[2]||1970;var c=b[3]||0,d=parseInt(b[4]||1,10),e=parseInt(b[5]||0,10),f=parseInt(b[6]||0,10),g=parseFloat(b[7]||0),b=parseInt(b[8]||0,10);return new Date(a,c,d,e,f,g,b)}};$MA.parseDate=function(a){if(void 0!=a&&(a=a.match(RegExp(/(\d{4})-(\d{2})-(\d{2})/))))return new Date(a[1],a[2]-1,a[3])};
$MA.parseTime=function(a){if(void 0!=a){a=a.match(RegExp(/(\d{2}):(\d{2}):(\d{2})/));var b=new Date;a[1]&&b.setHours(a[1]);a[2]&&b.setMinutes(a[2]);a[3]&&b.setSeconds(a[3]);return b}};
$MA.parseDateTime=function(a){if(void 0!=a){var b;if(0<=a.indexOf("/Date("))b=new Date(parseInt(a.substr(6),10));else if(0==a.indexOf("P")||1==a.indexOf("P"))b=$MA.parseDuration(a);else{if(-1==a.indexOf(" "))return $MA.parseDate(a);if(a=a.match(RegExp(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/)))b=new Date(a[1],a[2]-1,a[3]),a[4]&&b.setHours(a[4]),a[5]&&b.setMinutes(a[5]),a[6]&&b.setSeconds(a[6])}return b}};$MA.roundToHalf=function(a){return a>=Math.round(a)+0.5?Math.round(a)+0.5:Math.round(a)};
$MA.platform={iOS:!1,android:!1,blackberry:!1,windows:!1};$MA.device={desktop:!1,tablet:!1,mobile:!1};
(function(){var a=navigator.userAgent;0<=a.indexOf("iOS")||0<=a.indexOf("like Mac OS X")?($MA.platform.iOS=!0,0<=a.indexOf("iPad")?$MA.device.tablet=!0:0<=a.indexOf("iPhone")?$MA.device.mobile=!0:0<=a.indexOf("Mac OS X")&&($MA.device.desktop=!0)):0<=a.indexOf("Android")?($MA.platform.android=!0,0<=a.indexOf("Mobile")?$MA.device.mobile=!0:$MA.device.tablet=!0):0<=navigator.userAgent.indexOf("BB10")?$MA.platform.blackberry=!0:0<=a.indexOf("Windows")?($MA.platform.windows=!0,0<=a.indexOf("Phone")?$MA.device.mobile=
!0:$MA.device.tablet=!0):($MA.platform.windows=!0,$MA.device.desktop=!0)})();$MA.getScreenSize=function(){return $MA.device.tablet||$MA.device.desktop?"normal":"small"};$MA.screenSize=$MA.getScreenSize();$MA.TableColumnType={NUMBER:0,STRING:1,DATETIME:2};$MA.DataStore=function(){this.dvObj=this.dataParser=void 0};
$MA.DataStore.prototype.load=function(a){var b=$MA.createXHR();void 0!=b&&(b.open("GET",$MA.getMetadataUrl(a),!1),b.send(null),200==b.status||304==b.status||0==b.status?this.create(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};$MA.DataStore.prototype.create=function(a){var b=new $MA.DataView.DataViewObject;(new $MA.DataView.XmlMetaDataReader).parse(b,a);this.initialize(b)};
$MA.DataStore.prototype.bind=function(a,b,c){void 0==this.events&&(this.events=new $MA.Hash);this.events.set(a,{func:b,context:c})};$MA.DataStore.prototype.unbind=function(a){this.events&&this.events.remove(a)};$MA.DataStore.prototype.trigger=function(a,b){if(this.events){var c=this.events.get(a);c&&"function"===typeof c.func&&c.func.call(c.context,b)}};
$MA.DataStore.prototype.initialize=function(a){this.dvObj=a;var b=a.getTable();this.createDataParser(b);this.dataParser&&(this.dataParser.headerRow=b.headerRow);this.createRenderer&&this.createRenderer(a);b.sourceType?"file"==b.sourceType.toLowerCase()?this.loadFileData(b.url):this.updateData(null):this.updateData(null)};
$MA.DataStore.prototype.createDataParser=function(a){void 0!=a&&void 0!=a.fileType&&("json"==a.fileType.toLowerCase()?this.dataParser=new $MA.DataView.Data.JsonParser(a):"csv"==a.fileType.toLowerCase()?this.dataParser=new $MA.DataView.Data.CsvParser(a):"xml"==a.fileType.toLowerCase()?this.dataParser=new $MA.DataView.Data.XmlParser(a):$MA.log.error($MA.getLocalisation(null,"Error_NoFileType","Unsupported File Type")))};$MA.DataStore.prototype.filter=function(a){this.dvObj.filter(a)};
$MA.DataStore.prototype.sort=function(a){this.dvObj.sort(a)};$MA.DataStore.prototype.groupCalc=function(){this.dvObj.groupCalc()};$MA.DataStore.prototype.find=function(a,b){return this.dvObj.find(a,b)};$MA.DataStore.prototype.appendRow=function(){return this.dvObj.appendRow()};$MA.DataStore.prototype.insertRow=function(a){return this.dvObj.insertRow(a)};$MA.DataStore.prototype.deleteRow=function(a){this.dvObj.deleteRow(a)};$MA.DataStore.prototype.setItem=function(a,b,c){this.dvObj.setItem(a,b,c)};
$MA.DataStore.prototype.loadFileData=function(a){var b=$MA.createXHR(),c=this;b.onreadystatechange=function(){4==b.readyState&&(200==b.status||304==b.status||0==b.status?(c.updateData(b.responseText),c=null):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};b.open("GET",a,!0);b.send(null)};
$MA.DataStore.prototype.updateData=function(a){if(a){var b;try{b=this.dataParser.parse(a)}catch(c){$MA.log.error($MA.getLocalisation(null,"Error_DataParsing","Data Parsing Error"));return}this.dvObj.setTableBuffer("display",b)}else void 0==this.dvObj.getTable().displayBuffer&&this.dvObj.setTableBuffer("display",[]);a&&this.refresh&&this.refresh();this.trigger("initialized",{id:this.id})};
$MA.DataView=function(a){$MA.DataStore.call(this);this.id=a;this.renderer=void 0;if(a=document.getElementById(a)){if(a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild);a.macontrol=this}};$MA.DataView.prototype=new $MA.DataStore;
$MA.DataView.prototype.createRenderer=function(a){if(void 0!=a){a._container=this;switch(a.style){case "graph":this.renderer=new $MA.DataView.GraphRenderer(this,a);break;case "canvas":this.renderer=new $MA.DataView.CanvasRenderer(this,a);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoDataViewStyle","Unsupported DataView Style"));return}this.renderer.create()}};$MA.DataView.prototype.getElement=function(a){return document.getElementById(this.id+"_"+a)};
$MA.DataView.prototype.refresh=function(){if(void 0!=this.dvObj.getTable().displayBuffer&&void 0!=this.renderer){this.renderer.refreshData();var a=document.getElementById(this.id);this.trigger("draw",a)}};$MA.DataView.prototype.refreshData=function(){void 0!=this.dvObj.getTable().displayBuffer&&void 0!=this.renderer&&this.renderer.refreshData(!0)};$MA.DataView.prototype.getGraphElem=function(){return document.getElementById(this.id).children[0]};
$MA.DataView.prototype.copyGraphTo=function(a){var b=this.getGraphElem();a.width=b.width;a.height=b.height;a.getContext("2d").drawImage(b,0,0)};$MA.DataView.ROWINFO_COLUMN=-1;$MA.DataView.DataRowFormat=function(){this.groupTrailer=this.groupHeader=void 0};$MA.DataView.DataRowFormat.prototype.isGroupHeader=function(a){var b=!1;void 0==a?b=void 0!=this.groupHeader:this.groupHeader&&(b=this.groupHeader._parent.level<=a);return b};
$MA.DataView.DataRowFormat.prototype.isGroupTrailer=function(a){var b=!1;void 0==a?b=void 0!=this.groupTrailer:this.groupTrailer&&(b=this.groupTrailer._parent.level<=a);return b};$MA.DataView.Object=function(a){this._parent=a};$MA.DataView.Object.prototype.getOwner=function(){for(var a=this;null!=a&&!(a instanceof $MA.DataView.DataViewObject);)a=a._parent;return a};$MA.DataView.Object.prototype.getRenderer=function(){var a=this.getOwner();if(a&&a._container)return a._container.renderer};
$MA.DataView.Object.prototype.getGraphOwner=function(){for(var a=this;null!=a&&!(a instanceof $MA.DataView.Graph);)a=a._parent;return a};$MA.DataView.GraphicObject=function(a){$MA.DataView.Object.call(this,a);this.name=void 0};$MA.DataView.GraphicObject.NAME=0;$MA.DataView.GraphicObject.propertyIds={name:$MA.DataView.GraphicObject.NAME};$MA.DataView.GraphicObject.prototype=new $MA.DataView.Object;
$MA.DataView.GraphicObject.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphicObject.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.DataView.GraphicObject.NAME:this.name=b}return!0};$MA.DataView.GraphicObject.prototype.getProperty=function(a){a=$MA.DataView.GraphicObject.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.DataView.GraphicObject.NAME:return this.name}};
$MA.DataView.Band=function(a,b){$MA.DataView.Object.call(this,a);this.background=void 0;this.graphicObjects=[];this.height=0;this.name=b};$MA.DataView.Band.prototype=new $MA.DataView.Object;$MA.DataView.Canvas=function(a){$MA.DataView.GraphicObject.call(this,a)};$MA.DataView.Canvas.prototype=new $MA.DataView.GraphicObject;$MA.DataView.DataViewObject=function(a){$MA.DataView.Object.call(this,a);this.gob=this.table=this.groups=void 0;this.style="";this.exprRow=0};
$MA.DataView.DataViewObject.CANVAS=0;$MA.DataView.DataViewObject.GRAPH=1;$MA.DataView.DataViewObject.GROUP=2;$MA.DataView.DataViewObject.STYLE=3;$MA.DataView.DataViewObject.TABLE=4;$MA.DataView.DataViewObject.propertyIds={canvas:$MA.DataView.DataViewObject.CANVAS,graph:$MA.DataView.DataViewObject.GRAPH,group:$MA.DataView.DataViewObject.GROUP,style:$MA.DataView.DataViewObject.STYLE,table:$MA.DataView.DataViewObject.TABLE};$MA.DataView.DataViewObject.prototype=new $MA.DataView.Object;
$MA.DataView.DataViewObject.prototype.createObject=function(a){a=$MA.DataView.DataViewObject.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.DataView.DataViewObject.CANVAS:this.gob=b=new $MA.DataView.Canvas(this);break;case $MA.DataView.DataViewObject.GRAPH:this.gob=b=new $MA.DataView.Graph(this);break;case $MA.DataView.DataViewObject.GROUP:void 0==this.groups&&(this.groups=[]);a=new $MA.DataView.Group(this);a.level=this.groups.length;this.groups.push(a);b=a;break;
case $MA.DataView.DataViewObject.TABLE:b=this.table=new $MA.DataView.Table(this)}return b};$MA.DataView.DataViewObject.prototype.getObject=function(a){var b=$MA.DataView.DataViewObject.propertyIds[a.toLowerCase()];if(void 0==b)return null;var c=null;switch(b){case $MA.DataView.DataViewObject.TABLE:c=null==this.table?this.createObject(a):this.table}return c};
$MA.DataView.DataViewObject.prototype.setProperty=function(a,b){var c=$MA.DataView.DataViewObject.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.DataView.DataViewObject.STYLE:this.style=b}return!0};$MA.DataView.DataViewObject.prototype.initialize=function(){this.gob instanceof $MA.DataView.Graph&&this.gob.initialize()};$MA.DataView.DataViewObject.prototype.getTable=function(a){var b=this.getGraphGob();return b?b.getTable(a):this.table};
$MA.DataView.DataViewObject.prototype.setTable=function(a,b){var c=this.getGraphGob();c?c.setTable(a,b):this.table=a};$MA.DataView.DataViewObject.prototype.findGroupChange=function(a,b,c,d){d=d||this.getTable();var e=d.getRowCount();if(a>=e)return-1;for(var f;a<e;){f=d.getRow(a);if(f=this.getRowInfo(f))if(c){if(f.groupHeader&&f.isGroupHeader(b))break}else if(f.groupTrailer&&f.isGroupTrailer(b))break;a++}b=-1;a<e&&(b=a);return b};
$MA.DataView.DataViewObject.prototype.findPriorGroupChange=function(a,b,c){var d=this.getTable(),e=d.getRowCount();if(a>=e)return-1;for(var f;0<=a;){f=d.getRow(a);if(f=this.getRowInfo(f))if(c){if(f.groupHeader&&f.isGroupHeader(b))break}else if(f.groupTrailer&&f.isGroupTrailer(b))break;a--}b=1;a<e&&(b=a);return b};$MA.DataView.DataViewObject.prototype.getGroupRow=function(a,b,c,d){for(var e=0,f=0,g;f<=a;)if(g=this.findGroupChange(e,b,c,d),0<=g)f++,e=g+1;else break;a=0;0<f&&(a=e-1);return a};
$MA.DataView.DataViewObject.prototype.getGroupCount=function(){for(var a=0,b=0,c=this.getTable().displayBuffer.length,d=this.groups?this.groups.length-1:0;b<c;)if(a=this.findGroupChange(a,d,!0),0<=a)b++,a++;else break;return b};$MA.DataView.DataViewObject.prototype.getRow=function(a,b){return this.getTable(b).getRow(a)};$MA.DataView.DataViewObject.prototype.getItem=function(a,b){return this.getTable(this.currentGraph).getRow(a)[b]};
$MA.DataView.DataViewObject.prototype.setItem=function(a,b,c){a=this.getTable().getRow(a);switch(this.getTable().columns[b].type){case $MA.TableColumnType.NUMBER:"number"==typeof c?a[b]=c:"string"==typeof c&&(a[b]=$MA.parseFloat(c));break;case $MA.TableColumnType.STRING:"string"==typeof c&&(a[b]=c);break;case $MA.TableColumnType.DATETIME:c instanceof Date?a[b]=c:"string"==typeof c&&(a[b]=$MA.parseDateTime(c))}};
$MA.DataView.DataViewObject.prototype.filter=function(a){var b=this.getTable(),c=b.displayBuffer,d=b.filteredBuffer,e;if(this.getTable().filteredBuffer)for(e=0;e<d.length;e++)c.push(d[e]);b.filteredBuffer=[];d=b.filteredBuffer;if(a){var f=$MA.Expression.parse(a,this);a=[];for(e=0;e<c.length;e++)this.exprRow=e,f.booleanValue()?a.push(c[e]):d.push(c[e])}else a=c;b.displayBuffer=a};
$MA.DataView.DataViewObject.prototype.setTableSortOrder=function(a){var b=this.getGraphGob(),c=null,d=b.getCategoryCount(),e;a=this.getTable(a);var f=b.getObject("Series");f&&(c=f.getProperty("sortorder"),c=f.getSortOrder(c),f=a.getColumn(f.getProperty("column")),c&&f.getProperty("sortorder")!==c&&(f.setProperty("sortorder",c),a.setDataFlag("dataChanged",!0)));if(1==d){if(c=b.getObject("Category"))e=c.getProperty("sortorder"),(c=c.getSortOrder(e))&&a.sortOrder!==c&&(a.sortOrder=c,a.setDataFlag("dataChanged",
!0))}else if(1<d&&(b=b.getObject("Categories"))&&"string"==typeof a.sortOrder){for(f=0;f<d;f++)c=b.list[f],e=c.getProperty("sortorder"),(c=c.getSortOrder(e))&&"a"!=c&&("string"==typeof a.sortOrder&&(a.sortOrder=[],a.setDataFlag("dataChanged",!0)),"p"==c&&($MA.log.warning("Partial order is not supported in an individual category of combination chart, reset it to default order: a"),c="a"),a.sortOrder[f]=c);if(a.sortOrder instanceof Array){for(f=0;f<d;f++)void 0==a.sortOrder[f]&&(a.sortOrder[f]="a");
for(f=0;f<d&&"n"==a.sortOrder[f];f++);f==d&&(a.sortOrder="n")}}};$MA.DataView.DataViewObject.prototype.getSortInfo=function(a){a=a.split(" ");if(0!=a.length){var b,c,d,e=[];for(d=0;d+1<a.length;d+=2)if(b=a[d].trim(),c=this.getTable().getColumn(b),b=a[d+1].trim().toLowerCase(),c)e.push([c.id,b]);else break;return e}};
$MA.DataView.DataViewObject.prototype.sort=function(a,b){if(void 0!=a){var c=this.getSortInfo(a);0!=c.length&&b.displayBuffer.sort(function(a,b){var f,g,h,k=0,l=c.length;for(f=0;f<l;f++){g=c[f][0];h=c[f][1];if("n"==h)if(a[g]==b[g])continue;else{k=a.originalIndex-b.originalIndex;break}var p=0,p="string"==typeof a[g]?a[g].localeCompare(b[g]):a[g]==b[g]?0:a[g]>b[g]?1:-1,p="a"==h?p:-p;0!==p&&(k=p,f=l)}return k})}};
$MA.DataView.DataViewObject.prototype.sortCategory=function(a,b,c){if(void 0!=b){var d=this.getSortInfo(b);0!=d.length&&c.displayBuffer.sort(function(b,c){var g,h,k,l,p=d.length;for(g=0;g<p;g++)if(h=d[g][0],k=d[0][1],0==g){var m=a[b[h]];h=a[c[h]];m!=h&&(l=m>h?"a"==k?1:-1:"a"==k?-1:1,g=p)}else b[h]!=c[h]&&(l=b[h]>c[h]?"a"==k?1:-1:"a"==k?-1:1,g=p);return l})}};
$MA.DataView.DataViewObject.prototype.groupCompare=function(a,b,c){this.exprRow=a;a=c.by.evaluate();this.exprRow=b;b=c.by.evaluate();return a instanceof Date&&b instanceof Date?a.getTime()==b.getTime()?0:a.getTime()>b.getTime()?1:-1:a==b?0:a>b?1:-1};$MA.DataView.DataViewObject.prototype.setGroupBreakStart=function(a,b){var c=new $MA.DataView.DataRowFormat;c.groupHeader=b.header;this.setRowInfo(a,c)};
$MA.DataView.DataViewObject.prototype.setGroupBreakEnd=function(a,b){var c=this.getRowInfo(a);void 0==c&&(c=new $MA.DataView.DataRowFormat);c.groupTrailer=b.trailer;this.setRowInfo(a,c)};$MA.DataView.DataViewObject.prototype.groupData=function(a,b){this.groups=[];var c=a.length,d,e,f;for(f=0;f<c;f++)e=a[f],d=this.createObject("Group"),d.createObject("Header"),d.createObject("Trailer"),e=new $MA.Expression.ColumnNode(b.getColumn(e).id,this,b),d.setProperty("By",e);b.groups=this.groups;this.groupCalc(b)};
$MA.DataView.DataViewObject.prototype.groupCalc=function(a){if(void 0!=a.groups&&0!=a.groups.length){var b=a.getRowCount(),c,d,e,f=a.groups.length;if(0<b){for(d=0;d<b;d++)this.setRowInfo(a.getRow(d),void 0);this.setGroupBreakStart(a.getRow(0),a.groups[0]);for(d=0;d<b-1;d++)for(e=0;e<f;e++)c=a.groups[e],0!=this.groupCompare(d,d+1,c)&&(this.setGroupBreakEnd(a.getRow(d),c),this.setGroupBreakStart(a.getRow(d+1),c),e=f);this.setGroupBreakEnd(a.getRow(b-1),a.groups[0])}}};
$MA.DataView.DataViewObject.prototype.find=function(a){var b=-1;if(a){a=$MA.Expression.parse(a,this);var c;for(c=this.getTable().displayBuffer.length-1;0<=c;c--)if(this.exprRow=c,a.booleanValue()){b=c;break}}return b};$MA.DataView.DataViewObject.prototype.createRow=function(){var a=this.getTable(),b=[],c=a.columns,d,e,f=c.length;for(e=0;e<f;e++)d=c[e],b[e]=d.type==$MA.TableColumnType.NUMBER?0:"";a.setDataFlag("dataChanged",!0);return b};
$MA.DataView.DataViewObject.prototype.appendRow=function(){var a=this.getTable(),b=this.createRow();a.displayBuffer.push(b);return a.displayBuffer.length-1};$MA.DataView.DataViewObject.prototype.insertRow=function(a){var b=this.createRow();this.getTable().displayBuffer.splice(a,0,b);return a};$MA.DataView.DataViewObject.prototype.deleteRow=function(a){var b=this.getTable();b.displayBuffer.splice(a,1);b.setDataFlag("dataChanged",!0)};
$MA.DataView.DataViewObject.prototype.getRowCount=function(){return this.getTable().displayBuffer?this.getTable().displayBuffer.length:0};$MA.DataView.DataViewObject.prototype.getGraphGob=function(){if(this.gob instanceof $MA.DataView.Graph)return this.gob};$MA.DataView.DataViewObject.prototype.getTableColumn=function(a){return this.getTable(this.currentGraph).getColumn(a)};$MA.DataView.DataViewObject.prototype.getTableColumns=function(){return this.getTable().columns};
$MA.DataView.DataViewObject.prototype.setTableColumns=function(a){this.getTable().columns=a};$MA.DataView.DataViewObject.prototype.getTableBuffer=function(a){var b=this.getTable(),c;"display"==a?c=b.displayBuffer:"filtered"==a&&(c=b.filteredBuffer);return c};$MA.DataView.DataViewObject.prototype.setTableBuffer=function(a,b){this.getTable().setDataBuffer(a,b)};$MA.DataView.DataViewObject.prototype.setExprRow=function(a){this.exprRow=a};
$MA.DataView.DataViewObject.prototype.setGroupBy=function(a,b){if(void 0!=this.groups)if(0<=a&&a<this.groups.length)this.groups[a].setProperty("By",b);else return null};
$MA.DataView.DataViewObject.prototype.initializeGraphData=function(a,b){var c=this.getGraphGob(),d=c.getChildrenCount(),e;e=0<d?c.getChildGob(0):c;var f=0,g,h;do{var k=e.getTable();b=e.getSeriesColumn();if(k.dataChangedFlag){if(k.sortOrder&&a){g=k.sortOrder instanceof Array;var l;g||(l=k.sortOrder);if(g||"p"!=l){h="";for(g=0;g<a.length;g++)h+=a[g],h+=" ",k.sortOrder instanceof Array&&(l=k.sortOrder[g]),h+=l,h+=" ";b&&(h+=b,g=e.getSeries(),h+=" "+(g.sortOrder||"a"));var p=h.indexOf(" n ");if(0<p||
"bubble"==e.graphType)for(g=0;g<k.displayBuffer.length;g++)k.displayBuffer[g].push(g);this.sort(h,k);if(0<p&&"bubble"!=e.graphType)for(g=0;g<k.displayBuffer.length;g++)k.displayBuffer[g].pop()}else if("p"==l){p=[];h=k.getRowCount();var m=k.displayBuffer;if(g=k.getColumn(c.category.column)){var n=g.id,q=0;for(g=0;g<h;g++)l=m[g][n],void 0==p[l]&&(p[l]=q++);l="a";h="";for(g=0;g<a.length;g++)h+=a[g],h+=" ",h+=l,h+=" ";this.sortCategory(p,h,k)}}}c.getSeriesExpr()&&this.groupData(a,k);k.dataChangedFlag=
!1}f++;f<d&&(e=c.getChildGob(f))}while(f<d)};$MA.DataView.DataViewObject.prototype.getRowInfo=function(a){if(a)return a[$MA.DataView.ROWINFO_COLUMN]};$MA.DataView.DataViewObject.prototype.setRowInfo=function(a,b){a&&(a[$MA.DataView.ROWINFO_COLUMN]=b)};$MA.DataView.DataViewObject.prototype.isGroupHeader=function(a,b){if(a){var c=this.getRowInfo(a);if(c)return c.isGroupHeader(b)}return!1};$MA.DataView.DataViewObject.prototype.isGroupTrailer=function(a,b){if(a){var c=this.getRowInfo(a);if(c)return c.isGroupTrailer(b)}return!1};
$MA.DataView.Graph=function(a){$MA.DataView.GraphicObject.call(this,a);this.animation="default";this.legend=this.graphType=void 0;this.offsetY=this.offsetX=this.spacing=0;this.title=void 0;this.scattered=this.suppliedTotals=this.parentAsTotal=this.showTotal=!1;this.values=this.series=this.category=void 0;this.firstItem=0;this.seriesExpr=this.categoryExpr=this.maxItems=void 0;this.valueExprs=[];this.groupExprs=[];this.table=this.query=void 0;this.children=[]};$MA.DataView.Graph.CATEGORY=0;
$MA.DataView.Graph.GRAPHTYPE=1;$MA.DataView.Graph.LEGEND=2;$MA.DataView.Graph.SERIES=3;$MA.DataView.Graph.TITLE=4;$MA.DataView.Graph.VALUES=5;$MA.DataView.Graph.LEGENDOFFSETX=6;$MA.DataView.Graph.LEGENDOFFSETY=7;$MA.DataView.Graph.CATEGORIES=8;$MA.DataView.Graph.ANIMATION=9;$MA.DataView.Graph.QUERY=10;$MA.DataView.Graph.SUBGRAPH=11;$MA.DataView.Graph.PIESTYLE=12;$MA.DataView.Graph.SHOWTOTAL=13;$MA.DataView.Graph.PARENTASTOTAL=14;$MA.DataView.Graph.SUPPLIEDTOTALS=15;$MA.DataView.Graph.SCATTERED=16;
$MA.DataView.Graph.propertyIds={category:$MA.DataView.Graph.CATEGORY,charttype:$MA.DataView.Graph.GRAPHTYPE,type:$MA.DataView.Graph.GRAPHTYPE,legend:$MA.DataView.Graph.LEGEND,series:$MA.DataView.Graph.SERIES,title:$MA.DataView.Graph.TITLE,values:$MA.DataView.Graph.VALUES,legendoffsetx:$MA.DataView.Graph.LEGENDOFFSETX,legendoffsety:$MA.DataView.Graph.LEGENDOFFSETY,categories:$MA.DataView.Graph.CATEGORIES,animation:$MA.DataView.Graph.ANIMATION,query:$MA.DataView.Graph.QUERY,chart:$MA.DataView.Graph.SUBGRAPH,
layer:$MA.DataView.Graph.SUBGRAPH,piestyle:$MA.DataView.Graph.PIESTYLE,showtotal:$MA.DataView.Graph.SHOWTOTAL,parentastotal:$MA.DataView.Graph.PARENTASTOTAL,suppliedtotals:$MA.DataView.Graph.SUPPLIEDTOTALS,scattered:$MA.DataView.Graph.SCATTERED};$MA.DataView.Graph.prototype=new $MA.DataView.GraphicObject;
$MA.DataView.Graph.prototype.createObject=function(a){var b;a=$MA.DataView.Graph.propertyIds[a.toLowerCase()];if(void 0!==a)switch(a){case $MA.DataView.Graph.CATEGORY:b=this.category=new $MA.DataView.GraphCategoryAxis(this);break;case $MA.DataView.Graph.CATEGORIES:b=this.categories=new $MA.DataView.GraphCategories(this);break;case $MA.DataView.Graph.SERIES:b=this.series=new $MA.DataView.GraphSeriesAxis(this);break;case $MA.DataView.Graph.VALUES:b=this.values=new $MA.DataView.GraphValues(this,"values");
break;case $MA.DataView.Graph.SUBGRAPH:b=new $MA.DataView.Graph(this),this.addChild(b)}return b};$MA.DataView.Graph.prototype.getObject=function(a){var b;a=$MA.DataView.Graph.propertyIds[a.toLowerCase()];if(void 0!==a)switch(a){case $MA.DataView.Graph.CATEGORIES:b=this.categories;break;case $MA.DataView.Graph.CATEGORY:b=this.category;break;case $MA.DataView.Graph.SERIES:b=this.series;break;case $MA.DataView.Graph.VALUES:b=this.values}return b};
$MA.DataView.Graph.prototype.setProperty=function(a,b){var c=$MA.DataView.Graph.propertyIds[a.toLowerCase()];if(void 0==c)return $MA.DataView.GraphicObject.prototype.setProperty.call(this,a,b);var d=b;switch(c){case $MA.DataView.Graph.PIESTYLE:"pie"===b&&(b="realpie");this.setChartType(b);break;case $MA.DataView.Graph.GRAPHTYPE:this.setChartType(b);break;case $MA.DataView.Graph.SHOWTOTAL:d=this.showTotal=$MA.parseBool(b);break;case $MA.DataView.Graph.PARENTASTOTAL:d=this.parentAsTotal=$MA.parseBool(b);
break;case $MA.DataView.Graph.SUPPLIEDTOTALS:d=this.suppliedTotals=$MA.parseBool(b);break;case $MA.DataView.Graph.TITLE:this.title=b;break;case $MA.DataView.Graph.LEGENDOFFSETX:this.legendOffsetX=b;break;case $MA.DataView.Graph.LEGENDOFFSETY:this.legendOffsetY=b;break;case $MA.DataView.Graph.LEGEND:this.legend=b;break;case $MA.DataView.Graph.ANIMATION:this.animation=b;break;case $MA.DataView.Graph.QUERY:if(this.query=b){var e=new $MA.DataView.Table(this);e.sourceType="query";this.table=e}break;case $MA.DataView.Graph.SCATTERED:d=
$MA.parseBool(b);if(void 0==d)return!1;d=this.scattered=d}(e=this.getRenderer())&&e.setProperty(c,d);return!0};
$MA.DataView.Graph.prototype.getProperty=function(a){var b,c=$MA.DataView.Graph.propertyIds[a.toLowerCase()];if(void 0==c)return $MA.DataView.GraphicObject.prototype.getProperty.call(this,a);switch(c){case $MA.DataView.Graph.ANIMATION:return this.animation;case $MA.DataView.Graph.GRAPHTYPE:b=this.getChartType();break;case $MA.DataView.Graph.SHOWTOTAL:b=this.showTotal;break;case $MA.DataView.Graph.PARENTASTOTAL:b=this.parentAsTotal;break;case $MA.DataView.Graph.SUPPLIEDTOTALS:b=this.suppliedTotals;
break;case $MA.DataView.Graph.PIESTYLE:b="pie"==this.graphType?"pie":"donut";break;case $MA.DataView.Graph.TITLE:b=this.title;break;case $MA.DataView.Graph.LEGENDOFFSETX:b=this.legendOffsetX;break;case $MA.DataView.Graph.LEGENDOFFSETY:b=this.legendOffsetY;break;case $MA.DataView.Graph.LEGEND:b=this.legend;break;case $MA.DataView.Graph.QUERY:b=this.query;break;case $MA.DataView.Graph.SCATTERED:b=this.scattered}return b};
$MA.DataView.Graph.prototype.getTable=function(a){var b;if(a=void 0!==a?this.getChildGob(a):this)b=a.table,b||((a=this.getChildGob(0))?(b=a.table)||(b=new $MA.DataView.Table(a)):this.query||(this.table=b=new $MA.DataView.Table(this)));return b};$MA.DataView.Graph.prototype.setTable=function(a,b){var c=void 0!==b?this.getChildGob(b):this;c&&(c.table=a)};$MA.DataView.Graph.prototype.getFirstItem=function(){return this.firstItem};
$MA.DataView.Graph.prototype.setFirstItem=function(a){if(0<=a){this.firstItem=a;var b=this.getChildrenCount(),c;for(c=0;c<b;c++)this.getChildGob(c).firstItem=a}};$MA.DataView.Graph.prototype.calcMaxItems=function(){var a=this.getOwner(),b=this.getTable().displayBuffer;if(void 0==b)return 0;var c;this.series?1<this.getCategoryCount()?c=b.length:a.groups&&(c=a.getGroupCount()):c=b.length;return c};
$MA.DataView.Graph.prototype.getMaxItems=function(){if(0==this.getOwner().getRowCount())return 0;void 0==this.maxItemsCustomized&&(this.maxItems=this.calcMaxItems());return 0==this.maxItems?2:this.maxItems};$MA.DataView.Graph.prototype.setMaxItems=function(a){this.maxItems=this.maxItemsCustomized=a;var b=this.getChildrenCount(),c;for(c=0;c<b;c++)this.getChildGob(c).maxItemsCustomized=a,this.getChildGob(c).maxItems=a};
$MA.DataView.Graph.prototype.getCategoryExpr=function(){if(this.categoryExpr)return this.categoryExpr;if(this.category)return this.categoryExpr=this.parseExpr(this.getOwner(),this.category.column)};$MA.DataView.Graph.prototype.setCategoryExpr=function(a){this.categoryExpr=a};
$MA.DataView.Graph.prototype.getValueExpr=function(a){if(this.valueExprs[a])return this.valueExprs[a];if(this.values&&this.values.list.length>a){var b=this.values.list[a];this.valueExprs[a]=this.parseExpr(this.getOwner(),b.expression);return this.valueExprs[a]}};$MA.DataView.Graph.prototype.setValueExpr=function(a,b){this.valueExprs[a]=b};$MA.DataView.Graph.prototype.getGroupExpr=function(a){if(this.groupExprs[a])return this.groupExprs[a]};$MA.DataView.Graph.prototype.addGroupExpr=function(a){this.groupExprs.push(a)};
$MA.DataView.Graph.prototype.removeGroupExpr=function(){this.groupExprs.pop()};$MA.DataView.Graph.prototype.getSeriesExpr=function(){if(this.seriesExpr)return this.seriesExpr;if(this.series)return this.seriesExpr=this.parseExpr(this.getOwner(),this.series.column)};$MA.DataView.Graph.prototype.setSeriesExpr=function(a){this.seriesExpr=a};$MA.DataView.Graph.prototype.getSeriesName=function(){var a=this.series;if(a){var b=a.displayName;void 0==b&&(b=a.column);return b}};
$MA.DataView.Graph.prototype.getSeriesColumn=function(){return this.series?this.series.column:null};$MA.DataView.Graph.prototype.getCategoryCount=function(){var a=0;this.categories&&this.categories.list?a=this.categories.list.length:this.category&&(a=1);return a};$MA.DataView.Graph.prototype.getCategoryObject=function(a){var b;this.categories&&this.categories.list.length>a?b=this.categories.list[a]:this.category&&0==a&&(b=this.category);return b};
$MA.DataView.Graph.prototype.getCategoryName=function(a){if(a=void 0==a?this.getCategoryObject(0):this.getCategoryObject(a)){var b=a.displayName;void 0==b&&(b=a.column);return b}};$MA.DataView.Graph.prototype.getCategoryColumn=function(a){return(a=void 0==a?this.getCategoryObject(0):this.getCategoryObject(a))?a.column:null};$MA.DataView.Graph.prototype.getCategoryFormat=function(a){if(a=void 0==a?this.getCategoryObject(0):this.getCategoryObject(a))return a.format};
$MA.DataView.Graph.prototype.getValueCount=function(){var a=0;this.values&&this.values.list&&(a=this.values.list.length);return a};$MA.DataView.Graph.prototype.getValueObject=function(a){if(this.values&&this.values.list.length>a)return this.values.list[a]};$MA.DataView.Graph.prototype.getValueName=function(a){a=void 0==a?this.getValueObject(0):this.getValueObject(a);var b=a.displayName;void 0==b&&(b=a.expression);return b};
$MA.DataView.Graph.prototype.getValueFormat=function(a){if(this.values&&this.values.list.length>a)return this.values.list[a].format};$MA.DataView.Graph.prototype.parseExpr=function(a,b){if(void 0!=b){var c=this.getTable(this.name),d=c.getColumn(b);d?c=new $MA.Expression.ColumnNode(d.id,a,c):(a.currentGraph=this.name,c=$MA.parseExpr(b,a,!0));return c}};$MA.DataView.Graph.prototype.resetExprs=function(){this.seriesExpr=this.categoryExpr=void 0;this.valueExprs=[];this.groupExprs=[]};
$MA.DataView.Graph.prototype.initialize=function(){this.categories&&0<this.categories.list.length&&(this.category=this.categories.list[0]);var a=this.getChildrenCount();3<=a&&this.children.sort(function(a,b){var c=0;if(!("line"!=a.graphType&&"verticalline"!=a.graphType||"line"!=b.graphType&&"verticalline"!=b.graphType))c=0;else if("line"==a.graphType||"verticalline"==a.graphType)c=1;else if("line"==b.graphType||"verticalline"==b.graphType)c=-1;return c});if(0<a){var b,c;for(b=0;b<a;b++)c=this.getChildGob(b),
c.categories=this.categories,c.category=this.category,0===b&&(this.series=c.series,this.values=c.values,this.graphType=c.graphType)}};$MA.DataView.Graph.prototype.getChartType=function(){var a=this.graphType;!a&&0<this.getChildrenCount()&&(a=this.getChildGob(0).graphType);"tablebar"===a?a="bar":"donut"===a&&(a="pie");return a};
$MA.DataView.Graph.prototype.setChartType=function(a){"string"===typeof a&&(a=a.toLowerCase(),"bar"===a?a="tablebar":"pie"===a?a="donut":"realpie"===a?a="pie":"scatter"===a&&(a="bubble"));this.graphType=a};$MA.DataView.Graph.prototype.getGraphTypes=function(){var a=[],b=this.getIterator(),c;do(c=b.next())&&c.graphType&&a.push({name:c.getName(),type:c.graphType});while(c);1<a.length&&a.shift();return a};$MA.DataView.Graph.prototype.getGraphType=function(){return this.graphType};
$MA.DataView.Graph.prototype.getName=function(){return this.getProperty("name")};$MA.DataView.Graph.prototype.getQuery=function(){return this.query};$MA.DataView.Graph.prototype.getQueries=function(){var a=[],b=this.getIterator(),c;do(c=b.next())&&c.query&&a.push({query:c.getQuery(),name:c.getName()});while(c);return a};$MA.DataView.Graph.prototype.getCategories=function(){return this.categories};$MA.DataView.Graph.prototype.setCategories=function(a){this.categories=a};
$MA.DataView.Graph.prototype.getCategory=function(){return this.category};$MA.DataView.Graph.prototype.setCategory=function(a){this.category=a};$MA.DataView.Graph.prototype.getSeries=function(){return this.series};$MA.DataView.Graph.prototype.setSeries=function(a){this.series=a};$MA.DataView.Graph.prototype.getValues=function(){return this.values};$MA.DataView.Graph.prototype.setValues=function(a){this.values=a};$MA.DataView.Graph.prototype.getChildrenCount=function(){return this.children.length};
$MA.DataView.Graph.prototype.getChildGob=function(a){var b;if("number"===typeof a&&0<=a&&a<this.children.length)b=this.children[a];else if("string"===typeof a)if(this.getName()===a)b=this;else{var c=this.children.length,d,e;for(d=0;d<c;d++)if(e=this.children[d],e.getName()===a){b=e;break}}else void 0===a&&(b=this);return b};$MA.DataView.Graph.prototype.addChild=function(a){if(a instanceof $MA.DataView.Graph){var b=a.getName();void 0!==b&&this.getChildGob(b)||(a._parent=this,this.children.push(a))}};
$MA.DataView.Graph.prototype.isChild=function(){return this._parent instanceof $MA.DataView.Graph};$MA.DataView.Graph.prototype.getIterator=function(){var a=-1,b=this;return{next:function(){var c=0<=a?b.children[a]:b;a++;return c}}};$MA.DataView.Graph.prototype.getOrigIndex=function(a){return void 0==a||"pie"!==this.graphType||"donut"!==this.graphType?void 0:this.getTable().displayBuffer[a].originalIndex};
$MA.DataView.Graph.prototype.getSecondaryAxis=function(){var a=this.getChildrenCount(),b,c;if(0<a){var d,e;for(d=0;d<a;d++)b=this.getChildGob(d),e=b.getObject("values"),(b=e.getProperty("secondaryAxis"))&&(c=e)}return c};$MA.DataView.GraphAxis=function(a,b){$MA.DataView.Object.call(this,a);this.name=b;this.locale=this.displayName=this.format=void 0};$MA.DataView.GraphAxis.DISPLAYNAME=0;$MA.DataView.GraphAxis.FORMAT=1;$MA.DataView.GraphAxis.SHOWLABEL=2;$MA.DataView.GraphAxis.SHOWPRIMARYLINE=3;
$MA.DataView.GraphAxis.SHOWGRID=4;$MA.DataView.GraphAxis.THICKNESS=5;$MA.DataView.GraphAxis.COLOR=6;$MA.DataView.GraphAxis.MIN=7;$MA.DataView.GraphAxis.MAX=8;$MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT=9;$MA.DataView.GraphAxis.MAXTHICKNESS=5;
$MA.DataView.GraphAxis.propertyIds={displayname:$MA.DataView.GraphAxis.DISPLAYNAME,format:$MA.DataView.GraphAxis.FORMAT,showlabel:$MA.DataView.GraphAxis.SHOWLABEL,showprimaryline:$MA.DataView.GraphAxis.SHOWPRIMARYLINE,showgrid:$MA.DataView.GraphAxis.SHOWGRID,thickness:$MA.DataView.GraphAxis.THICKNESS,color:$MA.DataView.GraphAxis.COLOR,min:$MA.DataView.GraphAxis.MIN,max:$MA.DataView.GraphAxis.MAX,displaytext:$MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT};$MA.DataView.GraphAxis.prototype=new $MA.DataView.Object;
$MA.DataView.GraphAxis.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphAxis.propertyIds[a.toLowerCase()];if(void 0==c)return!1;var d=b;switch(c){case $MA.DataView.GraphAxis.DISPLAYNAME:this.displayName=b;break;case $MA.DataView.GraphAxis.FORMAT:this.format=b;break;case $MA.DataView.GraphAxis.SHOWLABEL:d=this.showLabel=$MA.parseBool(b);break;case $MA.DataView.GraphAxis.SHOWPRIMARYLINE:d=this.showPrimaryLine=$MA.parseBool(b);break;case $MA.DataView.GraphAxis.SHOWGRID:d=this.showGrid=$MA.parseBool(b);
break;case $MA.DataView.GraphAxis.THICKNESS:this.thickness=parseFloat(b);d=this.thickness=this.thickness<=$MA.DataView.GraphAxis.MAXTHICKNESS?this.thickness:$MA.DataView.GraphAxis.MAXTHICKNESS;break;case $MA.DataView.GraphAxis.COLOR:this.color=b;break;case $MA.DataView.GraphAxis.MIN:d=this.min=$MA.parseFloat(b);break;case $MA.DataView.GraphAxis.MAX:d=this.max=$MA.parseFloat(b);break;case $MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT:this.valueDisplayText=b}var e=this.getRenderer();e&&e.setAxisProperty(c,
this.name,d);return!0};
$MA.DataView.GraphAxis.prototype.getProperty=function(a){a=$MA.DataView.GraphAxis.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.DataView.GraphAxis.DISPLAYNAME:return this.displayName;case $MA.DataView.GraphAxis.FORMAT:return this.format;case $MA.DataView.GraphAxis.SHOWLABEL:return this.showLabel;case $MA.DataView.GraphAxis.SHOWPRIMARYLINE:return this.showPrimaryLine;case $MA.DataView.GraphAxis.SHOWGRID:return this.showGrid;case $MA.DataView.GraphAxis.THICKNESS:return this.thickness;case $MA.DataView.GraphAxis.COLOR:return this.color;
case $MA.DataView.GraphAxis.MIN:return this.min;case $MA.DataView.GraphAxis.MAX:return this.max;case $MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT:return this.valueDisplayText}};$MA.DataView.GraphCategoryAxis=function(a){$MA.DataView.GraphAxis.call(this,a,"category");this.column=void 0};$MA.DataView.GraphCategoryAxis.COLUMN=0;$MA.DataView.GraphCategoryAxis.DISPLAY_LAST_CATEGORY=1;$MA.DataView.GraphCategoryAxis.SORTORDER=2;
$MA.DataView.GraphCategoryAxis.propertyIds={column:$MA.DataView.GraphCategoryAxis.COLUMN,displaylastlabel:$MA.DataView.GraphCategoryAxis.DISPLAY_LAST_CATEGORY,sortorder:$MA.DataView.GraphCategoryAxis.SORTORDER};$MA.DataView.GraphCategoryAxis.prototype=new $MA.DataView.GraphAxis;
$MA.DataView.GraphCategoryAxis.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphCategoryAxis.propertyIds[a.toLowerCase()];if(void 0==c)return $MA.DataView.GraphAxis.prototype.setProperty.call(this,a,b);var d=b;switch(c){case $MA.DataView.GraphCategoryAxis.COLUMN:this.column=b;break;case $MA.DataView.GraphCategoryAxis.DISPLAY_LAST_CATEGORY:d=this.displaylastcategorylabel=$MA.parseBool(b);break;case $MA.DataView.GraphCategoryAxis.SORTORDER:var e=this.getSortOrder(b);if(e)this.originalSortOrder=
b,this.sortOrder=e;else return $MA.log.error($MA.getLocalisation(null,"Error_DataParsing",b+" is valid sort order")),!1}if(e=this.getRenderer()){var f=this.getGraphOwner();e.setCategoryAxisProperty(c,this.name,d,f._parent instanceof $MA.DataView.Graph?f.name:void 0)}return!0};
$MA.DataView.GraphCategoryAxis.prototype.getProperty=function(a){var b=$MA.DataView.GraphCategoryAxis.propertyIds[a.toLowerCase()];if(void 0==b)return $MA.DataView.GraphAxis.prototype.getProperty.call(this,a);switch(b){case $MA.DataView.GraphCategoryAxis.COLUMN:return this.column;case $MA.DataView.GraphCategoryAxis.DISPLAY_LAST_CATEGORY:return this.displaylastcategorylabel;case $MA.DataView.GraphCategoryAxis.SORTORDER:return this.originalSortOrder}};
$MA.DataView.GraphCategoryAxis.prototype.getSortOrder=function(a){var b;if(a)switch(a.toLowerCase()){case "ascending":b="a";break;case "descending":b="d";break;case "partial":b="p";break;case "none":b="n"}return b};$MA.DataView.GraphValueAxis=function(a){$MA.DataView.GraphAxis.call(this,a,"values");this.expression=void 0};$MA.DataView.GraphValueAxis.EXPRESSION=0;$MA.DataView.GraphValueAxis.LOCALE=1;$MA.DataView.GraphValueAxis.PERCENTAGE=2;$MA.DataView.GraphValueAxis.SHAPE=3;
$MA.DataView.GraphValueAxis.SHAPEVALUE=4;$MA.DataView.GraphValueAxis.COLORVALUE=5;$MA.DataView.GraphValueAxis.propertyIds={expression:$MA.DataView.GraphValueAxis.EXPRESSION,percentage:$MA.DataView.GraphValueAxis.PERCENTAGE,colorvalue:$MA.DataView.GraphValueAxis.COLORVALUE,locale:$MA.DataView.GraphValueAxis.LOCALE,shape:$MA.DataView.GraphValueAxis.SHAPE,shapevalue:$MA.DataView.GraphValueAxis.SHAPEVALUE};$MA.DataView.GraphValueAxis.prototype=new $MA.DataView.GraphAxis;
$MA.DataView.GraphValueAxis.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphValueAxis.propertyIds[a.toLowerCase()];if(void 0==c)return $MA.DataView.GraphAxis.prototype.setProperty.call(this,a,b);switch(c){case $MA.DataView.GraphValueAxis.EXPRESSION:this.expression=b;break;case $MA.DataView.GraphValueAxis.LOCALE:this.locale=b;this.localeType="local";break;case $MA.DataView.GraphValueAxis.PERCENTAGE:this.percentage=b;break;case $MA.DataView.GraphValueAxis.SHAPE:this.shape=b;break;case $MA.DataView.GraphValueAxis.SHAPEVALUE:this.shapeValue=
b;break;case $MA.DataView.GraphValueAxis.COLORVALUE:this.value=b}var d=this.getRenderer();d&&d.setValueAxisProperty(c,this.name,b);return!0};
$MA.DataView.GraphValueAxis.prototype.getProperty=function(a){var b=$MA.DataView.GraphValueAxis.propertyIds[a.toLowerCase()];if(void 0==b)return $MA.DataView.GraphAxis.prototype.getProperty.call(this,a);switch(b){case $MA.DataView.GraphValueAxis.EXPRESSION:return this.expression;case $MA.DataView.GraphValueAxis.LOCALE:return this.locale;case $MA.DataView.GraphValueAxis.COLORVALUE:return this.value;case $MA.DataView.GraphValueAxis.PERCENTAGE:return this.percentage;case $MA.DataView.GraphValueAxis.SHAPE:return this.shape;
case $MA.DataView.GraphValueAxis.SHAPEVALUE:return this.shapeValue}};$MA.DataView.GraphSeriesAxis=function(a){$MA.DataView.Object.call(this,a);this.name="series";this.column=void 0};$MA.DataView.GraphSeriesAxis.COLUMN=0;$MA.DataView.GraphSeriesAxis.DISPLAYNAME=1;$MA.DataView.GraphSeriesAxis.FORMAT=2;$MA.DataView.GraphSeriesAxis.SORTORDER=3;
$MA.DataView.GraphSeriesAxis.propertyIds={column:$MA.DataView.GraphSeriesAxis.COLUMN,displayname:$MA.DataView.GraphSeriesAxis.DISPLAYNAME,format:$MA.DataView.GraphSeriesAxis.FORMAT,sortorder:$MA.DataView.GraphSeriesAxis.SORTORDER};$MA.DataView.GraphSeriesAxis.prototype=new $MA.DataView.GraphAxis;
$MA.DataView.GraphSeriesAxis.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphSeriesAxis.propertyIds[a.toLowerCase()];if(void 0==c)return $MA.DataView.GraphAxix.prototype.setProperty.call(this,a,b);switch(c){case $MA.DataView.GraphSeriesAxis.COLUMN:this.column=b;break;case $MA.DataView.GraphSeriesAxis.DISPLAYNAME:this.displayName=b;break;case $MA.DataView.GraphSeriesAxis.FORMAT:this.format=b;break;case $MA.DataView.GraphSeriesAxis.SORTORDER:var d=this.getSortOrder(b);if(d)this.originalSortOrder=
b,this.sortOrder=d;else return $MA.log.error($MA.getLocalisation(null,"Error_DataParsing",b+" is valid sort order")),!1}(d=this.getRenderer())&&d.setSeriesAxisProperty(c,this.name,b);return!0};
$MA.DataView.GraphSeriesAxis.prototype.getProperty=function(a){a=$MA.DataView.GraphSeriesAxis.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.DataView.GraphSeriesAxis.COLUMN:return this.column;case $MA.DataView.GraphSeriesAxis.DISPLAYNAME:return this.displayName;case $MA.DataView.GraphSeriesAxis.FORMAT:return this.format;case $MA.DataView.GraphSeriesAxis.SORTORDER:return this.originalSortOrder}};
$MA.DataView.GraphSeriesAxis.prototype.getSortOrder=function(a){var b;if(a)switch(a.toLowerCase()){case "ascending":b="a";break;case "descending":b="d";break;case "partial":b="p";break;case "none":b="n"}return b};$MA.DataView.GraphCategories=function(a){$MA.DataView.Object.call(this,a);this.list=[];this.display="all"};$MA.DataView.GraphCategories.CATEGORY=0;$MA.DataView.GraphCategories.objectIds={category:$MA.DataView.GraphCategories.CATEGORY};$MA.DataView.GraphCategories.SHOWLABEL=0;
$MA.DataView.GraphCategories.SHOWGRID=1;$MA.DataView.GraphCategories.SHOWPRIMARYLINE=2;$MA.DataView.GraphCategories.DISPLAY=3;$MA.DataView.GraphCategories.COLOR=5;$MA.DataView.GraphCategories.THICKNESS=6;$MA.DataView.GraphCategories.MAXTHICKNESS=5;
$MA.DataView.GraphCategories.propertyIds={showlabel:$MA.DataView.GraphCategories.SHOWLABEL,showgrid:$MA.DataView.GraphCategories.SHOWGRID,showprimaryline:$MA.DataView.GraphCategories.SHOWPRIMARYLINE,color:$MA.DataView.GraphCategories.COLOR,thickness:$MA.DataView.GraphCategories.THICKNESS,display:$MA.DataView.GraphCategories.DISPLAY};$MA.DataView.GraphCategories.prototype=new $MA.DataView.Object;
$MA.DataView.GraphCategories.prototype.createObject=function(a){var b=$MA.DataView.GraphCategories.objectIds[a.toLowerCase()];if(void 0==b)return null;a=null;switch(b){case $MA.DataView.GraphCategories.CATEGORY:a=b=new $MA.DataView.GraphCategoryAxis(this),this.list.push(b)}return a};
$MA.DataView.GraphCategories.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphCategories.propertyIds[a.toLowerCase()];if(void 0==c)return!1;var d=b;switch(c){case $MA.DataView.GraphCategories.SHOWLABEL:d=this.showLabel=$MA.parseBool(b);break;case $MA.DataView.GraphCategories.SHOWGRID:d=this.showGrid=$MA.parseBool(b);break;case $MA.DataView.GraphCategories.SHOWPRIMARYLINE:d=this.showPrimaryLine=$MA.parseBool(b);break;case $MA.DataView.GraphCategories.COLOR:this.color=b;break;case $MA.DataView.GraphCategories.THICKNESS:this.thickness=
$MA.parseFloat(b);d=this.thickness=this.thickness<=$MA.DataView.GraphCategories.MAXTHICKNESS?this.thickness:$MA.DataView.GraphCategories.MAXTHICKNESS;break;case $MA.DataView.GraphCategories.DISPLAY:this.display=b}var e=this.getRenderer();e&&e.setCategoriesProperty(c,d);return!0};
$MA.DataView.GraphCategories.prototype.getProperty=function(a,b){var c=$MA.DataView.GraphCategories.propertyIds[a.toLowerCase()];if(void 0!=c)switch(c){case $MA.DataView.GraphCategories.SHOWLABEL:return this.showLabel;case $MA.DataView.GraphCategories.SHOWGRID:return this.showGrid;case $MA.DataView.GraphCategories.SHOWPRIMARYLINE:return this.showPrimaryLine;case $MA.DataView.GraphCategories.COLOR:return this.color;case $MA.DataView.GraphCategories.THICKNESS:return this.thickness;case $MA.DataView.GraphCategories.DISPLAY:return this.display}};
$MA.DataView.GraphCategories.prototype.getDisplayName=function(a){return a>=this.list.length?"":this.list[a].getProperty("displayname")};$MA.DataView.GraphValues=function(a){$MA.DataView.Object.call(this,a);this.list=[]};$MA.DataView.GraphValues.VALUE=0;$MA.DataView.GraphValues.objectIds={value:$MA.DataView.GraphValues.VALUE};$MA.DataView.GraphValues.MIN=0;$MA.DataView.GraphValues.MAX=1;$MA.DataView.GraphValues.SHOWLABEL=2;$MA.DataView.GraphValues.SHOWGRID=3;
$MA.DataView.GraphValues.SHOWPRIMARYLINE=4;$MA.DataView.GraphValues.COLOR=5;$MA.DataView.GraphValues.THICKNESS=6;$MA.DataView.GraphValues.DISPLAY_TEXT=7;$MA.DataView.GraphValues.SECONDARYAXIS=8;$MA.DataView.GraphValues.PERCENTAGE=9;$MA.DataView.GraphValues.LOCALE=10;$MA.DataView.GraphValues.MAXTHICKNESS=5;
$MA.DataView.GraphValues.propertyIds={min:$MA.DataView.GraphValues.MIN,max:$MA.DataView.GraphValues.MAX,showlabel:$MA.DataView.GraphValues.SHOWLABEL,showgrid:$MA.DataView.GraphValues.SHOWGRID,showprimaryline:$MA.DataView.GraphValues.SHOWPRIMARYLINE,color:$MA.DataView.GraphValues.COLOR,thickness:$MA.DataView.GraphValues.THICKNESS,displaytext:$MA.DataView.GraphValues.DISPLAY_TEXT,secondaryaxis:$MA.DataView.GraphValues.SECONDARYAXIS,percentage:$MA.DataView.GraphValues.PERCENTAGE,locale:$MA.DataView.GraphValues.LOCALE};
$MA.DataView.GraphValues.prototype=new $MA.DataView.Object;$MA.DataView.GraphValues.prototype.createObject=function(a){var b=$MA.DataView.GraphValues.objectIds[a.toLowerCase()];if(void 0==b)return null;a=null;switch(b){case $MA.DataView.GraphValues.VALUE:a=b=new $MA.DataView.GraphValueAxis(this),this.list.push(b)}return a};
$MA.DataView.GraphValues.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphValues.propertyIds[a.toLowerCase()];if(void 0==c)return!1;var d=b;switch(c){case $MA.DataView.GraphValues.MIN:d=this.minVal=$MA.parseFloat(b);break;case $MA.DataView.GraphValues.MAX:d=this.maxVal=$MA.parseFloat(b);break;case $MA.DataView.GraphValues.SHOWLABEL:d=this.showLabel=$MA.parseBool(b);break;case $MA.DataView.GraphValues.SHOWGRID:d=this.showGrid=$MA.parseBool(b);break;case $MA.DataView.GraphValues.SHOWPRIMARYLINE:d=
this.showPrimaryLine=$MA.parseBool(b);break;case $MA.DataView.GraphValues.COLOR:this.color=b;break;case $MA.DataView.GraphValues.THICKNESS:this.thickness=$MA.parseFloat(b);d=this.thickness=this.thickness<=$MA.DataView.GraphValues.MAXTHICKNESS?this.thickness:$MA.DataView.GraphValues.MAXTHICKNESS;break;case $MA.DataView.GraphValues.DISPLAY_TEXT:this.displayText=b;break;case $MA.DataView.GraphValues.SECONDARYAXIS:d=this.secondaryAxis=$MA.parseBool(b);break;case $MA.DataView.GraphValues.PERCENTAGE:this.percentage=
b;break;case $MA.DataView.GraphValues.LOCALE:this.locale=b;var e,f=this.list.length;for(e=0;e<f;e++)"global"===this.list[e].localeType&&(this.list[e].locale=b)}if(e=this.getRenderer())f=this.getGraphOwner(),e.setValuesProperty(c,d,f._parent instanceof $MA.DataView.Graph?f.name:void 0);return!0};
$MA.DataView.GraphValues.prototype.getProperty=function(a,b){var c=$MA.DataView.GraphValues.propertyIds[a.toLowerCase()];if(void 0!=c)switch(c){case $MA.DataView.GraphValues.MIN:return this.minVal;case $MA.DataView.GraphValues.MAX:return this.maxVal;case $MA.DataView.GraphValues.SHOWLABEL:return this.showLabel;case $MA.DataView.GraphValues.SHOWGRID:return this.showGrid;case $MA.DataView.GraphValues.SHOWPRIMARYLINE:return this.showPrimaryLine;case $MA.DataView.GraphValues.COLOR:return this.color;case $MA.DataView.GraphValues.THICKNESS:return this.thickness;
case $MA.DataView.GraphValues.DISPLAY_TEXT:return this.displayText;case $MA.DataView.GraphValues.SECONDARYAXIS:return this.secondaryAxis;case $MA.DataView.GraphValues.PERCENTAGE:return this.percentage;case $MA.DataView.GraphValues.LOCALE:return this.locale}};$MA.DataView.GraphValues.prototype.getDisplayName=function(a){return a>=this.list.length?"":this.list[a].getProperty("displayname")};
$MA.DataView.GraphValues.prototype.getBubbleChartOtherValuesDisplayName=function(a){if(""==a)return"";var b,c;for(c=0;c<this.list.length;c++)if(this.list[c].getProperty("expression").toLowerCase()==a&&(b=this.list[c].getProperty("displayname"),""!=b))return b;""==b&&("width"==a&&1<this.list.length)&&(b=this.list[1].getProperty("displayname"));return b};$MA.DataView.Group=function(a){$MA.DataView.Object.call(this,a);this.by=void 0;this.level=0;this.trailer=this.header=void 0};
$MA.DataView.Group.BY=0;$MA.DataView.Group.HEADER=1;$MA.DataView.Group.LEVEL=2;$MA.DataView.Group.TRAILER=3;$MA.DataView.Group.propertyIds={by:$MA.DataView.Group.BY,header:$MA.DataView.Group.HEADER,level:$MA.DataView.Group.LEVEL,trailer:$MA.DataView.Group.TRAILER};$MA.DataView.Group.prototype=new $MA.DataView.Object;
$MA.DataView.Group.prototype.createObject=function(a){a=$MA.DataView.Group.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.DataView.Group.HEADER:b=this.header=new $MA.DataView.Band(this,"groupheader");break;case $MA.DataView.Group.TRAILER:b=this.trailer=new $MA.DataView.Band(this,"grouptrailer")}return b};
$MA.DataView.Group.prototype.setProperty=function(a,b){var c=$MA.DataView.Group.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.DataView.Group.BY:if(b instanceof $MA.Expression.ColumnNode)this.by=b;else{var c=this.getOwner(),d=c.getTable().getColumn(b);this.by=d?new $MA.Expression.ColumnNode(d.id,c):$MA.parseExpr(b,c,!0)}break;case $MA.DataView.Group.LEVEL:this.level=parseInt(b,10)}return!0};
$MA.DataView.Table=function(a){$MA.DataView.Object.call(this,a);this.fileType=this.sourceType=void 0;this.headerRow=!1;this.url=void 0;this.columns=[];this.filteredBuffer=this.displayBuffer=void 0;this.dataChangedFlag=!1;this.sortOrder="a"};$MA.DataView.Table.COLUMN=0;$MA.DataView.Table.SOURCETYPE=1;$MA.DataView.Table.FILETYPE=2;$MA.DataView.Table.HEADERROW=3;$MA.DataView.Table.URL=4;
$MA.DataView.Table.propertyIds={column:$MA.DataView.Table.COLUMN,sourcetype:$MA.DataView.Table.SOURCETYPE,filetype:$MA.DataView.Table.FILETYPE,headerrow:$MA.DataView.Table.HEADERROW,url:$MA.DataView.Table.URL};$MA.DataView.Table.prototype=new $MA.DataView.Object;
$MA.DataView.Table.prototype.createObject=function(a){var b=$MA.DataView.Table.propertyIds[a.toLowerCase()];if(void 0==b)return null;a=null;switch(b){case $MA.DataView.Table.COLUMN:a=b=new $MA.DataView.TableColumn(this),b.id=this.columns.length,this.columns.push(b)}return a};
$MA.DataView.Table.prototype.setProperty=function(a,b){var c=$MA.DataView.Table.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.DataView.Table.SOURCETYPE:this.sourceType=b;break;case $MA.DataView.Table.FILETYPE:this.fileType=b;break;case $MA.DataView.Table.HEADERROW:this.headerRow=$MA.parseBool(b);break;case $MA.DataView.Table.URL:this.url=b}return!0};
$MA.DataView.Table.prototype.getProperty=function(a){a=$MA.DataView.Table.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.DataView.Table.SOURCETYPE:return this.sourceType;case $MA.DataView.Table.FILETYPE:return this.fileType;case $MA.DataView.Table.HEADERROW:return this.headerRow;case $MA.DataView.Table.URL:return this.url}};$MA.DataView.Table.prototype.createDataBuffer=function(a){if(void 0!=a){var b;"display"==a?b=this.displayBuffer=[]:"filtered"==a&&(b=this.filteredBuffer=[]);return b}};
$MA.DataView.Table.prototype.setDataBuffer=function(a,b){void 0!=a&&("display"==a?(this.displayBuffer=b,this.setDataFlag("dataChanged",!0)):"filtered"==a&&(this.filteredBuffer=b))};$MA.DataView.Table.prototype.getDataBuffer=function(a){if(void 0!=a){var b;"display"==a?b=this.displayBuffer:"filtered"==a&&(b=this.filteredBuffer);return b}};
$MA.DataView.Table.prototype.addColumn=function(a,b,c){var d=this.createObject("Column");d.name=b;d.type=d.getTableColumnType(a);void 0==d.type&&$MA.log.error($MA.getLocalisation(null,"Error_NoColumnType","Unsupported Column Type")+" - "+a);d.displayName=c?c:b};$MA.DataView.Table.prototype.getColumns=function(){return this.columns};
$MA.DataView.Table.prototype.addRow=function(a){var b=[];if(void 0!=a){var c,d;if(a instanceof Array){b.originalIndex=this.displayBuffer.length;var e=a.length;for(c=0;c<e;c++)d=a[c],this.columns[c].type==$MA.TableColumnType.DATETIME?d&&"string"==typeof d?b.push($MA.parseDateTime(d)):b.push(d):this.columns[c].type==$MA.TableColumnType.NUMBER?d&&"string"==typeof d?b.push($MA.parseFloat(d)):b.push(d):b.push(d)}else if("object"==typeof a)for(e in b.originalIndex=this.displayBuffer.length,c=0,a)d=a[e],
this.columns[c].type==$MA.TableColumnType.DATETIME?d&&"string"==typeof d?b.push($MA.parseDateTime(d)):b.push(d):this.columns[c].type==$MA.TableColumnType.NUMBER?d&&"string"==typeof d?b.push($MA.parseFloat(d)):b.push(d):b.push(d),c++}this.displayBuffer.push(b);this.setDataFlag("dataChanged",!0)};$MA.DataView.Table.prototype.getColumn=function(a){if(void 0!=a){var b;for(b=0;b<this.columns.length;b++)if(this.columns[b].name==a)return this.columns[b]}};
$MA.DataView.Table.prototype.getRow=function(a){return void 0==this.displayBuffer||0>a||a>this.displayBuffer.length-1?void 0:this.displayBuffer[a]};$MA.DataView.Table.prototype.setDataFlag=function(a,b){"dataChanged"==a&&(this.dataChangedFlag=b)};$MA.DataView.Table.prototype.getRowCount=function(){var a=0;this.displayBuffer&&(a=this.displayBuffer.length);return a};
$MA.DataView.TableColumn=function(a){$MA.DataView.Object.call(this,a);this.sortOrder=this.values=this.type=this.displayName=this.name=void 0};$MA.DataView.TableColumn.DISPLAYNAME=0;$MA.DataView.TableColumn.NAME=1;$MA.DataView.TableColumn.DATATYPE=2;$MA.DataView.TableColumn.PATH=3;$MA.DataView.TableColumn.SORTORDER=4;
$MA.DataView.TableColumn.propertyIds={displayName:$MA.DataView.TableColumn.DISPLAYNAME,name:$MA.DataView.TableColumn.NAME,type:$MA.DataView.TableColumn.DATATYPE,path:$MA.DataView.TableColumn.PATH,sortorder:$MA.DataView.TableColumn.SORTORDER};$MA.DataView.TableColumn.prototype=new $MA.DataView.Object;
$MA.DataView.TableColumn.prototype.setProperty=function(a,b){var c=$MA.DataView.TableColumn.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.DataView.TableColumn.DISPLAYNAME:this.displayName=b;break;case $MA.DataView.TableColumn.NAME:this.name=b;break;case $MA.DataView.TableColumn.DATATYPE:this.type=this.getTableColumnType(b);break;case $MA.DataView.TableColumn.PATH:this.path=b;break;case $MA.DataView.TableColumn.SORTORDER:this.sortOrder=b}return!0};
$MA.DataView.TableColumn.prototype.getProperty=function(a){a=$MA.DataView.TableColumn.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.DataView.TableColumn.DISPLAYNAME:return this.displayName;case $MA.DataView.TableColumn.NAME:return this.name;case $MA.DataView.TableColumn.DATATYPE:return this.getTableColumnString();case $MA.DataView.TableColumn.PATH:return this.path;case $MA.DataView.TableColumn.SORTORDER:return this.sortOrder}};
$MA.DataView.TableColumn.prototype.getTableColumnType=function(a){var b;"string"==a?b=$MA.TableColumnType.STRING:"number"==a?b=$MA.TableColumnType.NUMBER:"datetime"==a&&(b=$MA.TableColumnType.DATETIME);return b};$MA.DataView.TableColumn.prototype.getTableColumnString=function(){switch(this.type){case $MA.TableColumnType.STRING:return"string";case $MA.TableColumnType.NUMBER:return"number";case $MA.TableColumnType.DATETIME:return"datetime"}};$MA.DataView.XmlMetaDataReader=function(){};
$MA.DataView.XmlMetaDataReader.prototype.parse=function(a,b){var c=(new DOMParser).parseFromString(b,"text/xml");this.visitElement(a,c.documentElement)};
$MA.DataView.XmlMetaDataReader.prototype.visitElement=function(a,b){var c=b.attributes,d;for(d=0;d<c.length;d++){var e=c[d],f=e.name,e=e.value;a.setProperty(f,e)||$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+f+"="+e)}c=b.childNodes;for(d=0;d<c.length;d++)if(f=c[d],1==f.nodeType){var e=f.tagName,g=a.createObject(e);null!=g?this.visitElement(g,f):$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+e)}};$MA.DataView.JsonMetaDataReader=function(){};
$MA.DataView.JsonMetaDataReader.prototype.parse=function(a,b){return this.parseObject(a,b)};$MA.DataView.JsonMetaDataReader.prototype.parseObject=function(a,b){var c,d;for(c in b)if(d=b[c],d instanceof Array)this.parseArray(a,d,c);else if("object"==typeof d){var e=a.createObject(c);null!=e?this.parseObject(e,d):$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+c)}else a.setProperty(c,d)||$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+c+"="+d)};
$MA.DataView.JsonMetaDataReader.prototype.parseArray=function(a,b,c){var d,e,f=b.length;for(d=0;d<f;d++){e=b[d];var g=a.createObject(c);this.parseObject(g,e)}};$MA.DataView.Data=function(){};$MA.DataView.Data.Parser=function(a){this.table=a};$MA.DataView.Data.Parser.prototype.parseValue=function(a,b){switch(b){case $MA.TableColumnType.NUMBER:return $MA.parseFloat(a);case $MA.TableColumnType.STRING:return a;case $MA.TableColumnType.DATETIME:return $MA.parseDateTime(a);default:return a}};
$MA.DataView.Data.CsvParser=function(a){$MA.DataView.Data.Parser.call(this,a)};$MA.DataView.Data.CsvParser.prototype=new $MA.DataView.Data.Parser;
$MA.DataView.Data.CsvParser.prototype.parse=function(a){var b=this.table.columns,c=[],d=0,e=!1,f,g;try{this.headerRow&&(f=a.indexOf("\n",d),-1==f?e=!0:d=f+1);do{f=a.indexOf("\n",d);-1==f&&(e=!0,f=a.length);g=a.substring(d,f);d=f+1;if(null==g||0==g.length)break;var h=[],k,l,p=0;for(l=0;l<b.length;l++)'"'==g.charAt(p)?(f=g.indexOf('"',p+1),k=-1==f?g.substring(p,g.length):g.substring(p+1,f),p=f+2):(f=g.indexOf(",",p),k=-1==f?g.substring(p,g.length):g.substring(p,f),p=f+1),h.push(this.parseValue(k,b[l].type));
c.push(h)}while(!e)}catch(m){$MA.log.error($MA.getLocalisation(null,"Error_DataParsing","Data Parsing Error"))}return c};$MA.DataView.Data.JsonParser=function(a){$MA.DataView.Data.Parser.call(this,a)};$MA.DataView.Data.JsonParser.prototype=new $MA.DataView.Data.Parser;
$MA.DataView.Data.JsonParser.prototype.parse=function(a){var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=this.table.columns,d=[],e=0,f=!1,g,h;a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))try{b=!0;if("["!=a.charAt(0)){g=a.indexOf(":",e);if(-1==g)throw new SyntaxError("JSON.parse");e=g+1;b=!1}g=a.indexOf("[",e);if(-1==g)throw new SyntaxError("JSON.parse");e=g+1;g=a.indexOf("{",e);if(-1!=g){e=g+1;do{g=a.indexOf("}",e);-1==g&&(f=!0,g=a.length);h=a.substring(e,g);e=g+1;if(null==h||0==h.length)break;var k=[],l=eval("({"+h+"})"),p,m,n;for(n=0;n<c.length;n++){p=c[n].name;if(c[n].type==$MA.TableColumnType.DATETIME){var q=l[p].substring(6);m=new Date(parseInt(q,10))}else m=l[p];k.push(m)}d.push(k);
g=a.indexOf("{",e);if(-1==g){g=a.indexOf("]",e);if(-1==g)throw new SyntaxError("JSON.parse");e=g+1;g=a.indexOf("}",e);if(-1==g&&!b)throw new SyntaxError("JSON.parse");f=!0}else e=g+1}while(!f)}}catch(s){$MA.log.error(s)}return d};$MA.DataView.Data.XmlParser=function(a){$MA.DataView.Data.Parser.call(this,a)};$MA.DataView.Data.XmlParser.prototype=new $MA.DataView.Data.Parser;
$MA.DataView.Data.XmlParser.prototype.parse=function(a){a=(new DOMParser).parseFromString(a,"text/xml");var b=[];this.visitRowElement(b,a.documentElement);return b};$MA.DataView.Data.XmlParser.prototype.visitRowElement=function(a,b){var c,d=b.childNodes;for(c=0;c<d.length;c++){var e=d[c];1==e.nodeType&&this.visitItemElement(a,e)}};
$MA.DataView.Data.XmlParser.prototype.visitItemElement=function(a,b){var c=this.table.columns,d=b.childNodes,e=[],f,g=0;for(f=0;f<d.length;f++){var h=d[f];1==h.nodeType&&e.push(this.parseValue(h.textContent,c[g++].type))}a.push(e)};$MA.DataTable=function(){var a=new $MA.DataView.Table;a.dataSource="query";a.createDataBuffer("display");this.table=a};
$MA.DataTable.prototype.setProperty=function(a,b,c){void 0!=a&&(void 0==b||null==b?void 0!=this.table[a]&&delete this.table[a]:b&&"string"==typeof b&&("datetime"==c?b=$MA.parseDateTime(b):"number"==c&&(b=parseFloat(b)),this.table[a]=b))};$MA.DataTable.prototype.getProperty=function(a){return this.table[a]};$MA.DataTable.prototype.addColumn=function(a,b){this.table.addColumn(b,a)};
$MA.DataTable.prototype.addRow=function(a){$MA.log.debug($MA.TRACE_LEVEL1,"$MA.DataTable.addRow "+$MA.getLocalisation(null,"Start","Start")+" "+JSON.stringify(a));this.table.addRow(a);$MA.log.debug($MA.TRACE_LEVEL1,"$MA.DataTable.addRow "+$MA.getLocalisation(null,"End","End"))};
$MA.DataTable.prototype.addRows=function(a){$MA.log.debug($MA.TRACE_LEVEL1,"$MA.DataTable.addRows "+$MA.getLocalisation(null,"Start","Start")+" "+JSON.stringify(a));if(void 0!=a)if(a instanceof Array){var b,c=a.length;for(b=0;b<c;b++)this.table.addRow(a[b])}else if("object"==typeof a)for(b in a)c=a[b],"function"!=typeof c&&this.table.addRow(c);$MA.log.debug($MA.TRACE_LEVEL1,"$MA.DataTable.addRow"+$MA.getLocalisation(null,"End"," End"))};
$MA.DataTable.prototype.getNumberOfRows=function(){var a=0;this.table.displayBuffer&&(a=this.table.displayBuffer.length);return a};$MA.DataTable.prototype.getNumberOfColumns=function(){var a=0;this.table.columns&&(a=this.table.columns.length);return a};$MA.DataTable.prototype.refresh=function(){void 0!=this.callback&&this.callback.refresh()};$MA.DataTable.prototype.getTable=function(){return this.table};$MA.DataTable.prototype.setCallBack=function(a){this.callback=a};
$MA.DataTable.prototype.setData=function(a,b){var c;switch(a){case "csv":c=new $MA.DataView.Data.CsvParser(this.table);break;case "json":c=new $MA.DataView.Data.JsonParser(this.table);break;case "xml":c=new $MA.DataView.Data.XmlParser(this.table);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoFileType","Unsupported File Type"));return}c=c.parse(b);this.table.setDataBuffer("display",c);this.refresh()};$MA.FileDataTable=function(){$MA.DataTable.call(this)};
$MA.FileDataTable.prototype=new $MA.DataTable;
$MA.FileDataTable.prototype.setData=function(a,b){var c=$MA.createXHR();if(void 0!=c){var d=this;c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||304==c.status||0==c.status){var e;switch(a){case "csv":e=new $MA.DataView.Data.CsvParser(d.table);break;case "json":e=new $MA.DataView.Data.JsonParser(d.table);break;case "xml":e=new $MA.DataView.Data.XmlParser(d.table);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoFileType","Unsupported File Type"));return}e=e.parse(c.responseText);
d.table.setDataBuffer("display",e);d.refresh();d=null}else $MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+b)};c.open("GET",b,!0);c.send(null)}};$MA.DataView.HtmlRenderer=function(a,b){this._parent=a;this.dvObj=b;a&&(this.id=a.id)};$MA.DataView.HtmlRenderer.prototype.create=function(){var a=document.getElementById(this.id),a=this.createGobElem(a,this.dvObj.gob);this.initialize(a,this.dvObj.gob)};$MA.DataView.HtmlRenderer.prototype.initialize=function(a,b){};
$MA.DataView.HtmlRenderer.prototype.createGobElem=function(a,b){var c=document.createElement("canvas");c.id=this.getGobElementId(b);c.className="graph";c.style.position="absolute";var d=document.getElementById(this.id);c.style.left="0px";c.style.top="0px";c.height=d.offsetHeight;c.width=d.offsetWidth;a.appendChild(c);return c};$MA.DataView.HtmlRenderer.prototype.getGobElementId=function(a){return this.id+"_"+a.name};$MA.DataView.CanvasRenderer=function(a,b){$MA.DataView.HtmlRenderer.call(this,a,b)};
$MA.DataView.CanvasRenderer.prototype=new $MA.DataView.HtmlRenderer;$MA.DataView.CanvasRenderer.prototype.refreshData=function(){if(void 0!=this.dvObj.getTable().displayBuffer){var a=document.getElementById(this.id),b=a.children[0];a.offsetWidth!=b.offsetWidth&&(b.width=a.offsetWidth);a.offsetHeight!=b.offsetHeight&&(b.height=a.offsetHeight)}};$MA.DataView.GraphRenderer=function(a,b){$MA.DataView.HtmlRenderer.call(this,a,b)};$MA.DataView.GraphRenderer.prototype=new $MA.DataView.HtmlRenderer;
$MA.DataView.GraphRenderer.prototype.initialize=function(a,b){var c=new $MA.Graph(a.id,b.getGraphTypes());c.setProperty("Animation",b.animation);c.setLegendProperty("legend",b.legend);c.setLegendProperty("legendoffset",[b.legendOffsetX,b.legendOffsetY]);b.categories?this.initialzeGraphCategoryAxis(c,b.categories):this.initialzeGraphCategoryAxis(c,b.category);var d=b.getChildrenCount();if(0<d){var e,f;for(e=0;e<d;e++)f=b.getChildGob(e),this.initialzeGraphValuesAxis(c,f.getObject("values"),f.getName()),
this.initialzeGraphSeriesAxis(c,f.series,f.getName())}else d=b.getValueObject(0),e=this.getLocaleDef(b),void 0!==d&&(d.locale=e[0],d.localeType=e[1],this.initialzeGraphValuesAxis(c,b.getObject("values"))),this.initialzeGraphSeriesAxis(c,b.series);a.macontrol=c};
$MA.DataView.GraphRenderer.prototype.initGraphData=function(){var a=this.dvObj,b=a.getGraphGob(),c=document.getElementById(this.getGobElementId(b,1)),d=c.macontrol;d.resetData();d.width=c.offsetWidth;d.numberOfVisibleCategory=a._parent._parent.numberOfVisibleCategory;var c=b.getChildrenCount(),e;this.itemIncr=1;for(e=-1;e<c;e++){var f;if(-1==e)if(0==c)f=b;else continue;else f=b.getChildGob(e);this.initSubGraphData(d,a,b,f)}d.setProperty("ItemIncr",this.itemIncr)};
$MA.DataView.GraphRenderer.prototype.initSubGraphData=function(a,b,c,d){var e=d.getGraphType(),f=d.getTable();if(0<f.displayBuffer.length){var g={},h=f.upperThreshold;void 0!=h&&(g.upperThreshold=h);h=f.lowerThreshold;void 0!=h&&(g.lowerThreshold=h);h=f.reference;void 0!=h&&(g.reference=h);f=f.trendCategory;void 0!=f&&(g.trendCategory=f);a.setTrendReference(g);(void 0==d.series?"bubble"==e?new $MA.DataView.MultipleValueGraphData:new $MA.DataView.SingleSeriesGraphData:new $MA.DataView.MultipleSeriesGraphData).create(a,
b,c,d)}};$MA.DataView.GraphRenderer.prototype.refreshData=function(a){a=void 0==a?!1:a;if(void 0!=this.dvObj.getTable().displayBuffer){var b=document.getElementById(this.id);if(b){var c=b.children[0];c&&(b.offsetWidth!=c.offsetWidth&&(c.width=b.offsetWidth),b.offsetHeight!=c.offsetHeight&&(c.height=b.offsetHeight),this.initGraphData(),a||this.getGraph().refresh(c))}}};
$MA.DataView.GraphRenderer.prototype.initialzeGraphCategoryAxis=function(a,b,c){void 0!=b&&(b.list?(b.list[0].format&&a.setAxisProperty("Format","category",b.list[0].format,c),b.list[0].displayName&&a.setAxisProperty("Label","category",b.list[0].displayName,c),void 0!=b.list[0].min&&a.setCategoryAxisProperty("CategoryAxisMin",b.list[0].min,c),void 0!=b.list[0].max&&a.setCategoryAxisProperty("CategoryAxisMax",b.list[0].max,c),void 0!=b.list[0].showGrid?a.setAxisProperty("MajorGridLine","category",
b.list[0].showGrid,c):a.setAxisProperty("MajorGridLine","category",!1,c),void 0!=b.list[0].showLabel&&a.setAxisProperty("AxisLabelVisibility","category",b.list[0].showLabel,c),void 0!=b.list[0].showPrimaryLine&&a.setAxisProperty("PrimaryLine","category",b.list[0].showPrimaryLine,c),void 0!=b.list[0].thickness&&a.setAxisProperty("PrimaryLineThickness","category",b.list[0].thickness,c),b.list[0].color&&(a.setAxisProperty("PrimaryLineColor","category",b.list[0].color,c),a.setAxisProperty("axisfontbrush",
"category",b.list[0].color,c)),void 0!=b.list[0].displaylastcategorylabel&&a.setAxisProperty("DisplayLastCategoryLabel","category",b.list[0].displaylastcategorylabel,c),b.list[0].sortOrder&&"string"==typeof this.dvObj.getTable().sortOrder&&(this.dvObj.getTable().sortOrder=b.list[0].sortOrder)):(b.format&&a.setAxisProperty("Format","category",b.format,c),b.displayName&&a.setAxisProperty("Label","category",b.displayName,c),void 0!=b.min&&a.setCategoryAxisProperty("CategoryAxisMin",b.min,c),void 0!=
b.max&&a.setCategoryAxisProperty("CategoryAxisMax",b.max,c),void 0!=b.showGrid?a.setAxisProperty("MajorGridLine","category",b.showGrid,c):a.setAxisProperty("MajorGridLine","category",!1,c),void 0!=b.showLabel&&a.setAxisProperty("AxisLabelVisibility","category",b.showLabel,c),void 0!=b.showPrimaryLine&&a.setAxisProperty("PrimaryLine","category",b.showPrimaryLine,c),void 0!=b.thickness&&a.setAxisProperty("PrimaryLineThickness","category",b.thickness,c),b.color&&(a.setAxisProperty("PrimaryLineColor",
"category",b.color,c),a.setAxisProperty("axisfontbrush","category",b.color,c)),void 0!=b.displaylastcategorylabel&&a.setAxisProperty("DisplayLastCategoryLabel","category",b.displaylastcategorylabel,c),b.sortOrder&&"string"==typeof this.dvObj.getTable().sortOrder&&(this.dvObj.getTable().sortOrder=b.sortOrder)))};
$MA.DataView.GraphRenderer.prototype.initialzeGraphValuesAxis=function(a,b,c){void 0!=b&&(void 0!=b.secondaryAxis&&a.setSecondaryValueAxis(b.secondaryAxis,c),b.list[0].format&&a.setAxisProperty("Format","values",b.list[0].format,c),b.list[0].displayName&&(b.secondaryAxis?a.setSecondaryValueAxisDisplayName(b.list[0].displayName,c):a.setAxisProperty("Label","values",b.list[0].displayName,c)),b.locale&&a.setAxisProperty("Locale","values",b.locale,c),void 0!=b.minVal&&a.setValueAxisProperty("valueaxismin",
b.minVal,c),void 0!=b.maxVal&&a.setValueAxisProperty("valueaxismax",b.maxVal,c),void 0!=b.showGrid&&a.setAxisProperty("MajorGridLine","values",b.showGrid,c),void 0!=b.showLabel&&a.setAxisProperty("AxisLabelVisibility","values",b.showLabel,c),void 0!=b.showPrimaryLine?a.setAxisProperty("PrimaryLine","values",b.showPrimaryLine,c):a.setAxisProperty("PrimaryLine","values",!1,c),void 0!=b.thickness&&a.setAxisProperty("PrimaryLineThickness","values",b.thickness,c),b.color&&(a.setAxisProperty("PrimaryLineColor",
"values",b.color,c),a.setAxisProperty("axisfontbrush","values",b.color,c)))};$MA.DataView.GraphRenderer.prototype.initialzeGraphSeriesAxis=function(a,b,c){void 0!=b&&(b.format&&a.setAxisProperty("Format","series",b.format,c),b.displayName&&a.setAxisProperty("Label","series",b.displayName,c),b.locale&&a.setAxisProperty("Locale","series",b.locale,c))};$MA.DataView.GraphRenderer.prototype.getGraph=function(){var a=this.dvObj.getGraphGob();if(a=document.getElementById(this.getGobElementId(a)))return a.macontrol};
$MA.DataView.GraphRenderer.prototype.enableSecondaryAxis=function(){var a=this.dvObj.getGraphGob(),b=this.getGraph(),c=a.getChildrenCount(),d,e;if(0<c){var f;for(f=0;f<c;f++)d=a.getChildGob(f),e=d.getObject("values"),e=e.getProperty("secondaryAxis"),d=d.getName(),e&&b.enableSecondaryValueAxis(d)}};$MA.DataView.GraphRenderer.prototype.getLocaleDef=function(a){var b=[];return b=void 0!==a.getValueObject(0).locale?[a.getValueObject(0).locale,"local"]:[a.getValues().locale,"global"]};
$MA.DataView.GraphRenderer.prototype.resetGraphExprs=function(){this.dvObj.getGraphGob().resetExprs()};$MA.DataView.GraphRenderer.prototype.setProperty=function(a,b){var c=this.getGraph();if(c)switch(a){case $MA.DataView.Graph.LEGEND:c.setLegendProperty("legend",b);break;case $MA.DataView.Graph.ANIMATION:c.setProperty("Animation",b)}};
$MA.DataView.GraphRenderer.prototype.setCategoriesProperty=function(a,b,c){var d=this.getGraph();if(d)switch(a){case $MA.DataView.GraphCategories.SHOWLABEL:d.setAxisProperty("AxisLabelVisibility","category",b,c);break;case $MA.DataView.GraphCategories.SHOWGRID:d.setAxisProperty("MajorGridLine","category",b,c);break;case $MA.DataView.GraphCategories.SHOWPRIMARYLINE:d.setAxisProperty("PrimaryLine","category",b,c);break;case $MA.DataView.GraphCategories.COLOR:d.setAxisProperty("PrimaryLineColor","category",
b,c);d.setAxisProperty("axisfontbrush","category",b,c);break;case $MA.DataView.GraphCategories.THICKNESS:d.setAxisProperty("primarylinethickness","category",b,c)}};
$MA.DataView.GraphRenderer.prototype.setValuesProperty=function(a,b,c){var d=this.getGraph();if(d)switch(a){case $MA.DataView.GraphValues.MIN:d.setValueAxisProperty("valueaxismin",b,c);break;case $MA.DataView.GraphValues.MAX:d.setValueAxisProperty("valueaxismax",b,c);break;case $MA.DataView.GraphValues.SHOWLABEL:d.setAxisProperty("AxisLabelVisibility","values",b,c);break;case $MA.DataView.GraphValues.SHOWGRID:d.setAxisProperty("MajorGridLine","values",b,c);break;case $MA.DataView.GraphValues.SHOWPRIMARYLINE:d.setAxisProperty("PrimaryLine",
"values",b,c);break;case $MA.DataView.GraphValues.COLOR:d.setAxisProperty("PrimaryLineColor","values",b,c);d.setAxisProperty("axisfontbrush","values",b,c);break;case $MA.DataView.GraphValues.THICKNESS:d.setAxisProperty("PrimaryLineThickness","values",b,c);break;case $MA.DataView.GraphValues.SECONDARYAXIS:d.setSecondaryValueAxis(b,c);break;case $MA.DataView.GraphValues.PERCENTAGE:d.setAxisProperty("Percentage","values",b,c);break;case $MA.DataView.GraphValues.LOCALE:d.setAxisProperty("Locale","values",
b,c)}};
$MA.DataView.GraphRenderer.prototype.setAxisProperty=function(a,b,c,d){var e=this.getGraph();if(e)switch(a){case $MA.DataView.GraphAxis.FORMAT:e.setAxisProperty("Format",b,c,d);break;case $MA.DataView.GraphAxis.DISPLAYNAME:e.setAxisProperty("Label",b,c,d);break;case $MA.DataView.GraphAxis.SHOWLABEL:e.setAxisProperty("AxisLabelVisibility",b,c,d);break;case $MA.DataView.GraphAxis.SHOWPRIMARYLINE:e.setAxisProperty("PrimaryLine",b,c,d);break;case $MA.DataView.GraphAxis.SHOWGRID:e.setAxisProperty("MajorGridLine",b,
c,d);break;case $MA.DataView.GraphAxis.THICKNESS:e.setAxisProperty("PrimaryLineThickness",b,c,d);break;case $MA.DataView.GraphAxis.COLOR:e.setAxisProperty("PrimaryLineColor",b,c,d);e.setAxisProperty("axisfontbrush",b,c,d);break;case $MA.DataView.GraphAxis.MIN:"category"==b?e.setCategoryAxisProperty("categoryaxismin",c,d):"values"==b&&(this.enableSecondaryAxis(),e.setValueAxisProperty("valueaxismin",b.min,d));break;case $MA.DataView.GraphAxis.MAX:"category"==b?e.setCategoryAxisProperty("categoryaxismax",
c,d):"values"==b&&(this.enableSecondaryAxis(),e.setValueAxisProperty("valueaxismax",b.max,d))}};$MA.DataView.GraphRenderer.prototype.setCategoryAxisProperty=function(a,b,c,d){var e=this.getGraph();if(e)switch(a){case $MA.DataView.GraphCategoryAxis.COLUMN:this.resetGraphExprs();break;case $MA.DataView.GraphCategoryAxis.DISPLAY_LAST_CATEGORY:e.setAxisProperty("DisplayLastCategoryLabel",b,c,d)}};
$MA.DataView.GraphRenderer.prototype.setValueAxisProperty=function(a,b,c,d){var e=this.getGraph();if(e)switch(a){case $MA.DataView.GraphValueAxis.EXPRESSION:this.resetGraphExprs();break;case $MA.DataView.GraphValueAxis.LOCALE:"values"==b&&e.setAxisProperty("Locale",b,c,d);break;case $MA.DataView.GraphValueAxis.PERCENTAGE:e.setAxisProperty("Percentage",b,c,d)}};
$MA.DataView.GraphRenderer.prototype.setSeriesAxisProperty=function(a,b,c,d){var e=this.getGraph();if(e)switch(a){case $MA.DataView.GraphSeriesAxis.COLUMN:this.resetGraphExprs();break;case $MA.DataView.GraphSeriesAxis.FORMAT:e.setAxisProperty("Format",b,c,d);break;case $MA.DataView.GraphSeriesAxis.DISPLAYNAME:e.setAxisProperty("Label",b,c,d);break;case $MA.DataView.GraphSeriesAxis.LOCALE:"values"==b&&e.setAxisProperty("Locale",b,c,d)}};$MA.DataView.GraphData=function(){};
$MA.DataView.GraphData.prototype.getMinItemSize=function(a,b){var c=!1;0<=a.indexOf("line")&&(c=!0);return 0<b?3:c?3:44};$MA.DataView.GraphData.prototype.getItemIncr=function(a,b,c,d){return"tablebar"==a||"bubble"==a||"pie"==a||"donut"==a||"waterfallbar"==a||"verticalline"==a?1:Math.ceil(c/(b/d))};
$MA.DataView.GraphData.prototype.isSuppliedTotals=function(a,b){return a.getGraphGob().suppliedTotals&&("hierarchycolumn"==b||"hierarchywaterfallcolumn"==b||"hierarchyline"==b||"hierarchystackedcolumn"==b||"hierarchy100pctstackedcolumn"==b)};$MA.DataView.GraphData.prototype.getValueDisplayText=function(a,b,c){var d=null;void 0!=c&&(a=a.getColumn(c))&&(d=b[a.id]);return d};$MA.DataView.SingleSeriesGraphData=function(){$MA.DataView.GraphData.call(this)};
$MA.DataView.SingleSeriesGraphData.prototype=new $MA.DataView.GraphData;
$MA.DataView.SingleSeriesGraphData.prototype.create=function(a,b,c,d){var e=d.getName(),f=d.getGraphType(),g=d.getTable(),h=g.displayBuffer.length,k=a.width;if(0<h){var l=d.getFirstItem(),p=d.getMaxItems(),p=l+p-1;p>=h&&(p=h-1);var m,n,h=[],q=[],s,r=d.getCategoryExpr(),u=d.getValueExpr(0);b.currentGraph=e;var v=d.groupExprs,w,x=d.getValueCount(),A,y=d.getObject("values"),C=d.categories;C&&C.list&&(A=C.list,A.display=C.getProperty("display"));var C=d.getObject("category"),B=this.getMinItemSize(f,a.numberOfVisibleCategory),
k=this.getItemIncr(f,k,p-l+1,B),B=0<=f.indexOf("waterfallcolumn"),z,E,f=this.isSuppliedTotals(b,f);m=void 0!==y.list[0].locale?y.list[0].locale:y.locale;void 0!==m&&(m=m.split(","));c=c!==d?d.getValueObject(0).getProperty("expression"):"";c=a.createSeries(c,e);c.locale=m&&m[0];B?(m=0,c.sumBeforeRange=0):m=l;for(z=m;z<=p;z+=f?1:k){!f&&z+k>p&&(z=p);b.exprRow=z;m=r.evaluate();h[0]=u.evaluate();s=g.sortOrder instanceof Array;var D;s||(D=g.sortOrder);s=s||"a"==D||"d"==D?d.getOrigIndex(z):z;if(B&&z<l)"number"!=
typeof h[0]||isNaN(h[0])||(c.sumBeforeRange+=h[0]);else{if(0<v.length)for(w=[],n=0;n<v.length;n++)w[n]=v[n].evaluate();if(f&&1<k)if(""==m&&""!=w[0])E=z;else if(""!=m&&0!=(z-E-1)%k)continue;if(1<x)for(n=1;n<x;n++)h[n]=d.getValueExpr(n).evaluate();n=g.displayBuffer[z];q[0]=this.getValueDisplayText(g,n,y.list[0].getProperty("displaytext"));n=this.getValueDisplayText(g,n,C.valueDisplayText);a.insertData(c,m,n,h,q,w,A,s)}}a.setProperty("firstitem",l,e)}};$MA.DataView.MultipleSeriesGraphData=function(){$MA.DataView.GraphData.call(this)};
$MA.DataView.MultipleSeriesGraphData.prototype=new $MA.DataView.GraphData;
$MA.DataView.MultipleSeriesGraphData.prototype.create=function(a,b,c,d){c=d.getName();var e=d.getGraphType(),f=d.getTable(),g=f.displayBuffer.length,h=a.width;if(0<g){var k=d.getFirstItem(),l=d.getMaxItems(),p=k+l-1;p>=g&&(p=g-1);var m,n,g=[],l=[],q=d.getCategoryExpr(),s=d.getValueExpr(0);b.currentGraph=c;var r=d.getSeriesExpr(),u=d.groupExprs,v,w=d.getValueCount(),x,A=d.getObject("values"),y=d.categories;y&&y.list&&(x=y.list,x.display=y.getProperty("display"));var y=d.getObject("category"),C=this.getMinItemSize(e,
a.numberOfVisibleCategory),h=this.getItemIncr(e,h,p-k+1,C),C=0<=e.indexOf("waterfallcolumn"),B,z,E,D,F,e=this.isSuppliedTotals(b,e);m=void 0!==A.list[0].locale?A.list[0].locale:A.locale;void 0!==m&&(m=m.split(","));if(void 0!=b.groups){E=d.getObject("series").format;var G=b.groups.length-1,k=b.getGroupRow(k,G,!0,f),p=b.getGroupRow(p,G,!1,f),J,I;if(void 0==d.seriesList){var H=[];I=[];for(B=k;B<=p;B++)b.exprRow=B,J=r.evaluate(),void 0==H[J]&&(H[J]=!0,I.push(J));B=f.sortOrder instanceof Array?f.sortOrder[0]:
f.sortOrder;"a"!=B&&"d"!=B||I.sort()}else I=d.seriesList;a.seriesNames=new $MA.Hash;H=[];for(B=0;B<I.length;B++)D=I[B],H[D]=a.createSeries(D,c,B),C&&(H[D].sumBeforeRange=0),m&&m[B]&&(H[D].locale=m[B]),H[D].setFormat(E);var K,L=[],M,N,O=0;for(B=C?0:k;B<=p;B++)if(b.exprRow=B,m=q.evaluate(),g[0]=s.evaluate(),J=r.evaluate(),E=H[J],C&&B<k)"number"!=typeof g[0]||isNaN(g[0])||(E.sumBeforeRange+=g[0]);else if(z=f.getRow(B),K=b.getRowInfo(z),e||0==O%h){if(K&&K.isGroupHeader(G)){if(0<u.length)for(v=[],z=0;z<
u.length;z++)v[z]=u[z].evaluate();if(e&&1<h)if(""==m&&""!=v[0])F=B;else if(""!=m&&0!=(B-F-I.length)/I.length%h){N=B;continue}if(M=a.createCategory(m,v,x,c))for(z=0;z<I.length;z++)D=I[z],L[D]=!1}else if(e&&""!=m&&B>N&&B<N+I.length)continue;if(M){if(1<w)for(z=1;z<w;z++)g[z]=d.getValueExpr(z).evaluate(),n=f.displayBuffer[B],D=A.list[z].getProperty("displaytext"),void 0!=D&&(D=f.getColumn(D))&&(l[z]=n[D.id]);n=f.displayBuffer[B];l[0]=this.getValueDisplayText(f,n,A.list[0].getProperty("displaytext"));
n=this.getValueDisplayText(f,n,y.valueDisplayText);L[J]?a.insertData(E,m,n,g,l,v,x):(a.addData(E,m,n,g,l),L[J]=!0)}else a.insertData(E,m,n,g,l,v,x);if(K&&K.isGroupTrailer(G)){if(M){for(z=0;z<I.length;z++)D=I[z],L[D]||a.addData(H[D],m,null);M=void 0}O++}}else K&&K.isGroupTrailer(G)&&O++;a.setProperty("firstitem",k,c)}}};$MA.DataView.MultipleValueGraphData=function(){$MA.DataView.GraphData.call(this)};$MA.DataView.MultipleValueGraphData.prototype=new $MA.DataView.GraphData;
$MA.DataView.MultipleValueGraphData.prototype.create=function(a,b,c,d){var e=d.getName(),f=d.getGraphType(),g=d.getTable(),h=g.displayBuffer.length,k=a.width;if(0<h){var l=d.getFirstItem(),p=d.getMaxItems(),p=l+p-1;p>=h&&(p=h-1);var m,n,h=[],q=[],s,r,u,v=d.getCategoryExpr(),w=d.getValueExpr(0);b.currentGraph=e;var x=d.groupExprs,A,y=d.getValueCount(),C,B=d.getObject("values"),z=d.categories;z&&z.list&&(C=z.list,z=z.getProperty("display"),C.display=z);var z=d.getObject("category"),E=this.getMinItemSize(f,
a.numberOfVisibleCategory),k=this.getItemIncr(f,k,p-l+1,E),E=0<=f.indexOf("waterfallcolumn"),D,F,G,J,I,H,K,f=this.isSuppliedTotals(b,f);m=void 0!==B.list[0].locale?B.list[0].locale:B.locale;void 0!==m&&(m=m.split(","));c=c!==d?d.getValueObject(0).getProperty("expression"):"";c=a.createSeries(c,e);c.locale=m&&m[0];E?(m=0,c.sumBeforeRange=0):m=l;for(D=m;D<=p;D+=f?1:k){!f&&D+k>p&&(D=p);b.exprRow=D;m=v.evaluate();h[0]=w.evaluate();s=g.sortOrder instanceof Array;var L;s||(L=g.sortOrder);s=s||"a"==L||"d"==
L?d.getOrigIndex(D):D;if(E&&D<l)"number"!=typeof h[0]||isNaN(h[0])||(c.sumBeforeRange+=h[0]);else{if(0<x.length)for(A=[],F=0;F<x.length;F++)A[F]=x[F].evaluate();if(f&&1<k)if(""==m&&""!=A[0])K=D;else if(""!=m&&0!=(D-K-1)%k)continue;if(1<y)for(F=1;F<y;F++)n=void 0,u=B.list[F].getProperty("format"),G=B.list[F].getProperty("expression").toLowerCase(),H=g.displayBuffer[D],r=B.list[F].getProperty("displaytext"),void 0!=r&&(r=g.getColumn(r))&&(n=H[r.id]),r=d.getValueExpr(F).evaluate(),u=$MA.format(r,u),
1==F||"width"==G?h[F]={width:r,formattedWidth:u,displayText:n}:"height"==G?h[F]={height:r,formattedHeight:u,displayText:n}:"shape"==G?(G=B.list[F].getProperty("shapevalue"),void 0!=G&&(G=g.getColumn(G))&&(J=H[G.id]),h[F]={shape:r,formattedShape:u,value:J,displayText:n}):"color"==G&&(G=B.list[F].getProperty("colorvalue"),void 0!=G&&(G=g.getColumn(G))&&(I=H[G.id]),h[F]={color:r,formattedColor:u,value:I,displayText:n});H=g.displayBuffer[D];q[0]=this.getValueDisplayText(g,H,B.list[0].getProperty("displaytext"));
n=this.getValueDisplayText(g,H,z.valueDisplayText);a.insertData(c,m,n,h,q,A,C,s)}}a.setProperty("firstitem",l,e)}};var $MAExpressionLexer=function(a,b){b||(b=new org.antlr.runtime.RecognizerSharedState);(function(){isDigit=function(a){return"0"<=a&&"9">=a}}).call(this);this.dfa18=new $MAExpressionLexer.DFA18(this);$MAExpressionLexer.superclass.constructor.call(this,a,b)};
org.antlr.lang.augmentObject($MAExpressionLexer,{EOF:-1,T__37:37,T__38:38,T__39:39,NUMBER:4,EQUAL:5,NEQ:6,GREATER:7,LESS:8,GE:9,LE:10,PLUS:11,DASH:12,STAR:13,SLASH:14,CARET:15,LPAREN:16,RPAREN:17,IDENTIFIER:18,DATE:19,TIME:20,STRING:21,COMMA:22,AT:23,QUE:24,SHP:25,DOT:26,LBRACKET:27,RBRACKET:28,WS:29,SLCOMMENT:30,MLCOMMENT:31,DOUBLE_STRING_CHAR:32,SINGLE_STRING_CHAR:33,LETTER:34,DIGIT:35,ESC:36});
(function(){var a=org.antlr.runtime.Token.HIDDEN_CHANNEL;org.antlr.lang.extend($MAExpressionLexer,org.antlr.runtime.Lexer,{EOF:-1,T__37:37,T__38:38,T__39:39,NUMBER:4,EQUAL:5,NEQ:6,GREATER:7,LESS:8,GE:9,LE:10,PLUS:11,DASH:12,STAR:13,SLASH:14,CARET:15,LPAREN:16,RPAREN:17,IDENTIFIER:18,DATE:19,TIME:20,STRING:21,COMMA:22,AT:23,QUE:24,SHP:25,DOT:26,LBRACKET:27,RBRACKET:28,WS:29,SLCOMMENT:30,MLCOMMENT:31,DOUBLE_STRING_CHAR:32,SINGLE_STRING_CHAR:33,LETTER:34,DIGIT:35,ESC:36,getGrammarFileName:function(){return"C:\\Users\\limc.SYBASE\\workspace\\AntlrTest\\src\\Test\\Expression.g"}});
org.antlr.lang.augmentObject($MAExpressionLexer.prototype,{mT__37:function(){var a=this.T__37,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("for");this.state.type=a;this.state.channel=c},mT__38:function(){var a=this.T__38,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("all");this.state.type=a;this.state.channel=c},mT__39:function(){var a=this.T__39,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("group");this.state.type=a;this.state.channel=
c},mCOMMA:function(){var a=this.COMMA,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(",");this.state.type=a;this.state.channel=c},mLPAREN:function(){var a=this.LPAREN,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("(");this.state.type=a;this.state.channel=c},mRPAREN:function(){var a=this.RPAREN,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(")");this.state.type=a;this.state.channel=c},mSTAR:function(){var a=this.STAR,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;
this.match("*");this.state.type=a;this.state.channel=c},mPLUS:function(){var a=this.PLUS,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("+");this.state.type=a;this.state.channel=c},mDASH:function(){var a=this.DASH,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("-");this.state.type=a;this.state.channel=c},mSLASH:function(){var a=this.SLASH,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("/");this.state.type=a;this.state.channel=c},mCARET:function(){var a=
this.CARET,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("^");this.state.type=a;this.state.channel=c},mLESS:function(){var a=this.LESS,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("<");this.state.type=a;this.state.channel=c},mLE:function(){var a=this.LE,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("<=");this.state.type=a;this.state.channel=c},mNEQ:function(){var a=this.NEQ,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;
this.match("!=");this.state.type=a;this.state.channel=c},mEQUAL:function(){var a=this.EQUAL,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("==");this.state.type=a;this.state.channel=c},mGREATER:function(){var a=this.GREATER,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(">");this.state.type=a;this.state.channel=c},mGE:function(){var a=this.GE,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(">=");this.state.type=a;this.state.channel=c},
mAT:function(){var a=this.AT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("@");this.state.type=a;this.state.channel=c},mQUE:function(){var a=this.QUE,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("?");this.state.type=a;this.state.channel=c},mSHP:function(){var a=this.SHP,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("#");this.state.type=a;this.state.channel=c},mDOT:function(){var a=this.DOT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;
this.match(".");this.state.type=a;this.state.channel=c},mLBRACKET:function(){var a=this.LBRACKET,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("[");this.state.type=a;this.state.channel=c},mRBRACKET:function(){var a=this.RBRACKET,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("]");this.state.type=a;this.state.channel=c},mWS:function(){var b=this.WS,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;if("\t"<=this.input.LA(1)&&"\n">=this.input.LA(1)||
"\r"==this.input.LA(1)||" "==this.input.LA(1))this.input.consume();else throw b=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(b),b;c=a;this.state.type=b;this.state.channel=c},mSLCOMMENT:function(){var b=this.SLCOMMENT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("//");a:do{var c=2,d=this.input.LA(1);if("\x00"<=d&&"\t">=d||"\x0B"<=d&&"\uffff">=d)c=1;switch(c){case 1:if("\x00"<=this.input.LA(1)&&"\t">=this.input.LA(1)||"\x0B"<=this.input.LA(1)&&"\uffff">=
this.input.LA(1))this.input.consume();else throw b=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(b),b;break;default:break a}}while(1);c=a;this.state.type=b;this.state.channel=c},mMLCOMMENT:function(){var b=this.MLCOMMENT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("/*");a:do{var c=2,d=this.input.LA(1);if("*"==d)if(d=this.input.LA(2),"/"==d)c=2;else{if("\x00"<=d&&".">=d||"0"<=d&&"\uffff">=d)c=1}else if("\x00"<=d&&")">=d||"+"<=d&&"\uffff">=d)c=1;
switch(c){case 1:this.matchAny();break;default:break a}}while(1);this.match("*/");c=a;this.state.type=b;this.state.channel=c},mSTRING:function(){var a=this.STRING,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL,d=2,d=this.input.LA(1);if('"'==d)d=1;else if("'"==d)d=2;else throw new org.antlr.runtime.NoViableAltException("",5,0,this.input);switch(d){case 1:this.match('"');a:do{var d=2,e=this.input.LA(1);if("\x00"<=e&&"!">=e||"#"<=e&&"\uffff">=e)d=1;switch(d){case 1:this.mDOUBLE_STRING_CHAR();
break;default:break a}}while(1);this.match('"');break;case 2:this.match("'");a:do{d=2;e=this.input.LA(1);if("\x00"<=e&&"&">=e||"("<=e&&"\uffff">=e)d=1;switch(d){case 1:this.mSINGLE_STRING_CHAR();break;default:break a}}while(1);this.match("'")}this.setText(this.getText().substring(1,this.getText().length-1));this.state.type=a;this.state.channel=c},mIDENTIFIER:function(){var a=this.IDENTIFIER,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL,d=2,d=this.input.LA(1);if("$"==d||"A"<=d&&"Z">=d||
"_"==d||"a"<=d&&"z">=d||"\u0100"<=d&&"\uffef">=d)d=1;else if("#"==d)d=2;else throw new org.antlr.runtime.NoViableAltException("",8,0,this.input);switch(d){case 1:if("$"==this.input.LA(1)||"A"<=this.input.LA(1)&&"Z">=this.input.LA(1)||"_"==this.input.LA(1)||"a"<=this.input.LA(1)&&"z">=this.input.LA(1)||"\u0100"<=this.input.LA(1)&&"\uffef">=this.input.LA(1))this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(a),a;a:do{var d=2,e=this.input.LA(1);
if("#"<=e&&"%">=e||"0"<=e&&"9">=e||"A"<=e&&"Z">=e||"_"==e||"."==e||"a"<=e&&"z">=e||"\u0100"<=e&&"\uffef">=e)d=1;switch(d){case 1:if("#"<=this.input.LA(1)&&"%">=this.input.LA(1)||"0"<=this.input.LA(1)&&"9">=this.input.LA(1)||"A"<=this.input.LA(1)&&"Z">=this.input.LA(1)||"_"==this.input.LA(1)||"."==this.input.LA(1)||"a"<=this.input.LA(1)&&"z">=this.input.LA(1)||"\u0100"<=this.input.LA(1)&&"\uffef">=this.input.LA(1))this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,
this.input),this.recover(a),a;break;default:break a}}while(1);break;case 2:this.mSHP();d=0;a:do{var e=2,f=this.input.LA(1);if("0"<=f&&"9">=f||"A"<=f&&"Z">=f||"_"==f||"a"<=f&&"z">=f||"\u0100"<=f&&"\uffef">=f)e=1;switch(e){case 1:if("0"<=this.input.LA(1)&&"9">=this.input.LA(1)||"A"<=this.input.LA(1)&&"Z">=this.input.LA(1)||"_"==this.input.LA(1)||"a"<=this.input.LA(1)&&"z">=this.input.LA(1)||"\u0100"<=this.input.LA(1)&&"\uffef">=this.input.LA(1))this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,
this.input),this.recover(a),a;break;default:if(1<=d)break a;throw new org.antlr.runtime.EarlyExitException(7,this.input);}d++}while(1)}this.state.type=a;this.state.channel=c},mNUMBER:function(){var a=this.NUMBER,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL,d=4,d=this.input.LA(1);if("0"<=d&&"9">=d)if(d=this.input.LA(2),"0"<=d&&"9">=d)switch(this.input.LA(3)){case ":":d=1;break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":d=this.input.LA(4);d=
"0"<=d&&"9">=d?"-"==this.input.LA(5)?2:3:3;break;default:d=3}else d=3;else if("."==d)d=4;else throw new org.antlr.runtime.NoViableAltException("",15,0,this.input);switch(d){case 1:this.mDIGIT();this.mDIGIT();this.match(":");this.mDIGIT();this.mDIGIT();this.match(":");this.mDIGIT();this.mDIGIT();a=2;":"==this.input.LA(1)&&(a=1);switch(a){case 1:this.match(":");a=0;a:do{var d=2,e=this.input.LA(1);"0"<=e&&"9">=e&&(d=1);switch(d){case 1:this.mDIGIT();break;default:if(1<=a)break a;c=new org.antlr.runtime.EarlyExitException(9,
this.input);throw c;}a++}while(1)}a=this.TIME;break;case 2:if(!(isDigit(this.input.LA(4))&&"-"==this.input.LA(5)&&isDigit(this.input.LA(6))&&isDigit(this.input.LA(7))&&"-"==this.input.LA(8)&&isDigit(this.input.LA(9))&&isDigit(this.input.LA(10))))throw new org.antlr.runtime.FailedPredicateException(this.input,"NUMBER","isDigit(this.input.LA(4)) && (this.input.LA(5) == '-') && isDigit(this.input.LA(6)) && isDigit(this.input.LA(7)) && (this.input.LA(8) == '-') && isDigit(this.input.LA(9)) && isDigit(this.input.LA(10)) ");
this.mDIGIT();this.mDIGIT();this.mDIGIT();this.mDIGIT();this.match("-");this.mDIGIT();this.mDIGIT();this.match("-");this.mDIGIT();this.mDIGIT();a=this.DATE;break;case 3:d=0;a:do{var e=2,f=this.input.LA(1);"0"<=f&&"9">=f&&(e=1);switch(e){case 1:this.mDIGIT();break;default:if(1<=d)break a;c=new org.antlr.runtime.EarlyExitException(11,this.input);throw c;}d++}while(1);d=2;"."==this.input.LA(1)&&(d=1);switch(d){case 1:this.match(".");a:do switch(d=2,e=this.input.LA(1),"0"<=e&&"9">=e&&(d=1),d){case 1:this.mDIGIT();
break;default:break a}while(1)}break;case 4:this.match(".");a:do switch(d=2,e=this.input.LA(1),"0"<=e&&"9">=e&&(d=1),d){case 1:this.mDIGIT();break;default:break a}while(1)}this.state.type=a;this.state.channel=c},mTIME:function(){},mDATE:function(){},mDIGIT:function(){this.matchRange("0","9")},mLETTER:function(){if("A"<=this.input.LA(1)&&"Z">=this.input.LA(1)||"a"<=this.input.LA(1)&&"z">=this.input.LA(1)||"\u0100"<=this.input.LA(1)&&"\uffef">=this.input.LA(1))this.input.consume();else{var a=new org.antlr.runtime.MismatchedSetException(null,
this.input);this.recover(a);throw a;}},mDOUBLE_STRING_CHAR:function(){var a=2,a=this.input.LA(1);if("\x00"<=a&&"!">=a||"#"<=a&&"}">=a||"\u007f"<=a&&"\uffff">=a)a=1;else if("~"==a)a=2;else throw new org.antlr.runtime.NoViableAltException("",16,0,this.input);switch(a){case 1:if("\x00"<=this.input.LA(1)&&"!">=this.input.LA(1)||"#"<=this.input.LA(1)&&"}">=this.input.LA(1)||"\u007f"<=this.input.LA(1)&&"\uffff">=this.input.LA(1))this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,
this.input),this.recover(a),a;break;case 2:this.mESC()}},mSINGLE_STRING_CHAR:function(){var a=2,a=this.input.LA(1);if("\x00"<=a&&"&">=a||"("<=a&&"}">=a||"\u007f"<=a&&"\uffff">=a)a=1;else if("~"==a)a=2;else throw new org.antlr.runtime.NoViableAltException("",17,0,this.input);switch(a){case 1:if("\x00"<=this.input.LA(1)&&"&">=this.input.LA(1)||"("<=this.input.LA(1)&&"}">=this.input.LA(1)||"\u007f"<=this.input.LA(1)&&"\uffff">=this.input.LA(1))this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,
this.input),this.recover(a),a;break;case 2:this.mESC()}},mESC:function(){this.match("~");if('"'==this.input.LA(1)||"'"==this.input.LA(1)||"\\"==this.input.LA(1)||"n"==this.input.LA(1)||"r"==this.input.LA(1)||"t"==this.input.LA(1)||"~"==this.input.LA(1))this.input.consume();else{var a=new org.antlr.runtime.MismatchedSetException(null,this.input);this.recover(a);throw a;}},mTokens:function(){var a=29,a=this.dfa18.predict(this.input);switch(a){case 1:this.mT__37();break;case 2:this.mT__38();break;case 3:this.mT__39();
break;case 4:this.mCOMMA();break;case 5:this.mLPAREN();break;case 6:this.mRPAREN();break;case 7:this.mSTAR();break;case 8:this.mPLUS();break;case 9:this.mDASH();break;case 10:this.mSLASH();break;case 11:this.mCARET();break;case 12:this.mLESS();break;case 13:this.mLE();break;case 14:this.mNEQ();break;case 15:this.mEQUAL();break;case 16:this.mGREATER();break;case 17:this.mGE();break;case 18:this.mAT();break;case 19:this.mQUE();break;case 20:this.mSHP();break;case 21:this.mDOT();break;case 22:this.mLBRACKET();
break;case 23:this.mRBRACKET();break;case 24:this.mWS();break;case 25:this.mSLCOMMENT();break;case 26:this.mMLCOMMENT();break;case 27:this.mSTRING();break;case 28:this.mIDENTIFIER();break;case 29:this.mNUMBER()}}},!0);org.antlr.lang.augmentObject($MAExpressionLexer,{DFA18_eotS:"\u0001\uffff\u0003\u0018\u0006\uffff\u0001\u001f\u0001\uffff\u0001!\u0002\uffff\u0001#\u0002\uffff\u0001$\u0001%\u0006\uffff\u0003\u0018\t\uffff\u0001)\u0001*\u0001\u0018\u0002\uffff\u0001\u0018\u0001-\u0001\uffff",DFA18_eofS:".\uffff",
DFA18_minS:"\u0001\t\u0001o\u0001l\u0001r\u0006\uffff\u0001*\u0001\uffff\u0001=\u0002\uffff\u0001=\u0002\uffff\u00020\u0006\uffff\u0001r\u0001l\u0001o\t\uffff\u0002#\u0001u\u0002\uffff\u0001p\u0001#\u0001\uffff",DFA18_maxS:"\u0001\uffef\u0001o\u0001l\u0001r\u0006\uffff\u0001/\u0001\uffff\u0001=\u0002\uffff\u0001=\u0002\uffff\u0001\uffef\u00019\u0006\uffff\u0001r\u0001l\u0001o\t\uffff\u0002\uffef\u0001u\u0002\uffff\u0001p\u0001\uffef\u0001\uffff",DFA18_acceptS:"\u0004\uffff\u0001\u0004\u0001\u0005\u0001\u0006\u0001\u0007\u0001\b\u0001\t\u0001\uffff\u0001\x0B\u0001\uffff\u0001\u000e\u0001\u000f\u0001\uffff\u0001\u0012\u0001\u0013\u0002\uffff\u0001\u0016\u0001\u0017\u0001\u0018\u0001\u001b\u0001\u001c\u0001\u001d\u0003\uffff\u0001\u0019\u0001\u001a\u0001\n\u0001\r\u0001\f\u0001\u0011\u0001\u0010\u0001\u0014\u0001\u0015\u0003\uffff\u0001\u0001\u0001\u0002\u0002\uffff\u0001\u0003",
DFA18_specialS:".\uffff}>",DFA18_transitionS:"\u0002\u0016\u0002\uffff\u0001\u0016\u0012\uffff\u0001\u0016\u0001\r\u0001\u0017\u0001\u0012\u0001\u0018\u0002\uffff\u0001\u0017\u0001\u0005\u0001\u0006\u0001\u0007\u0001\b\u0001\u0004\u0001\t\u0001\u0013\u0001\n\n\u0019\u0002\uffff\u0001\f\u0001\u000e\u0001\u000f\u0001\u0011\u0001\u0010\u001a\u0018\u0001\u0014\u0001\uffff\u0001\u0015\u0001\x0B\u0001\u0018\u0001\uffff\u0001\u0002\u0004\u0018\u0001\u0001\u0001\u0003\u0013\u0018\u0085\uffff\ufef0\u0018;\u0001\u001a;\u0001\u001b;\u0001\u001c;;;;;;;\u0001\u001e\u0004\uffff\u0001\u001d;;\u0001 ;;;\u0001\";;;\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018;\n\u0019;;;;;;;\u0001&;\u0001';\u0001(;;;;;;;;;;\u0003\u0018\n\uffff\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018;\u0003\u0018\n\uffff\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018;\u0001+;;;\u0001,;\u0003\u0018\n\uffff\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018;".split(";")});
org.antlr.lang.augmentObject($MAExpressionLexer,{DFA18_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_eotS),DFA18_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_eofS),DFA18_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionLexer.DFA18_minS),DFA18_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionLexer.DFA18_maxS),DFA18_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_acceptS),DFA18_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_specialS),
DFA18_transition:function(){var a=[],c,d=$MAExpressionLexer.DFA18_transitionS.length;for(c=0;c<d;c++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_transitionS[c]));return a}()});$MAExpressionLexer.DFA18=function(a){this.recognizer=a;this.decisionNumber=18;this.eot=$MAExpressionLexer.DFA18_eot;this.eof=$MAExpressionLexer.DFA18_eof;this.min=$MAExpressionLexer.DFA18_min;this.max=$MAExpressionLexer.DFA18_max;this.accept=$MAExpressionLexer.DFA18_accept;this.special=$MAExpressionLexer.DFA18_special;
this.transition=$MAExpressionLexer.DFA18_transition};org.antlr.lang.extend($MAExpressionLexer.DFA18,org.antlr.runtime.DFA,{getDescription:function(){return"1:1: Tokens : ( T__37 | T__38 | T__39 | COMMA | LPAREN | RPAREN | STAR | PLUS | DASH | SLASH | CARET | LESS | LE | NEQ | EQUAL | GREATER | GE | AT | QUE | SHP | DOT | LBRACKET | RBRACKET | WS | SLCOMMENT | MLCOMMENT | STRING | IDENTIFIER | NUMBER );"},dummy:null})})();
var $MAExpressionParser=function(a,b){b||(b=new org.antlr.runtime.RecognizerSharedState);Relationship={Equal:0,NotEqual:1,LessThan:2,LessThanEqual:3,GreaterThan:4,GreaterThanEqual:5};Operator={Star:0,Slash:1,Dash:2,Plus:3,Caret:4};this.NodeCreator=null;$MAExpressionParser.superclass.constructor.call(this,a,b);this.dfa4=new $MAExpressionParser.DFA4(this);this.dfa6=new $MAExpressionParser.DFA6(this);this.dfa8=new $MAExpressionParser.DFA8(this);this.dfa9=new $MAExpressionParser.DFA9(this);this.dfa11=
new $MAExpressionParser.DFA11(this);this.dfa12=new $MAExpressionParser.DFA12(this);this.adaptor=new org.antlr.runtime.tree.CommonTreeAdaptor};
org.antlr.lang.augmentObject($MAExpressionParser,{EOF:-1,T__37:37,T__38:38,T__39:39,NUMBER:4,EQUAL:5,NEQ:6,GREATER:7,LESS:8,GE:9,LE:10,PLUS:11,DASH:12,STAR:13,SLASH:14,CARET:15,LPAREN:16,RPAREN:17,IDENTIFIER:18,DATE:19,TIME:20,STRING:21,COMMA:22,AT:23,QUE:24,SHP:25,DOT:26,LBRACKET:27,RBRACKET:28,WS:29,SLCOMMENT:30,MLCOMMENT:31,DOUBLE_STRING_CHAR:32,SINGLE_STRING_CHAR:33,LETTER:34,DIGIT:35,ESC:36});
(function(){org.antlr.lang.extend($MAExpressionParser,org.antlr.runtime.Parser,{getTokenNames:function(){return $MAExpressionParser.tokenNames},getGrammarFileName:function(){return"C:\\Users\\limc.SYBASE\\workspace\\AntlrTest\\src\\Test\\Expression.g"}});org.antlr.lang.augmentObject($MAExpressionParser.prototype,{dw_expression:function(){var a=null,b=null,a=null;try{this.pushFollow($MAExpressionParser.FOLLOW_expression_in_dw_expression94),b=this.expression(),this.state._fsp--,a=b}catch(c){if(c instanceof
org.antlr.runtime.RecognitionException)this.reportError(c),this.recover(this.input,c);else throw c;}finally{}return a},expression:function(){var a=null,b=null,c=null,a=null,d=$MA.AggregateType.All;try{switch(this.pushFollow($MAExpressionParser.FOLLOW_relationalExpression_in_expression118),c=this.relationalExpression(),this.state._fsp--,a=c,c=2,37==this.input.LA(1)&&(c=1),c){case 1:this.match(this.input,37,$MAExpressionParser.FOLLOW_37_in_expression135);var c=2,e=this.input.LA(1);if(38==e)c=1;else if(39==
e)c=2;else throw new org.antlr.runtime.NoViableAltException("",1,0,this.input);switch(c){case 1:this.match(this.input,38,$MAExpressionParser.FOLLOW_38_in_expression160);d=$MA.AggregateType.ALL;break;case 2:this.match(this.input,39,$MAExpressionParser.FOLLOW_39_in_expression181),d=$MA.AggregateType.GROUP,b=this.match(this.input,4,$MAExpressionParser.FOLLOW_NUMBER_in_expression189)}a=d==$MA.AggregateType.GROUP?this.NodeCreator.createAggregateNode(a,d,b?b.getText():null):this.NodeCreator.createAggregateNode(a,
d,0);break}}catch(f){if(f instanceof org.antlr.runtime.RecognitionException)this.reportError(f),this.recover(this.input,f);else throw f;}finally{}return a},relationalExpression:function(){var a=null,b=null,c=null,a=null,d=Relationship.Equal;try{switch(this.pushFollow($MAExpressionParser.FOLLOW_additiveExpression_in_relationalExpression243),b=this.additiveExpression(),this.state._fsp--,a=b,b=2,b=this.dfa4.predict(this.input),b){case 1:b=6;switch(this.input.LA(1)){case 5:b=1;break;case 6:b=2;break;
case 7:b=3;break;case 8:b=4;break;case 9:b=5;break;case 10:b=6;break;default:throw new org.antlr.runtime.NoViableAltException("",3,0,this.input);}switch(b){case 1:this.match(this.input,5,$MAExpressionParser.FOLLOW_EQUAL_in_relationalExpression262);d=Relationship.Equal;break;case 2:this.match(this.input,6,$MAExpressionParser.FOLLOW_NEQ_in_relationalExpression273);d=Relationship.NotEqual;break;case 3:this.match(this.input,7,$MAExpressionParser.FOLLOW_GREATER_in_relationalExpression285);d=Relationship.GreaterThan;
break;case 4:this.match(this.input,8,$MAExpressionParser.FOLLOW_LESS_in_relationalExpression295);d=Relationship.LessThan;break;case 5:this.match(this.input,9,$MAExpressionParser.FOLLOW_GE_in_relationalExpression306);d=Relationship.GreaterThanEqual;break;case 6:this.match(this.input,10,$MAExpressionParser.FOLLOW_LE_in_relationalExpression319),d=Relationship.LessThanEqual}this.pushFollow($MAExpressionParser.FOLLOW_additiveExpression_in_relationalExpression342);c=this.additiveExpression();this.state._fsp--;
switch(d){case Relationship.Equal:a=this.NodeCreator.createOperatorNode($MA.OperatorType.EQUAL,[a,c]);break;case Relationship.NotEqual:a=this.NodeCreator.createOperatorNode($MA.OperatorType.NOTEQUAL,[a,c]);break;case Relationship.GreaterThan:a=this.NodeCreator.createOperatorNode($MA.OperatorType.GREATERTHAN,[a,c]);break;case Relationship.GreaterThanEqual:a=this.NodeCreator.createOperatorNode($MA.OperatorType.GREATERTHANEQUAL,[a,c]);break;case Relationship.LessThan:a=this.NodeCreator.createOperatorNode($MA.OperatorType.LESSTHAN,
[a,c]);break;case Relationship.LessThanEqual:a=this.NodeCreator.createOperatorNode($MA.OperatorType.LESSTHANEQUAL,[a,c])}break}}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,e);else throw e;}finally{}return a},additiveExpression:function(){var a=null,b=null,c=null,d=a=null,e=Operator.Plus;try{this.pushFollow($MAExpressionParser.FOLLOW_multiplicativeExpression_in_additiveExpression382);b=this.multiplicativeExpression();this.state._fsp--;
a=b;a:do switch(b=2,b=this.dfa6.predict(this.input),b){case 1:var b=2,f=this.input.LA(1);if(11==f)b=1;else if(12==f)b=2;else throw new org.antlr.runtime.NoViableAltException("",5,0,this.input);switch(b){case 1:this.match(this.input,11,$MAExpressionParser.FOLLOW_PLUS_in_additiveExpression403);e=Operator.Plus;break;case 2:this.match(this.input,12,$MAExpressionParser.FOLLOW_DASH_in_additiveExpression420),e=Operator.Dash}this.pushFollow($MAExpressionParser.FOLLOW_multiplicativeExpression_in_additiveExpression441);
c=this.multiplicativeExpression();this.state._fsp--;d=a;a=e==Operator.Plus?this.NodeCreator.createOperatorNode($MA.OperatorType.ADD,[d,c]):this.NodeCreator.createOperatorNode($MA.OperatorType.MINUS,[d,c]);break;default:break a}while(1)}catch(g){if(g instanceof org.antlr.runtime.RecognitionException)this.reportError(g),this.recover(this.input,g);else throw g;}finally{}return a},multiplicativeExpression:function(){var a=null,b=null,c=null,d=a=null,e=Operator.Star;try{this.pushFollow($MAExpressionParser.FOLLOW_factorExpression_in_multiplicativeExpression479);
b=this.factorExpression();this.state._fsp--;a=b;a:do switch(b=2,b=this.dfa8.predict(this.input),b){case 1:var b=2,f=this.input.LA(1);if(13==f)b=1;else if(14==f)b=2;else throw new org.antlr.runtime.NoViableAltException("",7,0,this.input);switch(b){case 1:this.match(this.input,13,$MAExpressionParser.FOLLOW_STAR_in_multiplicativeExpression500);e=Operator.Star;break;case 2:this.match(this.input,14,$MAExpressionParser.FOLLOW_SLASH_in_multiplicativeExpression511),e=Operator.Slash}this.pushFollow($MAExpressionParser.FOLLOW_factorExpression_in_multiplicativeExpression533);
c=this.factorExpression();this.state._fsp--;d=a;a=e==Operator.Star?this.NodeCreator.createOperatorNode($MA.OperatorType.MULTIPLY,[d,c]):this.NodeCreator.createOperatorNode($MA.OperatorType.DIVIDE,[d,c]);break;default:break a}while(1)}catch(g){if(g instanceof org.antlr.runtime.RecognitionException)this.reportError(g),this.recover(this.input,g);else throw g;}finally{}return a},factorExpression:function(){var a=null,b=null,c=null,d=a=null;try{this.pushFollow($MAExpressionParser.FOLLOW_unaryExpression_in_factorExpression571);
b=this.unaryExpression();this.state._fsp--;a=b;a:do switch(b=2,b=this.dfa9.predict(this.input),b){case 1:this.match(this.input,15,$MAExpressionParser.FOLLOW_CARET_in_factorExpression584);this.pushFollow($MAExpressionParser.FOLLOW_unaryExpression_in_factorExpression595);c=this.unaryExpression();this.state._fsp--;d=a;a=this.NodeCreator.createOperatorNode($MA.OperatorType.EXPON,[d,c]);break;default:break a}while(1)}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,
e);else throw e;}finally{}return a},unaryExpression:function(){var a=null,b=null,a=null,c=!1;try{var d=3,e=this.input.LA(1);11==e?d=1:12==e&&(d=2);switch(d){case 1:this.match(this.input,11,$MAExpressionParser.FOLLOW_PLUS_in_unaryExpression635);break;case 2:this.match(this.input,12,$MAExpressionParser.FOLLOW_DASH_in_unaryExpression645),c=!0}this.pushFollow($MAExpressionParser.FOLLOW_primaryExpression_in_unaryExpression662);b=this.primaryExpression();this.state._fsp--;a=b;c&&(a=this.NodeCreator.createOperatorNode($MA.OperatorType.UNARYMINUS,
[a]))}catch(f){if(f instanceof org.antlr.runtime.RecognitionException)this.reportError(f),this.recover(this.input,f);else throw f;}finally{}return a},primaryExpression:function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null,k=null,a=null;try{var l=8,l=this.dfa11.predict(this.input);switch(l){case 1:this.match(this.input,16,$MAExpressionParser.FOLLOW_LPAREN_in_primaryExpression689);this.pushFollow($MAExpressionParser.FOLLOW_expression_in_primaryExpression696);k=this.expression();this.state._fsp--;
this.match(this.input,17,$MAExpressionParser.FOLLOW_RPAREN_in_primaryExpression698);a=k;break;case 2:this.pushFollow($MAExpressionParser.FOLLOW_functionCall_in_primaryExpression711);k=this.functionCall();this.state._fsp--;a=k;break;case 3:b=this.match(this.input,18,$MAExpressionParser.FOLLOW_IDENTIFIER_in_primaryExpression723);a=this.NodeCreator.createVariableNode(b?b.getText():null);break;case 4:c=this.match(this.input,4,$MAExpressionParser.FOLLOW_NUMBER_in_primaryExpression735);a=this.NodeCreator.createConstantNode($MA.ConstantType.DOUBLE,
c?c.getText():null);break;case 5:d=this.match(this.input,19,$MAExpressionParser.FOLLOW_DATE_in_primaryExpression747);a=this.NodeCreator.createConstantNode($MA.ConstantType.DATE,d?d.getText():null);break;case 6:e=this.match(this.input,20,$MAExpressionParser.FOLLOW_TIME_in_primaryExpression761);a=this.NodeCreator.createConstantNode($MA.ConstantType.TIME,e?e.getText():null);break;case 7:f=this.match(this.input,19,$MAExpressionParser.FOLLOW_DATE_in_primaryExpression775);g=this.match(this.input,20,$MAExpressionParser.FOLLOW_TIME_in_primaryExpression781);
a=this.NodeCreator.createConstantNode($MA.ConstantType.DATETIME,(f?f.getText():null)+" "+(g?g.getText():null));break;case 8:h=this.match(this.input,21,$MAExpressionParser.FOLLOW_STRING_in_primaryExpression794);a=this.NodeCreator.createConstantNode($MA.ConstantType.STRING,h?h.getText():null);break}}catch(p){if(p instanceof org.antlr.runtime.RecognitionException)this.reportError(p),this.recover(this.input,p);else throw p;}finally{}return a},functionCall:function(){var a=null,b=null,c=null,a=null;try{b=
this.match(this.input,18,$MAExpressionParser.FOLLOW_IDENTIFIER_in_functionCall826);this.match(this.input,16,$MAExpressionParser.FOLLOW_LPAREN_in_functionCall828);var d=2,d=this.dfa12.predict(this.input);switch(d){case 1:this.pushFollow($MAExpressionParser.FOLLOW_arguments_in_functionCall837),c=this.arguments(),this.state._fsp--}this.match(this.input,17,$MAExpressionParser.FOLLOW_RPAREN_in_functionCall842);a=null!=c?this.NodeCreator.createFunctionNode(b?b.getText():null,c):this.NodeCreator.createFunctionNode(b?
b.getText():null,null)}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,e);else throw e;}finally{}return a},arguments:function(){var a=null,b=null,a=null,c=[];try{this.pushFollow($MAExpressionParser.FOLLOW_expression_in_arguments875);b=this.expression();this.state._fsp--;c.push(b);a:do{var d=2;22==this.input.LA(1)&&(d=1);switch(d){case 1:this.match(this.input,22,$MAExpressionParser.FOLLOW_COMMA_in_arguments883);this.pushFollow($MAExpressionParser.FOLLOW_expression_in_arguments889);
b=this.expression();this.state._fsp--;c.push(b);break;default:break a}}while(1);a=c}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,e);else throw e;}finally{}return a}},!0);org.antlr.lang.augmentObject($MAExpressionParser,{DFA4_eotS:"\x0B\uffff",DFA4_eofS:"\u0001\u0007\n\uffff",DFA4_minS:"\u0001\u0005\n\uffff",DFA4_maxS:"\u0001%\n\uffff",DFA4_acceptS:"\u0001\uffff\u0001\u0001\u0005\uffff\u0001\u0002\u0003\uffff",DFA4_specialS:"\x0B\uffff}>",
DFA4_transitionS:"\u0006\u0001\u0006\uffff\u0001\u0007\u0004\uffff\u0001\u0007\u000e\uffff\u0001\u0007          ".split(" ")});org.antlr.lang.augmentObject($MAExpressionParser,{DFA4_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_eotS),DFA4_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_eofS),DFA4_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA4_minS),DFA4_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA4_maxS),
DFA4_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_acceptS),DFA4_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_specialS),DFA4_transition:function(){var a=[],b,c=$MAExpressionParser.DFA4_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_transitionS[b]));return a}()});$MAExpressionParser.DFA4=function(a){this.recognizer=a;this.decisionNumber=4;this.eot=$MAExpressionParser.DFA4_eot;this.eof=
$MAExpressionParser.DFA4_eof;this.min=$MAExpressionParser.DFA4_min;this.max=$MAExpressionParser.DFA4_max;this.accept=$MAExpressionParser.DFA4_accept;this.special=$MAExpressionParser.DFA4_special;this.transition=$MAExpressionParser.DFA4_transition};org.antlr.lang.extend($MAExpressionParser.DFA4,org.antlr.runtime.DFA,{getDescription:function(){return"95:3: ( ( EQUAL | NEQ | GREATER | LESS | GE | LE ) right= additiveExpression )?"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA6_eotS:"\r\uffff",
DFA6_eofS:"\u0001\u0001\f\uffff",DFA6_minS:"\u0001\u0005\f\uffff",DFA6_maxS:"\u0001%\f\uffff",DFA6_acceptS:"\u0001\uffff\u0001\u0002\t\uffff\u0001\u0001\u0001\uffff",DFA6_specialS:"\r\uffff}>",DFA6_transitionS:"\u0006\u0001\u0002\x0B\u0004\uffff\u0001\u0001\u0004\uffff\u0001\u0001\u000e\uffff\u0001\u0001            ".split(" ")});org.antlr.lang.augmentObject($MAExpressionParser,{DFA6_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_eotS),DFA6_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_eofS),
DFA6_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA6_minS),DFA6_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA6_maxS),DFA6_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_acceptS),DFA6_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_specialS),DFA6_transition:function(){var a=[],b,c=$MAExpressionParser.DFA6_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_transitionS[b]));
return a}()});$MAExpressionParser.DFA6=function(a){this.recognizer=a;this.decisionNumber=6;this.eot=$MAExpressionParser.DFA6_eot;this.eof=$MAExpressionParser.DFA6_eof;this.min=$MAExpressionParser.DFA6_min;this.max=$MAExpressionParser.DFA6_max;this.accept=$MAExpressionParser.DFA6_accept;this.special=$MAExpressionParser.DFA6_special;this.transition=$MAExpressionParser.DFA6_transition};org.antlr.lang.extend($MAExpressionParser.DFA6,org.antlr.runtime.DFA,{getDescription:function(){return"()* loopback of 146:3: ( ( PLUS | DASH ) right= multiplicativeExpression )*"},
dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA8_eotS:"\u000f\uffff",DFA8_eofS:"\u0001\u0001\u000e\uffff",DFA8_minS:"\u0001\u0005\u000e\uffff",DFA8_maxS:"\u0001%\u000e\uffff",DFA8_acceptS:"\u0001\uffff\u0001\u0002\x0B\uffff\u0001\u0001\u0001\uffff",DFA8_specialS:"\u000f\uffff}>",DFA8_transitionS:"\b\u0001\u0002\r\u0002\uffff\u0001\u0001\u0004\uffff\u0001\u0001\u000e\uffff\u0001\u0001              ".split(" ")});org.antlr.lang.augmentObject($MAExpressionParser,{DFA8_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_eotS),
DFA8_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_eofS),DFA8_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA8_minS),DFA8_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA8_maxS),DFA8_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_acceptS),DFA8_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_specialS),DFA8_transition:function(){var a=[],b,c=$MAExpressionParser.DFA8_transitionS.length;
for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_transitionS[b]));return a}()});$MAExpressionParser.DFA8=function(a){this.recognizer=a;this.decisionNumber=8;this.eot=$MAExpressionParser.DFA8_eot;this.eof=$MAExpressionParser.DFA8_eof;this.min=$MAExpressionParser.DFA8_min;this.max=$MAExpressionParser.DFA8_max;this.accept=$MAExpressionParser.DFA8_accept;this.special=$MAExpressionParser.DFA8_special;this.transition=$MAExpressionParser.DFA8_transition};org.antlr.lang.extend($MAExpressionParser.DFA8,
org.antlr.runtime.DFA,{getDescription:function(){return"()* loopback of 178:3: ( ( STAR | SLASH ) right= factorExpression )*"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA9_eotS:"\u0010\uffff",DFA9_eofS:"\u0001\u0001\u000f\uffff",DFA9_minS:"\u0001\u0005\u000f\uffff",DFA9_maxS:"\u0001%\u000f\uffff",DFA9_acceptS:"\u0001\uffff\u0001\u0002\r\uffff\u0001\u0001",DFA9_specialS:"\u0010\uffff}>",DFA9_transitionS:"\n\u0001\u0001\u000f\u0001\uffff\u0001\u0001\u0004\uffff\u0001\u0001\u000e\uffff\u0001\u0001               ".split(" ")});
org.antlr.lang.augmentObject($MAExpressionParser,{DFA9_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_eotS),DFA9_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_eofS),DFA9_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA9_minS),DFA9_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA9_maxS),DFA9_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_acceptS),DFA9_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_specialS),
DFA9_transition:function(){var a=[],b,c=$MAExpressionParser.DFA9_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_transitionS[b]));return a}()});$MAExpressionParser.DFA9=function(a){this.recognizer=a;this.decisionNumber=9;this.eot=$MAExpressionParser.DFA9_eot;this.eof=$MAExpressionParser.DFA9_eof;this.min=$MAExpressionParser.DFA9_min;this.max=$MAExpressionParser.DFA9_max;this.accept=$MAExpressionParser.DFA9_accept;this.special=$MAExpressionParser.DFA9_special;
this.transition=$MAExpressionParser.DFA9_transition};org.antlr.lang.extend($MAExpressionParser.DFA9,org.antlr.runtime.DFA,{getDescription:function(){return"()* loopback of 208:3: ( CARET right= unaryExpression )*"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA11_eotS:"'\uffff",DFA11_eofS:'\u0002\uffff\u0001\b\u0001\uffff\u0001\u0018"\uffff',DFA11_minS:'\u0001\u0004\u0001\uffff\u0001\u0005\u0001\uffff\u0001\u0005"\uffff',DFA11_maxS:'\u0001\u0015\u0001\uffff\u0001%\u0001\uffff\u0001%"\uffff',
DFA11_acceptS:"\u0001\uffff\u0001\u0001\u0001\uffff\u0001\u0004\u0001\uffff\u0001\u0006\u0001\b\u0001\u0002\u0001\u0003\u000e\uffff\u0001\u0007\u0001\u0005\u000e\uffff",DFA11_specialS:"'\uffff}>",DFA11_transitionS:"\u0001\u0003\x0B\uffff\u0001\u0001\u0001\uffff\u0001\u0002\u0001\u0004\u0001\u0005\u0001\u0006  \x0B\b\u0001\u0007\u0001\b\u0004\uffff\u0001\b\u000e\uffff\u0001\b  \x0B\u0018\u0001\uffff\u0001\u0018\u0002\uffff\u0001\u0017\u0001\uffff\u0001\u0018\u000e\uffff\u0001\u0018                                  ".split(" ")});
org.antlr.lang.augmentObject($MAExpressionParser,{DFA11_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_eotS),DFA11_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_eofS),DFA11_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA11_minS),DFA11_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA11_maxS),DFA11_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_acceptS),
DFA11_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_specialS),DFA11_transition:function(){var a=[],b,c=$MAExpressionParser.DFA11_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_transitionS[b]));return a}()});$MAExpressionParser.DFA11=function(a){this.recognizer=a;this.decisionNumber=11;this.eot=$MAExpressionParser.DFA11_eot;this.eof=$MAExpressionParser.DFA11_eof;this.min=$MAExpressionParser.DFA11_min;this.max=
$MAExpressionParser.DFA11_max;this.accept=$MAExpressionParser.DFA11_accept;this.special=$MAExpressionParser.DFA11_special;this.transition=$MAExpressionParser.DFA11_transition};org.antlr.lang.extend($MAExpressionParser.DFA11,org.antlr.runtime.DFA,{getDescription:function(){return"239:1: primaryExpression returns [Expression expr] : ( LPAREN e= expression RPAREN | e= functionCall | id= IDENTIFIER | n= NUMBER | d= DATE | t= TIME | d1= DATE t1= TIME | s= STRING );"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,
{DFA12_eotS:"\n\uffff",DFA12_eofS:"\n\uffff",DFA12_minS:"\u0001\u0004\t\uffff",DFA12_maxS:"\u0001\u0015\t\uffff",DFA12_acceptS:"\u0001\uffff\u0001\u0001\u0007\uffff\u0001\u0002",DFA12_specialS:"\n\uffff}>",DFA12_transitionS:"\u0001\u0001\u0006\uffff\u0002\u0001\u0003\uffff\u0001\u0001\u0001\t\u0004\u0001         ".split(" ")});org.antlr.lang.augmentObject($MAExpressionParser,{DFA12_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_eotS),DFA12_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_eofS),
DFA12_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA12_minS),DFA12_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA12_maxS),DFA12_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_acceptS),DFA12_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_specialS),DFA12_transition:function(){var a=[],b,c=$MAExpressionParser.DFA12_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_transitionS[b]));
return a}()});$MAExpressionParser.DFA12=function(a){this.recognizer=a;this.decisionNumber=12;this.eot=$MAExpressionParser.DFA12_eot;this.eof=$MAExpressionParser.DFA12_eof;this.min=$MAExpressionParser.DFA12_min;this.max=$MAExpressionParser.DFA12_max;this.accept=$MAExpressionParser.DFA12_accept;this.special=$MAExpressionParser.DFA12_special;this.transition=$MAExpressionParser.DFA12_transition};org.antlr.lang.extend($MAExpressionParser.DFA12,org.antlr.runtime.DFA,{getDescription:function(){return"260:29: (args= arguments )?"},
dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{tokenNames:"<invalid> <EOR> <DOWN> <UP> NUMBER EQUAL NEQ GREATER LESS GE LE PLUS DASH STAR SLASH CARET LPAREN RPAREN IDENTIFIER DATE TIME STRING COMMA AT QUE SHP DOT LBRACKET RBRACKET WS SLCOMMENT MLCOMMENT DOUBLE_STRING_CHAR SINGLE_STRING_CHAR LETTER DIGIT ESC 'for' 'all' 'group'".split(" "),FOLLOW_expression_in_dw_expression94:new org.antlr.runtime.BitSet([2,0]),FOLLOW_relationalExpression_in_expression118:new org.antlr.runtime.BitSet([2,
32]),FOLLOW_37_in_expression135:new org.antlr.runtime.BitSet([0,192]),FOLLOW_38_in_expression160:new org.antlr.runtime.BitSet([2,0]),FOLLOW_39_in_expression181:new org.antlr.runtime.BitSet([16,0]),FOLLOW_NUMBER_in_expression189:new org.antlr.runtime.BitSet([2,0]),FOLLOW_additiveExpression_in_relationalExpression243:new org.antlr.runtime.BitSet([2018,0]),FOLLOW_EQUAL_in_relationalExpression262:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_NEQ_in_relationalExpression273:new org.antlr.runtime.BitSet([4003856,
0]),FOLLOW_GREATER_in_relationalExpression285:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_LESS_in_relationalExpression295:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_GE_in_relationalExpression306:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_LE_in_relationalExpression319:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_additiveExpression_in_relationalExpression342:new org.antlr.runtime.BitSet([2,0]),FOLLOW_multiplicativeExpression_in_additiveExpression382:new org.antlr.runtime.BitSet([6146,
0]),FOLLOW_PLUS_in_additiveExpression403:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_DASH_in_additiveExpression420:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_multiplicativeExpression_in_additiveExpression441:new org.antlr.runtime.BitSet([6146,0]),FOLLOW_factorExpression_in_multiplicativeExpression479:new org.antlr.runtime.BitSet([24578,0]),FOLLOW_STAR_in_multiplicativeExpression500:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_SLASH_in_multiplicativeExpression511:new org.antlr.runtime.BitSet([4003856,
0]),FOLLOW_factorExpression_in_multiplicativeExpression533:new org.antlr.runtime.BitSet([24578,0]),FOLLOW_unaryExpression_in_factorExpression571:new org.antlr.runtime.BitSet([32770,0]),FOLLOW_CARET_in_factorExpression584:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_unaryExpression_in_factorExpression595:new org.antlr.runtime.BitSet([32770,0]),FOLLOW_PLUS_in_unaryExpression635:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_DASH_in_unaryExpression645:new org.antlr.runtime.BitSet([4003856,0]),
FOLLOW_primaryExpression_in_unaryExpression662:new org.antlr.runtime.BitSet([2,0]),FOLLOW_LPAREN_in_primaryExpression689:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_expression_in_primaryExpression696:new org.antlr.runtime.BitSet([131072,0]),FOLLOW_RPAREN_in_primaryExpression698:new org.antlr.runtime.BitSet([2,0]),FOLLOW_functionCall_in_primaryExpression711:new org.antlr.runtime.BitSet([2,0]),FOLLOW_IDENTIFIER_in_primaryExpression723:new org.antlr.runtime.BitSet([2,0]),FOLLOW_NUMBER_in_primaryExpression735:new org.antlr.runtime.BitSet([2,
0]),FOLLOW_DATE_in_primaryExpression747:new org.antlr.runtime.BitSet([2,0]),FOLLOW_TIME_in_primaryExpression761:new org.antlr.runtime.BitSet([2,0]),FOLLOW_DATE_in_primaryExpression775:new org.antlr.runtime.BitSet([1048576,0]),FOLLOW_TIME_in_primaryExpression781:new org.antlr.runtime.BitSet([2,0]),FOLLOW_STRING_in_primaryExpression794:new org.antlr.runtime.BitSet([2,0]),FOLLOW_IDENTIFIER_in_functionCall826:new org.antlr.runtime.BitSet([65536,0]),FOLLOW_LPAREN_in_functionCall828:new org.antlr.runtime.BitSet([4134928,
0]),FOLLOW_arguments_in_functionCall837:new org.antlr.runtime.BitSet([131072,0]),FOLLOW_RPAREN_in_functionCall842:new org.antlr.runtime.BitSet([2,0]),FOLLOW_expression_in_arguments875:new org.antlr.runtime.BitSet([4194306,0]),FOLLOW_COMMA_in_arguments883:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_expression_in_arguments889:new org.antlr.runtime.BitSet([4194306,0])})})();$MA.ExpressionType={UNKNOWN:0,BOOL:1,DOUBLE:2,DATETIME:3,STRING:4};$MA.Expression=function(){this._type=$MA.ExpressionType.UNKNOWN};
$MA.Expression.parse=function(a,b){var c=null;try{var d=new org.antlr.runtime.ANTLRStringStream(a),e=new $MAExpressionLexer(d),f=new org.antlr.runtime.CommonTokenStream(e),g=new $MAExpressionParser(f);g.NodeCreator=new $MA.NodeCreator(b);c=g.dw_expression()}catch(h){}return c};$MA.Expression.prototype.booleanValue=function(){var a=!1,b=this.evaluate();null!=b&&("boolean"==typeof b?a=b:"number"==typeof b&&(a=0<b));return a};
$MA.Expression.prototype.doubleValue=function(){var a=NaN,b=this.evaluate();null!=b&&(a="number"==typeof b?b:"boolean"==typeof b?b?1:0:parseFloat(b.toString()));return a};$MA.Expression.prototype.dateValue=function(){var a=null,b=this.evaluate();null!=b&&b instanceof Date&&(a=b);return a};$MA.Expression.prototype.stringValue=function(){return this.toString()};$MA.Expression.prototype.evaluate=function(){return null};$MA.Expression.prototype.getArgs=function(){return this._args};
$MA.Expression.prototype.getType=function(){return this._type};$MA.Expression.prototype.toString=function(){var a=null,b=this.evaluate();null!=b&&(a=b instanceof Date?$MA.format(b):b.toString());return a};$MA.AggregateType={ALL:0,GROUP:1};$MA.Expression.AggregateNode=function(a,b,c,d){$MA.Expression.call(this);this._dvObj=a;this._expr=b;this._type=b.getType();this._aggrType=c;this._level=d};$MA.Expression.AggregateNode.prototype=new $MA.Expression;$MA.Expression.AggregateNode.prototype.evaluate=function(){return this._expr.evaluate()};
$MA.Expression.ColumnNode=function(a,b,c){$MA.Expression.call(this);this._id=a;this._dvObj=b;this._table=c};$MA.Expression.ColumnNode.prototype=new $MA.Expression;$MA.Expression.ColumnNode.prototype.evaluate=function(){return(this._table?this._table.getRow(this._dvObj.exprRow):this._dvObj.getRow(this._dvObj.exprRow))[this._id]};$MA.ConstantType={DOUBLE:0,STRING:1,DATE:2,TIME:3,DATETIME:4};
$MA.Expression.ConstantNode=function(a,b){$MA.Expression.call(this);switch(a){case $MA.ConstantType.DOUBLE:this._value=parseFloat(b.toString());this._type=$MA.ExpressionType.DOUBLE;break;case $MA.ConstantType.STRING:this._value=b;this._type=$MA.ExpressionType.STRING;break;case $MA.ConstantType.DATE:this._value=$MA.parseDate(b);this._value.isDate=!0;this._type=$MA.ExpressionType.DATETIME;break;case $MA.ConstantType.TIME:this._value=$MA.parseTime(b);this._value.isTime=!0;this._type=$MA.ExpressionType.DATETIME;
break;case $MA.ConstantType.DATETIME:this._value=$MA.parseDateTime(b),this._type=$MA.ExpressionType.DATETIME}};$MA.Expression.ConstantNode.prototype=new $MA.Expression;$MA.Expression.ConstantNode.prototype.evaluate=function(){return this._value};$MA.Expression.ConstantNode.prototype.verify=function(){return $MA.ExpressionErrors.OK};$MA.Expression.FunctionNode=function(a,b){$MA.Expression.call(this);this._args=b;void 0!=a&&(this._name=a.toLowerCase(),this._type=$MA.Expression.Functions.getFunctionReturnType(this._name))};
$MA.Expression.FunctionNode.prototype=new $MA.Expression;$MA.Expression.FunctionNode.prototype.evaluate=function(){return $MA.Expression.Functions.invoke(this._name,this._args)};$MA.OperatorType={ADD:0,DIVIDE:1,EQUAL:2,EXPON:3,GREATERTHAN:4,GREATERTHANEQUAL:5,LESSTHAN:6,LESSTHANEQUAL:7,MINUS:8,MULTIPLY:9,NOTEQUAL:10,UNARYMINUS:11};
$MA.Expression.OperatorFunctionNode=function(a,b){$MA.Expression.FunctionNode.call(this,void 0,b);this._operId=a;this._type=$MA.Expression.OperatorFunctions.getOperatorReturnType(a,this._args)};$MA.Expression.OperatorFunctionNode.prototype=new $MA.Expression.FunctionNode;$MA.Expression.OperatorFunctionNode.prototype.evaluate=function(){return $MA.Expression.OperatorFunctions.invoke(this._operId,this._args)};
$MA.Expression.VariableNode=function(a,b){$MA.Expression.call(this);this._dvObj=a;this._name=b;this.initialize()};$MA.Expression.VariableNode.prototype=new $MA.Expression;
$MA.Expression.VariableNode.prototype.initialize=function(){if(void 0==this._id){var a=this._dvObj;if(void 0!=a)if(a=a.getTableColumn(this._name),void 0!=a)switch(this._id=a.id,a.type){case $MA.TableColumnType.NUMBER:case $MA.TableColumnType.BOOLEAN:this._type=$MA.ExpressionType.DOUBLE;break;case $MA.TableColumnType.STRING:this._type=$MA.ExpressionType.STRING;break;case $MA.TableColumnType.DATETIME:this._type=$MA.ExpressionType.DATETIME;break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoExpressionType",
"Unsupported expression type"))}else if("function"==typeof $MA.BI&&(a=$MA.BI.GetDAVariable(this._name),void 0!=a)){if(a.variableType)switch(a.variableType.toLowerCase()){case "double":case "float":case "integer":case "boolean":this._type=$MA.ExpressionType.DOUBLE;break;case "enum":this._type=$MA.ExpressionType.STRING;break;case "date":this._type=$MA.ExpressionType.DATETIME}else void 0!=a.value&&(this._type="number"==typeof a.value||"boolean"==typeof a.value?$MA.ExpressionType.DOUBLE:"date"==typeof a.value?
$MA.ExpressionType.DATETIME:$MA.ExpressionType.STRING);this._variableindex=a.variableindex}}};$MA.Expression.VariableNode.prototype.evaluate=function(){var a;void 0!=this._id?a=this._dvObj.getItem(this._dvObj.exprRow,this._id):void 0!=this._variableindex&&(a=$MA.BI.DAVariables.items[this._variableindex].getValue());return a};$MA.Expression.prototype.getVariableIndex=function(){return this._variableindex};$MA.NodeCreator=function(a){this._dvObj=a};
$MA.NodeCreator.prototype.createConstantNode=function(a,b){return new $MA.Expression.ConstantNode(a,b)};$MA.NodeCreator.prototype.createVariableNode=function(a){return new $MA.Expression.VariableNode(this._dvObj,a)};$MA.NodeCreator.prototype.createOperatorNode=function(a,b){return new $MA.Expression.OperatorFunctionNode(a,b)};$MA.NodeCreator.prototype.createFunctionNode=function(a,b){var c=null;$MA.Expression.Functions.isSupported(a,b)&&(c=new $MA.Expression.FunctionNode(a,b));return c};
$MA.NodeCreator.prototype.createAggregateNode=function(a,b,c){c=parseInt(c,10);return new $MA.Expression.AggregateNode(this._dvObj,a,b,c)};
$MA.Expression.FunctionId={ABS:0,AND:1,CEILING:2,COS:3,DATE:4,DAY:5,DAYNUMBER:6,EXP:7,FACT:8,FLOOR:9,HOUR:10,IF:11,INT:12,LEFT:13,LEFTTRIM:14,LEN:15,LOG:16,LOGTEN:17,LOWER:18,MATCH:19,MID:20,MINUTE:21,MOD:22,MONTH:23,NEG:24,NOT:25,OR:26,POS:27,RELATIVEDATE:28,RELATIVETIME:29,REPLACE:30,RIGHT:31,RIGHTTRIM:32,ROUND:33,SECOND:34,SIGN:35,SIN:36,SQRT:37,STRING:38,TAN:39,TRIM:40,TRUNCATE:41,UPPER:42,WORDCAP:43,YEAR:44};$MA.Expression.Functions=function(){};$MA.Expression.Functions.SIGNATURE=0;
$MA.Expression.Functions.RETURNTYPE=1;$MA.Expression.Functions.FUNCTION=2;$MA.Expression.Functions._abs=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:0<a?a:-a};$MA.Expression.Functions._and=function(a){var b=a[1];return a[0].booleanValue()?b.booleanValue():!1};$MA.Expression.Functions._ceiling=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.ceil(a)};$MA.Expression.Functions._cos=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.cos(a)};
$MA.Expression.Functions._date=function(a){if(3>a.length)return null;var b=a[0].doubleValue(),c=a[1].doubleValue(),d=a[2].doubleValue(),b=new Date(b,c-1,d);3<a.length&&(c=a[3].doubleValue(),b.setHours(c));4<a.length&&(c=a[4].doubleValue(),b.setMinutes(c));5<a.length&&(a=a[5].doubleValue(),b.setSeconds(a));return b};$MA.Expression.Functions._day=function(a){a=a[0].dateValue();return null==a?NaN:a.getDate()};
$MA.Expression.Functions._dayNumber=function(a){a=a[0].dateValue();return null==a?NaN:a.getDay()+1};$MA.Expression.Functions._exp=function(a){a=a[0].doubleValue();if(isNaN(a))a=NaN;else{var b=Math.exp(1);a=Math.pow(b,a)}return a};$MA.Expression.Functions._fact=function(a){var b=a[0].doubleValue();a=Math.floor(b);if(isNaN(b)||0>=a||a!=b||171<=a)a=NaN;else{var b=1,c;for(c=2;c<=a;c+=1)b*=c;a=b}return a};$MA.Expression.Functions._floor=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.floor(a)};
$MA.Expression.Functions._hour=function(a){var b=a[0],c=a[1],d=a[2];1==a.length?(a=b.dateValue(),a=null==a?NaN:a.getHours()):a=b.booleanValue()?c.evaluate():d.evaluate();return a};$MA.Expression.Functions._if=function(a){var b=a[1],c=a[2];return a[0].booleanValue()?b.evaluate():c.evaluate()};$MA.Expression.Functions._int=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.floor(a)};
$MA.Expression.Functions._left=function(a){var b=a[1];a=a[0].stringValue();if(null==a)return null;b=b.doubleValue();1>b?a=null:(b=Math.min(b,a.length),a=a.substring(0,b));return a};$MA.Expression.Functions._leftTrim=function(a){a=a[0].stringValue();return null!=a?a.replace(/^\s+/,""):null};$MA.Expression.Functions._len=function(a){a=a[0].stringValue();return null!=a?a.length:null};$MA.Expression.Functions._log=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.log(a)};
$MA.Expression.Functions._logTen=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.log(a)/Math.log(10)};$MA.Expression.Functions._lower=function(a){a=a[0].stringValue();return null!=a?a.toLowerCase():null};$MA.Expression.Functions._match=function(a){var b=a[1];a=a[0].stringValue();b=b.stringValue();return null==a||null==b?!1:void 0!=a.match(RegExp(b))};
$MA.Expression.Functions._mid=function(a){var b=a[1],c=a[2];a=a[0].stringValue();if(null==a)return null;var b=b.doubleValue(),d=NaN,d=void 0!=c?c.doubleValue():a.length(),c=null;if(isNaN(b)||isNaN(d))c=null;else{var e=0;0<b&&(e=b-1);b=d;a.length>e+b?c=a.substring(e,e+b):a.length>e&&(c=a.substring(e,a.length))}return c};$MA.Expression.Functions._minute=function(a){a=a[0].dateValue();return null==a?NaN:a.getMinutes()};
$MA.Expression.Functions._mod=function(a){var b=a[1];a=a[0].doubleValue();if(isNaN(a))return!1;b=b.doubleValue();return isNaN(b)?!1:a%b};$MA.Expression.Functions._month=function(a){a=a[0].dateValue();return null==a?null:a.getMonth()+1};$MA.Expression.Functions._neg=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:-a};$MA.Expression.Functions._not=function(a){return!a[0].booleanValue()};$MA.Expression.Functions._or=function(a){var b=a[1];return a[0].booleanValue()?!0:b.booleanValue()};
$MA.Expression.Functions._pos=function(a){var b=a[1],c=a[2];a=a[0].stringValue();var b=b.stringValue(),d=0;if(null==a||null==b)return NaN;void 0!=c&&(d=c.doubleValue(),0<d&&(d-=1));return isNaN(d)?NaN:a.indexOf(b,d)+1};$MA.Expression.Functions._relativeDate=function(a){var b=a[1];a=a[0].dateValue();if(null==a)return null;b=b.doubleValue();if(isNaN(b))return null;a.setDate(a.getDate()+b);return a};
$MA.Expression.Functions._relativeTime=function(a){var b=a[1];a=a[0].dateValue();if(null==a)return null;b=b.doubleValue();if(isNaN(b))return null;var c=a.getTime();a.setTime(c+1E3*b);return a};$MA.Expression.Functions._replace=function(a){var b=a[1],c=a[2],d=a[3];a=a[0].stringValue();b=b.doubleValue();c=c.doubleValue();d=d.stringValue();if(null==a||isNaN(b)||isNaN(c)||null==d)return null;0<b&&(b-=1);c=a.substring(b,b+c);return a.replace(c,d)};
$MA.Expression.Functions._right=function(a){var b=a[1];a=a[0].stringValue();if(null==a)return null;b=b.doubleValue();1>b?a=null:(b=Math.min(b,a.length),a=a.substring(a.length-b,a.length));return a};$MA.Expression.Functions._round=function(a){var b=a[1];a=a[0].doubleValue();b=b.doubleValue();return isNaN(a)||isNaN(b)?NaN:parseFloat(a.toFixed(b))};$MA.Expression.Functions._rightTrim=function(a){a=a[0].stringValue();return null!=a?a.replace(/\s+$/,""):null};
$MA.Expression.Functions._second=function(a){a=a[0].dateValue();return null==a?null:a.getSeconds()};$MA.Expression.Functions._sign=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:0>a?-1:0<a?1:0};$MA.Expression.Functions._sin=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.sin(a)};$MA.Expression.Functions._sqrt=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.sqrt(a)};$MA.Expression.Functions._string=function(a){return a[0].stringValue()};
$MA.Expression.Functions._tan=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.tan(a)};$MA.Expression.Functions._trim=function(a){a=a[0].stringValue();return null!=a?a.trim():null};$MA.Expression.Functions._truncate=function(a){var b=a[0].doubleValue(),c=0;isNaN(b)?a=NaN:(2==a.length&&(c=a[1].doubleValue()),c=Math.pow(10,c),b*=c,b=0<=b?Math.floor(b+5E-15):Math.ceil(b-5E-15),a=b/c);return a};$MA.Expression.Functions._upper=function(a){a=a[0].stringValue();return null!=a?a.toUpperCase():null};
$MA.Expression.Functions._wordCap=function(a){a=a[0].stringValue();if(null!=a){a=a.toLowerCase();var b="",c,d=!0,e=a.length,f;for(f=0;f<e;f++)c=a.charAt(f),d&&" "!=c?(b+=c.toUpperCase(),d=!1):(" "==c&&(d=!0),b+=c);return b}return null};$MA.Expression.Functions._year=function(a){a=a[0].dateValue();return null==a?null:a.getFullYear()};
$MA.Expression.Functions.ids={abs:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._abs],and:["bb",$MA.ExpressionType.BOOLEAN,$MA.Expression.Functions._and],ceiling:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._ceiling],cos:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._cos],date:["s",$MA.ExpressionType.DATETIME,$MA.Expression.Functions._date],day:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._day],daynumber:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._dayNumber],
exp:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._exp],fact:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._fact],floor:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._floor],hour:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._hour],"if":["boo",$MA.ExpressionType.Unknown,$MA.Expression.Functions._if],"int":["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._int],left:["sx",$MA.ExpressionType.STRING,$MA.Expression.Functions._left],lefttrim:["s",$MA.ExpressionType.STRING,
$MA.Expression.Functions._leftTrim],len:["s",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._len],log:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._log],logten:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._logTen],lower:["s",$MA.ExpressionType.STRING,$MA.Expression.Functions._lower],match:["ss",$MA.ExpressionType.BOOL,$MA.Expression.Functions._match],mid:["sxX",$MA.ExpressionType.STRING,$MA.Expression.Functions._mid],minute:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._minute],
mod:["xx",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._mod],month:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._month],neg:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._neg],not:["b",$MA.ExpressionType.BOOLEAN,$MA.Expression.Functions._not],or:["bb",$MA.ExpressionType.BOOLEAN,$MA.Expression.Functions._or],pos:["ssX",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._pos],relativedate:["dx",$MA.ExpressionType.DATETIME,$MA.Expression.Functions._relativeDate],relativetime:["dx",
$MA.ExpressionType.DATETIME,$MA.Expression.Functions._relativeTime],replace:["sxxs",$MA.ExpressionType.STRING,$MA.Expression.Functions._replace],right:["sx",$MA.ExpressionType.STRING,$MA.Expression.Functions._right],righttrim:["s",$MA.ExpressionType.STRING,$MA.Expression.Functions._rightTrim],round:["xx",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._round],second:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._second],sign:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._sign],
sin:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._sin],sqrt:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._sqrt],string:["o",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._string],tan:["x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._tan],trim:["s",$MA.ExpressionType.STRING,$MA.Expression.Functions._trim],truncate:["xX",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._truncate],upper:["s",$MA.ExpressionType.STRING,$MA.Expression.Functions._upper],wordcap:["s",$MA.ExpressionType.STRING,
$MA.Expression.Functions._wordCap],year:["d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._year]};$MA.Expression.Functions.isSupported=function(a,b){return void 0!=this.ids[a.toLowerCase()]};$MA.Expression.Functions.invoke=function(a,b){var c=null,d=this.ids[a];d&&(c=(0,d[this.FUNCTION])(b));return c};$MA.Expression.Functions.getFunctionSignature=function(a){var b=null;(a=this.ids[a])&&(b=a[this.SIGNATURE]);return b};
$MA.Expression.Functions.getFunctionReturnType=function(a){var b=$MA.ExpressionType.Unknown;(a=this.ids[a])&&(b=a[this.RETURNTYPE]);return b};$MA.Expression.OperatorFunctions=function(){};$MA.Expression.OperatorFunctions.SIGNATURE=0;$MA.Expression.OperatorFunctions.RETURNTYPE=1;$MA.Expression.OperatorFunctions.FUNCTION=2;
$MA.Expression.OperatorFunctions._add=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=null;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()+a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()+a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=b.stringValue()+a.stringValue());return d};
$MA.Expression.OperatorFunctions._divide=function(a){var b=a[0];a=a[1];var c=null;$MA.Expression.OperatorFunctions.getReturnType(b,a)==$MA.ExpressionType.DOUBLE&&(c=b.doubleValue()/a.doubleValue());return c};
$MA.Expression.OperatorFunctions._equal=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()==a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()==a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=0==$MA.Expression.OperatorFunctions.compareDate(b,a));return d};
$MA.Expression.OperatorFunctions._expOn=function(a){var b=a[1];a=a[0].doubleValue();b=b.doubleValue();if(isNaN(a)||isNaN(b))a=NaN;else if(0>a&&0<b&&1>b){var c=Math.exp(1)/b;a=Math.floor(c)!=c?NaN:(c/2==c)/2?NaN:-Math.pow(-a,b)}else a=Math.pow(a,b);return a};
$MA.Expression.OperatorFunctions._greaterThan=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()>a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()>a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=0<$MA.Expression.OperatorFunctions.compareDate(b,a));return d};
$MA.Expression.OperatorFunctions._greaterThanEqual=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()>=a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()>=a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=0<=$MA.Expression.OperatorFunctions.compareDate(b,a));return d};
$MA.Expression.OperatorFunctions._lessThan=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()<a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()<a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=0>$MA.Expression.OperatorFunctions.compareDate(b,a));return d};
$MA.Expression.OperatorFunctions._lessThanEqual=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()<=a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()<=a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=0>=$MA.Expression.OperatorFunctions.compareDate(b,a));return d};
$MA.Expression.OperatorFunctions._minus=function(a){var b=a[0];a=a[1];var c=!1;$MA.Expression.OperatorFunctions.getReturnType(b,a)==$MA.ExpressionType.DOUBLE&&(c=b.doubleValue()-a.doubleValue());return c};$MA.Expression.OperatorFunctions._multiply=function(a){var b=a[0];a=a[1];var c=!1;$MA.Expression.OperatorFunctions.getReturnType(b,a)==$MA.ExpressionType.DOUBLE&&(c=b.doubleValue()*a.doubleValue());return c};
$MA.Expression.OperatorFunctions._notEqual=function(a){var b=a[0];a=a[1];var c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()!=a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()!=a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=0!=$MA.Expression.OperatorFunctions.compareDate(b,a));return d};$MA.Expression.OperatorFunctions._unaryMinus=function(a){a=a[0].doubleValue();return isNaN(a)?a:-a};
$MA.Expression.OperatorFunctions.ids=[["oo",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._add],["xx",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._divide],["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._equal],["xx",$MA.ExpressionType.DOUBLE,$MA.Expression.OperatorFunctions._expOn],["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._greaterThan],["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._greaterThanEqual],["oo",$MA.ExpressionType.BOOL,
$MA.Expression.OperatorFunctions._lessThan],["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._lessThanEqual],["xx",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._minus],["xx",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._multiply],["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._notEqual],["x",$MA.ExpressionType.UNARYMINUS,$MA.Expression.OperatorFunctions._unaryMinus]];
$MA.Expression.OperatorFunctions.invoke=function(a,b){var c=null,d=this.ids[a];d&&(c=(0,d[this.FUNCTION])(b));return c};$MA.Expression.OperatorFunctions.getFunctionSignature=function(a){var b=null;(a=this.ids[a])&&(b=a[this.SIGNATURE]);return b};
$MA.Expression.OperatorFunctions.getReturnType=function(a,b){var c=a.getType(),d=b.getType();return void 0==c&&void 0!=d?d:void 0==d&&void 0!=c?c:c==$MA.ExpressionType.DOUBLE&&d==$MA.ExpressionType.DOUBLE?$MA.ExpressionType.DOUBLE:c==$MA.ExpressionType.DATETIME&&d==$MA.ExpressionType.DATETIME?$MA.ExpressionType.DATETIME:$MA.ExpressionType.STRING};
$MA.Expression.OperatorFunctions.getOperatorReturnType=function(a,b){var c=this.ids[a];if(c)switch(a){case $MA.OperatorType.ADD:case $MA.OperatorType.DIVIDE:case $MA.OperatorType.MINUS:case $MA.OperatorType.MULTIPLY:return this.getReturnType(b[0],b[1]);default:return c[this.RETRUNTYPE]}return $MA.ExpressionType.UNKNOWN};$MA.Expression.OperatorFunctions.compareDate=function(a,b){if(void 0==a||void 0==b)return!1;var c=a.dateValue(),d=b.dateValue();return void 0==c?-1:void 0==d?1:c.getTime()-d.getTime()};
$MA.Point=function(a,b){this.x=a;this.y=b};$MA.Brush=function(a){this.color=$MA.getColorInt(a)};$MA.Brush.prototype.toString=function(){var a;if("number"==typeof this.color){for(a=Number(this.color).toString(16);6>a.length;)a="0"+a;a="#"+a}else a="string"==typeof this.color?this.color:this.color.toString();return a};$MA.Brush.prototype.clone=function(){return new $MA.Brush(this.color)};$MA.Brushes=function(){};$MA.Brushes.white=new $MA.Brush(16777215);$MA.Brushes.black=new $MA.Brush(0);
$MA.Brushes.gray=new $MA.Brush(7829367);$MA.Brushes.transparent=new $MA.Brush("transparent");$MA.GradientBrush=function(a,b){this.colorStops=a;this.direction=b};$MA.GradientBrush.prototype.createLinearGradient=function(a,b,c,d,e){a=1==this.direction?a.createLinearGradient(b,c,b,e):2==this.direction?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,d,e);for(b=0;b<this.colorStops.length;b++)c=this.colorStops[b],a.addColorStop(c[0],c[1]);return a};
$MA.GradientBrush.prototype.createRadialGradient=function(a,b,c,d,e,f,g){a=a.createRadialGradient(b,c,d,e,f,g);for(b=0;b<this.colorStops.length;b++)c=this.colorStops[b],a.addColorStop(c[0],c[1]);return a};$MA.ContextHelper=function(){};
$MA.ContextHelper.roundRect=function(a,b,c,d,e,f){a.moveTo(b,c+f);a.lineTo(b,c+e-f);a.quadraticCurveTo(b,c+e,b+f,c+e);a.lineTo(b+d-f,c+e);a.quadraticCurveTo(b+d,c+e,b+d,c+e-f);a.lineTo(b+d,c+f);a.quadraticCurveTo(b+d,c,b+d-f,c);a.lineTo(b+f,c);a.quadraticCurveTo(b,c,b,c+f)};
$MA.ContextHelper.drawStar=function(a,b,c,d,e,f,g){a.beginPath();e-=3;d/=2;var h=0.4;3==g&&(h=0.3);var k=d*h,l=e;e*=h;for(h=0;h<=2*g;++h){var p=h*Math.PI/g-Math.PI/2,m=0==h%2?d:k;a.lineTo(b+(0==h%2?l:e)*Math.cos(p),c+m*Math.sin(p))}f?a.stroke():a.fill();a.closePath()};
$MA.ContextHelper.drawTriangle=function(a,b,c,d,e,f){a.beginPath();"bottom"==f?(a.moveTo(b-d,c+e),a.lineTo(b+d,c+e),a.lineTo(b,c-e)):"left"==f?(a.moveTo(b-d,c+e),a.lineTo(b-d,c-e),a.lineTo(b+d,c)):"right"==f?(a.moveTo(b+d,c+e),a.lineTo(b+d,c-e),a.lineTo(b-d,c)):"top"==f&&(a.moveTo(b-d,c-e),a.lineTo(b+d,c-e),a.lineTo(b,c+e));a.closePath();a.fill();a.lineWidth=1;a.stroke()};$MA.ContextHelper.drawCircle=function(a,b,c,d){a.beginPath();a.arc(b,c,d,0,2*Math.PI,!0);a.closePath()};
$MA.ContextHelper.drawDiamond=function(a,b,c,d,e){a.beginPath();a.moveTo(b-d,c);a.lineTo(b,c-e);a.lineTo(b+d,c);a.lineTo(b,c+e);a.lineTo(b-d,c);a.closePath()};$MA.getStrokeInsetColors=function(a){a=$MA.getColorInt(a);var b=$MA.rgb2hsv((a&16711680)>>16,(a&65280)>>8,a&255);a=$MA.hsv2rgb(b[0],b[1],0.75*b[2]);b=$MA.hsv2rgb(b[0],0.5*b[1],1);a="rgb("+Math.round(a[0])+","+Math.round(a[1])+","+Math.round(a[2])+")";b="rgb("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+")";return[a,b]};
$MA.Graph=function(a,b){this.id=a;b instanceof Array?this.graphTypes=b:"string"!==typeof b&&(b="column");"string"===typeof b&&(this.graphTypes=[],this.graphTypes.push({name:"default",type:b}));this.graphObjs=[];this.seriesNames=new $MA.Hash;var c,d=this.graphTypes.length;for(c=0;c<d;c++){b=this.graphTypes[c];var e=this.createGraphObject(b.type);e.name=b.name;e.graphType=b.type;e.seriesStates=new $MA.Hash;e.legendStates=new $MA.Hash;if("pie"===b.type||"donut"===b.type)e.seriesMasks=new $MA.Hash;this.graphObjs.push(e)}0<
this.graphObjs.length&&(this.graphObj=this.graphObjs[0],this.graphType=this.graphObj.graphType)};$MA.Graph.prototype.bind=function(a,b){void 0==this.events&&(this.events=new $MA.Hash);this.events.set(a,b)};$MA.Graph.prototype.unbind=function(a){this.events&&this.events.remove(a)};$MA.Graph.prototype.trigger=function(a,b){if(this.events){var c=this.events.get(a);c&&c(b)}};
$MA.Graph.prototype.createGraphObject=function(a){var b=null;switch(a){case "column":b=new $MA.Graph.ColumnGraphObject(this);break;case "hierarchycolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=!0;break;case "waterfallcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isWaterfall=!0;break;case "hierarchywaterfallcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=b.isWaterfall=!0;break;case "stackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isStacked=!0;break;case "line":b=
new $MA.Graph.LineGraphObject(this);break;case "stackedline":b=new $MA.Graph.LineGraphObject(this);b.isStacked=!0;break;case "pie":b=new $MA.Graph.PieGraphObject(this);break;case "donut":b=new $MA.Graph.PieGraphObject(this);b.isDonut=!0;break;case "bubble":b=new $MA.Graph.BubbleGraphObject(this);break;case "hundredpercentstackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isStacked=!0;b.isHundredPercent=!0;break;case "tablebar":b=new $MA.Graph.TableBarGraphObject(this);break;case "waterfallbar":b=
new $MA.Graph.TableBarGraphObject(this);b.isWaterfall=!0;break;case "verticalline":b=new $MA.Graph.TableBarGraphObject(this);b.isVertical=!0;break;case "hierarchyline":b=new $MA.Graph.LineGraphObject(this);b.isHierarchy=!0;break;case "hierarchystackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=!0;b.isStacked=!0;break;case "hierarchy100pctstackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=!0;b.isStacked=!0;b.isHundredPercent=!0;break;default:b=new $MA.Graph.ColumnGraphObject(this)}return b};
$MA.Graph.prototype.getAllGraphObjs=function(a){var b,c=[];if(a)c.push(this.getGraphObj(a));else for(a=0,b=this.graphObjs.length;a<b;a++)c.push(this.graphObjs[a]);return c};$MA.Graph.MAXLINEWIDTH=5;$MA.Graph.TITLE=0;$MA.Graph.ANIMATION=1;$MA.Graph.FONT=2;$MA.Graph.MONOCOLOR=3;$MA.Graph.MONOSYMBOL=4;$MA.Graph.PALETTE=5;$MA.Graph.FONTBRUSH=6;$MA.Graph.FIRSTITEM=7;$MA.Graph.ITEMINCR=8;$MA.Graph.DATAPOINTSCOLOR=9;$MA.Graph.HORIZONTALBARHEIGHT=10;$MA.Graph.SHOWDOTSWIDTH=11;$MA.Graph.GRAPHLINEWIDTH=12;
$MA.Graph.BUBBLEBORDERCOLOR=13;$MA.Graph.BUBBLEMINISIZE=14;$MA.Graph.SYMBOLPALETTE=15;$MA.Graph.MAXPIES=16;$MA.Graph.TOTALFORMAT=17;$MA.Graph.BARCHARTTABLEWIDTH=18;$MA.Graph.NUMBEROFVISIBLECATEGORIES=19;
$MA.Graph.propertyIds={title:$MA.Graph.TITLE,animation:$MA.Graph.ANIMATION,font:$MA.Graph.FONT,monocolor:$MA.Graph.MONOCOLOR,monosymbol:$MA.Graph.MONOSYMBOL,palette:$MA.Graph.PALETTE,fontbrush:$MA.Graph.FONTBRUSH,firstitem:$MA.Graph.FIRSTITEM,itemincr:$MA.Graph.ITEMINCR,datapointscolor:$MA.Graph.DATAPOINTSCOLOR,horizontalbarheight:$MA.Graph.HORIZONTALBARHEIGHT,showdotswidth:$MA.Graph.SHOWDOTSWIDTH,graphlinewidth:$MA.Graph.GRAPHLINEWIDTH,bubblebordercolor:$MA.Graph.BUBBLEBORDERCOLOR,bubbleminisize:$MA.Graph.BUBBLEMINISIZE,
symbolpalette:$MA.Graph.SYMBOLPALETTE,maxpies:$MA.Graph.MAXPIES,totalformat:$MA.Graph.TOTALFORMAT,barcharttablewidth:$MA.Graph.BARCHARTTABLEWIDTH,numberofvisiblecategories:$MA.Graph.NUMBEROFVISIBLECATEGORIES};
$MA.Graph.prototype.setProperty=function(a,b,c){var d=$MA.Graph.propertyIds[a.toLowerCase()];if(void 0==d)return!1;a=this.getAllGraphObjs(c);var e=a.length;switch(d){case $MA.Graph.TITLE:for(d=0;d<e;d++)a[d].title=b;break;case $MA.Graph.ANIMATION:if("none"===b||1<e)b=void 0;for(d=0;d<e;d++)a[d].animation=b;break;case $MA.Graph.FONT:for(d=0;d<e;d++)a[d].titleDisplayDef.font.setFamily(b),a[d].pieDisplayDef.font.setFamily(b),this.setAxisProperty("AxisFont","series",b);break;case $MA.Graph.MONOCOLOR:a[0].setMonoColor(b);
break;case $MA.Graph.MONOSYMBOL:for(d=0;d<e;d++)a[d]instanceof $MA.Graph.BubbleGraphObject&&(a[d].monoSymbol=b);break;case $MA.Graph.PALETTE:if("primaryaxis"===b[1]||"secondaryaxis"===b[1])for(d=0;d<e;d++)a[d].setPalette(b[0],b[1]);else for(c=b[1],d=0;d<e;d++)a[d].name===c&&a[d].setPalette(b[0],b[1]);break;case $MA.Graph.FONTBRUSH:for(d=0;d<e;d++)a[d].titleDisplayDef.foreground=b,a[d].legendDisplayDef.foreground=b,a[d].pieDisplayDef.foreground=b,this.setAxisProperty("AxisFontBrush","category",b),
this.setAxisProperty("AxisFontBrush","values",b),this.setAxisProperty("AxisFontBrush","series",b);break;case $MA.Graph.FIRSTITEM:for(d=0;d<e;d++)if(a[d].name===c||!c&&0===d){a[d].firstItem=b;break}break;case $MA.Graph.ITEMINCR:for(var f=!0,d=0;d<e;d++)if("line"!==a[d].graphType){f=!1;break}if(1===e&&"line"===a[0].graphType||f)for(d=0;d<e;d++)a[d].itemIncr=1;else for(d=0;d<e;d++)if(c===a[d].name||void 0===c)a[d].itemIncr=b;break;case $MA.Graph.DATAPOINTSCOLOR:for(d=0;d<e;d++)a[d].dataPointsColor=b;
break;case $MA.Graph.HORIZONTALBARHEIGHT:a[0]instanceof $MA.Graph.TableBarGraphObject&&a[0].setHorizontalBarHeight(b);break;case $MA.Graph.SHOWDOTSWIDTH:for(d=0;d<e;d++)a[d]instanceof $MA.Graph.LineGraphObject&&a[d].setShowDotsWidth(b);break;case $MA.Graph.GRAPHLINEWIDTH:if(!isNaN(b)&&0<b)for(b=b>$MA.Graph.MAXLINEWIDTH?$MA.Graph.MAXLINEWIDTH:b,d=0;d<e;d++)/\s*line$/.test(a[d].graphType)&&a[d].setGraphLineWidth(b);break;case $MA.Graph.BUBBLEBORDERCOLOR:for(d=0;d<e;d++)a[d]instanceof $MA.Graph.BubbleGraphObject&&
(a[d].borderColor=void 0!=b?new $MA.Brush(b):void 0);break;case $MA.Graph.BUBBLEMINISIZE:for(d=0;d<e;d++)a[d]instanceof $MA.Graph.BubbleGraphObject&&(a[d].bubbleMinSize=b/2);break;case $MA.Graph.SYMBOLPALETTE:for(d=0;d<e;d++)a[d]instanceof $MA.Graph.BubbleGraphObject&&(a[d].symbolPalette=b);break;case $MA.Graph.MAXPIES:if(!isNaN(b)&&0<b)for(d=0;d<e;d++)a[d]instanceof $MA.Graph.PieGraphObject&&(a[d].maxPies=b);break;case $MA.Graph.TOTALFORMAT:b=$MA.convertor.processFormat(b);for(d=0;d<e;d++)a[d].totalFormat=
b;break;case $MA.Graph.BARCHARTTABLEWIDTH:for(d=0;d<e;d++)0<a[d].graphType.indexOf("bar")&&0<b.indexOf("%")?a[d].tableWidthPercent=parseInt(parseFloat(b),10)/100:a[d].tableWidthPercent=void 0}};$MA.Graph.prototype.getProperty=function(a,b){var c=$MA.Graph.propertyIds[a.toLowerCase()];if(void 0==c)return!1;var d=this.getAllGraphObjs(b),e;switch(c){case $MA.Graph.NUMBEROFVISIBLECATEGORIES:e=d[0].getNumberOfVisibleCategories()}return e};
$MA.Graph.prototype.setValueBubbleProperty=function(a,b,c){if(a){c=this.getAllGraphObjs(c);a=a.toLowerCase();var d=c.length,e=!1;if("valuebubble"===a)for(a=0;a<d;a++)c[a].valueBubble=b;else if("valuebubbleheight"===a)for(a=0;a<d;a++)c[a].setValueBubbleHeight(b);else if("valuebubbleposition"===a)for(a=0;a<d;a++)c[a].setValueBubblePosition(b);else if("Valuebubblecategoriesdisplayorder"===a)for(a=0;a<d;a++)c[a].setValueBubbleCategoriesDisplayOrder(b);else if("valuebubblestyle"===a){if(b==$MA.ValueBubbleStyle.TOP||
b==$MA.ValueBubbleStyle.FLOAT||b==$MA.ValueBubbleStyle.FLOATTOP){for(a=0;a<d;a++)c[a].valueBubbleStyle=b;e=!0}return e}}};$MA.Graph.prototype.getValueBubbleProperty=function(a,b){};
$MA.Graph.prototype.setLegendProperty=function(a,b){if(a&&void 0!==b){a=a.toLowerCase();var c,d=this.graphObj.legend;if("legend"===a)if("object"===typeof b)d.config(b);else{b=b.toLowerCase();switch(b){case "left":c=$MA.Graph.LegendType.LEFT;break;case "right":c=$MA.Graph.LegendType.RIGHT;break;case "top":c=$MA.Graph.LegendType.TOP;break;case "bottom":c=$MA.Graph.LegendType.BOTTOM;break;default:c=$MA.Graph.LegendType.NONE}d.location=c}else if("legendoffset"===a){c=b[0];var e=b[1];if(void 0!=c&&void 0!=
e){var f=parseInt(c,10),g=parseInt(e,10);isNaN(f)&&($MA.log.error($MA.getLocalisation(null,"Error_parse","Legend offset X = '")+c+"' is not a number"),f=0);isNaN(g)&&($MA.log.error($MA.getLocalisation(null,"Error_parse","Legend offset Y = '")+e+"' is not a number"),g=0);d.offsetX=f;d.offsetY=g}}}};
$MA.Graph.prototype.getLegendProperty=function(a){if(a){a=a.toLowerCase();var b=!1,c=this.graphObj.legend;"legendposition"===a?b=c.location:"totalheight"===a?b=c.totalHeight:"topmargin"===a?b=c.top:"ishorizontal"===a&&(b=c.location===$MA.Graph.LegendType.TOP||c.location===$MA.Graph.LegendType.BOTTOM?!0:!1);return b}};
$MA.Graph.prototype.setAxisProperty=function(a,b,c,d){if(a&&(this.getAllGraphObjs(d),a=a.toLowerCase(),(b=this.getAxis(b,d))&&void 0!==c))if("label"===a)b.label=new $MA.Graph.Data(b.labelDisplayDef,c);else if("format"===a)b.displayDef.format=c;else if("locale"===a)b.displayDef.locale=c;else if("majortictype"===a)switch(c){case "none":b.majorTic=$MA.Graph.TicType.NONE;break;case "inside":b.majorTic=$MA.Graph.TicType.INSIDE;break;case "outside":b.majorTic=$MA.Graph.TicType.OUTSIDE;break;case "straddle":b.majorTic=
$MA.Graph.TicType.STRADDLE}else"majorgridline"===a?(b.majorGridLine||(b.majorGridLine=new $MA.Graph.LineDefinition(1.2)),b.majorGridLine.visible=c):"displaylastcategorylabel"===a?b.displayLastCategoryLabel=c:"primaryline"===a?(b.primaryLine||(b.primaryLine=new $MA.Graph.LineDefinition),b.primaryLine.visible=c):"primarylinecolor"===a?(b.primaryLine||(b.primaryLine=new $MA.Graph.LineDefinition),b.primaryLine.strokeBrush.color=c):"primarylinethickness"===a?(b.primaryLine||(b.primaryLine=new $MA.Graph.LineDefinition),
b.primaryLine.width=c):"percentage"===a?(b.primaryLine||(b.primaryLine=new $MA.Graph.LineDefinition),b.percentage=c):"secondaryline"===a?(b.secondaryLine||(b.secondaryLine=new $MA.Graph.LineDefinition),b.secondaryLine.visible=c):"displayeverynlabels"===a?b.labelsEveryN=c:"axislabelvisibility"===a?b.hideValue=!c:"axisfontbrush"===a?(b.displayDef.foreground=c,b.labelDisplayDef.foreground=c):"axisfont"===a&&(b.displayDef.font.setFamily(c),b.labelDisplayDef.font.setFamily(c))};
$MA.Graph.prototype.setValueAxisProperty=function(a,b,c){if(""!==a){var d=this.getAllGraphObjs(c);a=a.toLowerCase();var e,f=d.length;if("valueaxismin"===a)for(a=0;a<f;a++)"hundredpercentstackedcolumn"!=d[a].graphType&&"hierarchy100pctstackedcolumn"!=d[a].graphType&&(e=this.getAxis("values",d[a]),void 0===c&&e.secondaryAxis||(e.minValue=b,e.customMinValue=null!==b&&void 0!==b?!0:!1));else if("valueaxismax"===a)for(a=0;a<f;a++)"hundredpercentstackedcolumn"!=d[a].graphType&&"hierarchy100pctstackedcolumn"!=
d[a].graphType&&(e=this.getAxis("values",d[a]),void 0===c&&e.secondaryAxis||(e.maxValue=b,e.customMaxValue=null!==b&&void 0!==b?!0:!1))}};
$MA.Graph.prototype.setCategoryAxisProperty=function(a,b,c){if(""!==a){c=this.getAllGraphObjs(c);a=a.toLowerCase();var d,e=c.length;if("categoryaxismin"===a)for(a=0;a<e;a++){if(d=this.getAxis("category",c[a]))d.minValue=b,d.customMinValue=null!==b&&void 0!==b?!0:!1}else if("categoryaxismax"===a)for(a=0;a<e;a++)if(d=this.getAxis("category",c[a]))d.maxValue=b,d.customMaxValue=null!==b&&void 0!==b?!0:!1}};$MA.Graph.prototype.getValueBubbleStyle=function(){return this.graphObj.valueBubbleStyle};
$MA.Graph.prototype.getValueBubble=function(){return this.graphObj.valueBubble};$MA.Graph.prototype.checkValueBubbleStyle=function(a){return this.graphObj.valueBubbleStyle==a};$MA.Graph.prototype.getColorDataList=function(){return this.graphObj.getColorDataList()};$MA.Graph.prototype.getShape=function(a){return this.graphObj.getShape(a)};$MA.Graph.prototype.getDrawContext=function(a){return this.graphObj.getDrawContext(a)};
$MA.Graph.prototype.setOverlap=function(a){0>a||100<a||100*this.graphObj.overlap==a||(this.graphObj.overlap=a/100)};$MA.Graph.prototype.getAxis=function(a,b){var c=b;"string"==typeof b&&(c=this.getGraphObj(b));var c=c||this.graphObj,d;"category"==a?d=c.categoryAxis:"series"==a?d=c.seriesAxis:"values"==a&&(d=c.valuesAxis);return d};
$MA.Graph.prototype.setPrimaryAxisProperties=function(a,b){var c=a.split(".")[2];if("min"==c||"max"==c){var d,e=this.graphObjs.length;for(d=0;d<e;d++){var f=this.getAxis("values",this.graphObjs[d]);f&&("min"==c?(f.minValue=b,f.customMinValue=null!==b&&void 0!==b?!0:!1):(f.maxValue=b,f.customMaxValue=null!==b&&void 0!==b?!0:!1))}}};
$MA.Graph.prototype.setSecondaryAxisProperties=function(a,b){var c=a.split(".")[2];if("min"==c||"max"==c){var d,e=this.graphObjs.length,f;for(d=0;d<e;d++)this.graphObjs[d].valuesAxis.secondaryAxis&&(f=this.graphObjs[d].valuesAxis,"min"==c?(f.minValue=b,f.customMinValue=null!==b&&void 0!==b?!0:!1):(f.maxValue=b,f.customMaxValue=null!==b&&void 0!==b?!0:!1))}};
$MA.Graph.prototype.enableSecondaryValueAxis=function(a){var b,c=this.graphObjs.length;b=0;for(c;b<c;b++){var d=this.graphObjs[b];d.name==a&&(d.valuesAxis.secondaryAxis=!0)}};$MA.Graph.prototype.setSecondaryValueAxisDisplayName=function(a,b){var c=this.getAxis("values",b);c&&(c.label.value=c.label.realValue=a)};
$MA.Graph.prototype.setSecondaryValueAxis=function(a,b){var c=this.getAxis("values",b);c&&(a=a||"",isNaN(a)&&(a=a.toLowerCase()),c.secondaryAxis=!(!a||"none"===a||"false"===a),this.secondaryAxis=c.secondaryAxis)};
$MA.Graph.prototype.setAxisLineBrush=function(a,b,c,d){if(a=this.getAxis(a,d))switch(b){case "primary":a.primaryLine&&(a.primaryLine.strokeBrush=c);break;case "frame":a.frame&&(a.frame.strokeBrush=c);break;case "secondary":a.secondaryLine&&(a.secondaryLine.strokeBrush=c);break;case "majorgrid":a.majorGridLine&&(a.majorGridLine.strokeBrush=c)}};
$MA.Graph.prototype.setLineBrush=function(a){this.graphObj.linebrush=a;this.setAxisLineBrush("category",a);this.setAxisLineBrush("values",a);this.setAxisLineBrush("series",a)};
$MA.Graph.prototype.setScale=function(a,b){var c=this.graphObjs.length,d,e,f,g=void 0===a,h=void 0===b,k,l,p,m;if(g||h)for(g&&(k=p=0),h&&(l=m=0),e=0,c;e<c;e++){d=this.graphObjs[e];var n=d.valuesAxis.secondaryAxis?p:k,q=d.valuesAxis.secondaryAxis?m:l;g&&(f=d.isStacked?d.getMinItemNegSum():d.getMinItemValue(),f<n&&(d.valuesAxis.secondaryAxis?p=f:k=f));h&&(f=d.isStacked?d.getMaxItemPosSum():d.getMaxItemValue(),f>q&&(d.valuesAxis.secondaryAxis?m=f:l=f))}e=0;for(c;e<c;e++)d=this.graphObjs[e],d.minValue=
g?d.valuesAxis.secondaryAxis?p:k:a,d.maxValue=h?d.valuesAxis.secondaryAxis?m:l:b};$MA.Graph.prototype.getCenter=function(){return[this.graphObj.centerX,this.graphObj.centerY]};$MA.Graph.prototype.calcBubbleStartPos=function(a){return this.graphObj.calcBubbleStartPos(a)};$MA.Graph.prototype.calcLineStartPos=function(a){return this.graphObj.calcLineStartPos(a)};$MA.Graph.prototype.isStacked=function(){return this.graphObj.isStacked};
$MA.Graph.prototype.getGraphIndex=function(a){var b=0;if(a){var c,d=this.graphObjs.length;for(c=0;c<d;c++)if(this.graphObjs[c].name===a){b=c;break}}return b};$MA.Graph.prototype.getGraphObj=function(a){a?(a=this.getGraphIndex(a),a=this.graphObjs[a]):a=this.graphObj;return a};$MA.Graph.prototype.getSeriesIndex=function(a,b){var c=this.getSeriesList(),d=c.length,e,f;b=void 0!==b?b:0;for(f=0;f<d;++f)if(c[f].name===a&&c[f].graphObjIndex===b){e=c[f];break}return e?f:-1};
$MA.Graph.prototype.getSeriesMask=function(a,b){var c=this.getGraphObj(b).seriesMasks;if(c){a||(a="");var d=c.get(a);d||(d=[],c.set(a,d));return d}};$MA.Graph.prototype.setSeriesState=function(a,b,c){var d=this.getSeriesList(),e,f;for(e=0;e<d.length;++e)if(d[e].name===a&&d[e].graphObjIndex===c){f=d[e];break}f&&(f.graphObj.seriesStates.set(c+"_"+a,b),f.setEnabled(b),this.redrawOnly=!0)};
$MA.Graph.prototype.createSeries=function(a,b,c){var d=this.getGraphObj(b),e=0,f=this.seriesNames.get(a);if(void 0!=f)e=f;else if(void 0==c)c=this.getGraphIndex(b),e=this.getSeriesCount(this.getGraphIndex(b)),0==e&&(e=c);else{for(f=0;f<this.graphObjs.length;f++){var g=this.graphObjs[f];g.name==b||(g.chartBrushes||d.valuesAxis.secondaryAxis!=g.valuesAxis.secondaryAxis)||(e+=g.getSeriesCount())}e+=c}this.seriesNames.set(a,e);e=d.createSeries(a,e);e.graphObjIndex=this.getGraphIndex(b);b=d.seriesStates;
b.containsKey(e.graphObjIndex+"_"+a)?e.setEnabled(b.get(e.graphObjIndex+"_"+a)):(e.setEnabled(!0),b.set(e.graphObjIndex+"_"+a,!0));d.seriesMasks&&(a=this.getSeriesMask(),e.setMask(a));return e};$MA.Graph.prototype.createCategory=function(a,b,c,d){d=this.getGraphObj(d);return-1==d.getCategoryIndex(a)?d.createCategory(a,b,c):void 0};$MA.Graph.prototype.groupCategory=function(a){this.graphObj.hasGroups=a};$MA.Graph.prototype.addData=function(a,b,c,d,e,f,g,h){a&&a.add(b,c,d,e,f,g,h)};
$MA.Graph.prototype.insertData=function(a,b,c,d,e,f,g,h,k,l){a&&a.insert(b,c,d,e,f,g,h,k,l)};$MA.Graph.prototype.resetData=function(){var a;for(a=this.graphObjs.length-1;0<=a;a--)this.graphObjs[a].resetData()};
$MA.Graph.prototype.refresh=function(a,b){var c=this.graphObjs.length;0<c&&!this.redrawOnly&&this.setScale();var d,e,f,g,h,k,l;this.calctotalBarEntries();for(d=0;d<c;d++){e=this.graphObjs[d];f=0<d;if(this.redrawOnly)e.redrawOnly=!0;else if(f)e.xAxis.visible=!1,e.yAxis.visible=!!this.secondaryAxis;else{for(h=0;h<c;h++)!k&&this.graphObjs[h].valuesAxis.secondaryAxis&&(k=this.graphObjs[h].valuesAxis,this.graphObjs[h].setCanvas(a),this.graphObjs[h].scale(),this.graphObjs[h].resize()),l||this.graphObjs[h].valuesAxis.secondaryAxis||
(l=this.graphObjs[h].valuesAxis,this.graphObjs[h].setCanvas(a),this.graphObjs[h].scale(),this.graphObjs[h].resize());e.primaryAxis=l;e.secondaryAxis=k}if(0===d){e.legend.legendList=void 0;if(this.getLegendProperty("legendposition")!==$MA.Graph.LegendType.NONE||e instanceof $MA.Graph.TableBarGraphObject)h=this.createLegendList(),e.legend.legendList=h;e.setLegendState(void 0)}f&&e.setState(g);b?(e.drawingContentType="graph",e.redraw(f)):e.plot(a,f);e.generateBackground();0===d&&1<c&&(g=e.getState())}for(d=
0;d<c;d++)this.graphObjs[d].generate();this.redrawOnly=!1};$MA.Graph.prototype.createLegendList=function(){var a,b,c,d,e,f,g=[];a=this.graphObjs.length;for(e=0;e<a;e++){if(this.graphObjs[e]instanceof $MA.Graph.PieGraphObject)return;d=this.getSeriesList(e);b=d.length;for(f=0;f<b;f++)c={formatted_name:d[f].formatted_name,name:d[f].name,fillBrush:d[f].drawContext.fillBrush.toString(),graphObjIndex:e},g.push(c)}return g};
$MA.Graph.prototype.calctotalBarEntries=function(){var a=this.graphObjs.length,b=0,c=0,d;for(d=0;d<a;d++)if("column"==this.graphObjs[d].graphType||"hierarchycolumn"==this.graphObjs[d].graphType)this.graphObjs[d].prevBarEntries=b,b+=this.graphObjs[d].getSeriesCount()+1,c++;for(d=0;d<a;d++){var e=this.graphObjs[d];1<c&&("column"==e.graphType||"hierarchycolumn"==e.graphType)&&(e.totalBarEntries=b)}};$MA.Graph.prototype.redraw=function(a){this.refresh(a,!0)};
$MA.Graph.prototype.drawContent=function(a,b,c){if(c){var d=this.graphObjs.length;0<d&&!this.redrawOnly&&this.setScale();var e=0,f=0,g;for(g=0;g<d;g++)if("column"==this.graphObjs[g].graphType||"hierarchycolumn"==this.graphObjs[g].graphType)this.graphObjs[g].prevBarEntries=e,e+=this.graphObjs[g].getSeriesCount()+1,f++;for(g=0;g<d;g++){var h=this.graphObjs[g],k;0<g&&h.setState(k);1<f&&("column"==h.graphType||"hierarchycolumn"==h.graphType)&&(h.totalBarEntries=e);this.rsImageBuffer=h.plotContent(a,b,
c,0<g,this.rsImageBuffer,!1);0===g&&1<d&&(k=h.getState())}}this.graphObjs[0].plotContent(a,b,!1,!1,this.rsImageBuffer,!0)};
$MA.Graph.prototype.getObjectAtPointer=function(a,b,c,d){var e=d||this.graphObj.drawObjects,f=e.length,g=new $MA.Point(a,b),h;if(d)for(h=0;h<f;h++){if(d=e[h],d.getObjectAtPointer(g))return d}else{var k=[];for(h=0;h<this.graphObjs.length;h++)if(e=this.graphObjs[h],0>e.graphType.indexOf("line"))for(f=0;f<e.drawObjects.length;f++)d=e.drawObjects[f],d.getObjectAtPointer(g)&&k.push({name:e.name,drawObj:d});else(d=this.getLineObjectAtPointer(a,b,c,e))&&k.push({name:e.name,drawObj:d});return k}};
$MA.Graph.prototype.getLineObjectAtPointer=function(a,b,c,d){d=d||this.graphObj;var e,f,g,h,k;if("hierarchyline"===d.graphType)for(k=d.drawObjects.length,h=0;h<k;h++)if(e=d.drawObjects[h],e=e.item,f=a-e.xCoord,g=b-e.yCoord,15>=Math.sqrt(f*f+g*g))return this.getDrawObject(e.seriesNo,e.itemNo,d);k=d.seriesList.length;for(h=0;h<k;h++)if(e=d.seriesList[h].isEnabled())if(e=d.seriesList[h].items[c],void 0!=e&&(f=a-e.xCoord,g=b-e.yCoord,15>=Math.sqrt(f*f+g*g)))return this.getDrawObject(h,c,d)};
$MA.Graph.prototype.getDrawObject=function(a,b,c){if(c&&c.length){var d=c,e=0,f,g=[];for(f=0;f<d.length;f++)if(e+=d[f].seriesList.length,g[f]=e,a<e){c=d[f];0<f&&(a-=g[f-1]);break}}d=c.drawObjects.length;if(c.isWaterfall&&c.showTotal&&b==this.getMaxItemCount()-1||"hierarchycolumn"===c.graphType||"hierarchywaterfallcolumn"===c.graphType||"hierarchystackedcolumn"===c.graphType||"hierarchy100pctstackedcolumn"===c.graphType)return c.drawObjects[b*c.getSeriesCount()+a];if("hierarchyline"===c.graphType){if(this.getMaxItemCount()==
b)return c.drawObjects[(b-1)*c.getSeriesCount()+a];for(e=0;e<c.drawObjects.length;e++)if(f=c.drawObjects[e].item,f.itemNo==b&&f.seriesNo==a)return c.drawObjects[e]}if(0<c.seriesList.length)for(f=c.seriesList[a].items[b],e=0;e<d;e++)if(a=c.drawObjects[e],a.item==f)return a};$MA.Graph.prototype.getDrawObjects=function(a,b){var c=b.getSeriesCount(),d,e=[],f;for(f=0;f<c;f++)(d=this.getDrawObject(f,a,b))&&e.push(d);return e};
$MA.Graph.prototype.getCanvas=function(){var a=this.graphObj.canvas;a.getContext("2d").lineWidth=1;return a};$MA.Graph.prototype.getDrawArea=function(){return this.graphObj.dataArea};$MA.Graph.prototype.getCategoryNodes=function(a){return this.graphObj.getCategoryNodes(a)};$MA.Graph.prototype.getValueLoc=function(a){return this.graphObj.getValueLoc(a)};$MA.Graph.prototype.preventDefaultRendering=function(a){this.graphObj.preventDefaultRendering(a)};$MA.Graph.prototype.getDrawingContentType=function(){return this.graphObj.drawingContentType};
$MA.Graph.prototype.pointInLegend=function(a,b){var c=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND),d=this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND),e=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.LEGEND),f=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND);return a>=c&&a<c+e&&b>=d&&b<=d+f};
$MA.Graph.prototype.pointInChart=function(a,b){var c=this.getDataRect();return 0<this.graphObj.graphType.indexOf("bar")?!0:a<c[2]+c[0]&&a>c[0]&&b<c[3]+c[1]&&b>c[1]};$MA.Graph.prototype.setTapPoint=function(a,b){return this.graphObj.setTapPoint(a,b)};$MA.Graph.prototype.isLegendSelected=function(){var a,b=this.getSeriesMask(),c=b.length;for(a=0;a<c;a++)if(b[a])return!0;return!1};$MA.Graph.prototype.getSelectedPieSlices=function(){return this.graphObj.getSelectedPieSlices()};
$MA.Graph.prototype.selectLegend=function(a,b){var c={x:a,y:b};"rtl"!==this.graphObj.dir||this.graphObj.legend.location!==$MA.Graph.LegendType.TOP&&this.graphObj.legend.location!==$MA.Graph.LegendType.BOTTOM||this.graphObj instanceof $MA.Graph.TableBarGraphObject||(c=this.graphObj.translateCoordinate(a,b));var d=this.getObjectAtPointer(c.x,c.y,0,this.graphObj.annotationObjects);if(void 0==d)return!1;if(this.graphObj instanceof $MA.Graph.PieGraphObject){c=d.series;if(null==c)return!1;d=this.getSeriesMask(d.series.name);
d[c]=d[c]?!1:!0}else if(c=d.series,void 0!==c){isNaN(c)||(c=this.getSeries(c));var e,f=0,g,h=this.getSeriesList();g=h.length;for(e=0;e<g;e++)d=h[e],d.isEnabled()&&f++;if(1==f&&c.isEnabled())for(e=0;e<g;e++)d=h[e],this.setSeriesState(d.name,!0,d.graphObjIndex),this.setLegendState(d.name,!0,d.graphObjIndex);else d=!c.isEnabled(),this.setSeriesState(c.name,d,c.graphObjIndex),this.setLegendState(c.name,d,c.graphObjIndex);this.redrawOnly=!0}return!0};
$MA.Graph.prototype.getSeries=function(a){var b=this.getSeriesList(),c,d;if("string"==typeof a)for(c=0;c<b.length;++c){if(b[c].name==a){d=b[c];break}}else if("number"==typeof a)0<=a&&a<b.length&&(d=b[a]);else for(c=0;c<b.length;++c)if(b[c].name.toString()===a.toString()){d=b[c];break}return d};$MA.Graph.prototype.getSeriesList=function(a){var b=[];if(void 0!=a&&this.graphObjs[a])b=this.graphObjs[a].getSeriesList();else{var c=this.graphObjs.length;for(a=0;a<c;a++)b=b.concat(this.graphObjs[a].getSeriesList())}return b};
$MA.Graph.prototype.getSeriesCount=function(a){var b=0;return b=void 0!=a&&this.graphObjs[a]?this.graphObjs[a].getSeriesCount():this.graphObj.getSeriesCount()};$MA.Graph.prototype.getSeriesName=function(a){return this.getSeriesList()[a].name};$MA.Graph.prototype.getFormattedSeriesName=function(a){return this.getSeriesList()[a].formatted_name};
$MA.Graph.prototype.getSeriesFillBrush=function(a){var b,c,d,e,f=a,g=this.graphObjs.length;for(b=0;b<g;b++)if(d=this.graphObjs[b],e=d.getSeriesCount(),f<e){c=d.getSeriesFillBrush(a);break}else f-=e;return c};$MA.Graph.prototype.getCustomisedFillBrush=function(a,b){var c,d,e,f,g=this.graphObjs.length;for(c=0;c<g;c++)if(e=this.graphObjs[c],f=e.getSeriesCount(),a<f){d=e.getCustomisedFillBrush(a,b);break}else a-=f;return d};$MA.Graph.prototype.getMaxItemCount=function(){return this.graphObj.getMaxItemCount()};
$MA.Graph.prototype.getElementIncrX=function(){var a=this.graphObj;return a.dataArea?a.calcBarEntryWidth(a.dataArea.width):0};$MA.Graph.prototype.getElementWidth=function(){var a,b=this.graphObj;if(!b.dataArea)return 0;var c=b.graphType,d=b.calcBarWidth(b.dataArea.width);void 0===b.totalBarEntries?0<=c.indexOf("column")||0<=c.indexOf("bubble")?a=(b.isStacked?1:b.getSeriesCount())*d:0<=c.indexOf("line")&&(a=d):a=(b.totalBarEntries-1)*d;return a};
$MA.Graph.prototype.getElementStartX=function(){var a=this.graphObj;return a.dataArea?a.calcBarGap(a.dataArea.width):0};$MA.Graph.prototype.calcBarEntryWidth=function(a){return this.graphObj.calcBarEntryWidth(a)};$MA.Graph.prototype.calcBarWidth=function(a){return this.graphObj.calcBarWidth(a)};$MA.Graph.prototype.calcBarGap=function(a){return this.graphObj.calcBarGap(a)};
$MA.Graph.prototype.getDataRect=function(){var a=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),d=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA);"rtl"===this.graphObj.dir&&(a=this.graphObj.getStartPosition(a,b,c).x);return[a,b,c,d]};
$MA.Graph.prototype.getDisplayRect=function(){var a=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.DISPLAY),b=this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.DISPLAY),c=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.DISPLAY),d=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.DISPLAY);"rtl"===this.graphObj.dir&&("donut"!=this.graphType&&"pie"!=this.graphType)&&(a=this.graphObj.getStartPosition(a,b,c).x);return[a,b,c,d]};
$MA.Graph.prototype.getCategoryValue=function(a){if(this.graphObj.showTotal)return a;if(!(a>=this.graphObj.categories.length)&&(a=this.graphObj.categories[a]))return a.value};$MA.Graph.prototype.getSeriesString=function(a){return $MA.format(a.name,a.graphObj.seriesAxis.displayDef.format)};
$MA.Graph.prototype.getCategoryString=function(a){var b="hierarchycolumn"===this.graphObj.graphType||"hierarchywaterfallcolumn"===this.graphObj.graphType,c="hierarchyline"===this.graphObj.graphType,d="hierarchystackedcolumn"===this.graphObj.graphType||"hierarchy100pctstackedcolumn"==this.graphType,e=0<=this.graphObj.graphType.indexOf("waterfall"),f="",g=[],b=b||d?this.graphObj.drawObjects[a*this.graphObj.getSeriesCount()].item:c?this.graphObj.drawObjects[a].item:this.graphObj.categories[a];if(void 0==
b)if(e){if(a>=this.graphObj.categories.length)return f="",a==this.graphObj.categories.length&&this.graphObj.showTotal&&(f=$MA.getLocalisation(null,"Total","Total")),f}else return"";if(b&&(a=this.graphObj.categoryAxis.displayDef.format,b.categoryValues&&(a=b.categoryValues[b.categoryValues.length-1].format),f=$MA.format(b.displayValue,a),g.push(f),b.groupValues))for(d=b.groupValues.length,e=0,c=d-1;e<d;e++,c--)b.categoryValues&&(a=b.categoryValues[c].format),f=$MA.format(b.groupValues[e],a),""!=f&&
g.push(f);"rootToLeaf"===this.graphObj.categoriesDisplayOrder&&g.reverse();return g.join(", ")};
$MA.Graph.prototype.getCategoryDisplayText=function(a){var b="hierarchycolumn"===this.graphObj.graphType||"hierarchywaterfallcolumn"===this.graphObj.graphType,c="hierarchyline"===this.graphObj.graphType,d="hierarchystackedcolumn"===this.graphObj.graphType||"hierarchy100pctstackedcolumn"==this.graphType;if(a>=this.graphObj.categories.length&&(!b||!c))return"";b=b||d?this.graphObj.drawObjects[a*this.graphObj.getSeriesCount()].item:c?this.graphObj.drawObjects[a].item:this.graphObj.categories[a];if(void 0==
b)if(0<=this.graphObj.graphType.indexOf("waterfall")){if(a>=this.graphObj.categories.length)return b="",a==this.graphObj.categories.length&&this.graphObj.showTotal&&(b=$MA.getLocalisation(null,"Total","Total")),b}else return"";a=this.graphObj.categoryAxis.displayDef.format;c="";b.categoryValues&&(a=b.categoryValues[b.categoryValues.length-1].format);d=[];c=void 0!=b.displayText?b.displayText:$MA.format(b.displayValue,a);d.push(c);if(b.groupValues){var e,f,g=b.groupValues.length;e=0;for(f=g-1;e<g;e++,
f--)b.categoryValues&&(a=b.categoryValues[f].format),c=$MA.format(b.groupValues[e],a),""!=c&&d.push(c)}"rootToLeaf"===this.graphObj.categoriesDisplayOrder&&d.reverse();return d.join(", ")};
$MA.Graph.prototype.getCategoryList=function(a,b){var c=[],d=null;b?a<this.graphObj.categories.length&&(d=this.graphObj.categories[a]):d=a;if(d){var e=this.graphObj.categoryAxis.displayDef.format;c.push($MA.format(d.value,e));if(d.groupValues){var f;for(f=d.groupValues.length-1;0<=f;f--)c.push($MA.format(d.groupValues[f],e))}}return c};
$MA.Graph.prototype.getDataString=function(a,b,c){var d,e="",f=this.graphObjs.length;for(d=0;d<f;d++){var g=this.graphObjs[d];0<d&&(e+="\n");e=this._getDataString(a,b,c,e,g)}return e};
$MA.Graph.prototype._getDataString=function(a,b,c,d,e){if(a>=e.categories.length&&!e.showTotal&&!e.isHierarchy)return"";c="";if((a=this.getDrawObjects(a,e))&&0<a.length){var f;c=a.length;var g,h,k=0;if(e.isHundredPercent)for(h=0;h<c;h++)f=e.getSeries(h),!1!=f.isEnabled()&&a[h].item&&void 0!=a[h].item.yValue&&(k+=a[h].item.yValue);for(h=0;h<c;h++)0<h&&(d+="\n"),f=e.getSeries(h),g=a[h].item&&void 0!=a[h].item.yValue&&!isNaN(a[h].item.yValue)?e.isHundredPercent?!0==f.isEnabled()?a[h].item.yValue/k:0:
a[h].item.yValue:"",f=e.isHundredPercent?$MA.format(100*g,"percent"):$MA.format(g,b,f.locale),d+=f;c=d}return c};$MA.Graph.prototype.getDataDisplayString=function(a,b){var c,d="",e=this.graphObjs.length;for(c=0;c<e;c++){var f=this.graphObjs[c];0<c&&(d+="\n");d+=this._getDataDisplayString(a,b,d,f)}return d};
$MA.Graph.prototype._getDataDisplayString=function(a,b,c,d){if(a>=d.categories.length&&!d.showTotal&&!d.isHierarchy)return"";c="";if((a=this.getDrawObjects(a,d))&&0<a.length){c="";var e=a.length,f,g,h,k=0;if(d.isHundredPercent)for(h=0;h<e;h++)g=d.getSeries(h),!1!=g.isEnabled()&&a[h].item&&void 0!=a[h].item.yValue&&(k+=a[h].item.yValue);for(h=0;h<e;h++)0<h&&(c+="\n"),g=d.getSeries(h),f=a[h].item&&void 0!=a[h].item.yValue?d.isHundredPercent?!0==g.isEnabled()?a[h].item.yValue/k:0:a[h].item.yValue:"",
d.isHundredPercent?$MA.format(100*f,"percent"):$MA.format(f,b,g.locale),c=a[h].item&&void 0!=a[h].item.valueDisplayText?c+a[h].item.valueDisplayText:c+""}return c};$MA.Graph.prototype.getDataValue=function(a){var b=[];if(a&&a.item&&a.item instanceof $MA.Graph.Item){a=a.item;b=[];if(a.category&&a.category.groupValues){var c=a.category.groupValues,d;for(d=c.length-1;0<=d;d--)b.push(c[d])}b.push(a.getXValue())}return b};
$MA.Graph.prototype.setPieProperty=function(a,b){if(a){a=a.toLowerCase();var c=this.getGraphObj();"showpielabels"===a&&(c.showLabels=b)}};
$MA.Graph.prototype.getPieProperty=function(a,b){if(a){a=a.toLowerCase();var c,d;d=this.getGraphObj();if("radiandrawobject"===a)c=d.getDrawObject(b);else if("pieslice"===a)(d=d.getDrawObject(b))&&d.item&&(c={name:d.item.xCoord,percent:d.item.yCoord,value:d.item.yValue,color:d.drawContext.getFillBrush(),others:d.item.others,valueDisplayText:d.item.valueDisplayText});else if("piedatastring"===a)d=d.getDrawObject(b),c="",d&&(c=void 0!=d.item.valueDisplayText?d.item.valueDisplayText:d.item.yValue.toString());
else if("piefillbrush"===a){if(d=d.getDrawObject(b))c=d.drawContext.fillBrush}else"piepercent"===a?(d=d.getDrawObject(b),c=0,d&&d.item&&(c=d.item.yCoord)):"piename"===a?(d=d.getDrawObject(b),c="",d&&d.item&&(c=d.item.xCoord)):"pieothers"===a?(d=d.getDrawObject(b))&&(d.item&&void 0!=d.item.others)&&(c=d.item.others):"pieradius"===a&&(c=d.paintSize/2,c=d.computeTruePieRadius(c));return c}};
$MA.Graph.prototype.selectPie=function(){var a=this.getCanvas().width;this.getCanvas().width=a;this.graphObj.drawLegend();return this.graphObj.select(this.isLegendSelected())};
$MA.Graph.prototype.rotatePie=function(a){a%=2*Math.PI;if(0!=a){this.inRotatePie=!0;var b=this.getDisplayRect();if($MA.Browser.isJBStockBrowser&&0<this.graphObj.getSelectedPieSlices().length){var c=this.graphObj.context.canvas;c.width=c.width;this.graphObj.drawLegend()}else this.graphObj.context.clearRect(b[0],b[1],b[2],b[3]);a=this.graphObj.rotate(a,b);this.inRotatePie=!1;return a}};
$MA.Graph.prototype.refreshPie=function(){this.inRotatePie=!0;var a=this.getDisplayRect();this.graphObj.context.clearRect(a[0],a[1],a[2],a[3]);this.graphObj.rotateRefresh(a);this.inRotatePie=!1};
$MA.Graph.prototype.setTableProperty=function(a,b){if(a){var c=this.getAllGraphObjs(),d,e=c.length;a=a.toLowerCase();if("tablefirstrow"===a){for(d=0;d<e;d++)c[d].firstRow=b;if("waterfallbar"==this.graphType){var e=this.getSeriesList().length,f=Math.floor(b/e),g;for(d=0;d<e;d++){for(var h=this.getSeries(d),c=h.sumBeforeRange=0;c<f;c++)g=h.items[c].yValue,"number"!=typeof g||isNaN(g)||(h.sumBeforeRange+=g);d<b%e&&(g=h.items[f].yValue,"number"!=typeof g||isNaN(g)||(h.sumBeforeRange+=g))}}}else"tableheadernamesdimtitle"===
a?c[0].dimTitle=b:"tableheadernamesrowheader"===a&&(c[0].rowHeader=b)}};$MA.Graph.prototype.getTableProperty=function(a){if(a){var b=this.getAllGraphObjs(),c;a=a.toLowerCase();"tablefirstrow"===a&&(c=b[0].firstRow);return c}};$MA.Graph.prototype.showTableValue=function(a){this.graphObj instanceof $MA.Graph.TableBarGraphObject&&(this.graphObj.tableValue=a)};
$MA.Graph.prototype.setTableStyle=function(a,b){"dimensionTitle"==a?this.graphObj.dimTitleBkColor=b:"rowHeader"==a?this.graphObj.rowHeaderBkColor=b:"columnHeaders"==a?this.graphObj.colHeadersBkColor=b:"contents"==a?this.graphObj.contentsBkColor=b:"fontSize"==a?this.graphObj.fontSize=b:"fontFamily"==a?this.graphObj.fontFmily=b:"textColor"==a&&(this.graphObj.textColor=b)};$MA.Graph.prototype.setDataScattered=function(a){if(this.graphObj.isDataScattered=a)this.graphObj.categoryAxis.dataType=$MA.Graph.DataType.DOUBLE};
$MA.Graph.prototype.isDataScattered=function(){return this.graphObj.isDataScattered};$MA.Graph.prototype.getStyles=function(){var a=$MA.getCSSRule(".graph");a&&(this.setProperty("fontbrush",new $MA.Brush(a.style.color)),this.setProperty("font",a.style.fontFamily))};$MA.Graph.getSpecifiedColor=function(a){return(a=$MA.getCSSRule(a))?a.style.color:null};
$MA.Graph.getSpecifiedColorArray=function(a){var b=[],c=1,d=null;do d=$MA.Graph.getSpecifiedColor(a+" .color"+c),c+=1,null!=d&&b.push(d);while(null!=d);return b};
$MA.Graph.getStyles=function(){$MA.Graph.SeriesBrushes.clearBrushList();var a=$MA.getCSSRule(".defaultFillPalette");a&&$MA.Graph.SeriesBrushes.setPalette("defaultFill",$MA.Graph.getSpecifiedColorArray(".defaultFillPalette"));(a=$MA.getCSSRule(".defaultStrokePalette"))&&$MA.Graph.SeriesBrushes.setPalette("defaultStroke",$MA.Graph.getSpecifiedColorArray(".defaultStrokePalette"));(a=$MA.getCSSRule(".defaultInsetShadowPalette"))&&$MA.Graph.SeriesBrushes.setPalette("defaultInsetShadow",$MA.Graph.getSpecifiedColorArray(".defaultInsetShadowPalette"))};
$MA.Graph.prototype.getNearestCategoryLoc=function(a,b){return this.graphObj.getNearestCategoryLoc(a,b)};$MA.Graph.prototype.setStartSwipe=function(a){this.graphObj.setStartSwipe(a)};$MA.Graph.prototype.setEndSwipe=function(a){this.graphObj.setEndSwipe(a)};$MA.Graph.prototype.setPinchScale=function(a){this.graphObj.setPinchScale(a)};$MA.Graph.prototype.updateValueBubbleValue=function(a){this.graphObj.updateValueBubbleValue(a)};$MA.Graph.prototype.updateStartLegend=function(a){this.graphObj.updateStartLegend(a)};
$MA.Graph.prototype.refreshBrush=function(){this.graphObj.refreshBrush()};$MA.Graph.prototype.doScrollLegend=function(a,b){this.graphObj.doScrollLegend(a,b)};$MA.Graph.prototype.setTrendReference=function(a){this.graphObj.upperThreshold=a.upperThreshold;this.graphObj.lowerThreshold=a.lowerThreshold;this.graphObj.reference=a.reference;this.graphObj.trendCategory=a.trendCategory};
$MA.Graph.prototype.getSelectedBubbleInfo=function(){var a=this.graphObj.selectedBubbleObject;if(void 0!=a){var b=a.item.otherValues,c,d,e,f,g,h,k,l,p;for(c=0;c<b.length;c++)b[c].hasOwnProperty("width")?(d=b[c].width,e=b[c].displayText):b[c].hasOwnProperty("color")?(f=b[c].color,g=b[c].value,h=b[c].displayText):b[c].hasOwnProperty("shape")?(k=b[c].shape,l=b[c].value,p=b[c].displayText):b[c].hasOwnProperty("height");return{category:a.item.category.value,categoryDisplayText:a.item.category.displayText,
value:a.item.yValue,valueDisplayText:a.item.valueDisplayText,width:d,widthDisplayText:e,color:f,colorValue:g,colorDisplayText:h,shape:k,shapeValue:l,shapeDisplayText:p,height:k,heightDisplayText:l}}};$MA.Graph.prototype.getUpdatedX=function(a){return this.graphObj.getUpdatedX(a)};$MA.Graph.prototype.collapse=function(a){var b,c,d=this.graphObjs.length;for(b=0;b<d;b++)c=this.graphObjs[b],c.isHierarchy&&c.collapse(a);this.redrawOnly=!0};
$MA.Graph.prototype.expand=function(a){var b,c,d=this.graphObjs.length;for(b=0;b<d;b++)c=this.graphObjs[b],c.isHierarchy&&c.expand(a);this.redrawOnly=!0};$MA.Graph.prototype.isRootLevel=function(){var a,b,c,d=this.graphObjs.length;for(a=0;a<d&&(b=this.graphObjs[a],!b.isHierarchy||(c=b.isRootLevel(),!0!=c));a++);return c};$MA.Graph.prototype.isLeafLevel=function(){var a,b,c,d=this.graphObjs.length;for(a=0;a<d&&(b=this.graphObjs[a],!b.isHierarchy||(c=b.isLeafLevel(),!0!=c));a++);return c};
$MA.Graph.prototype.setLegendState=function(a,b,c){this.graphObj.legendStates.set((void 0===c?0:c)+"_"+a,b)};$MA.ValueBubbleStyle={TOP:"top",FLOAT:"float",FLOATTOP:"floattop"};$MA.Graph.Point=function(a,b,c){this.x=a;this.y=b;this.z=c};$MA.Graph.Point.prototype.set=function(a,b,c){this.x=a;this.y=b;this.z=c};$MA.Graph.PlotPoint=function(a,b,c){this.raw=new $MA.Graph.Point(a,b,c);this.rotated=new $MA.Graph.Point(a,b,c)};
$MA.Graph.BoundaryBox=function(){this.min=new $MA.Graph.Point(0,0,0);this.max=new $MA.Graph.Point(0,0,0);this.mean=new $MA.Graph.Point(0,0,0);this.dk=this.d=this.c=this.b=this.a=this.pointCount=0};$MA.Graph.BoundaryBox.prototype.setMinMax=function(a){this.mean.x+=a.x;this.mean.y+=a.y;this.pointCount++;if(-1==this.min.x||this.min.x>a.x)this.min.x=a.x;if(-1==this.min.y||this.min.y>a.y)this.min.y=a.y;this.max.x<a.x&&(this.max.x=a.x);this.max.y<a.y&&(this.max.y=a.y)};
$MA.Graph.BoundaryBox.prototype.pointInside=function(a){var b=!1;a.x>=this.min.x&&(a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y)&&(b=!0);return b};$MA.Graph.BoundaryBox.prototype.setEquation=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=-(a*d+b*e+c*f);this.dk=Math.sqrt(a*a+b*b+c*c);0!=this.dk&&(this.dk=1/this.dk)};
$MA.Graph.DrawContext=function(a,b,c,d){this.fillBrush=a;this.strokeBrush=b;this.insetShadowBrush=c;this.outlineBrush=$MA.Graph.SeriesBrushes.outlineBrush;this.globalAlpha=d;this.getFillBrush=function(){return this.fillBrush};this.getStrokeBrush=function(){return this.strokeBrush};this.getInsertShadowBrush=function(){return this.insetShadowBrush};this.getOutlineBrush=function(){return this.outlineBrush}};
$MA.Graph.Font=function(a,b,c,d){this.setSize(a||"12px");this.setFamily(b);this.setWeight(c);this.setStyle(d);this.rotation=0};$MA.Graph.Font.prototype.setSize=function(a){if(void 0!=a&&(a=/^(\d+)(\w*)/.exec(a),void 0!==a[1])){var b=parseFloat(a[1],10);switch(a[2]){case "pt":this._size=4*(b/3);break;case "em":this._size=16*b;break;default:this._size=b}}};$MA.Graph.Font.prototype.setFamily=function(a){this._family=void 0!=a?a:"Helvetica"};
$MA.Graph.Font.prototype.setWeight=function(a){this._weight=void 0!=a?a:"normal"};$MA.Graph.Font.prototype.setStyle=function(a){this._style=void 0!=a?a:"normal"};$MA.Graph.Font.prototype.toString=function(){return this._style+" "+this._weight+" "+this._size+"px "+this._family};$MA.Graph.Font.prototype.getSize=function(){return this._size};$MA.Graph.Font.prototype.getSizeInPoint=function(){return 3*(this._size/4)};$MA.Graph.Font.prototype.reduceSize=function(){this._size--};
$MA.Graph.DisplayDefinition=function(a){this.foreground=$MA.Brushes.black;void 0!=a?(this.autoSize=!1,this.font=new $MA.Graph.Font(a)):(this.autoSize=!0,this.font=new $MA.Graph.Font);this.format=void 0};$MA.Graph.DisplayDefinition.prototype.clone=function(){var a=new $MA.Graph.DisplayDefinition(12);a.foreground=this.foreground;a.autoSize=this.autoSize;a.font=this.font;a.format=this.format;return a};
$MA.Graph.LineDefinition=function(a){this.visible=!0;this.strokeBrush=new $MA.Brush($MA.Brushes.gray.color);void 0!=a&&(this.width=a)};$MA.Graph.Category=function(a,b,c,d){this.value=a;this.groupValues=b;this.displayValue=a;this.categoryValues=c;this.displayText=d};$MA.Graph.DrawAreaType={TITLE:0,LEGEND:1,DISPLAY:2,XLABEL:3,YLABEL:4,ZLABEL:5,XAXIS:6,YAXIS:7,ZAXIS:8,DATA:9};$MA.Graph.DrawAreas=function(){this.x=Array(10);this.y=Array(10);this.width=Array(10);this.height=Array(10)};
$MA.Graph.DrawAreas.prototype.reset=function(){var a;for(a=0;10>a;a++)this.x[a]=0,this.y[a]=0,this.width[a]=0,this.height[a]=0};$MA.Graph.DrawAreas.prototype.set=function(a,b,c,d,e){this.x[a]=b;this.y[a]=c;this.width[a]=0>d?0:d;this.height[a]=0>e?0:e};$MA.Graph.DrawAreas.prototype.getX=function(a){return this.x[a]};$MA.Graph.DrawAreas.prototype.getY=function(a){return this.y[a]};$MA.Graph.DrawAreas.prototype.getWidth=function(a){return this.width[a]};$MA.Graph.DrawAreas.prototype.getHeight=function(a){return this.height[a]};
$MA.Graph.DrawAreas.prototype.setX=function(a,b){this.x[a]=b};$MA.Graph.DrawAreas.prototype.setY=function(a,b){this.y[a]=b};$MA.Graph.DrawAreas.prototype.setWidth=function(a,b){this.width[a]=b};$MA.Graph.DrawAreas.prototype.setHeight=function(a,b){this.height[a]=b};
$MA.Graph.Item=function(a,b,c){this.yValue=a&&0<a.length?a[0]:null;this.otherValues=a&&1<a.length?a.slice(1):null;this.parentSeries=this.category=void 0;this.selected=!1;this.yCoord=this.xCoord=void 0;this.valueDisplayText=b&&0<b.length?b[0]:null;this.otherValuesDisplayText=b&&1<b.length?b.slice(1):null;this.isNull=!1;this.originalIndex=c};$MA.Graph.Item.prototype.setCategory=function(a){this.category=a};$MA.Graph.Item.prototype.getXValue=function(){if(this.category)return this.category.value};
$MA.Graph.Item.prototype.getXDisplayValueText=function(){if(this.category)return this.category.displayValueText};$MA.Graph.Item.prototype.getXDisplayValue=function(){if(this.category)return this.category.displayValue};$MA.Graph.Item.prototype.getBubbleValue=function(){if(this.otherValues){var a;for(a=0;a<this.otherValues.length;a++)if(this.otherValues[a].width)return this.otherValues[a].width}else return this.yValue};
$MA.Graph.Item.prototype.getBubbleHeight=function(){if(this.otherValues){var a;for(a=0;a<this.otherValues.length;a++)if(this.otherValues[a].height)return this.otherValues[a].height}else return this.getBubbleValue()};$MA.Graph.LegendType={NONE:0,LEFT:1,RIGHT:2,TOP:3,BOTTOM:4};
$MA.Graph.Legend=function(a,b,c){this.graphObj=a;this.location=b;this.displayDef=c;this.top=this.left=this.offsetY=this.offsetX=0;this.drawObjectsList={};this.dispWidth=0.2;this.dispHeight=0.1;this.font=new $MA.Graph.Font(14,"Helvetica","Bold");this.bgColor="#000000";this.fontColor="#FFFFFF";this.borderColor="#000000"};
$MA.Graph.Legend.prototype.config=function(a){if("object"===typeof a){var b=a.width,c=a.height;!isNaN(b)&&1>=b&&(this.dispWidth=b);!isNaN(c)&&1>=c&&(this.dispHeight=c);c=a.fontsize;!isNaN(c)&&0<c&&(this.fontHeight=c);"string"===typeof a.fontfamily&&this.displayDef.font.setFamily(a.fontfamily);"string"===typeof a.fontstyle&&this.displayDef.font.setStyle(a.fontfamily);"string"===typeof a.fontcolor&&(this.fontColor=a.fontcolor)}};
$MA.Graph.Legend.prototype.getMaxTextSize=function(){var a,b=0,c=0,d=null;if(this.location==$MA.Graph.LegendType.NONE)return new $MA.Graph.TextSize(0,0);d=this.graphObj.categoryAxis.label;if(null==d)return new $MA.Graph.TextSize(0,0);if(this.graphObj instanceof $MA.Graph.PieGraphObject)for(a=0;a<this.graphObj.categories.length;a++)d=this.graphObj.categories[a],d=new $MA.Graph.Data(this.displayDef,d.displayValue),d=d.getTextSize(this.graphObj.context),d.width>b&&(b=d.width),d.height>c&&(c=d.height);
else{a=this.graphObj.getSeriesCount();var e;for(e=0;e<a;e++)d=this.graphObj.getSeries(e).label,d=d.getTextSize(this.graphObj.context),d.width>b&&(b=d.width),d.height>c&&(c=d.height)}return new $MA.Graph.TextSize(b,c)};$MA.Graph.Legend.prototype.draw=function(){};$MA.Graph.Legend.prototype.reset=function(){this.drawObjectsList={}};
$MA.Graph.Series=function(a,b){this.graphObj=a;this.formatted_name=this.name=b;this.label=new $MA.Graph.Data(a.legendDisplayDef,b);this.items=[];this.drawContext=void 0;this.enabled=!0;this.getDrawContext=function(){return this.drawContext};this.sumBeforeRange=0};$MA.Graph.Series.prototype.setMask=function(a){this.mask=a};
$MA.Graph.Series.prototype.getItems=function(){this.selected=!1;var a=this.items,b=this.items.length;if(this.mask&&0<this.mask.length){var c;for(c=0;c<b;c++)this.mask[c]?(a[c].selected=!0,this.selected||(this.selected=!0)):a[c].selected=!1}return a};$MA.Graph.Series.prototype.setFormat=function(a){this.format=a;this.formatted_name=$MA.format(this.name,this.format)};$MA.Graph.Series.prototype.isSelected=function(){return this.selected};$MA.Graph.Series.prototype.removeNegativeItems=function(){return[]};
$MA.Graph.Series.prototype.setEnabled=function(a){this.enabled=a};$MA.Graph.Series.prototype.isEnabled=function(){return this.enabled};$MA.Graph.Series.prototype.add=function(a,b,c,d,e){a=new $MA.Graph.Item(c,d);a.setCategory(this.graphObj.categories[this.graphObj.categories.length-1]);a.parentSeries=this;this.items.push(a)};
$MA.Graph.Series.prototype.insert=function(a,b,c,d,e,f,g){c=new $MA.Graph.Item(c,d,g);d=this.graphObj.graphType;g=this.graphObj.getCategoryIndex(a);if(-1!=g)"pie"!==d&&"donut"!==d&&(c.setCategory(this.graphObj.categories[g]),this.items[g]=c);else{c.setCategory(this.graphObj.createCategory(a,e,f,b));if("pie"===d||"donut"===d)c.originalIndex=this.items.length;this.items.push(c)}};$MA.Graph.Series.prototype.sortY=function(){this.items.sort(function(a,b){return b.yValue-a.yValue})};
$MA.Graph.Series.prototype.getYByX=function(a){var b;for(b=0;b<this.items.length;b++)if(this.items[b].getXValue()==a)return this.items[b].yValue;return 0};
$MA.Graph.Series.prototype.getMinItemValue=function(a){var b=this.items.length;if(0==b)return 0;var c=this.items[0].yValue;void 0!=c&&null!=c&&(c=isNaN(c)?0:parseFloat(c));var d;a&&("number"!=typeof c||isNaN(c)?c=void 0:(d=this.sumBeforeRange+c,0!=this.sumBeforeRange&&(c=0>this.items[0].yValue?d:this.sumBeforeRange)));var e,f;if(void 0==c||null==c)for(e=1;e<b;e++)if(f=parseFloat(this.items[e].yValue),"number"==typeof f&&!isNaN(f))if(a){d=this.sumBeforeRange+f;c=0!=this.sumBeforeRange?0>f?d:this.sumBeforeRange:
f;break}else if(void 0!=f&&null!=f){c=f;break}for(e=1;e<b;e++)f=parseFloat(this.items[e].yValue),"number"!=typeof f||isNaN(f)||(!0===a&&(f=d+=f),void 0!=f&&f<c&&(c=f));return c};
$MA.Graph.Series.prototype.getMaxItemValue=function(a){var b=this.items.length;if(0==b)return 0;var c=parseFloat(this.items[0].yValue),c=isNaN(c)?0:c,d;a&&("number"!=typeof c||isNaN(c)?c=void 0:(d=this.sumBeforeRange+c,0!=this.sumBeforeRange&&(c=0<c?d:this.sumBeforeRange)));var e,f;if(void 0==c||null==c)for(e=1;e<b;e++)if(f=parseFloat(this.items[e].yValue),"number"==typeof f&&!isNaN(f))if(a){d=this.sumBeforeRange+f;c=0!=this.sumBeforeRange?0<f?d:this.sumBeforeRange:f;break}else if(void 0!=f&&null!=
f){c=f;break}for(e=1;e<b;e++)f=parseFloat(this.items[e].yValue),"number"!=typeof f||isNaN(f)||(!0===a&&(f=d+=f),void 0!=f&&f>c&&(c=f));return c};$MA.Graph.Series.prototype.getItemX=function(a){return 0>a||a>=this.items.length?null:this.items[a].getXValue()};$MA.Graph.Series.prototype.getItemY=function(a){return 0>a||a>=this.items.length?null:this.items[a].yValue};
$MA.Graph.Series.prototype.getItemColorData=function(a,b){var c,d;for(d=0;d<this.items.length;d++)if(this.items[d].originalIndex==a){c=this.items[d];break}if(void 0==c)return null;c=c.otherValues;if(void 0==c||null==c)return null;for(d=0;d<c.length;d++)if(c[d].hasOwnProperty(b))return c[d][b];return null};
$MA.Graph.Series.prototype.getItemYDouble=function(a){if(0>a||a>=this.items.length)return 0;a=this.items[a];var b=0;"number"==typeof a.yValue?b=a.yValue:"string"==typeof a.yValue&&(b=parseFloat(a.yValue));return b};$MA.Graph.Series.prototype.getYPosSum=function(){var a,b=0,c;for(a in this.items)c=this.getItemYDouble(a),0!=c&&(b+=Math.abs(c));return b};$MA.Graph.PIE_EXPLODE_PERCENT=20;
$MA.Graph.Series.prototype.getItemPieExplodePercent=function(a){return this.items[a].selected?$MA.Graph.PIE_EXPLODE_PERCENT:0};$MA.Graph.Series.prototype.getMaxXValue=function(){var a=this.items.length;if(0==a)return 0;var b=this.items[0].getXValue(),c,d;for(c=1;c<a;c++)d=this.items[c],d.getXValue()>b&&(b=d.getXValue());return b};
$MA.Graph.Series.prototype.getMinXValue=function(){var a=this.items.length;if(0==a)return 0;var b=this.items[0].getXValue(),c,d;for(c=1;c<a;c++)d=this.items[c],d.getXValue()<b&&(b=d.getXValue());return b};$MA.Graph.Series.prototype.getMinPosXValue=function(){var a=null,b,c=this.items.length;if(0==c)return a;var a=this.getItemX(0),d;for(d=0;d<c;d++)b=this.getItemX(d),null!=b&&b<a&&(a=b);return a};
$MA.Graph.Series.prototype.getMaxBubbleHeight=function(){var a=this.items.length;if(0==a)return 0;var b,c,d;c=this.items[0].getBubbleHeight();if(void 0==c||""==c||null==c)for(b=1;b<a&&(c=Math.abs(this.items[b].getBubbleHeight()),void 0==c||""==c||null==c||isNaN(c));b++);for(b=1;b<a;b++)d=Math.abs(this.items[b].getBubbleHeight()),void 0==d||(""==d||null==d||isNaN(d))||d>c&&(c=d);return c};
$MA.Graph.Series.prototype.getMaxBubbleSize=function(){var a=this.items.length;if(0==a)return 0;var b,c,d;c=this.items[0].getBubbleValue();if(void 0==c||""==c||null==c)for(b=1;b<a&&(c=Math.abs(this.items[b].getBubbleValue()),void 0==c||""==c||null==c||isNaN(c));b++);for(b=1;b<a;b++)d=Math.abs(this.items[b].getBubbleValue()),void 0==d||(""==d||null==d||isNaN(d))||d>c&&(c=d);return c};$MA.Graph.SeriesBrushes=function(){};
$MA.Graph.SeriesBrushes.defaultFillPalette=[36819,10080513,15964930,10473451,4957959,16175411,13323564,13289402,886428,13489966,2388528,7134940,15430400,12172241,28115,4045183];$MA.Graph.SeriesBrushes.defaultStrokePalette=[18538,5007360,7949569,5269622,2446083,8087577,6694678,6644829,410446,6712087,1194264,3567470,7748096,6053224,14186,2055488];
$MA.Graph.SeriesBrushes.defaultInsetShadowPalette=[8443647,13893504,16765312,14086399,12189573,16771993,16756891,16776949,9039359,16383899,11075509,12517374,16760448,15790847,8438271,11206615];$MA.Graph.SeriesBrushes.fillPalette=$MA.Graph.SeriesBrushes.defaultFillPalette;$MA.Graph.SeriesBrushes.strokePalette=$MA.Graph.SeriesBrushes.defaultStrokePalette;$MA.Graph.SeriesBrushes.insetShadowPalette=$MA.Graph.SeriesBrushes.defaultInsetShadowPalette;$MA.Graph.SeriesBrushes.outlineBrush=new $MA.Brush("rgba(0, 0, 0, 0.1)");
$MA.Graph.SeriesBrushes.brushesList=[];$MA.Graph.SeriesBrushes.getFillBrush=function(a,b){var c=$MA.Graph.SeriesBrushes.getBrushes("defaultFill",$MA.Graph.SeriesBrushes.fillPalette,b);return c[a%c.length]};$MA.Graph.SeriesBrushes.getStrokeBrush=function(a,b){var c;if(void 0!=$MA.Graph.SeriesBrushes.strokePalette)return c=$MA.Graph.SeriesBrushes.getBrushes("defaultStroke",$MA.Graph.SeriesBrushes.strokePalette,b),c[a%c.length]};
$MA.Graph.SeriesBrushes.getInsetShadowBrush=function(a,b){var c;if(void 0!=$MA.Graph.SeriesBrushes.insetShadowPalette)return c=$MA.Graph.SeriesBrushes.getBrushes("defaultInsetShadow",$MA.Graph.SeriesBrushes.insetShadowPalette,b),c[a%c.length]};
$MA.Graph.SeriesBrushes.getBrushes=function(a,b,c){var d=a,e=!1;"object"==typeof b[0]&&(e=!0,d=a+c);a=$MA.Graph.SeriesBrushes.brushesList[d];if(void 0==a){a=[];if(e)for(e=0;e<b.length;e++)a[e]=new $MA.GradientBrush(b[e],c);else for(e=0;e<b.length;e++)a[e]=new $MA.Brush(b[e]);$MA.Graph.SeriesBrushes.brushesList[d]=a}return a};
$MA.Graph.SeriesBrushes.clearBrushList=function(){$MA.Graph.SeriesBrushes.brushesList=[];$MA.Graph.SeriesBrushes.strokePalette=void 0;$MA.Graph.SeriesBrushes.insetShadowPalette=void 0};$MA.Graph.SeriesBrushes.setPalette=function(a,b){"defaultFill"==a?$MA.Graph.SeriesBrushes.fillPalette=b:"defaultStroke"==a?$MA.Graph.SeriesBrushes.strokePalette=b:"defaultInsetShadow"==a&&($MA.Graph.SeriesBrushes.insetShadowPalette=b)};$MA.Graph.TextSize=function(a,b){this.width=a;this.height=b};
$MA.Graph.Data=function(a,b){this.value=this.realValue=b;this.displayDef=a};
$MA.Graph.Data.prototype.getTextSize=function(a){if(void 0!=a){a.font=this.displayDef.font.toString();if(void 0==this.value)return new $MA.Graph.TextSize(0,0);var b=this.toString();if(0==b.length)return new $MA.Graph.TextSize(0,0);a=a.measureText(b);var c;if(0==this.displayDef.font.rotation)c=new $MA.Graph.TextSize(a.width+3,this.displayDef.font.getSize());else if(90==this.displayDef.font.rotation||270==this.displayDef.font.rotation)c=new $MA.Graph.TextSize(this.displayDef.font.getSize(),a.width+
3);return c}};$MA.Graph.Data.prototype.compare=function(a){return this.value>a.value?1:this.value<a.value?-1:0};$MA.Graph.Data.prototype.toString=function(){return void 0!=this.displayDef&&void 0!=this.displayDef.format?$MA.format(this.value,this.displayDef.format):$MA.format(this.value)};$MA.Graph.YData=function(a,b,c){$MA.Graph.Data.call(this,a,b);this.isHundredPercent=c};$MA.Graph.YData.prototype=new $MA.Graph.Data;
$MA.Graph.YData.prototype.toString=function(){if(this.isHundredPercent)return $MA.format(100*this.value,"percent");if(this.displayDef.percentageChart)return this.value;if(void 0!=this.displayDef&&void 0!=this.displayDef.format){var a=this.displayDef.format.toLowerCase();if("percent"==a)return $MA.format(this.value,a)}return $MA.labelNumberString(this.value)};$MA.Graph.DrawPrimitive=function(a){this.drawObj=a};$MA.Graph.DrawPrimitive.prototype.contains=function(a){return!1};
$MA.Graph.DrawPrimitive.prototype.setBoundaries=function(){};$MA.Graph.DrawPrimitive.prototype.getStyle=function(a,b,c){var d=a.getContext?a.getContext("2d"):null,e="#ffffff";b instanceof $MA.GradientBrush?c&&0<c.length?(a=this.getPos(c),e=b.createLinearGradient(d,a[0],a[1],a[2],a[3])):e=b.createLinearGradient(d,0,0,a.width,a.height):b instanceof $MA.Brush&&(e=b.toString());return e};
$MA.Graph.DrawPrimitive.prototype.getPos=function(a){var b=a[0].x,c=a[0].x,d=a[0].y,e=a[0].y,f;for(f=0;f<a.length;f++)a[f].x<b?b=a[f].x:a[f].x>c&&(c=a[f].x),a[f].y<d?d=a[f].y:a[f].y>e&&(e=a[f].y);return[b,d,c,e]};$MA.Graph.ArcPrimitive2D=function(a,b,c,d,e,f,g,h){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.x=c;this.y=d;this.radius=e;this.radStart=f;this.radEnd=g;this.isDonut=h};$MA.Graph.ArcPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.ArcPrimitive2D.prototype.plot=function(a){Math.abs(this.radStart-this.radEnd)>2*Math.PI?this.plotSingle(a):(a=a.getContext?a.getContext("2d"):null,a.beginPath(),a.arc(this.x,this.y,this.radius,this.radStart,this.radEnd,!0),this.isDonut?a.arc(this.x,this.y,this.radius/3,this.radEnd,this.radStart,!1):a.lineTo(this.x,this.y),a.closePath(),a.fillStyle=this.drawContext.fillBrush instanceof $MA.GradientBrush?this.drawContext.fillBrush.createRadialGradient(a,this.x,this.y,0,this.x,this.y,this.radius):
this.drawContext.fillBrush.toString(),a.fill(),this.drawContext.insetShadowBrush&&1<this.radius/2&&(a.beginPath(),a.arc(this.x,this.y,this.radius-1,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.insetShadowBrush.toString(),a.stroke()),this.drawContext.strokeBrush&&(a.beginPath(),a.arc(this.x,this.y,this.radius,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke(),this.isDonut&&(a.beginPath(),a.arc(this.x,this.y,this.radius/3,this.radStart,this.radEnd,
!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke())))};
$MA.Graph.ArcPrimitive2D.prototype.plotSingle=function(a){a=a.getContext?a.getContext("2d"):null;a.beginPath();a.arc(this.x,this.y,this.radius,1.5*Math.PI+0.1,0.5*Math.PI-0.1,!0);this.isDonut?a.arc(this.x,this.y,this.radius/3,0.5*Math.PI-0.1,1.5*Math.PI+0.1,!1):a.lineTo(this.x,this.y);a.closePath();a.fillStyle=this.drawContext.fillBrush instanceof $MA.GradientBrush?this.drawContext.fillBrush.createRadialGradient(a,this.x,this.y,0,this.x,this.y,this.radius):this.drawContext.fillBrush.toString();a.fill();
a.beginPath();a.arc(this.x,this.y,this.radius,0.5*Math.PI,1.5*Math.PI,!0);this.isDonut?a.arc(this.x,this.y,this.radius/3,1.5*Math.PI,0.5*Math.PI,!1):a.lineTo(this.x,this.y);a.closePath();a.fill();this.drawContext.insetShadowBrush&&1<this.radius/2&&(a.beginPath(),a.arc(this.x,this.y,this.radius-1,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.insetShadowBrush.toString(),a.stroke());this.drawContext.strokeBrush&&(a.beginPath(),a.arc(this.x,this.y,this.radius,this.radStart,this.radEnd,
!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke(),this.isDonut&&(a.beginPath(),a.arc(this.x,this.y,this.radius/3,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke()))};
$MA.Graph.ArcPrimitive2D.prototype.contains=function(a){var b=a.x-this.x,c=a.y-this.y;a=Math.sqrt(b*b+c*c);if(a>this.radius||this.isDonut&&a<this.radius/3)return!1;a=0;0<b?a=Math.atan(c/b):0>b?a=Math.atan(c/b)-Math.PI:0==b&&(0<c?a=Math.PI:0>=c&&(a=-Math.PI));a%=2*Math.PI;0>a&&(a+=2*Math.PI);b=this.radStart%(2*Math.PI);c=this.radEnd%(2*Math.PI);this.radStart-this.radEnd-0.1==2*Math.PI&&(b-=0.1);return b<c?0<=a&&a<=b||a>=c&&a<=2*Math.PI:a>=c&&a<=b};
$MA.Graph.BubblePrimitive2D=function(a){$MA.Graph.DrawPrimitive.call(this,a)};$MA.Graph.BubblePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.BubblePrimitive2D.prototype.drawEllipse=function(a,b,c,d,e,f){b.save();b.beginPath();e=a.x;f=a.y;var g=a.radius,h=2*g,k=2*a.height;b.strokeStyle=this.getStyle(c,a.drawContext.strokeBrush,d);b.lineWidth=2;b.drawEllipse(e-g,f-a.height,h,k,!0);b.stroke();b.lineWidth=1;b.fillStyle=this.getStyle(b,a.drawContext.fillBrush,d);b.fill();a.drawContext.insetShadowBrush&&1<a.radius&&(g-=1,b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d),b.drawEllipse(e-g-1,f-a.height,h,k,!1),b.stroke());
b.closePath();b.restore()};
$MA.Graph.BubblePrimitive2D.prototype.drawStar=function(a,b,c,d,e,f){e=a.x;var g=a.y,h=a.radius;b.beginPath();var k=a.height,l=0.4;3==d&&(l=0.3);var p=h*l,l=k*l,m;for(m=0;m<=2*f;++m){var n=m*Math.PI/f-Math.PI/2,q=0==m%2?h:p;b.lineTo(e+(0==m%2?k:l)*Math.cos(n),g+q*Math.sin(n))}b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d);b.lineWidth=1;b.stroke();b.fill();b.closePath();b.save();b.lineWidth=3;b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,
d);b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d);b.beginPath();b.stroke();b.fill();b.closePath();b.restore()};
$MA.Graph.BubblePrimitive2D.prototype.drawSquare=function(a,b,c,d,e,f){e=a.x;f=a.y;var g=a.radius,h=a.height;b.beginPath();b.moveTo(e-g,f-h);b.lineTo(e+g,f-h);b.lineTo(e+g,f+h);b.lineTo(e-g,f+h);b.lineTo(e-g,f-h);b.closePath();b.lineWidth=1;a.drawContext.strokeBrush&&!a.drawHost.animation&&(b.moveTo(e-g,f-h),b.lineTo(e+g,f-h),b.lineTo(e+g,f+h),b.lineTo(e-g,f+h),b.lineTo(e-g,f-h),b.strokeStyle=this.getStyle(c,a.drawContext.outlineBrush,d),b.lineWidth=1,b.stroke());b.strokeStyle=this.getStyle(c,a.drawContext.strokeBrush,
d);b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.fill();b.lineWidth=1;b.stroke();a.drawContext.insetShadowBrush&&1<a.radius&&(h-=1,g-=1,b.moveTo(e-g,f-h),b.lineTo(e+g,f-h),b.lineTo(e+g,f+h),b.lineTo(e-g,f+h),b.lineTo(e-g,f-h),b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d),b.stroke())};
$MA.Graph.BubblePrimitive2D.prototype.drawDiamond=function(a,b,c,d,e,f){b.save();e=a.x;f=a.y;var g=a.radius,h=a.height;b.beginPath();b.moveTo(e-g,f);b.lineTo(e,f-h);b.lineTo(e+g,f);b.lineTo(e,f+h);b.lineTo(e-g,f);b.closePath();b.lineWidth=1;a.drawContext.strokeBrush&&!a.drawHost.animation&&(b.moveTo(e-g,f),b.lineTo(e,f-h),b.lineTo(e+g,f),b.strokeStyle=this.getStyle(c,a.drawContext.outlineBrush,d),b.lineWidth=3,b.stroke());b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.fill();b.strokeStyle=
this.getStyle(c,a.drawContext.strokeBrush,d);b.lineWidth=1;b.stroke();a.drawContext.insetShadowBrush&&1<a.radius&&(h-=1,g=a.radius-1,b.moveTo(e-g,f),b.lineTo(e,f-h),b.lineTo(e+g,f),b.lineTo(e,f+h),b.lineTo(e-g,f),b.closePath(),b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d),b.stroke());b.restore()};
$MA.Graph.BubblePrimitive2D.prototype.drawTriangle=function(a,b,c,d,e,f){e=a.x;var g=a.y,h=a.radius,k=a.height;b.beginPath();"bottom"==f?(b.moveTo(e-h,g+k),b.lineTo(e+h,g+k),b.lineTo(e,g-k)):"left"==f?(b.moveTo(e-h,g+k),b.lineTo(e-h,g-k),b.lineTo(e+h,g)):"right"==f?(b.moveTo(e+h,g+k),b.lineTo(e+h,g-k),b.lineTo(e-h,g)):"top"==f&&(b.moveTo(e-h,g-k),b.lineTo(e+h,g-k),b.lineTo(e,g+k));b.closePath();b.stroke();b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d);a.drawContext.insetShadowBrush&&
1<a.radius&&(k-=1,h-=1,"bottom"==f?(b.moveTo(e-h,g+k),b.lineTo(e+h,g+k),b.lineTo(e,g-k)):"left"==f?(b.moveTo(e-h,g+k),b.lineTo(e-h,g-k),b.lineTo(e+h,g)):"right"==f?(b.moveTo(e+h,g+k),b.lineTo(e+h,g-k),b.lineTo(e-h,g)):"top"==f&&(b.moveTo(e-h,g-k),b.lineTo(e+h,g-k),b.lineTo(e,g+k)));b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.fill();b.lineWidth=1;b.stroke()};
$MA.Graph.BubblePrimitive2D.prototype.plot=function(a){var b=this.drawObj;if(b.drawContext.fillBrush!=$MA.Brushes.transparent&&void 0!==b.radius){var c=b.shape.toLowerCase();if(!(0>=b.radius)){var d=a.getContext?a.getContext("2d"):null,e=null;b.drawContext.fillBrush instanceof $MA.GradientBrush&&(e=[],e.push(new $MA.Point(b.x-b.radius,b.y-b.radius)),e.push(new $MA.Point(b.x+b.radius,b.y+b.radius)));"diamond"==c?this.drawDiamond(b,d,a,e,b.drawContext.outlineBrush,!1):"star3"==c?this.drawStar(b,d,a,
e,b.drawContext.outlineBrush,3):"star4"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,4):"star5"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,5):"star6"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,6):"star7"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,7):"star8"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,8):"star9"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,9):"star10"==c?this.drawStar(b,d,a,e,b.drawContext.outlineBrush,9):"square"==c?this.drawSquare(b,
d,a,e,b.drawContext.outlineBrush,9):"triangle"==c?this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"bottom"):"lefttriangle"==c?this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"left"):"righttriangle"==c?this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"right"):"invertedtriangle"==c?this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"top"):"circle"==c&&b.radius!=b.height?this.drawEllipse(b,d,a,e,b.drawContext.outlineBrush,!1):(d.beginPath(),d.arc(b.x,b.y,b.radius,0,2*Math.PI,!0),d.closePath(),
b.drawContext.strokeBrush&&!b.drawHost.animation&&(d.strokeStyle=this.getStyle(a,b.drawContext.outlineBrush,e),d.lineWidth=3,d.stroke()),d.fillStyle=this.getStyle(a,b.drawContext.fillBrush,e),d.fill(),d.strokeStyle=this.getStyle(a,b.drawContext.strokeBrush,e),d.lineWidth=1,d.stroke(),b.drawContext.insetShadowBrush&&1<b.radius&&(d.beginPath(),d.arc(b.x,b.y,b.radius-1,0,$MA.platform.blackberry?2*Math.PI:Math.PI,!0),d.strokeStyle=this.getStyle(a,b.drawContext.insetShadowBrush,e),d.stroke()))}}};
$MA.Graph.BubblePrimitive2D.prototype.contains=function(a){var b=a.x-this.drawObj.x;a=a.y-this.drawObj.y;var c=this.drawObj.radius;return Math.sqrt(b*b+a*a)<=c};$MA.Graph.DashedLinePrimitive2D=function(a){$MA.Graph.DrawPrimitive.call(this,a)};$MA.Graph.DashedLinePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.DashedLinePrimitive2D.prototype.plot=function(a){var b=this.drawObj;if(b.drawContext.strokeBrush!==$MA.Brushes.transparent){var c=a.getContext("2d"),d=b.x1,e=b.y1,f=b.x2-b.x1,g=b.y2-b.y1,h=Math.sqrt(f*f+g*g),k=[3,3],l=k.length,p=0,m=0,n;c.save();if(!b.needsToDrawAllAtOnce||b.isFirst)c.beginPath(),c.moveTo(d,e);for(;h>m;)n=p++%l,m+=k[n],h>=m&&(d+=f/h*k[n],e+=g/h*k[n],n?c.moveTo(d,e):c.lineTo(d,e));c.lineTo(b.x2,b.y2);if(!b.needsToDrawAllAtOnce||b.isLast)c.strokeStyle=b.drawContext.strokeBrush instanceof
$MA.GradientBrush?b.drawContext.strokeBrush.colorStops[0][1]:this.getStyle(a,b.drawContext.strokeBrush,null),c.lineWidth=b.lineDef.width||1,c.stroke(),c.closePath();c.restore()}};$MA.Graph.LinePrimitive2D=function(a){$MA.Graph.DrawPrimitive.call(this,a)};$MA.Graph.LinePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.LinePrimitive2D.prototype.plot=function(a){var b=this.drawObj;if(b.drawContext.strokeBrush!==$MA.Brushes.transparent){var c=a.getContext("2d");if(!b.needsToDrawAllAtOnce||b.isFirst)c.beginPath(),c.moveTo(b.x1,b.y1);c.lineTo(b.x2,b.y2);if(!b.needsToDrawAllAtOnce||b.isLast)c.strokeStyle=b.drawContext.strokeBrush instanceof $MA.GradientBrush?b.drawContext.strokeBrush.colorStops[0][1]:this.getStyle(a,b.drawContext.strokeBrush,null),c.lineWidth=b.lineDef.width||1,$MA.platform.blackberry||(c.lineJoin=
"round"),c.stroke(),c.closePath()}};$MA.Graph.PolygonPrimitive2D=function(a,b,c){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.points=c;void 0==this.boundaries&&(this.boundaries=new $MA.Graph.BoundaryBox)};$MA.Graph.PolygonPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.PolygonPrimitive2D.prototype.plot=function(a){var b=a.getContext?a.getContext("2d"):null,c=this.points.length;b.beginPath();b.lineWidth=0.5;var d=b.globalAlpha;void 0!=this.drawContext.globalAlpha&&(b.globalAlpha=this.drawContext.globalAlpha);b.moveTo(this.points[0].x,this.points[0].y);var e;for(e=1;e<c;e++)b.lineTo(this.points[e].x,this.points[e].y);b.fillStyle=this.getStyle(a,this.drawContext.fillBrush,this.points);b.fill();b.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,this.points);
b.closePath();b.stroke();b.globalAlpha=d};$MA.Graph.PolygonPrimitive2D.prototype.contains=function(a){var b=!1;this.boundaries.pointInside(a)&&(b=this.isInbound(this.points,a));return b};$MA.Graph.PolygonPrimitive2D.prototype.setBoundaries=function(){var a=0,b,c,d;for(b=0;b<this.points.length;b++)c=this.points[b],this.boundaries.setMinMax(c),d=b==this.points.length-1?this.points[0]:this.points[b+1],a+=(c.y+d.y)*(d.x-c.x);this.boundaries.setEquation(0,0,a/2,this.points[0].x,this.points[0].y,0)};
$MA.Graph.PolygonPrimitive2D.prototype.isInbound=function(a,b){var c=!1,d,e=0;d=0;for(e=a.length-1;d<a.length;e=d++)(a[d].y<=b.y&&b.y<a[e].y||a[e].y<=b.y&&b.y<a[d].y)&&b.x<(a[e].x-a[d].x)*(b.y-a[d].y)/(a[e].y-a[d].y)+a[d].x&&(c=!c);return c};$MA.Graph.PolylinePrimitive2D=function(a,b,c){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.points=c};$MA.Graph.PolylinePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.PolylinePrimitive2D.prototype.plot=function(a){if(this.drawContext.strokeBrush!=$MA.Brushes.transparent){var b=a.getContext?a.getContext("2d"):null,c=this.points.length;b.beginPath();b.moveTo(this.points[0].x,this.points[0].y);var d;for(d=1;d<c;d++)b.lineTo(this.points[d].x,this.points[d].y);b.closePath();b.lineWidth=1;b.strokeStyle=this.drawContext.strokeBrush instanceof $MA.GradientBrush?this.drawContext.strokeBrush.colorStops[0][1]:this.getStyle(a,this.drawContext.strokeBrush,this.points);
b.stroke()}};$MA.Graph.SymbolPrimitive2D=function(a,b,c,d,e,f,g){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.type=c;this.x=d;this.y=e;this.width=f;this.height=g};$MA.Graph.SymbolPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.SymbolPrimitive2D.prototype.plot=function(a){var b=a.getContext?a.getContext("2d"):null;switch(this.type){case $MA.Graph.SymbolType.BOX:b.fillStyle=this.getStyle(a,this.drawContext.fillBrush,null);b.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height);break;case $MA.Graph.SymbolType.CIRCLE:b.beginPath(),b.arc(this.x,this.y,this.width/2,0,2*Math.PI,!0),b.closePath(),b.fillStyle=this.getStyle(a,this.drawContext.fillBrush,null),b.fill(),b.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,
null),b.stroke(),!$MA.platform.blackberry&&(1>=b.lineWidth&&this.drawContext.insetShadowBrush&&1<this.width/2)&&(b.beginPath(),b.arc(this.x,this.y,this.width/2-1,0,Math.PI,!0),b.strokeStyle=this.getStyle(a,this.drawContext.insetShadowBrush,null),b.stroke())}};$MA.Graph.TextPrimitive2D=function(a,b,c,d,e,f){$MA.Graph.DrawPrimitive.call(this,a);this.data=b;this.x=c;this.y=d;this.width=e;this.height=f};$MA.Graph.TextPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.TextPrimitive2D.prototype.plot=function(a){a=a.getContext?a.getContext("2d"):null;a.font=this.data.displayDef.font.toString();a.fillStyle=this.data.displayDef.foreground.toString();0!=this.data.displayDef.font.rotation?(a.save(),a.translate(this.x,this.y+this.height/2),a.rotate(this.data.displayDef.font.rotation*Math.PI/180),a.fillText(this.data,0,this.data.displayDef.font.getSize()),a.restore()):a.fillText(this.data,this.x,this.y+this.data.displayDef.font.getSize())};
$MA.Graph.BarPrimitive2D=function(a,b,c){$MA.Graph.PolygonPrimitive2D.call(this,a,b,c)};$MA.Graph.BarPrimitive2D.prototype=new $MA.Graph.PolygonPrimitive2D;
$MA.Graph.BarPrimitive2D.prototype.plot=function(a){if(this.drawContext.fillBrush!=$MA.Brushes.transparent){var b=this.drawObj;if(!(isNaN(b.height)||0>=b.height||isNaN(b.width)||0>=b.width)){var c=2>b.height?b.y-0.5:b.y,d=a.getContext?a.getContext("2d"):null;if(1<=b.height&&1<=b.width){if(d.beginPath(),$MA.ContextHelper.roundRect(d,b.x,c,b.width,b.height,0),d.closePath(),this.drawContext.strokeBrush&&(this.drawContext.strokeBrush!=$MA.Brushes.transparent&&!b.drawHost.animation)&&(d.lineWidth=3,d.strokeStyle=
this.getStyle(a,this.drawContext.outlineBrush,this.points),d.stroke()),d.fillStyle=this.getStyle(a,this.drawContext.fillBrush,this.points),d.fill(),this.drawContext.strokeBrush&&this.drawContext.strokeBrush!=$MA.Brushes.transparent&&(d.lineWidth=1,d.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,this.points),d.stroke()),this.drawContext.insetShadowBrush){d.beginPath();var e=b.insetShadowLoc;2<b.width&&3<b.height&&("top"==e?(d.moveTo(b.x+1,c+1),d.lineTo(b.x+b.width-1,c+1)):"right"==e?(d.moveTo(b.x+
b.width-1,c+1),d.lineTo(b.x+b.width-1,c+b.height-1)):"bottom"==e?(d.moveTo(b.x+1,c+b.height-1),d.lineTo(b.x+b.width-1,c+b.height-1)):"left"==e&&(d.moveTo(b.x+1,c+1),d.lineTo(b.x+1,c+b.height-1)));d.closePath();d.strokeStyle=this.getStyle(a,this.drawContext.insetShadowBrush,this.points);d.stroke()}}else d.lineWidth=1,d.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,this.points),d.strokeRect(b.x,c,0<b.width&&1>b.width?1:b.width,0<b.height&&1>b.height?1:b.height)}}};
$MA.Graph.DrawObject=function(a){this.drawHost=a;void 0==this.drawPrimitives&&(this.drawPrimitives=[])};$MA.Graph.DrawObject.prototype.resetPrimitives=function(){this.drawPrimitives=[]};$MA.Graph.DrawObject.prototype.plotPrimitives=function(){var a,b;for(a=0;a<this.drawPrimitives.length;a++)b=this.drawPrimitives[a],b.setBoundaries(),b.plot(this.drawHost.canvas)};
$MA.Graph.DrawObject.prototype.getObjectAtPointer=function(a){var b,c;for(b=0;b<this.drawPrimitives.length;b++)if(c=this.drawPrimitives[b],c.contains(a))return!0;return!1};$MA.Graph.DrawObject.prototype.setBrush=function(a,b){var c,d;for(c=0;c<this.drawPrimitives.length;c++)d=this.drawPrimitives[c],void 0!=d.drawContext&&(d.drawContext.fillBrush=a,d.drawContext.strokeBrush=b),d.plot(this.drawHost.canvas)};
$MA.Graph.Bar2D=function(a,b,c,d,e,f,g,h,k,l){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x=d;this.y=e;this.width=f;this.height=g;this.threeDLook=h;this.offset=0<k?k:f;a=this.drawHost instanceof $MA.Graph.ColumnGraphObject;this.insetShadowLoc=l?a?"bottom":"left":a?"top":"right"};$MA.Graph.Bar2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Bar2D.prototype.generate=function(){this.resetPrimitives();var a=[];a.push(new $MA.Point(this.x,this.y));a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x+this.width,this.y+this.height));a.push(new $MA.Point(this.x,this.y+this.height));a.push(new $MA.Point(this.x,this.y));this.drawHost.modernLook?this.drawPrimitives.push(new $MA.Graph.BarPrimitive2D(this,this.drawContext,a)):this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a));if(this.threeDLook){var b;
b=Math.sqrt(this.offset*this.offset/2)/2;a=[];a.push(new $MA.Point(this.x,this.y));a.push(new $MA.Point(this.x+b,this.y-b));a.push(new $MA.Point(this.x+this.width+b,this.y-b));a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x,this.y));this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a));a=[];a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x+this.width+b,this.y-b));a.push(new $MA.Point(this.x+this.width+b,this.y+this.height-
b));a.push(new $MA.Point(this.x+this.width,this.y+this.height));a.push(a[0]);this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a))}this.plotPrimitives()};$MA.Graph.Bubble2D=function(a,b,c,d,e,f,g,h){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x=d;this.y=e;this.radius=f;this.shape=g;this.height=h};$MA.Graph.Bubble2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Bubble2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.BubblePrimitive2D(this));this.plotPrimitives()};$MA.Graph.Line2D=function(a,b,c,d,e,f,g,h,k){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x1=d;this.y1=e;this.x2=f;this.y2=g;this.lineDef=h;this.outline=k};$MA.Graph.Line2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Line2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.LinePrimitive2D(this));this.plotPrimitives()};$MA.Graph.PieSlice2D=function(a,b,c,d,e,f,g,h,k){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x=d;this.y=e;this.orgRadius=this.radius=f;this.radStart=g;this.radEnd=h;this.isDonut=k;this.offset=Math.PI;this.offsetPercent=0};$MA.Graph.PieSlice2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.PieSlice2D.prototype.generate=function(){this.resetPrimitives();var a=this.x,b=this.y;if(0<this.offsetPercent)var c=(this.radStart+this.radEnd)/2+this.offset-Math.PI,a=a-this.offsetPercent*this.radius*Math.cos(c),b=b-this.offsetPercent*this.radius*Math.sin(c);this.drawPrimitives.push(new $MA.Graph.ArcPrimitive2D(this,this.drawContext,a,b,this.radius,this.radStart+this.offset,this.radEnd+this.offset,this.isDonut));this.plotPrimitives()};
$MA.Graph.Polygon2D=function(a,b,c,d){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.points=d};$MA.Graph.Polygon2D.prototype=new $MA.Graph.DrawObject;$MA.Graph.Polygon2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,this.points));this.plotPrimitives()};
$MA.Graph.Rectangle2D=function(a,b,c,d,e,f,g){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.series=c;this.x=d;this.y=e;this.width=f;this.height=g};$MA.Graph.Rectangle2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Rectangle2D.prototype.generate=function(){var a=[];a.push(new $MA.Point(this.x,this.y));a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x+this.width,this.y+this.height));a.push(new $MA.Point(this.x,this.y+this.height));a.push(new $MA.Point(this.x,this.y));this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a));this.plotPrimitives()};
$MA.Graph.Symbol2D=function(a,b,c,d,e,f,g,h){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.type=d;this.x=e;this.y=f;this.width=g;this.height=h};$MA.Graph.Symbol2D.prototype=new $MA.Graph.DrawObject;$MA.Graph.Symbol2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.SymbolPrimitive2D(this,this.drawContext,this.type,this.x,this.y,this.width,this.height));this.plotPrimitives()};
$MA.Graph.Text2D=function(a,b,c,d,e,f){$MA.Graph.DrawObject.call(this,a);this.data=b;this.x=c;this.y=d;this.width=e;this.height=f};$MA.Graph.Text2D.prototype=new $MA.Graph.DrawObject;$MA.Graph.Text2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.TextPrimitive2D(this,this.data,this.x,this.y,this.width,this.height));this.plotPrimitives()};$MA.Graph.DashedLine2D=function(a,b,c,d,e,f,g,h,k){$MA.Graph.Line2D.call(this,a,b,c,d,e,f,g,h,k)};
$MA.Graph.DashedLine2D.prototype=new $MA.Graph.Line2D;$MA.Graph.DashedLine2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.DashedLinePrimitive2D(this));this.plotPrimitives()};$MA.Graph.DataType={TEXT:0,DOUBLE:1,DATETIME:2,DATE:3,TIME:4};$MA.Graph.TicType={NONE:0,INSIDE:1,OUTSIDE:2,STRADDLE:3};$MA.Graph.TicRange=function(a,b){this.start=a;this.end=b};$MA.Graph.Axis=function(a){void 0!=a&&this.initialize(a)};$MA.Graph.Axis.DEFAULTMAJORDIVS=5;
$MA.Graph.Axis.prototype.initialize=function(a){this.graphObj=a;this.displayDef=new $MA.Graph.DisplayDefinition(12);this.displayDef.background=$MA.Brushes.transparent;this.labelDisplayDef=new $MA.Graph.DisplayDefinition(14);this.labelDisplayDef.background=$MA.Brushes.transparent;this.primaryLine=new $MA.Graph.LineDefinition;this.secondaryLine=void 0;this.frame=new $MA.Graph.LineDefinition;this.majorGridLine=void 0;this.minValue=this.minorDivIncr=this.majorDivIncr=this.calcMajorDivs=this.minorTicLength=
this.majorTicLength=0;this.customMinValue=!1;this.maxValue=0;this.customMaxValue=!1;this.roundTo=this.labelsEveryN=0;this.visible=!0;this.displayLastCategoryLabel=!1;this.majorTic=$MA.Graph.TicType.OUTSIDE;this.minorTic=$MA.Graph.TicType.NONE;this.dataType=$MA.Graph.DataType.TEXT;this.autoScale=!0;this.ticLabels=[]};
$MA.Graph.Axis.prototype.getTicOffset=function(){var a=0;if(this.hideValue)return 0;this instanceof $MA.Graph.ValuesAxis&&this.primaryLine.width&&(a=this.primaryLine.width);return 3*this.majorTicLength/2+a};$MA.Graph.Axis.prototype.resize=function(a){this.labelDisplayDef.autoSize&&this.labelDisplayDef.font.setSize(a);this.displayDef.autoSize&&this.displayDef.font.setSize(a)};
$MA.Graph.Axis.prototype.drawLine=function(a,b,c,d,e,f,g){a=Math.floor(a)+0.5;b=Math.floor(b)+0.5;c=Math.floor(c)+0.5;e=Math.floor(d)+0.5;d=new $MA.Graph.DrawContext($MA.Brushes.transparent,g?g.strokeBrush:void 0);c=this.graphObj.translateCoordinate(a,c);a=this.graphObj.translateCoordinate(b,e);this.graphObj.axisDrawObjects.push(new $MA.Graph.Line2D(this.graphObj,d,null,c.x,c.y,a.x,a.y,g))};
$MA.Graph.Axis.prototype.setScale=function(a,b){if(this.dataType==$MA.Graph.DataType.DOUBLE){var c=null!=a?a:0,d=null!=b?b:0,e=!1,e=this instanceof $MA.Graph.ValuesAxis?this.graphObj.valuesAxis.percentage:this.graphObj.categoryAxis.percentage;void 0!=e&&1==e&&(c/=e,d/=e);var f=c,g=d,h=0,k=h=h=0,l=k=0;this.customMinValue&&(c=this.minValue);this.customMaxValue&&(d=this.maxValue);this.autoScale?(this.customMinValue||0<c&&!this.graphObj.isDataScattered&&(c=0),this.customMaxValue||0>d&&(d=0),c==d&&(c/=
2,d*=2),0==d&&0==c&&(d=10)):(c=this.minValue,d=this.maxValue);var p=d-c;0<d&&0>c?Math.max(d,-c):Math.abs(p);var k=parseInt(p.toString()[0],10),l=p.toFixed(1).toString().indexOf("."),m,h=1;if(0<l)for(m=1;m<l;m++)h*=10;else if(0>l)for(m=-1;m>l;m--)h/=10;void 0!=e?h/=20:1>l?1==k?h/=10:2==k?h/=5:3==k&&(h/=2):4>k&&(h/=2);h=0>=this.roundTo||!this.autoScale?h:this.roundTo;this.autoScale&&(this.customMaxValue||(d=Math.round(0.49999+d/h),d*=h),this.customMinValue||(e&&0<c?c=0:(c=Math.round(c/h-0.5),c*=h)),
!this.customMaxValue&&(this.customMinValue&&0<c)&&(d+=c%h),0==d&&0==c&&(d=100),p=d-c,0<d&&0>c?Math.max(d,-c):Math.abs(p));if(0<this.majorDivs)this.calcMajorDivs=this.majorDivs;else for(this.calcMajorDivs=Math.ceil(p/h),1==this.calcMajorDivs&&(this.calcMajorDivs=4);this.calcMajorDivs>$MA.Graph.Axis.DEFAULTMAJORDIVS+2;)for(this.calcMajorDivs=0==this.calcMajorDivs%2?this.calcMajorDivs/2:0==this.calcMajorDivs%3?this.calcMajorDivs/3:0==this.calcMajorDivs%5?this.calcMajorDivs/5:0==this.calcMajorDivs%7?
this.calcMajorDivs/7:$MA.Graph.Axis.DEFAULTMAJORDIVS;2*this.calcMajorDivs<$MA.Graph.Axis.DEFAULTMAJORDIVS;)this.calcMajorDivs*=2,h/=2;this.autoScale?(0<=c||0>=d?0>=this.calcMajorDivs?this.majorDivIncr=0:(this.majorDivIncr=p/this.calcMajorDivs+1E-12,this.majorDivIncr=Math.floor(1E7*this.majorDivIncr+0.5),this.majorDivIncr/=1E7):(2>this.calcMajorDivs&&(this.calcMajorDivs=2),h=d/(d-c)*this.calcMajorDivs,k=Math.round(h),k==this.calcMajorDivs?this.customMinValue?(k=this.calcMajorDivs,this.majorDivIncr=
p/k):(k=this.calcMajorDivs-1,this.majorDivIncr=d/k,c=-this.majorDivIncr):0==k?this.customMaxValue?this.majorDivIncr=-c/this.calcMajorDivs:d=this.majorDivIncr=-c/(this.calcMajorDivs-1):k<h?this.customMinValue?this.majorDivIncr=p/this.calcMajorDivs:(this.majorDivIncr=d/k,c=-(this.calcMajorDivs-k)*this.majorDivIncr):this.customMaxValue?this.majorDivIncr=p/this.calcMajorDivs:(this.majorDivIncr=-c/(this.calcMajorDivs-k),d=k*this.majorDivIncr),this.majorDivIncr=Math.floor(1E7*this.majorDivIncr+0.5),this.majorDivIncr/=
1E7),this.maxValue=d,this.minValue=c,this.graphObj instanceof $MA.Graph.BubbleGraphObject?(e=(d-c)/10,!this.customMaxValue&&g+e>d&&(this.calcMajorDivs+=1,this.maxValue+=this.majorDivIncr),!this.customMinValue&&f-e<c&&(this.calcMajorDivs+=1,this.minValue-=this.majorDivIncr),this instanceof $MA.Graph.ValuesAxis?(c=this.graphObj.getTrueMaxYValue(),!this.customMaxValue&&c>this.maxValue&&(this.calcMajorDivs+=1,this.maxValue+=this.majorDivIncr),c=this.graphObj.getTrueMinYValue()):(c=this.graphObj.getTrueMaxXValue(),
!this.customMaxValue&&c>=this.maxValue&&(this.calcMajorDivs+=1,this.maxValue+=this.majorDivIncr),c=this.graphObj.getTrueMinXValue()),!this.customMinValue&&c<this.minValue&&(this.calcMajorDivs+=1,this.minValue-=this.majorDivIncr)):this.graphObj instanceof $MA.Graph.LineGraphObject&&(this instanceof $MA.Graph.ValuesAxis&&!this.customMinValue&&"graph"===this.graphObj.drawingContentType)&&(d=this.graphObj._parent.graphObjs.length,c=this.graphObj.getMinItemValue(),void 0!=this.graphObj.dataArea&&(1==d&&
null!=c)&&(d=this.graphObj.dataArea.bottom,f=this.graphObj.dataArea.top,!(d<=f+100)&&this.getValueLoc(d,f,c)+15>=d&&(this.calcMajorDivs+=1,this.minValue-=this.majorDivIncr)))):(this.majorDivIncr=p/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS)+1E-12,this.majorDivIncr=Math.floor(1E7*this.majorDivIncr+0.5),this.majorDivIncr/=1E7)}};
$MA.Graph.Axis.prototype.getMajorTicCoord=function(a,b){var c,d;d=this.majorTicLength;var e=0.25*d,f=0;this instanceof $MA.Graph.ValuesAxis&&this.primaryLine.width&&(f=this.primaryLine.width/2);switch(this.majorTic){case $MA.Graph.TicType.INSIDE:1==b?(c=a-d+e-f,d=a+f-1):(c=a-f+1,d=a+d-e+f);break;case $MA.Graph.TicType.OUTSIDE:-1==b?(c=a-d+e-f,d=a+f-1):(c=a-f+1,d=a+d-e+f);break;case $MA.Graph.TicType.STRADDLE:c=a-d+e-f;d=a+d-e+f;break;default:d=c=a}return new $MA.Graph.TicRange(c,d)};
$MA.Graph.Axis.prototype.getValueLoc=function(a,b,c){var d,e,f,g=0.5;d=this.minValue;e=this.maxValue;f=e-d;if(0==f)return a;this.graphObj instanceof $MA.Graph.LineGraphObject||this.graphObj.isVertical||(c<d&&(c=d,g=0),c>e&&(c=e));a>b&&(g*=-1);return a+(g+(b-a)*((c-d)/f))};$MA.Graph.Axis.prototype.outOfBound=function(a){return a<this.minValue||a>this.maxValue};$MA.Graph.Axis.prototype.getOriginLoc=function(a,b){return 0<this.minValue||0>this.maxValue?-1:this.getValueLoc(a,b,0)};
$MA.Graph.Axis.prototype.isLabelVisible=function(a){return 0==this.labelsEveryN||0<this.labelsEveryN&&0==a%this.labelsEveryN};$MA.Graph.XYAxis=function(a){$MA.Graph.Axis.call(this,a)};$MA.Graph.XYAxis.prototype=new $MA.Graph.Axis;$MA.Graph.XYAxis.prototype.drawXPrimary=function(a,b,c,d,e,f){void 0!=this.primaryLine&&this.primaryLine.visible&&this.drawLine(a,b,c,c,e,f,this.primaryLine)};
$MA.Graph.XYAxis.prototype.drawXPrimaryandSecondary=function(a,b,c,d,e,f){this.drawXPrimary(a,b,c,d,e,f);void 0!=this.secondaryLine&&this.secondaryLine.visible&&this.drawLine(a+0,b+0,d-0,d-0,0,0,this.secondaryLine)};$MA.Graph.XYAxis.prototype.drawYPrimary=function(a,b,c,d,e,f){void 0!=this.primaryLine&&this.primaryLine.visible&&(this.drawLine(a,a,c,d,0,0,this.primaryLine),void 0!=this.secondaryLine&&this.drawLine(b+0,b+0,c-0,d-0,0,0,this.secondaryLine))};
$MA.Graph.XYAxis.prototype.drawYPrimaryandSecondary=function(a,b,c,d,e,f){this.drawYPrimary(a,b,c,d,e,f);void 0!=this.secondaryLine&&this.drawLine(b+0,b+0,c-0,d-0,0,0,this.secondaryLine)};$MA.Graph.XYAxis.prototype.drawTic=function(a,b,c,d,e,f){this.visible&&this.drawLine(a,b,c,d,e,f,this.primaryLine)};$MA.Graph.XYAxis.prototype.drawXTic=function(a,b,c){this.visible&&(b=this.getMajorTicCoord(b,c),this.drawTic(a,a,b.start,b.end+1,0,0))};
$MA.Graph.XYAxis.prototype.drawYTic=function(a,b,c){this.visible&&(a=this.getMajorTicCoord(a,c),this.drawTic(a.start,a.end+1,b,b,0,0))};$MA.Graph.XYAxis.prototype.drawXGridLine=function(a,b,c,d,e,f,g,h,k){void 0!=this.majorGridLine&&this.majorGridLine.visible&&a>b&&k&&this.drawLine(a+0,a+0,d-0,e-0,g,g,this.majorGridLine)};$MA.Graph.XYAxis.prototype.drawYGridLine=function(a,b,c,d,e,f,g,h,k){void 0!=this.majorGridLine&&this.majorGridLine.visible&&a<d&&k&&this.drawLine(b+0,c+0,a-0,a-0,g,g,this.majorGridLine)};
$MA.Graph.CategoryAxis=function(a){$MA.Graph.XYAxis.call(this,a);this.label=new $MA.Graph.Data(this.labelDisplayDef,"");this.categoryHMargin=6;this.categoryVMargin=4;this.maxCategoryHeight=this.tableLastY=this.tableLastX=0};$MA.Graph.CategoryAxis.prototype=new $MA.Graph.XYAxis;
$MA.Graph.CategoryAxis.prototype.getMaxStringSize=function(){if(this.hideValue)return new $MA.Graph.TextSize(0,0);var a;this.ticLabels=[];var b;if(this.graphObj.isDataScattered)if(b=this.minValue,void 0!=this.percentage){a=this.minValue;var c;if(0<this.majorDivIncr)for(;b<=this.maxValue||a==this.maxValue;)c=parseFloat(b).toFixed(2),b=(1E7*b+1E7*this.majorDivIncr)/1E7,void 0!=this.percentage&&(c*=100,c=parseFloat(c).toFixed(0),c.indexOf("."),b=parseFloat(b).toFixed(3),a=parseFloat(b).toFixed(3),this.ticLabels.push(new $MA.Graph.Data(this.displayDef,
b)),b=a)}else{if(0<this.majorDivIncr)for(;b<=this.maxValue;)this.ticLabels.push(new $MA.Graph.Data(this.displayDef,b)),b+=this.majorDivIncr}else for(b=0;b<this.graphObj.categories.length;b++){c=this.graphObj.categories[b];c=(a=c.categoryValues)&&a.display&&(!this.graphObj.suppliedTotals||this.graphObj.suppliedTotals&&""!=c.displayValue)?c.displayValue:c.groupValues?c.groupValues[c.groupValues.length-1]:c.displayValue;var d=this.displayDef.clone();a&&(d.format=a[a.length-1].format);this.ticLabels.push(new $MA.Graph.Data(d,
c))}this.graphObj.isWaterfall&&this.graphObj.showTotal&&this.ticLabels.push(new $MA.Graph.Data(this.displayDef,$MA.getLocalisation(null,"Total","Total")));for(b=d=c=0;b<this.ticLabels.length;b++)a=this.ticLabels[b],a=a.getTextSize(this.graphObj.context),a.width>c&&(c=a.width),a.height>d&&(d=a.height);this.graphObj.isHierarchy?(this.maxCategoryHeight=d,d=(d+this.categoryVMargin)*this.graphObj.getHierarchyActualLevels(),this.graphObj.suppliedTotals||(d+=10)):0<this.graphObj.categories.length&&(a=this.graphObj.categories[0].categoryValues)&&
a.display&&(d=(d+this.categoryVMargin)*a.length);return new $MA.Graph.TextSize(c,d)};
$MA.Graph.CategoryAxis.prototype.drawXGrid=function(a,b,c,d,e,f){var g,h;if(this.graphObj instanceof $MA.Graph.LineGraphObject)if(g=this.graphObj.getMaxItemCount(),h=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS),1==g)g=0,h=a+h/2;else{var k=this.graphObj.calcLineStartPos(h);g=(h-2*k)/(g-1);h=a+k}else this.graphObj.isDataScattered?(g=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),h=a+g):this.graphObj instanceof
$MA.Graph.BubbleGraphObject?(g=this.graphObj.calcBarEntryWidth(b-a),this.catStartPos=g/2,h=a+this.graphObj.calcBubbleStartPos(b-a)):(g=this.graphObj.calcBarEntryWidth(b-a),h=a+(g+this.graphObj.calcBarGap(b-a))/2);this.drawXPrimaryandSecondary(a,b,c,d,e,f);for(k=0;k<this.ticLabels.length;k++)this.isLabelVisible(k)&&(this.majorTic!=$MA.Graph.TicType.NONE&&this.drawXTic(h,c,1),void 0!=this.majorGridLine&&this.drawXGridLine(h,a,b,c,d,e,f,g,null!=this.graphObj.seriesAxis.frame)),h+=g};
$MA.Graph.CategoryAxis.prototype.drawXGridValue=function(a,b,c,d,e,f){if(0!=this.ticLabels.length){var g;c+=this.getTicOffset();var h=this.graphObj.dataArea.bottom,k,l;f=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);e=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.XAXIS);var p=this.graphObj.getMaxItemCount(),m,n;d=this.graphObj.categoryAxis.percentage;var q=0;this.graphObj instanceof $MA.Graph.LineGraphObject?1==p?(k=0,l=a+f/2):(l=this.graphObj.calcLineStartPos(f),k=(f-2*l)/
(p-1),l=a+l):this.graphObj.isDataScattered?(k=f/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),l=a,void 0!=d&&(l+=k)):this.graphObj instanceof $MA.Graph.BubbleGraphObject?(k=this.graphObj.calcBarEntryWidth(b-a),l=a+this.graphObj.calcBubbleStartPos(b-a)):(k=this.graphObj.calcBarEntryWidth(b-a),l=a+(k+this.graphObj.calcBarGap(b-a))/2);if(this.graphObj.isHierarchy)this.TableLineDef=new $MA.Graph.LineDefinition,this.TableLineDef.strokeBrush=void 0==this.graphObj.hierarchyChartTableLinesColor?
new $MA.Brush($MA.Brushes.gray.color):new $MA.Brush(this.graphObj.hierarchyChartTableLinesColor),this.TableLineDef.width=void 0==this.graphObj.hierarchyChartTableLinesWidth?0.5:this.graphObj.hierarchyChartTableLinesWidth,this.lineX=0,0==p?(m=h+20,this.drawLine(e,this.graphObj.dataArea.right,m,m,0,0,this.TableLineDef),this.drawLine(e,e,h,m,0,0,this.TableLineDef),this.drawLine(this.graphObj.dataArea.right,this.graphObj.dataArea.right,h,m,0,0,this.TableLineDef)):1==p&&this.graphObj instanceof $MA.Graph.LineGraphObject?
(h=this.graphObj.dataArea.bottom,p=new $MA.Graph.Data(this.displayDef,this.graphObj.hierarchyObjects[0].value),g=p.getTextSize(this.graphObj.context),m=h+g.height+8,this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,l,h+2,g.height)),this.drawLine(e,this.graphObj.dataArea.right,m,m,0,0,this.TableLineDef),this.drawLine(e,e,h,m,0,0,this.TableLineDef),this.drawLine(this.graphObj.dataArea.right,this.graphObj.dataArea.right,h,m,0,0,this.TableLineDef)):(this.tableLastY=this.tableLastX=
0,this.tableStartX=l-k/2,0==k&&(this.tableStartX=l),this.drawHierarchyLabels([this.tableStartX],c,k,null,null,null,0,[0]),this.graphObj.parentAsTotal&&this.graphObj.showTotal?this.tableLastX=[this.tableStartX]:this.graphObj.isWaterfall&&(!this.graphObj.parentAsTotal&&this.graphObj.showTotal)&&(p=new $MA.Graph.Data(this.displayDef,$MA.getLocalisation(null,"Total","Total")),25>k&&(p.value="..."),13>k&&(p.value="."),g=p.getTextSize(this.graphObj.context),this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,
p,this.graphObj.dataArea.right-(k/2+k/4)-g.width/2+2,h+3,g.height))),this.drawLine(this.tableLastX,this.tableLastX,h,this.tableLastY,0,0,this.TableLineDef));else{var s,r,u,v=[];a=0;if(0<this.graphObj.categories.length&&(h=this.graphObj.categories[0],g=h.groupValues,u=h.categoryValues,g&&h.categoryValues&&h.categoryValues.display))for(a=g.length,r=0;r<a;r++)v.push({lastX:0,x:l,cat:g[r]});var w,x=this.graphObj.getCategoryLevelCount(),A="",y=0,C=0,h=!1;this.graphObj instanceof $MA.Graph.BubbleGraphObject&&
(h=this.graphObj.isDataScattered);var B=this.ticLabels.length;for(s=0;s<B;s++){if(this.isLabelVisible(s)){q++;p=this.ticLabels[s];h&&(void 0!=d?(n=100*parseFloat(p.value),n=Math.round(n).toFixed(0),w=$MA.labelNumberString(p.value),p.value=w,n+="%",p.value=n):(w=$MA.labelNumberString(p.value),p.value=w));g=p.getTextSize(this.graphObj.context);m=g.width;w=l-m/2;if("string"===typeof p.value||h)for(;(0>w||w+m>b)&&6<p.value.length;)p.value=p.value.substring(0,p.value.length-4)+"...",g=p.getTextSize(this.graphObj.context),
m=g.width,w=l-m/2;n=this.graphObj.translateCoordinate(w,void 0);0<x?w>y&&A!=p.toString()&&(this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,n.x,c,m,g.height)),A=p.toString(),y=w+m):this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,n.x,c,m,g.height));C=n.x}else if(this.graphObj.showTotal&&s==B-1){p=this.ticLabels[s];g=p.getTextSize(this.graphObj.context);m=g.width;w=l-m/2;var z=this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length-1];"ltr"===
this.graphObj.dir?(r=z.x+z.width-w,0>=r&&(n=this.graphObj.translateCoordinate(w,void 0),this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,n.x,c,m,g.height)),C=w)):(r=this.graphObj.translateCoordinate(z.x,void 0).x+z.width-w,0<=r&&(n=z.data,n.value=n.value.toString().substring(0,n.value.toString().length-4)+"...",n=this.graphObj.translateCoordinate(w,void 0),this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,n.x,c,m,g.height)),C=w))}else C=n.x+k;if(0<a)for(g=
s<B-1-(this.graphObj.showTotal?1:0)?this.graphObj.categories[s+1].groupValues:void 0,r=z=0,z=a-1;r<a;r++,z--){var E=v[r],D=g?g[r]:void 0;if(E.cat!==D){m=this.displayDef.clone();u&&(m.format=u[z].format);var p=new $MA.Graph.Data(m,E.cat),F=p.getTextSize(this.graphObj.context);w=l-E.x;m=F.width;w=E.x+(w-m)/2;0>w&&(w=0);w+m<=b&&w>E.lastX&&(n=this.graphObj.translateCoordinate(w,void 0),this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,n.x,c+(r+1)*(F.height+this.categoryVMargin),
m,F.height)),E.lastX=w+m);r==a-1&&void 0!=D&&(w=l+k/2,this.drawLine(w,w,this.graphObj.dataArea.top,this.graphObj.dataArea.bottom,0,0,this.primaryLine));E.x=l+k;E.cat=D}else break}l+=k}if(this.displayLastCategoryLabel||h)if(1==q&&h)u=e+f,n=this.ticLabels[this.ticLabels.length-1],k=n.value,g=n.getTextSize(this.graphObj.context),k=$MA.labelNumberString(k),n.value=k,u-=g.width-3,g=n.getTextSize(this.graphObj.context),this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,n,u,c,g.width,
g.height));else{u=C;n=this.ticLabels[this.ticLabels.length-1];k=n.value;h&&(u=e+f-3,"number"==typeof k&&(k=$MA.labelNumberString(k)),n.value=k);g=n.getTextSize(this.graphObj.context);h&&(u-=g.width);for(e=g.width;(0>u||u+e>b)&&6<k.length;)k=k.substring(0,k.length-4)+"...",n.value=k,g=n.getTextSize(this.graphObj.context),e=g.width;0<this.graphObj.axisDrawObjects.length&&h?(this.graphObj.axisDrawObjects.splice(this.graphObj.axisDrawObjects.length-1,1),b=this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length-
1],b=b.x+b.width,p=this.ticLabels[this.ticLabels.length-1],n=p.value,void 0!=d&&0>n.indexOf("%")&&(n=100*parseFloat(p.value),n=Math.round(n).toFixed(0),w=$MA.labelNumberString(n),p.value=w,p.value=n+"%"),b<u&&(this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length]=new $MA.Graph.Text2D(this.graphObj,p,u,c,m,g.height))):this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length-a-1]=new $MA.Graph.Text2D(this.graphObj,this.ticLabels[this.ticLabels.length-1],u,c,m,g.height)}}}};
$MA.Graph.CategoryAxis.prototype.drawHierarchyLabels=function(a,b,c,d,e,f,g){var h,k,l,p,m,n,q,s,r=!1;h=this.graphObj.level;void 0==h&&(h=this.graphObj.getHierarchyLevel());f||(f=this.graphObj.getRootNode(),r=!0);var u=this.graphObj.dataArea.bottom;k=f.getLevel();d=d||[0];e=e||[0];var v=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.XAXIS)-6,w=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.DISPLAY);this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.DISPLAY);
this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.XAXIS);if(null!==f&&(l=f.getChildren(),s=l.length,this.graphObj.parentAsTotal&&this.graphObj.showTotal))for(p=0;p<s;p++)this.drawHierarchyLabels(a,b,c,d,e,l[p],null,s==p+1),a[0]+=c;var x=!this.graphObj.suppliedTotals;p=new $MA.Graph.Data(this.displayDef,r&&x?$MA.getLocalisation(null,"Total","Total"):f.getValue());q=p.getTextSize(this.graphObj.context);m=a[0];var A=this.graphObj.parentAsTotal&&this.graphObj.showTotal?-1:1,y=f.getChildrenCount();void 0!=
f.getSeries()&&y++;var C=y*c/2-q.width/2,B=m+C;n=b+(r&&h===k?0:h-k)*(q.height+this.categoryVMargin);var z=n+10-this.graphObj.chartDisplayBoundary,E=0<z?!0:!1;E&&(n=this.graphObj.chartDisplayBoundary-10);if(x||!r){var r=n+10,x=this.graphObj.parentAsTotal&&this.graphObj.showTotal?m+c:m,D=this.graphObj.getMaxItemCount(),F=p.value,G=r-u;if(3>G)return;this.graphObj instanceof $MA.Graph.LineGraphObject&&0==c&&(x=v);x<this.tableStartX?x=this.tableStartX:x>this.graphObj.dataArea.right&&(x=this.graphObj.dataArea.right);
var J=0;if(0==c||x<v)J=v-x,x=v;x<d[0]&&(x=d[0]);this.graphObj instanceof $MA.Graph.LineGraphObject&&1>=D&&(x=v);v=n-5;v<u?(v=u-1,r+=1):k==h&&(v-=G/2-8);this.lineX!=x&&this.drawLine(x,x,u,r,0,0,this.TableLineDef);this.lineX=x;u=x+y*c*A;if(u>this.graphObj.dataArea.right||this.graphObj instanceof $MA.Graph.LineGraphObject&&0==c)u=this.graphObj.dataArea.right;this.graphObj instanceof $MA.Graph.LineGraphObject&&(!0==g&&u<=w)&&(u-=J,x>=u&&(x=u=0));this.drawLine(x,u,r,r,0,0,this.TableLineDef);g=0;x>B&&x<
B+q.width&&(g=2,B=x+g);B+q.width>u&&(g=4,B-=g);g=this.graphObj.parentAsTotal&&this.graphObj.showTotal?x-u:u-x-g;F=void 0!=F&&0<=g?F.toString():"";for(w=!1;""!=F&&q.width>g&&"..."!=F;)F=F.substring(0,F.length-4)+"...",p.value=F,q=p.getTextSize(this.graphObj.context),w=!0;w&&4<=g&&(B=x+2+g/2-q.width/2+1);u>this.tableLastX&&(this.tableLastX=u);r>this.tableLastY&&(this.tableLastY=r);this.graphObj.parentAsTotal&&this.graphObj.showTotal&&(B=u+C);E&&(this.maxCategoryHeight>z?(F="...",v=k==h?v-7:v-2,q.height=
5):F="");6>g&&(F=".",B=x+g/2+1);p.value=F;this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,p,B,v,q.height));d[0]=m;e[0]=n}if(!this.graphObj.parentAsTotal||!this.graphObj.showTotal)for(void 0!==f.getSeries()&&(a[0]+=c),p=0;p<s;p++)this.drawHierarchyLabels(a,b,c,d,e,l[p],s==p+1)};
$MA.Graph.CategoryAxis.prototype.drawYGridValue=function(a,b,c,d,e,f){if(0!=this.ticLabels.length){b=this.graphObj.calcBarEntryWidth(c-d);c-=(b+this.graphObj.calcBarGap(c-d))/2;f=a-this.getTicOffset();var g,h=this.graphObj.getCategoryLevelCount(),k="",l;for(l=0;l<this.ticLabels.length;l++)this.isLabelVisible(l)&&(g=this.ticLabels[l],a=g.getTextSize(this.graphObj.context),d=-a.width,e=-(a.height/2),0<h?k!=g.toString()&&(this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,g,f+d,c+
e,a.width,a.height)),k=g.toString()):this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,g,f+d,c+e,a.width,a.height))),c-=b}};$MA.Graph.SeriesAxis=function(a){$MA.Graph.Axis.call(this,a);this.label=new $MA.Graph.Data(this.labelDisplayDef,"")};$MA.Graph.SeriesAxis.prototype=new $MA.Graph.Axis;
$MA.Graph.SeriesAxis.prototype.getMaxStringSize=function(){this.ticLabels=[];var a,b;for(a=0;a<this.graphObj.seriesList.length;a++)b=this.graphObj.seriesList[a],this.ticLabels.push(new $MA.Graph.Data(this.displayDef,b.name));var c,d=b=0;for(a=0;a<this.ticLabels.length;a++)c=this.ticLabels[a],c=c.getTextSize(this.graphObj.context),c.width>b&&(b=c.width),c.height>d&&(d=c.height);return new $MA.Graph.TextSize(b,d)};
$MA.Graph.ValuesAxis=function(a){$MA.Graph.XYAxis.call(this,a);this.label=new $MA.Graph.Data(this.labelDisplayDef,"");this.dataType=$MA.Graph.DataType.DOUBLE;this.secondaryAxis=!1;this.majorDivs=0};$MA.Graph.ValuesAxis.prototype=new $MA.Graph.XYAxis;
$MA.Graph.ValuesAxis.prototype.getMaxStringSize=function(){this.ticLabels=[];var a=this.minValue,b,c=this.minValue;$MA.yTicLabels.allInteger=void 0===this.percentage?!1:!0;this.displayDef.percentageChart=this.percentage?!0:!1;for(var d=parseFloat(this.maxValue).toFixed(6);a<=d||c==this.maxValue;)b=parseFloat(a).toFixed(2),a=(1E7*a+1E7*this.majorDivIncr)/1E7,void 0!=this.percentage?(b*=100,b=parseFloat(b).toFixed(0),b.indexOf("."),b+="%",a=parseFloat(a).toFixed(3),a=c=parseFloat(a).toFixed(3)):($MA.yTicLabels.allInteger&&
$MA.labelNumberString(b),c=a.toFixed(6)),this.ticLabels.push(new $MA.Graph.YData(this.displayDef,b,this.graphObj.isHundredPercent));for(a=c=b=0;a<this.ticLabels.length;a++)d=this.ticLabels[a],d=d.getTextSize(this.graphObj.context),d.width>b&&(b=d.width),d.height>c&&(c=d.height);return new $MA.Graph.TextSize(b,c)};
$MA.Graph.ValuesAxis.prototype.drawXGrid=function(a,b,c,d,e,f){var g=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),h=a;this.drawXPrimaryandSecondary(a,b,c,d,e,f);var k;for(k=0;k<this.ticLabels.length;k++)this.isLabelVisible(k)&&(this.majorTic!=$MA.Graph.TicType.NONE&&this.drawXTic(h,c,1),void 0!=this.majorGridLine&&this.drawXGridLine(h,a,b,c,d,e,f,g,null!=this.graphObj.seriesAxis.frame)),h+=g};
$MA.Graph.ValuesAxis.prototype.drawYGrid=function(a,b,c,d,e,f){var g,h,k,l=0;this.primaryLine&&(l=this.primaryLine.width||1);g=a-l/2;h=b;k=-1;var p=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS)/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),m=c;this.secondaryAxis&&(g=b+l/2,h=a,k=1);this.drawYPrimaryandSecondary(g,h,c,d,e,f);for(a=0;a<this.ticLabels.length;a++)this.isLabelVisible(a)&&(this.majorTic!=$MA.Graph.TicType.NONE&&this.drawYTic(g,m,k),void 0!=this.majorGridLine&&
this.drawYGridLine(m,g,h,c,d,e,f,p,null!=this.graphObj.seriesAxis.frame)),m-=p};
$MA.Graph.ValuesAxis.prototype.drawXGridValue=function(a,b,c,d,e,f){b=c+this.getTicOffset();c=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS);d=a;var g,h;for(g=0;g<this.ticLabels.length;g++)this.isLabelVisible(g)&&(h=this.ticLabels[g],a=h.getTextSize(this.graphObj.context),f=a.width,e=d-f,this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,h,e,b,f,a.height))),d+=c};
$MA.Graph.ValuesAxis.prototype.drawYGridValue=function(a,b,c,d,e,f){a=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.YAXIS)+this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.YAXIS);a=this.secondaryAxis?b+this.getTicOffset():a-this.getTicOffset();var g;b=0;d=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS)/(0<this.calcMajorDivs?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS);e=c;this.secondaryAxis&&(b=5);var h,k=null;for(f=0;f<this.ticLabels.length;f++){if(this.isLabelVisible(f)&&
(null==k||e+g.height<k)){k=e;h=this.ticLabels[f];g=h.getTextSize(this.graphObj.context);this.secondaryAxis||(b=-g.width);c=-(g.height/2);var l=this.graphObj.translateCoordinate(a+b,void 0);this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,h,l.x,e+c,g.width,g.height))}e-=d}};$MA.Graph.SymbolType={BOX:0,CIRCLE:1};$MA.Graph.GraphObject=function(a){this._parent=a};$MA.Graph.GraphObject.TITLEHEIGHTFACTOR=1.6;$MA.Graph.GraphObject.XBORDERFACTOR=0.05;
$MA.Graph.GraphObject.YBORDERFACTOR=0.05;$MA.Graph.GraphObject.SIZETOL=3;$MA.Graph.GraphObject.ANIMATIONDURATION=10;$MA.Graph.GraphObject.ANIMATIONCOUNT=7;$MA.Graph.GraphObject.lineBrush=new $MA.Brush(7368816);$MA.Graph.GraphObject.BACKGROUNDCOLOR="#FFFFFF";$MA.Graph.GraphObject.FORECOLOR="#000000";
$MA.Graph.GraphObject.prototype.initialize=function(){this.titleDisplayDef=new $MA.Graph.DisplayDefinition;this.legendDisplayDef=new $MA.Graph.DisplayDefinition(14);this.pieDisplayDef=new $MA.Graph.DisplayDefinition;this.legendDisplayDef.font.setWeight("bold");this.title="";this.legend=new $MA.Graph.Legend(this,$MA.Graph.LegendType.NONE,this.legendDisplayDef);this.categoryAxis=new $MA.Graph.CategoryAxis(this);this.valuesAxis=new $MA.Graph.ValuesAxis(this);this.seriesAxis=new $MA.Graph.SeriesAxis(this);
this.xAxis=this.categoryAxis;this.yAxis=this.valuesAxis;this.drawAreas=new $MA.Graph.DrawAreas;this.yAxis.labelDisplayDef.font.rotation=270;this.drawObjects=[];this.axisDrawObjects=[];this.annotationObjects=[];this.WFConnLineObjects=[];this.auxiliaryObjects=[];this.dataPointsColor=[];this.seriesList=[];this.categories=[];this.categoryHash=new $MA.Hash;this.overlap=0;this.gap=1;this.suppliedTotals=this.isWaterfall=this.isHundredPercent=this.isStacked=!1;this.yBorder=this.xBorder=this.centerY=this.centerX=
this.paintSize=this.width=this.height=0;this.hasGroups=this.isPloting=!1;this.animation=this.barWidth=this.linebrush=this.secondaryAxisBrushes=this.primaryAxisBrushes=this.chartBrushes=this.yAxisSize=this.xAxisSize=void 0;this.valueBubble=!1;this.valueBubbleStyle=$MA.ValueBubbleStyle.TOP;this.valueBubbleHeight=80;this.valueBubblePosition="top";this.categoriesDisplayOrder="leafToRoot";this.endSwipe=this.startSwipe=!1;this.newContent=!0;this.isCustomDataPointsColor=this.monoColor=!1;this.dataPointsColorMaxIndex=
this.dataPointsColorMinIndex=void 0;this.dataPointsColorHash=new $MA.Hash;this.borderColor=this.foreColor=this.backgroundColor=void 0;this.maxPies=12;this.hierarchyInitLevel=void 0;this.hierarchyMaxLevel=0;this.parentAsTotal=this.showTotal=!1;this.showWFConnectingLine=!0;this.dir=$MA.dir;this.getStyles()};
$MA.Graph.GraphObject.prototype.getStyles=function(){this.backgroundColor=$MA.Graph.GraphObject.BACKGROUNDCOLOR;this.foreColor=$MA.Graph.GraphObject.FORECOLOR;var a=$MA.getCSSRule(".chart");void 0!=a&&(""!=a.style.background&&(this.backgroundColor=a.style.background),""!=a.style.color&&(this.foreColor=a.style.color),""!=a.style.fontFamily&&(this.xAxis.displayDef.font.setFamily(a.style.fontFamily),this.xAxis.labelDisplayDef.font.setFamily(a.style.fontFamily),this.yAxis.displayDef.font.setFamily(a.style.fontFamily),
this.yAxis.labelDisplayDef.font.setFamily(a.style.fontFamily)),""!=a.style.fontSize&&(this.xAxis.displayDef.font.setSize(a.style.fontSize),this.xAxis.labelDisplayDef.font.setSize(a.style.fontSize),this.yAxis.displayDef.font.setSize(a.style.fontSize),this.yAxis.labelDisplayDef.font.setSize(a.style.fontSize)),""!=a.style.fontWeight&&(this.xAxis.displayDef.font.setWeight(a.style.fontWeight),this.xAxis.labelDisplayDef.font.setWeight(a.style.fontWeight),this.yAxis.displayDef.font.setWeight(a.style.fontWeight),
this.yAxis.labelDisplayDef.font.setWeight(a.style.fontWeight)));var b=$MA.getCSSRule(".chart_xaxis");void 0!=b&&(""!=b.style.fontFamily&&(this.xAxis.displayDef.font.setFamily(b.style.fontFamily),this.xAxis.labelDisplayDef.font.setFamily(b.style.fontFamily)),""!=b.style.fontSize&&(this.xAxis.displayDef.font.setSize(b.style.fontSize),this.xAxis.labelDisplayDef.font.setSize(b.style.fontSize)),""!=b.style.fontWeight&&(this.xAxis.displayDef.font.setWeight(b.style.fontWeight),this.xAxis.labelDisplayDef.font.setWeight(b.style.fontWeight)));
b=$MA.getCSSRule(".chart_yaxis");void 0!=b&&(""!=b.style.fontFamily&&(this.yAxis.displayDef.font.setFamily(b.style.fontFamily),this.yAxis.labelDisplayDef.font.setFamily(b.style.fontFamily)),""!=b.style.fontSize&&(this.yAxis.displayDef.font.setSize(b.style.fontSize),this.yAxis.labelDisplayDef.font.setSize(b.style.fontSize)),""!=b.style.fontWeight&&(this.yAxis.displayDef.font.setWeight(b.style.fontWeight),this.yAxis.labelDisplayDef.font.setWeight(b.style.fontWeight)));b=$MA.getCSSRule(".hierarchy_chart_table_lines");
void 0!=b&&(""!=b.style.color&&(this.hierarchyChartTableLinesColor=b.style.color),""!=b.style.width&&(this.hierarchyChartTableLinesWidth=b.style.width.toString(),0<this.hierarchyChartTableLinesWidth.indexOf("px")&&(this.hierarchyChartTableLinesWidth=this.hierarchyChartTableLinesWidth.substr(0,this.hierarchyChartTableLinesWidth.length-2))));if(b=$MA.getCSSRule(".chart_legend")){var a=b.style.color,c=b.style.borderColor;this.legend.bgColor=b.style.backgroundColor||this.legend.bgColor;this.legend.fontColor=
a||this.legend.fontColor;this.legend.borderColor=c||this.legend.borderColor;""!=b.style.fontFamily&&this.legendDisplayDef.font.setFamily(b.style.fontFamily);""!=b.style.fontSize&&this.legendDisplayDef.font.setSize(b.style.fontSize);""!=b.style.fontWeight&&this.legendDisplayDef.font.setWeight(b.style.fontWeight);""!=b.style.fontStyle&&this.legendDisplayDef.font.setStyle(b.style.fontStyle)}else a&&""!=a.style.fontFamily&&this.legendDisplayDef.font.setFamily(a.style.fontFamily)};
$MA.Graph.GraphObject.prototype.plot=function(a,b){$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Graph.GraphObject.plot "+$MA.getLocalisation(null,"Start","Start")+" "+$MA.getLocalisation(null,"Canvas_Info"," Canvas Info,")+$MA.getLocalisation(null,"Width"," Width: ")+a.width+$MA.getLocalisation(null,"Height"," Height: "+a.height));this.drawingContentType="graph";this.setCanvas(a);this.scale();this.resize();b||this.arrange();this.initDataArea();this.getIsCustomDataPointsColor();this.redraw(b);this.drawingContentType=
void 0;$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Graph.GraphObject.plot "+$MA.getLocalisation(null,"End","End"))};$MA.Graph.GraphObject.prototype.redraw=function(a){this.reset(a);a||(this.drawTitle(),this.restoreLegendState(),this.drawLegend());this.drawGridsBack();this.drawXLabel();this.drawYLabel();this.isStacked?this.plotStacked():this.isVertical?this.plotVertical():this.plotDefault();this.drawGridsFront();this.drawSwipeGradient()};
$MA.Graph.GraphObject.prototype.drawSwipeGradient=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e;this.startSwipe&&(e=this.context.createLinearGradient(a,d,a+7,d),e.addColorStop(0,"rgba(0, 0, 0, 0.2)"),e.addColorStop(1,"rgba(0, 0, 0, 0)"),this.context.fillStyle=e,this.context.fillRect(a,d,7,c-d));this.endSwipe&&(e=
this.context.createLinearGradient(b-7,d,b,d),e.addColorStop(0,"rgba(0, 0, 0, 0.2)"),e.addColorStop(1,"rgba(0, 0, 0, 0)"),this.context.fillStyle=e,this.context.fillRect(b-7,d,7,c-d))};$MA.Graph.GraphObject.prototype.setStartSwipe=function(a){this.startSwipe=a};$MA.Graph.GraphObject.prototype.setEndSwipe=function(a){this.endSwipe=a};$MA.Graph.GraphObject.prototype.setCanvas=function(a){this.canvas=a;this.height=a.height;this.width=a.width;this.context=a.getContext("2d")};
$MA.Graph.GraphObject.prototype.plot2Canvas=function(a,b,c,d){var e=this.canvas;this.drawingContentType="rangeselector";this.setCanvas(a);this.reset(d);this.scale();d||this.arrangeContent(b,c);this.initDataArea();this.getIsCustomDataPointsColor();this.isStacked?this.plotStacked():this.plotDefault();this.generate();e&&this.setCanvas(e);this.drawingContentType=void 0};
$MA.Graph.GraphObject.prototype.plotContent=function(a,b,c,d,e,f){c&&!f&&(c=this.animation,this.animation=void 0,e||(e=document.createElement("canvas"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.zIndex="-2000"),d||(e.width=a.width-2*b,e.height=a.height-0),this.plot2Canvas(e,0,0,d),this.animation=c);e&&f&&a.getContext("2d").drawImage(e,b,0,e.width,e.height);return e};$MA.Graph.GraphObject.prototype.setValueBubbleHeight=function(a){this.valueBubbleHeight=a};
$MA.Graph.GraphObject.prototype.setValueBubblePosition=function(a){};$MA.Graph.GraphObject.prototype.setValueBubbleCategoriesDisplayOrder=function(a){this.categoriesDisplayOrder=a};
$MA.Graph.GraphObject.prototype.animateGraph=function(a){var b=function(){a.animateGraph(a)};a.animationCount++;if(a.animationCount==$MA.Graph.GraphObject.ANIMATIONCOUNT){if(a.animation=void 0,a.plot(a.canvas),a.generateBackground(),a.generate(),a._parent.onanimationend&&(b=document.getElementById(a._parent.id),a._parent.onanimationend(b),a instanceof $MA.Graph.LineGraphObject)){for(;b&&!(void 0!=b.macontrol&&b.macontrol instanceof $MA.Chart);)b=b.parentNode;b.macontrol instanceof $MA.Chart&&b.macontrol.chartView.refreshValueBubbleView(!0)}}else if(a.animationCount<
$MA.Graph.GraphObject.ANIMATIONCOUNT){a.clearItems&&a.clearItems();var c,d,e=a.drawObjects.length;for(c=0;c<e;c++)d=a.drawObjects[c],d.item&&a.animateDrawObj(d);setTimeout(b,$MA.Graph.GraphObject.ANIMATIONDURATION)}};$MA.Graph.GraphObject.prototype.generateBackground=function(){var a,b=this.axisDrawObjects.length;for(a=0;a<b;a++)this.axisDrawObjects[a].generate()};
$MA.Graph.GraphObject.prototype.generate=function(){var a,b,c=this.axisDrawObjects.length,c=this.annotationObjects.length;for(b=0;b<c;b++)this.annotationObjects[b].generate();if(!this.skipDefaultGraphRendering){var d=this instanceof $MA.Graph.BubbleGraphObject,e=this.context;d&&(e.save(),e.beginPath(),b=this.getStartPosition(this.dataArea.left,void 0,this.dataArea.width),e.rect(b.x,this.dataArea.top,this.dataArea.width,this.dataArea.height),e.clip());if(this.animation&&!d){c=this.drawObjects.length;
for(b=0;b<c;b++)a=this.drawObjects[b],void 0!=a.item&&this.resetDrawObj(a),a.generate();this.animationCount=0;var f=this;setTimeout(function(){f.animateGraph(f)},$MA.Graph.GraphObject.ANIMATIONDURATION)}else if(c=this.drawObjects.length,d)for(c=this.drawObjects.slice(),c.sort(function(a,b){return b.radius-a.radius}),b=0;b<c.length;b++)c[b].generate();else{for(b=0;b<c;b++)this.drawObjects[b].generate();if($MA.platform.blackberry&&this instanceof $MA.Graph.PieGraphObject)for(b=e.canvas,e.clearRect(0,
0,b.width,b.height),this.drawLegend(),b=0;b<c;b++)this.drawObjects[b].generate();c=this.auxiliaryObjects.length;for(b=0;b<c;b++)this.auxiliaryObjects[b].generate();c=this.WFConnLineObjects.length;for(b=0;b<c;b++)this.WFConnLineObjects[b].generate()}d&&e.restore()}this._parent.trigger("draw",{canvas:this.canvas})};$MA.Graph.GraphObject.prototype.preventDefaultRendering=function(a){this.skipDefaultGraphRendering=a};$MA.Graph.GraphObject.prototype.getNumberOfVisibleCategories=function(){return this.categories.length};
$MA.Graph.GraphObject.prototype.reset=function(a){this.legend.reset();this.axisDrawObjects=[];this.drawObjects=[];this.annotationObjects=[];this.hierarchyObjects=[];this.WFConnLineObjects=[];this.auxiliaryObjects=[];a||(this.canvas.width=this.canvas.width)};$MA.Graph.GraphObject.prototype.getHierarchy=function(){var a="graph"===this.drawingContentType?0:1;void 0===this.hierarchies&&(this.hierarchies=[]);void 0===this.hierarchies[a]&&(this.hierarchies[a]=new $MA.Graph.Hierarchy);return this.hierarchies[a]};
$MA.Graph.GraphObject.prototype.scale=function(){var a,b;if(this.isHierarchy)this.hierarchy=this.getHierarchy(),this.redrawOnly?"graph"===this.drawingContentType&&(this.hierarchy.build(this),this.hierarchy.setMaxLevel(this.hierarchyMaxLevel),a=void 0!=this.hierarchyInitLevel?this.hierarchyInitLevel:this.hierarchy.getLevel(),void 0!=a&&(this.hierarchy.setLevel(a),this.hierarchyInitLevel=void 0),this.redrawOnly=!1):(a=this.hierarchy.getLevel(),this.hierarchy.build(this),this.hierarchy.setMaxLevel(this.hierarchyMaxLevel),
this.suppliedTotals&&0===a&&(a=this.hierarchy.getTopLevel()),"graph"!==this.drawingContentType?(this.redrawOnly=!1,this.expand(!0)):this.hierarchyInitLevel?(this.hierarchy.setLevel(this.hierarchyInitLevel),this.hierarchyInitLevel=void 0):a&&this.hierarchy.setLevel(a)),b=!this.isWaterfall||this.showTotal&&this.parentAsTotal?this.hierarchy.getRootNodeMinMax():this.hierarchy.getParentAsTotalMinMax(this),!this.isWaterfall&&this.suppliedTotals?(a=this.minValue,b=this.maxValue):(a=null===b?this.getMinItemValue():
Math.min(this.getMinItemValue(),b[0]),b=null===b?this.getMaxItemValue():Math.max(this.getMaxItemValue(),b[1])),this.isStacked&&(this.isHundredPercent?(a=0,b=1):(a=this.getMinItemNegSum(),b=this.getMaxItemPosSum()));else if(this.isStacked)this.isHundredPercent?(a=0,b=1):(a=this.getMinItemNegSum(),b=this.getMaxItemPosSum());else if("rangeselector"===this.drawingContentType){a=0<this.getMaxItemCount();if(void 0===this.rangeMinValue&&a||this.rangeMinValue!==this.minValue)this.rangeMinValue=this.getMinItemValue();
if(void 0===this.rangeMaxValue&&a||this.rangeMaxValue!==this.maxValue)this.rangeMaxValue=this.getMaxItemValue();a=this.rangeMinValue;b=this.rangeMaxValue}else a=void 0!==this.minValue?this.minValue:this.getMinItemValue(),b=void 0!==this.maxValue?this.maxValue:this.getMaxItemValue();this.valuesAxis.setScale(a,b);this.categoryAxis.setScale(1,this.categories.length)};
$MA.Graph.GraphObject.prototype.resize=function(){var a=Math.min(this.height,this.width)/25;4>a&&(a=4);this.titleDisplayDef.autoSize&&this.titleDisplayDef.font.setSize($MA.Graph.GraphObject.TITLEHEIGHTFACTOR*a+"px");this.pieDisplayDef.autoSize&&this.pieDisplayDef.font.setSize(a+"px");this.categoryAxis.resize(a);this.seriesAxis.resize(a);this.valuesAxis.resize(a);this.categoryAxis.majorTicLength=this.height/75;this.seriesAxis.majorTicLength=this.height/75;this.valuesAxis.majorTicLength=this.height/
75;this.secondaryAxis&&(this.secondaryAxis.majorTicLength=this.height/75);this.categoryAxis.minorTicLength=this.height/150;this.seriesAxis.minorTicLength=this.height/150;this.valuesAxis.minorTicLength=this.height/150;this.secondaryAxis&&(this.secondaryAxis.minorTicLength=this.height/150)};
$MA.Graph.GraphObject.prototype.arrangeContent=function(a,b){var c;this instanceof $MA.Graph.ColumnGraphObject?(c=this.calcBarGap(this.width-2*a),this.drawAreas.set($MA.Graph.DrawAreaType.DATA,a-c/2,b+1,this.width+c-2*a,this.height-2*b-2)):this instanceof $MA.Graph.LineGraphObject?(c=this.calcBarGap(this.width-2*a),this.drawAreas.set($MA.Graph.DrawAreaType.DATA,a-c/2,b+4,this.width-2*a+c,this.height-2*b-8)):this.drawAreas.set($MA.Graph.DrawAreaType.DATA,a,b,this.width-2*a,this.height-2*b);this.showDots=
!1};$MA.Graph.GraphObject.prototype.getLegendState=function(){return this.legend.state};$MA.Graph.GraphObject.prototype.setLegendState=function(a){this.legend.state=a;void 0===a&&(this.legend.legends=void 0)};$MA.Graph.GraphObject.prototype.keepLegendState=function(){var a=[];a[0]=this.legend.left;a[1]=this.legend.top;this.setLegendState(a)};$MA.Graph.GraphObject.prototype.restoreLegendState=function(){var a=this.legend.state;a&&(this.legend.left=a[0],this.legend.top=a[1])};
$MA.Graph.GraphObject.prototype.getState=function(){return[this.dataArea,this.drawAreas,this.baseStartX,this.baseIncrX,this.baseStartY,this.baseIncrY]};$MA.Graph.GraphObject.prototype.setState=function(a){this.dataArea=a[0];this.drawAreas=a[1];this.baseStartX=a[2];this.baseIncrX=a[3];this.baseStartY=a[4];this.baseIncrY=a[5]};
$MA.Graph.GraphObject.prototype.arrange=function(){this.drawAreas.reset();this.xBorder=this.width*$MA.Graph.GraphObject.XBORDERFACTOR;this.yBorder=this.height*$MA.Graph.GraphObject.YBORDERFACTOR;var a=this.xBorder/5,b=this.yBorder/5,c=this.yBorder/3,d=this.xBorder/3,e=this.yBorder/3,f=this.width-2*this.xBorder,g=new $MA.Graph.Data(this.titleDisplayDef,this.title),e=g.getTextSize(this.context);if(this.titleDisplayDef.autoSize)for(;e.width>f&&4<this.displayDef.font.getSize();)e=g.getTextSize(this.context),
e.width>f&&this.titleDisplayDef.font.reduceSize();var h=e.height,g=(this.width-e.width)/2,k=this.yBorder/5;this.drawAreas.set($MA.Graph.DrawAreaType.TITLE,g,k,e.width,e.height);var e=k+h,l;if((!this.legend.legendList||1>=this.legend.legendList.length)&&(this instanceof $MA.Graph.PieGraphObject&&1>this.categories.length||!(this instanceof $MA.Graph.PieGraphObject)&&2>this.getSeriesCount()||this.legend.location==$MA.Graph.LegendType.NONE))g=d,k=e+c,f=this.width-2*d,h=this.height-k-c;else{var p=this.legend,
m,n;if((l=this instanceof $MA.Graph.TableBarGraphObject)||p.location!==$MA.Graph.LegendType.LEFT&&p.location!==$MA.Graph.LegendType.RIGHT){c=2;m=this.width-2*d;n=(this.height-e-4*c)*p.dispHeight;var q=2*this.legendDisplayDef.font.getSize()+2*c;n<q&&(n=q)}else m=(this.width-4*d)*p.dispWidth,n=this.height-e-2*c;this.arrangeLegends(m,n);if(!l&&(p.location===$MA.Graph.LegendType.LEFT||p.location===$MA.Graph.LegendType.RIGHT))l=p.offsetY+(n-p.viewHeight)/2,0>l?l=0:l>n-p.viewHeight&&(l=n-p.viewHeight),
p.top=e+c+l,l=p.offsetX+(m-p.viewWidth)/2,0>l?l=0:l>m-p.viewWidth&&(l=m-p.viewWidth),k=e+c,h=this.height-k-c,"ltr"===this.dir||this instanceof $MA.Graph.PieGraphObject?p.location===$MA.Graph.LegendType.LEFT?(p.left=d+l,g=m+3*d,f=this.width-g-d):(g=this.width-(d+m)+l,p.left=g,f=this.width-4*d-m,g=d):p.location===$MA.Graph.LegendType.LEFT?(p.left=d+l,f=this.width-4*d-m,g=d):(p.left=this.width-(d+m)+l,g=m+3*d,f=this.width-g-d);else if(l||p.location===$MA.Graph.LegendType.TOP||p.location===$MA.Graph.LegendType.BOTTOM)l=
p.offsetX+(m-p.viewWidth)/2,0>l?l=0:l>m-p.viewWidth&&(l=m-p.viewWidth),p.left=d+l,l=p.offsetY+(n-p.viewHeight)/2,0>l?l=0:l>n-p.viewHeight&&(l=n-p.viewHeight),g=d,f=this.width-2*d,p.location===$MA.Graph.LegendType.TOP?(p.top=e+c+l,k=e+n+3*c,h=this.height-k-c):(k=this.height-(n+c)+l,p.top=k,h=this.height-e-n-4*c,k=e+c);this.drawAreas.set($MA.Graph.DrawAreaType.LEGEND,p.left,p.top,p.viewWidth,p.viewHeight)}this.drawAreas.set($MA.Graph.DrawAreaType.DISPLAY,g,k,f,h);this.chartDisplayBoundary=k+h;c=g;d=
k;"top"===this.valueBubblePosition&&(this.valueBubble&&this.valueBubbleStyle==$MA.ValueBubbleStyle.TOP)&&(g=this.valueBubbleHeight,d+=g,h-=g);q=this.xAxis.getMaxStringSize();e=q.height>this.height/$MA.Graph.GraphObject.SIZETOL?this.height/$MA.Graph.GraphObject.SIZETOL:q.height;e+=this.xAxis.getTicOffset();this.xAxisSize=q;this.xAxis.visible||(e=0);q=this.primaryAxis?this.primaryAxis.getMaxStringSize():this.yAxis.getMaxStringSize();l=!0;g=this.width/$MA.Graph.GraphObject.SIZETOL;q.width>g?(p=g,l=!1):
p=q.width;this.yAxis==this.categoryAxis&&-1==this.yAxis.labelsEveryN&&(p=this.xAxisSize.width,l=!1);p+=this.yAxis.getTicOffset();this.yAxisSize=q;this.yAxis.visible||(p=0,l=!1);var s=q=0;this.xAxis.visible&&!this.categoryAxis.hideValue&&(g=this.xAxis.label.getTextSize(this.context),s=g.height>this.height/$MA.Graph.GraphObject.SIZETOL?this.height/$MA.Graph.GraphObject.SIZETOL:g.height,q=g.width);n=m=0;this.yAxis.visible&&(g=this.yAxis.label.getTextSize(this.context),m=g.width>this.width/4?this.width/
4:g.width,n=g.height);g=c+m+p+a;f=f-m-p-a-Math.max(0,this.seriesAxis.getTicOffset());k=d+h-s;this.xAxis.visible&&(this.xAxis.label.value=this.getAxisLabel(this.xAxis.label.realValue.toString(),f),q=this.xAxis.label.getTextSize(this.context).width);this.chartDisplayBoundary=k;this.drawAreas.set($MA.Graph.DrawAreaType.XLABEL,g,k,q,s);k=d+h-s-e-b;h=h-e-s;this.categoryAxis.hideValue||(h-=b);!(b=this.secondaryAxis)||this instanceof $MA.Graph.TableBarGraphObject||(b.graphObj.scale(),s=$MA.yTicLabels.allInteger,
q=b.getMaxStringSize(),q.width+=a,b.label.value=this.getAxisLabel(b.label.realValue.toString(),h),s&&(!$MA.yTicLabels.allInteger&&l)&&(l=this.context.measureText(".0").width,this.yAxisSize+=l,p+=l,g+=l,f-=l),f=f-b.getTicOffset()-q.width-b.label.getTextSize(this.context).width,b.secondaryAxisX=g+f+b.getTicOffset()+q.width);this.drawAreas.set($MA.Graph.DrawAreaType.XAXIS,g,k,f,e);this.yAxis.visible&&(this.yAxis.label.value=this.getAxisLabel(this.yAxis.label.realValue.toString(),h),n=this.yAxis.label.getTextSize(this.context).height,
b&&(n=Math.max(n,b.label.getTextSize(this.context).height)));this.drawAreas.set($MA.Graph.DrawAreaType.YLABEL,c,d,m,n);this.drawAreas.set($MA.Graph.DrawAreaType.YAXIS,c+m+a,d,p,h);g=this.drawAreas.getX($MA.Graph.DrawAreaType.XAXIS);k=this.drawAreas.getY($MA.Graph.DrawAreaType.YAXIS);f=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);h=this.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS);0>h&&(h=0);this.drawAreas.set($MA.Graph.DrawAreaType.DATA,g,k,f,h);this.calcSize();this.calcDisplayEveryNLabels()};
$MA.Graph.GraphObject.prototype.getAxisLabel=function(a,b){var c=this.context.measureText(a),d="";if(c.width>b)for(d="...";c.width>b&&""!==a;)a=a.substr(0,a.length-1),c=this.context.measureText(a+d);return a+d};
$MA.Graph.GraphObject.prototype.calcSize=function(){this.centerX=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA)+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA)/2;this.centerY=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA)+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)/2;var a=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),b=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.paintSize=a>b?b:a};
$MA.Graph.GraphObject.prototype.calcDisplayEveryNLabels=function(){if(-1!=this.categoryAxis.labelsEveryN&&void 0!=this.xAxisSize&&0<this.categories.length&&void 0==this.categories[0].groupValues){var a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),a=this.calcBarEntryWidth(a),b=this.xAxisSize;b.width<a?this.categoryAxis.labelsEveryN=0:(a=Math.ceil(b.width/a),this.categoryAxis.labelsEveryN=a)}};
$MA.Graph.GraphObject.prototype.getValueLoc=function(a){if(this.dataArea.bottom&&this.dataArea.top&&void 0!=a)return this.valuesAxis.getValueLoc(this.dataArea.bottom,this.dataArea.top,a)};
$MA.Graph.GraphObject.prototype.initDataArea=function(){this.dataArea={left:this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),top:this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),width:this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),height:this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)};this.dataArea.right=this.dataArea.left+this.dataArea.width;this.dataArea.bottom=this.dataArea.top+this.dataArea.height;var a=this.valuesAxis.getOriginLoc(this.dataArea.bottom,this.dataArea.top);0>a&&(a=
0>=this.valuesAxis.maxValue?this.dataArea.top:this.dataArea.bottom);this.dataArea.origin=a};$MA.Graph.GraphObject.prototype.drawTitle=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.TITLE),b=this.drawAreas.getY($MA.Graph.DrawAreaType.TITLE),c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.TITLE),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.TITLE);this.annotationObjects.push(new $MA.Graph.Text2D(this,new $MA.Graph.Data(this.titleDisplayDef,this.title),a,b,c,d))};
$MA.Graph.GraphObject.prototype.drawGridsBack=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e=0.5+(b-a);this.xAxis.visible&&this.xAxis.drawXGrid(a,b,d,c,0,e);this.yAxis.visible&&this.yAxis.drawYGrid(a,b,d,c,0,e)};
$MA.Graph.GraphObject.prototype.drawXLabel=function(){if(this.xAxis.visible&&!this.xAxis.hideValue){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.XLABEL)+this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/2,b=this.drawAreas.getY($MA.Graph.DrawAreaType.XLABEL),c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XLABEL),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.XLABEL),a=this.translateCoordinate(a-c/2,b);this.annotationObjects.push(new $MA.Graph.Text2D(this,this.xAxis.label,a.x,b,c,d))}};
$MA.Graph.GraphObject.prototype.drawYLabel=function(){if(this.yAxis.visible&&!this.yAxis.hideValue){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.YLABEL),b=this.drawAreas.getY($MA.Graph.DrawAreaType.YLABEL)+this.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS)/2,c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.YLABEL),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.YLABEL),a=this.getStartPosition(a,b,c);this.yAxis.primaryLine.strokeBrush.color&&(this.yAxis.label.displayDef.foreground=(new $MA.Brush(this.yAxis.primaryLine.strokeBrush.color)).toString());
this.yAxis.secondaryAxis?this.yAxis.secondaryAxisX&&(a=this.yAxis.secondaryAxisX,a=this.getStartPosition(a,b,c),this.annotationObjects.push(new $MA.Graph.Text2D(this,this.yAxis.label,a.x,b,c,d))):this.annotationObjects.push(new $MA.Graph.Text2D(this,this.yAxis.label,a.x,b,c,d))}};
$MA.Graph.GraphObject.prototype.drawGridsFront=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e=0.5+(b-a);this.xAxis.visible&&!this.xAxis.hideValue&&this.xAxis.drawXGridValue(a,b,d,c,0,e);this.yAxis.visible&&!this.yAxis.hideValue&&this.yAxis.drawYGridValue(a,b,d,c,0,e)};
$MA.Graph.GraphObject.prototype.getEnabledSeries=function(){var a=0,b,c=this.seriesList.length;for(b=0;b<c;++b)this.seriesList[b].isEnabled()&&a++;return a};$MA.Graph.GraphObject.prototype.calcBarWidth=function(a){var b=this.getMaxItemCount();if(0==b)return-1;var c=0;if(this.isStacked)c=a/(b+(b+1)*this.gap);else if(this.totalBarEntries)c=a/(b*this.totalBarEntries+1);else{c=this.seriesList.length;if(0==c||this instanceof $MA.Graph.LineGraphObject)c=1;c=a/(b*(c-(c-1)*this.overlap)+(b+1)*this.gap)}return c};
$MA.Graph.GraphObject.prototype.calcBarEntryWidth=function(a){return void 0===this.totalBarEntries||this.isStacked?this.calcRawBarEntryWidth(a)+this.calcBarGap(a):this.calcBarWidth(a)*this.totalBarEntries};$MA.Graph.GraphObject.prototype.calcRawBarEntryWidth=function(a){var b=0;a=this.calcBarWidth(a);b=this.getSeriesCount();if(1>b||this instanceof $MA.Graph.LineGraphObject)b=1;return b=this.isStacked?a:a+a*(1-this.overlap)*(b-1)};
$MA.Graph.GraphObject.prototype.calcBarGap=function(a){var b=0;if(void 0===this.totalBarEntries){var c,d;d=this.calcRawBarEntryWidth(a);c=this.getMaxItemCount();a-=d*c;0.1<a&&(b=a/(c+1))}else b=this.calcBarWidth(a)*(1+this.prevBarEntries);return b};$MA.Graph.GraphObject.prototype.getItemYDouble=function(a,b){var c,d=0;if(this.isStacked){var e;for(e=0;e<=a;e++)c=this.getSeries(e),d+=c.getItemYDouble(b)}else c=this.getSeries(a),d=c.getItemYDouble(b);return d};
$MA.Graph.GraphObject.prototype.computeTruePieRadius=function(a){var b,c,d,e,f,g,h,k=0;g=d=0;b=this.getSeriesCount();for(e=b-1;0<=e;e--){d=this.getSeries(e);h=Math.sqrt(a*a*e/b);f=0;c=d.items.length;for(c-=1;0<=c;c--)g=d.getItemPieExplodePercent(c),g/=100,g>f&&(f=g);d=h*f;d>k&&(k=d)}0>k&&(k=0);return 0<a?a*a/(a+k):1};
$MA.Graph.GraphObject.prototype.createCategory=function(a,b,c,d){this.hasGroups=this.hasGroups||b&&0<b.length;b=new $MA.Graph.Category(a,b,c,d);this.categories.push(b);this.hasGroups||this.categoryHash.set(a,this.categories.length-1);return b};
$MA.Graph.GraphObject.prototype.getCategoryLevelCount=function(){var a=0,b,c;if(0<this.categories.length){for(b=0;b<this.categories.length;b++)c=this.categories[0],void 0!=c.groupValues&&c.groupValues.length>a&&(a=c.groupValues.length);0<=this.graphType.indexOf("hierarchy")&&!1==this.suppliedTotals&&a++}return a};$MA.Graph.GraphObject.prototype.getCategoryIndex=function(a){if(this.hasGroups||this.isDataScattered)return-1;a=this.categoryHash.get(a);return void 0==a?-1:a};
$MA.Graph.GraphObject.prototype.getCategoryNodes=function(a){return[]};$MA.Graph.GraphObject.prototype.createSeries=function(a,b){var c=new $MA.Graph.Series(this,a),d=this.getSeriesFillBrush(b),e=this.getSeriesStrokeBrush(b),f=this.getSeriesInsetShadowBrush(b);c.drawContext=new $MA.Graph.DrawContext(d,e,f);this.seriesList.push(c);return c};
$MA.Graph.GraphObject.prototype.getDrawContext=function(a){this.monoColor&&(a=0);void 0!=this.chartBrushes&&(a%=this.chartBrushes.length);var b=this.getSeriesFillBrush(a),c=this.getSeriesStrokeBrush(a);a=this.getSeriesInsetShadowBrush(a);void 0!=this.borderColor&&(c=this.borderColor,a=$MA.Brushes.transparent);return new $MA.Graph.DrawContext(b,c,a)};$MA.Graph.GraphObject.prototype.getSeriesList=function(){return this.seriesList};
$MA.Graph.GraphObject.prototype.getSeries=function(a){if("string"==typeof a){var b=this.seriesList.length,c;for(c=0;c<b;c++)if(a=this.seriesList[c],a.name==name)return a}else if(0<=a&&a<this.seriesList.length)return this.seriesList[a]};$MA.Graph.GraphObject.prototype.resetData=function(){this.drawObjects=[];this.seriesList=[];this.categories=[];this.categoryHash.clear();this.legend.reset()};$MA.Graph.GraphObject.prototype.getSeriesCount=function(){return this.seriesList.length};
$MA.Graph.GraphObject.prototype.getMinItemValue=function(){if(this.isStacked&&this.isHundredPercent)return 0;var a=null,b=null,c;for(c=0;c<this.seriesList.length;c++)b=this.seriesList[c],b=b.getMinItemValue(this.isWaterfall),null==a?a=b:b<a&&(a=b);return a};
$MA.Graph.GraphObject.prototype.getMaxItemValue=function(){if(this.isStacked&&this.isHundredPercent)return 100;var a=null,b=null,c=this.seriesList.length,d;for(d=0;d<c;d++)b=this.seriesList[d],b=b.getMaxItemValue(this.isWaterfall),null==a?a=b:b>a&&(a=b);return a};$MA.Graph.GraphObject.prototype.getMinItemNegSum=function(){var a,b,c,d,e,f=this.getMaxItemCount(),g=this.getSeriesCount();for(a=d=0;a<f;a++){for(b=e=0;b<g;b++)c=this.getSeries(b),c=c.getItemYDouble(a),0>c&&(e+=c);e<d&&(d=e)}return d};
$MA.Graph.GraphObject.prototype.getItemSumPerCategory=function(){var a,b,c,d,e=[],f=this.getMaxItemCount(),g=this.getSeriesCount();for(a=0;a<f;a++){for(b=d=0;b<g;b++)c=this.getSeries(b),!0==c.isEnabled()&&(c=c.getItemYDouble(a),d+=Math.abs(c));e.push(d)}return e};
$MA.Graph.GraphObject.prototype.getMaxItemPosSum=function(){var a,b,c,d=0,e;if(this.isHierarchy&&this.getRootNode()&&this.getRootNode().getSeries())for(b=this.getRootNode().getSeries(),a=0;a<b.length;a++)d+=b[a];else{var f=this.getMaxItemCount(),g=this.getSeriesCount();for(a=0;a<f;a++){for(b=e=0;b<g;b++)c=this.getSeries(b),c=c.getItemYDouble(a),0<c&&(e+=c);e>d&&(d=e)}}return d};
$MA.Graph.GraphObject.prototype.getMaxItemCount=function(){var a=0,b,c;for(b=0;b<this.seriesList.length;b++)c=this.seriesList[b],c.items.length>a&&(a=c.items.length);this.isWaterfall&&this.showTotal&&a++;return a};$MA.Graph.GraphObject.prototype.getMinZValue=function(){var a=null;0<this.seriesList.length&&(a=this.seriesList[0].name);return a};$MA.Graph.GraphObject.prototype.getMaxZValue=function(){var a=this.seriesList.length,b=null;0<a&&(b=this.seriesList[a-1].name);return b};
$MA.Graph.GraphObject.prototype.getMaxPieLabelSize=function(){var a,b,c=0,d=0,e=null,f,g;b=this.getSeriesCount();for(a=0;a<b;a++)if(f=this.getSeries(a),g=f.getYPosSum(),2>b){b=f.items.length;for(a=0;a<b;a++)e=f.getItemYDouble(a)/g,e=new $MA.Graph.Data(this.pieDisplayDef,Number(100*e).toFixed(2)),e=e.getTextSize(this.context),e.width>c&&(c=e.width),e.height>d&&(d=e.height);break}else{e=f.label;if(null==e)return new $MA.Graph.TextSize;e=e.getTextSize(this.context);e.width>c&&(c=e.width);e.height>d&&
(d=e.height)}return new $MA.Graph.TextSize(c,d)};$MA.Graph.GraphObject.prototype.getGradientDirection=function(){var a=0;this instanceof $MA.Graph.ColumnGraphObject&&(a=2);return a};$MA.Graph.GraphObject.prototype.getCustomContext=function(a){var b=$MA.getStrokeInsetColors(a);return new $MA.Graph.DrawContext(new $MA.Brush(a),new $MA.Brush(b[0]),new $MA.Brush(b[1]))};
$MA.Graph.GraphObject.prototype.setPalette=function(a,b){if(null!=a&&Array.isArray(a)&&0<a.length){"primaryaxis"==b?(this.primaryAxisBrushes=[],this.primaryAxisStrokeBrushes=[],this.primaryAxisInsetBrushes=[]):"secondaryaxis"==b?(this.secondaryAxisBrushes=[],this.secondaryAxisStrokeBrushes=[],this.secondaryAxisInsetBrushes=[]):(this.chartBrushes=[],this.chartStrokeBrushes=[],this.chartInsetBrushes=[]);var c,d;for(c=0;c<a.length;c++)"primaryaxis"==b?(this.primaryAxisBrushes[c]=new $MA.Brush(a[c]),
d=$MA.getStrokeInsetColors(a[c]),this.primaryAxisStrokeBrushes[c]=new $MA.Brush(d[0]),this.primaryAxisInsetBrushes[c]=new $MA.Brush(d[1])):"secondaryaxis"==b?(this.secondaryAxisBrushes[c]=new $MA.Brush(a[c]),d=$MA.getStrokeInsetColors(a[c]),this.secondaryAxisStrokeBrushes[c]=new $MA.Brush(d[0]),this.secondaryAxisInsetBrushes[c]=new $MA.Brush(d[1])):(this.chartBrushes[c]=new $MA.Brush(a[c]),d=$MA.getStrokeInsetColors(a[c]),this.chartStrokeBrushes[c]=new $MA.Brush(d[0]),this.chartInsetBrushes[c]=new $MA.Brush(d[1]))}else null==
a?"primaryaxis"==b?this.primaryAxisBrushes=void 0:"secondaryaxis"==b?this.secondaryAxisBrushes=void 0:this.chartBrushes=void 0:$MA.log.error("Palette must be either null or a non-empty array.")};
$MA.Graph.GraphObject.prototype.getSeriesFillBrush=function(a){return void 0!=this.chartBrushes?this.chartBrushes[a%this.chartBrushes.length]:this.valuesAxis.secondaryAxis&&void 0!=this.secondaryAxisBrushes?this.secondaryAxisBrushes[a%this.secondaryAxisBrushes.length]:this.valuesAxis.secondaryAxis||void 0==this.primaryAxisBrushes?$MA.Graph.SeriesBrushes.getFillBrush(a,this.getGradientDirection()):this.primaryAxisBrushes[a%this.primaryAxisBrushes.length]};
$MA.Graph.GraphObject.prototype.getCustomisedFillBrush=function(a,b){this.getCustomisedFillBrush(a,b)};
$MA.Graph.GraphObject.prototype.getSeriesStrokeBrush=function(a){return void 0!=this.chartBrushes?this.chartStrokeBrushes[a%this.chartStrokeBrushes.length]:this.secondaryAxisBrushes&&this.valuesAxis.secondaryAxis?this.secondaryAxisStrokeBrushes[a%this.secondaryAxisStrokeBrushes.length]:this.primaryAxisBrushes&&!this.valuesAxis.secondaryAxis?this.primaryAxisStrokeBrushes[a%this.primaryAxisStrokeBrushes.length]:$MA.Graph.SeriesBrushes.getStrokeBrush(a,this.getGradientDirection())};
$MA.Graph.GraphObject.prototype.getSeriesInsetShadowBrush=function(a){return void 0!=this.chartBrushes?this.chartInsetBrushes[a%this.chartInsetBrushes.length]:this.secondaryAxisBrushes&&this.valuesAxis.secondaryAxis?this.secondaryAxisInsetBrushes[a%this.secondaryAxisInsetBrushes.length]:this.primaryAxisBrushes&&!this.valuesAxis.secondaryAxis?this.primaryAxisInsetBrushes[a%this.primaryAxisInsetBrushes.length]:$MA.Graph.SeriesBrushes.getInsetShadowBrush(a,this.getGradientDirection())};
$MA.Graph.GraphObject.prototype.getLineBrush=function(){return void 0!=this.linebrush?this.linebrush:$MA.Graph.GraphObject.lineBrush};$MA.Graph.GraphObject.prototype.refreshBrush=function(){var a,b,c,d,e=this.seriesList.length;for(d=0;d<e;d++)a=this.getSeriesFillBrush(d),b=this.getSeriesStrokeBrush(d),c=this.getSeriesInsetShadowBrush(d),this.seriesList[d].drawContext=new $MA.Graph.DrawContext(a,b,c)};
$MA.Graph.GraphObject.prototype.drawLine=function(a,b,c,d,e){a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.closePath();a.stroke()};
$MA.Graph.GraphObject.prototype.arrangeLegends=function(a,b){var c=this.legend;c.legends||(c.legends=this.getAllLegends());c.lMargin=1;c.rMargin=1;c.tMargin=1;c.bMargin=1;var d=c.legends;c.maxWidth=d.maxWidth;c.height=2*this.legendDisplayDef.font.getSize();c.count=d.length;var e=c.lMargin+c.rMargin,f=c.tMargin+c.bMargin,g=this instanceof $MA.Graph.TableBarGraphObject;if(!g&&(c.location===$MA.Graph.LegendType.LEFT||c.location===$MA.Graph.LegendType.RIGHT))if(c.totalHeight=(c.height+c.bMargin)*c.count+
c.tMargin,c.totalWidth=d.maxWidth+e,c.totalHeight>b){e=c.tMargin;for(d=c.count-1;0<=d;d--)if(e+c.height+c.bMargin<=b)e+=c.height+c.bMargin;else break;c.viewHeight=e}else c.viewHeight=c.totalHeight;else if(g&&c.location!==$MA.Graph.LegendType.NONE||c.location===$MA.Graph.LegendType.TOP||c.location===$MA.Graph.LegendType.BOTTOM)c.totalHeight=c.height+f,c.totalWidth=d.totalWidth+c.rMargin*c.count+c.lMargin,c.viewHeight=c.totalHeight>b?b:c.totalHeight;c.viewWidth=c.totalWidth>a?a:c.totalWidth};
$MA.Graph.GraphObject.prototype.getLegendList=function(){var a=this.legend.legendList,b;if(!a){var a=[],c=this.getSeriesList();if(c){var d,e=c.length;for(d=0;d<e;d++)b={formatted_name:c[d].formatted_name,name:c[d].name,fillBrush:c[d].drawContext.fillBrush.toString(),graphObjIndex:c[d].graphObjIndex},a.push(b)}}return a};
$MA.Graph.GraphObject.prototype.getAllLegends=function(){var a=this.getLegendList(),b=this.context,c=this.legendDisplayDef.font.getSize(),d=a.length,e=[],c=15+c,f=0,g=0,h,k,l;b.font=this.legendDisplayDef.font.toString();for(k=0;k<d;k++){h=a[k];l=h.graphObjIndex;var p=h.fillBrush.toString();this.isCustomDataPointsColor&&(void 0!=this.getCustomisedFillBrush(k,0)&&this instanceof $MA.Graph.PieGraphObject)&&(p=this.getCustomisedFillBrush(k,0).toString());var m=b.measureText(h.formatted_name).width+c;
e.push({legend_formatted_name:h.formatted_name,legend_name:h.name,legend_color:p,graphObjIndex:l,width:m,margin:5});f<m&&(f=m);g+=m}e.maxWidth=f;e.totalWidth=g;return e};$MA.Graph.GraphObject.prototype.drawOutline=function(a,b,c,d,e){a.beginPath();a.strokeStyle=this.legend.borderColor;a.strokeRect(b-1,c-1,d,e);a.closePath()};
$MA.Graph.GraphObject.prototype.drawSingleLegend=function(a,b,c,d){var e=this.legendStates.get(b.graphObjIndex+"_"+b.legend_name),f=$MA.roundToHalf(this.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND)),g=this instanceof $MA.Graph.TableBarGraphObject;a.globalAlpha=!1===e?"0.5":"1";a.lineWidth=0.5;a.beginPath();var e=0,h;"ltr"===this.dir?d?a.rect(c.left,c.top,c.width-1,c.height):a.rect(c.left,c.top,c.width,c.height-1):d?g?(c.left=this.legend.totalWidth+2*this.legend.left-c.left-c.width,h={x:c.left,y:c.top},
a.rect(c.left,c.top,c.width-1,c.height)):(h=this.getStartPosition(c.left,void 0,c.width),a.rect(h.x,c.top,c.width-1,c.height)):(e=c.width+c.left-this.legend.maxWidth-f,a.rect(c.left-e,c.top,c.width,c.height-1));a.fillStyle=this.legend.bgColor;a.strokeStyle=this.legend.borderColor;a.stroke();a.fill();a.closePath();a.fillStyle=b.legend_color;var f=$MA.roundToHalf(c.left+b.margin),g=$MA.roundToHalf(c.top+c.height/4),k=$MA.roundToHalf(c.height/2);a.font=this.legendDisplayDef.font.toString();"rtl"===this.dir&&
(d?f=h.x+c.width-b.margin-k:(f=c.left+c.width-b.margin-k,c.width>this.legend.viewWidth&&(e=this.legend.viewWidth-c.width,f+=e)));$MA.platform.blackberry?a.fillRect(f,g,k,k):(a.beginPath(),$MA.ContextHelper.roundRect(a,f,g,k,k,2),a.closePath(),a.fill());a.fillStyle=this.legend.fontColor;a.font=this.legendDisplayDef.font.toString();"rtl"===this.dir?(f-=b.margin,a.textAlign="right"):f=f+k+b.margin;a.fillText(b.legend_formatted_name,f,g+k-2)};
$MA.Graph.GraphObject.prototype.drawLegend=function(){this.legend.legends||(this.legend.legends=this.getAllLegends());var a=this.categories.length;if(0<a&&this.legend.location!==$MA.Graph.LegendType.NONE){var b=this.legend,c=this instanceof $MA.Graph.TableBarGraphObject,d=c||b.location===$MA.Graph.LegendType.TOP||b.location===$MA.Graph.LegendType.BOTTOM,e=$MA.roundToHalf(this.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND)),f=$MA.roundToHalf(this.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND)),g=$MA.roundToHalf(this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND)),
h=$MA.roundToHalf(this.drawAreas.getWidth($MA.Graph.DrawAreaType.LEGEND)),k=this.context,l=b.legends,p=b.lMargin,m=b.rMargin,n=p+m,a=b.tMargin,q=b.bMargin,s=a+q;if(this instanceof $MA.Graph.PieGraphObject){var r=k.fillStyle;k.fillStyle="white";k.fillRect(e,f,h,g);k.fillStyle=r}else k.clearRect(e,f,h,g);k.save();k.beginPath();k.rect(e+p,f+a,h-n,g-s);k.clip();n=this.legend.left+p;s=this.legend.top+a;c&&(s=f);var r={width:b.maxWidth,height:b.height},a=l.length,u,v;for(u=0;u<a;u++)b=l[u],v=b.legend_color,
r.left=n,r.top=s,d&&(r.width=b.width),this.drawSingleLegend(k,b,r,d),b.legend_color=v,(b=this.legend.drawObjectsList["legend_"+u])?(b.x=d?r.left:r.left-(this.legend.maxWidth-this.legend.viewWidth),b.y=r.top,b.width=r.width,b.height=r.height,b.generate()):(b=new $MA.Graph.Rectangle2D(this,new $MA.Graph.DrawContext($MA.Brushes.transparent,$MA.Brushes.transparent),u,r.left,r.top,r.width,r.height),this.legend.drawObjectsList["legend_"+u]=b,this.annotationObjects.push(b)),d?n+=r.width+m:s+=r.height+q;
k.restore();h+=d?1:2;c&&(e=this.legend.left+p-1,h=n-e+1);this.drawOutline(this.context,e,f,h,g+(d?2:1),this.backgroundColor,this.legend.borderColor)}};
$MA.Graph.GraphObject.prototype.doScrollLegend=function(a,b){var c=a,d=b,e=!1,d=0,f=(c=this instanceof $MA.Graph.TableBarGraphObject)||this.legend.location===$MA.Graph.LegendType.TOP||this.legend.location===$MA.Graph.LegendType.BOTTOM;if(a||b){if(a){var g=this.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND),h=this.drawAreas.getWidth($MA.Graph.DrawAreaType.LEGEND);"ltr"===this.dir?(c=this.legend.left-a,c<=g&&c+this.legend.totalWidth>=g+h&&(e=!0,this.legend.left=c)):f?c?(c=this.legend.left-a,c<=g&&c>=
this.legend.viewWidth-this.legend.totalWidth&&(e=!0,this.legend.left=c)):(c=this.legend.left+a,c<=g&&c+this.legend.totalWidth>=g+h&&(e=!0,this.legend.left=c)):(this.legend.viewWidth<this.legend.maxWidth&&(d=this.legend.maxWidth-this.legend.viewWidth),c=this.legend.left-a,c>=g&&c<=g+d&&(e=!0,this.legend.left=c))}b&&(g=this.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND),h=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),d=this.legend.top-b,d<=g&&d+this.legend.totalHeight>=g+h&&(e=!0,this.legend.top=
d));e&&(this.drawLegend(),this.keepLegendState())}};$MA.Graph.GraphObject.prototype.setMonoColor=function(a){this.monoColor=a};$MA.Graph.GraphObject.prototype.applyWaterfallStyle=function(a){if(this.isWaterfall)for(var b in a)this[b]=a[b];else $MA.log.error("Can't apply style "+a+" to a non-Waterfall chart!")};
$MA.Graph.GraphObject.prototype.getIsCustomDataPointsColor=function(){if(this.dataPointsColor&&0!=this.dataPointsColor.length){var a,b,c=this.dataPointsColor.length;for(a=0;a<c&&!this.isCustomDataPointsColor;a++)for(b=0;2>b;b++){if(void 0!=this.dataPointsColor[a][b]&&null!=this.dataPointsColor[a][b]&&0<=parseInt(this.dataPointsColor[a][0],10)){this.isCustomDataPointsColor=!0;break}this.isCustomDataPointsColor=!1}}else this.isCustomDataPointsColor=!1;this.isCustomDataPointsColor&&(this.dataPointsColorHash.clear(),
this.createCustomDataPointsColorHash(),this.dataPointsColorMinIndex=this.getDataPointsColorMinIndex(),this.dataPointsColorMaxIndex=this.getDataPointsColorMaxIndex());return this.isCustomDataPointsColor};
$MA.Graph.GraphObject.prototype.getDataPointsColorMinIndex=function(){var a;if(this.isCustomDataPointsColor){var b=this.dataPointsColor.length,c;for(c=0;c<b;c++)void 0==this.dataPointsColor[c][0]||(null==this.dataPointsColor[c][0]||0>parseInt(this.dataPointsColor[c][0],10))||(a=void 0==a?this.dataPointsColor[c][0]:a,a=this.dataPointsColor[c][0]<a?this.dataPointsColor[c][0]:a)}return a};
$MA.Graph.GraphObject.prototype.getDataPointsColorMaxIndex=function(){var a;if(this.isCustomDataPointsColor){var b,c=this.dataPointsColor.length;for(b=0;b<c;b++)void 0==this.dataPointsColor[b][0]||(null==this.dataPointsColor[b][0]||0>parseInt(this.dataPointsColor[b][0],10))||(a=void 0==a?this.dataPointsColor[b][0]:a,a=this.dataPointsColor[b][0]>a?this.dataPointsColor[b][0]:a)}return a};
$MA.Graph.GraphObject.prototype.createCustomDataPointsColorHash=function(){if(this.isCustomDataPointsColor){var a,b=this.dataPointsColor.length;for(a=0;a<b;a++)void 0==this.dataPointsColor[a][0]||(null==this.dataPointsColor[a][0]||0>parseInt(this.dataPointsColor[a][0],10))||this.dataPointsColorHash.set("CustomDataPointsColor"+parseInt(this.dataPointsColor[a][0],10),this.dataPointsColor[a][1])}};$MA.Graph.GraphObject.prototype.updateValueBubbleValue=function(a){this.valueBubbleValue=a};
$MA.Graph.GraphObject.prototype.collapse=function(a){this.hierarchy?this.hierarchy.collapse(a):this.setHierarchyInitLevel(a,"collapse")};$MA.Graph.GraphObject.prototype.expand=function(a){this.hierarchy?this.hierarchy.expand(a):this.setHierarchyInitLevel(a,"expand")};$MA.Graph.GraphObject.prototype.isRootLevel=function(){return this.hierarchy&&void 0!==this.hierarchy.isRootLevel()?this.hierarchy.isRootLevel():0<this.hierarchyInitLevel?!1:!0};
$MA.Graph.GraphObject.prototype.isLeafLevel=function(){return this.hierarchy&&void 0!==this.hierarchy.isLeafLevel()?this.hierarchy.isLeafLevel():this.hierarchyInitLevel===this.hierarchyMaxLevel?!0:!1};$MA.Graph.GraphObject.prototype.getHierarchyLevel=function(){return this.hierarchy&&void 0!==this.hierarchy.getLevel()?this.hierarchy.getLevel():this.hierarchyInitLevel};
$MA.Graph.GraphObject.prototype.getHierarchyActualLevels=function(){return this.hierarchy&&void 0!==this.hierarchy.getActualLevelsCount()?this.hierarchy.getActualLevelsCount():this.hierarchyInitLevel};$MA.Graph.GraphObject.prototype.getMaxHierarchyLevel=function(){return this.hierarchy&&void 0!==this.hierarchy.getMaxLevel()?this.hierarchy.getMaxLevel():this.hierarchyMaxLevel};$MA.Graph.GraphObject.prototype.getRootNode=function(){return this.hierarchy&&this.hierarchy.getRootNode()};
$MA.Graph.GraphObject.prototype.getNodeCount=function(){var a=0;void 0!==this.hierarchy&&(a=this.hierarchy.getNodeCount());this.showTotal&&!this.parentAsTotal&&(a+=1);return a};$MA.Graph.GraphObject.prototype.getStartNode=function(){return this.hierarchy&&this.hierarchy.getStartNode()};
$MA.Graph.GraphObject.prototype.setHierarchyInitLevel=function(a,b){"expand"==b&&(!0==a?this.hierarchyInitLevel=this.hierarchyMaxLevel:void 0===this.hierarchyInitLevel?this.hierarchyInitLevel=1:this.hierarchyInitLevel++);"collapse"==b&&(!0==a?this.hierarchyInitLevel=0:this.hierarchyInitLevel--)};
$MA.Graph.GraphObject.prototype.getSummariesForCategoryIndex=function(a,b){var c=this.getSeriesCount(),d=[],e,f,g,h,k,l,p,m=[];for(e=0;e<c;e++)for(f=this.getSeries(e),h=f.items.length,k=0;k<h;k++)if(g=f.items[k],p=g.category,l=p.groupValues,void 0===l&&(l=[]),p=p.value,l=this.filterEmptyString(l),""===p&&(p=l[0],l=l.slice(1)),a===p&&b.toString()===l.toString()){d.push(g.yValue);m.push(g.valueDisplayText);break}return[d,m]};$MA.Graph.GraphObject.prototype.filterEmptyString=function(a){return a.filter(function(a){return a})};
$MA.Graph.GraphObject.prototype.calcCoordinateX=function(a,b,c,d,e,f){var g;"bottom"==f&&(g=b==d?a:(e-b)*(c-a)/(d-b)+a);"top"==f&&(g=b==d?a:c-(c-a)*(d-e)/(d-b));return g};$MA.Graph.GraphObject.prototype.calcCoordinateY=function(a,b,c,d,e,f){var g;"left"==f&&(g=a==c?b:d-(d-b)*(c-e)/(c-a));"right"==f&&(g=a==c?b:(e-a)*(d-b)/(c-a)+b);return g};
$MA.Graph.GraphObject.prototype.getStartPosition=function(a,b,c){var d;"ltr"===this.dir?a={x:a,y:b,width:c}:(d=this.context&&this.context.canvas.width,a={x:d-c-a,y:b,width:c});return a};$MA.Graph.GraphObject.prototype.translateCoordinate=function(a,b){var c;c={x:a,y:b};"rtl"===this.dir&&(c=this.context&&this.context.canvas.width,c={x:c-a,y:b});return c};
$MA.Graph.GraphObject.prototype.translateEventPos=function(a){var b;"ltr"===this.dir?a={layerX:a.layerX,layerY:a.layerY}:(b=this.context.canvas.width,a={layerX:b-a.layerX,layerY:a.layerY});return a};
$MA.Graph.Hierarchy=function(){function a(a){this.getLevel=function(){return a.getLevel()};this.getValue=function(){return a.getValue()};this.getSeries=function(){return a.getSeries()};this.getValueDisplayText=function(b){return a.getValueDisplayText(b)};this.getChildren=function(){return a.getChildren()};this.isLeafNode=function(){return a.isLeafNode()};this.getChildrenCount=function(){return a.getChildrenCount()};this.getGroupValues=function(){return a.getGroupValues()};this.isDummyNode=function(){return a.isDummyNode()};
this.getStartNode=function(){return a.getStartNode()};this.getNextSibling=function(){return a.getNextSibling()};this.getParentNode=function(){return a.getParentNode()};this.getFirstChild=function(){return a.getFirstChild()}}function b(a,b,c,d,k,l){this.hierarchy=a;this.level=b;this.value=c;this.series=d;this.childStart=k;this.childEnd=l}function c(){this.tree=[];this.level=0;this.topLevel=void 0;this.maxLevel=0}function d(){if(!(this instanceof d))return new d;var b=new c;this.getRootNode=function(){var c=
b.getRootNode();return null!==c?new a(c):c};this.getRootNodeMinMax=function(){return b.getRootNodeMinMax()};this.getLevel=function(){return b.getLevel()};this.getActualLevelsCount=function(){return b.getActualLevelsCount()};this.getTopLevel=function(){return b.getTopLevel()};this.setLevel=function(a){b.setLevel(a)};this.getMaxLevel=function(){return b.getMaxLevel()};this.setMaxLevel=function(a){return b.setMaxLevel(a)};this.isRootLevel=function(){return b.isRootLevel()};this.isLeafLevel=function(){return b.isLeafLevel()};
this.collapse=function(a){return b.collapse(a)};this.expand=function(a){return b.expand(a)};this.getNodeCount=function(){return b.getNodeCount()};this.build=function(a){return b.build(a)};this.getChildrenCount=function(){return b.getChildrenCount()};this.getStartNode=function(){return b.getStartNode()};this.getFirstChild=function(){return b.getFirstChild()};this.getNexSibling=function(){return b.getNexSibling()};this.getParentAsTotalMinMax=function(a){return b.getParentAsTotalMinMax(a)}}b.prototype=
{getLevel:function(){return this.level},getValue:function(){return this.value},getSeries:function(){return this.series},getValueDisplayText:function(a){return this.valueDisplayText&&this.valueDisplayText[a]},getChildren:function(){var b=[],c=this.hierarchy.getLevel();if(this.level<c&&!this.isLeafNode())for(c=this.childStart;c<=this.childEnd;c++)b.push(new a(this.hierarchy.tree[this.level+1][c]));return b},getChildrenCount:function(){var a=0,b=this.hierarchy.getLevel(),c,d;if(this.level<b&&!this.isLeafNode()){c=
this.hierarchy.tree[this.level+1];for(d=this.childStart;d<=this.childEnd;d++)void 0!==c[d].series&&a++;if(this.level+1<b)for(d=this.childStart;d<=this.childEnd;d++)a+=c[d].getChildrenCount()}return a},isLeafNode:function(){return void 0===this.childStart&&void 0===this.childEnd},getGroupValues:function(){return this.groupValues},isDummyNode:function(){return this.dummyNode},getStartNode:function(){return this.getStartNode},getNextSibling:function(){return this.nextSibling},getParentNode:function(){return this.parentNode},
getFirstChild:function(){return this.firstChild}};c.prototype={getRootNode:function(){return this.tree[0]&&this.tree[0][0]?this.tree[0][0]:null},getRootNodeMinMax:function(){if(!this.getRootNode()||!this.getRootNode().getSeries())return null;var a=null;if(this.getRootNode().getSeries()){var a=this.getRootNode().getSeries(),b=0,c=0,d=a.length,k;for(k=0;k<d;k++)c<a[k]&&(c=a[k]),b>a[k]&&(b=a[k]);a=[b,c]}return a},getParentAsTotalMinMax:function(a){var b,c,d,k=0,l=0,p=[],m;b=this.getRootNode();d=a.getSeriesCount();
for(c=0;c<d;c++)p[c]=a.getSeries(c).sumBeforeRange;do{if(void 0!=b&&(c=b.isDummyNode(),!c))for(a=b.getSeries(),c=0;c<d;c++){m=void 0!==a[c]?a[c]:void 0;if("number"!=typeof m||"number"==typeof m&&isNaN(m))m=0;p[c]+=m;p[c]>=l&&(l=p[c]);p[c]<k&&(k=p[c])}if(b&&b.getFirstChild())b=b.getFirstChild();else if(b&&b.getNextSibling())b=b.getNextSibling();else{do b=b&&b.getParentNode();while(b&&void 0===b.getNextSibling());b=b&&b.getNextSibling()?b.getNextSibling():void 0}}while(void 0!==b);return 0===k&&0===
l?null:[k,l]},getLevel:function(){return this.level},getTopLevel:function(){return this.topLevel},getActualLevelsCount:function(){return this.level<this.actualLevels?this.level:this.actualLevels},setLevel:function(a){0<=a&&this.getMaxLevel()>=a&&(this.level=a)},getMaxLevel:function(){return this.maxLevel},setMaxLevel:function(a){this.maxLevel=a},isRootLevel:function(){return 0===this.getLevel()},isLeafLevel:function(){return this.getMaxLevel()===this.getLevel()},collapse:function(a){a?this.level=
void 0===this.topLevel?0:this.topLevel:this.level>(void 0===this.topLevel?0:this.topLevel)&&this.level--},expand:function(a){a?this.level=this.getMaxLevel():this.getMaxLevel()>this.level&&this.level++},getNodeCount:function(){var a=0,b=this.getRootNode();null!==b&&(a=b.getChildrenCount()+(b.getSeries()?1:0));return a},getStartNode:function(){return this.startNode},getFirstChild:function(){return this.firstChild},getParentNode:function(){return this.parentNode},build:function(a){var c=a.getCategoryLevelCount(),
d=[],h=0,k=[],l,p,m,n,q,s,r;this.actualLevels=0;if(0<=c){l=c+1;for(p=0;p<=l;p++)d[p]=[];l=a.categories.length;for(p=0;p<l;p++)r=a.categories[p].groupValues,void 0===r&&(r=[]),m=a.categories[p].value,r=this.filterEmptyString(r),""===m&&(m=r[0],r=r.slice(1)),k=a.getSummariesForCategoryIndex(m,r),q=k[0],n=k[1],k=r.length+1,q=new b(this,k,m,q),q.groupValues=r,q.index=h++,q.valueDisplayText=n,q.dummyNode=!1,0===p&&(this.startNode=q),d[k].push(q);for(p=0;p<=c;p++){k=c-p;s=d[k+1];l=s.length;0<l&&this.actualLevels++;
var u,v,w=[];for(n=h=0;h<l;h++)if(r=s[h].groupValues,v=s[h].index,void 0!==s[h+1]&&(w=s[h+1].groupValues),void 0===s[h+1]||r.toString()!==w.toString()){q=[];for(m=n;m<=h;m++)void 0!==s[m].getSeries()&&q.push(s[m].getSeries());s[h].nextSibling=void 0;m=q;q=m.length;u=[];var x=void 0,A=void 0,y=x=void 0;if(0<q)for(x=m[0],y=x.length,x=0;x<y;x++)for(A=0;A<q;A++)u[x]=0===A?m[0][x]:u[x]+m[A][x];q=u;m=s[h].groupValues[0];u=this.lookUpParentNode(d[k],m,r.slice(1));if(void 0!==u)u.childStart=n,u.childEnd=
h,u.dummyNode=!1,s[h].parentNode=u,u.firstChild=s[n];else{q=new b(this,k,m,q,n,h);q.groupValues=r.slice(1);q.index=v;!1===a.suppliedTotals?q.dummyNode=!1:(q.dummyNode=!0,q.value=m,q.series=void 0);if(0===d[k].length)d[k].push(q);else for(m=d[k].length,r=0;r<m;r++){if(d[k][r].index>=v){d[k].splice(r,0,q);break}r===m-1&&d[k].push(q)}s[h].parentNode=q;q.firstChild=s[n]}n=h+1}else s[h].nextSibling=s[h+1]}}this.topLevel=!0===a.suppliedTotals?1:0;this.tree=d},lookUpParentNode:function(a,b,c){var d,k;for(k=
0;k<a.length;k++)if(a[k].value===b&&a[k].groupValues.toString()===c.toString()){d=a[k];break}return d},filterEmptyString:function(a){return a.filter(function(a){return a})}};return d}();
$MA.Graph.BubbleGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.isDataScattered=!1;this.pinchScale=1;this.xOverflow=!1;this.colorDataList=new $MA.Hash;this.selectedBubbleObject=void 0;this.shapeDataList=new $MA.Hash;this.selectedValue=this.selectedBubbleObject=void 0;this.bubbleMinSize=5;this.symbolPalette=[];this.monoSymbol=!1};$MA.Graph.BubbleGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.BubbleGraphObject.prototype.getColorDataList=function(){return this.colorDataList};
$MA.Graph.BubbleGraphObject.prototype.getShape=function(a){var b="circle";a<this.drawObjects.length&&(b=this.drawObjects[a].shape.toLowerCase());return b};$MA.Graph.BubbleGraphObject.prototype.pointInCircle=function(a,b,c,d,e){return(a-d)*(a-d)+(b-e)*(b-e)<=(c+2)*(c+2)};$MA.Graph.BubbleGraphObject.prototype.pointInRect=function(a,b,c,d,e,f){return a-c<=e&&e<=a+c&&b-d<=f&&f<=b+d};
$MA.Graph.BubbleGraphObject.prototype.getUpdatedX=function(a){var b=this.getSeriesCount(),c=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),f=e+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)-1,g,h,k,l,p,m;for(g=0;g<b;g++)for(k=this.getSeries(g),p=k.items.length,h=0;h<p;h++)if(l=h,m=k.getItemY(h),this.valuesAxis.getValueLoc(f,e,m),m=k.getItemX(h),m=this.categoryAxis.getValueLoc(c,d,m),
l=k.items[l].category.value,l==a)return m;return this.drawObjects[0].x};
$MA.Graph.BubbleGraphObject.prototype.getNearestCategoryLoc=function(a,b){var c=9999,d=this.getSeriesCount(),e=[],f=99999,g=0,h=0,k=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),l=k+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),p=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),m=p+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)-1,n,q,s,r,u,v,w;for(n=0;n<d;n++){s=this.getSeries(n);u=s.items.length;f=99999;for(q=g=0;q<u;q++){v=q;r=s.getItemY(q);w=this.valuesAxis.getValueLoc(m,p,r);
r=s.getItemX(q);r=this.categoryAxis.getValueLoc(k,l,r);w=this.translateCoordinate(r,w);r=this.drawObjects[q];var x=this.pointInCircle(r.x,r.y,r.radius,a,b);if(s.items[v].otherValues)for(r=0;r<s.items[v].otherValues.length;r++);r=Math.abs(w.x-a);1==d&&x&&this.isDataScattered?(f=r,g=v,h=w.x,0<=g&&g<this.drawObjects.length&&(this.selectedBubbleObject=this.drawObjects[g]),e.push({Series:s,ItemNumber:g,LocX:h,SeriesMin:f,Category:s.items[g].category.value,SeriesNo:n})):r<f&&(f=r,g=v,h=w.x)}(1<d||0==e.length)&&
e.push({Series:s,ItemNumber:g,LocX:h,SeriesMin:f,Category:s.items[g].category.value,SeriesNo:n});f<c&&(c=f)}d=[];for(r=0;r<e.length;++r)(0.01>Math.abs(c-e[r].SeriesMin)||this.isDataScattered)&&d.push({Series:e[r].Series,ItemNumber:e[r].ItemNumber,LocX:e[r].LocX,Category:s.items[e[r].ItemNumber].category.value,SeriesNo:e[r].SeriesNo});this.isDataScattered&&void 0==this.selectedBubbleObject&&(this.selectedBubbleObject=this.drawObjects[[e[0].ItemNumber]]);return this.selectedValue=d};
$MA.Graph.BubbleGraphObject.prototype.constructColorDataList=function(){var a=[],b,c,d,e;for(b=this.getSeriesCount()-1;0<=b;b--)for(d=this.getSeries(b),e=d.items.length,c=0;c<e;c++){var f=d.getItemColorData(c,"color");null!=f&&""!=f&&a.push(f)}b=a.length;for(c=d=0;c<b;c++)if(e=a[c],!this.colorDataList.containsKey(e)){f=d;if("null"==e||""==e)f=0;this.colorDataList.set(e,f);d++}};
$MA.Graph.BubbleGraphObject.prototype.constructShapeDataList=function(){var a=[],b,c,d,e,f;for(b=this.getSeriesCount()-1;0<=b;b--)for(e=this.getSeries(b),f=e.items.length,c=0;c<f;c++)d=e.getItemColorData(c,"shape"),null!=d&&a.push(d);b=a.length;for(c=d=0;c<b;c++)if(e=a[c],!this.shapeDataList.containsKey(e)){f=d;if("null"==e||""==e||0==e)f=0;this.shapeDataList.set(e,f);d++}};
$MA.Graph.BubbleGraphObject.prototype.plotDefault=function(){var a,b,c,d,e,f,g,h,k=0,l=0,p,m,n;this.constructColorDataList();this.constructShapeDataList();e=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA);f=e+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);h=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA);g=h+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)-1;var q=this.getMaxBubbleSize(),s=this.getMaxBubbleHeight(),r=0;this.isDataScattered||(r=this.calcBarEntryWidth(f-e),e+=this.calcBubbleStartPos(f-
e));p=this.getSeriesCount();var u,v=0,w,x;for(w=0;w<p;w++){a=this.getSeries(w);d=a.items.length;k=e;for(x=0;x<d;x++){m=x;c=a.getItemY(x);l=this.valuesAxis.getValueLoc(g,h,c);b=a.getItemX(x);var A;this.isDataScattered&&(k=this.categoryAxis.getValueLoc(e,f,b));if(!1==a.isEnabled()||this.valuesAxis.outOfBound(c))b=0;else{var y;if(void 0!=a.items[m].otherValues)for(b=0;b<a.items[m].otherValues.length;b++)c=a.items[m].otherValues[b],c.width?A=y=c.width:c.hasOwnProperty("height")&&(A=null==c.height&&"object"==
typeof c.height?void 0:c.height);else A=y=a.items[m].yValue;b=Math.abs(Math.round(y/q*this.paintSize/10)*this.pinchScale);u=this._parent.getDrawArea();c=0.7*u.width/2;u=0.7*u.height/2;(b<this.bubbleMinSize||void 0==y)&&null!=a.items[m].yValue&&(b=this.bubbleMinSize,b*=this.pinchScale);if(0<s)n=Math.abs(Math.round(A/s*this.paintSize/10)*this.pinchScale);else if(0==s||void 0==s)n=b;if(void 0==n&&void 0==s||(4>n||void 0==y)&&null!=a.items[m].yValue)n=this.bubbleMinSize,n*=this.pinchScale;c>u?b>u&&(b=
u):u>c&&b>c&&(b=c)}c=a.drawContext;void 0!=this.borderColor&&(c.strokeBrush=this.borderColor);var C;this.isDataScattered?(C=a.items[m].originalIndex,void 0==C&&(C=x),u=C):(u=this.getRealIndex(w,x,p),C=x);0<this.colorDataList.length&&(c=this.colorDataList.get(a.getItemColorData(C,"color")),void 0==c&&(c=0),c=this.getDrawContext(c));this.isCustomDataPointsColor&&(u>=this.dataPointsColorMinIndex&&u<=this.dataPointsColorMaxIndex)&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+u)&&(c=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+
u).toString()),null===c&&(c=a.drawContext));u=this.shapeDataList.get(a.getItemColorData(C,"shape"));u=this.monoSymbol&&0<this.symbolPalette.length?this.symbolPalette[0]:!this.monoSymbol&&0<this.symbolPalette.length?this.symbolPalette[u%this.symbolPalette.length].toLowerCase():"circle";if(void 0==u||null==u)u="circle";"star"==u&&8>b&&(b=n=8);this.isDataScattered&&(m=a.items[m],!0==this.categoryAxis.customMinValue&&m.category.value<this.categoryAxis.minValue&&(b=void 0),!0==this.categoryAxis.customMaxValue&&
m.category.value>this.categoryAxis.maxValue&&(b=void 0),!0==this.valuesAxis.customMinValue&&m.yValue<this.valuesAxis.minValue&&(b=void 0),!0==this.valuesAxis.customMaxValue&&m.yValue>this.valuesAxis.maxValue&&(b=void 0));l=this.translateCoordinate(k,l);this.drawObjects.push(new $MA.Graph.Bubble2D(this,c,a.items[x],l.x,l.y,b,u,n));this.isDataScattered||(k+=r)}v++}};
$MA.Graph.BubbleGraphObject.prototype.getRealIndex=function(a,b,c){var d=this.firstItem,e,f,g;for(e=0;e<=b;e++)for(f=0;f<c;f++)if(g=this.getSeries(f),g=g.items[e].yValue,null!=g&&d++,e==b&&f==a){if(void 0==g||null==g||isNaN(g))d=-1;break}return d};
$MA.Graph.BubbleGraphObject.prototype.scale=function(){var a,b;a=this.getMinItemValue();b=this.getMaxItemValue();this.valuesAxis.setScale(a,b);this.isDataScattered?(this.categoryAxis.dataType=$MA.Graph.DataType.DOUBLE,a=this.getMinXValue(),b=this.getMaxXValue(),this.categoryAxis.setScale(a,b)):this.categoryAxis.setScale(1,this.categories.length)};
$MA.Graph.BubbleGraphObject.prototype.arrange=function(){$MA.Graph.GraphObject.prototype.arrange.call(this);if(!this.isDataScattered){this.xOverflow=!1;var a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),a=this.calcBubbleStartPos(a);this.paintSize/10>a&&(this.xOverflow=!0)}};$MA.Graph.BubbleGraphObject.prototype.setPinchScale=function(a){this.pinchScale=1/a};
$MA.Graph.BubbleGraphObject.prototype.getTrueMaxXValue=function(){var a,b,c,d,e=null,f=this.categoryAxis.maxValue-this.categoryAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,k;for(h=0;h<c;h++)for(a=this.getSeries(h),b=a.items.length,k=0;k<b;k++)d=a.items[k].getBubbleValue(),d/=g,d=a.items[k].category.value+0.1*f*d,null==e?e=d:d>e&&(e=d);return e};
$MA.Graph.BubbleGraphObject.prototype.getTrueMinXValue=function(){var a,b,c,d,e=null,f=this.categoryAxis.maxValue-this.categoryAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,k;for(h=0;h<c;h++)for(a=this.getSeries(h),b=a.items.length,k=0;k<b;k++)d=a.items[k].getBubbleValue(),d/=g,d=a.items[k].category.value-0.1*f*d,null==e?e=d:d<e&&(e=d);return e};
$MA.Graph.BubbleGraphObject.prototype.getTrueMaxYValue=function(){var a,b,c,d,e=null,f=this.valuesAxis.maxValue-this.valuesAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,k;for(h=0;h<c;h++)for(a=this.getSeries(h),b=a.items.length,k=0;k<b;k++)d=a.items[k].getBubbleValue(),d/=g,d=a.items[k].yValue+0.1*f*d,null==e?e=d:d>e&&(e=d);return e};
$MA.Graph.BubbleGraphObject.prototype.getTrueMinYValue=function(){var a,b,c,d,e=null,f=this.valuesAxis.maxValue-this.valuesAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,k;for(h=0;h<c;h++)for(a=this.getSeries(h),b=a.items.length,k=0;k<b;k++)d=a.items[k].getBubbleValue(),d/=g,d=a.items[k].yValue-0.1*f*d,null==e?e=d:d<e&&(e=d);return e};
$MA.Graph.BubbleGraphObject.prototype.getMinXValue=function(){var a,b=null,c,d=this.getSeriesCount();for(c=0;c<d;c++)a=this.getSeries(c),a=a.getMinXValue(),null!=a&&(null==b?b=a:a<b&&(b=a));return b};$MA.Graph.BubbleGraphObject.prototype.getMaxXValue=function(){var a,b=null,c,d=this.getSeriesCount();for(c=0;c<d;c++)a=this.getSeries(c),a=a.getMaxXValue(),null!=a&&(null==b?b=a:a>b&&(b=a));return b};
$MA.Graph.BubbleGraphObject.prototype.calcBarEntryWidth=function(a){if(this.isDataScattered)a=$MA.Graph.GraphObject.prototype.calcBarEntryWidth.call(this,a);else{if(!this.xOverflow)return $MA.Graph.GraphObject.prototype.calcBarEntryWidth.call(this,a);var b=this.paintSize/10,c=this.getMaxItemCount();a=1<c?(a-2*b)/(c-1):$MA.Graph.GraphObject.prototype.calcBarEntryWidth.call(this,a)}return a};
$MA.Graph.BubbleGraphObject.prototype.calcBubbleStartPos=function(a){this.xOverflow||(this.calcBarEntryWidth(a),this.calcBarGap(a));1<this.getMaxItemCount()?(a=this.paintSize/10,this.categoryAxis.catStartPos&&a<this.categoryAxis.catStartPos&&(a=this.categoryAxis.catStartPos)):a=(this.calcBarEntryWidth(a)+this.calcBarGap(a))/2;return a};$MA.Graph.BubbleGraphObject.prototype.resetDrawObj=function(a){a.incr=a.radius/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.radius=0};
$MA.Graph.BubbleGraphObject.prototype.animateDrawObj=function(a){a.radius+=a.incr;a.plotPrimitives()};$MA.Graph.BubbleGraphObject.prototype.getMaxBubbleHeight=function(){var a,b,c=this.getSeriesCount(),d;for(d=0;d<c;d++)a=this.getSeries(d),!1!=a.isEnabled()&&(a=a.getMaxBubbleHeight(),void 0==b?b=a:a>b&&(b=a));return isNaN(b)?void 0:b};
$MA.Graph.BubbleGraphObject.prototype.getMaxBubbleSize=function(){var a,b,c=this.getSeriesCount(),d;for(d=0;d<c;d++)a=this.getSeries(d),!1!=a.isEnabled()&&(a=a.getMaxBubbleSize(),void 0==b?b=a:a>b&&(b=a));return b};
$MA.Graph.BubbleGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c;if(this.isDataScattered)c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+b)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+b).toString()):void 0;else{var d=0>b?0:b,e=this.getSeriesCount(),f;if(!0==this.isCustomDataPointsColor){c=-1+this.firstItem;var g,h;for(g=0;g<=d;g++)for(h=0;h<e;h++)if(f=this.getSeries(h),f=f.items[g].yValue,null!=f&&c++,g==d&&h==a){if(void 0==f||null==f||isNaN(f))c=
-1;break}c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+c)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+c).toString()):void 0}}return c};$MA.Graph.ColumnGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.modernLook=!0;this.startLegend=0;this.accumulatedValues=[];this.level=0;this.itemIncr=1;this.showWFConnectingLine=!0;this.lineDef=new $MA.Graph.LineDefinition};$MA.Graph.ColumnGraphObject.prototype=new $MA.Graph.GraphObject;
$MA.Graph.ColumnGraphObject.prototype.getCategoryNodes=function(a){var b=this.getSeriesCount(),c=[],d,e,f,g,h,k,l,p;a*=b;a>=this.drawObjects.length&&(a=this.drawObjects.length-1);if(0<=a&&this.drawObjects.length>a)for(f=0;f<b;f++){e=this.getSeries(f).isEnabled();d=[];g=this.drawObjects[a+f];h={value:g.item.yValue,x:g.x,y:g.y,width:g.width,height:g.height};d.push(h);k=g.item.otherValues;if(e&&k)for(f=0,e=k.length;f<e;f++)h=k[f],null!=h&&void 0!=h?(l=this.getValueLoc(h),p=this.dataArea.origin-l):(l=
h,p=void 0),h={value:h,x:g.x,y:l,width:g.width,height:p},d.push(h);c.push(d)}return c};$MA.Graph.ColumnGraphObject.prototype.getMaxItemCount=function(){return this.isHierarchy?this.getNodeCount():$MA.Graph.GraphObject.prototype.getMaxItemCount.apply(this)};
$MA.Graph.ColumnGraphObject.prototype.plotDefault=function(){var a,b,c=this.getMaxItemCount();if(0<c){var d=this.getSeriesCount();if(0<d){var e=Math.round(this.calcBarWidth(this.dataArea.width)),f=Math.round(0.03*e*Math.sqrt(d)),g;g=1===d?e:Math.round(e*(1-(this.is3DObjects?0:this.overlap))+f/(d-1));var f=1==d?e:e-f,h=this.calcBarEntryWidth(this.dataArea.width),k=this.dataArea.left+this.calcBarGap(this.dataArea.width);this.baseStartX=k+e*(this.totalBarEntries?this.totalBarEntries-1:d)/2;this.baseIncrX=
h;if(this.isHierarchy)if(this.level=0,this.isWaterfall){for(a=0;a<d;a++)this.accumulatedValues[a]=this.getSeries(a).sumBeforeRange;this.parentAsTotal&&this.showTotal?this.plotHierarchyWFChildrenFirst(f,g,e,h,[k]):this.plotHierarchyWF(f,g,e,h,[k])}else this.plotHierarchyNode(f,g,e,h,[k]);else{var l;l=-1+this.firstItem;var p;if(this.isWaterfall)for(p=[],a=0;a<d;a++)p.push(this.getSeries(a).sumBeforeRange);var m,n,q;a=0;var s,r,u;"graph"===this.drawingContentType&&(m=this.categoryAxis.primaryLine,m&&
m.width||(m=this.valuesAxis.primaryLine),m&&m.width&&(a=m.width/2));for(m=0;m<c;m++){var v;v=k+h*m;u=!0;for(n=0;n<d;n++){var w=null,x=null;s=this.getSeries(n);var A=s.isEnabled(),y,C=s.drawContext;y=s.items[m];m>=s.items.length?(this.isWaterfall&&this.showTotal&&m==s.items.length?y={}:(y={y:0},A=!1),q=this.dataArea.origin):q=this.getValueLoc(y.yValue);if(this.isWaterfall){if(this.showTotal&&m==c-1)y.yValue=p[n],b=y.yValue,this.valuesAxis.percentage&&(b*=100),b=void 0!==this.totalFormat?$MA.convertor.format(b,
this.totalFormat):$MA.format(b,this.valuesAxis.displayDef.format,s.locale),y.category={value:$MA.getLocalisation(null,"Total","Total"),displayValue:$MA.getLocalisation(null,"Total","Total")},this.valuesAxis.percentage&&(b+="%"),y.valueDisplayText=b,q=this.getValueLoc(y.yValue),b=0<=y.yValue?q:this.dataArea.origin,q=Math.abs(this.dataArea.origin-q);else{var B=y.yValue;if("number"!=typeof B||"number"==typeof B&&isNaN(B))B=0;b=this.getValueLoc(0<B?p[n]+B:p[n]);q=Math.abs(this.getValueLoc(p[n]+B)-this.getValueLoc(p[n]));
p[n]+=B}A?0!=y.yValue&&(null!=y.yValue&&void 0!=y.yValue&&2>=q)&&(w=b,x=q,0<y.yValue&&(b-=2-q),q=2):q=0}else this.dataArea.origin>q?!1==A?(b=this.dataArea.bottom,q=0):(b=q,q=this.dataArea.origin-q):(b=this.dataArea.origin,q=!1==A?0:q-b),A&&(y.yValue>=this.valuesAxis.minValue&&0!=y.yValue&&null!=y.yValue&&void 0!=y.yValue&&2>=q)&&(q=2,b=0<y.yValue?this.dataArea.origin-2:this.dataArea.origin+2);"graph"===this.drawingContentType&&(A=this.dataArea.bottom-a,b>A?(b-=a,w=null===w?null:w-a):b+q>A&&(q-=a));
this.isWaterfall&&(0<p[n]&&b+q>=this.dataArea.bottom)&&(b-=2);null!=y.yValue&&(l=-1===l?0:l+this.itemIncr);(!this.showTotal||this.showTotal&&m<c-1)&&(this.isCustomDataPointsColor&&(l>=this.dataPointsColorMinIndex&&l<=this.dataPointsColorMaxIndex)&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+l))&&(C=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+l).toString()),null===C&&(C=s.drawContext));s=this.getStartPosition(v,void 0,f);this.drawObjects.push(new $MA.Graph.Bar2D(this,
C,y,s.x,b,f,q,this.is3DObjects,e,0>y.yValue));!this.isWaterfall||(!this.showWFConnectingLine||this.showTotal&&m==c-1||0===y.yValue||void 0===y.yValue||1!==d)||(s={x:v+e,y:0>y.yValue?b+q:b},u&&(void 0!==r&&(0<y.yValue&&(b=s.y+q),C.strokeBrush=new $MA.Brush($MA.Brushes.gray.color),r=this.translateCoordinate(r.x,r.y),b=this.translateCoordinate(s.x-e,b),this.WFConnLineObjects.push(new $MA.Graph.DashedLine2D(this,C,void 0,r.x,r.y,b.x,b.y,this.lineDef))),s.y=null!==w?0>y.yValue?w+x:w:s.y,u=!1),r=s);v+=
g}}}}}};
$MA.Graph.ColumnGraphObject.prototype.plotStacked=function(){var a=this.getMaxItemCount();if(0!=a){var b=this.getSeriesCount(),c=this.calcBarWidth(this.dataArea.width),d=this.calcBarGap(this.dataArea.width),e=this.dataArea.left+d,d=this.calcBarEntryWidth(this.dataArea.width);this.baseStartX=e+c/2;this.baseIncrX=d;var f,g,h,k,l,p,m;f=e;var n;this.isHundredPercent&&(n=this.getItemSumPerCategory());if(this.isHierarchy)this.level=0,this.plotStackedHierarchyNode(c,d,[e]);else{var q;q=-1+this.firstItem;var s,
r;for(s=0;s<a;s++){h=e=0;p=l=this.dataArea.origin;for(r=0;r<b;r++){m=this.getSeries(r);g=m.isEnabled();var u=m.drawContext,v=m.items[s];this.isHundredPercent?(k=m.getItemYDouble(s),k/=n[s],!1==g&&(k=0)):(k=m.getItemYDouble(s),!1==m.isEnabled()&&(k=0));null!=v.yValue&&(q=-1===q?0:q+this.itemIncr);this.isCustomDataPointsColor&&(q>=this.dataPointsColorMinIndex&&q<=this.dataPointsColorMaxIndex)&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+q)&&(u=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+
q).toString()),null===u&&(u=m.drawContext));v=this.getStartPosition(f,void 0,c);0>k?(g=this.getValueLoc(k+h),this.drawObjects.push(new $MA.Graph.Bar2D(this,u,m.items[s],v.x,p,c,g-p,this.is3DObjects,c)),h+=k,p=g):(g=this.getValueLoc(k+e),this.drawObjects.push(new $MA.Graph.Bar2D(this,u,m.items[s],v.x,g,c,l-g,this.is3DObjects,c)),e+=k,l=g)}f+=d}}}};
$MA.Graph.ColumnGraphObject.prototype.plotHierarchyNode=function(a,b,c,d,e,f){var g=!1;void 0===f&&(f=this.getRootNode(),g=!0);var h=this.getSeriesCount();if(null!==f){var k=f.getSeries(),l=this.suppliedTotals&&void 0===k,p=f.getChildren(),m=p.length,n,q,s,r,u,v,w,x;if(this.childrenFirst)for(n=0;n<m;n++)this.plotHierarchyNode(a,b,c,d,e,p[n]),l||(e[0]+=d);if(!l){var A=e[0];this.suppliedTotals&&0==c&&($MA.log.warning("Insufficient width to plot columns for all data."),c=a=b=h=1);for(n=0;n<h;n++){q=
this.getSeries(n);s=q.isEnabled();r=void 0!==k[n]?k[n]:void 0;v=f.getLevel();v>this.level&&(this.level=v);this.isWaterfall&&g&&(r+=this.getSeries(n).sumBeforeRange);v=this.getValueLoc(r);u=g?$MA.getLocalisation(null,"Total","Total"):f.getValue();w=f.getGroupValues();x=w.slice(0);x=0===x.length?u:"rootToLeaf"===this.categoriesDisplayOrder?x.reverse().join(", ")+", "+u:u+", "+x.join(", ");u={yValue:r,value:u,displayValue:u,groupValues:w,valueDisplayText:f.getValueDisplayText(n),category:{value:x},parentSeries:{name:q.name}};
if(!this.isWaterfall||g)this.dataArea.origin>v?s?(w=v,s=this.dataArea.origin-v):(w=this.dataArea.bottom,s=0):(w=this.dataArea.origin,s=s?v-w:0);else{if("number"!=typeof r||"number"==typeof r&&isNaN(r))$MA.log.warning("Value "+String(r)+" is not a valid number."),r=0;w=this.getValueLoc(0<r?this.accumulatedValues[n]+r:this.accumulatedValues[n]);s=s?Math.abs(this.getValueLoc(this.accumulatedValues[n]+r)-this.getValueLoc(this.accumulatedValues[n])):0;0===m?this.accumulatedValues[n]+=r:this.childrenFirst&&
(s=this.accumulatedValues[n]-r,w=this.getValueLoc(0<r?s+r:s),s=Math.abs(this.getValueLoc(s+r)-this.getValueLoc(s)))}this.suppliedTotals&&(0<s&&1>s)&&(s=1);this.drawObjects.push(new $MA.Graph.Bar2D(this,q.drawContext,u,A,w,a,s,!1,c,0>r));A+=b}}if(!this.childrenFirst)for(l||(e[0]+=d),n=0;n<m;n++)this.plotHierarchyNode(a,b,c,d,e,p[n])}};
$MA.Graph.ColumnGraphObject.prototype.plotStackedHierarchyNode=function(a,b,c,d){void 0==this.hierarchyObjects&&(this.hierarchyObjects=[]);var e=!1;void 0===d&&(d=this.getRootNode(),e=!0);var f=this.getSeriesCount();if(null!==d){var g=0,h=d.getSeries(),k=this.suppliedTotals&&void 0===h,l=d.getChildren(),p=l.length,m,n,q,s,r,u,v;if(this.childrenFirst)for(m=0;m<p;m++)this.plotStackedHierarchyNode(a,b,c,l[m]),k||(c[0]+=b);if(!k){var w=c[0];this.isHundredPercent&&(g=this.getTotalSumPerCategory(h));var x=
0,A=0,y=this.dataArea.origin,C=this.dataArea.origin,B;for(m=0;m<f;m++)n=this.getSeries(m),B=n.drawContext,q=n.isEnabled(),s=void 0!==h[m]?h[m]:void 0,r=d.getLevel(),r>this.level&&(this.level=r),e&&(s+=this.getSeries(m).sumBeforeRange),this.isHundredPercent&&(s/=g,!1==q&&(s=0)),r=e?$MA.getLocalisation(null,"Total","Total"):d.getValue(),u=d.getGroupValues(),v=u.slice(0),v=0===v.length?r:"rootToLeaf"===this.categoriesDisplayOrder?v.reverse().join(", ")+", "+r:r+", "+v.join(", "),n={yValue:s,value:r,
displayValue:r,groupValues:u,valueDisplayText:d.getValueDisplayText(m),category:{value:v},parentSeries:{name:n.name}},!1==q&&(s=0),0>s?(q=this.getValueLoc(s+A),this.drawObjects.push(new $MA.Graph.Bar2D(this,B,n,w,C,a,q-C,this.is3DObjects,a)),A+=s,C=q):(q=this.getValueLoc(s+x),this.drawObjects.push(new $MA.Graph.Bar2D(this,B,n,w,q,a,y-q,this.is3DObjects,a)),x+=s,y=q)}if(!this.childrenFirst)for(k||(c[0]+=b),m=0;m<p;m++)this.plotStackedHierarchyNode(a,b,c,l[m])}};
$MA.Graph.ColumnGraphObject.prototype.getTotalSumPerCategory=function(a){var b,c=0,d;for(b=0;b<a.length;b++)d=this.getSeries(b),!0==d.isEnabled()&&(c+=a[b]);return c};$MA.Graph.ColumnGraphObject.prototype.resetDrawObj=function(a){a.incr=a.height/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.y+=a.height;a.height=0};$MA.Graph.ColumnGraphObject.prototype.animateDrawObj=function(a){a.y-=a.incr;a.height+=a.incr;a.plotPrimitives()};
$MA.Graph.ColumnGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c,d=0>b?0:b,e=this.getSeriesCount(),f,g=this.showTotal||this.isWaterfall&&this.isHierarchy;if(!0==this.isCustomDataPointsColor){c=-1+this.firstItem;var h,k;for(h=0;h<=d;h++)for(k=0;k<e;k++)if(f=this.getSeries(k),g&&d===f.items.length&&h==d){if(c++,k==a)break}else if(f=f.items[h].yValue,null!=f&&c++,h==d&&k==a){if(void 0==f||null==f||isNaN(f))c=-1;break}c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+c)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+
c).toString()):void 0}return c};
$MA.Graph.ColumnGraphObject.prototype.plotHierarchyWF=function(){var a=this.getSeriesCount(),b=this.calcBarWidth(this.dataArea.width),c=0.03*b*Math.sqrt(a),d;d=1===a?b:b*(1-(this.is3DObjects?0:this.overlap))+c/(a-1);var e=this.getSeriesCount(),f,g=this.hierarchy.getTopLevel(),h=this.hierarchy.getLevel(),k=this.dataArea.left+this.calcBarGap(this.dataArea.width),c=1==a?b:b-c,l=!0,p,m,n,q,s,r,u,v=this.getRootNode();this.hierarchy.getMaxLevel();for(m=0;m<a;m++)this.accumulatedValues[m]=this.getSeries(m).sumBeforeRange;
var w,x,A,a=k,y=0;do{if(void 0!==v&&(m=v.isDummyNode(),!m)){p=v.getSeries();0<b&&1>=b&&($MA.log.warning("Insufficient width to plot columns for all data."),b=c=d=e=1);A=!0;for(m=0;m<e;m++){k=this.getSeries(m);n=k.isEnabled();q=void 0!==p[m]?p[m]:void 0;f=v.getLevel();l=f===g?!0:!1;r=this.getValueLoc(q);s=v.getValue();void 0===s&&l&&(s="Total");u=v.getGroupValues();w=u.slice(0);w=0===w.length?s:"rootToLeaf"===this.categoriesDisplayOrder?w.reverse().join(", ")+", "+s:s+", "+w.join(", ");s={yValue:q,
value:s,displayValue:s,groupValues:u,valueDisplayText:v.getValueDisplayText(m),category:{value:w},parentSeries:{name:k.name}};y++;if("number"!=typeof q||"number"==typeof q&&isNaN(q))$MA.log.warning("Value "+String(q)+" is not a valid number."),q=0;l?(0===this.accumulatedValues[m]?this.dataArea.origin>r?n?(l=r,n=this.dataArea.origin-r):(l=this.dataArea.bottom,n=0):(l=this.dataArea.origin,n=n?r-l:0):(l=this.getValueLoc(0<q?this.accumulatedValues[m]+q:this.accumulatedValues[m]),n=n?Math.abs(this.getValueLoc(this.accumulatedValues[m]+
q)-this.getValueLoc(this.accumulatedValues[m])):0),this.accumulatedValues[m]+=q):(l=this.getValueLoc(0<q?this.accumulatedValues[m]+q:this.accumulatedValues[m]),n=n?Math.abs(this.getValueLoc(this.accumulatedValues[m]+q)-this.getValueLoc(this.accumulatedValues[m])):0,f<=h&&(this.accumulatedValues[m]+=q));0<n&&1>n&&(n=1);f<=h&&(this.drawObjects.push(new $MA.Graph.Bar2D(this,k.drawContext,s,a,l,c,n,!1,b,0>q)),this.isWaterfall&&(this.showWFConnectingLine&&0!==q&&void 0!==q&&1===e)&&(q={x:a+d,y:0>q?l+n:
l},A&&(void 0!==x&&(0<s.yValue&&(l=q.y+n),k.drawContext.strokeBrush=new $MA.Brush($MA.Brushes.gray.color),this.WFConnLineObjects.push(new $MA.Graph.DashedLine2D(this,k.drawContext,void 0,x.x,x.y,q.x-d,l,this.lineDef))),A=!1),x=q),a+=b)}f<=h&&(a+=b,f>this.level&&(this.level=f))}if(v.getFirstChild())v=v.getFirstChild();else if(v.getNextSibling())v=v.getNextSibling();else{do v=v.getParentNode();while(v&&void 0===v.getNextSibling());v=v&&v.getNextSibling()?v.getNextSibling():void 0}}while(void 0!==v);
if(this.showTotal&&!this.parentAsTotal)for(e=p.length,0<b&&1>=b&&($MA.log.warning("Insufficient width to plot columns for all data."),b=c=e=1),m=0;m<e;m++)k=this.getSeries(m),n=k.isEnabled(),q=this.accumulatedValues[m],r=Math.abs(this.getValueLoc(q)),s=$MA.getLocalisation(null,"Total","Total"),u=[],d=v&&void 0!==v.getValueDisplayText(m)?v.getValueDisplayText(m):q,d=$MA.convertor.format(d,this.totalFormat),s={yValue:q,value:s,displayValue:s,groupValues:u,valueDisplayText:d,category:{value:s},parentSeries:{name:k.name}},
this.dataArea.origin>r?n?(l=r,n=this.dataArea.origin-r):(l=this.dataArea.bottom,n=0):(l=this.dataArea.origin,n=n?r-l:0),0<n&&1>n&&(n=1),this.drawObjects.push(new $MA.Graph.Bar2D(this,k.drawContext,s,a,l,c,n,!1,b,0>q)),a+=b};
$MA.Graph.ColumnGraphObject.prototype.plotHierarchyWFChildrenFirst=function(a,b,c,d,e,f){void 0===f&&(f=this.getStartNode());var g=!1,h,k,l,p,m,n,q,s,r;e=e[0];l=this.getSeriesCount();p=this.hierarchy.getMaxLevel();var u;d=this.hierarchy.getTopLevel();var v=this.hierarchy.getLevel(),w;if(this.showTotal)for(k=0;k<l;k++)this.accumulatedValues[k]=this.getSeries(k).sumBeforeRange;else for(h=0;h<=p;h++)for(this.accumulatedValues[h]=[],k=0;k<l;k++)this.accumulatedValues[h][k]=this.getSeries(k).sumBeforeRange;
for(;void 0!=f.getFirstChild();)f=f.getFirstChild();do{k=f.isDummyNode();if(!k){h=f.getSeries();l=h.length;0<c&&1>=c&&($MA.log.warning("Insufficient width to plot columns for all data."),c=a=b=l=1);for(k=0;k<l;k++){p=this.getSeries(k);m=p.isEnabled();n=h[k];u=f.getLevel();g=u===d?!0:!1;u>this.level&&(this.level=u);g&&(n+=this.getSeries(k).sumBeforeRange);s=this.getValueLoc(n);q=f.getValue();void 0===q&&g&&(q=$MA.getLocalisation(null,"Total","Total"));r=f.getGroupValues();w=r.slice(0);w=0===w.length?
q:"rootToLeaf"===this.categoriesDisplayOrder?w.reverse().join(", ")+", "+q:q+", "+w.join(", ");q={yValue:n,value:q,displayValue:q,groupValues:r,category:{value:w},parentSeries:{name:p.name}};if(g)this.dataArea.origin>s?m?(g=s,m=this.dataArea.origin-s):(g=this.dataArea.bottom,m=0):(g=this.dataArea.origin,m=m?s-g:0);else{if("number"!=typeof n||"number"==typeof n&&isNaN(n))$MA.log.warning("Value "+String(n)+" is not a valid number."),n=0;this.showTotal?(g=this.getValueLoc(0<n?this.accumulatedValues[k]+
n:this.accumulatedValues[k]),m=m?Math.abs(this.getValueLoc(this.accumulatedValues[k]+n)-this.getValueLoc(this.accumulatedValues[k])):0,u<=v&&(this.accumulatedValues[k]+=n)):(g=this.getValueLoc(0<n?this.accumulatedValues[u][k]+n:this.accumulatedValues[u][k]),m=m?Math.abs(this.getValueLoc(this.accumulatedValues[u][k]+n)-this.getValueLoc(this.accumulatedValues[u][k])):0,u<=v&&(this.accumulatedValues[u][k]+=n))}0<m&&1>m&&(m=1);u<=v&&(this.drawObjects.push(new $MA.Graph.Bar2D(this,p.drawContext,q,e,g,
a,m,!1,c,0>n)),e+=b)}u<=v&&(e+=a)}if(f.getNextSibling())for(f=f.getNextSibling();void 0!=f.getFirstChild();)f=f.getFirstChild();else f=f.getParentNode()}while(void 0!==f)};$MA.Graph.LineGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.lineDef=new $MA.Graph.LineDefinition;this.graphLineWidth=1;this.modernLook=!0;this.level=this.startLegend=0};$MA.Graph.LineGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.LineGraphObject.SHOWDOTSWIDTH=60;
$MA.Graph.LineGraphObject.prototype.drawGridsBack=function(){$MA.Graph.GraphObject.prototype.drawGridsBack.call(this);if(void 0!=this.upperThreshold||void 0!=this.lowerThreshold||void 0!=this.reference){var a=this.dataArea.left,b=this.dataArea.width,c=this.dataArea.right,d=this.dataArea.top,e=this.dataArea.bottom,f=$MA.Graph.SeriesBrushes.fillPalette.length-1,f=new $MA.Graph.DrawContext(this.getSeriesFillBrush(f),this.getSeriesStrokeBrush(f),this.getSeriesInsetShadowBrush(f),0.2),g,h,k,l=this.xAxis.labelDisplayDef;
void 0!=this.upperThreshold&&(g=this.getValueLoc(this.upperThreshold),this.annotationObjects.push(new $MA.Graph.Bar2D(this,f,null,a,d,b,g-d)),h=new $MA.Graph.Data(l,this.upperThreshold),k=h.getTextSize(this.context),g=d+(g-d)/2-k.height,g<d&&(g=d),this.annotationObjects.push(new $MA.Graph.Text2D(this,h,a+50,d+(g-d)/2,k.width,k.height)));void 0!=this.lowerThreshold&&(g=this.getValueLoc(this.lowerThreshold),this.annotationObjects.push(new $MA.Graph.Bar2D(this,f,null,a,g,b,e-g)),h=new $MA.Graph.Data(l,
this.lowerThreshold),k=h.getTextSize(this.context),g=e-(e-g)/2,g+k.height>e&&(g=e-k.height),this.annotationObjects.push(new $MA.Graph.Text2D(this,h,a+50,g,k.width,k.height)));void 0!=this.reference&&(g=this.getValueLoc(this.reference),this.annotationObjects.push(new $MA.Graph.Line2D(this,f,null,a,g,c,g,this.lineDef)))}};
$MA.Graph.LineGraphObject.prototype.calcDisplayEveryNLabels=function(){var a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),a=this.calcBarEntryWidth(a);if(-1!=this.categoryAxis.labelsEveryN&&void 0!=this.xAxisSize&&0<this.categories.length&&void 0==this.categories[0].groupValues){var b=this.xAxisSize.width;this.categoryAxis.labelsEveryN=b<=a?0:Math.ceil(1.5*b/a)}this.showDots=a>=$MA.Graph.LineGraphObject.SHOWDOTSWIDTH};
$MA.Graph.LineGraphObject.prototype.getNoOfVisibleCategories=function(){var a=this.getSeriesCount(),b=this.drawObjects,c;0<a?(c=b.length,1<c&&b[1]instanceof $MA.Graph.Symbol2D&&(c/=2),c/=a):c=0;return c};
$MA.Graph.LineGraphObject.prototype.getCategoryNodes=function(a){var b=this.getSeriesCount(),c=this.getMaxItemCount(),d=[],e,f,g,h,k,l,p,m,n=0;if(0<=a&&a<c)for(c=0;c<b;c++){f=this.getSeries(c).isEnabled();e=[];h=this.drawObjects[n+1];p=(m=h instanceof $MA.Graph.Symbol2D?!0:!1)?2*a:a;h=this.drawObjects[n+p];void 0==h?(k={},p=h=void 0):(p=f?h.item.xCoord:void 0,k=f?h.item.yCoord:void 0,k={value:h.item.yValue,x:p,y:k},h=h.item.otherValues);e.push(k);if(f&&h)for(f=0,g=h.length;f<g;f++)l=h[f],k=null!=
l&&void 0!=l?this.getValueLoc(l):l,k={value:l,x:p,y:k},e.push(k);d.push(e);e=this.getSeries(c).items.length;m&&(e*=2);n+=e}return d};
$MA.Graph.LineGraphObject.prototype.plotDefault=function(){var a=this.getMaxItemCount();if(0!=a){var b=this.getSeriesCount(),c;if(void 0!==this.baseStartX&&void 0!==this.baseIncrX)c=this.baseStartX,a=this.baseIncrX;else if(c=this.dataArea.left,1==a)a=this.dataArea.width/2,c+=a;else{var d=this.calcLineStartPos(this.dataArea.width);c+=d;a=(this.dataArea.width-2*d)/(a-1)}var d=(this.width+this.height)/200,e,f,g,h,k,l,p,m,n,q,s,r,u,v,w=-1,x,A;e=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.showDots=
this.calcBarEntryWidth(e)>=$MA.Graph.LineGraphObject.SHOWDOTSWIDTH;"graph"===this.drawingContentType?(A=new $MA.Graph.LineDefinition,A.width=this.graphLineWidth):A=this.lineDef;if(this.isHierarchy)this.level=0,this.plotHierarchyNode(A,a,[c]),this.plotDrawObjects();else{var y,C,B;for(y=0;y<b;y++){e=this.getSeries(y);f=e.isEnabled();u=q=new $MA.Graph.DrawContext(e.drawContext.fillBrush,e.drawContext.fillBrush,e.drawContext.insetShadowBrush);p=e.items.length;x=s=!1;var z;for(z=0;z<p;z++){this.trendCategory&&
e.getItemX(z)>=this.trendCategory&&(s=!0);C=g=c+a*(z/this.itemIncr);m=e.items[z];B=h=void 0!==m.yValue&&null!==m.yValue?this.getValueLoc(e.getItemYDouble(z)):void 0;h=this.getLineStartAndEndPosition(n,m,g,h,k,l);k=h.start.x;l=h.start.y;g=h.end.x;h=h.end.y;m.xCoord=g;m.yCoord=h;0===z&&(k=g,l=h);z==p-1&&(g-=1);v=void 0;w=this.getRealIndex(y,z,b);this.isCustomDataPointsColor&&(w>=this.dataPointsColorMinIndex&&w<=this.dataPointsColorMaxIndex)&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+
w)&&(v=this.dataPointsColorHash.get("CustomDataPointsColor"+w).toString(),v=new $MA.Graph.DrawContext(new $MA.Brush(v),new $MA.Brush(v),q.getInsertShadowBrush()));q=void 0!=v?v:u;k=this.translateCoordinate(k,l);g=this.translateCoordinate(g,h);m.xCoord=g.x;m.yCoord=g.y;x&&(void 0===h||m.yValue<this.valuesAxis.minValue||m.yValue>this.valuesAxis.maxValue)&&(r.isLast=!0,x=!1);f&&void 0!==h&&void 0!==l?(r=s?new $MA.Graph.DashedLine2D(this,q,m,k.x,k.y,g.x,g.y,A):new $MA.Graph.Line2D(this,q,m,k.x,k.y,g.x,
g.y,A),!x&&p-1>z&&(x=!0,r.isFirst=!0),x&&p-1===z&&(r.isLast=!0,x=!1)):r=new $MA.Graph.Line2D(this,q,m,-1,-1,-1,-1,A);l=!0;if(void 0!=n&&0==n.yValue&&(m.yValue<this.yAxis.minValue||m.yValue>this.yAxis.maxValue)&&0<=z)this.showDots=l=!1,r=new $MA.Graph.Line2D(this,r.drawContext,m,null,null,null,null,A);else if(m.yValue<this.yAxis.minValue||m.yValue>this.yAxis.maxValue)l=!1;this.drawObjects.push(r);this.showDots&&(l&&!this.valuesAxis.outOfBound(m.yValue)&&!this.animation&&f&&void 0!==h)&&this.auxiliaryObjects.push(new $MA.Graph.Symbol2D(this,
q,m,$MA.Graph.SymbolType.CIRCLE,g.x,g.y,d,d));k=C;l=B;n=m}}}}};$MA.Graph.LineGraphObject.prototype.getRealIndex=function(a,b,c){var d;d=this.firstItem+-1;var e,f,g;for(e=0;e<=b;e++)for(f=0;f<c;f++)if(g=this.getSeries(f),g=g.items[e].yValue,null!=g&&d++,e==b&&f==a){if(void 0==g||null==g||isNaN(g))d=-1;break}return d};
$MA.Graph.LineGraphObject.prototype.plotHierarchyNode=function(a,b,c,d){void 0==this.hierarchyObjects&&(this.hierarchyObjects=[]);var e,f=!1;void 0===d&&(d=this.getRootNode(),f=!0);var g=this.getSeriesCount();if(null!==d){var h=d.getSeries(),k=this.suppliedTotals&&void 0===h,l=d.getChildren(),p=l.length,m,n,q,s,r,u,v;if(this.childrenFirst)for(m=0;m<p;m++)this.plotHierarchyNode(a,b,c,l[m]),k||(c[0]+=b);if(!k)for(s=c[0],m=0;m<g;m++)q=void 0!==h[m]?h[m]:void 0,e=this.getSeries(m),n=e.isEnabled(),r=d.getLevel(),
r>this.level&&(this.level=r),f&&(q+=this.getSeries(m).sumBeforeRange),r=this.getValueLoc(q),u=f?$MA.getLocalisation(null,"Total","Total"):d.getValue(),v=d.getGroupValues(),e={seriesNo:m,seriesEnabled:n,valueDisplayText:d.getValueDisplayText(m),yValue:q,value:u,displayValue:u,currX:s,currY:r,lineDef:this.lineDef,groupValues:v,name:e.name},this.hierarchyObjects.push(e);if(!this.childrenFirst)for(k||(c[0]+=b),m=0;m<p;m++)this.plotHierarchyNode(a,b,c,l[m])}};
$MA.Graph.LineGraphObject.prototype.plotDrawObjects=function(){if(this.hierarchyObjects){var a,b,c,d,e,f,g,h,k,l,p,m,n,q,s,r;p=this.getSeriesCount();n=this.hierarchyObjects.length;m=(this.width+this.height)/200;var u,v,w,x;for(u=0;u<p;u++)for(c=this.getSeries(u),g=c.isEnabled(),h=new $MA.Graph.DrawContext(c.drawContext.fillBrush,c.drawContext.fillBrush,c.drawContext.insetShadowBrush),q=!0,s=0,r=u,v=0;v<n;v++)if(k=this.hierarchyObjects[v],k.seriesNo===u){c=k.currX;d=k.currY;w=k.lineDef;e=k.groupValues.slice(0);
x=0===e.length?k.value:"rootToLeaf"===this.categoriesDisplayOrder?e.reverse().join(", ")+", "+k.value:k.value+", "+e.join(", ");e=c;f=d;d=this.getLineStartAndEndPosition(l,k,c,d,a,b);a=d.start.x;b=d.start.y;c=d.end.x;d=d.end.y;0===v&&(a=c,b=d);v==n-1&&(c-=1);k={yValue:k.yValue,value:k.value,displayValue:k.displayValue,xCoord:c,yCoord:d,itemNo:s,seriesNo:r,groupValues:k.groupValues,valueDisplayText:k.valueDisplayText,category:{value:x},parentSeries:{name:k.name}};a=q||void 0==d||!g?new $MA.Graph.Line2D(this,
h,k,-1,-1,-1,-1,w):new $MA.Graph.Line2D(this,h,k,a,b,c,d,w);b=!0;if(void 0!=l&&0==l.yValue&&(k.yValue<this.yAxis.minValue||k.yValue>this.yAxis.maxValue)&&0<=v)this.showDots=b=!1,a=new $MA.Graph.Line2D(this,h,k,null,null,null,null,w);else if(k.yValue<this.yAxis.minValue||k.yValue>this.yAxis.maxValue)b=!1;this.drawObjects.push(a);this.showDots&&(b&&g&&void 0!=d)&&this.auxiliaryObjects.push(new $MA.Graph.Symbol2D(this,h,k,$MA.Graph.SymbolType.CIRCLE,c,d,m,m));s++;a=e;b=f;l=k;q=!1}this.hierarchyObjs=
void 0}};$MA.Graph.LineGraphObject.prototype.getMaxItemCount=function(){return this.isHierarchy?this.getNodeCount():$MA.Graph.GraphObject.prototype.getMaxItemCount.apply(this)};$MA.Graph.LineGraphObject.prototype.plotStacked=function(){this.plotDefault()};$MA.Graph.LineGraphObject.prototype.calcLineStartPos=function(a){a=this.calcBarGap(a);return 10>a?10:a};
$MA.Graph.LineGraphObject.prototype.clearItems=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.context.clearRect(a+1,b+1,d-2,c-2)};
$MA.Graph.LineGraphObject.prototype.resetDrawObj=function(a){var b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA)+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA);void 0!=a.y1&&(a.incr1=(b-a.y1)/$MA.Graph.GraphObject.ANIMATIONCOUNT,a.y1=b);void 0!=a.y2&&(a.incr2=(b-a.y2)/$MA.Graph.GraphObject.ANIMATIONCOUNT,a.y2=b)};$MA.Graph.LineGraphObject.prototype.animateDrawObj=function(a){void 0!=a.y1&&(a.y1-=a.incr1);void 0!=a.y2&&(a.y2-=a.incr2);a.plotPrimitives()};
$MA.Graph.LineGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c,d=this.getSeriesCount(),e;if(!0==this.isCustomDataPointsColor){c=this.firstItem+-1;var f,g;for(f=0;f<=b;f++)for(g=0;g<d;g++)if(e=this.getSeries(g),e=e.items[f].yValue,null!=e&&c++,f==b&&g==a){if(void 0==e||null==e||isNaN(e))c=-1;break}c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+c)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+c).toString()):void 0}return c};
$MA.Graph.LineGraphObject.prototype.setShowDotsWidth=function(a){$MA.Graph.LineGraphObject.SHOWDOTSWIDTH=a};$MA.Graph.LineGraphObject.prototype.setGraphLineWidth=function(a){this.graphLineWidth=a};
$MA.Graph.LineGraphObject.prototype.getLineStartAndEndPosition=function(a,b,c,d,e,f){var g=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),h=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),h=g+h;if(null==a){if(b.yValue>this.valuesAxis.maxValue||b.yValue<this.valuesAxis.minValue)d=void 0}else a.yValue>this.valuesAxis.maxValue&&b.yValue>this.valuesAxis.maxValue||a.yValue<this.valuesAxis.minValue&&b.yValue<this.valuesAxis.minValue?f=d=void 0:a.yValue>this.valuesAxis.maxValue&&b.yValue<=this.valuesAxis.maxValue&&
b.yValue>=this.valuesAxis.minValue?(e=this.calcCoordinateX(e,f,c,d,g,"top"),f=g):b.yValue>this.valuesAxis.maxValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(c=this.calcCoordinateX(e,f,c,d,g,"top"),d=g):a.yValue<this.valuesAxis.minValue&&b.yValue<=this.valuesAxis.maxValue&&b.yValue>=this.valuesAxis.minValue?(e=this.calcCoordinateX(e,f,c,d,h,"bottom"),f=h):b.yValue<this.valuesAxis.minValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(c=this.calcCoordinateX(e,
f,c,d,h,"bottom"),d=h):a.yValue>this.valuesAxis.maxValue&&b.yValue<this.valuesAxis.minValue?(e=this.calcCoordinateX(e,f,c,d,g,"top"),f=g,c=this.calcCoordinateX(e,f,c,d,h,"bottom"),d=h):a.yValue<this.valuesAxis.minValue&&b.yValue>this.valuesAxis.maxValue&&(e=this.calcCoordinateX(e,f,c,d,h,"bottom"),f=h,c=this.calcCoordinateX(e,f,c,d,g,"top"),d=g);return{start:{x:e,y:f},end:{x:c,y:d}}};
$MA.Graph.PieGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.legend.location=$MA.Graph.LegendType.LEFT;this.lineDef=new $MA.Graph.LineDefinition(1);this.showLabels=!0;this.isDonut=!1};$MA.Graph.PieGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.PieGraphObject.prototype.setValueBubblePosition=function(a){this.valueBubblePosition=a};
$MA.Graph.PieGraphObject.prototype.getLegendList=function(){var a=this.legend.legendList,b,c;if(!a&&(a=[],c=this.seriesList[0])){var d,e=c.items.length;for(d=0;d<e;d++)b=c.items[d].originalIndex,void 0==b&&(b=this.maxPies),void 0!=this.chartBrushes&&(b%=this.chartBrushes.length),b={formatted_name:c.items[d].category.displayValue,name:c.items[d].category.displayValue,fillBrush:this.getSeriesFillBrush(b).toString(),graphObjIndex:0},a.push(b)}return a};
$MA.Graph.PieGraphObject.prototype.getValueBubbleHeight=function(){return this.valueBubbleHeight};$MA.Graph.PieGraphObject.prototype.plot=function(a){this.canvas=a;this.height=a.height;this.width=a.width;this.context=a.getContext?a.getContext("2d"):null;this.initData();this.getIsCustomDataPointsColor();this.scale();this.resize();this.arrange();this.redraw()};$MA.Graph.PieGraphObject.prototype.redraw=function(){this.reset();this.drawTitle();this.drawLegend();this.isStacked?this.plotStacked():this.plotDefault()};
$MA.Graph.PieGraphObject.prototype.calcSize=function(){var a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DISPLAY),b=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DISPLAY),c=a,d=b,e=this.valueBubble?this.getValueBubbleHeight():0,f=0,g=0;"top"===this.valueBubblePosition?d-=e:"side"===this.valueBubblePosition&&(c-=$MA.Graph.LEFT_SLIDER_MIN_SIZE);10>d||10>c||(this.paintSize=d>c?c:d,"side"===this.valueBubblePosition?(f=this.legend.location===$MA.Graph.LegendType.RIGHT?a-this.paintSize/2:this.paintSize/
2,g=b/2):"top"===this.valueBubblePosition&&(f=a/2,g=e+(b-e)/2),this.centerY=this.drawAreas.getY($MA.Graph.DrawAreaType.DISPLAY)+g,this.centerX=this.drawAreas.getX($MA.Graph.DrawAreaType.DISPLAY)+f)};$MA.Graph.PIE_OTHERS="Others";$MA.Graph.LEFT_SLIDER_MIN_SIZE=80;
$MA.Graph.PieGraphObject.prototype.initData=function(){function a(a,b){b.sortY();a.categories.sort(function(a,c){return b.getYByX(c.value)-b.getYByX(a.value)})}var b,c;if(this.categories&&3<$MA.Chart.PieChartCategoryTextMaxLength)for(c=this.categories.length,b=0;b<c;b++){var d=this.categories[b].displayValue.toString();this.categories[b].displayValue=d.length>$MA.Chart.PieChartCategoryTextMaxLength?d.substring(0,$MA.Chart.PieChartCategoryTextMaxLength-3)+"...":d}d=this.getSeriesCount();if(!(1>d)){var e,
f;for(e=d-1;0<=e;e--){d=this.getSeries(e);for(b=0;b<d.items.length;b++)void 0==d.items[b].originalIndex&&(d.items[b].originalIndex=b),f=d.items[b].yValue,""==f||null==f||void 0==f?(d.items[b].yValue=0,d.items[b].isNull=!0):d.items[b].isNull=!1;var g=d.removeNegativeItems();f=[];c=this.categories.length;for(b=0;b<c;b++)0>g.indexOf(b)&&f.push(this.categories[b]);f.length<this.categories.length&&(this.categories=f);var h=d.items.length;d.items[this.maxPies]&&d.items[this.maxPies].others||a(this,d);if(h>
this.maxPies+1){c=[];g=0;for(b=this.maxPies;b<h;b++){f=d.items[b].yValue;if(""==f||null==f||void 0==f)f=0;g+=Math.abs(f);c.push(d.items[b])}b=$MA.getLocalisation(null,$MA.Graph.PIE_OTHERS,$MA.Graph.PIE_OTHERS);d.items.length=this.maxPies;d.add(b,null,[g]);d.items[this.maxPies].others=c;this.categories.length=this.maxPies;b=new $MA.Graph.Category(b);this.categories.push(b);d.items[this.maxPies].setCategory(b)}}}};
$MA.Graph.PieGraphObject.prototype.plotDefault=function(){var a,b,c,d,e,f,g,h,k,l=0,p,m,n,q,s;d=0;var r,u,v,w,x;e=this.getSeriesCount();if(1==e){k=Math.floor(this.paintSize/2)-4;var l=this.computeTruePieRadius(k),A=0;for(w=e-1;0<=w;w--){s=this.getSeries(w);s.getItems();g=f=l*((w+1)/e);s.isSelected()&&(g*=1-$MA.Graph.PIE_EXPLODE_PERCENT/100);h=l*(w/e);b=0;p=Math.PI/2;a=s.getYPosSum();var y=Math.PI/2;if(0!=a){for(v=0;v<s.items.length;v++){c=Math.abs(s.getItemYDouble(v))/a;b+=c;0==A&&(p=y-=Math.PI*b);
m=p;p=2*Math.PI*b+y;1==b&&(p+=1E-5);s.items[v].yCoord=100*c;s.items[v].xCoord=s.items[v].getXDisplayValue();if(s.items[v].others)for(d=0;d<s.items[v].others.length;d++)n=s.items[v].others[d],n.yCoord=100*$MA.getDouble(n.yValue)/a,n.xCoord=n.getXDisplayValue();d=s.getItemPieExplodePercent(v);d/=100;n=this.centerX;q=this.centerY;r=s.items[v].originalIndex;void 0==r&&(r=this.maxPies);void 0!=this.chartBrushes&&(r%=this.chartBrushes.length);r=new $MA.Graph.DrawContext(this.getSeriesFillBrush(r),this.getSeriesStrokeBrush(r),
this.getSeriesInsetShadowBrush(r));u++;this.isCustomDataPointsColor&&v<this.maxPies&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+s.items[v].originalIndex)&&(x=this.dataPointsColorHash.get("CustomDataPointsColor"+s.items[v].originalIndex).toString(),r=new $MA.Graph.DrawContext(new $MA.Brush(x),r.getStrokeBrush(),r.getInsertShadowBrush()));n=new $MA.Graph.PieSlice2D(this,r,s.items[v],n,q,g,p,m,this.isDonut);n.orgRadius=f;0<d&&(n.offsetPercent=d);this.drawObjects.push(n);1==e&&this.showLabels&&
(c=new $MA.Graph.Data(this.pieDisplayDef,Number(100*c).toFixed(2)),d=c.getTextSize(this.context),null!=c&&(n=(p+m)/2,Math.cos(n),Math.sin(n),m=this.centerX+(0.5-1.1*k*Math.cos(n)),n=this.centerY+(0.5-1.1*k*Math.sin(n)),q=m>this.centerX?!0:!1,r=n<this.centerY?!1:!0,this.drawObjects.push(new $MA.Graph.Text2D(this,c,m-(q?0:d.width),n-(r?0:d.height),d.width,d.height))));A++}1<e&&this.showLabels&&(c=s.label,d=c.getTextSize(this.context),null!=c&&(n=Math.PI*((w+1)/(e+1))+Math.PI/2,a=this.centerX+(0.5-(h+
g)/2*Math.cos(n)),g=this.centerY+(0.5-(h+g)/2*Math.sin(n)),m=this.centerX+(0.5-1.1*k*Math.cos(n)),n=this.centerY+(0.5-1.1*k*Math.sin(n)),this.drawObjects.push(new $MA.Graph.Line2D(this,this.getLineBrush(),null,a,g,m,n,this.lineDef)),q=m>this.centerX?!0:!1,r=n<this.centerY?!1:!0,this.drawObjects.push(new $MA.Graph.Text2D(this,c,m-(q?0:d.width),n-(r?0:d.height),d.width,d.height))))}}}};
$MA.Graph.PieGraphObject.prototype.resetDrawObj=function(a){a.incr=2*Math.PI/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.offset=Math.PI};$MA.Graph.PieGraphObject.prototype.animateDrawObj=function(a){a.offset+=a.incr;a.generate()};
$MA.Graph.PieGraphObject.prototype.clearItems=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.context.clearRect(a+1,b+1,d-2,c-2)};
$MA.Graph.PieGraphObject.prototype.getDrawObject=function(a){var b,c=this.drawObjects.length,d,e=0,f;for(d=0;d<c;d++)if(b=this.drawObjects[d],void 0!=b.item){e++;f=b;var g=b.radStart+b.offset,h=b.radEnd+b.offset,g=g%(2*Math.PI);0>g&&(g+=2*Math.PI);h%=2*Math.PI;0>h&&(h+=2*Math.PI);g<h&&(g+=2*Math.PI);0>a&&(a+=2*Math.PI);if(a>=h&&a<=g)return b}if(1==e)return f};
$MA.Graph.PieGraphObject.prototype.getSelectedPieSlices=function(){var a,b,c=this.drawObjects.length,d=[];for(b=0;b<c;b++)a=this.drawObjects[b],void 0!==a.item&&a.item.selected&&(a={name:a.item.xCoord,percent:a.item.yCoord,value:a.item.yValue,color:a.drawContext.getFillBrush(),others:a.item.others,valueDisplayText:a.item.valueDisplayText,isNull:a.item.isNull},d.push(a));return d};
$MA.Graph.PieGraphObject.prototype.select=function(a){var b,c,d,e=this.drawObjects.length;this.getSeries(0).getItems();var f;for(f=0;f<e;f++)b=this.drawObjects[f],void 0!=b.item&&(void 0===c&&(d=$MA.Graph.PIE_EXPLODE_PERCENT/100,c=b.orgRadius*(1-d)),b.radius=a?c:b.orgRadius,b.offsetPercent=b.item.selected?d:0,b.generate(!0));$MA.platform.blackberry&&(a&&this.legend.location==$MA.Graph.LegendType.TOP)&&this.context.clearRect(0,this.canvas.height-11,this.canvas.width,11)};
$MA.Graph.PieGraphObject.prototype.rotate=function(a,b){var c,d,e=this.drawObjects.length;for(c=0;c<e;c++)d=this.drawObjects[c],void 0!=d.item&&(d.offset+=a,d.generate(!0),0==c&&(b&&$MA.platform.blackberry)&&(this.context.clearRect(b[0],b[1],b[2],b[3]),d.generate(!0)))};
$MA.Graph.PieGraphObject.prototype.rotateRefresh=function(a){var b,c,d=this.drawObjects.length;for(b=0;b<d;b++)c=this.drawObjects[b],void 0!=c.item&&(c.generate(!0),0==b&&(a&&$MA.platform.blackberry)&&(this.context.clearRect(a[0],a[1],a[2],a[3]),c.generate(!0)));$MA.platform.blackberry&&(0<this.getSelectedPieSlices().length&&this.legend.location==$MA.Graph.LegendType.TOP)&&this.context.clearRect(0,this.canvas.height-11,this.canvas.width,11)};
$MA.Graph.PieGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c,d=-1;this.isCustomDataPointsColor&&(a<this.maxPies?(c=this.getSeries(0),c=c.items[a],c=c.originalIndex,d=void 0!=c?c:a):d=void 0,c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+d)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+d).toString()):void 0);return c};
$MA.Graph.TableBarGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.legend.location=$MA.Graph.LegendType.BOTTOM;this.xAxis=this.valuesAxis;this.xAxis.labelDisplayDef.font.rotation=0;this.xAxis.majorTic=$MA.Graph.TicType.NONE;this.xAxis.hideValue=!1;this.yAxis=this.categoryAxis;this.yAxis.labelDisplayDef.font.rotation=270;this.yAxis.majorTic=$MA.Graph.TicType.NONE;this.yAxis.hideValue=!1;this.modernLook=!0;this.firstRow=0!=this.firstRow?this.firstRow:0;this.valueBubbleValue=
-1;this.fontSize="14px";this.fontFamily="Helvetica";this.rowHeaderBkColor=this.dimTitleBkColor="#DDDDDD";this.contentsBkColor=this.colHeadersBkColor="#F7F7F7";this.legendBkColor="black";this.legendColor="white";this.separatorLineColor=this.gridLineColor="#DDDDDD";this.textColor="#333333";this.textShadowColor="white";this.startLegend=0;this.beginGridShadowColor="rgba(0,0,0,0.2)";this.endGridShadowColor="rgba(0,0,0,0)";this.lineDef=new $MA.Graph.LineDefinition;this.showDots=!0;this.getStyles();this.graphLineWidth=
1;this.chartDataWidth=this.categoryColumnWidth=this.valueColumnWidth=this.tableWidthPercent=void 0;this.vericaLabelWidth=14+2*$MA.Graph.TableBarGraphObject.PADDING};$MA.Graph.TableBarGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.TableBarGraphObject.PADDING=10;$MA.Graph.TableBarGraphObject.ROWHEIGHT=44;
$MA.Graph.TableBarGraphObject.prototype.calcTableWidth=function(){var a=this.chartDataWidth,b;void 0!=this.tableWidthPercent&&(b="small"==$MA.getScreenSize()?0.1:0.05,b=a*(this.tableWidthPercent+b));if(0==this.getMaxItemCount())return 0;var c=this.getSeriesCount();if(0==c)return 0;var d,e,f,g,h=a=0;this.context.font=this.fontSize+" "+this.fontFamily;var k=this.xAxis.displayDef.format,l=this.yAxis.displayDef.format,p,m,n;for(m=0;m<c;m++){d=this.getSeries(m);e=d.items.length;for(n=p=0;n<e;n++)f=d.items[n],
g=$MA.format(f.getXValue(),l),g=this.context.measureText(g),g.width>a&&(a=g.width),g=void 0!=f.valueDisplayText?f.valueDisplayText:$MA.format(f.yValue,k,d.locale),g=this.context.measureText(g),g.width>h&&(h=g.width),this.showTotal&&("number"==typeof f.yValue&&!isNaN(f.yValue))&&(p+=f.yValue);this.showTotal&&(g=$MA.format(p,k,d.locale),g=this.context.measureText(g),g.width>h&&(h=g.width))}void 0!=this.dimTitle&&void 0==this.tableWidthPercent&&(g=this.context.measureText(this.dimTitle),g.width>a&&(a=
g.width));void 0!=this.rowHeader&&void 0==this.tableWidthPercent&&(g=this.context.measureText(this.rowHeader),g.width>h&&(h=g.width));c=this.getCategoryLevelCount();d=0;this.columnX=[];this.columnX.push(0);this.vericaLabelWidth=14+2*$MA.Graph.TableBarGraphObject.PADDING;if(0<c)for(e=0;e<c;e++)d+=this.vericaLabelWidth,this.columnX.push(d);if(void 0!=this.tableWidthPercent){this.valueColumnWidth=h+20+3;this.categoryColumnWidth=b-this.valueColumnWidth;a=b/2;a>this.valueColumnWidth&&0==c&&(this.categoryColumnWidth=
this.valueColumnWidth=a);30>this.categoryColumnWidth&&(this.categoryColumnWidth=30,0==c&&(this.valueColumnWidth=b-this.categoryColumnWidth-20));if(0<c){a=(b-d)/2;this.valueColumnWidth=a-10;this.categoryColumnWidth=a-10;0>this.categoryColumnWidth&&(this.categoryColumnWidth=0);if(0<this.categoryColumnWidth&&30>this.categoryColumnWidth)d+=this.valueColumnWidth;else if(0>=this.categoryColumnWidth){if(a=b/(c+1),d>=b){for(h=0;h<=c;h++)this.columnX[h]=h*a;this.vericaLabelWidth=a;d=c*a;this.valueColumnWidth=
this.categoryColumnWidth=0}}else d+=this.categoryColumnWidth;this.columnX.push(d)}else this.columnX.push(this.categoryColumnWidth);d=b}else if(d+=a+20+3,this.columnX.push(d),d+=h+20+3,!1==this.tableValue)return this.columnX[this.columnX.length-1];return d};
$MA.Graph.TableBarGraphObject.prototype.arrange=function(){$MA.Graph.GraphObject.prototype.arrange.call(this);this.chartDataWidth=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);var a=this.calcTableWidth();this.tableWidth=a;var b=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a-b,c=this.xAxis.getMaxStringSize(),d=this.categories.length;this.drawAreas.setX($MA.Graph.DrawAreaType.DATA,a);a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);a=a-b-c.width;this.drawAreas.setWidth($MA.Graph.DrawAreaType.DATA,
0>a?0:a);this.drawAreas.setY($MA.Graph.DrawAreaType.DATA,$MA.Graph.TableBarGraphObject.ROWHEIGHT);0>=d||this.legend.location==$MA.Graph.LegendType.NONE?this.drawAreas.setHeight($MA.Graph.DrawAreaType.DATA,this.height-$MA.Graph.TableBarGraphObject.ROWHEIGHT):(d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),this.drawAreas.setHeight($MA.Graph.DrawAreaType.DATA,this.height-$MA.Graph.TableBarGraphObject.ROWHEIGHT-d),"ltr"===this.dir?(this.drawAreas.set($MA.Graph.DrawAreaType.LEGEND,0,this.height-
d,this.width,d),this.legend.left=0>this.width-this.legend.totalWidth?0:this.width-this.legend.totalWidth):(this.drawAreas.set($MA.Graph.DrawAreaType.LEGEND,0,this.height-d,this.width,d),this.legend.left=this.legend.viewWidth-this.legend.totalWidth));a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);this.drawAreas.setWidth($MA.Graph.DrawAreaType.XAXIS,a-b);this.secondaryAxis&&(this.secondaryAxis.majorGridLine=!1,b=this.xAxis.getMaxStringSize().height+this.xAxis.majorTicLength+5,d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),
this.drawAreas.setHeight($MA.Graph.DrawAreaType.DATA,d-b))};$MA.Graph.TableBarGraphObject.prototype.resetData=function(){$MA.Graph.GraphObject.prototype.resetData.call(this);this.firstRow=0};
$MA.Graph.TableBarGraphObject.prototype.plotDefault=function(){if(0!=this.getMaxItemCount()){var a=this.getSeriesCount();if(0!=a){var b=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),f=c+e,g=this.calcBarWidth(e),d=b+d,h=this.valuesAxis.getOriginLoc(b,d);0>h&&(h=0>this.valuesAxis.maxValue?d:b);var k=this.calcBarGap(e),e=g+2*this.calcBarGap(e);
this.baseStartY=c+e*a/2;this.baseIncrY=e*a;var l,p,m,n,q=this.categories.length;p=Math.floor(this.firstRow/a);var s=p*a-1,r=-1;this.getTheFirstItem();var r=r+this.firstItem,u,v,w;if(this.isWaterfall){u=[];var x;for(x=0;x<a;x++)u.push(this.getSeries(x).sumBeforeRange);this.showTotal&&q++}var A,y;for(x=p;x<q&&!(c>f);x++)for(w=!0,A=0;A<a;A++){var C=null,B=null;s++;if(c>f)break;if(!(s<this.firstRow)){l=this.getSeries(A);var z=l.drawContext;p=l.getItemY(x);y=l.items[x];void 0===y&&(y=new $MA.Graph.Item);
null!=p&&r++;if(l.isEnabled()){if(this.isWaterfall)if(this.showTotal&&x==q-1){p=u[A];m=this.valuesAxis.getValueLoc(b,d,p);n=m>h?h:m;m=Math.abs(m-h);var E=$MA.convertor.format(p,this.totalFormat);y.category={value:$MA.getLocalisation(null,"Total","Total"),displayValue:$MA.getLocalisation(null,"Total","Total")};y.valueDisplayText=E;this.showTotal&&x==q-1&&l.items.push(y)}else{if("number"!=typeof p||"number"==typeof p&&isNaN(p))p=0;n=m=this.valuesAxis.getValueLoc(b,d,0<p?u[A]:u[A]+p);m=Math.abs(this.valuesAxis.getValueLoc(b,
d,u[A]+p)-this.valuesAxis.getValueLoc(b,d,u[A]));u[A]+=p;0!==p&&2>m&&(C=n,B=m,0>p&&(n-=2-m),m=2)}else m=this.valuesAxis.getValueLoc(b,d,p),m>h?(n=h,m-=h):(n=m-2,m=h-m);(!this.showTotal||this.showTotal&&x<q-1)&&(this.isCustomDataPointsColor&&(r>=this.dataPointsColorMinIndex&&r<=this.dataPointsColorMaxIndex)&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+r))&&(z=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+r).toString()),null===z&&(z=l.drawContext));l=this.getStartPosition(n,
void 0,m);c+k+g<f?this.drawObjects.push(new $MA.Graph.Bar2D(this,z,y,l.x,c+k,m,g,this.is3DObjects,g,0>p)):this.drawObjects.push(new $MA.Graph.Bar2D(this,z,y,l.x,c+k,m,f-c-k,this.is3DObjects,f-c-k,0>p));y=n;!this.isWaterfall||(!this.showWFConnectingLine||0===p||1!==a||this.showTotal&&x==q-1)||(n={x:0>p?y:y+m,y:c+0.75*e},w&&(void 0!==v&&(0>p&&(y=n.x+m),z.strokeBrush=new $MA.Brush($MA.Brushes.gray.color),v=this.translateCoordinate(v.x,v.y),w=this.translateCoordinate(y,n.y-0.5*e),this.WFConnLineObjects.push(new $MA.Graph.DashedLine2D(this,
z,void 0,v.x,v.y,w.x,w.y,this.lineDef))),n.x=null!==C?0>p?C:C+B:n.x,w=!1),v=n)}c+=e}}this.plotData();this.plotGradientRect();this.calcDisplayEveryNLabels();this.plotXAxis();this.plotX2Axis()}}};$MA.Graph.TableBarGraphObject.prototype.getTheFirstItem=function(){var a=0,b=0,c=this.getSeriesCount(),d=this.categories.length,e,f,g;for(e=0;e<=d;e++)for(f=0;f<c;f++){b++;if(b>this.firstRow){e=d;break}g=this.getSeries(f);g=g.getItemY(e);null!=g&&a++}this.firstItem=a};
$MA.Graph.TableBarGraphObject.prototype.plotVertical=function(){if(0!=this.getMaxItemCount()){var a=this.getSeriesCount();if(0!=a){var b=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),f=c+e,g=this.calcBarWidth(e),d=b+d,h=g+2*this.calcBarGap(e),k=1;void 0!==this.baseStartY&&void 0!==this.baseIncrY?(e=this.baseStartY,g=this.baseIncrY,k=g/
h):(e=c+h/2,g=h);var l=(this.width+this.height)/200,p,m,n,q,s,r,u,v=Math.floor(this.firstRow/k),k=this.firstRow%k,w;for(w=0;w<k;w++)e-=h;e<c&&v++;var x;"graph"===this.drawingContentType?(x=new $MA.Graph.LineDefinition,x.width=this.graphLineWidth):x=this.lineDef;var A,y,C,B,z,E;for(A=0;A<a;A++)for(h=this.getSeries(A),C=h.isEnabled(),B=p=new $MA.Graph.DrawContext(h.drawContext.fillBrush,h.drawContext.fillBrush,h.drawContext.insetShadowBrush),n=e,z=h.items.length,s=r=void 0,w=!1,p=null,0<v&&v<=z&&(void 0!==
h.items[v-1].yValue&&null!==h.items[v-1].yValue&&(p={yValue:h.items[v-1].yValue},r=this.valuesAxis.getValueLoc(b,d,h.getItemY(v-1)),n<c?(s=n,n+=g):s=n-g),n<c&&(n+=g)),y=v;y<z;y++){k=h.items[y];m=h.getItemY(y);m=q=void 0!==k.yValue&&null!==k.yValue?this.valuesAxis.getValueLoc(b,d,m):void 0;E=n;n=this.getLineStartAndEndPosition(p,k,q,n,r,s);r=n.start.x;s=n.start.y;q=n.end.x;n=n.end.y;n>f&&(w=!0);w&&void 0!==q&&(s<f?(q=this.calcCoordinateX(r,s,q,n,f,"bottom"),n=f):s=n=void 0);void 0!=r&&s<c&&(n>c?(r=
this.calcCoordinateX(r,s,q,n,c,"top"),s=c):s=n=void 0);k.xCoord=q;k.yCoord=n;0===y&&(r=q,s=n);y==z-1&&(q-=1);u=k.yValue<this.valuesAxis.minValue&&null!=p&&p.yValue<this.valuesAxis.minValue;p=this.getRealIndex(A,y,a);this.isCustomDataPointsColor&&p>=this.dataPointsColorMinIndex&&p<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+p)&&this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+p).toString());p=B;r=this.translateCoordinate(r,s);
q=this.translateCoordinate(q,n);s=!C||u||void 0===n||void 0===s?new $MA.Graph.Line2D(this,p,k,-1,-1,-1,-1,x):new $MA.Graph.Line2D(this,p,k,r.x,r.y,q.x,q.y,x);this.drawObjects.push(s);this.showDots&&(k.yValue>=this.valuesAxis.minValue&&!this.animation&&C&&void 0!==n&&!w)&&this.drawObjects.push(new $MA.Graph.Symbol2D(this,p,k,$MA.Graph.SymbolType.CIRCLE,q.x,q.y,l,l));r=m;s=n=E;p=k;if(w)break;n+=g}}}};
$MA.Graph.TableBarGraphObject.prototype.getRealIndex=function(a,b,c){var d;d=this.firstItem+-1;var e,f,g;for(e=0;e<=b;e++)for(f=0;f<c;f++)if(g=this.getSeries(f),g=g.items[e].yValue,null!=g&&d++,e==b&&f==a){if(void 0==g||null==g||isNaN(g))d=-1;break}return d};
$MA.Graph.TableBarGraphObject.prototype.isCategoryLabelVisible=function(a,b,c){var d=this.getSeriesCount();if(b+1<this.categories.length){var e=this.categories[b].groupValues[c],f,g;for(f=b+1;f<this.categories.length&&(g=this.categories[f].groupValues[c],e==g);f++);return this.context.measureText(e).width<=(f-b-1)*$MA.Graph.TableBarGraphObject.ROWHEIGHT+(d-a-1)*$MA.Graph.TableBarGraphObject.ROWHEIGHT+2*$MA.Graph.TableBarGraphObject.PADDING}};
$MA.Graph.TableBarGraphObject.prototype.getEllipsesiedText=function(a,b){10>b?a="...":5>b&&(a=".");for(var c=new $MA.Graph.Data(this.xAxis.displayDef,a),d=c.getTextSize(this.context);""!=a&&d.width>b&&"..."!=a;)a=a.substring(0,a.length-4)+"...",c.value=a,d=c.getTextSize(this.context);return a};
$MA.Graph.TableBarGraphObject.prototype.plotData=function(){if(0!=this.getMaxItemCount()){var a=this.getSeriesCount();if(0!=a){var b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),d=b+c,e,f=this.calcBarWidth(c)+2*this.calcBarGap(c),g=$MA.Graph.TableBarGraphObject.PADDING,h=g+14,k,l,p,m,n,q=this.context;q.save();q.beginPath();m=this.getStartPosition(0,0,this.tableWidth);q.rect(m.x,0,this.tableWidth,d);q.clip();q.fillStyle=this.dimTitleBkColor;
l=this.columnX[this.columnX.length-1];m=this.getStartPosition(0,0,l);q.fillRect(m.x,0,l,b);q.fillStyle=this.colHeadersBkColor;m=this.getStartPosition(0,0,l);q.fillRect(m.x,b,l,c-2);q.fillStyle=this.rowHeaderBkColor;var s=this.columnX[this.columnX.length-1];l=this.tableWidth-this.columnX[this.columnX.length-1];m=this.getStartPosition(s,0,l);q.fillRect(m.x,0,l,b);q.fillStyle=this.contentsBkColor;m=this.getStartPosition(s,0,l);q.fillRect(m.x,b,l,c-2);q.font=this.fontSize+" "+this.fontFamily;var s=this.xAxis.displayDef.format,
r=this.yAxis.displayDef.format,u=this.xAxis.displayDef.locale;void 0!==u&&(u=u.split(","));var v=this.columnX.length;void 0!=this.dimTitle&&(e=this.dimTitle,n=this.columnX[v-2]+g,void 0!=this.tableWidthPercent&&(25<this.valueColumnWidth&&35>this.valueColumnWidth?(e="...",n-=4):25>=this.valueColumnWidth?(e=".",n-=2):e=this.getEllipsesiedText(e,this.categoryColumnWidth-2*g)),q.fillStyle=this.textShadowColor,m=this.translateCoordinate(n,0),q.fillText(e,m.x,h+1),q.fillStyle=this.textColor,q.fillText(e,
m.x,h));void 0!=this.rowHeader&&(e=this.rowHeader,n=this.columnX[v-1]+g,void 0!=this.tableWidthPercent&&(25<this.valueColumnWidth&&35>this.valueColumnWidth?(e="...",n-=4):25>=this.valueColumnWidth?(e=".",n-=2):e=this.getEllipsesiedText(e,this.valueColumnWidth-2*g)),q.fillStyle=this.textShadowColor,m=this.translateCoordinate(n,0),q.fillText(e,m.x,h+1),q.fillStyle=this.textColor,q.fillText(e,m.x,h));q.fillStyle=this.textColor;var w=this.getCategoryLevelCount(),x;if(0<w)for(x=[],m=0;m<w;m++)x[m]="";
l=b;var A=this.categories.length;q.strokeStyle=this.gridLineColor;for(m=1;m<v;m++)e=this.translateCoordinate(this.columnX[m],0),n=this.translateCoordinate(this.columnX[m],b),this.drawLine(q,e.x,e.y,n.x,n.y);q.strokeStyle=this.separatorLineColor;var y=(A*a-this.firstRow)*f;for(m=1;m<v-1;m++)y>c?(e=this.translateCoordinate(this.columnX[m],b),n=this.translateCoordinate(this.columnX[m],b+c-2)):(e=this.translateCoordinate(this.columnX[m],b),n=this.translateCoordinate(this.columnX[m],b+y)),this.drawLine(q,
e.x,e.y,n.x,n.y);q.strokeStyle=this.gridLineColor;y>c?(e=this.translateCoordinate(this.columnX[v-1],b),n=this.translateCoordinate(this.columnX[v-1],b+c-2)):(e=this.translateCoordinate(this.columnX[v-1],b),n=this.translateCoordinate(this.columnX[v-1],b+y));this.drawLine(q,e.x,e.y,n.x,n.y);e=this.translateCoordinate(0,l);n=this.translateCoordinate(this.tableWidth,l);this.drawLine(q,e.x,e.y,n.x,n.y);var C=Math.floor(this.firstRow/a),c=C*a-1,y=this.firstRow-Math.floor(this.firstRow/a)*a,B;if(this.isWaterfall)for(B=
[],m=0;m<a;m++)B.push(this.getSeries(m).sumBeforeRange);for(var z,E;C<A&&!(l+0.35*f>d);C++)for(z=0;z<a;z++){c++;if(l+0.35*f>d)break;if(!(c<this.firstRow)){k=Math.floor((c-this.firstRow+y)/a);E=k==this.valueBubbleValue?"Bold "+this.fontSize+" "+this.fontFamily:this.fontSize+" "+this.fontFamily;q.font=E;k=this.getSeries(z);p=k.items[C];this.showTotal&&("number"==typeof p.yValue&&!isNaN(p.yValue))&&(B[z]+=p.yValue);if(l==b||0==z)if(void 0!=p.getXValue()&&(e=$MA.format(p.getXValue(),r),void 0!=this.tableWidthPercent&&
(25<this.categoryColumnWidth&&35>this.valueColumnWidth?e="...":25>=this.categoryColumnWidth?e=".":(m=this.categoryColumnWidth-2*g,e=this.getEllipsesiedText(e,m))),q.font=E,m=this.translateCoordinate(this.columnX[v-2]+g,void 0),q.fillText(e,m.x,l+h)),0<w&&(!this.showTotal||this.showTotal&&C<A-1)){var D=this.categories[C].groupValues;if(void 0!=D)for(m=0;m<D.length;m++)if(D[m]!=x[m]){n=this.columnX[D.length-1-m]+g;if(l!=b||this.isCategoryLabelVisible(z,C,m))e=D[m],25>this.vericaLabelWidth&&(e="...",
n-=g),q.font=E,this.drawVerticalText(q,e,n,l+h);x[m]=D[m];e=this.translateCoordinate(this.columnX[D.length-1-m],l);n=this.translateCoordinate(this.columnX[D.length-m],l);this.drawLine(q,e.x,e.y,n.x,n.y)}}m=p.yValue;void 0!=p.valueDisplayText?m=p.valueDisplayText:void 0!=p.yValue&&(m=$MA.format(p.yValue,s,k.locale));e=m;n=this.columnX[v-1]+g;void 0!=this.tableWidthPercent&&(17<this.valueColumnWidth&&35>this.valueColumnWidth?(e="...",n-=4):17>=this.valueColumnWidth?(e=".",n-=2):e=this.getEllipsesiedText(e,
this.valueColumnWidth));q.font=E;void 0!=e&&(m=this.translateCoordinate(n,void 0),q.fillText(e,m.x,l+h));l!=b&&0==z?(q.strokeStyle=this.separatorLineColor,e=this.translateCoordinate(this.columnX[v-2],l)):(q.strokeStyle=this.gridLineColor,e=this.translateCoordinate(this.columnX[v-1],l));n=this.translateCoordinate(this.tableWidth,l);this.drawLine(q,e.x,e.y,n.x,n.y);l+=f}}if(C==A&&z==a&&this.isWaterfall&&this.showTotal&&l<d)for(q.strokeStyle=this.separatorLineColor,e=this.translateCoordinate(0,l),n=
this.translateCoordinate(this.tableWidth,l),this.drawLine(q,e.x,e.y,n.x,n.y),k=Math.floor((++c-this.firstRow+y)/a),q.font=k==this.valueBubbleValue?"Bold "+this.fontSize+" "+this.fontFamily:this.fontSize+" "+this.fontFamily,e=$MA.format($MA.getLocalisation(null,"Total","Total"),r),void 0!=this.tableWidthPercent&&(e=17<this.categoryColumnWidth&&35>this.categoryColumnWidth?"...":17>=this.categoryColumnWidth?".":this.getEllipsesiedText(e,this.categoryColumnWidth)),E=this.fontSize+" "+this.fontFamily,
q.font=E,m=this.translateCoordinate(this.columnX[0]+g,void 0),q.fillText($MA.format($MA.getLocalisation(null,e,e),s),m.x,l+h),q.strokeStyle=this.gridLineColor,z=0;z<a&&l<=d;z++)k=this.getSeries(z),q.measureText($MA.format(isNaN(B[z])?"":B[z],s,u&&u[z])),m=this.translateCoordinate(this.columnX[v-1]+g,void 0),q.fillText($MA.format(isNaN(B[z])?"":B[z],s,k.locale),m.x,l+h),e=this.translateCoordinate(this.columnX[v-1],l),n=this.translateCoordinate(this.tableWidth,l),this.drawLine(q,e.x,e.y,n.x,n.y),l+=
f;q.restore();q.save();l<d&&(q.strokeStyle=this.separatorLineColor,e=this.translateCoordinate(this.columnX[v-1],l),n=this.translateCoordinate(this.tableWidth,l),this.drawLine(q,e.x,e.y,n.x,n.y),z==a&&(e=this.translateCoordinate(this.columnX[v-2],l),n=this.translateCoordinate(this.columnX[v-1],l),this.drawLine(q,e.x,e.y,n.x,n.y),C==A&&(e=this.translateCoordinate(0,l),n=this.translateCoordinate(this.columnX[v-2],l),this.drawLine(q,e.x,e.y,n.x,n.y))));q.restore()}}};
$MA.Graph.TableBarGraphObject.prototype.updateValueBubbleValue=function(a){this.valueBubbleValue=a};
$MA.Graph.TableBarGraphObject.prototype.plotXAxis=function(){var a=this.xAxis;this.primaryAxis&&(a=this.primaryAxis);var b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e=this.tableWidth,f=c/(a.ticLabels.length-1),g=this.context;g.save();g.font=a.displayDef.font.toString();g.strokeStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();g.fillStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();
g.lineWidth=a.primaryLine.width?a.primaryLine.width:this.lineDef;var h,k,l;a.primaryLine.visible&&(k=this.translateCoordinate(e,b),l=this.translateCoordinate(e+c,b),this.drawLine(g,k.x,k.y,l.x,l.y));if(!a.hideValue)for(c=0;c<a.ticLabels.length;c++)a.isLabelVisible(c)&&(h=a.ticLabels[c],h.getTextSize(this.context),k=this.translateCoordinate(e,b),l=this.translateCoordinate(e,b-a.majorTicLength),this.drawLine(g,k.x,k.y,l.x,l.y),k=this.translateCoordinate(e,b-a.majorTicLength),this.context.fillText(h.toString(),
k.x,k.y)),e+=f;g.restore();if(a.majorGridLine&&a.majorGridLine.visible){e=parseInt(this.tableWidth,10);g.save();g.strokeStyle="rgba(176,176,176,0.3)";for(c=0;c<a.ticLabels.length;c++)a.isLabelVisible(c)&&(k=this.translateCoordinate(e,b),l=this.translateCoordinate(e,b+d),this.drawLine(g,k.x,k.y,l.x,l.y)),e+=f;g.restore()}};
$MA.Graph.TableBarGraphObject.prototype.plotX2Axis=function(){if(this.secondaryAxis){var a=this.secondaryAxis,b=a.getMaxStringSize(),c=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),f=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=e+d;this.tableWidth=this.calcTableWidth();var g=f/(a.ticLabels.length-1);this.context.clearRect(0,e,f,b.height+a.majorTicLength+5);var h=this.context;h.save();
h.font=a.displayDef.font.toString();h.strokeStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();h.fillStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();h.lineWidth=a.primaryLine.width?a.primaryLine.width:this.lineDef;var k,l,p;a.primaryLine.visible&&(l=this.translateCoordinate(c,e),p=this.translateCoordinate(c+f,e),this.drawLine(h,l.x,l.y,p.x,p.y));if(!a.hideValue)for(f=0;f<a.ticLabels.length;f++)a.isLabelVisible(f)&&(k=a.ticLabels[f],k.getTextSize(this.context),l=this.translateCoordinate(c,
e),p=this.translateCoordinate(c,e+a.majorTicLength),this.drawLine(h,l.x,l.y,p.x,p.y),l=this.translateCoordinate(c,e+a.majorTicLength+b.height),this.context.fillText(k.toString(),l.x,l.y)),c+=g;h.restore();if(a.majorGridLine&&a.majorGridLine.visible){c=parseInt(this.tableWidth,10);h.save();h.strokeStyle="rgba(176,176,176,0.3)";for(f=0;f<a.ticLabels.length;f++)a.isLabelVisible(f)&&(l=this.translateCoordinate(c,e),p=this.translateCoordinate(c,d),this.drawLine(h,l.x,l.y,p.x,p.y)),c+=g;h.restore()}}};
$MA.Graph.TableBarGraphObject.prototype.drawLine=function(a,b,c,d,e){a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.closePath();a.stroke()};$MA.Graph.TableBarGraphObject.prototype.drawVerticalText=function(a,b,c,d){var e=a.measureText(b);a.save();c=this.translateCoordinate(c,d);"rtl"===this.dir&&(c.x-=20);a.translate(c.x,c.y+e.width);a.rotate(1.5*Math.PI);a.fillText(b,10,14);a.restore()};$MA.Graph.TableBarGraphObject.prototype.calcBarWidth=function(a){return $MA.Graph.TableBarGraphObject.ROWHEIGHT/2};
$MA.Graph.TableBarGraphObject.prototype.calcBarEntryWidth=function(a){return this.getSeriesCount()*$MA.Graph.TableBarGraphObject.ROWHEIGHT};$MA.Graph.TableBarGraphObject.prototype.calcBarGap=function(a){return $MA.Graph.TableBarGraphObject.ROWHEIGHT/4};
$MA.Graph.TableBarGraphObject.prototype.calcDisplayEveryNLabels=function(){var a=[this.primaryAxis,this.secondaryAxis],b=a.length,c;for(c=0;c<b;c++)if(a[c]&&-1!=a[c].labelsEveryN){var d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(0<a[c].calcMajorDivs?a[c].calcMajorDivs:a.DEFAULTMAJORDIVS),e=a[c].getMaxStringSize();e.width+10>d?(d=Math.ceil((e.width+10)/d),a[c].labelsEveryN=d):a[c].labelsEveryN=0}};
$MA.Graph.TableBarGraphObject.prototype.resetDrawObj=function(a){a.incr=a.width/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.width=0};$MA.Graph.TableBarGraphObject.prototype.animateDrawObj=function(a){a.width+=a.incr;a.plotPrimitives()};
$MA.Graph.TableBarGraphObject.prototype.plotGradientRect=function(){var a=this.context;a.save();var b=this.getSeriesCount(),c=this.getNumberOfVisibleCategories()*b;this.isWaterfall&&this.showTotal&&(c+=b);var d,e,b=$MA.Graph.TableBarGraphObject.ROWHEIGHT*(c+1);b>this.height&&(b=this.height,this.legend&&this.legend.location!=$MA.Graph.LegendType.NONE&&(c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),b-=c));d=this.translateCoordinate(0,$MA.BI.ChartTableDataView.ROWHEIGHT);e=this.translateCoordinate(0,
$MA.BI.ChartTableDataView.ROWHEIGHT+7);d=a.createLinearGradient(d.x,d.y,e.x,e.y);d.addColorStop(0,this.beginGridShadowColor);d.addColorStop(1,this.endGridShadowColor);a.fillStyle=d;d=this.getStartPosition(0,$MA.BI.ChartTableDataView.ROWHEIGHT,this.tableWidth);a.fillRect(d.x,d.y,this.tableWidth,7);d=this.translateCoordinate(0,0);e=this.translateCoordinate(7,0);d=a.createLinearGradient(d.x,d.y,e.x,e.y);d.addColorStop(0,this.beginGridShadowColor);d.addColorStop(1,this.endGridShadowColor);a.fillStyle=
d;a.fillRect(0,0,7,b);d=this.getStartPosition(0,0,7);a.fillRect(d.x,d.y,7,b);for(var f=this.columnX.length,c=0;c<f;c++)d=this.translateCoordinate(this.columnX[c],0),e=this.translateCoordinate(this.columnX[c]+7,0),d=a.createLinearGradient(d.x,d.y,e.x,e.y),d.addColorStop(0,this.beginGridShadowColor),d.addColorStop(1,this.endGridShadowColor),a.fillStyle=d,d=this.getStartPosition(this.columnX[c],0,7),a.fillRect(d.x,d.y,7,b);d=this.translateCoordinate(this.tableWidth,0);e=this.translateCoordinate(this.tableWidth+
7,0);d=a.createLinearGradient(d.x,d.y,e.x,e.y);d.addColorStop(0,this.beginGridShadowColor);d.addColorStop(1,this.endGridShadowColor);a.fillStyle=d;d=this.getStartPosition(this.tableWidth,0,7);a.fillRect(d.x,d.y,7,b);a.restore()};$MA.Graph.TableBarGraphObject.prototype.setHorizontalBarHeight=function(a){$MA.Graph.TableBarGraphObject.ROWHEIGHT=a};
$MA.Graph.TableBarGraphObject.prototype.getStyles=function(a){a=$MA.getCSSRule(".chart_table_shadow");void 0!=a&&(""!=a.style.background&&(this.beginGridShadowColor=a.style.background),""!=a.style.color&&(this.endGridShadowColor=a.style.color));a=$MA.getCSSRule(".chart_xaxis");void 0!=a&&(""!=a.style.fontFamily&&this.xAxis.displayDef.font.setFamily(a.style.fontFamily),""!=a.style.fontSize&&this.xAxis.displayDef.font.setSize(a.style.fontSize));a=$MA.getCSSRule(".chart_yaxis");void 0!=a&&(""!=a.style.fontFamily&&
this.yAxis.displayDef.font.setFamily(a.style.fontFamily),""!=a.style.fontSize&&this.yAxis.displayDef.font.setSize(a.style.fontSize))};$MA.Graph.TableBarGraphObject.prototype.getCustomisedFillBrush=function(a,b){};
$MA.Graph.TableBarGraphObject.prototype.getLineStartAndEndPosition=function(a,b,c,d,e,f){var g=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),h=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),h=g+h;if(null==a){if(b.yValue>this.valuesAxis.maxValue||b.yValue<this.valuesAxis.minValue)c=void 0}else a.yValue>this.valuesAxis.maxValue&&b.yValue>this.valuesAxis.maxValue||a.yValue<this.valuesAxis.minValue&&b.yValue<this.valuesAxis.minValue?e=c=void 0:a.yValue>this.valuesAxis.maxValue&&b.yValue<=this.valuesAxis.maxValue&&
b.yValue>=this.valuesAxis.minValue?(f=this.calcCoordinateY(e,f,c,d,h,"right"),e=h):b.yValue>this.valuesAxis.maxValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(d=this.calcCoordinateY(e,f,c,d,h,"right"),c=h):a.yValue<this.valuesAxis.minValue&&b.yValue<=this.valuesAxis.maxValue&&b.yValue>=this.valuesAxis.minValue?(f=this.calcCoordinateY(e,f,c,d,g,"left"),e=g):b.yValue<this.valuesAxis.minValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(d=this.calcCoordinateY(e,
f,c,d,g,"left"),c=g):a.yValue>this.valuesAxis.maxValue&&b.yValue<this.valuesAxis.minValue?(f=this.calcCoordinateY(e,f,c,d,h,"right"),e=h,d=this.calcCoordinateY(e,f,c,d,g,"left"),c=g):a.yValue<this.valuesAxis.minValue&&b.yValue>this.valuesAxis.maxValue&&(f=this.calcCoordinateY(e,f,c,d,g,"left"),e=g,d=this.calcCoordinateY(e,f,c,d,h,"right"),c=h);return{start:{x:e,y:f},end:{x:c,y:d}}};$MA.Graph.TableBarGraphObject.prototype.drawGridsBack=function(){};
$MA.Graph.TableBarGraphObject.prototype.drawXLabel=function(){};$MA.Graph.TableBarGraphObject.prototype.drawYLabel=function(){};$MA.Graph.TableBarGraphObject.prototype.drawGridsFront=function(){};$MA.Graph.TableBarGraphObject.prototype.setGraphLineWidth=function(a){this.graphLineWidth=a};
$MA.Graph.Share=function(a,b,c){function d(a){f.mouseProcess(a);a.preventDefault();a.stopPropagation()}function e(a){0<a.touches.length?f.mouseProcess(a.touches.item(0),a.type):f.mouseProcess(null,a.type);a.preventDefault();a.stopPropagation()}this.tool=null;this.orgCanvas=a;this.orgContext=this.orgCanvas.getContext("2d");this.toolbar=b;this.toolbarCallback=c;b=a.parentNode;this.canvas=document.createElement("canvas");b.appendChild(this.canvas);this.canvas.style.position="absolute";this.canvas.style.left=
"0px";this.canvas.style.top="0px";this.canvas.width=a.width;this.canvas.height=a.height;this.contentImageCanvas=document.createElement("canvas");this.contentImageCanvas.width=this.canvas.width;this.contentImageCanvas.height=this.canvas.height;var f=this;this.canvas.addEventListener("mousedown",function(a){f.mouseProcess(a);a.preventDefault();a.stopPropagation()},!1);this.canvas.addEventListener("mousemove",d,!1);this.canvas.addEventListener("mouseup",d,!1);this.canvas.addEventListener("touchstart",
function(a){0<a.touches.length&&f.mouseProcess(a.touches.item(0),a.type);a.preventDefault();a.stopPropagation()},!1);this.canvas.addEventListener("touchmove",e,!1);this.canvas.addEventListener("touchend",e,!1);this.canvas.onselectstart=function(){return!1};this.context=this.canvas.getContext("2d");this.reset()};
$MA.Graph.Share.prototype.reset=function(){this.history={pos:-1,data:[]};this.selected=-1;this.colors=null;this.color=$MA.Graph.Share.PEN_COLOR;this.contentImageCanvas.getContext("2d").drawImage(this.orgCanvas,0,0)};$MA.Graph.Share.prototype.updateSize=function(){this.canvas.width=this.orgCanvas.width;this.canvas.height=this.orgCanvas.height};$MA.Graph.Share.prototype.getSize=function(){return{w:this.orgCanvas.width,h:this.orgCanvas.height}};$MA.Graph.Share.SELECT_COLOR="blue";
$MA.Graph.Share.PEN_COLOR="red";$MA.Graph.Share.SELECT_SIZE=2;$MA.Graph.Share.TEXT_SIZE=20;var g_maGraphShareMask=null,g_maGraphShareWindow=null,g_maGraphShare=null,g_maGraphShareToolDefault="Pencil",g_maGraphShareImagesFolder="../images/",g_maGraphSharePaddnig=10;
$MA.Graph.Share.show=function(a,b){g_maGraphShareImagesFolder=void 0!=b?b:$MA.imagesFolder;g_maGraphShareMask=document.createElement("div");g_maGraphShareMask.style.position="absolute";g_maGraphShareMask.style.top="0px";g_maGraphShareMask.style.left="0px";g_maGraphShareMask.style.width=window.innerWidth+"px";g_maGraphShareMask.style.height=window.innerHeight+"px";g_maGraphShareMask.style.backgroundColor="black";g_maGraphShareMask.style.opacity=0.6;g_maGraphShareMask.style.filter="alpha(opacity=60)";
g_maGraphShareMask.onselectstart=function(){return!1};document.body.appendChild(g_maGraphShareMask);g_maGraphShareWindow=document.createElement("div");g_maGraphShareWindow.style.zIndex=1E3;g_maGraphShareWindow.style.position="absolute";g_maGraphShareWindow.style.top=g_maGraphSharePaddnig+"px";g_maGraphShareWindow.style.left=g_maGraphSharePaddnig+"px";g_maGraphShareWindow.style.backgroundColor="white";document.body.appendChild(g_maGraphShareWindow);var c=window.innerWidth;g_maGraphShareWindow.innerHTML=
"<div id='g_maToolbar' class='chart_toolbar' style='text-align:center;height:40px;vertical-align:middle;'><h1 style='position:relative;top:4px;'>Chart Sharing</h1><button style='position:absolute;float:left;left:5px;top:4px;margin-left:4px;height:30px;cursor:pointer;' class='chart_button' onclick='javascript:$MA.Graph.Share.hide()'>Close</button><button onclick='javascript:void($MA.Graph.Share.sendMail())' id='g_maSendMailButton' class='chart_button' style='position:relative;float:right;top:3px;margin-right:4px;height:30px;cursor:pointer;display:none'>Send Email</button><button onclick='javascript:void($MA.Graph.Share.saveIt())' id='g_maSaveButton' style='position:absolute;float:right;top:4px;left:"+
(c-68)+"px;margin-right:4px;height:30px;cursor:pointer;' class='chart_button'>Save</button></div><div style='position:relative'><canvas id='g_maPainter'></canvas></div><div id='g_maToolbar2' class='chart_toolbar' style='height:40px;cursor:pointer;'>&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+"undo_d_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maUndoButton' alt='Undo' title='Undo' onclick='javascript:void($MA.Graph.Share.goHistory(-1))' />&nbsp;<img src='"+
g_maGraphShareImagesFolder+"redo_d_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maRedoButton' alt='Redo' title='Redo' onclick='javascript:void($MA.Graph.Share.goHistory(1))' />&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+"move_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maMoveButton' alt='Move' title='Move' onclick='javascript:void($MA.Graph.Share.moveIt(this))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+
"erase_d_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maDeleteButton' alt='Delete' title='Delete' onclick='javascript:void($MA.Graph.Share.deleteIt())' />&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+"colorpicker_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maColorButton' alt='Color Picker' title='Color Picker' onclick='javascript:void($MA.Graph.Share.selectColor())' />&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+
"draw_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maPencilButton' alt='Pencil' title='Pencil' onclick='javascript:void($MA.Graph.Share.selectTool(this, 1))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+"drawline_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maLineButton' alt='Line' title='Line' onclick='javascript:void($MA.Graph.Share.selectTool(this, 2))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+"drawrectangle_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maRectButton' alt='Rectangle' title='Rectangle' onclick='javascript:void($MA.Graph.Share.selectTool(this, 3))' />&nbsp;<img src='"+
g_maGraphShareImagesFolder+"drawcircle_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maEllipseButton' alt='Ellipse' title='Ellipse' onclick='javascript:void($MA.Graph.Share.selectTool(this, 4))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+"annotation_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maTextButton' alt='Text' title='Text' onclick='javascript:void($MA.Graph.Share.selectTool(this, 5))' />&nbsp;&nbsp;</div>";
g_maGraphShareWindow.style.width=window.innerWidth-2*g_maGraphSharePaddnig+"px";g_maGraphShareWindow.style.height=window.innerHeight-2*g_maGraphSharePaddnig+"px";var c=document.getElementById("g_maPainter"),d=document.getElementById("g_maToolbar"),e=document.getElementById("g_maToolbar2");c.width=g_maGraphShareWindow.clientWidth;c.height=g_maGraphShareWindow.clientHeight-d.offsetHeight-e.offsetHeight;a.copyGraphTo(c);g_maGraphShare=new $MA.Graph.Share(c,e,$MA.Graph.Share.toolbarCallback);g_maGraphShare.setTool(g_maGraphShareToolDefault);
$MA.Graph.Share.toolChanged(document.getElementById("g_maPencilButton"));$MA.sendGraphShareMail&&(document.getElementById("g_maSendMailButton").style.display="",document.getElementById("g_maSaveButton").style.display="none")};
$MA.Graph.Share.refresh=function(){if(g_maGraphShareMask){g_maGraphShareMask.style.width=window.innerWidth+"px";g_maGraphShareMask.style.height=window.innerHeight+"px";g_maGraphShareWindow.style.width=window.innerWidth-2*g_maGraphSharePaddnig+"px";g_maGraphShareWindow.style.height=window.innerHeight-2*g_maGraphSharePaddnig+"px";var a=document.getElementById("g_maPainter"),b=document.getElementById("g_maToolbar"),c=document.getElementById("g_maToolbar2");a.width=g_maGraphShareWindow.clientWidth;a.height=
g_maGraphShareWindow.clientHeight-b.offsetHeight-c.offsetHeight;g_maGraphShare.updateSize();g_maGraphShare.refresh()}};$MA.Graph.Share.sendMail=function(){$MA.sendGraphShareMail&&$MA.sendGraphShareMail("g_maPainter")};$MA.Graph.Share.selectTool=function(a,b){var c=g_maGraphShareToolDefault;switch(b){case 1:c="Pencil";break;case 2:c="Line";break;case 3:c="Rect";break;case 4:c="Ellipse";break;case 5:c="Text"}g_maGraphShare.setTool(c);$MA.Graph.Share.toolChanged(a)};
$MA.Graph.Share.toolbarCallback=function(){document.getElementById("g_maDeleteButton").src=-1==g_maGraphShare.selected?g_maGraphShareImagesFolder+"erase_d_BarButtonItem.png":g_maGraphShareImagesFolder+"erase_BarButtonItem.png";var a=document.getElementById("g_maUndoButton");g_maGraphShare.isUndo()?a.src=g_maGraphShareImagesFolder+"undo_BarButtonItem.png":a.src=g_maGraphShareImagesFolder+"undo_d_BarButtonItem.png";a=document.getElementById("g_maRedoButton");g_maGraphShare.isRedo()?a.src=g_maGraphShareImagesFolder+
"redo_BarButtonItem.png":a.src=g_maGraphShareImagesFolder+"redo_d_BarButtonItem.png";document.getElementById("g_maColorButton").style.backgroundColor=g_maGraphShare.color};$MA.Graph.Share.saveIt=function(){var a=document.getElementById("g_maPainter");window.open().location=a.toDataURL()};$MA.Graph.Share.goHistory=function(a){g_maGraphShare.goHistory(a)};$MA.Graph.Share.moveIt=function(a){g_maGraphShare.setMoveTool();$MA.Graph.Share.toolChanged(a)};
$MA.Graph.Share.toolChanged=function(a){document.getElementById("g_maMoveButton").style.borderColor="transparent";document.getElementById("g_maPencilButton").style.borderColor="transparent";document.getElementById("g_maLineButton").style.borderColor="transparent";document.getElementById("g_maRectButton").style.borderColor="transparent";document.getElementById("g_maEllipseButton").style.borderColor="transparent";document.getElementById("g_maTextButton").style.borderColor="transparent";a.style.borderColor=
"red"};$MA.Graph.Share.deleteIt=function(){g_maGraphShare.deleteSelect()};$MA.Graph.Share.selectColor=function(){g_maGraphShare.selectColor(document.getElementById("g_maColorButton"))};$MA.Graph.Share.hide=function(){g_maGraphShareMask&&(g_maGraphShare.hideColor(),document.body.removeChild(g_maGraphShareMask),document.body.removeChild(g_maGraphShareWindow),g_maGraphShareWindow=g_maGraphShareMask=null)};$MA.Graph.Share.prototype.setColor=function(a){this.color=a;this.tool.colorChanged()};
$MA.Graph.Share.prototype.setTool=function(a){null!=this.tool&&this.tool.clear();this.selected=-1;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.refresh();switch(a){case "Pencil":this.tool=new $MA.Graph.Share.Tools.Pencil;break;case "Line":this.tool=new $MA.Graph.Share.Tools.Line;break;case "Rect":this.tool=new $MA.Graph.Share.Tools.Rect;break;case "Ellipse":this.tool=new $MA.Graph.Share.Tools.Ellipse;break;case "Text":this.tool=new $MA.Graph.Share.Tools.Text;break;case "Move":this.tool=
new $MA.Graph.Share.Tools.Move}this.tool.canvas=this.canvas;this.tool.context=this.context;this.tool.share=this;this.tool.init()};$MA.Graph.Share.prototype.setMoveTool=function(){this.setTool("Move")};$MA.Graph.Share.prototype.updateOrg=function(a){a=void 0==a?!0:a;this.orgContext.drawImage(this.canvas,0,0);a&&(this.addHistory(),this.toolbarCallback());this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};
$MA.Graph.Share.prototype.addHistory=function(){this.history.data.length=this.history.pos+1;this.history.data.push(this.tool.getData());this.history.pos++};$MA.Graph.Share.prototype.goHistory=function(a){a=this.history.pos+a;-1<=a&&a<this.history.data.length&&(this.history.pos=a);this.selected>this.history.pos&&(this.selected=-1);this.refresh()};
$MA.Graph.Share.prototype.select=function(a,b){this.selected=-1;var c;for(c=0;c<=this.history.pos;c++){var d=this.getRatioPos(a,b,this.history.data[c].size);if(this.history.data[c].isSelect(d.x,d.y)){this.selected=c;break}}this.refresh()};$MA.Graph.Share.prototype.getRatioPos=function(a,b,c){this.canvas.width!=c.w&&(a*=c.w/this.canvas.width);this.canvas.height!=c.h&&(b*=c.h/this.canvas.height);return{x:a,y:b}};
$MA.Graph.Share.prototype.deleteSelect=function(){-1!=this.selected&&(this.history.data.length=this.history.pos+1,this.history.data.splice(this.selected,1),this.selected>=this.history.data.length&&this.selected--,this.history.pos=this.history.data.length-1,this.refresh())};
$MA.Graph.Share.prototype.refresh=function(){this.orgContext.clearRect(0,0,this.orgCanvas.width,this.orgCanvas.height);this.orgContext.drawImage(this.contentImageCanvas,0,0,this.orgCanvas.width,this.orgCanvas.height);var a;for(a=0;a<=this.history.pos;a++)if(this.history.data[a].draw(this.tool.canvas,this.tool.context),this.updateOrg(!1),this.selected==a){var b=this.history.data[a].getRect();this.orgCanvas.width!=this.history.data[a].size.w&&(b.x*=this.orgCanvas.width/this.history.data[a].size.w,b.w*=
this.orgCanvas.width/this.history.data[a].size.w);this.orgCanvas.height!=this.history.data[a].size.h&&(b.y*=this.orgCanvas.height/this.history.data[a].size.h,b.h*=this.orgCanvas.height/this.history.data[a].size.h);this.drawSelectRect(b)}this.toolbarCallback()};$MA.Graph.Share.prototype.isUndo=function(){return-1<this.history.pos};$MA.Graph.Share.prototype.isRedo=function(){return this.history.pos<this.history.data.length-1};
$MA.Graph.Share.prototype.move=function(a,b,c,d){-1!=this.selected&&(this.history.data[this.selected].move(c-a,d-b),this.refresh())};
$MA.Graph.Share.prototype.drawSelectRect=function(a){var b=this.orgContext.fillStyle;this.orgContext.fillStyle=$MA.Graph.Share.SELECT_COLOR;this.orgContext.fillRect(a.x-$MA.Graph.Share.SELECT_SIZE,a.y-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x+a.w/2-$MA.Graph.Share.SELECT_SIZE,a.y-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x+a.w-$MA.Graph.Share.SELECT_SIZE,
a.y-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x-$MA.Graph.Share.SELECT_SIZE,a.y+a.h/2-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x+a.w-$MA.Graph.Share.SELECT_SIZE,a.y+a.h/2-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x-$MA.Graph.Share.SELECT_SIZE,a.y+a.h-$MA.Graph.Share.SELECT_SIZE,
2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x+a.w/2-$MA.Graph.Share.SELECT_SIZE,a.y+a.h-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillRect(a.x+a.w-$MA.Graph.Share.SELECT_SIZE,a.y+a.h-$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE,2*$MA.Graph.Share.SELECT_SIZE);this.orgContext.fillStyle=b};
$MA.Graph.Share.prototype.mouseProcess=function(a,b){if(a){var c=$MA.getMouseXY(a,this.canvas);a._x=c.x;a._y=c.y}b=void 0==b?a.type:b;switch(b){case "touchstart":this.tool.touchstart(a);break;case "touchmove":this.tool.touchmove(a);break;case "touchend":this.tool.touchend(a);break;case "mousedown":this.tool.mousedown(a);break;case "mousemove":this.tool.mousemove(a);break;case "mouseup":this.tool.mouseup(a)}};
$MA.Graph.Share.prototype.selectColor=function(a){null==this.colors&&(this.colors=new $MA.Graph.Share.Utils.ColorPicker(a),this.colors.init(this));this.colors.isShown()?this.colors.hideColors():this.colors.showColors()};$MA.Graph.Share.prototype.hideColor=function(){this.colors&&this.colors.isShown()&&this.colors.hideColors()};$MA.Graph.Share.Utils={};
$MA.Graph.Share.Utils.getX=function(a){var b=void 0!=a.x?a.x:0,b=void 0!=a.offsetParent?$MA.Graph.Share.Utils.getX(a.offsetParent):b;return a.offsetLeft+b};$MA.Graph.Share.Utils.getY=function(a){var b=void 0!=a.y?a.y:0,b=void 0!=a.offsetParent?$MA.Graph.Share.Utils.getY(a.offsetParent):b;return a.offsetTop+b};
$MA.Graph.Share.Utils.ColorPicker=function(a){function b(){c.selectColor(this.style.backgroundColor)}this.colors="black navy blue green teal lime aqua maroon purple olive gray silver red fuchsia yellow white".split(" ");this.colorDiv=null;this.parentDiv=a;this.share=null;var c=this;this.init=function(a){if(null==this.colorDiv)for(this.share=a,this.colorDiv=document.createElement("div"),this.colorDiv.style.zIndex=2E3,document.body.appendChild(this.colorDiv),a=0;a<this.colors.length;a++){var c=document.createElement("div");
c.style.display="block";c.style.width="30px";c.style.height="30px";c.style.cursor="pointer";c.style.cursor="hand";c.style.backgroundColor=this.colors[a];c.onclick=b;this.colorDiv.appendChild(c)}};this.showColors=function(){var a;for(a=0;a<this.colorDiv.children.length;a++){var b=this.colorDiv.children[a];b.style.border=this.share.color==b.style.backgroundColor?"2px solid red":"1px solid #ccc"}this.colorDiv.style.position="absolute";this.colorDiv.style.left=$MA.Graph.Share.Utils.getX(this.parentDiv)+
"px";this.colorDiv.style.display="block";a=$MA.Graph.Share.Utils.getY(this.parentDiv)+this.parentDiv.offsetHeight;this.colorDiv.style.top=a+this.colorDiv.offsetHeight>window.innerHeight?a-this.parentDiv.offsetHeight-this.colorDiv.offsetHeight+"px":a+"px"};this.hideColors=function(){this.colorDiv.style.display="none"};this.isShown=function(){return"block"==this.colorDiv.style.display};this.selectColor=function(a){this.hideColors();this.share.setColor(a);this.share.toolbarCallback()}};
$MA.Graph.Share.Tools=function(){this.context=this.canvas=null};$MA.Graph.Share.Tools.Data=function(){this.draw=function(a,b){};this.isSelect=function(a,b){return!1}};
$MA.Graph.Share.Tools.PencilData=function(){$MA.Graph.Share.Tools.Data.call(this);this.data=[];this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Pencil).draw(a,b,this)};this.push=function(a){this.data.push(a)};this.getPoint=function(a){return{x:this.data[a][0],y:this.data[a][1]}};this.getSize=function(){return this.data.length};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){var a=Number.MAX_VALUE,b=
Number.MIN_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e;for(e=0;e<this.data.length;e++)this.data[e][0]<a&&(a=this.data[e][0]),this.data[e][0]>b&&(b=this.data[e][0]),this.data[e][1]<c&&(c=this.data[e][1]),this.data[e][1]>d&&(d=this.data[e][1]);return{x:a,y:c,w:b-a,h:d-c}};this.move=function(a,b){var c;for(c=0;c<this.data.length;c++)this.data[c][0]+=a,this.data[c][1]+=b}};
$MA.Graph.Share.Tools.LineData=function(){$MA.Graph.Share.Tools.Data.call(this);this.y1=this.x1=this.y0=this.x0=0;this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Line).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){var a=Math.min(this.x0,this.x1),b=Math.min(this.y0,this.y1),c=Math.abs(this.x1-this.x0),d=Math.abs(this.y1-this.y0);return{x:a,y:b,w:c,h:d}};this.move=function(a,b){this.x0+=
a;this.x1+=a;this.y0+=b;this.y1+=b}};$MA.Graph.Share.Tools.RectData=function(){$MA.Graph.Share.Tools.Data.call(this);this.h=this.w=this.y=this.x=0;this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Rect).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){return this};this.move=function(a,b){this.x+=a;this.y+=b}};
$MA.Graph.Share.Tools.EllipseData=function(){$MA.Graph.Share.Tools.Data.call(this);this.h=this.w=this.y=this.x=0;this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Ellipse).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){return this};this.move=function(a,b){this.x+=a;this.y+=b}};
$MA.Graph.Share.Tools.TextData=function(){$MA.Graph.Share.Tools.Data.call(this);this.context=null;this.y=this.x=0;this.text="";this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Text).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){var a=this.context.measureText(this.text);return{x:this.x,y:this.y,w:a.width,h:$MA.Graph.Share.TEXT_SIZE}};this.move=function(a,b){this.x+=a;this.y+=b}};
$MA.Graph.Share.Tools.Pencil=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.PencilData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.data.color=a.share.color;a.data.size=a.share.getSize();a.context.strokeStyle=a.data.color;a.context.beginPath();a.context.moveTo(b._x,b._y);a.started=!0;a.data.push([b._x,b._y])};this.mousemove=function(b){a.started&&(a.context.lineTo(b._x,
b._y),a.context.stroke(),a.data.push([b._x,b._y]))};this.mouseup=function(b){a.started&&(b&&a.mousemove(b),a.context.closePath(),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.PencilData)};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=1,f=1;a.width!=d.size.w&&(e=a.width/d.size.w);a.height!=d.size.h&&(f=a.height/d.size.h);c.strokeStyle=d.color;c.beginPath();a=d.getPoint(0);c.moveTo(a.x*
e,a.y*f);var g;for(g=1;g<d.getSize();g++)a=d.getPoint(g),c.lineTo(a.x*e,a.y*f),c.stroke();c.closePath()};this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Line=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.LineData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.data.size=a.share.getSize();a.data.x0=b._x;a.data.y0=b._y;a.data.color=a.share.color;a.context.strokeStyle=a.data.color};this.mousemove=function(b){a.started&&(a.data.x1=b._x,a.data.y1=b._y,a.draw(a.canvas,a.context,a.data))};this.mouseup=
function(b){a.started&&(b&&a.mousemove(b),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.LineData)};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=d.x0,f=d.x1,g=d.y0,h=d.y1;a.width!=d.size.w&&(e*=a.width/d.size.w,f*=a.width/d.size.w);a.height!=d.size.h&&(g*=a.height/d.size.h,h*=a.height/d.size.h);c.strokeStyle=d.color;c.beginPath();c.moveTo(e,g);c.lineTo(f,h);c.stroke();c.closePath()};
this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Rect=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.RectData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.data.size=a.share.getSize();a.x0=b._x;a.y0=b._y;a.data.color=a.share.color;a.context.strokeStyle=a.data.color};this.mousemove=function(b){if(a.started){var c=Math.min(b._x,a.x0),d=Math.min(b._y,a.y0),e=Math.abs(b._x-a.x0);b=Math.abs(b._y-
a.y0);a.data.x=c;a.data.y=d;a.data.w=e;a.data.h=b;a.context.clearRect(0,0,a.canvas.width,a.canvas.height);e&&b&&a.context.strokeRect(c,d,e,b)}};this.mouseup=function(b){a.started&&(b&&a.mousemove(b),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.RectData)};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=d.x,f=d.w,g=d.y,h=d.h;a.width!=d.size.w&&(e*=a.width/d.size.w,f*=a.width/
d.size.w);a.height!=d.size.h&&(g*=a.height/d.size.h,h*=a.height/d.size.h);c.strokeStyle=d.color;c.strokeRect(e,g,f,h)};this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Ellipse=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.EllipseData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.data.size=a.share.getSize();a.x0=b._x;a.y0=b._y;a.data.color=a.share.color;a.context.strokeStyle=a.data.color};this.mousemove=function(b){if(a.started){var c=Math.min(b._x,a.x0),d=Math.min(b._y,a.y0),e=Math.abs(b._x-a.x0);
b=Math.abs(b._y-a.y0);a.data.x=c;a.data.y=d;a.data.w=e;a.data.h=b;a.context.clearRect(0,0,a.canvas.width,a.canvas.height);e&&b&&a.draw(a.canvas,a.context,a.data)}};this.mouseup=function(b){a.started&&(b&&a.mousemove(b),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.EllipseData)};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=d.x,f=d.w,g=d.y,h=d.h;a.width!=d.size.w&&(e*=a.width/
d.size.w,f*=a.width/d.size.w);a.height!=d.size.h&&(g*=a.height/d.size.h,h*=a.height/d.size.h);a=0.5522848*(f/2);var k=0.5522848*(h/2),l=e+f,p=g+h,f=e+f/2,h=g+h/2;c.strokeStyle=d.color;c.beginPath();c.moveTo(e,h);c.bezierCurveTo(e,h-k,f-a,g,f,g);c.bezierCurveTo(f+a,g,l,h-k,l,h);c.bezierCurveTo(l,h+k,f+a,p,f,p);c.bezierCurveTo(f-a,p,e,h+k,e,h);c.closePath();c.stroke()};this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Text=function(){var a=this;a.data=new $MA.Graph.Share.Tools.TextData;this.inputText=null;this.defaultFontSize=$MA.Graph.Share.TEXT_SIZE+"px Helvetica";this.y=this.x=0;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.data.context=a.context;a.data.size=a.share.getSize();a.data.color=a.share.color;a.context.fillStyle=a.data.color;a.data.x=b._x;a.data.y=b._y;a.data.text=a.inputText.value;
a.drawText(a.canvas,a.context,a.data)};this.mousemove=function(b){a.context.clearRect(0,0,a.canvas.width,a.canvas.height);a.data.size=a.share.getSize();a.data.x=b._x;a.data.y=b._y;a.data.text=a.inputText.value;a.drawText(a.canvas,a.context,a.data)};this.drawText=function(b,c,d){var e=d.x,f=d.y;b.width!=d.size.w&&(e*=b.width/d.size.w);b.height!=d.size.h&&(f*=b.height/d.size.h);c.fillStyle=d.color;c.font=a.defaultFontSize;c.textBaseline="top";c.fillText(d.text,e,f)};this.mouseup=function(b){a.share.updateOrg();
a.data=new $MA.Graph.Share.Tools.TextData};this.init=function(){function b(b){a.onChangeText(b)}var c=document.createElement("input");c.id="inputText";c.type="text";c.size=15;c.value="Text";a.share.toolbar.appendChild(c);c.addEventListener("input",b,!1);c.addEventListener("change",b,!1);a.inputText=c;a.data.size=a.share.getSize();a.data.color=a.share.color;a.context.fillStyle=a.data.color};this.onChangeText=function(b){a.context.clearRect(0,0,a.canvas.width,a.canvas.height);a.drawText(a.canvas,a.context,
a.data)};this.clear=function(){a.share.toolbar.removeChild(a.inputText);a.inputText=null};this.getData=function(){return a.data};this.draw=function(b,c,d){c.clearRect(0,0,b.width,b.height);a.drawText(b,c,d)};this.colorChanged=function(){a.data.color=a.share.color;a.context.fillStyle=a.data.color}};
$MA.Graph.Share.Tools.Move=function(){var a=this;a.started=!1;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.share.select(b._x,b._y);a.x0=b._x;a.y0=b._y};this.mousemove=function(b){a.started&&(a.share.move(a.x0,a.y0,b._x,b._y),a.x0=b._x,a.y0=b._y)};this.mouseup=function(b){a.started&&(b&&a.mousemove(b),a.started=!1,a.share.updateOrg(!1))};this.init=function(){};this.clear=function(){};
this.colorChanged=function(){}};$MA.BI=function(){};$MA.BI.Object=function(a){this._parent=a};$MA.BI.Object.prototype.getOwner=function(){for(var a=this;null!=a&&!(a instanceof $MA.BI.ChartObject);)a=a._parent;return a};$MA.BI.Object.prototype.getParent=function(){return this._parent};$MA.BI.WhatIfColumn=function(a){$MA.BI.Object.call(this,a);this.max=this.min=this.value=this.variableType=this.displayName=this.name=void 0;this.step=1;this.decimals=2};$MA.BI.WhatIfColumn.NAME=0;
$MA.BI.WhatIfColumn.DISPLAYNAME=1;$MA.BI.WhatIfColumn.VARIABLETYPE=2;$MA.BI.WhatIfColumn.VALUE=3;$MA.BI.WhatIfColumn.MIN=4;$MA.BI.WhatIfColumn.MAX=5;$MA.BI.WhatIfColumn.STEP=6;$MA.BI.WhatIfColumn.DECIMALS=7;$MA.BI.WhatIfColumn.propertyIds={displayname:$MA.BI.WhatIfColumn.DISPLAYNAME,name:$MA.BI.WhatIfColumn.NAME,variabletype:$MA.BI.WhatIfColumn.VARIABLETYPE,value:$MA.BI.WhatIfColumn.VALUE,min:$MA.BI.WhatIfColumn.MIN,max:$MA.BI.WhatIfColumn.MAX,step:$MA.BI.WhatIfColumn.STEP,decimals:$MA.BI.WhatIfColumn.DECIMALS};
$MA.BI.WhatIfColumn.prototype=new $MA.BI.Object;
$MA.BI.WhatIfColumn.prototype.setProperty=function(a,b){var c=$MA.BI.WhatIfColumn.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.BI.WhatIfColumn.DISPLAYNAME:this.displayName=b;break;case $MA.BI.WhatIfColumn.NAME:this.name=b;break;case $MA.BI.WhatIfColumn.VARIABLETYPE:this.variableType=b;break;case $MA.BI.WhatIfColumn.VALUE:this.value=b;break;case $MA.BI.WhatIfColumn.MIN:this.min=b;break;case $MA.BI.WhatIfColumn.MAX:this.max=b;break;case $MA.BI.WhatIfColumn.STEP:this.step=b;
break;case $MA.BI.WhatIfColumn.DECIMALS:this.decimals=b}return!0};
$MA.BI.WhatIfColumn.prototype.getProperty=function(a){a=$MA.BI.WhatIfColumn.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.BI.WhatIfColumn.DISPLAYNAME:return this.displayName;case $MA.BI.WhatIfColumn.NAME:return this.name;case $MA.BI.WhatIfColumn.VARIABLETYPE:return this.variableType;case $MA.BI.WhatIfColumn.VALUE:return this.value;case $MA.BI.WhatIfColumn.MIN:return this.min;case $MA.BI.WhatIfColumn.MAX:return this.max;case $MA.BI.WhatIfColumn.STEP:return this.step;case $MA.BI.WhatIfColumn.DECIMALS:return this.decimals}};
$MA.BI.WhatIfColumns=function(a){$MA.BI.Object.call(this,a);this.columns=[]};$MA.BI.WhatIfColumns.COLUMN=0;$MA.BI.WhatIfColumns.BUILTIN=1;$MA.BI.WhatIfColumns.propertyIds={column:$MA.BI.WhatIfColumns.COLUMN};$MA.BI.WhatIfColumns.prototype=new $MA.BI.Object;$MA.BI.WhatIfColumns.prototype.createObject=function(a){a=$MA.BI.WhatIfColumns.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.BI.WhatIfColumns.COLUMN:b=new $MA.BI.WhatIfColumn(this),this.columns.push(b)}return b};
$MA.BI.ZoomingLevel=function(a){$MA.BI.Object.call(this,a);this.title=this.query=this.categoryColumn=void 0};$MA.BI.ZoomingLevel.CATEGORYCOLUMN=0;$MA.BI.ZoomingLevel.QUERY=1;$MA.BI.ZoomingLevel.TITLE=2;$MA.BI.ZoomingLevel.propertyIds={categorycolumn:$MA.BI.ZoomingLevel.CATEGORYCOLUMN,query:$MA.BI.ZoomingLevel.QUERY,title:$MA.BI.ZoomingLevel.TITLE};$MA.BI.ZoomingLevel.prototype=new $MA.BI.Object;
$MA.BI.ZoomingLevel.prototype.setProperty=function(a,b){var c=$MA.BI.ZoomingLevel.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.BI.ZoomingLevel.CATEGORYCOLUMN:this.categoryColumn=b;break;case $MA.BI.ZoomingLevel.QUERY:this.query=b;break;case $MA.BI.ZoomingLevel.TITLE:this.title=b}return!0};
$MA.BI.ZoomingLevel.prototype.getProperty=function(a){a=$MA.BI.ZoomingLevel.propertyIds[a.toLowerCase()];if(void 0!=a)switch(a){case $MA.BI.ZoomingLevel.CATEGORYCOLUMN:return this.categoryColumn;case $MA.BI.ZoomingLevel.QUERY:return this.query;case $MA.BI.ZoomingLevel.TITLE:return this.title}};$MA.BI.ZoomingLevels=function(a){$MA.BI.Object.call(this,a)};$MA.BI.ZoomingLevels.ZOOMINGLEVEL=0;$MA.BI.ZoomingLevels.propertyIds={zoominglevel:$MA.BI.ZoomingLevels.ZOOMINGLEVEL};
$MA.BI.ZoomingLevels.prototype=new $MA.BI.Object;$MA.BI.ZoomingLevels.prototype.createObject=function(a){a=$MA.BI.ZoomingLevels.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.BI.ZoomingLevels.ZOOMINGLEVEL:b=new $MA.BI.ZoomingLevel(this),this.getOwner().zoomingLevels.push(b)}return b};
$MA.BI.ChartObject=function(a){$MA.BI.Object.call(this,a);this.zoomingLevels=[];this.dataview=this.whatIfColumns=void 0;this.dvObj=new $MA.DataView.DataViewObject(this);this.dvObj.setProperty("Style","graph");this.gob=this.dvObj.createObject("graph");this.level=0;this.seriesFilterValues=this.categoryFilterValues=this.maxVisibleItems=void 0};$MA.BI.ChartObject.ANIMATION=0;$MA.BI.ChartObject.CATEGORY=1;$MA.BI.ChartObject.CHARTTYPE=2;$MA.BI.ChartObject.NAME=3;$MA.BI.ChartObject.QUERY=4;
$MA.BI.ChartObject.SERIES=5;$MA.BI.ChartObject.TITLE=6;$MA.BI.ChartObject.WHATIFCOLUMNS=7;$MA.BI.ChartObject.VALUES=8;$MA.BI.ChartObject.ZOOMINGLEVELS=9;$MA.BI.ChartObject.PIESTYLE=10;$MA.BI.ChartObject.CATEGORIES=11;$MA.BI.ChartObject.LEGEND=12;$MA.BI.ChartObject.SUBGRAPH=13;$MA.BI.ChartObject.SHOWTOTAL=14;$MA.BI.ChartObject.PARENTASTOTAL=15;$MA.BI.ChartObject.SUPPLIEDTOTALS=16;$MA.BI.ChartObject.DIRECTION=17;$MA.BI.ChartObject.SCATTERED=18;
$MA.BI.ChartObject.propertyIds={animation:$MA.BI.ChartObject.ANIMATION,category:$MA.BI.ChartObject.CATEGORY,charttype:$MA.BI.ChartObject.CHARTTYPE,type:$MA.BI.ChartObject.CHARTTYPE,piestyle:$MA.BI.ChartObject.PIESTYLE,name:$MA.BI.ChartObject.NAME,query:$MA.BI.ChartObject.QUERY,series:$MA.BI.ChartObject.SERIES,title:$MA.BI.ChartObject.TITLE,values:$MA.BI.ChartObject.VALUES,whatifcolumns:$MA.BI.ChartObject.WHATIFCOLUMNS,zoominglevels:$MA.BI.ChartObject.ZOOMINGLEVELS,categories:$MA.BI.ChartObject.CATEGORIES,
legend:$MA.BI.ChartObject.LEGEND,chart:$MA.BI.ChartObject.SUBGRAPH,layer:$MA.BI.ChartObject.SUBGRAPH,showtotal:$MA.BI.ChartObject.SHOWTOTAL,parentastotal:$MA.BI.ChartObject.PARENTASTOTAL,suppliedtotals:$MA.BI.ChartObject.SUPPLIEDTOTALS,direction:$MA.BI.ChartObject.DIRECTION,scattered:$MA.BI.ChartObject.SCATTERED};$MA.BI.ChartObject.prototype=new $MA.BI.Object;
$MA.BI.ChartObject.prototype.createObject=function(a){var b=$MA.BI.ChartObject.propertyIds[a.toLowerCase()];if(void 0==b)return null;var c=null;switch(b){case $MA.BI.ChartObject.CATEGORY:case $MA.BI.ChartObject.CATEGORIES:case $MA.BI.ChartObject.SERIES:case $MA.BI.ChartObject.VALUES:case $MA.BI.ChartObject.SUBGRAPH:c=this.gob.createObject(a);break;case $MA.BI.ChartObject.WHATIFCOLUMNS:this.whatIfColumns=c=new $MA.BI.WhatIfColumns(this);break;case $MA.BI.ChartObject.ZOOMINGLEVELS:c=new $MA.BI.ZoomingLevels(this)}return c};
$MA.BI.ChartObject.prototype.setProperty=function(a,b){var c=a.indexOf(".");if(0<c){var d=a.substring(0,c).toLowerCase(),e=a.substring(c+1,a.length),f;if(0==d.indexOf("values["))c=this.getIndex(d),-1!=c&&(f=this.gob.getValueObject(c));else if(0==d.indexOf("categories["))c=this.getIndex(d),-1!=c&&(f=this.gob.getCategoryObject(c));else if(0==d.indexOf("values"))f=this.gob.values;else if("primaryaxis"==d)f=this.gob.getObject("values"),c=e.indexOf("."),e=e.substring(c+1,e.length);else if("secondaryaxis"==
d)f=this.gob.getSecondaryAxis(),c=e.indexOf("."),e=e.substring(c+1,e.length);else if(0==d.indexOf("zoominglevels"))c=this.getIndex(d),-1!=c&&this.zoomingLevels.length>c&&(f=this.zoomingLevels[c]);else if(0==d.indexOf("whatifcolumns"))c=this.getIndex(d),-1!=c&&(void 0!=this.whatIfColumns&&this.whatIfColumns.columns.length>c)&&(f=this.whatIfColumns.columns[c]);else if(f=this.gob.getObject(d),!f&&(f=this.gob.getChildGob(d)))c=e.indexOf("."),0<c&&(d=e.substring(0,c).toLowerCase(),e=e.substring(c+1),0==
d.indexOf("values[")?(c=this.getIndex(d),-1!=c&&(f=f.getValueObject(c))):f=f.getObject(d));return void 0!=f?f.setProperty(e,b):!1}c=$MA.BI.ChartObject.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.BI.ChartObject.CHARTTYPE:case $MA.BI.ChartObject.PIESTYLE:case $MA.BI.ChartObject.ANIMATION:case $MA.BI.ChartObject.LEGEND:case $MA.BI.ChartObject.NAME:case $MA.BI.ChartObject.QUERY:case $MA.BI.ChartObject.TITLE:case $MA.BI.ChartObject.SHOWTOTAL:case $MA.BI.ChartObject.PARENTASTOTAL:case $MA.BI.ChartObject.SUPPLIEDTOTALS:case $MA.BI.ChartObject.DIRECTION:case $MA.BI.ChartObject.SCATTERED:this.gob.setProperty(a,
b)}return!0};$MA.BI.ChartObject.prototype.getIndex=function(a){var b=a.lastIndexOf("["),c=a.lastIndexOf("]");return 0<b&&0<c?(a=a.substring(b+1,c),parseInt(a,10)):-1};
$MA.BI.ChartObject.prototype.getProperty=function(a){var b=a.indexOf(".");if(0<b){var c=a.substring(0,b).toLowerCase();a=a.substring(b+1,a.length);var d;if(0==c.indexOf("values["))b=this.getIndex(c),-1!=b&&(d=this.gob.getValueObject(b));else if(0==c.indexOf("categories["))b=this.getIndex(c),-1!=b&&(d=this.gob.getCategoryObject(b));else if(0==c.indexOf("zoominglevels"))b=this.getIndex(c),-1!=b&&this.zoomingLevels.length>b&&(d=this.zoomingLevels[b]);else if(0==c.indexOf("whatifcolumns"))b=this.getIndex(c),
-1!=b&&(void 0!=this.whatIfColumns&&this.whatIfColumns.columns.length>b)&&(d=this.whatIfColumns.columns[b]);else if("primaryaxis"==c)d=this.gob.getObject("values"),b=a.indexOf("."),a=a.substring(b+1,a.length);else if("secondaryaxis"==c)d=this.gob.getSecondaryAxis(),b=a.indexOf("."),a=a.substring(b+1,a.length);else if(d=this.gob.getObject(c),!d&&(d=this.gob.getChildGob(c)))b=a.indexOf("."),0<b&&(c=a.substring(0,b).toLowerCase(),a=a.substring(b+1),d=d.getObject(c));if(void 0!=d)return d.getProperty(a)}else{b=
$MA.BI.ChartObject.propertyIds[a.toLowerCase()];if(void 0==b)return!1;switch(b){case $MA.BI.ChartObject.CHARTTYPE:case $MA.BI.ChartObject.PIESTYLE:case $MA.BI.ChartObject.ANIMATION:case $MA.BI.ChartObject.LEGEND:case $MA.BI.ChartObject.NAME:case $MA.BI.ChartObject.QUERY:case $MA.BI.ChartObject.TITLE:case $MA.BI.ChartObject.SHOWTOTAL:case $MA.BI.ChartObject.PARENTASTOTAL:case $MA.BI.ChartObject.SUPPLIEDTOTALS:return this.gob.getProperty(a)}}};$MA.BI.ChartObject.prototype.getChartType=function(){return this.gob.getChartType()};
$MA.BI.ChartObject.prototype.getQuery=function(){return this.gob.getQueries()};$MA.BI.ChartObject.prototype.retrieve=function(a){var b=this._parent;this.retrievingFlag=!0;b.trigger("retrievestart",b.id);if(b=window.executeMAQuery)if(a instanceof Array){var c,d=a.length;for(c=0;c<d;c++)b(this,a[c].query,this.filterValues,a[c].name)}else b(this,a,this.filterValues)};
$MA.BI.ChartObject.prototype.setDataTable=function(a,b){void 0!=a?($MA.log.debug($MA.TRACE_LEVEL1,"$MA.BI.ChartObject.setDataTable "+$MA.getLocalisation(null,"Start","Start")+" "+$MA.getLocalisation(null,"No_Of_Rows","No.Of.Rows")+": "+a.table.displayBuffer.length+$MA.getLocalisation(null,"GraphName"," Graph Name")+": "+b),this.dvObj.setTable(a.getTable(),b),this.resetDataTable(a,b),a.setCallBack(this)):$MA.log.debug($MA.TRACE_LEVEL1,"$MA.BI.ChartObject.setDataTable "+$MA.getLocalisation(null,"Start",
"Start")+" "+$MA.getLocalisation(null,"Data_Table_Undefined","Data Table Undefined ")+$MA.getLocalisation(null,"GraphName","Graph Name")+": "+b);$MA.log.debug($MA.TRACE_LEVEL1,"$MA.BI.ChartObject.setDataTable"+$MA.getLocalisation(null,"End"," End"))};
$MA.BI.ChartObject.prototype.resetDataTable=function(a,b){var c=this._parent,d=this.dvObj.getGraphGob().getChildGob(b),e=d.getTable();this.dvObj.setTableSortOrder(b);var f=d.getCategoryCount();d.resetExprs();var g;if(0<this.zoomingLevels.length)for(g=this.zoomingLevels[this.level].categoryColumn,d.setCategoryExpr(d.parseExpr(this.dvObj,g)),f=this.level-1;0<=f;f--)d.addGroupExpr(d.parseExpr(this.dvObj,this.zoomingLevels[f].categoryColumn));else if(1<f)for(d.setCategoryExpr(d.parseExpr(this.dvObj,d.getCategoryColumn(f-
1))),f-=2;0<=f;f--)d.addGroupExpr(d.parseExpr(this.dvObj,d.getCategoryColumn(f)));else d.setCategoryExpr();g=d.getValueCount();for(f=0;f<g;f++){var h=d.getValueObject(f).getProperty("Expression");this.dvObj.currentGraph=b;d.setValueExpr(f,d.parseExpr(this.dvObj,h))}d.getObject("Series")&&(f=d.getObject("Series").column,d.setSeriesExpr(d.parseExpr(this.dvObj,f)));0==this.zoomingLevels.length&&(c.chartView&&"bubble"==this.getChartType())&&(f=c.chartView.getGraph(),g=d.getObject("Category").getProperty("Column"),
g=this.dvObj.getTableColumn(g))&&(d=d.getProperty("scattered"),f.setDataScattered(d||g.type==$MA.TableColumnType.NUMBER));0<e.getRowCount()&&(c.trigger("retrieveend",c.id),this.retrievingFlag=!1)};$MA.BI.ChartObject.prototype.refresh=function(){var a=this._parent;a.chartView&&(this.retrievingFlag&&(a.trigger("retrieveend",a.id),this.retrievingFlag=!1),void 0==a.chartView.refreshAction&&(a.chartView.refreshAction="initialize"));a.refresh()};$MA.BI.ChartObject.prototype.getNumberOfZoomingLevels=function(){return this.zoomingLevels.length};
$MA.BI.DrillDownObject=function(a){$MA.BI.Object.call(this,a);this.chartObjs=[]};$MA.BI.DrillDownObject.CHART=0;$MA.BI.DrillDownObject.propertyIds={chart:$MA.BI.DrillDownObject.CHART};$MA.BI.DrillDownObject.prototype=new $MA.BI.Object;$MA.BI.DrillDownObject.prototype.createObject=function(a){a=$MA.BI.DrillDownObject.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.BI.DrillDownObject.CHART:b=new $MA.BI.ChartObject,this.chartObjs.push(b)}return b};
$MA.BI.SimpleChartView=function(a,b){this.id=a;this.graphViewElem=this.titleBarElem=void 0;this.lastTouchEvent=new Date;this.chartObj=b;this.isDataChanged=!1;this.orientation=window.orientation;this.selectedCategoryValue="";this.selectedCategoryGroup=[];this.selectedCategoryIndex=0;(this.elem=document.getElementById(a))&&this.elem.addEventListener("touchstart",this.onChartTouchStart,!1)};$MA.BI.SimpleChartView.TITLEBAR_HEIGHT=28;$MA.BI.SimpleChartView.BUBBLE_VALUE_HEIGHT=25;
$MA.BI.SimpleChartView.CLICK_TOLERANCE=3;$MA.BI.SimpleChartView.prototype.onChartTouchStart=function(a){(a.srcElement.id==this.id||a.srcElement instanceof HTMLCanvasElement)&&document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")};$MA.BI.SimpleChartView.getOwner=function(a){for(;a&&void 0==a.macontrol;)a=a.parentNode;return a};
$MA.BI.SimpleChartView.prototype.createTitleBar=function(a){var b=document.createElement("div");b.id=this.id+"_title";b.style.position="relative";b.style.width="100%";b.style.height=$MA.BI.SimpleChartView.TITLEBAR_HEIGHT+"px";b.style.borderTop="1px";b.style.borderBottom="1px";b.className="chart_titlebar";var c=$MA.getCSSRule(".chart_titlebar");void 0==c&&(b.style.background="#008FD3");var d=document.createElement("label");d.style.position="absolute";d.style.top="5px";d.style.left="5px";d.className=
"chart_title";c=$MA.getCSSRule(".chart_titlebar > .chart_title");void 0==c&&(d.style.color="#FFFFFF");d.style.height="100%";d.style.fontSize="12px";b.appendChild(d);d=document.createElement("canvas");d.style.cssFloat="right";d.width=$MA.BI.SimpleChartView.TITLEBAR_HEIGHT;d.height=$MA.BI.SimpleChartView.TITLEBAR_HEIGHT;d.className="fullscreen_icon";$MA.isTouchEventSupported?d.addEventListener("touchend",this.maximize,!1):d.addEventListener("mousedown",this.maximize,!1);var e=d.getContext?d.getContext("2d"):
null,c=$MA.getCSSRule(".chart_titlebar > .fullscreen_icon");void 0==c&&(e.strokeStyle="#FFFFFF",e.rect(3,3,$MA.BI.SimpleChartView.TITLEBAR_HEIGHT-8,$MA.BI.SimpleChartView.TITLEBAR_HEIGHT-8),e.stroke());b.appendChild(d);a.appendChild(b);this.titleBarElem=b};
$MA.BI.SimpleChartView.prototype.maximize=function(a){a=$MA.BI.SimpleChartView.getOwner(a.target);if(void 0!=a&&0!=a.offsetHeight){a=$MA.BI.SimpleChartView.getChartView(a);var b=a.chartObj._parent;if($MA.isTouchEventSupported){var c=new Date;500<c.getTime()-a.lastTouchEvent.getTime()&&(b.trigger("maximize",{id:a.id}),a.lastTouchEvent=c)}else b.trigger("maximize",{id:a.id})}};
$MA.BI.SimpleChartView.prototype.createGraphView=function(a){var b=document.createElement("div");b.id=this.id+"_graph";b.style.position="relative";b.style.width=this.getGraphViewWidth(a);b.style.height=this.getGraphViewHeight(a);b.className="chart";a.appendChild(b);this.graphViewElem=b;new $MA.DataView(b.id)};$MA.BI.SimpleChartView.prototype.getChart=function(){return this.elem.macontrol};$MA.BI.SimpleChartView.getChart=function(a){return a.macontrol};$MA.BI.SimpleChartView.getChartView=function(a){return $MA.BI.SimpleChartView.getChart(a).chartView};
$MA.BI.SimpleChartView.prototype.getGraphView=function(){return this.graphViewElem.macontrol};$MA.BI.SimpleChartView.prototype.refreshGraphView=function(){this.getGraphView().refresh()};$MA.BI.SimpleChartView.prototype.refreshGraphData=function(){this.getGraphView().refreshData()};$MA.BI.SimpleChartView.prototype.redrawGraphView=function(){var a=this.getGraphElem();this.getGraph().redraw(a)};$MA.BI.SimpleChartView.prototype.getGraphGob=function(){return this.getGraphView().dvObj.getGraphGob()};
$MA.BI.SimpleChartView.prototype.getGraphElem=function(){return this.graphViewElem.children[0]};$MA.BI.SimpleChartView.prototype.getGraph=function(){return this.getGraphElem().macontrol};$MA.BI.SimpleChartView.prototype.getGraphViewHeight=function(a){return void 0==this.titleBarElem?a.offsetHeight+"px":a.offsetHeight-$MA.BI.SimpleChartView.TITLEBAR_HEIGHT+"px"};$MA.BI.SimpleChartView.prototype.getGraphViewWidth=function(a){return"100%"};$MA.BI.SimpleChartView.prototype.getTableView=function(){return this.tableViewElem.macontrol};
$MA.BI.SimpleChartView.prototype.getRangeSelectorView=function(){return this.rangeSelectorViewElem.macontrol};$MA.BI.SimpleChartView.prototype.getRangeSelectorTextView=function(){var a=null,b=this.rangeSelectorViewElem;b&&b.textElem&&(a=b.textElem.macontrol);return a};$MA.BI.SimpleChartView.prototype.setTitle=function(a){this.titleBarElem&&(this.titleBarElem.children[0].innerHTML=a)};$MA.BI.SimpleChartView.prototype.setLegend=function(a){this.getGraph().setLegendProperty("legend",a)};
$MA.BI.SimpleChartView.prototype.setLegendOffset=function(a,b){this instanceof $MA.BI.PieChartView&&this.getGraph().setLegendProperty("LegendOffset",[a,b])};$MA.BI.SimpleChartView.prototype.setDataPointsColor=function(a,b){this.getGraph().setProperty("DataPointsColor",a,b)};$MA.BI.SimpleChartView.prototype.getProperty=function(a){return this.chartObj.getProperty(a)};$MA.BI.SimpleChartView.prototype.getSelectedCategory=function(){return this.selectedCategoryValue};
$MA.BI.SimpleChartView.prototype.getSelectedCategoryGroup=function(){return this.selectedCategoryGroup};$MA.BI.SimpleChartView.prototype.getSelectedSeries=function(a){var b=this.selectedSeriesName.length;if(void 0!=a){var c;for(c=0;c<b;c++)if(this.selectedSeriesName[c].chartName==a)return this.selectedSeriesName[c].seriesName}else if(0<b)return this.selectedSeriesName[0].seriesName};$MA.BI.SimpleChartView.prototype.getFirstItem=function(){return this.getGraphGob().getFirstItem()};
$MA.BI.SimpleChartView.prototype.setFirstItem=function(a){this.getGraphGob().setFirstItem(a)};$MA.BI.SimpleChartView.prototype.getMaxItems=function(){return this.getGraphGob().getMaxItems()};$MA.BI.SimpleChartView.prototype.setMaxItems=function(a){this.getGraphGob().setMaxItems(a)};$MA.BI.SimpleChartView.prototype.getSelectedCategoryIndexRel=function(){return this.selectedCategoryIndex-this.getGraphGob().getFirstItem()};$MA.BI.SimpleChartView.prototype.getSelectedCategoryIndex=function(){return this.selectedCategoryIndex};
$MA.BI.SimpleChartView.prototype.setSelectedCategoryIndex=function(a,b){var c,d;c=this.getGraphGob();b&&0<c.getMaxItems()&&(d=c.getFirstItem(),c=d+c.getMaxItems()-1,a<d?a=d:a>c&&(a=c));this.selectedCategoryIndex=a};$MA.BI.SimpleChartView.prototype.refreshSelectedCategoryIndex=function(){this.setSelectedCategoryIndex(this.selectedCategoryIndex,!0)};
$MA.BI.SimpleChartView.prototype.retrieve=function(a){var b=this.chartObj,c=b.dvObj;if(a){var d=c.getGraphGob();d.setFirstItem(0);d.setMaxItems();c.setTableBuffer("display",[]);this.categoryList=void 0;this.isDataChanged=!0;this.refreshAction="initialize";b.retrieve(a);0!=c.getRowCount()&&this.refreshAsync()}};
$MA.BI.SimpleChartView.prototype.setPalette=function(a,b){void 0!=b&&"secondaryaxis"==b.toLowerCase()?this.secondaryAxisPalette=a:void 0==b||"primaryaxis"==b.toLowerCase()?this.primaryAxisPalette=a:this.getGraph().setProperty("Palette",[a,b]);this.refreshAction="initialize"};
$MA.BI.SimpleChartView.prototype.setProperty=function(a,b){if(this.chartObj.setProperty(a,b)){var c=a.indexOf(".");if(0<c){var d=a.substring(0,c).toLowerCase(),c=a.substring(c+1,a.length);if(0===d.indexOf("category")||0===d.indexOf("series"))"sortorder"==c&&(this.chartObj.resetDataTable(),this.refreshAction="initialize"),this.refreshAsync();else if(0==d.indexOf("zoominglevels")){var d=a.lastIndexOf("["),e=a.lastIndexOf("]"),d=a.substring(d+1,e),d=parseInt(d,10);"query"==c&&d==this.chartObj.level?
this.retrieve(b):"categorycolumn"==c&&d==this.chartObj.level?(c=this.getGraphGob(),d=this.getGraphView(),c.setCategoryExpr(c.parseExpr(d.dvObj,b)),this.refreshAsync()):"title"==c&&(document.getElementById(this.id+"_toolbar_sz_"+d).innerHTML=b)}else this.refreshAsync()}else"query"==a?this.retrieve(b):"title"==a?this.setTitle(b):"legend"==a&&this.refreshAsync();return!0}return!1};
$MA.BI.SimpleChartView.prototype.triggerTapEvent=function(a){if(a.target==this.valueBubbleViewElem){var b;if(a.changedTouches){var c=a.changedTouches.item(0);b=$MA.getMouseXY(c,a.srcElement)}else b=$MA.getMouseXY(a);c=b.x+this.valueBubbleViewElem.offsetLeft;b=b.y+this.valueBubbleViewElem.offsetTop;var d=this.getGraph(),e=this.getValueBubbleObject(),c=d.getObjectAtPointer(c,b,e.value);this.fillSelectedValues(c);void 0!=this.longPressPos&&(this.abortLongPress(),c=this.chartObj._parent,c.trigger("tap",
{id:c.id,eventObject:a}))}};$MA.BI.SimpleChartView.prototype.stopEvent=function(a){};$MA.BI.SimpleChartView.prototype.getEventPos=function(a,b){var c=void 0!==a.offsetX?a.offsetX:a.layerX,d=void 0!==a.offsetY?a.offsetY:a.layerY;b&&void 0==a.target.vbObj&&(c-=this.valueBubbleViewElem.offsetLeft,d-=this.valueBubbleViewElem.offsetTop);return{x:c,y:d}};
$MA.BI.SimpleChartView.prototype.onMouseDown=function(a){var b=this.getGraph(),c=this.getEventPos(a);this.tappedInLegend=this.startY=this.startX=void 0;if(void 0==a.target.vbObj)b.pointInLegend(c.x,c.y)&&(this.startX=c.x,this.startY=c.y,this.tappedInLegend=!0);else if(!b.getGraphObj().suppliedTotals||b.getGraphObj().drawObjects.length)this.valueBubbleViewElem.style.display="",this.clickValueBubble(this,c.x,c.y,a.clientX,a.clientY,!0,this.elem);this.stopEvent(a)};
$MA.BI.SimpleChartView.prototype.onMouseMove=function(a){var b=this.getEventPos(a),c=this.getGraph();if(this.tappedInLegend){var d=this.startX-b.x,e=this.startY-b.y;if(Math.abs(d)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)c.doScrollLegend(d,e),this.startX=b.x,this.startY=b.y,this.legendScrolling=!0}else a.target.vbObj&&(c=this.getValueBubbleObject(),d=b.x,b=b.y,c.dragging?this.moveValueBubble(d,b,a.clientX,a.clientY,this.elem):c.scrolling&&void 0!=
c.doScroll&&c.doScroll(d,b));this.stopEvent(a)};
$MA.BI.SimpleChartView.prototype.onMouseUp=function(a){var b=this.getGraph(),c=this.getValueBubbleObject();if(this.legendScrolling)this.tappedInLegend=this.legendScrolling=!1;else if(this.tappedInLegend)b.selectLegend(this.startX,this.startY),c.plot(),this.refreshChartViews(),this.startY=this.startX=this.tappedInLegend=void 0;else{var d;b.isDataScattered()?void 0!=c.value&&0<c.value.length&&(d=c.value[0].ItemNumber):d=c.value;this.selectedCategoryValue=b.getCategoryValue(d);this.selectedCategoryGroup=
b.getCategoryList(d,!0);this.setSelectedCategoryIndex(this.getGraphGob().getFirstItem()+d);this.targetIsSlider||this.triggerTapEvent(a);this.targetIsSlider=!1;d=this.getEventPos(a);var e=d.x,f=d.y;d=b.getSeriesList();var g;g=c.legends?c.legends.length:0;var h=this.getGraphGob();if(void 0!=c.onMouseUp&&c.onMouseUp(e,f)){for(e=0;e<g;++e)f=c.legends[e],b.setSeriesState(f.seriesValue,f.isEnabled(),f.graphObjIndex),b.setLegendState(f.seriesValue,f.isEnabled(),f.graphObjIndex);this.refreshChartViews();
if(0<=b.graphType.indexOf("percent"))for(c.text=b.getDataString(c.value,h.getValueFormat(0)),f=c.text.split("\n"),c.reset(),c.categoryText=b.getCategoryString(c.value),c.categoryDisplayText=b.getCategoryDisplayText(c.value),e=0;e<d.length;++e){g=d[e];var k=b.getSeriesString(g);c.addLegend(g,k,f[e],b.getSeriesFillBrush(e),g.isEnabled(),c.categoryText)}c.plot()}c.scrolling&&(c.scrolling=!1);c.dragging&&(b.isDataScattered()?(c.currentX=c.value[0].LocX-c.dataX,c.dragging=!1):(c.update(),c.text=b.getDataString(c.value,
h.getValueFormat(0))),c.plot())}this.updateWhatIfVariableControls&&"function"===typeof this.updateWhatIfVariableControls&&this.updateWhatIfVariableControls();this.stopEvent(a)};
$MA.BI.SimpleChartView.prototype.onDblClick=function(a){var b=this.getGraph();if(a.target==this.valueBubbleViewElem){var c=void 0!=a.offsetX?a.offsetX:a.layerX;a=void 0!=a.offsetY?a.offsetY:a.layerY;c+=this.valueBubbleViewElem.offsetLeft;a+=this.valueBubbleViewElem.offsetTop;var d=this.getValueBubbleObject(),b=b.getObjectAtPointer(c,a,d.value);this.fillSelectedValues(b);0<b.length&&this.setDrillDown(b[0].drawObj)}};
$MA.BI.SimpleChartView.prototype.initializeCSS=function(){var a=$MA.getCSSRule(".chart"),b=document.getElementById(this.id);void 0==a&&""==b.style.background&&(b.style.background="white");var c=this.getGraph(),d=0,d="Helvetica";a&&(""!=a.style.backgroundColor&&(b.style.background=a.style.backgroundColor),""!=a.style.color&&(d=a.style.color,c.setProperty("FontBrush",new $MA.Brush(d))),""!=a.style.fontFamily&&(d=a.style.fontFamily,c.setProperty("Font",d)));if("tablebar"==this.getGraphGob().graphType){if(a=
$MA.getCSSRule(".chart_table"))""!=a.style.fontSize&&c.setTableStyle("fontSize",a.style.fontSize),""!=a.style.fontFamily&&c.setTableStyle("fontFamily",a.style.fontFamily),""!=a.style.color&&c.setTableStyle("textColor",a.style.color);(a=$MA.getCSSRule(".chart_table_dimension_title"))&&""!=a.style.backgroundColor&&c.setTableStyle("dimensionTitle",a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_row_header"))&&""!=a.style.backgroundColor&&c.setTableStyle("rowHeader",a.style.backgroundColor);
(a=$MA.getCSSRule(".chart_table_column_headers"))&&""!=a.style.backgroundColor&&c.setTableStyle("columnHeaders",a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_contents"))&&""!=a.style.backgroundColor&&c.setTableStyle("contents",a.style.backgroundColor)}};
$MA.BI.SimpleChartView.prototype.applyWaterfallStyle=function(){var a=this.getGraph(),b=a.graphType.indexOf("waterfall");if(0<=b){var c=this.getGraphGob(),d={};0<=b&&(d.showTotal=c.showTotal);0==a.graphType.indexOf("hierarchy")&&(d.parentAsTotal=c.parentAsTotal);a.getGraphObj().applyWaterfallStyle(d)}};
$MA.BI.SimpleChartView.prototype.initialize=function(){var a=this.getGraph();a.setProperty("Title","");a.setValueBubbleProperty("ValueBubbleHeight",0);"pie"!=a.graphType&&"donut"!=a.graphType&&a.setLegendProperty("legend","none");a.setMajorTicType("category","none");a.setPrimaryLine("values",!1);a.setMajorGridLine("values",!0);a.setAxisLineBrush("values","majorgrid",new $MA.Brush(15198183));a.setProperty("Animation",!1);a.setLegendProperty("legend",this.getProperty("legend"));var b=this;a.bind("draw",
function(){b.chartObj._parent.trigger("draw",{id:b.id})});this.applyWaterfallStyle();this.initializeCSS();var c=this.getGraphGob();this.setTitle(c.title);this.applyValueAxisCustomisation(a,c);1<c.getCategoryCount()&&a.groupCategory(!0);a=this.getGraphView();this.refreshAction="initialize";0<a.dvObj.getRowCount()&&this.refreshAsync()};$MA.BI.SimpleChartView.prototype.reset=function(){this.graphViewElem=this.titleBarViewElem=null};$MA.BI.SimpleChartView.prototype.refreshAsync=function(a){this.chartObj._parent.refresh(a)};
$MA.BI.SimpleChartView.prototype.refresh=function(){var a=document.getElementById(this.id);if(void 0!=a){var b=$MA.BI.SimpleChartView.getChart(a);b.trigger("renderstart");if(this.refreshAction){var c=this.getGraphView().dvObj,d=this.getGraphGob();c.initializeGraphData([d.getCategoryColumn()],d.getSeriesColumn());this.refreshAction=void 0}this.graphViewElem.style.width=this.getGraphViewWidth(a);this.graphViewElem.style.height=this.getGraphViewHeight(a);this.refreshGraphView();b.trigger("renderend")}};
$MA.BI.SimpleChartView.prototype.applyCSS=function(){this.initializeCSS();this.getTableView().getStyles();this.valueBubbleViewElem&&this.valueBubbleViewElem.vbObj.getStyles();this.rangeSelectorViewElem&&this.getRangeSelector().getStyles();this.refresh()};$MA.BI.SimpleChartView.prototype.getRangeSelector=function(){if(this.rangeSelectorViewElem)return this.rangeSelectorViewElem.rangeSelector};
$MA.BI.SimpleChartView.prototype.setRangeSelector=function(a){this.rangeSelectorViewElem&&(this.rangeSelectorViewElem.rangeSelector=a)};$MA.BI.SimpleChartView.prototype.getRangeSelectorCanvasElem=function(){var a=this.rangeSelectorViewElem;if(a)return a.macontrol.getElement("canvas_1")};$MA.BI.SimpleChartView.prototype.getRangeSelectorTextCanvasElem=function(){var a=this.rangeSelectorViewElem;if(a&&a.textElem)return a.textElem.macontrol.getElement("canvas_1")};
$MA.BI.SimpleChartView.prototype.applyValueAxisCustomisation=function(a,b){var c=b.getChildrenCount(),d,e;if(0<c){var f;for(f=0;f<c;f++)d=b.getChildGob(f),e=d.getObject("values"),e=e.getProperty("secondaryAxis"),d=d.getName(),e?a.setProperty("Palette",[this.secondaryAxisPalette,"secondaryaxis"],d):a.setProperty("Palette",[this.primaryAxisPalette,"primaryaxis"],d)}else d=a.getGraphObj().name,(e=b.getObject("Values").getProperty("secondaryAxis"))?a.setProperty("Palette",[this.secondaryAxisPalette,"secondaryaxis"],
d):a.setProperty("Palette",[this.primaryAxisPalette,"primaryaxis"],d)};$MA.BI.SimpleChartView.prototype.refreshChartViews=function(){this.rangeSelectorViewElem&&this.showRangeSelectorFlag?this.refreshRangeSelectorView():this.refreshGraphView()};$MA.BI.SimpleChartView.prototype.getChartType=function(){return this.chartObj.getChartType()};$MA.BI.SimpleChartView.prototype.setMonoColor=function(a){this.getGraph().setProperty("MonoColor",a)};$MA.BI.SimpleChartView.getSelectedBubbleInfo=function(){};
$MA.BI.SimpleChartView.prototype.setHorizontalBarHeight=function(a){void 0==a||(null==a||isNaN(a)||0>=a)||(this.getGraph().setProperty("HorizontalBarHeight",a),this.refreshAsync(!1))};$MA.BI.SimpleChartView.prototype.getNumberOfVisibleCategories=function(){return this.getGraph().getProperty("NumberOfVisibleCategories")};$MA.BI.SimpleChartView.prototype.setShowDotsWidth=function(a){void 0==a||(null==a||isNaN(a)||0>a)||(this.getGraph().setProperty("ShowDotsWidth",a),this.refreshAsync(!1))};
$MA.BI.SimpleChartView.prototype.fillSelectedValues=function(a){var b,c,d=a.length;this.selectedSeriesName=[];this.selectedCategoryGroup=this.selectedCategoryValue=void 0;var e={};for(b=0;b<d;b++)c=a[b],e=c.name,c=c.drawObj,null!=c&&c.item&&(c.item.parentSeries&&(e={chartName:e,seriesName:c.item.parentSeries.name},this.selectedSeriesName.push(e)),void 0==this.selectedCategoryValue&&c.item.category&&(this.selectedCategoryValue=c.item.category.value),void 0==this.selectedCategoryGroup&&c.item.category&&
(this.selectedCategoryGroup=this.getGraph().getCategoryList(c.item.category,!1)))};$MA.BI.ChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);this.toolBarTableBtnId=this.toolBarElem=this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.rangeSelectorViewElem=void 0;this.showRangeSelectorFlag=!0;this.isZoomingLevelChanged=this.isToggleTableMode=!1;this.isDrillLevelChanged=!0;this.graphViewWidth=0;this.legendIconShape="square";this.dir=$MA.dir};
$MA.BI.ChartView.prototype=new $MA.BI.SimpleChartView;$MA.BI.ChartView.RANGESELECTOR_HEIGHT=70;$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT=20;$MA.BI.ChartView.TOOLBAR_HEIGHT=40;$MA.BI.ChartView.touchTimeSlot=100;$MA.BI.ChartView.LONGPRESS_TIMEOUT=2E3;$MA.BI.ChartView.LONGPRESS_THRESHOLD=100;$MA.BI.ChartView.overrideDefaultSettings=function(){"small"==$MA.screenSize&&($MA.BI.ChartView.RANGESELECTOR_HEIGHT=50)};$MA.BI.ChartView.overrideDefaultSettings();
$MA.BI.ChartView.prototype.createToolBar=function(a){function b(a){e.onSemanticZooming(a)}var c=$MA.isTouchEventSupported?"touchend":"click",d=document.createElement("div");d.style.position="relative";d.id=this.id+"_toolbar";d.style.width="100%";d.style.height=$MA.BI.ChartView.TOOLBAR_HEIGHT+"px";d.className="chart_toolbar";var e=this,f;f=$MA.BI.SimpleChartView.getChart(a);f.events&&f.events.get("chartshared")&&(f=document.createElement("button"),f.id=d.id+"_share",f.setAttribute("type","button"),
f.style.position="relative",f.style.cssFloat="ltr"===this.dir?"right":"left",f.style.top="4px","ltr"===this.dir?f.style.marginRight="4px":f.style.marginLeft="4px",f.style.height="30px",f.className="share_button",f.style.zIndex="10",f.style.width="30px",f.addEventListener(c,function(a){e.onClickedShare(a)},!1),d.appendChild(f));f=document.createElement("button");f.id=d.id+"_table";this.toolBarTableBtnId=f.id;f.setAttribute("type","button");f.style.position="relative";f.style.cssFloat="ltr"===this.dir?
"right":"left";f.style.top="4px";"ltr"===this.dir?f.style.marginRight="4px":f.style.marginLeft="4px";f.style.height="30px";f.className="table_button";f.style.zIndex="10";f.style.width="30px";f.addEventListener(c,function(a){e.onToggleTable(a)},!1);d.appendChild(f);this instanceof $MA.BI.BarChartView&&(f=document.createElement("button"),f.id=d.id+"_rangeselector",f.setAttribute("type","button"),f.style.position="relative",f.style.cssFloat="ltr"===this.dir?"right":"left",f.style.top="4px","ltr"===this.dir?
f.style.marginRight="4px":f.style.marginLeft="4px",f.style.height="30px",f.className="rangeselector_button",f.style.zIndex="10",f.style.width="30px",f.addEventListener(c,function(a){e.onToggleRangeSelector(a)},!1),d.appendChild(f));var g=this.chartObj.dvObj.getGraphGob().getValueExpr(0),h;g&&(h=g.getArgs());this.chartObj.whatIfColumns&&(f=document.createElement("button"),f.id=d.id+"_whatif",f.setAttribute("type","button"),f.style.position="relative",f.style.cssFloat="ltr"===this.dir?"right":"left",
f.style.top="4px","ltr"===this.dir?f.style.marginRight="4px":f.style.marginLeft="4px",f.style.height="30px",f.className="whatif_button",f.style.zIndex="10",f.style.width="30px",f.addEventListener(c,function(a){e.onToggleWhatIf(a)},!1),d.appendChild(f));f=!1;if(f=this.hasDAVariables(g,h))f=document.createElement("button"),f.id=d.id+"_dynamicanalysis",f.setAttribute("type","button"),f.style.position="relative",f.style.cssFloat="ltr"===this.dir?"right":"left",f.style.top="4px","ltr"===this.dir?f.style.marginRight=
"4px":f.style.marginLeft="4px",f.style.height="30px",f.className="da_button",f.style.zIndex="10",f.style.width="30px",f.addEventListener(c,function(a){e.onToggleDynamicAnalysis(a)},!1),d.appendChild(f);g=this.chartObj;for(h=0;h<g.zoomingLevels.length;h++)f=document.createElement("button"),f.id=d.id+"_sz_"+h,f.setAttribute("type","button"),f.innerHTML=g.zoomingLevels[h].title?g.zoomingLevels[h].title:g.zoomingLevels[h].categoryColumn,f.style.top="4px","ltr"===this.dir?f.style.marginLeft="4px":f.style.marginRight=
"4px",f.style.position="relative",f.style.cssFloat="ltr"===this.dir?"left":"right",f.style.height="30px",f.className="chart_button",f.style.zIndex="10",f.addEventListener(c,b,!1),d.appendChild(f);a.appendChild(d);a.parentNode.macontrol&&a.parentNode.macontrol instanceof $MA.DrillDownGroup&&(a=document.createElement("canvas"),a.id=d.id+"_breadcrumbs","ltr"===this.dir?a.style.left="6px":(a.style.right="6px",a.style.cssFloat="right"),a.style.top="4px",a.style.position="relative",a.width=10,a.height=
$MA.BI.ChartView.TOOLBAR_HEIGHT-10,d.appendChild(a),a.width="ltr"===this.dir?300<document.body.clientWidth-a.offsetLeft?300:document.body.clientWidth-a.offsetLeft-1:300<document.body.clientWidth-100?300:document.body.clientWidth-100,(new $MA.BI.Breadcrumbs(a.id)).onitemclicked=this.onToolbarBreadcrumbsItemClicked);this.toolBarElem=d;this.highlightCurrentZoomingLevel()};
$MA.BI.ChartView.prototype.onToolbarBreadcrumbsItemClicked=function(a){var b=document.getElementById(this.id),b=$MA.BI.SimpleChartView.getOwner(b),b=$MA.BI.SimpleChartView.getChart(b);if(b.ondrillup)b.ondrillup(a)};$MA.BI.ChartView.prototype.updateToolbarBreadcrumbs=function(a){var b=document.getElementById(this.toolBarElem.id+"_breadcrumbs");b&&b.breadcrumbs.plot(b,a)};
$MA.BI.ChartView.prototype.onSemanticZooming=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);var b=a.id.lastIndexOf("_");a=parseInt(a.id.substring(b+1,a.id.length),10);this.setZoomingLevel(a);this.highlightCurrentZoomingLevel()};$MA.BI.ChartView.prototype.getZoomingLevel=function(){return this.chartObj.level};$MA.BI.ChartView.prototype.setZoomingLevel=function(a){a!=this.chartObj.level&&(a>this.chartObj.level?this.setGroupDownData(a):this.setGroupUpData(a))};
$MA.BI.ChartView.prototype.onClickedShare=function(a){var b=this.chartObj._parent;b.trigger("chartshared",{id:b.id});this.stopEvent(a)};$MA.BI.ChartView.prototype.onToggleWhatIf=function(a){this.tableViewElem&&0!=this.tableViewElem.offsetHeight||(this.whatIfViewElem&&(0!=this.whatIfViewElem.offsetHeight?this.showWhatIfView(!1):this.showWhatIfView(!0)),this.stopEvent(a))};
$MA.BI.ChartView.prototype.onToggleDynamicAnalysis=function(a){this.tableViewElem&&0!=this.tableViewElem.offsetHeight||(this.dynamicAnalysisViewElem&&(0!=this.dynamicAnalysisViewElem.offsetHeight?this.showDynamicAnalysisView(!1):this.showDynamicAnalysisView(!0)),this.stopEvent(a))};
$MA.BI.ChartView.prototype.onToggleTable=function(a){this.isToggleTableMode=!0;0!=this.tableViewElem.offsetHeight?this.showTableView(!1):this.showTableView(!0);this.isDataChanged=this.isDrillLevelChanged=this.isZoomingLevelChanged=this.isToggleTableMode=!1;this.stopEvent(a)};$MA.BI.ChartView.prototype.onToggleRangeSelector=function(a){this.tableViewElem&&0!=this.tableViewElem.offsetHeight||(0!=this.rangeSelectorViewElem.offsetHeight?this.showRangeSelectorView(!1):this.showRangeSelectorView(!0),this.stopEvent(a))};
$MA.BI.ChartView.prototype.createValueBubbleView=function(){var a=document.createElement("canvas");a.id=this.id+"_valuebubble";a.style.position="absolute";a.setAttribute("oncontextmenu","return false");this.getGraphElem().parentNode.appendChild(a);this.valueBubbleViewElem=a};
$MA.BI.ChartView.prototype.createRangeSelectorView=function(a){var b=document.createElement("div");b.id=this.id+"_rangeSelector";b.style.position="relative";"ltr"===this.dir?b.style.marginLeft="5%":b.style.marginRight="5%";b.style.width="93%";b.style.marginTop="10px";b.style.marginBottom="10px";b.style.height=$MA.BI.ChartView.RANGESELECTOR_HEIGHT-$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT+"px";b.className="chart_range_selector";a.appendChild(b);this.rangeSelectorViewElem=b;var c=new $MA.DataView(b.id),
d=document.createElement("div");d.id=this.id+"_rangeSelectorText";d.style.position="relative";"ltr"===this.dir?d.style.marginLeft="5%":d.style.marginRight="5%";d.style.width="93%";d.style.marginTop="0px";d.style.marginBottom="0px";d.style.height=$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT-2+"px";a.appendChild(d);a=new $MA.DataView(d.id);b.textElem=d;c.textView=a};
$MA.BI.ChartView.prototype.createTableView=function(a){var b=document.createElement("div");b.id=this.id+"_table";b.style.position="relative";b.style.width="100%";b.style.height="0px";b.className="chart_table";void 0==$MA.getCSSRule(".chart_table")&&(a.style.background="white");a.appendChild(b);this.tableViewElem=b;new $MA.BI.ChartTableDataView(b.id,this.graphViewElem,this.chartObj)};$MA.BI.ChartView.prototype.createWhatIfView=function(a){};$MA.BI.ChartView.prototype.showWhatIfView=function(a){};
$MA.BI.ChartView.prototype.initializeWhatIfView=function(){};$MA.BI.ChartView.prototype.createDynamicAnalysisView=function(a){};$MA.BI.ChartView.prototype.showDynamicAnalysisView=function(a){};$MA.BI.ChartView.prototype.initializeDynamicAnalysisView=function(){};$MA.BI.ChartView.prototype.hasDAVariables=function(a,b){return!1};$MA.BI.ChartView.prototype.generateRangeSelectorSyntax=function(){return'<DataView Style="canvas"><Table/><Canvas Name="canvas_1"/></DataView>'};
$MA.BI.ChartView.prototype.generateTableSyntax=function(){return'<DataView Style="canvas"><Table/><Canvas Name="canvas_1"/></DataView>'};
$MA.BI.ChartView.prototype.showTableView=function(a){var b=document.getElementById(this.id).offsetHeight;a?(this.toolBarElem&&"none"!=this.toolBarElem.style.display&&(b-=this.toolBarElem.offsetHeight),this.graphViewElem.style.display="none",this.rangeSelectorViewElem&&(this.rangeSelectorViewElem.style.display="none",this.rangeSelectorViewElem.textElem.style.display="none"),this.whatIfViewElem&&(this.whatIfViewElem.style.display="none"),this.dynamicAnalysisViewElem&&(this.dynamicAnalysisViewElem.style.display=
"none"),this.initializeTableView(),this.tableViewElem.style.height=b+"px",this.tableViewElem.style.display="",this.refreshTableView(),this.orientation!=window.orientation&&(this.orientation=window.orientation)):(this.tableViewElem.style.height="0px",this.tableViewElem.style.display="none",this.graphViewElem.style.display="",this.refreshViews(),this.refreshValueBubbleView(!0));this.updateTableViewIcon(a)};
$MA.BI.ChartView.prototype.showRangeSelectorView=function(a){this.showRangeSelectorFlag=a;this.refreshViews();this.refreshValueBubbleView(!0)};
$MA.BI.ChartView.prototype.refreshViews=function(){var a=document.getElementById(this.id).offsetHeight;this.toolBarElem&&"none"!=this.toolBarElem.style.display&&(a-=this.toolBarElem.offsetHeight);this.rangeSelectorViewElem&&(this.showRangeSelectorFlag?(this.rangeSelectorViewElem.style.display="",this.rangeSelectorViewElem.textElem.style.display="",this.refreshRangeSelectorView(),a-=$MA.BI.ChartView.RANGESELECTOR_HEIGHT+20):(this.rangeSelectorViewElem.style.display="none",this.rangeSelectorViewElem.textElem.style.display=
"none"));this.showWhatIfFlag?(this.dynamicAnalysisViewElem.style.display="none",this.whatIfViewElem.style.display="",this.whatIfViewElem.scrollHeight>0.5*a?(this.graphViewElem.style.height=0.5*a+"px",this.refreshGraphView(),this.whatIfViewElem.style.height=0.5*a+"px"):(this.graphViewElem.style.height=a-this.whatIfViewElem.scrollHeight+"px",this.refreshGraphView(),this.whatIfViewElem.style.height=this.whatIfViewElem.scrollHeight+"px")):this.showDynamicAnalysisFlag?(this.whatIfViewElem.style.display=
"none",this.dynamicAnalysisViewElem.style.display="",this.dynamicAnalysisViewElem.scrollHeight>0.5*a?(this.graphViewElem.style.height=0.5*a+"px",this.refreshGraphView(),this.dynamicAnalysisViewElem.style.height=0.5*a+"px"):(this.graphViewElem.style.height=a-this.dynamicAnalysisViewElem.scrollHeight+"px",this.refreshGraphView(),this.dynamicAnalysisViewElem.style.height=this.dynamicAnalysisViewElem.scrollHeight+"px")):(this.whatIfViewElem&&(this.whatIfViewElem.style.display="none"),this.dynamicAnalysisViewElem&&
(this.dynamicAnalysisViewElem.style.display="none"),this.graphViewElem.style.height=a+"px",this.refreshGraphView())};$MA.BI.ChartView.prototype.showToolBar=function(a){void 0!=this.toolBarElem&&(this.toolBarElem.style.display=a?"":"none",this.refreshAsync())};$MA.BI.ChartView.prototype.refreshRangeSelectorView=function(){this.rangeSelectorViewElem&&this.showRangeSelectorFlag&&(this.getRangeSelector().reset(),this.getRangeSelectorView().refresh(),this.getRangeSelectorTextView().refresh())};
$MA.BI.ChartView.prototype.refreshTableView=function(){var a=this.getTableView();a&&a.dvObj&&a.refresh()};
$MA.BI.ChartView.prototype.initializeData=function(){if(void 0!=this.refreshAction){var a=this.getGraphGob(),b=this.getGraphView().dvObj;if(0!=b.getRowCount()){var c;for(c=0;c<a.getChildrenCount();c++)b.setTableSortOrder(a.getChildGob(c).name);c=this.getGroupByValues();b.initializeGraphData(c,a.getSeriesColumn());this.initializeGraphView();var d;if("initialize"==this.refreshAction){b=document.getElementById(this.id);if(void 0==b)return;b=$MA.BI.SimpleChartView.getChart(b);0==b.numberOfVisibleCategory?
this.setVisibleCategoryCount(a.getMaxItems()):(0<a.getMaxItems()&&b.numberOfVisibleCategory>a.getMaxItems()&&(b.numberOfVisibleCategory=a.getMaxItems()),this.setNumberOfVisibleCategories(b.numberOfVisibleCategory));0!=this.tableViewElem.offsetHeight?this.updateTable():this.resetTable()}else"groupUp"==this.refreshAction?(b=this.getCategoryCount(),d=this.lastItemCount/b,c=Math.floor(a.getFirstItem()/d),d=Math.ceil(a.getMaxItems()/d),c+d>=b?a.setFirstItem(b-d-1):a.setFirstItem(c),this.setVisibleCategoryCount(d),
0!=this.tableViewElem.offsetHeight?this.updateTable():this.resetTable()):"groupDown"==this.refreshAction?(d=this.getCategoryCount()/this.lastItemCount,a.setFirstItem(Math.floor(d*a.getFirstItem())),this.setVisibleCategoryCount(Math.ceil(d*a.getMaxItems())),0!=this.tableViewElem.offsetHeight?this.updateTable():this.resetTable()):"updateTable"==this.refreshAction?0!=this.tableViewElem.offsetHeight?this.updateTable():this.resetTable():"resetTable"==this.refreshAction&&this.resetTable();this.refreshAction=
void 0}}};$MA.BI.ChartView.prototype.getGraphViewHeight=function(a){a=a.offsetHeight;return void 0==this.toolBarElem||"none"==this.toolBarElem.style.display?a+"px":a-$MA.BI.ChartView.TOOLBAR_HEIGHT+"px"};
$MA.BI.ChartView.prototype.refresh=function(){var a=document.getElementById(this.id);if(void 0!=a&&0!=a.offsetHeight&&0!=a.offsetWidth){var b=$MA.BI.SimpleChartView.getChart(a);b.trigger("beforerender");this.graphWidth!=this.graphViewElem.offsetWidth&&(void 0===this.refreshAction&&(this.refreshAction="initialize"),this.graphWidth=this.graphViewElem.offsetWidth);this.initializeData();b.trigger("renderstart");this.graphViewElem.style.width=this.getGraphViewWidth(a);if(0!=this.tableViewElem.offsetHeight)this.showTableView(!0);
else{var c=this.getGraph();c.setValueBubbleProperty("ValueBubbleHeight",this.getValueBubbleHeight());c.setValueBubbleProperty("ValueBubblePosition",this.getValueBubblePosition());this.whatIfViewElem&&this.showWhatIfFlag?this.showWhatIfView(!0):this.dynamicAnalysisViewElem&&this.showDynamicAnalysisFlag?this.showDynamicAnalysisView(!0):(this.graphViewElem.style.height=this.getGraphViewHeight(a),this.refreshChartViews(),this.refreshValueBubbleView(!0))}b.trigger("renderend")}};
$MA.BI.ChartView.prototype.onAnimationEnd=function(a){(a=$MA.BI.SimpleChartView.getOwner(a))&&$MA.BI.SimpleChartView.getChart(a).trigger("animationend")};
$MA.BI.ChartView.prototype.initialize=function(){var a=this.getGraphGob(),b=1;this.setTitle(a.title);var c=this.getGraph();c.setProperty("Title","");c.setValueBubbleProperty("ValueBubble",!0);a.categories&&a.categories.list&&(b=a.categories.list.length);var d=c.getAllGraphObjs(),e=d.length,f,g;for(f=0;f<e;f++)g=a.getChildGob(d[f].name),g=g.getObject("values"),g=g.getProperty("secondaryAxis"),d[f].dir=$MA.dir,c.setAxisProperty("MajorGridLine","values",!g,d[f]),c.setAxisLineBrush("values","majorgrid",
new $MA.Brush(15198183),d[f]),c.setAxisLineBrush("category","majorgrid",new $MA.Brush(15198183),d[f]),c.setAxisProperty("MajorTicType","category","none",d[f]),0<=d[f].graphType.indexOf("hierarchy")&&(d[f].suppliedTotals=a.suppliedTotals,d[f].hierarchyMaxLevel=b);c.onanimationend=this.onAnimationEnd;this.graphViewWidth=this.graphViewElem.offsetWidth;var h=this;c.bind("draw",function(){h.chartObj._parent.trigger("draw",{id:h.id})});this.applyWaterfallStyle();this.initializeCSS();this.initializeRangeSelectorView();
this.initializeWhatIfView();this.initializeDynamicAnalysisView();this.showRangeSelectorFlag=!0;this.showWhatIfFlag=this.tableViewElem&&0!=this.tableViewElem.offsetHeight?!0:!1;this.showDynamicAnalysisFlag=this.dynamicAnalysisViewElem&&0!=this.dynamicAnalysisViewElem.offsetHeight?!0:!1;this.chartObj._parent.trigger("initialized",{id:this.id});this.refreshAction="initialize";0<this.getGraphView().dvObj.getRowCount()&&this.refreshAsync()};
$MA.BI.ChartView.prototype.setTitle=function(a){var b=this.chartObj._parent;b.trigger("titlechanged",{id:b.id,title:a})};
$MA.BI.ChartView.prototype.setGroupUpData=function(a,b){if(!(0==this.chartObj.zoomingLevels.length||0>a||a>=this.chartObj.zoomingLevels.length)){var c=this.chartObj.zoomingLevels[a];this.setTitle(c.title);var d=this.getGraphView().dvObj,e=this.getCategoryCount();this.chartObj.level=a;b||(c.query?(d.setTableBuffer("display",[]),this.categoryList=void 0,this.chartObj.retrieve(c.query)):(d.setTableBuffer("display",[]),this.categoryList=void 0,this.chartObj._parent.trigger("levelchanged",{id:this.id,
level:a})));if(!b){var f=this.getGraph();if("bubble"===this.getChartType()&&(c=d.getTableColumn(c.categoryColumn))){var g=d.getGraphGob().getProperty("scattered");f.setDataScattered(g||c.type==$MA.TableColumnType.NUMBER)}f.groupCategory(0<a);this.refreshAction="groupUp";this.lastItemCount=e;this.lastVisibleCountRatio=this.getMaxItems()/e;this.isZoomingLevelChanged=!0;0!=d.getRowCount()&&this.refresh()}}};
$MA.BI.ChartView.prototype.setGroupDownData=function(a){if(!(0==this.chartObj.zoomingLevels.length||0>a||a>=this.chartObj.zoomingLevels.length)){var b=this.chartObj.zoomingLevels[a];this.setTitle(b.title);var c=this.getGraphView().dvObj,d=this.getCategoryCount();this.chartObj.level=a;b.query?(c.setTableBuffer("display",[]),this.categoryList=void 0,this.chartObj.retrieve(b.query)):(c.setTableBuffer("display",[]),this.categoryList=void 0,this.chartObj._parent.trigger("levelchanged",{id:this.id,level:a}));
var e=this.getGraph();if("bubble"===this.getChartType()&&(b=c.getTableColumn(b.categoryColumn))){var f=c.getGraphGob().getProperty("scattered");e.setDataScattered(f||b.type==$MA.TableColumnType.NUMBER)}e.groupCategory(0<a);this.refreshAction="groupDown";this.lastItemCount=d;this.lastVisibleCountRatio=this.getMaxItems()/d;this.isZoomingLevelChanged=!0;0!=c.getRowCount()&&this.refresh()}};
$MA.BI.ChartView.prototype.setDrillDown=function(a){if(void 0!=a){var b=this.getGraph(),c=b.getSeriesList(),d,e,f,g=0;for(d=0;d<c.length;d++)e=c[d],e.isEnabled()&&(f=e,g++);a=b.getDataValue(a);b=this.chartObj._parent;if(a)if(b.ondrilldown)if(1==g)b.ondrilldown(a,f.name);else b.ondrilldown(a);else this.abortLongPress(),b.trigger("doubletap",{id:b.id,eventObject:window.event})}};
$MA.BI.ChartView.prototype.initializeRangeSelectorView=function(){if(this.rangeSelectorViewElem){var a=this.generateRangeSelectorSyntax(),b=this.getRangeSelectorView();b.create(a);b.textView.create(a);a=this.createRangeSelector();this.setRangeSelector(a);a.onChanged(this.onRangeSelectorChanged,this);b.bind("draw",a.plot,a)}};
$MA.BI.ChartView.prototype.initializeTableView=function(){var a=this.getTableView();if(!a.dvObj){var b=this.getGraph(),c=this.getGraphView(),d=b.getSeriesCount();if(0==d||d!==this.getGraphGob().seriesList.length)if(c.refresh(),d=b.getSeriesCount(),0==d)return;var e=c.dvObj,f=e.getGraphGob(),c=new $MA.DataView.Table(e);c.createDataBuffer("display");var g=e.getRowCount(),h=f.getCategoryCount(),k,l,p,m=f.getValueExpr(0),n=f.getValueExpr(1),q=f.getSeriesExpr(),s,r,u,v=[];if(0==this.chartObj.zoomingLevels.length)if(1<
h)for(u=0;u<h;u++)r=f.getCategoryColumn(u),c.addColumn("string",r,f.getCategoryName(u)),(r=e.getTableColumn(r))&&v.push(r.id);else r=f.getCategoryColumn(),c.addColumn("string",r,f.getCategoryName()),(r=e.getTableColumn(r))&&v.push(r.id);else for(u=0;u<=this.chartObj.level;u++)r=this.chartObj.zoomingLevels[u].categoryColumn,c.addColumn("string",r,this.chartObj.zoomingLevels[u].title),(r=e.getTableColumn(r))&&v.push(r.id);var w;u=v.length;if(void 0==f.series)if(r=f.getValueName(),c.addColumn("number",
r),k=f.getObject("values"),"bubble"==f.graphType&&void 0!=n){for(q=1;q<k.list.length;q++)r=f.getValueName(q),void 0!=r&&c.addColumn("number",r);for(w=0;w<g;w++){d=e.getRow(w);e.exprRow=w;l=m.evaluate();n.evaluate();s=[];for(b=0;b<u;b++)s[b]=d[v[b]];s[b]=l;for(q=1;q<k.list.length;q++)r=f.getValueName(q),void 0!=r&&(d=k.list[q].format,2==k.list.length?p=n.evaluate():(e.exprRow=q+b,p=m.evaluate()),a.bubbleValuesFormatters.set(b+q,d),s[b+q]=p);c.addRow(s)}}else for(s=k.list[0].getProperty("displaytext"),
r=void 0,void 0!=s&&(r=f.table.getColumn(s)),w=0;w<g;w++){d=e.getRow(w);e.exprRow=w;l=m.evaluate();s=[];for(b=0;b<u;b++)s[b]=d[v[b]];a=l;r&&(a=d[r.id]);s[b]=a;c.addRow(s)}else if(w=this.getGroupByValues(),e.initializeGraphData(w,f.getSeriesColumn()),"bubble"==f.graphType)for(r=f.getSeriesName(),c.addColumn("string",r),r=f.getValueName(),c.addColumn("number",r),n&&(r=f.getValueName(1),c.addColumn("number",r)),w=0;w<g;w++){d=e.getRow(w);e.exprRow=w;f=q.evaluate();l=m.evaluate();n&&(p=n.evaluate());
s=[];for(b=0;b<u;b++)s[b]=d[v[b]];s[b]=f;s[b+1]=l;n&&(s[b+2]=p);c.addRow(s)}else{a=new $MA.Hash;for(w=0;w<d;w++)c.addColumn("number",b.getFormattedSeriesName(w)),a.set(b.getSeriesName(w),u+w);for(w=0;w<g;w++){d=e.getRow(w);e.exprRow=w;l=m.evaluate();f=q.evaluate();if(e.isGroupHeader(d)){s=[];for(b=0;b<u;b++)s[b]=d[v[b]];for(b=u;b<c.columns.length;b++)s[b]=void 0}f=a.get(f);void 0==k?s[f]=l:k[f]=l;e.isGroupTrailer(d)&&(void 0==k?c.addRow(s):k=void 0)}}e=this.generateTableSyntax();a=this.getTableView();
a.create(e);a.bind("draw",a.plot);a.dvObj.setTable(c);if(0<this.chartObj.zoomingLevels.length||1<h)w=this.getGroupByValues(),a.dvObj.groupData(w,c)}};
$MA.BI.ChartView.prototype.initializeGraphView=function(){var a=this.chartObj.dvObj,b=a.getRowCount();if(0==b)this.categoryList=void 0;else{var c,d,e,f,g=a.getGraphGob(),h=g.getObject("Series"),k=g.getCategoryExpr(),l=g.getValueExpr(0),p=[],m=[],n=0==this.chartObj.zoomingLevels.length?g.getCategoryCount():this.chartObj.level+1,q=this.getGraph();1<g.getCategoryCount()&&q.groupCategory(!0);var s,r=!1;0==this.getChartType().indexOf("waterfall")&&(r=!0,s=0);var u,v=[];if(void 0==h)for(a.exprRow=0,f=e=
c=l.evaluate(),this.applyValueAxisCustomisation(q,g),u=0;u<b;u++)a.exprRow=u,c=l.evaluate(),r&&(c=s+=c),c<e?e=c:c>f&&(f=c),1!=n||q.isDataScattered()?m.push(u):(d=k.evaluate(),c=p[d],void 0==c?(p[d]=m.length,m.push(u)):v.push(u));else{var w=[],x=[],A=g.getSeriesExpr();a.exprRow=0;f=e=c=l.evaluate();this.applyValueAxisCustomisation(q,g);d=!1;for(u=0;u<b;u++)a.exprRow=u,c=l.evaluate(),r&&(c=s+=c),c<e?e=c:c>f&&(f=c),c=A.evaluate(),void 0==w[c]&&(w[c]=!0,x.push(c)),c=a.getRow(u),a.isGroupHeader(c)?1!=
n||q.isDataScattered()?(m.push(u),d=!1):(d=k.evaluate(),c=p[d],void 0==c?(p[d]=m.length,m.push(u),d=!1):(v.push(u),d=!0)):d&&v.push(u);b=a.getTable();if(void 0==h.sortOrder||"a"==h.sortOrder||"d"==h.sortOrder)b.getColumn(h.column).type==$MA.TableColumnType.NUMBER?x.sort(function(a,b){return a-b}):x.sort(),"d"==h.sortOrder&&x.reverse();g.seriesList=x}q.setScale(e,f);this.categoryList=m;if(0<v.length){for(u=v.length-1;0<=u;u--)a.deleteRow(v[u]);this.initializeGraphView()}}};
$MA.BI.ChartView.prototype.getCategoryValue=function(a){if(void 0==this.categoryList||a>=this.categoryList.length)return"";var b=this.categoryList[a];a=this.getGraphGob();var c=a.getCategoryExpr(),d=a.getCategoryFormat(),e=a.getCategoryCount(),f=[],g=this.getValueBubbleObject(),h=this.chartObj.dvObj;h.exprRow=b;if(0==this.chartObj.level)if(1<e)for(b=h.getRow(b),e-=1;0<=e;e--){if(c=a.getCategoryColumn(e),c=h.getTableColumn(c))d=a.getCategoryFormat(e),c=$MA.format(b[c.id],d),""!=c&&f.push(c)}else c=
$MA.format(c.evaluate(),d),f.push(c);else for(b=h.getRow(b),e=this.chartObj.level;0<=e;e--)if(c=this.chartObj.zoomingLevels[e].categoryColumn,c=h.getTableColumn(c))c=$MA.format(b[c.id],d),""!=c&&f.push(c);"rootToLeaf"==g.categoriesDisplayOrder&&f.reverse();return f.join(", ")};$MA.BI.ChartView.prototype.getCategoryCount=function(){return this.categoryList?this.categoryList.length:0};$MA.BI.ChartView.prototype.getVisibleCategoryCount=function(){return this.chartObj.maxVisibleItems||Number.MAX_VALUE};
$MA.BI.ChartView.prototype.setVisibleCategoryCount=function(a){var b=this.getGraphGob(),c=this.getChartType();if(-1!==c.indexOf("column")||"line"==c){var d;d="none"==this.graphViewElem.style.display?this.tableViewElem.offsetWidth/44:this.graphViewElem.offsetWidth/44;a>d?b.setMaxItems(Math.floor(d)):1==a?1<this.getCategoryCount()&&b.setMaxItems(2):b.setMaxItems(a);-1!==c.indexOf("column")?this.chartObj.maxVisibleItems=Math.floor(d):this.chartObj.maxVisibleItems=void 0}else this.chartObj.maxVisibleItems=
void 0,b.setMaxItems(a)};
$MA.BI.ChartView.prototype.setNumberOfVisibleCategories=function(a){var b=this.getGraphGob(),c=this.getChartType();if(-1===c.indexOf("bar"))if(-1!==c.indexOf("column")||"line"==c){var c="none"==this.graphViewElem.style.display?this.tableViewElem.offsetWidth/44:this.graphViewElem.offsetWidth/44,d=this.getCategoryCount();a>c?(a>d&&(a=d),b.setMaxItems(a)):1==a?1<d&&b.setMaxItems(2):b.setMaxItems(a);this.chartObj.maxVisibleItems=void 0}else this.chartObj.maxVisibleItems=void 0,b.setMaxItems(a)};
$MA.BI.ChartView.prototype.getGroupByValues=function(){var a,b=[];if(0==this.chartObj.zoomingLevels.length){var c=this.getGraphGob(),d=c.getCategoryCount();if(1<d)for(a=0;a<d;a++)b.push(c.getCategoryColumn(a));else b.push(c.getCategoryColumn())}else for(a=0;a<=this.chartObj.level;a++)c=this.chartObj.zoomingLevels[a],b.push(c.categoryColumn);return b};$MA.BI.ChartView.prototype.updateTable=function(){this.resetTable();this.initializeTableView()};
$MA.BI.ChartView.prototype.resetTable=function(){this.getTableView().dvObj=void 0};$MA.BI.ChartView.prototype.setDataTable=function(a,b){if(void 0!=this.tableViewElem){var c=this.getGraphGob();c.setFirstItem(c.getFirstItem());c.setMaxItems();this.resetTable();this.chartObj.setDataTable(a,b);this.refreshAction="initialize";this.refreshAsync()}};
$MA.BI.ChartView.prototype.touchEndListener=function(a){void 0!==this.sliderUpdater&&(clearTimeout(this.sliderUpdater),this.sliderUpdater=void 0);if($MA.isTouchEventSupported)this.onTouchEnd(a);else this.onMouseUp(a);this.updateAccessibiltyContent()};
$MA.BI.ChartView.prototype.startLongPress=function(a){void 0!==this.longPressTimer&&clearTimeout(this.longPressTimer);this.longPressPos=$MA.isTouchEventSupported?$MA.getMouseXY(a.touches.item(0),a.target):$MA.getMouseXY(a);var b=this;this.longPressTimer=setTimeout(function(){var c=b.longPressPos.x,d=b.longPressPos.y;if(b.graphViewElem){void 0!==a.target.vbObj&&(c+=parseInt(b.valueBubbleViewElem.style.left,10),d+=parseInt(b.valueBubbleViewElem.style.top,10));var e=b.getGraph();!e.pointInChart(c,d)||
(e.pointInLegend(c,d)||b.targetIsSlider)||(c=b.chartObj._parent,b.touchEndListener(a),c.trigger("longpress",{id:c.id,eventObject:a}));b.longPressTimer=void 0;b.longPressPos=void 0}},$MA.BI.ChartView.LONGPRESS_TIMEOUT)};
$MA.BI.ChartView.prototype.abortLongPress=function(a){if(void 0!==this.longPressTimer)if(void 0==a)clearTimeout(this.longPressTimer),this.longPressTimer=void 0;else{var b=this.longPressPos,c;c=$MA.isTouchEventSupported?$MA.getMouseXY(a.touches.item(0),a.target):$MA.getMouseXY(a);var d=(b.x-c.x)*(b.x-c.x),b=(b.y-c.y)*(b.y-c.y);if(void 0==a||d+b>$MA.BI.ChartView.LONGPRESS_THRESHOLD)clearTimeout(this.longPressTimer),this.longPressTimer=void 0}};
$MA.BI.ChartView.prototype.addGraphEvents=function(){var a=window.navigator.msPointerEnabled,b=this;$MA.isTouchEventSupported?(this.touchStartListener=function(a){b.onTouchStart(a);1<a.touches.length?b.abortLongPress(a):b.startLongPress(a);document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")},this.touchMoveListener=function(a){b.onTouchMove(a);b.abortLongPress(a)},this.graphViewElem.addEventListener("touchstart",this.touchStartListener,!1),this.graphViewElem.addEventListener("touchmove",
this.touchMoveListener,!1),a="touchend"):(this.touchStartListener=function(a){b.touchStarted=!0;b.onMouseDown(a);b.startLongPress(a);document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")},this.touchDoubleListener=function(a){b.onDblClick(a)},this.touchMoveListener=function(a){b.touchStarted&&(b.onMouseMove(a),b.abortLongPress(a))},a?(this.graphViewElem.addEventListener("MSPointerDown",this.touchStartListener,!1),this.graphViewElem.addEventListener("MSPointerMove",
this.touchMoveListener,!1),this.graphViewElem.addEventListener("dblclick",this.touchDoubleListener,!1),a="MSPointerUp"):(this.graphViewElem.addEventListener("mousedown",this.touchStartListener,!1),this.graphViewElem.addEventListener("mousemove",this.touchMoveListener,!1),this.graphViewElem.addEventListener("dblclick",this.touchDoubleListener,!1),a="mouseup"));this.graphViewElem.addEventListener(a,function(a){b.touchStarted=!1;b.touchEndListener(a);b.abortLongPress(a)},!1)};
$MA.BI.ChartView.prototype.removeGraphEvents=function(){var a=window.navigator.msPointerEnabled;$MA.isTouchEventSupported?(this.graphViewElem.removeEventListener("touchstart",this.touchStartListener,!1),this.graphViewElem.removeEventListener("touchmove",this.touchMoveListener,!1),this.graphViewElem.removeEventListener("touchend",this.touchEndListener,!1)):(a?(this.graphViewElem.removeEventListener("MSPointerDown",this.touchStartListener,!1),this.graphViewElem.removeEventListener("MSPointerUp",this.touchEndListener,
!1),this.graphViewElem.removeEventListener("MSPointerMove",this.touchMoveListener,!1)):(this.graphViewElem.removeEventListener("mousedown",this.touchStartListener,!1),this.graphViewElem.removeEventListener("mouseup",this.touchEndListener,!1),this.graphViewElem.removeEventListener("mousemove",this.touchMoveListener,!1)),this.graphViewElem.removeEventListener("dblclick",this.touchDoubleListener,!1))};
$MA.BI.ChartView.prototype.highlightCurrentZoomingLevel=function(a){if(0!=this.chartObj.zoomingLevels.length&&this.toolBarElem){var b=this.id+"_toolbar";if(this.isZoomingLevelChanged){a=this.getZoomingLevel();var c=this.chartObj.zoomingLevels.length,d;for(d=0;d<c;d++)d===a?document.getElementById(b+"_sz_"+d).style.color="#F0AB00":document.getElementById(b+"_sz_"+d).style.color="#fff"}else void 0==a&&(a=0),document.getElementById(b+"_sz_"+a).style.color="#F0AB00"}};
$MA.BI.ChartView.prototype.updateTableViewIcon=function(a){if(this.toolBarElem){var b=document.getElementById(this.toolBarTableBtnId);b&&(b.className=a?"graph_button":"table_button")}};
$MA.BI.ChartView.prototype.getValueDisplayNames=function(a,b){var c=0,d="",e=[],f=this.getGraph().getAllGraphObjs(),g=this.getGraphGob().children,h,k=f.length;for(h=0;h<k;h++)if(c+=f[h].getSeriesCount(),c>a){var l=g[h].values.list[0].displayName;l&&0>d.indexOf(l)&&e.push(l);if(c>b)break}return d="ltr"===this.dir?e.join(" | "):e.reverse().join(" | ")};
$MA.BI.ChartView.prototype.updateAccessibiltyContent=function(){var a,b="",c=[],d=document.getElementById("chart_accessibilityText");if(d)for(;d.hasChildNodes();)d.removeChild(d.firstChild);else d=document.createElement("h1"),d.setAttribute("id","chart_accessibilityText"),d.style.position="absolute",d.style.top="5000px",document.body.appendChild(d);var e=this.getGraph(),f=this.getGraphGob(),g=this.getValueBubbleObject(),h=f.title;a=f.graphType+" chart ";var k=this.getGraphGob().children.length,b=
"This is a ";if(1<k){b+="combination chart with ";for(a=0;a<k;a++)c.push(f.getChildGob(a).graphType);a=c.join(", ");a=a.substring(0,a.lastIndexOf(", "))+" and"+a.substring(a.lastIndexOf(", ")+1)}b+=a;h&&(b=b+" describe for "+h);var b=b+".Please type l and i for details.",l,p,m,c=!1;if(!1===this.isValueBubbleVisible())if("tablebar"==e.graphType||"waterfallbar"==e.graphType){void 0!=g.reset&&g.reset();"waterfallbar"===f.getChartType()&&(f.showTotal&&g.categoryText==$MA.getLocalisation(null,"Total",
"Total"))&&(g.text=g.valueDisplayText);var n=g.text.split("\n"),q=g.valueDisplayText.split("\n"),f=g.value,s=e.getSeriesList();if(0==s.length)return;for(a=0;a<s.length;++a){h=s[a];if("tablebar"==e.graphType||"waterfallbar"==e.graphType){l=e.getTableProperty("TableFirstRow");p=l%s.length;if(g.value==Math.floor(l/s.length)&&a<p||!h.isEnabled())continue;!h.isEnabled()&&n.length+a<s.length&&n.unshift("disabled")}l=e.getSeriesString(h);p=h.drawContext.fillBrush;m=e.getCustomisedFillBrush(a,f);void 0!=
m&&(p=m);m=n.shift();if(void 0!==m){var r=""==q[a]?void 0:q[a];g.addLegend(h,l,m,p.toString(),h.isEnabled(),r)}}}else return;d.appendChild(document.createTextNode(b));b=g.legends;if(void 0!==b){a=this.getChartType();if("pie"===a||"donut"===a)c=!0;f="";h=void 0==g.categoryDisplayName?"":g.categoryDisplayName;a=!1==g.categoryDisplayText?g.categoryText:g.categoryDisplayText;c||d.appendChild(document.createTextNode("now you select "+h+" "+a));h=document.createElement("ul");if(c)for(b=g.legendList,a=0;a<
b.length;a++)n=document.createElement("li"),c=void 0!==g.valueDisplayName?g.valueDisplayName:"",f="",""!=c&&(f=c),""!=b[a].name&&(f=f+" category "+b[a].name+","),f=void 0!==b[a].otherItems?f+"it's value is "+b[a].otherItems:f+"it's value is "+b[a].value,n.appendChild(document.createTextNode(f)),h.appendChild(n);else for(a=0;a<b.length;a++)b[a].isEnabled()&&(n=document.createElement("li"),1<k?(c=this.getValueDisplayNames(a,a),f=c+" sereis "+b[a].name+", it's value is "+b[a].value):(c=void 0!==g.valueDisplayName?
g.valueDisplayName:"",""!=c&&(f=c),""!=b[a].name&&(f=f+" sereis "+b[a].name+","),f=f+" it's value is "+b[a].value),n.appendChild(document.createTextNode(f)),h.appendChild(n));d.appendChild(h);document.getElementById(e.id).setAttribute("role","img");document.getElementById(e.id).setAttribute("aria-live","assertive");document.getElementById(e.id).setAttribute("aria-labelledby","chart_accessibilityText")}};
$MA.BI.BarChartView=function(a,b){$MA.BI.ChartView.call(this,a,b);this.valueBubbleViewElem=void 0;this.currentItems=0;var c=this.elem;c&&(this.createToolBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createRangeSelectorView(c),this.createTableView(c),this.createWhatIfView(c),this.createDynamicAnalysisView(c))};$MA.BI.BarChartView.prototype=new $MA.BI.ChartView;
$MA.BI.BarChartView.prototype.createRangeSelector=function(){return new $MA.BI.RangeSelector(this.rangeSelectorViewElem,this)};$MA.BI.BarChartView.prototype.onGraphViewInitialized=function(a){this.createValueBubbleView();this.valueBubbleViewElem.style.display="";$MA.BI.ValueBubble.create("hbvs",this.valueBubbleViewElem.id);this.initialize()};
$MA.BI.BarChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null};
$MA.BI.BarChartView.prototype.onTouchStart=function(a){this.single_tap=this.needsRefresh=!1;var b=this.getGraph();this.tapMoved=this.tappedInLegend=void 0;if(1==a.targetTouches.length){var c=a.targetTouches.item(0),d=new Date,e=d.getTime()-this.lastTouchEvent.getTime(),f=$MA.getMouseXY(c,a.target);this.startX=f.x;this.startY=f.y;if(500<e)if(this.single_tap=!0,void 0!==a.target.vbObj)this.onValueBubbleViewTouchStart(a);else b.pointInLegend(this.startX,this.startY)&&(this.tappedInLegend=!0);else 1==
a.touches.length&&(this.lastTouchIsTap&&50<e)&&void 0!=a.target.vbObj&&(f=$MA.getMouseXY(c,a.srcElement),c=f.x+this.valueBubbleViewElem.offsetLeft,f=f.y+this.valueBubbleViewElem.offsetTop,e=this.getValueBubbleObject(),b=b.getObjectAtPointer(c,f,e.value),this.fillSelectedValues(b),0<b.length&&this.setDrillDown(b[0].drawObj));this.lastTouchEvent=d;this.lastTouchIsTap=1<a.touches.length?!1:!0}else 2==a.targetTouches.length&&(this.startTouchX1=a.targetTouches[0].clientX,this.startTouchX2=a.targetTouches[1].clientX,
this.startTouchX=this.startTouchX1,this.lastTouchEvent=new Date,this.needsRefresh=!0);this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.BarChartView.prototype.onTouchMove=function(a){var b=new Date,c=b-this.lastTouchEvent,d=this.getGraph();if(1==a.targetTouches.length){var b=a.targetTouches.item(0),b=$MA.getMouseXY(b,a.target),e=this.startX-b.x,f=this.startY-b.y;if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)this.tapMoved=!0;if(this.tappedInLegend){if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)d.doScrollLegend(e,
f),this.startX=b.x,this.startY=b.y,this.legendScrolling=!0}else this.onValueBubbleViewTouchMove(a)}else if(2==a.targetTouches.length&&c>$MA.BI.ChartView.touchTimeSlot){var f=a.targetTouches[0],g=a.targetTouches[1],c=f.clientX-this.startTouchX1,h=g.clientX-this.startTouchX2;if(-15>c&&-15>h)c=1;else if(15<c&&15<h)c=2;else{var h=Math.abs(f.clientX-g.clientX),k=Math.abs(this.startTouchX1-this.startTouchX2),c=h-k;if(c=-15>c?3:15<c?4:void 0)e=a.scale?1/a.scale:k/h,isFinite(e)||(c=void 0)}if(c){var l=this.getCategoryCount(),
h=this.getFirstItem(),k=this.getMaxItems();3>c?(1===c&&h+k<l?h++:2===c&&0<h?h--:c=void 0,c&&(1===c?h+1+k<l?d.setEndSwipe(!0):d.setEndSwipe(!1):0<h-1?d.setStartSwipe(!0):d.setStartSwipe(!1),this.startTouchX1=f.clientX,this.startTouchX2=g.clientX)):(d=this.getVisibleCategoryCount(),d>l&&(d=l),e=Math.round(e*k+0.5),2>e&&1<k&&(e=2),e>d&&(e=d),k!=e?(h=Math.floor(h-(e-k)/2),0>h?h=0:h+e>d&&(h=d-e),this.setMaxItems(e)):c=void 0);c&&(this.setFirstItem(h),this.refreshSelectedCategoryIndex(),this.refreshGraphView(),
this.refreshValueBubbleView(!0),this.lastTouchEvent=b,this.needsRefresh=!0);this.swipeOrPinch=c}}2<=a.targetTouches.length&&(this.tapMoved=!0);this.lastTouchIsTap=!1;this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.BarChartView.prototype.onTouchEnd=function(a){var b=this.getGraph(),c=this.getValueBubbleObject();this.needsRefresh&&(b.setStartSwipe(!1),b.setEndSwipe(!1),this.refreshSelectedCategoryIndex(),this.refreshRangeSelectorView(),this.refreshValueBubbleView(!0),this.needsRefresh=void 0);this.legendScrolling?this.tappedInLegend=this.legendScrolling=!1:this.tappedInLegend?(b.selectLegend(this.startX,this.startY),c.plot(),this.refreshChartViews(),this.tappedInLegend=void 0):(c=b.isDataScattered()?c.value[0].ItemNumber:
c.value,this.selectedCategoryValue=b.getCategoryValue(c),this.selectedCategoryGroup=b.getCategoryList(c,!0),this.setSelectedCategoryIndex(this.getGraphGob().getFirstItem()+c),this.onValueBubbleViewTouchEnd(a),!this.single_tap||(this.targetIsSlider&&b.getValueBubble()||this.tapMoved)||this.triggerTapEvent(a),this.targetIsSlider&&(this.targetIsSlider=!1),this.single_tap=void 0);this.tapMoved=this.swipeOrPinch=void 0;this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.BarChartView.prototype.slashChart=function(a){var b=this;if(!(0<b.count)){var c=b.getGraphGob(),d=function(){b.count++;if(b.count>=b.animationCount)b.count=0,b.refreshGraphView(),b.refreshRangeSelectorView(),setTimeout(function(){b.refreshValueBubbleView(!0)},100);else{var e=b.getCategoryCount(),f=c.getFirstItem(),g=c.getMaxItems();0>a&&f+g<e?(c.setFirstItem(f+1),b.refreshGraphView(),b.refreshValueBubbleView(!0),setTimeout(d,100)):0<a&&0<f?(c.setFirstItem(f-1),b.refreshGraphView(),b.refreshValueBubbleView(!0),
setTimeout(d,100)):(b.refreshGraphView(),b.refreshRangeSelectorView(),b.refreshValueBubbleView(!0))}};b.animationCount=Math.floor(10*Math.abs(a)-3);0>=b.animationCount&&(b.animationCount=1);5<b.animationCount&&(b.animationCount=5);b.count=0;setTimeout(d,10)}};$MA.BI.BarChartView.prototype.onRangeSelectorChanged=function(a){a=void 0==a?!0:a;this.refreshSelectedCategoryIndex();this.refreshGraphView();a&&this.refreshValueBubbleView(!0)};
$MA.BI.BarChartView.prototype.refreshValueBubbleView=function(a){var b=this.getValueBubbleObject(),c=this.getGraph(),d=c.getDataRect(),e=d[0],f=d[1],g=d[2],h=d[3],d=c.getValueBubble(),k=0;d&&c.checkValueBubbleStyle($MA.ValueBubbleStyle.TOP)&&(k=b.getHeight(),k=f>k?k:f);this.valueBubbleViewElem.style.top=f-k+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=h+k;c.getGraphObj().suppliedTotals&&0==c.getGraphObj().drawObjects.length||(b.incr=
c.getElementIncrX(),b.itemSize=c.getElementWidth(),c=c.getElementStartX(),e=b.itemSize/2,b.startX=c,d&&b.show(this,c,k,e,a,this.getSelectedCategoryIndexRel()))};$MA.BI.BarChartView.prototype.getGraphViewHeight=function(a){a=a.offsetHeight;this.showRangeSelectorFlag&&(a-=$MA.BI.ChartView.RANGESELECTOR_HEIGHT+20);return void 0==this.toolBarElem||"none"==this.toolBarElem.style.display?a+"px":a-$MA.BI.ChartView.TOOLBAR_HEIGHT+"px"};
$MA.BI.BarChartView.prototype.stopEvent=function(a){a.preventDefault();"mouseup"!==a.type&&a.stopPropagation()};$MA.BI.HBarChartView=function(a,b){$MA.BI.ChartView.call(this,a,b);this.currentY=this.currentX=0;this.lastRedrawTime=this.lastTouchEvent;var c=document.getElementById(a);void 0!=c&&(this.createToolBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createTableView(c),this.createWhatIfView(c),this.createDynamicAnalysisView(c))};
$MA.BI.HBarChartView.prototype=new $MA.BI.ChartView;$MA.BI.HBarChartView.prototype.onGraphViewInitialized=function(a){a=this.getGraph();var b=this.getGraphGob();a.setTableProperty("TableHeaderNamesdimTitle",b.getCategoryName());a.setTableProperty("TableHeaderNamesrowHeader",b.getValueName());this.createValueBubbleView();$MA.BI.ValueBubble.create("vs",this.valueBubbleViewElem.id);this.initialize();a.setValueBubbleProperty("ValueBubble",!1)};
$MA.BI.HBarChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null};$MA.BI.HBarChartView.prototype.getMaxItems=function(){var a=this.getGraph(),b=a.calcBarWidth()+2*a.calcBarGap(),a=a.getDataRect()[3];return Math.floor(a/b)};
$MA.BI.HBarChartView.prototype.onMouseDown=function(a){var b=this.getGraph();this.firstRow=b.getTableProperty("TableFirstRow");this.rowDiff=0;this.maxItems=this.getMaxItems();this.lastRedrawTime=new Date;var c=this.getRowCount();this.legendScrolling=this.tappedInLegend=this.legendMoving=!1;this.valueBubbleViewElem.style.display="";var d=a.target.vbObj?a.layerX:a.layerX-this.valueBubbleViewElem.offsetLeft,e=a.target.vbObj?a.layerY:a.layerY-this.valueBubbleViewElem.offsetTop,e=void 0!==a.offsetX?a.offsetX:
a.layerX,f=void 0!==a.offsetY?a.offsetY:a.layerY,d=this.getValueBubbleObject();b.pointInLegend(e,f)?this.tappedInLegend=!0:(d.reset(),d.currentX=e,d.currentY=f,d.update(),d.value<(c-this.firstRow)/b.getSeriesCount(0)&&(b.getValueBubble()&&(c=b.getTableProperty("TableFirstRow"),c=Math.floor(c/b.getSeriesCount(0)),d.value+=c,this.updateValueBubble(),d.value-=c),d.plot(),b.updateValueBubbleValue(d.value),this.redrawGraphView()),d.dragging=!0);d=a.target.vbObj?a.layerX+this.valueBubbleViewElem.offsetLeft:
a.layerX;e=a.target.vbObj?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY;this.currentX=d;this.currentY=e;this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onMouseMove=function(a){var b=this.getValueBubbleObject(),c=this.getGraph(),d=c.calcBarWidth(),e=a.target.vbObj?a.layerX+this.valueBubbleViewElem.offsetLeft:a.layerX,f=a.target.vbObj?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY;if(b.dragging)e=Math.round((this.currentY-f)/d),f=this.getRowCount(),e!=this.rowDiff&&(b=this.firstRow+e,0<=b&&b+this.maxItems<=f&&(c.setTableProperty("TableFirstRow",b),this.redrawGraphView()),this.rowDiff=e);else if(c.pointInLegend(e,
f)&&this.tappedInLegend){b=this.currentX-e;d=this.currentY-f;if(Math.abs(b)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(d)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)c.doScrollLegend(b,d),this.currentX=e,this.currentY=f,this.legendScrolling=!0;this.redrawGraphView()}this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onMouseUp=function(a){var b=this.getGraph(),c=this.getValueBubbleObject();a.target==this.valueBubbleViewElem?(this.selectedCategoryValue=b.getCategoryValue(c.value),this.selectedCategoryGroup=b.getCategoryList(c.value,!0)):(this.selectedCategoryValue=this.selectedCategoryGroup="",this.selectedSeriesName=[]);var d=((a.target.vbObj?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY)-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime());this.slashChart(d,
this.elem);var d=void 0!==a.offsetX?a.offsetX:a.layerX,e=void 0!==a.offsetY?a.offsetY:a.layerY;c.dragging&&(c.currentY=e,b.pointInLegend(d,e)||this.updateSliderView());!0===this.tappedInLegend&&(!1==this.legendScrolling&&b.selectLegend(d,e),this.legendScrolling=this.tappedInLegend=!1,this.redrawGraphView(),this.updateSliderView());this.triggerTapEvent(a);this.stopEvent(a);this.updateAccessibiltyContent()};
$MA.BI.HBarChartView.prototype.slashChart=function(a){var b=this,c=function(){b.count++;if(!(b.count>b.animationCount)){var d=b.getRowCount(),e=1;0<a&&(e=-1);var f=b.getGraph(),e=f.getTableProperty("TableFirstRow")+e;0<=e&&e+b.maxItems<=d&&(f.setTableProperty("TableFirstRow",e),b.updateSliderView(),setTimeout(c,70))}};this.animationCount=Math.floor(10*Math.abs(a)-3);this.count=0;setTimeout(c,70)};
$MA.BI.HBarChartView.prototype.onDblClick=function(a){var b=this.getGraph(),c,d;"Explorer"===$MA.Browser.browser&&6<=$MA.Browser.version?(c=a.layerX,d=a.layerY):void 0!==a.target.vbObj&&(c=a.layerX+parseInt(this.valueBubbleViewElem.offsetLeft,10),d=a.layerY+parseInt(this.valueBubbleViewElem.offsetTop,10));a=b.getObjectAtPointer(c,d,this.getValueBubbleObject().value);this.fillSelectedValues(a);0<a.length&&this.setDrillDown(a[0].drawObj)};
$MA.BI.HBarChartView.prototype.onTouchStart=function(a){this.lastRedrawTime=new Date;if(1==a.touches.length){var b=a.touches.item(0),b=$MA.getMouseXY(b,a.srcElement),c=b.x,d=b.y,e=this.getGraph();this.legendScrolling=this.tappedInLegend=!1;var b=new Date,f=b.getTime()-this.lastTouchEvent.getTime();if(500<f)if(this.isDrillDown=!1,e.pointInLegend(c,d))this.currentX=c,this.currentY=d,this.tappedInLegend=!0;else{this.currentX=c;this.currentY=d;this.firstRow=e.getTableProperty("TableFirstRow");this.rowDiff=
0;this.maxItems=this.getMaxItems();var g=this.getRowCount();this.valueBubbleViewElem.style.display="";var c=a.target.vbObj?c:c-this.valueBubbleViewElem.offsetLeft,d=a.target.vbObj?d:d-this.valueBubbleViewElem.offsetTop,h=void 0!==a.offsetX?a.offsetX:a.layerX,k=void 0!==a.offsetY?a.offsetY:a.layerY,f=this.getValueBubbleObject();e.pointInLegend(h,k)||(f.reset(),f.currentX=c,f.currentY=d,f.update(),f.value<(g-this.firstRow)/e.getSeriesCount(0)&&(e.getValueBubble()&&(c=e.getTableProperty("TableFirstRow"),
c=Math.floor(c/e.getSeriesCount(0)),f.value+=c,this.updateValueBubble(),f.value-=c),f.plot(),e.updateValueBubbleValue(f.value),this.redrawGraphView()),f.dragging=!0)}else 1==a.touches.length&&(this.lastTouchIsTap&&50<f)&&(this.isDrillDown=!0,c=a.target.vbObj?c+this.valueBubbleViewElem.offsetLeft:c,d=a.target.vbObj?d+this.valueBubbleViewElem.offsetTop:d,e=e.getObjectAtPointer(c,d,this.getValueBubbleObject().value),this.fillSelectedValues(e),0<e.length&&this.setDrillDown(e[0].drawObj));this.lastTouchEvent=
b;this.lastTouchIsTap=1<a.touches.length?!1:!0}this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onTouchMove=function(a){if(1==a.touches.length){var b=this.getGraph(),c=b.calcBarWidth(),d=a.touches.item(0),e=$MA.getMouseXY(d,a.srcElement),d=e.x,e=e.y,c=Math.round((this.currentY-e)/c),f=this.getRowCount();if(c!=this.rowDiff){var g=this.firstRow+c;0<=g&&g+this.maxItems<=f&&(b.setTableProperty("TableFirstRow",g),this.redrawGraphView());this.rowDiff=c}if(b.pointInLegend(d,e)&&this.tappedInLegend){c=this.currentX-d;f=this.currentY-e;if(Math.abs(c)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||
Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)b.doScrollLegend(c,f),this.currentX=d,this.currentY=e,this.legendScrolling=!0;this.redrawGraphView()}}this.lastTouchIsTap=!1;this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onTouchEnd=function(a){var b=this.getGraph(),c=this.getValueBubbleObject();a.target==this.valueBubbleViewElem?(this.selectedCategoryValue=b.getCategoryValue(c.value),this.selectedCategoryGroup=b.getCategoryList(c.value,!0)):(this.selectedCategoryValue=this.selectedCategoryGroup="",this.selectedSeriesName=[]);if(!this.isDrillDown){var d=$MA.getMouseXY(a.changedTouches[0],a.srcElement);c.dragging&&(c.currentY=a.target.vbObj?d.y:d.y-this.valueBubbleViewElem.offsetTop,c=
(d.y-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime()),this.slashChart(c),b.pointInLegend(d.x,d.y)||this.updateSliderView());this.tappedInLegend&&(!1==this.legendScrolling&&b.selectLegend(d.x,d.y),this.legendScrolling=this.tappedInLegend=!1,this.redrawGraphView(),this.updateSliderView());this.triggerTapEvent(a);this.stopEvent(a)}};
$MA.BI.HBarChartView.prototype.getRowCount=function(){var a=this.getGraph(),b=a.getSeriesCount(0),c=this.getCategoryCount();a.getGraphObj().showTotal&&c++;return b*c};
$MA.BI.HBarChartView.prototype.refreshValueBubbleView=function(){var a=this.getValueBubbleObject(),b=this.getGraph(),c=b.getDataRect(),d=c[0],e=c[2],f=c[3];this.valueBubbleViewElem.style.top=c[1]+"px";this.valueBubbleViewElem.style.left=d+"px";this.valueBubbleViewElem.width=e;this.valueBubbleViewElem.height=f;c=b.getSeriesCount(0);d=b.getTableProperty("TableFirstRow");0!==c&&(a.startY=-(d%c)*(b.calcBarWidth()+2*b.calcBarGap()),a.incr=b.calcBarEntryWidth(),a.itemSize=a.incr,a.offset=a.incr/2,a.update(),
a.reset(),a.value<(this.getRowCount()-b.getTableProperty("TableFirstRow"))/b.getSeriesCount(0)&&(b.getValueBubble()&&(c=Math.floor(d/b.getSeriesCount(0)),a.value+=c,this.updateValueBubble(),a.value-=c),a.plot("waterfallbar"===b.graphType),b.updateValueBubbleValue(a.value),this.updateSliderView()))};
$MA.BI.HBarChartView.prototype.updateSliderView=function(){var a=this.getValueBubbleObject(),b=this.getGraph(),c=this.getGraphGob(),d=b.getSeriesCount(0),e=b.getTableProperty("TableFirstRow");a.startY=-(e%d)*(b.calcBarWidth()+2*b.calcBarGap());a.update();if(a.value<(this.getRowCount()-e)/b.getSeriesCount(0)){if(b.getValueBubble()){var f=Math.floor(e/b.getSeriesCount(0));a.value+=f;this.updateValueBubble();a.value-=f}a.plot();b.updateValueBubbleValue(a.value);this.redrawGraphView()}d=Math.floor(e/
d)+a.value;a.value=d;a.categoryText=b.getCategoryString(d);a.categoryDisplayText=b.getCategoryDisplayText(d);a.categoryDisplayName=c.getObject("category").getProperty("displayname");a.valueDisplayName=c.getObject("values").getDisplayName(0);a.valueDisplayText=b.getDataDisplayString(d,c.getValueFormat(0));a.text=b.getDataString(d,c.getValueFormat(0));this.updateAccessibiltyContent()};
$MA.BI.HBarChartView.prototype.resetTable=function(){var a=this.getGraph(),b=this.getGraphGob();0==this.chartObj.zoomingLevels.length?a.setTableProperty("TableHeaderNamesdimTitle",b.getCategoryName()):this.chartObj.zoomingLevels[this.chartObj.level].title?a.setTableProperty("TableHeaderNamesdimTitle",this.chartObj.zoomingLevels[this.chartObj.level].title):a.setTableProperty("TableHeaderNamesdimTitle",this.chartObj.zoomingLevels[this.chartObj.level].categoryColumn);a.setTableProperty("TableHeaderNamesrowHeader",
b.getValueName());this.getTableView().dvObj=void 0};$MA.BI.HBarChartView.prototype.refreshGraphView=function(){var a=this.getGraphElem(),b=this.getGraph();this.graphWidth!=this.graphViewElem.offsetWidth||!this.isToggleTableMode||this.isZoomingLevelChanged||this.isDataChanged?(b.updateValueBubbleValue(-1),this.getGraphView().refresh()):(b.refreshBrush(),b.redraw(a))};
$MA.BI.HBarChartView.prototype.initializeData=function(){var a;if("groupUp"===this.refreshAction||"groupDown"===this.refreshAction)this.refreshAction="updateTable",a=0;$MA.BI.ChartView.prototype.initializeData.call(this);void 0!==a&&(a=this.getCategoryCount(),this.setFirstItem(0),$MA.BI.ChartView.prototype.setMaxItems.call(this,a),this.setVisibleCategoryCount(a))};
$MA.BI.HBarChartView.prototype.showTableValue=function(a){var b=this.getGraphElem(),c=this.getGraph();c&&(c.showTableValue(a),c.refresh(b,!1),this.refreshValueBubbleView(!1))};$MA.BI.HBarChartView.prototype.showValueBubble=function(a){};$MA.BI.HBarChartView.prototype.stopEvent=function(a){a.preventDefault();"mouseup"!==a.type&&a.stopPropagation()};$MA.BI.LineChartView=function(a,b){$MA.BI.BarChartView.call(this,a,b)};$MA.BI.LineChartView.prototype=new $MA.BI.BarChartView;
$MA.BI.LineChartView.prototype.onDblClick=function(a){var b=this.getGraph();if(void 0!=a.target.vbObj){var c=void 0!=a.offsetX?a.offsetX:a.layerX;a=void 0!=a.offsetY?a.offsetY:a.layerY;c+=this.valueBubbleViewElem.offsetLeft;a+=this.valueBubbleViewElem.offsetTop;var d=this.getValueBubbleObject(),b=b.getLineObjectAtPointer(c,a,d.value);null!=b&&this.setDrillDown(b)}};
$MA.BI.LineChartView.prototype.refreshValueBubbleView=function(a){var b=this.getValueBubbleObject(),c=this.getGraph(),d=c.getDataRect(),e=d[0],f=d[1],g=d[2],h=d[3],d=0;c.getValueBubble()&&c.checkValueBubbleStyle($MA.ValueBubbleStyle.TOP)&&(d=b.getHeight(),d=f>d?d:f);this.valueBubbleViewElem.style.top=f-d+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=h+d;e=c.getMaxItemCount();f=c.calcLineStartPos(g);1==e?(b.incr=g/2,b.center=!0):(b.incr=
(g-2*f)/(e-1),b.center=!1);b.itemSize=c.getElementWidth();0>=b.itemSize||(b.gap=f,c.getValueBubble()&&b.show(this,f,d,0,a,this.getSelectedCategoryIndexRel()))};$MA.BI.BubbleChartView=function(a,b){$MA.BI.ChartView.call(this,a,b);var c=document.getElementById(a);c&&(this.createToolBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createTableView(c),this.createWhatIfView(c),this.createDynamicAnalysisView(c))};
$MA.BI.BubbleChartView.prototype=new $MA.BI.ChartView;$MA.BI.BubbleChartView.prototype.onGraphViewInitialized=function(a){a=this.getGraph();a.setLegendProperty("legend","none");var b=this.getGraphGob(),c=b.getObject("Category").getProperty("column"),b=b.getProperty("scattered"),c=this.chartObj.dvObj.getTableColumn(c);b&&(c&&c.type==$MA.TableColumnType.NUMBER)&&a.setDataScattered(!0);this.createValueBubbleView();$MA.BI.ValueBubble.create("hbvs",this.valueBubbleViewElem.id);this.initialize()};
$MA.BI.BubbleChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null};var startTouchX1,startTouchX2,startTouchX,isSwipe;
$MA.BI.BubbleChartView.prototype.onTouchStart=function(a){this.single_tap=this.needsRefresh=!1;var b=this.getGraph();this.tapMoved=this.tappedInLegend=void 0;if(1==a.targetTouches.length){var c=a.targetTouches.item(0),d=new Date,e=d.getTime()-this.lastTouchEvent.getTime(),f=$MA.getMouseXY(c,a.target);this.startX=f.x;this.startY=f.y;if(500<e)if(this.single_tap=!0,void 0!==a.target.vbObj)this.onValueBubbleViewTouchStart(a);else b.pointInLegend(this.startX,this.startY)&&(this.tappedInLegend=!0);else 1==
a.touches.length&&(this.lastTouchIsTap&&50<e)&&void 0!=a.target.vbObj&&(f=$MA.getMouseXY(c,a.srcElement),c=f.x+this.valueBubbleViewElem.offsetLeft,f=f.y+this.valueBubbleViewElem.offsetTop,e=this.getValueBubbleObject(),b=b.getObjectAtPointer(c,f,e.value),this.fillSelectedValues(b),0<b.length&&this.setDrillDown(b[0].drawObj));this.lastTouchEvent=d;this.lastTouchIsTap=1<a.touches.length?!1:!0}else 2==a.targetTouches.length&&(this.startTouchX1=a.targetTouches[0].clientX,this.startTouchX2=a.targetTouches[1].clientX,
this.startTouchX=this.startTouchX1,this.lastTouchEvent=new Date,this.needsRefresh=!0);this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.BubbleChartView.prototype.onTouchMove=function(a){var b=new Date,c=b-this.lastTouchEvent,d=this.getGraph();if(1==a.targetTouches.length){var b=a.targetTouches.item(0),b=$MA.getMouseXY(b,a.target),e=this.startX-b.x,f=this.startY-b.y;if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)this.tapMoved=!0;if(this.tappedInLegend){if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)d.doScrollLegend(e,
f),this.startX=b.x,this.startY=b.y,this.legendScrolling=!0}else this.onValueBubbleViewTouchMove(a)}else if(2==a.targetTouches.length&&c>$MA.BI.ChartView.touchTimeSlot){var f=a.targetTouches[0],g=a.targetTouches[1],c=f.clientX-this.startTouchX1,h=g.clientX-this.startTouchX2;if(-15>c&&-15>h)c=1;else if(15<c&&15<h)c=2;else{var h=Math.abs(f.clientX-g.clientX),k=Math.abs(this.startTouchX1-this.startTouchX2),c=h-k;if(c=-15>c?3:15<c?4:void 0)e=a.scale?1/a.scale:k/h,isFinite(e)||(c=void 0)}if(c){var l=this.getCategoryCount(),
h=this.getFirstItem(),k=this.getMaxItems();3>c?(1===c&&h+k<l?h++:2===c&&0<h?h--:c=void 0,c&&(1===c?h+1+k<l?d.setEndSwipe(!0):d.setEndSwipe(!1):0<h-1?d.setStartSwipe(!0):d.setStartSwipe(!1),this.startTouchX1=f.clientX,this.startTouchX2=g.clientX)):(d=this.getVisibleCategoryCount(),d>l&&(d=l),e=Math.round(e*k+0.5),2>e&&1<k&&(e=2),e>d&&(e=d),k!=e?(h=Math.floor(h-(e-k)/2),0>h?h=0:h+e>d&&(h=d-e),this.setMaxItems(e)):c=void 0);c&&(this.setFirstItem(h),this.refreshSelectedCategoryIndex(),this.refreshGraphView(),
this.refreshValueBubbleView(!0),this.lastTouchEvent=b,this.needsRefresh=!0);this.swipeOrPinch=c}}2<=a.targetTouches.length&&(this.tapMoved=!0);this.lastTouchIsTap=!1;this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.BubbleChartView.prototype.onTouchEnd=function(a){var b=this.getGraph(),c=this.getValueBubbleObject();this.needsRefresh&&(b.setStartSwipe(!1),b.setEndSwipe(!1),this.refreshSelectedCategoryIndex(),this.refreshRangeSelectorView(),this.refreshValueBubbleView(!0),this.needsRefresh=void 0);if(this.legendScrolling)this.tappedInLegend=this.legendScrolling=!1;else if(this.tappedInLegend)b.selectLegend(this.startX,this.startY),c&&c.plot(),this.refreshChartViews(),this.tappedInLegend=void 0;else{var d;
try{d=b.isDataScattered()?c.value[0].ItemNumber:c.value}catch(e){}this.selectedCategoryValue=b.getCategoryValue(d);this.selectedCategoryGroup=b.getCategoryList(d,!0);this.setSelectedCategoryIndex(this.getGraphGob().getFirstItem()+d);this.onValueBubbleViewTouchEnd(a);!this.single_tap||(this.targetIsSlider&&b.getValueBubble()||this.tapMoved)||this.triggerTapEvent(a);this.targetIsSlider&&(this.targetIsSlider=!1);this.single_tap=void 0}this.tapMoved=this.swipeOrPinch=void 0;this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.BubbleChartView.prototype.slashChart=function(a){var b=this;if(!(0<b.count)){var c=function(){b.count++;if(b.count>=b.animationCount)b.count=0,b.refreshGraphView(),setTimeout(function(){b.refreshValueBubbleView(!0)},100);else{var d=b.getGraphGob(),e=d.getFirstItem(),f=d.getMaxItems(),g=b.getCategoryCount();0>a&&e+f<g?(d.setFirstItem(e+1),b.refreshGraphView(),b.refreshValueBubbleView(!0),setTimeout(c,100)):0<a&&0<e?(d.setFirstItem(e-1),b.refreshGraphView(),b.refreshValueBubbleView(!0),setTimeout(c,
100)):(b.refreshGraphView(),b.refreshValueBubbleView(!0))}};b.animationCount=Math.floor(10*Math.abs(a)-3);0>=b.animationCount&&(b.animationCount=1);5<b.animationCount&&(b.animationCount=5);b.count=0;setTimeout(c,10)}};
$MA.BI.BubbleChartView.prototype.refreshValueBubbleView=function(a){var b=this.getValueBubbleObject(),c=this.getGraph(),d=c.getDataRect(),e=d[0],f=d[1],g=d[2],d=d[3],h=0;c.getValueBubble()&&c.checkValueBubbleStyle($MA.ValueBubbleStyle.TOP)&&(h=b.getHeight(),h=f>h?h:f);this.valueBubbleViewElem.style.top=f-h+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=d+h;b.incr=c.getElementIncrX();b.itemSize=c.getElementWidth();this.valueBubbleViewElem.style.display=
"";c.isDataScattered()?b.show(this,c.getElementStartX(),h,b.itemSize/2,a):b.show(this,c.calcBubbleStartPos(g)-b.incr/2,h,b.incr/2,a)};$MA.BI.BubbleChartView.prototype.getSelectedBubbleInfo=function(){return"bubble"!=this.getChartType()?void 0:this.getGraph().getSelectedBubbleInfo()};$MA.BI.BubbleChartView.prototype.setMonoSymbol=function(a){var b=this.getGraph(),b=this.getGraph();b.setProperty("MonoSymbol",a)};
$MA.BI.BubbleChartView.prototype.setSymbolPalette=function(a){var b=this.getGraph(),b=this.getGraph();b.setProperty("SymbolPalette",a)};$MA.BI.SimpleChartView.prototype.setBubbleBorderColor=function(a){this.getGraph().setProperty("BubbleBorderColor",a)};$MA.BI.SimpleChartView.prototype.setBubbleMinSize=function(a){this.getGraph().setProperty("BubbleMinSize",a)};$MA.BI.BubbleChartView.prototype.stopEvent=function(a){a.preventDefault();"mouseup"!==a.type&&a.stopPropagation()};
$MA.BI.PieChartView=function(a,b){var c=this;$MA.BI.ChartView.call(this,a,b);this.clickTouch=!1;var d=document.getElementById(a);void 0!=d&&(this.createToolBar(d),this.createGraphView(d),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createTableView(d),this.createWhatIfView(d),this.createDynamicAnalysisView(d),this.onMouseMoveListener=function(a){c.onMouseMove(a)})};$MA.BI.PieChartView.prototype=new $MA.BI.ChartView;
$MA.BI.PieChartView.CLICK_TOLERANCE=3;$MA.BI.PieChartView.prototype.onGraphViewInitialized=function(a){this.getGraph().setPieProperty("showpielabels",!1);this.createValueBubbleView();$MA.BI.ValueBubble.create("pbvs",this.valueBubbleViewElem.id);this.initialize()};
$MA.BI.PieChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null;this.clickTouch=!1};$MA.BI.PieChartView.prototype.initSliderCenter=function(){var a=this.getGraph(),b=this.getValueBubbleObject(),a=a.getCenter();b.centerX=a[0]-this.valueBubbleViewElem.offsetLeft;b.centerY=a[1]-this.valueBubbleViewElem.offsetTop};
$MA.BI.PieChartView.prototype.onSingleTouchStart=function(a){var b=this.valueBubbleViewElem,c=this.getGraph(),d=this.getValueBubbleObject();this.tappedInLegend=void 0;var e=this.startX,f=this.startY;a.target!=b?(e-=b.offsetLeft,f-=b.offsetTop):(this.startX+=b.offsetLeft,this.startY+=b.offsetTop);this.lastX=this.startX;this.lastY=this.startY;d.x=e;d.y=f;d.updating(d.x,d.y);this.rotateValue=0;c.pointInLegend(this.startX,this.startY)?(this.tappedInLegend=!0,c.getValueBubble()||this.showValueBubble(!0),
d.plot()):c.getValueBubble()&&(this.tappedInLegend=!1,0<d.onMouseDown(e,f)?d.dragging=!1:(d.dragging=!0,d.hasPieSelected()||(a=d.getRadian(),b=c.getPieProperty("PieFillBrush",a),d.text=c.getPieProperty("PieDataString",a),void 0!=b&&(d.setLegends([c.getPieProperty("PieSlice",a)]),d.plot()))))};
$MA.BI.PieChartView.prototype.onSingleTouchMove=function(a,b,c){var d=this.getGraph(),e;if(this.tappedInLegend){if(e=this.startX-b,a=this.startY-c,Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(a)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)d.doScrollLegend(e,a),this.startX=b,this.startY=c,this.legendScrolling=!0,d.getValueBubble()&&(e=this.getValueBubbleObject(),e.plot()),d.refreshPie()}else if(d.getValueBubble()){var f=this.valueBubbleViewElem;e=this.getValueBubbleObject();a.target!=f&&
(b-=f.offsetLeft,c-=f.offsetTop);e.scrolling?e.doScroll(b,c):e.dragging&&(this.lastX=b,this.lastY=c,a.target==f&&(this.lastX+=f.offsetLeft,this.lastY+=f.offsetTop),e.updating(b,c),b=!0,e.hasPieSelected()&&(Math.abs(this.rotateValue+e.value)>=Math.PI/18?b=!1:this.rotateValue+=e.value),b&&(e.hasPieSelected()||(b=e.getRadian(),void 0!=d.getPieProperty("PieFillBrush",b)&&(e.text=d.getPieProperty("PieDataString",b),e.setLegends([d.getPieProperty("PieSlice",b)]),e.plot())),d.rotatePie(e.value)))}};
$MA.BI.PieChartView.prototype.onMouseDown=function(a){this.getGraph().inRotatePie||(this.initSliderCenter(),this.startX=void 0!=a.offsetX?a.offsetX:a.layerX,this.startY=void 0!=a.offsetY?a.offsetY:a.layerY,this.valueBubbleViewElem.style.display="",this.onSingleTouchStart(a),this.graphViewElem.onmousemove=this.onMouseMoveListener);this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onMouseMove=function(a){this.onSingleTouchMove(a,void 0!=a.offsetX?a.offsetX:a.layerX,void 0!=a.offsetY?a.offsetY:a.layerY);this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onMouseUp=function(a){var b=this.getGraph();if(this.legendScrolling)this.legendScrolling=!1;else{var c=this.getValueBubbleObject(),d=void 0!=a.offsetX?a.offsetX:a.layerX,e=void 0!=a.offsetY?a.offsetY:a.layerY,f=d,g=e;a.target!=this.valueBubbleViewElem?(d-=this.valueBubbleViewElem.offsetLeft,e-=this.valueBubbleViewElem.offsetTop):(f+=this.valueBubbleViewElem.offsetLeft,g+=this.valueBubbleViewElem.offsetTop);var h=!1;if(c.scrolling){c.onMouseUp(d,e);c.scrolling=!1;return}c.dragging&&
(c.update(),this.graphViewElem.onMouseMove=void 0);Math.abs(f-this.startX)<$MA.BI.PieChartView.CLICK_TOLERANCE&&Math.abs(g-this.startY)<$MA.BI.PieChartView.CLICK_TOLERANCE&&(this.tappedInLegend?b.selectLegend(f,g)&&(b.selectPie(),h=!0):this.triggerTapEvent(a));c.hasPieSelected()&&0!=this.rotateValue&&b.rotatePie(-1*this.rotateValue);this.rotateValue=0;h||c.hasPieSelected()||(d=c.getRadian(),(e=b.getPieProperty("RadianDrawObject",d))&&b.rotatePie(d-((e.radEnd+e.radStart)/2+e.offset)+2*Math.PI));this.refreshValueBubbleLegends();
c.plot()}this.tappedInLegend&&this.stopEvent(a);this.tappedInLegend=void 0};
$MA.BI.PieChartView.prototype.onTouchStart=function(a){var b=this.getGraph();if(1==a.touches.length&&!b.inRotatePie){var c=a.touches.item(0),d=$MA.getMouseXY(c,a.target);this.startX=d.x;this.startY=d.y;this.valueBubbleViewElem.style.display="";this.initSliderCenter();c=new Date;if(!this.clickTouch||500<c.getTime()-this.lastTouchEvent.getTime())this.onSingleTouchStart(a);else a.target==this.valueBubbleViewElem&&(b=b.getObjectAtPointer(d.x+this.valueBubbleViewElem.offsetLeft,d.y+this.valueBubbleViewElem.offsetTop,
this.getValueBubbleObject().value),this.fillSelectedValues(b),0<b.length&&this.setDrillDown(b[0].drawObj));this.lastTouchEvent=c}this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onTouchMove=function(a){var b=new Date;if(1==a.touches.length){var c=a.touches.item(0),c=$MA.getMouseXY(c,a.target),d=c.x,e=c.y,f;if($MA.Browser.isJB42StockBrowser)this.plotByShow&&(c=this.getValueBubbleObject().context.canvas,f=c.width,c.width=f,this.plotByShow=!1),this.onSingleTouchMove(a,d,e);else if(!this.pieMoveTimerId){this.plotByShow&&(c=this.getValueBubbleObject().context.canvas,f=c.width,c.width=f,this.plotByShow=!1);var g=this;this.pieMoveTimerId=setTimeout(function(){g.onSingleTouchMove(a,
d,e);g.pieMoveTimerId=null},50)}this.lastTouchEvent=b}this.tappedInLegend&&this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onTouchEnd=function(a){this.pieMoveTimerId&&(clearTimeout(this.pieMoveTimerId),this.pieMoveTimerId=null);var b=this.getValueBubbleObject();b.dragging&&b.update();this.clickTouch=!1;var c=this.getGraph();if(this.legendScrolling)this.legendScrolling=void 0;else{var d=this.lastX,e=this.lastY,f=!1;b.scrolling?(b.onMouseUp(d,e),b.scrolling=!1):(Math.abs(d-this.startX)<$MA.BI.PieChartView.CLICK_TOLERANCE&&Math.abs(e-this.startY)<$MA.BI.PieChartView.CLICK_TOLERANCE&&(this.tappedInLegend?
c.selectLegend(d,e)&&(c.selectPie(),f=!0):(this.clickTouch=!0,this.triggerTapEvent(a))),b.hasPieSelected()&&0!=this.rotateValue&&c.rotatePie(-1*this.rotateValue),this.rotateValue=0,f||b.hasPieSelected()||(d=b.getRadian(),(e=c.getPieProperty("RadianDrawObject",d))&&c.rotatePie(d-((e.radEnd+e.radStart)/2+e.offset)+2*Math.PI)),this.refreshValueBubbleLegends(),b.plot())}this.tappedInLegend&&this.stopEvent(a);this.tappedInLegend=void 0};
$MA.BI.PieChartView.prototype.refreshValueBubbleLegends=function(){var a=this.getGraph(),b=this.getValueBubbleObject(),c=a.getSelectedPieSlices();0<c.length?b.setLegends(c,!0):(c=b.getRadian(),b.setLegends([a.getPieProperty("PieSlice",c)]))};
$MA.BI.PieChartView.prototype.refreshValueBubbleView=function(a){var b=this.getValueBubbleObject(),c=this.getGraph(),d=c.getDisplayRect(),e=d[0],f=d[1],g=d[2],d=d[3],h=80;f<h&&(h=f);var k=0;c.getLegendProperty("isHorizontal")&&(k=void 0===c.getLegendProperty("totalHeight")?0:c.getLegendProperty("totalHeight"));if(c.getLegendProperty("legendposition")===$MA.Graph.LegendType.TOP){var l=c.getLegendProperty("topmargin");this.valueBubbleViewElem.style.top=f-h+k+l+"px";this.valueBubbleViewElem.style.left=
e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=d+h-k-l}else c.getLegendProperty("legendposition"),this.valueBubbleViewElem.style.top=f-h+"px",this.valueBubbleViewElem.style.left=e+"px",this.valueBubbleViewElem.width=g,this.valueBubbleViewElem.height=d+h;b.radius=c.getPieProperty("PieRadius");b.yOffset=f;c.getValueBubble()?c.setValueBubbleProperty("ValueBubbleHeight",b.getHeight()):c.setValueBubbleProperty("ValueBubbleHeight",0);this.valueBubbleViewElem.style.display="";this.initSliderCenter();
b.show(this,a);this.updateAccessibiltyContent()};$MA.BI.PieChartView.prototype.showValueBubble=function(a){this.getGraph().setValueBubbleProperty("ValueBubble",a);this.refresh()};$MA.BI.PieChartView.prototype.getValueBubbleHeight=function(){return this.getGraph().getValueBubble()?$MA.BI.ChartView.prototype.getValueBubbleHeight.call(this):0};$MA.BI.PieChartView.prototype.stopEvent=function(a){a.preventDefault();"mouseup"!==a.type&&a.stopPropagation()};
$MA.BI.ChartTableDataView=function(a,b,c){$MA.DataView.call(this,a);this.graphViewElem=b;this.chartObj=c;this.columnX=[];this.format=void 0;this.firstRow=0;this.maxRows=10;this.rowDiff=this.tableWidth=0;this.lastCol=this.startCol=this.getFirstContentsColumn();this.moveable=!1;this.columnW=[];this.fontSize="14px";this.fontFamily="Helvetica";this.textColor="black";this.rowHeaderBkColor=this.dimTitleBkColor="#DDDDDD";this.contentsBkColor=this.colHeadersBkColor="#F7F7F7";this.gridLineColor="white";this.separatorLineColor=
"#DDDDDD";this.lastRedrawTime=this.lastTouchEvent=new Date;this.textShadowColor="white";this.highlightColor="#0090D5";this.highlightTextColor="#FFFFFF";this.dir=$MA.dir;this.bubbleValuesFormatters=new $MA.Hash;if(a=document.getElementById(a)){var d=this;$MA.isTouchEventSupported?(a.addEventListener("touchstart",function(a){d.onTouchStart(a)},!1),a.addEventListener("touchmove",function(a){d.onTouchMove(a)},!1),a.addEventListener("touchend",function(a){d.onTouchEnd(a)},!1)):(a.addEventListener("mousedown",
function(a){d.onMouseDown(a)},!1),a.addEventListener("mouseup",function(a){d.onMouseUp(a)},!1),a.addEventListener("dblclick",function(a){d.onDblClick(a)},!1))}this.getStyles()};$MA.BI.ChartTableDataView.prototype=new $MA.DataView;$MA.BI.ChartTableDataView.PADDING=10;$MA.BI.ChartTableDataView.ROWHEIGHT=44;$MA.BI.ChartTableDataView.getOwner=function(a){for(;a&&void 0==a.macontrol;)a=a.parentNode;return a};$MA.BI.ChartTableDataView.getCanvasElem=function(a){return a.macontrol.getElement("canvas_1")};
$MA.BI.ChartTableDataView.getTableView=function(a){return a.macontrol};$MA.BI.ChartTableDataView.prototype.getGraphView=function(){return this.graphViewElem.macontrol};$MA.BI.ChartTableDataView.prototype.getGraphElem=function(){return this.graphViewElem.children[0]};$MA.BI.ChartTableDataView.prototype.getGraph=function(){return this.getGraphElem().macontrol};
$MA.BI.ChartTableDataView.prototype.getStyles=function(){var a=$MA.getCSSRule(".chart_table");a&&(""!=a.style.fontSize&&(this.fontSize=a.style.fontSize),""!=a.style.fontFamily&&(this.fontFamily=a.style.fontFamily,this.fontFamily=this.fontFamily.replace(/'/g,"")),""!=a.style.color&&(this.textColor=a.style.color),""!=a.style.background&&(this.gridLineColor=a.style.background));(a=$MA.getCSSRule(".chart_table_dimension_title"))&&""!=a.style.backgroundColor&&(this.dimTitleBkColor=a.style.backgroundColor);
(a=$MA.getCSSRule(".chart_table_row_header"))&&""!=a.style.backgroundColor&&(this.rowHeaderBkColor=a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_column_headers"))&&""!=a.style.backgroundColor&&(this.colHeadersBkColor=a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_contents"))&&""!=a.style.backgroundColor&&(this.contentsBkColor=a.style.backgroundColor);if(a=$MA.getCSSRule(".chart_table_highlight"))""!=a.style.backgroundColor&&(this.highlightColor=a.style.backgroundColor),""!=a.style.color&&
(this.highlightTextColor=a.style.color)};$MA.BI.ChartTableDataView.prototype.stopEvent=function(a){a.preventDefault();a.stopPropagation()};$MA.BI.ChartTableDataView.prototype.mouseMoveListener=function(a){var b=$MA.BI.ChartTableDataView.getOwner(a.target);if(void 0!=b)$MA.BI.ChartTableDataView.getTableView(b).onMouseMove(a)};
$MA.BI.ChartTableDataView.prototype.onMouseDown=function(a){var b=a;a=this.translateEventPos(a);this.currentX=a.layerX;this.currentY=a.layerY;this.rowDiff=0;this.lastRedrawTime=new Date;var c=this.dvObj.getRowCount();(this.firstRow+this.maxRows-1<=c||this.moveable)&&document.getElementById(this.id).addEventListener("mousemove",this.mouseMoveListener,!1);c=this.getFocusRow(a.layerY);a=this.getFocusCol(a.layerX);0<=c&&0<=a&&(this.clickRow=c,this.clickCol=a,this.redraw());this.stopEvent(b)};
$MA.BI.ChartTableDataView.prototype.onMouseMove=function(a){var b=a;a=this.translateEventPos(a);var c=Math.round((this.currentY-a.layerY)/($MA.BI.ChartTableDataView.ROWHEIGHT/2)),d=this.dvObj.getRowCount();this.isShowTotal()&&d++;if(c!=this.rowDiff){var e=this.firstRow+c;0<=e&&e+this.maxRows-1<=d&&(this.firstRow=e,this.redraw());this.rowDiff=c}if(Math.abs(this.currentX-a.layerX)>=$MA.BI.ChartTableDataView.ROWHEIGHT){c=0;c=this.currentX>a.layerX?1:-1;this.currentX=a.layerX;if(this.startCol==this.getFirstContentsColumn()&&
0>c)return;a=this.dvObj.getTableColumns();d=document.getElementById(this.id);if(this.lastCol==a.length-1&&0<c&&this.tableWidth<=d.offsetWidth)return;c=this.startCol+c;c>=this.getFirstContentsColumn()&&c<a.length&&(this.startCol=c,this.redraw())}this.stopEvent(b)};
$MA.BI.ChartTableDataView.prototype.onMouseUp=function(a){var b=a;a=this.translateEventPos(a);document.getElementById(this.id).removeEventListener("mousemove",this.mouseMoveListener,!1);a=(a.layerY-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime());this.slashTable(a);this.stopEvent(b)};
$MA.BI.ChartTableDataView.prototype.slashTable=function(a){var b=this,c=function(){b.count++;if(!(b.count>b.animationCount)){var d=b.dvObj.getRowCount(),e=1;0<a&&(e=-1);e=b.firstRow+e;0<=e&&e+b.maxRows-1<=d&&(b.firstRow=e,b.redraw(),setTimeout(c,70))}};b.animationCount=Math.floor(10*Math.abs(a)-3);b.count=0;setTimeout(c,70)};$MA.BI.ChartTableDataView.prototype.onDblClick=function(a){a=this.getFocusRow(a.layerY);0<=a&&this.setDrillDown(a)};
$MA.BI.ChartTableDataView.prototype.getFocusRow=function(a){var b=this.dvObj.getRowCount(),b=this.firstRow+this.maxRows>b?b:this.firstRow+this.maxRows,c=$MA.BI.ChartTableDataView.ROWHEIGHT,d,e;for(d=this.firstRow;d<b;d++)if(e=c+(d-this.firstRow)*$MA.BI.ChartTableDataView.ROWHEIGHT,a>=e&&a<e+$MA.BI.ChartTableDataView.ROWHEIGHT)return d;return-1};
$MA.BI.ChartTableDataView.prototype.getFocusCol=function(a){var b=this.getFirstContentsColumn(),c;for(c=0;c<b;c++)if(a>=this.columnX[c]&&a<this.columnX[c+1])return c;return-1};
$MA.BI.ChartTableDataView.prototype.highlightCell=function(a,b){var c=this.dvObj,d=c.getRowCount(),e=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,d=c.getRow(a),f=d[b],g=1,h=a,k=!1;a<this.firstRow&&(k=!0,g=0);a>e&&(g=0);var l;for(l=a-1;l>=this.firstRow&&!(d=c.getRow(l),this.chartObj.gob.suppliedTotals&&""===f||d[b]!=f);l--)l>e||(g++,h=l);for(l=a+1;l<e&&!(d=c.getRow(l),this.chartObj.gob.suppliedTotals&&""===f||d[b]!=f);l++)l<this.firstRow||(g++,k&&(h=l,k=!1));e=this.context;e.fillStyle=
this.highlightColor;if(0<g)if(this.chartObj.gob.suppliedTotals&&1==g){d=c.getRow(a);c=this.columnW[b];g=this.getFirstContentsColumn()-1;if(""==f){for(l=b+1;l<=g;l++)c+=this.columnW[l];do b--,c+=this.columnW[b];while(0<=b&&""===d[b])}else if(b<g&&""===d[b+1])for(l=b+1;l<=g;l++)c+=this.columnW[l];d=this.getStartPosition(this.columnX[b],(a-this.firstRow+1)*$MA.BI.ChartTableDataView.ROWHEIGHT,c);e.fillRect(d.x,d.y,c,$MA.BI.ChartTableDataView.ROWHEIGHT)}else d=this.getStartPosition(this.columnX[b],(h-
this.firstRow+1)*$MA.BI.ChartTableDataView.ROWHEIGHT,this.columnW[b]),e.fillRect(d.x,d.y,this.columnW[b],g*$MA.BI.ChartTableDataView.ROWHEIGHT)};$MA.BI.ChartTableDataView.prototype.setDrillDown=function(a){var b=this.dvObj,c=this.getFirstContentsColumn(),b=b.getRow(a),d;a=[];for(d=0;d<c;d++)a.push(b[d]);c=document.getElementById(this.id);c=$MA.BI.SimpleChartView.getChart(c.parentNode);if(c.ondrilldown)c.ondrilldown(a)};
$MA.BI.ChartTableDataView.prototype.onTouchStart=function(a){var b=a.touches.item(0),c=$MA.getMouseXY(b,a.srcElement),c=this.translateCoordinate(c.x,c.y);this.currentX=c.x;this.currentY=c.y;this.rowDiff=0;this.lastRedrawTime=b=new Date;if(500>=b.getTime()-this.lastTouchEvent.getTime()){var d=this.getFocusRow(c.y);0<=d&&this.setDrillDown(d)}else d=this.getFocusRow(c.y),c=this.getFocusCol(c.x),0<=d&&0<=c&&(this.clickRow=d,this.clickCol=c,this.redraw());this.lastTouchEvent=b;this.stopEvent(a)};
$MA.BI.ChartTableDataView.prototype.onTouchMove=function(a){var b=$MA.BI.ChartTableDataView.ROWHEIGHT/2,c=a.touches.item(0),c=$MA.getMouseXY(c,a.srcElement),c=this.translateCoordinate(c.x,c.y),d=Math.round((this.currentY-c.y)/b),e=this.dvObj.getRowCount();this.isShowTotal()&&e++;if(d!=this.rowDiff){var f=this.firstRow+d;0<=f&&f+this.maxRows-1<=e&&(this.firstRow=f,this.redraw());this.rowDiff=d}if(Math.abs(this.currentX-c.x)>=b){b=0;b=this.currentX>c.x?1:-1;this.currentX=c.x;if(this.startCol==this.getFirstContentsColumn()&&
0>b){this.stopEvent(a);return}c=this.dvObj.getTableColumns();d=document.getElementById(this.id);if(this.lastCol==c.length-1&&0<b&&this.tableWidth<=d.offsetWidth){this.stopEvent(a);return}b=this.startCol+b;b>=this.getFirstContentsColumn()&&b<c.length&&(this.startCol=b,this.redraw())}this.stopEvent(a)};
$MA.BI.ChartTableDataView.prototype.onTouchEnd=function(a){var b=$MA.getMouseXY(a.changedTouches[0],a.srcElement),b=this.translateCoordinate(b.x,b.y),b=(b.y-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime());this.slashTable(b);this.stopEvent(a)};$MA.BI.ChartTableDataView.prototype.getFirstContentsColumn=function(){var a=this.getGraphView(),b=1;a.dvObj&&(b=a.dvObj.getGraphGob().getCategoryCount());return 0==this.chartObj.zoomingLevels.length?b:this.chartObj.level+1};
$MA.BI.ChartTableDataView.prototype.intializeTable=function(a){var b=this.getFirstContentsColumn(),c=this.dvObj.getTableColumns(),d,e=7;for(d=0;d<b;d++)this.columnX[d]=e,e+=this.columnW[d];for(d=this.startCol;d<c.length;d++)if(this.columnX[d]=e,e+=this.columnW[d],this.lastCol=d,e>a.offsetWidth){this.moveable=!0;break}this.tableWidth=e};
$MA.BI.ChartTableDataView.prototype.calColumnWidth=function(a){var b=this.dvObj,c=b.getTableColumns(),d=b.getRowCount(),e=this.getFirstContentsColumn(),f,g;this.moveable=!1;var h=this.chartObj.dvObj.getGraphGob().getObject("values");g=h.list[0].getProperty("displaytext");var k=-1,l=this.chartObj.dvObj.getTable();a=$MA.BI.ChartTableDataView.getCanvasElem(a);a=a.getContext?a.getContext("2d"):null;a.font=this.fontSize+" "+this.fontFamily;var p;for(p=0;p<c.length;p++)this.columnW[p]=p>=e-1?100:34;var m=
this.isShowTotal();for(p=e-1;p<c.length;p++){g=c[p];f=a.measureText(g.displayName);var n=f.width,q=0;this.isBubble&&0<p&&(g=h.list[p-1],void 0!=g&&(g=g.valueDisplayText,l=this.chartObj.dvObj.getTable(),void 0!=g&&(g=l.getColumn(g))))&&(k=g.id);for(g=0;g<d;g++)f=b.getRow(g),f=f[p],p==e-1?f=$MA.format(f,this.categoryFormat):(m&&("number"==typeof f&&!isNaN(f))&&(q+=f),-1!==k&&(f=l.displayBuffer[g][k]),f=$MA.format(f,this.format)),f=a.measureText(f),n<f.width&&(n=f.width);m&&(f=a.measureText($MA.format(isNaN(q)?
"":q,this.format)),n<f.width&&(n=f.width));this.columnW[p]=n+2*$MA.BI.ChartTableDataView.PADDING+12}};
$MA.BI.ChartTableDataView.prototype.plotBackground=function(a){var b=this.context,c=$MA.BI.ChartTableDataView.ROWHEIGHT,d=a.offsetHeight-c,e=this.getFirstContentsColumn(),f;b.fillStyle=this.dimTitleBkColor;var g=this.columnX[e];f=this.getStartPosition(1,0,g);b.fillRect(f.x,f.y,g,c);b.fillStyle=this.colHeadersBkColor;f=this.getStartPosition(0,c,g);b.fillRect(f.x,f.y,g,d);b.fillStyle=this.rowHeaderBkColor;var h=this.columnX[e],g=a.offsetWidth-this.columnX[e];f=this.getStartPosition(h,0,g);b.fillRect(f.x,
f.y,g,c);b.fillStyle=this.contentsBkColor;f=this.getStartPosition(h,c,g);b.fillRect(f.x,f.y,g,d)};
$MA.BI.ChartTableDataView.prototype.plotDimensionTitle=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.getFirstContentsColumn(),d=this.dvObj.getTableColumns(),e,f;a.fillStyle=this.textColor;var g;for(g=0;g<c;g++)g==c-1&&(e=d[g],a.fillStyle=this.textShadowColor,f=this.translateCoordinate(b+this.columnX[g],b+14+1),a.fillText(e.displayName,f.x,f.y),a.fillStyle=this.textColor,a.fillText(e.displayName,f.x,f.y))};
$MA.BI.ChartTableDataView.prototype.plotRowHeader=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.getFirstContentsColumn(),d=this.dvObj.getTableColumns(),e,f,g=d.length-c;a.fillStyle=this.textColor;var h;for(h=this.startCol;h<=this.lastCol;h++)e=d[h],a.fillStyle=this.textShadowColor,f=this.translateCoordinate(b+this.columnX[h],b+14+1),a.fillText(e.displayName,f.x,f.y),a.fillStyle=this.textColor,a.fillText(e.displayName,f.x,f.y);if(1<g&&!this.isBubble)for(b=this.getGraph(),
h=this.startCol;h<=this.lastCol;h++)f=b.getSeriesFillBrush(h-c),a.fillStyle=f.toString(),f=this.getStartPosition(this.columnX[h],0,7),a.fillRect(f.x,f.y,7,$MA.BI.ChartTableDataView.ROWHEIGHT)};
$MA.BI.ChartTableDataView.prototype.plotColumnHeaders=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.getFirstContentsColumn(),d=this.dvObj,e=d.getRowCount(),e=this.firstRow+this.maxRows>e?e:this.firstRow+this.maxRows,f,g,h,k;a.strokeStyle=this.separatorLineColor;var l,p;for(l=this.firstRow;l<e;l++)for(f=d.getRow(l),g=$MA.BI.ChartTableDataView.ROWHEIGHT*(l-this.firstRow+1),p=0;p<c;p++)if(this.isHightlightCategory(l,p)?a.fillStyle=this.highlightTextColor:a.fillStyle=this.textColor,
p==c-1)this.isDuplicateCategory(l,p)||(h=this.translateCoordinate(b+this.columnX[p],g+b+14),a.fillText($MA.format(f[p],this.categoryFormat),h.x,h.y),h=this.translateCoordinate(this.columnX[p],g),k=this.translateCoordinate(this.columnX[p+1],g),this.drawLine(h.x,h.y,k.x,k.y));else{k=$MA.format(f[p],this.categoryFormat);var m,n;if(d.isGroupHeader(f,p)){h=this.chkGroupHeight(l,p,this.chartObj.gob.suppliedTotals);if(!h){var q;q=this.chartObj.gob.suppliedTotals?this.getColsWidth(p)-2*$MA.BI.ChartTableDataView.PADDING:
this.getRowSpan(l,p)*$MA.BI.ChartTableDataView.ROWHEIGHT-2*$MA.BI.ChartTableDataView.PADDING;for(h=0;h<k.length&&!(n=k.substr(0,h),m=a.measureText(n),m=m.width,m+20>q);h++);k=n+"..."}h=this.translateCoordinate(b+this.columnX[p],g+b+14);this.chartObj.gob.suppliedTotals?a.fillText($MA.format(k,this.categoryFormat),h.x,h.y):this.drawVerticalText(k,b+this.columnX[p],g+b+14);h=this.translateCoordinate(this.columnX[p],g);k=this.translateCoordinate(this.columnX[p+1],g);this.drawLine(h.x,h.y,k.x,k.y)}else if(l==
this.firstRow){q=!0;h=this.chkGroupHeight(l,p);k=$MA.format(f[p],this.categoryFormat);if(!h){var s=this.getRowSpan(l,p);for(h=0;h<k.length;h++){n=k.substr(0,h);m=a.measureText(n);m=m.width;if(40>=g-this.currentX&&3<=k.length){k=k.substr(0,3);q=!1;break}if(m+20>s*$MA.BI.ChartTableDataView.ROWHEIGHT-2*$MA.BI.ChartTableDataView.PADDING)break}q&&(k=n+"...")}this.drawVerticalText(k,b+this.columnX[p],g+b+14)}}this.isShowTotal()&&(a.fillStyle=this.textColor,g+=$MA.BI.ChartTableDataView.ROWHEIGHT,h=this.translateCoordinate(b+
this.columnX[0],g+b+14),a.fillText($MA.format($MA.getLocalisation(null,"Total","Total"),this.categoryFormat),h.x,h.y),h=this.translateCoordinate(this.columnX[0],g),k=this.translateCoordinate(this.columnX[c],g),this.drawLine(h.x,h.y,k.x,k.y))};
$MA.BI.ChartTableDataView.prototype.isHightlightCategory=function(a,b){if(!this.chartObj.gob.suppliedTotals&&b!=this.clickCol||this.chartObj.gob.suppliedTotals&&a!=this.clickRow)return!1;for(var c=this.dvObj,d=c.getRowCount(),e=c.getRow(a),f=e[b],g=!0,h=a;h!=this.clickRow;){h+=1;if(h>=d)break;e=c.getRow(h);if(e[b]!=f){g=!1;break}}if(h==this.clickRow&&g)return this.chartObj.gob.suppliedTotals&&b>this.clickCol?!1:!0;for(h=a;h!=this.clickRow;){h-=1;if(0>h)return!1;e=c.getRow(h);if(e[b]!=f)return!1}return!0};
$MA.BI.ChartTableDataView.prototype.isDuplicateCategory=function(a,b){var c=this.dvObj,d=c.getRow(a),e=d[b],d=a-1;return d>=this.firstRow&&(d=c.getRow(d),d[b]==e&&(!this.chartObj.gob.suppliedTotals||""!==e))?!0:!1};
$MA.BI.ChartTableDataView.prototype.getRowSpan=function(a,b){var c=this.dvObj,d=c.getRowCount(),d=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,e=c.getRow(a),f=e[b],g,h=1;for(g=a-1;g>=this.firstRow;g--)if(e=c.getRow(g),e[b]==f)h++;else break;for(g=a+1;g<d;g++)if(e=c.getRow(g),e[b]==f)h++;else break;return h};$MA.BI.ChartTableDataView.prototype.getColsWidth=function(a){for(var b=this.getFirstContentsColumn(),c=0;a<b;a++)c+=this.columnW[a];return c};
$MA.BI.ChartTableDataView.prototype.chkGroupHeight=function(a,b,c){var d=this.dvObj.getRow(a)[b],d=this.context.measureText(d).width;if(c){if(d>this.getColsWidth(b)-2*$MA.BI.ChartTableDataView.PADDING)return!1}else if(a=this.getRowSpan(a,b),d>a*$MA.BI.ChartTableDataView.ROWHEIGHT-2*$MA.BI.ChartTableDataView.PADDING)return!1;return!0};
$MA.BI.ChartTableDataView.prototype.getBubbleMeasureIndex=function(a,b,c){var d=-1;1<b.list.length&&(a=b.list[a].getProperty("displaytext"),void 0!=a&&(c=c.getColumn(a)))&&(d=c.id);return d};
$MA.BI.ChartTableDataView.prototype.plotContents=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.dvObj,d=c.getRowCount(),e=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,f,g,h=this.getFirstContentsColumn();a.fillStyle=this.textColor;var k=this.chartObj.dvObj.getGraphGob().getObject("values");k.list[0].getProperty("displaytext");var l=this.locale&&this.locale.split(",");this.getGraph().getGraphObj().getSeriesCount();var p=this.chartObj.dvObj.getTable(),m=this.getBubbleMeasureIndex(1,
k,p),n,q,s,r;for(n=this.firstRow;n<e;n++)for(f=c.getRow(n),s=(n-this.firstRow+1)*$MA.BI.ChartTableDataView.ROWHEIGHT+b+14,q=this.startCol;q<=this.lastCol;q++)if(void 0!=f[q]){r=$MA.format(f[q],this.format,l&&l[q-h]);if(this.isBubble)if(this.isMultiSeries)q==h?r=$MA.format(f[q],this.seriesFormat):q==h+1?(g=this.getSeriesLocale(f[q-1]),r=$MA.format(f[q],this.format,g)):q==h+2&&(r=$MA.format(f[q],this.bubbleSizeFormat),-1!=m&&(r=p.displayBuffer[n],r=r[m]));else if(q==h)r=$MA.format(f[q],this.format,
l&&l[0]);else{g=this.getBubbleMeasureIndex(q-1,k,p);r=f[q];var u=this.bubbleValuesFormatters.get(q);void 0!=u&&(r=$MA.format(r,u));-1!=g&&(r=p.displayBuffer[n],r=r[g]);a.measureText(r)}g=this.translateCoordinate(b+this.columnX[q],s);a.fillText(r,g.x,g.y)}if(this.isShowTotal()&&e==d){e=[];for(q=h=this.lastCol-this.startCol+1;q--;)e.push(0);for(n=0;n<d;n++)for(f=c.getRow(n),q=0;q<h;q++)e[q]+=f[this.startCol+q];s+=$MA.BI.ChartTableDataView.ROWHEIGHT;for(q=0;q<h;q++)c=$MA.format(isNaN(e[q])?"":e[q],this.format,
l&&l[q]),g=this.translateCoordinate(b+this.columnX[q+this.startCol],s),a.fillText(c,g.x,g.y)}};
$MA.BI.ChartTableDataView.prototype.plotGridLine=function(){var a=this.context,b=this.getFirstContentsColumn(),c=this.dvObj,d=c.getRowCount(),d=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,e=d-this.firstRow,f=this.isShowTotal(),g,h,k,l;for(h=0;h<=this.lastCol;h++)if(!(h>=b&&h<this.startCol-1))if(a.strokeStyle=this.gridLineColor,k=this.translateCoordinate(this.columnX[h],0),l=this.translateCoordinate(this.columnX[h],$MA.BI.ChartTableDataView.ROWHEIGHT),this.drawLine(k.x,k.y,l.x,l.y),a.strokeStyle=
h<b+1?this.separatorLineColor:this.gridLineColor,this.chartObj.gob.suppliedTotals&&0!=h&&h!=this.lastCol)for(g=this.firstRow;g<d;g++)k=c.getRow(g),l=$MA.BI.ChartTableDataView.ROWHEIGHT*(g-this.firstRow+1),""!==k[h]&&(k=this.translateCoordinate(this.columnX[h],l),l=this.translateCoordinate(this.columnX[h],l+$MA.BI.ChartTableDataView.ROWHEIGHT),this.drawLine(k.x,k.y,l.x,l.y));else k=this.translateCoordinate(this.columnX[h],$MA.BI.ChartTableDataView.ROWHEIGHT),l=this.translateCoordinate(this.columnX[h],
$MA.BI.ChartTableDataView.ROWHEIGHT*(e+1+(0==h&&f?1:0))),this.drawLine(k.x,k.y,l.x,l.y);a.strokeStyle=this.separatorLineColor;k=this.translateCoordinate(this.tableWidth,0);l=this.translateCoordinate(this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*(e+1));this.drawLine(k.x,k.y,l.x,l.y);k=this.translateCoordinate(0,$MA.BI.ChartTableDataView.ROWHEIGHT);l=this.translateCoordinate(this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT);this.drawLine(k.x,k.y,l.x,l.y);for(g=2;g<=e+1;g++)k=g!=e+1?this.translateCoordinate(this.columnX[b],
$MA.BI.ChartTableDataView.ROWHEIGHT*g):this.translateCoordinate(this.columnX[0],$MA.BI.ChartTableDataView.ROWHEIGHT*g),l=this.translateCoordinate(this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*g),this.drawLine(k.x,k.y,l.x,l.y);f&&(k=this.translateCoordinate(this.columnX[0],$MA.BI.ChartTableDataView.ROWHEIGHT*(e+2)),l=this.translateCoordinate(this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*(e+2)),this.drawLine(k.x,k.y,l.x,l.y))};
$MA.BI.ChartTableDataView.prototype.plotGradientRect=function(){var a=this.context,b=this.dvObj.getRowCount(),b=(this.firstRow+this.maxRows>b?b:this.firstRow+this.maxRows)-this.firstRow;this.isShowTotal()&&b++;var c,d;$MA.Browser.isICSStockBrowser||(c=this.translateCoordinate(0,$MA.BI.ChartTableDataView.ROWHEIGHT),d=this.translateCoordinate(0,$MA.BI.ChartTableDataView.ROWHEIGHT+7),c=a.createLinearGradient(c.x,c.y,d.x,d.y),c.addColorStop(0,"rgba(0, 0, 0, 0.2)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),
a.fillStyle=c,c=this.getStartPosition(1,$MA.BI.ChartTableDataView.ROWHEIGHT,this.tableWidth),a.fillRect(c.x,c.y,this.tableWidth,7),c=this.translateCoordinate(0,0),d=this.translateCoordinate(7,0),c=a.createLinearGradient(c.x,c.y,d.x,d.y),c.addColorStop(0,"rgba(0, 0, 0, 0.2)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),a.fillStyle=c,c=this.getStartPosition(1,0,7),a.fillRect(c.x,c.y,7,$MA.BI.ChartTableDataView.ROWHEIGHT*(b+1)),c=this.translateCoordinate(this.columnX[this.startCol],0),d=this.translateCoordinate(this.columnX[this.startCol]+
7,0),c=a.createLinearGradient(c.x,c.y,d.x,d.y),c.addColorStop(0,"rgba(0, 0, 0, 0.2)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),a.fillStyle=c,c=this.getStartPosition(this.columnX[this.startCol],0,7),a.fillRect(c.x,c.y,7,$MA.BI.ChartTableDataView.ROWHEIGHT*(b+1)),c=this.translateCoordinate(this.tableWidth,0),d=this.translateCoordinate(this.tableWidth+7,0),c=a.createLinearGradient(c.x,c.y,d.x,d.y),c.addColorStop(0,"rgba(0, 0, 0, 0.2)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),a.fillStyle=c,c=this.getStartPosition(this.tableWidth,
0,7),a.fillRect(c.x,c.y,7,$MA.BI.ChartTableDataView.ROWHEIGHT*(b+1)))};
$MA.BI.ChartTableDataView.prototype.plot=function(a){var b=$MA.BI.ChartTableDataView.getTableView(a);b.firstRow=0;b.startCol=b.getFirstContentsColumn();b.lastCol=b.startCol;var c=b.getGraph();b.isBubble="bubble"==c.graphType?!0:!1;var c=b.getGraphView().dvObj.getGraphGob(),d=c.getValueObject(0),e=c.getObject("values");b.format=d.getProperty("Format");b.locale=void 0!==e.list[0].locale?e.list[0].locale:e.locale;b.isBubble&&(d=c.getValueObject(1))&&(b.bubbleSizeFormat=d.getProperty("Format"));b.categoryFormat=
c.getObject("Category").getProperty("Format");b.isMultiSeries=!1;c.getObject("Series")&&(b.isMultiSeries=!0,b.seriesFormat=c.getObject("Series").getProperty("Format"));b.maxRows=Math.floor(a.offsetHeight/$MA.BI.ChartTableDataView.ROWHEIGHT);b.clickRow=0;b.clickCol=b.startCol-1;b.calColumnWidth(a);b.redraw()};
$MA.BI.ChartTableDataView.prototype.redraw=function(){if(0!=this.dvObj.getTableColumns().length){var a=document.getElementById(this.id),b=$MA.BI.ChartTableDataView.getCanvasElem(a),c=b.getContext?b.getContext("2d"):null;this.context=c;this.intializeTable(a);$MA.Browser.isJBStockBrowser||$MA.Browser.isICSStockBrowser?b.width=b.width:c.clearRect(0,0,b.width,b.height);this.plotBackground(a);c.font=this.fontSize+" "+this.fontFamily;this.plotDimensionTitle();this.plotRowHeader();this.highlightCell(this.clickRow,
this.clickCol);this.plotColumnHeaders();this.plotContents();this.plotGridLine();this.plotGradientRect()}};$MA.BI.ChartTableDataView.prototype.drawLine=function(a,b,c,d){var e=this.context;e.beginPath();e.moveTo(a,b);e.lineTo(c,d);e.closePath();e.stroke()};
$MA.BI.ChartTableDataView.prototype.drawVerticalText=function(a,b,c){var d=this.context,e=d.measureText(a);d.save();b=this.translateCoordinate(b,c);"rtl"===this.dir&&(b.x-=20);d.translate(b.x,b.y+e.width);d.rotate(1.5*Math.PI);d.fillText(a,10,14);d.restore()};$MA.BI.ChartTableDataView.prototype.isShowTotal=function(){return this.getGraph().getGraphObj().showTotal};
$MA.BI.ChartTableDataView.prototype.getStartPosition=function(a,b,c){var d;"ltr"===this.dir?a={x:a,y:b,width:c}:(d=this.context.canvas.width,a={x:d-c-a,y:b,width:c});return a};$MA.BI.ChartTableDataView.prototype.translateCoordinate=function(a,b){var c;c={x:a,y:b};"rtl"===this.dir&&(c=this.context.canvas.width,c={x:c-a,y:b});return c};
$MA.BI.ChartTableDataView.prototype.translateEventPos=function(a){var b;"ltr"===this.dir?a={layerX:a.layerX,layerY:a.layerY}:(b=this.context.canvas.width,a={layerX:b-a.layerX,layerY:a.layerY});return a};$MA.BI.ChartTableDataView.prototype.getSeriesLocale=function(a){var b,c,d,e;d=this.getGraph().getGraphObj().getSeriesList();c=d.length;for(b=0;b<c;b++)if(d[b].name===a){e=d[b].locale;break}return e};
CanvasRenderingContext2D.prototype.roundedRect=function(a,b,c,d,e,f,g){void 0==g&&(g=!0);void 0==f&&(f=!1);this.beginPath();$MA.platform.blackberry?this.rect(a,b,c,d):(void 0===e&&(e=5),this.moveTo(a+e,b),this.lineTo(a+c-e,b),this.quadraticCurveTo(a+c,b,a+c,b+e),this.lineTo(a+c,b+d-e),this.quadraticCurveTo(a+c,b+d,a+c-e,b+d),this.lineTo(a+e,b+d),this.quadraticCurveTo(a,b+d,a,b+d-e),this.lineTo(a,b+e),this.quadraticCurveTo(a,b,a+e,b));this.closePath();g&&this.stroke();f&&this.fill()};
CanvasRenderingContext2D.prototype.fillRoundedRect=function(a,b,c,d,e,f,g,h,k){e=void 0==e?!0:e;f=void 0==f?!0:f;g=void 0==g?!0:g;h=void 0==h?!0:h;k=void 0==k?5:k;this.beginPath();e?this.moveTo(a+k,b):this.moveTo(a,b);f?(this.lineTo(a+c-k,b),this.quadraticCurveTo(a+c,b,a+c,b+k)):this.lineTo(a+c,b);h?(this.lineTo(a+c,b+d-k),this.quadraticCurveTo(a+c,b+d,a+c-k,b+d)):this.lineTo(a+c,b+d);g?(this.lineTo(a+k,b+d),this.quadraticCurveTo(a,b+d,a,b+d-k)):this.lineTo(a,b+d);e?(this.lineTo(a,b+k),this.quadraticCurveTo(a,
b,a+k,b)):this.lineTo(a,b);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.drawEllipse=function(a,b,c,d,e){void 0==e&&(e=!0);var f,g,h=a+c/2,k=b+d/2;this.save();this.beginPath();$MA.platform.blackberry?this.arc(h,k,c/4,0,2*Math.PI,!1):(f=0.5522848*(c/2),g=0.5522848*(d/2),c=a+c,d=b+d,this.moveTo(a,k),this.bezierCurveTo(a,k-g,h-f,b,h,b),this.bezierCurveTo(h+f,b,c,k-g,c,k),this.bezierCurveTo(c,k+g,h+f,d,h,d),this.bezierCurveTo(h-f,d,a,k+g,a,k));this.closePath();e?this.stroke():this.fill();this.restore()};
$MA.BI.RangeSelector=function(){var a,b,c="20px",d="popup_tt_left.png",e="popup_tt_right.png",f=60;"small"==$MA.screenSize&&(c="14px",d="popup_tt_left_small.png",e="popup_tt_right_small.png",f=40);a=function(a,b){this.elem=a;this.chartView=b;this.graph=b.getGraph();this.maxItems=this.firstItem=this.currentX=0;this.dragMode=void 0;this.dir=$MA.dir;this.leftPopupCanvas=document.createElement("canvas");this.leftPopupCanvas.style.display="block";this.leftPopupCanvas.style.position="absolute";this.leftPopupCanvas.style.zIndex=
1E3;this.leftPopupCanvas.height=0;this.rightPopupCanvas=document.createElement("canvas");this.rightPopupCanvas.style.display="block";this.rightPopupCanvas.style.position="absolute";this.rightPopupCanvas.style.zIndex=1E3;this.rightPopupCanvas.height=0;this.timerForBB=void 0};a.prototype.getCategoryValue=function(a){return this.chartView.getCategoryValue(a)};a.prototype.getCategoryCount=function(){return this.chartView.getCategoryCount()};a.prototype.getVisibleCategoryCount=function(){return this.chartView.getVisibleCategoryCount()};
a.prototype.getFirstItem=function(){return this.chartView.getFirstItem()};a.prototype.setFirstItem=function(a){return this.chartView.setFirstItem(a)};a.prototype.getMaxItems=function(){return this.chartView.getMaxItems()};a.prototype.setMaxItems=function(a){return this.chartView.setMaxItems(a)};a.prototype.initialize=function(){this.getStyles();var a=document.getElementById(this.chartView.id+"_rangeSelector");a.appendChild(this.leftPopupCanvas);a.appendChild(this.rightPopupCanvas);this.popTtLeftImg=
new Image;this.popTtLeftImg.src=$MA.imagesFolder+d;this.popTtRightImg=new Image;this.popTtRightImg.src=$MA.imagesFolder+e;this.popTtCenterImg=new Image;this.popTtCenterImg.src=$MA.imagesFolder+"popup_tt_center.png";if(void 0!=this.elem){var a=this.chartView,b=a.getRangeSelectorCanvasElem(),c=this,f=$MA.isTouchEventSupported?"touchstart":"mousedown";b.addEventListener(f,function(a){c.onTouchStart(a)},!1);f=$MA.isTouchEventSupported?"touchmove":"mousemove";b.addEventListener(f,function(a){c.onTouchMove(a)},
!1);f=$MA.isTouchEventSupported?"touchend":"mouseup";b.addEventListener(f,function(a){c.onTouchEnd(a)},!1);"mouseup"===f&&b.addEventListener("mouseout",function(a){c.onTouchEnd(a)},!1);this.canvas=b;this.context=b.getContext("2d");this.textCanvas=a.getRangeSelectorTextCanvasElem();this.textContext=this.textCanvas.getContext("2d")}};a.prototype.getStyles=function(){this.strokeColor="#788680";this.strokeWhiteColor="#CDDDD7";this.strokeGreyColor="#B3C3BD";var a=$MA.getCSSRule(".chart_range_selector_stroke");
void 0!=a&&(""!=a.style.color&&(this.strokeColor=a.style.color),""!=a.style.backgroundColor&&(this.strokeWhiteColor=a.style.backgroundColor),""!=a.style.borderColor&&(this.strokeGreyColor=a.style.borderColor));this.toolTipFontColor="black";this.toolTipFontSize=c;this.toolTipFontFamily="Helvetica";this.fontColor="#707070";this.fontSize="12px";this.fontFamily="Helvetica";a=$MA.getCSSRule(".chart_range_selector_text");void 0!=a&&(""!=a.style.color&&(this.fontColor=a.style.color),""!=a.style.fontSize&&
(this.fontSize=a.style.fontSize),""!=a.style.fontFamily&&(this.fontFamily=a.style.fontFamily,this.toolTipFontFamily=this.fontFamily=this.fontFamily.replace(/'/g,"")))};a.prototype.pointInRegion=function(a){var b=this.getFirstItem(),c=this.getMaxItems(),d=this.elem.offsetWidth,e=this.getCategoryCount();c>e&&(c=e);a-=49;var e=(d-98)/e,b=e*b,c=e*c,f;"ltr"===this.dir?a>=b-44&&a<=b?f="left":a>=b+c&&a<=b+c+44?f="right":a>=b&&a<=b+c&&(f="center"):a>=d-c-b-147&&a<=d-c-b-98?f="left":a>=d-b-98&&a<=d-b-49?f=
"right":a>=d-b-c-98&&a<=d-b-98&&(f="center");return f};a.prototype.setPopupPosition=function(a,b,c,d){var e=!1,m=!1,n=a.getContext("2d");n.font="bold "+this.toolTipFontSize+" "+this.toolTipFontFamily;var q=f;b=n.measureText(b).width;b=b+20+20+7-b%7;0!=b/7%2&&(b+=7);"center"==this.dragMode&&b>=document.body.clientWidth/2&&(b=document.body.clientWidth/2-1);c-=b/2;var n=document.getElementById(this.chartView.id+"_rangeSelector"),n=$MA.getAbsolutePosition(n),s=n.x+c+b-document.body.clientWidth;0>n.x+
c?(c=-n.x,e=!0):0<s&&(c-=s+1);b>document.body.clientWidth&&(c=-n.x,b=document.body.clientWidth-1,e=m=!0);a.style.left=c+"px";a.width=b;a.height=q+10;a.style.top=d-a.height+5+"px";return{isLeft:e,left:c,width:b,maxWidth:m}};a.prototype.plotPopup=function(a,b,c,d,e,m){b&&this.setPopupPosition(a,d,e,m);b=a.getContext("2d");b.save();b.font="bold "+this.toolTipFontSize+" "+this.toolTipFontFamily;var n=this.popTtLeftImg.width;m=f;var q=b.measureText(d).width,s=parseInt(this.toolTipFontSize.replace("px",
""),10);$MA.platform.iOS?a.style.display="block":a.width=a.width;b.drawImage(this.popTtLeftImg,0,0);b.drawImage(this.popTtCenterImg,n,0,a.width-n-n,m);b.drawImage(this.popTtRightImg,a.width-n,0);c&&(b.beginPath(),b.fillStyle="#6F7273",b.strokeStyle="#6F7273",c=e-a.offsetLeft,b.moveTo(c-22-10,a.height-10),$MA.platform.blackberry?(b.lineTo(c-22,a.height),b.lineTo(c+22,a.height),b.lineTo(c+22+10,a.height-10)):(b.quadraticCurveTo(c-22,a.height-10,c-22,a.height),b.lineTo(c+22,a.height),b.quadraticCurveTo(c+
22,a.height-10,c+22+10,a.height-10)),b.lineTo(c-22-10,a.height-10),b.closePath(),c=b.globalAlpha,b.globalAlpha=0.2,b.fill(),b.globalAlpha=c,b.stroke());b.strokeStyle="#6F7273";for(c=0;c<=(a.width-n-n)/7;c++)b.beginPath(),b.moveTo(n+7*c,m-4-8),b.lineTo(n+7*c,m-4),b.closePath(),b.stroke();b.strokeStyle="#87D9FF";b.beginPath();b.moveTo(a.width/2,7);b.lineTo(a.width/2,m-4);b.closePath();b.stroke();b.fillStyle=this.toolTipFontColor;b.font="bold "+this.toolTipFontSize+" "+this.toolTipFontFamily;b.textBaseline=
"top";c=(a.width-q)/2;if(q>a.width)for(c=10,e=d,n=0;n<d.length;n++)if(e=d.substr(0,n),q=b.measureText(e).width,q+35>a.width){d=e+"...";break}"rtl"===this.dir?b.fillText(d,c+q,(m-s)/2):b.fillText(d,c,(m-s)/2);b.restore()};a.prototype.plotText=function(a){a=void 0!=a?a:!1;var b=this.canvas,c=this.textCanvas,d=this.textContext;a?c.height=b.height:c.width=b.width;d.clearRect(0,0,c.width,c.height);var e=parseInt(this.fontSize.replace("px",""),10);d.font=this.fontSize+" "+this.fontFamily;d.fillStyle=this.fontColor;
d.textBaseline="top";var f=this.getCategoryValue(this.getCategoryCount()-1),n=d.measureText(f).width;if(a)a=$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT,d.save(),d.translate(a,0),d.rotate(Math.PI/2),d.fillText(this.getCategoryValue(0),0,0),d.restore(),d.save(),d.translate(a,c.height-n-e),d.rotate(Math.PI/2),d.fillText(f,0,0),d.restore();else{a=b.width/2;var e=this.getCategoryValue(0),q;if(d.measureText(this.getCategoryValue(0)).width>a+5)for(n=0;n<e.length;n++)if(b=e.substr(0,n),q=d.measureText(b),
q=q.width,q+25>a){e=b+"...";break}if(d.measureText(f).width>a+5)for(n=0;n<f.length;n++)if(b=f.substr(0,n),q=d.measureText(b),q=q.width,q+25>a){f=b+"...";break}"rtl"===this.dir?(n=d.measureText(f),d.fillText(f,n.width,0),d.fillText(e,c.width,0)):(d.fillText(e,0,0),n=d.measureText(f),d.fillText(f,c.width-n.width,0))}};a.prototype.hidePopup=function(){$MA.platform.iOS?(this.leftPopupCanvas.style.display="none",this.rightPopupCanvas.style.display="none"):(this.leftPopupCanvas.width=0,this.rightPopupCanvas.width=
0)};a.prototype.timerPlot=function(){if(!this.rsTimerId){var a=this;this.rsTimerId=setTimeout(function(){a.plot();a.rsTimerId=void 0},50)}};a.prototype.getX=function(a){var b=a.changedTouches;return b&&0<b.length?$MA.getMouseXY(b.item(0),a.srcElement).x:$MA.getMouseXY(a).x};a.prototype.onTouchStart=function(a){var b=a.targetTouches;if(!b||b&&1===b.length){var b=this.getX(a),c=this.pointInRegion(b);void 0===c||void 0!==this.dragMode&&this.dragMode!==c||(void 0===this.dragMode&&(this.dragMode=c),this.currentX=
b,this.firstItem=this.getFirstItem(),this.maxItems=this.getMaxItems(),this.categoryCount=this.getCategoryCount(),b=this.getVisibleCategoryCount(),b>this.categoryCount&&(b=this.categoryCount),this.visibleCount=b,this.itemWidth=(this.canvas.width-98)/this.categoryCount,this.plot())}a.preventDefault();a.stopPropagation();document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")};a.prototype.onTouchMove=function(a){var b=a.targetTouches;if((!b||b&&1===b.length)&&void 0!=
this.dragMode&&(b=this.getX(a),b=Math.round((b-this.currentX)/this.itemWidth),0!=b)){var c=this.firstItem,d=this.maxItems,e,f;"ltr"===this.dir?"left"==this.dragMode?(f=c+d-2,d-b>this.visibleCount&&(b=-this.visibleCount+d),e=c+b,0>e?b=-c:e>f&&(b=f-c),c+=b,d-=b):"center"==this.dragMode?(f=this.categoryCount-d,e=c+b,0>e?e=0:e>f&&(e=f),c=e):"right"==this.dragMode&&(d+=b,2>d&&(d=2),d>this.visibleCount&&(d=this.visibleCount),c+d>this.categoryCount&&(d=this.categoryCount-c)):"left"==this.dragMode?(d-=b,
2>d&&(d=2),d>this.visibleCount&&(d=this.visibleCount),c+d>this.categoryCount&&(d=this.categoryCount-c)):"center"==this.dragMode?(f=c-b,e=this.categoryCount-d,0>f?f=0:f>e&&(f=e),c=f):"right"==this.dragMode&&(f=c-b,0>f&&(b=c,f=0),e=d+c-2,f>e&&(b=-(e-c)),c-=b,d+=b);this.setFirstItem(c);this.setMaxItems(d);this.timerPlot()}a.preventDefault();a.stopPropagation()};a.prototype.onTouchEnd=function(a){if(void 0!=this.dragMode){this.rsTimerId&&(clearTimeout(this.rsTimerId),this.rsTimerId=void 0,this.plot());
this.hidePopup();this.dragMode=void 0;var b=this.onchanged;b&&"function"===typeof b.handler&&b.handler.call(b.context)}a.preventDefault();"mouseup"!==a.type&&a.stopPropagation()};a.prototype.reset=function(){this.refreshImage=!0};a.prototype.clearAndDrawGraph=function(a,b){this.firstItem=this.getFirstItem();var c=this.getMaxItems(),d=this.getCategoryCount();c>d&&(c=d);this.maxItems=c;this.setFirstItem(0);this.setMaxItems(this.getCategoryCount());this.chartView.refreshGraphData();this.graph.drawContent(a,
b,!0);this.setFirstItem(this.firstItem);this.setMaxItems(this.maxItems);(c=this.onchanged)&&"function"===typeof c.handler&&c.handler.call(c.context,!1)};a.prototype.drawHandles=function(a,b,c,d){var e=this.context;e.strokeStyle=this.strokeGreyColor;e.roundedRect(0,0,c,d);e.strokeStyle=this.strokeColor;e.drawEllipse(a-44+5,8,34,d-16);e.strokeStyle=this.strokeWhiteColor;e.drawEllipse(a-44+6,9,32,d-18);e.strokeStyle=this.strokeColor;e.strokeRect(a,0,b,d);e.strokeStyle=this.strokeGreyColor;e.roundedRect(a-
44,0,88+b,d);e.drawEllipse(a+b+5,8,34,d-16);e.strokeStyle=this.strokeWhiteColor;e.drawEllipse(a+b+6,9,32,d-18);e.strokeStyle=this.strokeColor;e.roundedRect(a-44+1,1,88+b-2,d-2);e.strokeStyle=this.strokeWhiteColor;e.roundedRect(a-44+2,2,88+b-4,d-4)};a.prototype.plot=function(){var a=this.canvas,b=this.context,c=a.width,d=a.height,e=this.getCategoryCount();a.width=c;if(0<e){var f=this.getFirstItem(),n=this.getMaxItems();n>e&&(n=e);f+2>e&&(f=e-2,this.setFirstItem(f));f+n>e&&(n=e-f,this.setMaxItems(n));
var e=(c-88)/e,q=e*f,e=e*n;b.save();var s=b.globalAlpha,r=b.createLinearGradient(0,0,0,d);r.addColorStop(0,"#DDDDDD");r.addColorStop(1,"#222222");b.fillStyle=r;b.globalAlpha=0.5;b.fillRoundedRect(0,0,c,d/2,!0,!0,!1,!1);$MA.platform.blackberry&&(b.clearRect(0,0,c,d,!0,!0,!1,!1),b.fillRoundedRect(0,0,c,d/2,!0,!0,!1,!1));q="ltr"===this.dir?44+q:c-e-44-q;b.fillStyle=r;b.globalAlpha=0.6;b.fillRoundedRect(0,d/2,c,d/2,!1,!1,!0,!0);b.clearRect(q,0,e,d);b.globalAlpha=0.1;b.fillStyle=r;b.fillRoundedRect(q,
0,e,d/2);b.globalAlpha=0.2;b.fillStyle=r;b.fillRoundedRect(q,d/2,e,d/2);b.globalAlpha=s;b.restore();this.refreshImage?(this.clearAndDrawGraph(a,44),this.refreshImage=!1):this.graph.drawContent(a,44);this.drawHandles(q,e,c,d);this.plotText();this.dragMode&&("rtl"===this.dir?(a=this.getCategoryValue(f+n-1),f=this.getCategoryValue(f)):(a=this.getCategoryValue(f),f=this.getCategoryValue(f+n-1)),b=c=n=!0,"center"==this.dragMode&&(c=this.setPopupPosition(this.leftPopupCanvas,a,q-22+1,0),d=this.setPopupPosition(this.rightPopupCanvas,
f,q+e+22,0),s=$MA.getAbsolutePosition(document.getElementById(this.chartView.id+"_rangeSelector")),c.width+d.width+2>=document.body.clientWidth?(c.left=-s.x,d.left=c.left+c.width+2,this.leftPopupCanvas.style.left=c.left+"px",this.rightPopupCanvas.style.left=d.left+"px"):c.left+c.width>d.left&&(d.isLeft||0>s.x+d.left-c.width-2?(c.left=-s.x,d.left=c.left+c.width+2,this.leftPopupCanvas.style.left=c.left+"px",this.rightPopupCanvas.style.left=d.left+"px"):c.isLeft?(d.left=c.left+c.width+2,this.rightPopupCanvas.style.left=
d.left+"px"):(c.left=d.left-c.width-2,this.leftPopupCanvas.style.left=c.left+"px"),b=!1),c.maxWidth?n=!1:d.left+d.width>=document.body.clientWidth&&(d.width=document.body.clientWidth-d.left-1,this.rightPopupCanvas.width=d.width),c=!1),"right"!=this.dragMode&&this.plotPopup(this.leftPopupCanvas,c,b,a,q-22+1,0),n&&"left"!=this.dragMode&&this.plotPopup(this.rightPopupCanvas,c,b,f,q+e+22,0))}};return b=function(c,d){if(!(this instanceof b))return new b(c,d);var e=new a(c,d);e.initialize();this.getStyles=
function(){e.getStyles()};this.reset=function(){e.reset()};this.plot=function(){e.plot()};this.onChanged=function(a,b){e.onchanged={handler:a,context:b}}}}();
$MA.BI.ValueBubbleLegend=function(a,b,c,d,e,f,g){void 0!=a&&(this.seriesValue=a.name,this.graphObjIndex=a.graphObjIndex,this.name=b,this.value=c,this.otherItems=void 0===f?void 0:f,this.legendColor=e,this.isLast=this.isFirst=!1,this.padding=$MA.BI.ValueBubbleLegend.DEFAULT_PADDING,this.radius=0,this.font=g,this.txtColor="white",this.bkColor="black",this.valueDisplayText=d,this.showLabel=this.enabled=this.fullDrawn=!0,this.bottom=this.right=this.top=this.left=0,this.alpha=1,this.strOthers=$MA.getLocalisation(null,
"Others","Others"),this.secondValue=this.secondName="",this.showNullValue=!0,this.categoryDisplayName=this.categoryValue="",this.scatterChart=!1,this.valueDisplayName="")};$MA.BI.ValueBubbleLegend.DEFAULT_FONTHEIGHT=14;$MA.BI.ValueBubbleLegend.DEFAULT_PADDING=7;$MA.BI.ValueBubbleLegend.prototype.switchState=function(){this.enabled?(this.enabled=!1,this.alpha=0.5):(this.enabled=!0,this.alpha=1)};$MA.BI.ValueBubbleLegend.prototype.isEnabled=function(){return this.enabled};
$MA.BI.ValueBubbleLegend.prototype.setEnabled=function(a){this.alpha=(this.enabled=a)?1:0.5};$MA.BI.ValueBubbleLegend.prototype.setShowLabel=function(a){this.showLabel=a};$MA.BI.ValueBubbleLegend.prototype.getString=function(){var a;if(void 0===this.otherItems){a=void 0!=this.valueDisplayText?this.valueDisplayText:this.value;var b=this.name;""!=b&&(b=""+b+": ");a=""+(this.showLabel?b+a:a)}else a=this.strOthers+": "+this.otherItems;return a};
$MA.BI.ValueBubbleLegend.prototype.set2ndName=function(a){this.secondName=a};$MA.BI.ValueBubbleLegend.prototype.set2ndValue=function(a){this.secondValue=a};$MA.BI.ValueBubbleLegend.prototype.setPadding=function(a){this.padding=a};$MA.BI.ValueBubbleLegend.prototype.getPadding=function(){return this.padding};$MA.BI.ValueBubbleLegend.prototype.setRadius=function(a){this.radius=a};$MA.BI.ValueBubbleLegend.prototype.getRadius=function(){return 0===this.radius?this.padding:this.radius};
$MA.BI.ValueBubbleLegend.getDefaultHeight=function(){return $MA.BI.ValueBubbleLegend.DEFAULT_FONTHEIGHT+2*$MA.BI.ValueBubbleLegend.DEFAULT_PADDING};$MA.BI.ValueBubbleLegend.prototype.getHeight=function(){return this.font.getSize()+2*this.padding};$MA.BI.ValueBubbleLegend.prototype.getWidth=function(a){a.font=this.font.toString();var b;b=this.getString();a=a.measureText(b).width;return this.padding+this.font.getSize()+this.padding+a+this.padding};
$MA.BI.ValueBubbleLegend.prototype.setFirst=function(a){this.isFirst=a};$MA.BI.ValueBubbleLegend.prototype.setLast=function(a){this.isLast=a};$MA.BI.ValueBubbleLegend.prototype.hitTest=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};
$MA.BI.ValueBubbleLegend.prototype.drawOtherItems=function(a,b,c,d){a.font=this.font.toString();a.textBaseline="hanging";var e=this.padding,f=a.measureText(this.strOthers).width,f=f+2*this.font.getSize(),g=(b.right+b.left-f)/2,h=b.top+2;a.fillStyle=d;a.beginPath();$MA.ContextHelper.roundRect(a,g-e,h,f+2*e,this.font.getSize()+2*e,4);a.fill();a.closePath();h+=e;a.fillStyle=this.legendColor;a.beginPath();$MA.ContextHelper.drawStar(a,g,h,this.font.getSize(),this.font.getSize(),!0);a.fill();a.closePath();
a.fillStyle=c;g+=this.font.getSize()+e;a.fillText(this.strOthers,g,h);a.fillStyle=d;a.fillText(this.otherItems,b.left+e,b.bottom-this.font.getSize()-2)};
$MA.BI.ValueBubbleLegend.prototype.draw=function(a,b,c,d,e,f){void 0===d&&(d="white");void 0===e&&(e="black");this.txtColor=d;this.bkColor=e;a.font=this.font.toString();a.fillStyle=e;var g=this.getHeight();e=this.getWidth(a);void 0!==f&&(e=e<f?e:f);var h=b+e,k=c+g,l=this.getRadius();this.left=b;this.right=h;this.top=c;this.bottom=k;"rtl"===this.dir&&(f=this.isFirst,this.isFirst=this.isLast,this.isLast=f);f=a.globalAlpha;a.globalAlpha=this.alpha;this.isFirst&&this.isLast?(a.beginPath(),$MA.ContextHelper.roundRect(a,
b,c,e,g,l),a.fill(),a.closePath()):this.isFirst?(a.beginPath(),a.moveTo(b+l,c),a.quadraticCurveTo(b,c,b,c+l),a.lineTo(b,k-l),a.quadraticCurveTo(b,k,b+l,k),a.lineTo(h,k),a.lineTo(h,c),a.closePath(),a.fill()):this.isLast?(a.beginPath(),a.moveTo(b,c),a.lineTo(b,k),a.lineTo(h-l,k),a.quadraticCurveTo(h,k,h,k-l),a.lineTo(h,c+l),a.quadraticCurveTo(h,c,h-l,c),a.closePath(),a.fill()):a.fillRect(b,c,e,g);l=this.font.getSize();h="rtl"===this.dir?b+e-this.padding-(l-2):b+this.padding;k=c+this.padding;a.fillStyle=
this.legendColor;a.beginPath();"star3"==this.shape?$MA.ContextHelper.drawStar(a,h+7,k+7,l+1,l+1,!0,3):"star4"==this.shape?$MA.ContextHelper.drawStar(a,h+7,k+7,l+1,l+1,!0,4):"star5"==this.shape?$MA.ContextHelper.drawStar(a,h+7,k+7,l+1,l+1,!0,5):"star6"==this.shape?$MA.ContextHelper.drawStar(a,h+7,k+7,l+1,l+1,!0,6):"star7"==this.shape?$MA.ContextHelper.drawStar(a,h+7,k+7,l+1,l+1,!0,7):"star8"==this.shape?$MA.ContextHelper.drawStar(a,h+7,k+7,l+1,l+1,!0,8):"star9"==this.shape?$MA.ContextHelper.drawStar(a,
h+7,k+7,l+1,l+1,!0,9):"diamond"==this.shape?$MA.ContextHelper.drawDiamond(a,h+7,k+8,l/2,l/2,!0):"circle"==this.shape?$MA.ContextHelper.drawCircle(a,h+l/2,k+l/2,l/2,l/2):"triangle"==this.shape?$MA.ContextHelper.drawTriangle(a,h+7,k+8,l/2,l/2,"bottom"):"lefttriangle"==this.shape?$MA.ContextHelper.drawTriangle(a,h+7,k+8,l/2,l/2,"left"):"righttriangle"==this.shape?$MA.ContextHelper.drawTriangle(a,h+7,k+8,l/2,l/2,"right"):"invertedtriangle"==this.shape?$MA.ContextHelper.drawTriangle(a,h+7,k+8,l/2,l/2,
"top"):$MA.ContextHelper.roundRect(a,h+1,k+1,l-2,l-2,l/8);a.fill();a.closePath();h=h+l+this.padding;a.save();a.beginPath();a.rect(b,c,e,g);a.clip();a.fillStyle=d;b=this.getString();a.textBaseline="middle";k=c+this.padding+l/2;if("rtl"===this.dir)for(h=h-l-2*this.padding,a.textAlign="right",b=b.replace(" %","%"),b=b.split(": "),d=b.length,c=0;c<d;c++)e=b[c],0===c%2&&1<d&&(e+=":"),a.fillText(e,h,k),e=a.measureText(e).width,h-=e;else a.fillText(b,h,k);a.closePath();a.restore();a.globalAlpha=f};
$MA.BI.BubbleChartValueBubbleLegend=function(a,b,c,d,e,f,g){$MA.BI.ValueBubbleLegend.call(this,a,b,c,d,e,f,g);this.heightMeasureName=this.shapeMeasureName=this.colorMeasureName=void 0;this.shape=""};$MA.BI.BubbleChartValueBubbleLegend.prototype=new $MA.BI.ValueBubbleLegend;
$MA.BI.BubbleChartValueBubbleLegend.prototype.getString=function(){var a="",b="";this.scatterChart&&(void 0!=this.categoryDisplayName&&(a=this.categoryDisplayName),a+=": "+this.categoryValue+" ",b=void 0==this.value||""==this.value||"null"==this.value,void 0==this.valueDisplayName||!this.showNullValue&&b||(a+=this.valueDisplayName,this.scatterChart&&(a+=": ")),b=" ");if(void 0===this.otherItems){var c;c=void 0!=this.valueDisplayText?this.valueDisplayText:this.value;var d=this.name;""!=d&&(d=b+d+": ");
a+=this.showLabel?d+c:c;b=this.getBubbleValue("formattedWidth");""!=this.secondName&&(void 0!=b&&(this.showNullValue||void 0!=b&&""!=b&&"null"!=b))&&(a+=" ",""==b||"null"==b?this.showNullValue&&(a+=this.secondName+": "+b):a+=this.secondName+": "+b);b=this.colorMeasureName;c=this.getBubbleValue("formattedColor");if(""!=b&&!this.showNullValue||void 0!=c&&""!=c&&"null"!=c)void 0==b&&(b="Color"),""==c||"null"==c?this.showNullValue&&(a+="  "+b+": "):a+="  "+b+": "+c;b=this.getBubbleValue("formattedShape");
!this.showNullValue&&(void 0==b||""==b||"null"==b)||void 0==this.shapeMeasureName||(""==b||"null"==b?this.showNullValue&&(a+="  "+this.shapeMeasureName+": "):a+="  "+this.shapeMeasureName+": "+b);b=this.getBubbleValue("formattedHeight");!this.showNullValue&&(void 0==b||""==b||"null"==b)||void 0==this.heightMeasureName||(""==b||"null"==b?this.showNullValue&&(a+="  "+this.heightMeasureName+": "):a+="  "+this.heightMeasureName+": "+b)}else a=this.strOthers+": "+this.otherItems;return a};
$MA.BI.BubbleChartValueBubbleLegend.prototype.setColorMeasureName=function(a){this.colorMeasureName=a};$MA.BI.BubbleChartValueBubbleLegend.prototype.setOtherValues=function(a){this.otherValues=a};$MA.BI.BubbleChartValueBubbleLegend.prototype.getBubbleValue=function(a){if(void 0!=this.otherValues){var b,c,d=this.otherValues.length;for(b=0;b<d;b++)if(this.otherValues[b].hasOwnProperty(a)){c=this.otherValues[b].displayText;c=null==c&&"object"==typeof c?void 0:void 0!=c?c:this.otherValues[b][a];break}return c}};
$MA.BI.ValueBubble=function(){var a,b,c,d,e,f;a=function(a){this.showValueDisplayName=this.showCategoryDisplayName=this.showCategoryText=!0;this.showValueOnPieChart=!1;this.showNullValue=this.showLegendLabel=!0;this.position="top";this.categoriesDisplayOrder="leafToRoot";this.dir=$MA.dir};a.FILL_COLOR="#000000";a.STROKE_COLOR="#808080";a.OUTLINE_COLOR="rgba(128, 128, 128, 0.2)";a.TEXT_COLOR="#FFFFFF";a.TEXT_FONTSIZE="14px";a.TEXT_FONTWEIGHT="bold";a.TEXT_FONTFAMILY="Helvetica";a.INDICATOR_SIZE=8;
a.BUBBLE_VALUE_HEIGHT=50;a.BUBBLE_VALUE_TITLE_HEIGHT=26;a.BUBBLE_VALUE_TOP_PADDING=4;a.prototype.getStyles=function(){var b=$MA.getCSSRule(".chart_value_bubble");this.fillColor=a.FILL_COLOR;this.textColor=a.TEXT_COLOR;this.textFont=new $MA.Graph.Font(a.TEXT_FONTSIZE,a.TEXT_FONTFAMILY,a.TEXT_FONTWEIGHT);void 0!=b&&(""!=b.style.backgroundColor&&(this.fillColor=b.style.backgroundColor),""!=b.style.color&&(this.textColor=b.style.color),""!=b.style.fontSize&&this.textFont.setSize(b.style.fontSize),""!=
b.style.fontWeight&&this.textFont.setWeight(b.style.fontWeight),""!=b.style.fontFamily&&(b=b.style.fontFamily,b=b.replace(/'/g,""),this.textFont.setFamily(b)));b=$MA.getCSSRule(".chart_value_bubble_outline");this.outlineColor=a.OUTLINE_COLOR;this.strokeColor=a.STROKE_COLOR;void 0!=b&&(""!=b.style.backgroundColor&&(this.outlineColor=b.style.backgroundColor),""!=b.style.color&&(this.strokeColor=b.style.color))};a.prototype.configureSlider=function(a){var b=!1;if(a){var c=a.showCategoryText;void 0!==
c&&this.showCategoryText!=c&&(this.showCategoryText=c,b=!0);c=a.showCategoryDisplayName;void 0!==c&&this.showCategoryDisplayName!=c&&(this.showCategoryDisplayName=c,b=!0);c=a.showValueDisplayName;void 0!==c&&this.showValueDisplayName!=c&&(this.showValueDisplayName=c,b=!0);c=a.showLegendLabel;void 0!==c&&this.showLegendLabel!=c&&(this.showLegendLabel=c,b=!0);c=a.showValueOnPieChart;void 0!==c&&this.showValueOnPieChart!=c&&(this.showValueOnPieChart=c,b=!0);c=a.showNullValue;void 0!==c&&this.showNullValue!=
c&&(this.showNullValue=c,b=!0);c=a.position;void 0!==c&&this.setPosition(c)&&(b=!0);a=a.categoriesDisplayOrder;void 0!==a&&this.categoriesDisplayOrder!=a&&(this.categoriesDisplayOrder=a,b=!0)}return b};a.prototype.getConfiguration=function(){return{showCategoryText:this.showCategoryText,showCategoryDisplayName:this.showCategoryDisplayName,showValueDisplayName:this.showValueDisplayName,showLegendLabel:this.showLegendLabel,showValueOnPieChart:this.showValueOnPieChart,showNullValue:this.showNullValue,
position:this.getPosition(),categoriesDisplayOrder:this.categoriesDisplayOrder}};a.prototype.getHeight=function(){return a.BUBBLE_VALUE_HEIGHT+this.getTitleHeight()};a.prototype.setPosition=function(a){return!1};a.prototype.getPosition=function(){return this.position};a.prototype.getTitleHeight=function(){var b=6,c=this.showCategoryDisplayName&&void 0!=this.categoryDisplayName&&""!=this.categoryDisplayName,d=this.showValueDisplayName&&void 0!=this.valueDisplayName&&""!=this.valueDisplayName;if(this.showCategoryText||
c||d)b+=a.BUBBLE_VALUE_TITLE_HEIGHT;return b};b=function(b){a.call(this,b);this.id=b;this.offset=this.startY=this.startX=this.value=this.itemSize=this.incr=0;this.text="";this.center=!1;this.currentX=0;this.dragging=!1;b=document.getElementById(b);void 0!=b&&(b.vbObj=this,this.context=b.getContext("2d"));this.dir=$MA.dir;this.getStyles()};b.prototype=new a;b.prototype.updating=function(a,b){this.value=this.getValue();this.currentX=a};b.prototype.update=function(){this.dragging=!1;var a=document.getElementById(this.id);
this.center?(this.currentX=this.startX+this.offset+this.incr,this.gap&&(this.currentX-=this.gap)):(this.value=this.getValue(),this.currentX="ltr"===this.dir?this.startX+this.offset+this.value*this.incr:a.offsetWidth-(this.startX+this.offset+this.value*this.incr))};b.prototype.getValue=function(){var a=document.getElementById(this.id),b=this.currentX;"ltr"===this.dir?(b<this.startX?b=this.startX:b>a.offsetWidth-this.startX&&(b=a.offsetWidth-this.startX-this.offset),a=b-this.startX-this.offset,a=Math.round(a/
this.incr)):(b<this.startX?b=this.startX:b>a.offsetWidth+this.startX&&(b=a.offsetWidth),a=a.offsetWidth-(b+this.startX+this.offset),a=Math.round(a/this.incr),0>a&&(a=0));this.chartView&&0<=this.chartView.getGraph().graphType.indexOf("bubble")&&(a=a>=this.chartView.getMaxItems()?this.chartView.getMaxItems()-1:a);return a};b.prototype.setValue=function(a){this.value=a;this.currentX=this.startX+this.offset+this.value*this.incr;a=document.getElementById(this.id);"rtl"===this.dir&&(this.currentX=a.offsetWidth-
this.currentX)};c=function(a){b.call(this,a);this.categoryText="";this.categoryDisplayText=void 0;this.dataY=this.dataX=this.clientY=this.clientX=0;this.endIndex=this.startIndex=-1;this.scrolling=this.scrollable=!1;this.prevY=this.prevX=-1;this.padding=7;this.points=this.size=void 0;this.scrollY=this.scrollX=this.mouse_point_y=this.mouse_point_x=0;this.legends=void 0;this.isDrawIntersectionPoints=!1;this.totalLegendsWidth=0;this.valueDisplayName=this.categoryDisplayName=""};c.create=function(a){return new c(a)};
c.prototype=new b;c.prototype.getCategoryValueDisplay=function(a){a="";"rtl"===this.dir?(this.showValueDisplayName&&(void 0!=this.valueDisplayName&&""!=this.valueDisplayName)&&(a=a.concat(this.valueDisplayName+"  ")),this.showCategoryText&&(a=void 0!=this.categoryDisplayText&&""!=this.categoryDisplayText?a.concat(this.categoryDisplayText):a.concat(this.categoryText)),this.showCategoryDisplayName&&(void 0!=this.categoryDisplayName&&""!=this.categoryDisplayName)&&(a=a.concat(" :"+this.categoryDisplayName))):
(this.showCategoryDisplayName&&(void 0!=this.categoryDisplayName&&""!=this.categoryDisplayName)&&(a=a.concat(this.categoryDisplayName+": ")),this.showCategoryText&&(a=void 0!=this.categoryDisplayText&&""!=this.categoryDisplayText?a.concat(this.categoryDisplayText):a.concat(this.categoryText)),this.showValueDisplayName&&(void 0!=this.valueDisplayName&&""!=this.valueDisplayName)&&(a=a.concat("  "+this.valueDisplayName)));return a};c.prototype.drawIntersectionPoints=function(a){if(void 0!==this.points&&
0!==this.points.length&&!1!==this.isDrawIntersectionPoints){for(var b=this.clientX,c=this.chartView.getGraphElem(),d=0;c.offsetParent;)d+=c.offsetLeft,c=c.offsetParent;var b=b-d,e,f,g,s,r,c=a.globalAlpha;a.globalAlpha=0.5;d=!0;1==this.points[0].length&&(d=!1);var u=this.legends.length,v=this.chartView.getGraph(),w;for(w=0;w<u;++w){var x=this.legends[w];if(!1!==x.isEnabled()){g=v.getSeriesIndex(x.seriesValue,x.graphObjIndex);e=this.points[g];if(this.dragging&&d){f=e[0].xCoord;g=e[0].yCoord;s=e[1].xCoord;
r=e[1].yCoord;e=g+(r-g)*(b-f)/(s-f);if(6>=Math.abs(g-r)||6>=Math.abs(f-s))e=g;if(g<r&&(e>r||e<g)||g>r&&(e>g||e<r))e=r;f=e-this.dataY;isNaN(f)&&(f=g);if(0>f)continue}else b=e[0].xCoord,e=e[0].yCoord,f=e-this.dataY;this.drawIntersectionPoint(a,Math.round(this.currentX),f,x.legendColor.toString())}}a.globalAlpha=c}};c.prototype.drawIntersectionPoint=function(a,b,c,d){var e=$MA.getStrokeInsetColors(d);a.lineWidth=1;a.beginPath();a.arc(b,c,8,0,2*Math.PI,!0);a.closePath();a.fillStyle=d;a.fill();a.strokeStyle=
e[0];a.stroke();a.beginPath();a.arc(b,c+1,8,0,Math.PI,!0);a.strokeStyle=e[1];a.stroke()};c.prototype.doScroll=function(a,b){this.scrollX+=a-this.prevX;this.scrollY+=b-this.prevY;var c=this.size.right-this.size.left;"ltr"===this.dir?this.totalLegendsWidth+this.scrollX<c&&(this.scrollX=c-this.totalLegendsWidth):this.scrollX-=2*(a-this.prevX);this.prevX=a;this.prevY=b;this.plot()};c.prototype.onMouseDown=function(a,b){if(void 0===this.legends)return-1;var c=this.legends.length,d;for(d=0;d<c;++d){var e=
this.legends[d];if(e.hitTest(a,b))return this.selectedLegend=e,this.scrollable&&(this.mouse_point_x=a,this.mouse_point_y=b,this.prevX=a,this.prevY=b,this.scrolling=!0),1}return-1};c.prototype.onMouseUp=function(a,b){var c=this.legends?this.legends.length:0,d=Math.abs(a-this.mouse_point_x);if(this.scrolling&&30<d)this.scrolling=!1;else for(d=0;d<c;++d){var e=this.legends[d];if(e.hitTest(a,b)&&void 0!=this.selectedLegend&&this.selectedLegend.name===e.name&&this.selectedLegend.graphObjIndex===e.graphObjIndex)return this.switchLegendStates(this.selectedLegend),
this.selectedLegend}};c.prototype.setLegendState=function(a){var b,c,d=this.legends.length;for(b=0;b<d;++b)c=this.legends[b],c.name===a.name&&a.graphObjIndex===c.graphObjIndex&&c.setEnabled(a.isEnabled())};c.prototype.switchLegendStates=function(a){var b,c,d=this.legends.length,e=!0;if(a.isEnabled()&&1!==d){for(b=0;b<d;++b)if(c=this.legends[b],c.name!==a.name&&c.isEnabled()){e=!1;break}if(e)for(b=0;b<d;++b)c=this.legends[b],c.setEnabled(!0);else a.switchState(),this.setLegendState(a)}else a.setEnabled(!0),
this.setLegendState(a)};c.prototype.reset=function(){this.legends=[];this.points=[]};c.prototype.addLegend=function(a,b,c,d,e,f){var g=!1;a.graphObj instanceof $MA.Graph.BubbleGraphObject&&(g=a.graphObj.isDataScattered);if(!g&&!this.showNullValue&&""===c)return null;g=null;g=a.graphObj instanceof $MA.Graph.BubbleGraphObject?new $MA.BI.BubbleChartValueBubbleLegend(a,b,c,f,d.toString(),void 0,this.textFont):new $MA.BI.ValueBubbleLegend(a,b,c,f,d.toString(),void 0,this.textFont);g.setEnabled(e);g.dir=
this.dir;g.setShowLabel(this.showLegendLabel);void 0===this.legends&&(this.legends=[]);this.legends.push(g);return g};c.prototype.drawOutLine=function(b,c,d,e){var f=document.getElementById(this.id),g=this.currentX;0>g?g=0:g>f.width&&(g=f.width);var q=a.INDICATOR_SIZE;b.font=this.textFont.toString();var s=b.measureText(this.getCategoryValueDisplay()).width+2*this.padding;c<s&&(c=s>b.canvas.width?b.canvas.width:s);var s=-1,r=this.chartView.getGraph(),s=r.checkValueBubbleStyle($MA.ValueBubbleStyle.FLOAT)&&
this.currentY?this.currentY:this.startY;0>s-d?s+=d+10:s>f.height&&(s=f.height-10);b.save();b.strokeStyle=this.outlineColor;b.lineWidth=2;var u=g+c/2,v=s-q,w=v-d;d=$MA.roundToHalf(g-c/2);u=$MA.roundToHalf(u);v=$MA.roundToHalf(v);w=$MA.roundToHalf(w);b.lineJoin="round";b.beginPath();b.moveTo(g,s);g+q>=f.width?(u=f.width-1,d=u-c,e||(d=1,u=f.width-1),b.lineTo(u,v),b.lineTo(u,w+10),b.quadraticCurveTo(u,w,u-10,w),b.lineTo(d+10,w),b.quadraticCurveTo(d,w,d,w+10),b.lineTo(d,v-10),b.quadraticCurveTo(d,v,d+
10,v),b.lineTo(g-q,v)):0>=g-q?(d=1,u=d+c,!1==e&&(d=1,u=f.width-1),b.lineTo(d,v),b.lineTo(d,w+10),b.quadraticCurveTo(d,w,d+10,w),b.lineTo(u-10,w),b.quadraticCurveTo(u,w,u,w+10),b.lineTo(u,v-10),b.quadraticCurveTo(u,v,u-10,v),b.lineTo(g+q,v)):(0>d?(d=1,u=d+c):u>f.width&&(u=f.width-1,d=u-c),!1==e&&(d=1,u=f.width-1),b.lineTo(g+q,v),g+q<u-10&&b.lineTo(u-10,v),b.quadraticCurveTo(u,v,u,v-10),b.lineTo(u,w+10),b.quadraticCurveTo(u,w,u-10,w),b.lineTo(d+10,w),b.quadraticCurveTo(d,w,d,w+10),b.lineTo(d,v-10),
b.quadraticCurveTo(d,v,d+10,v),d+10<g-q&&b.lineTo(g-q,v));b.closePath();b.stroke();b.restore();"white"!==document.getElementById(this.chartView.id).style.background&&(c=b.createLinearGradient(0,0,0,v),r.checkValueBubbleStyle($MA.ValueBubbleStyle.FLOAT)||r.checkValueBubbleStyle($MA.ValueBubbleStyle.FLOATTOP)?(c.addColorStop(0,"rgba(221,221,221,0.9)"),c.addColorStop(1,"rgba(255,255,255,0.9)")):(c.addColorStop(0,"rgba(221,221,221,0.8)"),c.addColorStop(1,"rgba(255,255,255,0.2)")),b.fillStyle=c,b.fill());
$MA.platform.blackberry&&b.clearRect(0,s,b.canvas.width,b.canvas.height-s);b.fillStyle=this.outlineColor;b.fillRect(g-this.itemSize/2-6,this.startY,this.itemSize+13,f.height);return{left:d,top:w,right:u,bottom:v}};c.prototype.drawLegends=function(a,b,c){a.save();var d=b.right-b.left-2*this.padding,e=14+2*this.padding,f=this.getTitleHeight(),g=this.chartView.getGraph().getAllGraphObjs().length;a.beginPath();a.rect(b.left+this.padding,b.top+f,d,e);a.clip();d=this.scrollX;0>d?(d=this.scrollX,e=this.size.right-
this.size.left,this.totalLegendsWidth+d<e&&(d=e-this.totalLegendsWidth)):d=0;this.scrollX=d;var s=b.left+this.padding,r=b.right-this.padding,e=s+d,u=b.top+f,f=this.getCategoryValueDisplay();a.font=this.textFont.toString();var v=a.measureText(f).width,w=v+2*this.padding;w>this.totalLegendsWidth&&(e=s+(w-this.totalLegendsWidth)/2);0>e&&(e=0);e+this.totalLegendsWidth>a.canvas.width&&(e=s+d);var x,A,y;if("ltr"===this.dir)for(w=0;w<c.length;++w){if(x=c[w],d=x.getWidth(a),e+d>=s&&e<=r&&(x.draw(a,e,u,this.textColor,
this.fillColor),void 0===A&&(A=w)),e+=d+1,e>r){y=w;break}}else for(e=e+this.totalLegendsWidth-2*d-2*this.padding,e>a.canvas.width&&(e=a.canvas.width-d-this.padding),w=0;w<c.length;++w){x=c[w];d=x.getWidth(a);e=e-d-1;void 0===A&&(A=w);if(e<s-d){y=w;break}x.draw(a,e,u,this.textColor,this.fillColor)}1<g&&(this.valueDisplayName=this.chartView.getValueDisplayNames(A,y),f=this.getCategoryValueDisplay(),v=a.measureText(f).width);a.restore();a.fillStyle="black";a.font=this.textFont.toString();a.textBaseline=
"hanging";if(b.right-b.left>v)e=(b.right+b.left)/2-v/2;else{for(var e=s,C,w=0;w<f.length&&!(C=f.substr(0,w),c=a.measureText(C),c=c.width,c+25>b.right-b.left);w++);f=C+"..."}"rtl"===this.dir&&(e+=v,e>a.canvas.width&&(e=a.canvas.width-this.padding));a.fillText(f,e,b.top+this.padding)};c.prototype.show=function(a,b,c,d,e,f){if(a){this.chartView=a;var g=a.getGraph();try{if(!this.legends||e||a.isDrillLevelChanged){this.startX=b;this.startY=c;this.offset=d;void 0!=f&&this.setValue(f);void 0===f&&void 0!==
this.value&&this.setValue(this.value);this.update();var s=-1,r=-1,u=g.getGraphObj().selectedValue;g.isDataScattered()&&(s=void 0==this.actualX?this.currentX:this.actualX,r=void 0==this.actualY?-1:this.actualY);if($MA.Browser.isJBStockBrowser){var v=this.dataX;setTimeout(function(){a.clickValueBubble(a,s,r,v,0,!1,a.graphViewElem,!0,u)},150)}else a.clickValueBubble(a,s,r,this.dataX,0,!1,a.graphViewElem,!0,u)}else g.isDataScattered()?this.value=g.getNearestCategoryLoc(this.clientX,this.clientY):(void 0!=
f&&this.setValue(f),this.update()),a.updateValueBubble(),this.plot()}catch(w){$MA.log.error("Error in show vbObj: "+w.description)}}};c.prototype.synValueAndLegends=function(){if(this.isDrawIntersectionPoints&&this.points&&0<this.points.length){var a,b,c=!0,d,e;for(a=0;a<this.points.length;++a)for(d=this.points[a],b=0;b<d.length;++b){e=d[b];if(e.itemNumber===this.value){c=!1;break}if(!c)break}if(c){for(a=0;a<this.points.length&&(d=this.points[a],!d[0].xCoord||!d[0].yCoord);++a);a=999;for(b=0;b<d.length;++b)e=
d[b],c=Math.abs(e.itemNumber-this.value),c<a&&(a=c,this.value=e.itemNumber,this.currentX=e.xCoord-this.dataX)}}b=this.chartView.getGraph();if(b.isDataScattered())for(b=b.getSeriesList(),d=0;d<this.value.length;++d)for(a=this.value[d].Series,e=0;e<b.length;++e)if(a.name===b[e].name){a.enabled=b[e].enabled;break}this.chartView.updateValueBubble()};c.prototype.plot=function(){if(void 0!==this.legends&&void 0!==this.chartView){var a=this.chartView.getGraph();if(a.getValueBubble()){this.ploting=!0;this.synValueAndLegends();
var b=this.context,c=b.canvas,d=c.width,e=0,f,g=this.legends.length;c.width=d;for(c=0;c<g;++c)f=this.legends[c],f.setFirst(0===c),f.setLast(c===g-1),e+=f.getWidth(b),c!=g-1&&(e+=1);this.totalLegendsWidth=e+=2*this.padding;c=this.padding+this.getTitleHeight();0<g&&(c+=this.legends[0].getHeight());this.scrollable=e>d;this.size=this.drawOutLine(b,e,c,e<=d);this.drawLegends(b,this.size,this.legends);if(this.isDrawIntersectionPoints)if(this.dragging)this.drawIntersectionPoints(b);else for(d=this.legends.length,
c=0;c<d;++c)if(f=this.legends[c],!1!==f.isEnabled())for(e=a.getSeriesIndex(f.seriesValue,f.graphObjIndex),g=this.points[e],e=0;e<g.length;++e){var s=g[e];s.itemNumber===this.value&&this.drawIntersectionPoint(b,s.xCoord-this.dataX,s.yCoord-this.dataY,f.legendColor.toString())}this.ploting=!1}}};d=function(a){this.id=a;this.yOffset=this.radius=this.y=this.x=this.value=0;this.text="";this.isSelected=!1;this.currentY=this.currentX=0;this.dragging=!1;a=document.getElementById(a);void 0!=a&&(a.vbObj=this,
this.context=a.getContext("2d"));this.getStyles();this.chartView=null};d.create=function(a){return new d(a)};d.prototype=new a;d.prototype.setChartView=function(a){this.chartView=a};d.prototype.setPosition=function(a){if("top"===a||"side"===a){if(this.position!=a)return this.position=a,!0}else $MA.log.error("Unknown ValueBubble position : "+a);return!1};d.prototype.updating=function(a,b){this.currentX=a;this.currentY=b;this.value=this.getValue();this.x=a;this.y=b};d.prototype.update=function(){this.dragging=
!1;this.value=this.getValue()};d.prototype.getValue=function(){var a=this.x-this.centerX,b=this.y-this.centerY,c=Math.acos(a/Math.sqrt(a*a+b*b)),a=this.currentX-this.centerX,b=this.currentY-this.centerY,a=Math.acos(a/Math.sqrt(a*a+b*b));return 0<b?a-c:c-a};d.DECIMAL=100;e=function(a){d.call(this,a);this.selectedLegend=void 0;this.legendList=[];this.padding=e.DEFAULT_PADDING;this.scrollY=this.scrollX=this.mouse_point_y=this.mouse_point_x=this.prev_y=this.prev_x=0;this.scrolling=this.scrollable=!1;
this.dir=$MA.dir};e.DEFAULT_PADDING=7;e.prototype=new d;e.create=function(a){return new e(a)};e.prototype.onMouseDown=function(a,b){if(0===this.legendList.length)return-1;var c=this.legendList.length,d,e;for(d=0;d<c;++d)if(e=this.legendList[d],e.hitTest(a,b))return this.selectedLegend=e,this.scrollable&&(this.mouse_point_x=a,this.mouse_point_y=b,this.prevX=a,this.prevY=b,this.scrolling=!0),1;return-1};e.prototype.onMouseUp=function(a,b){var c=this.legendList.length,d=Math.abs(a-this.mouse_point_x);
if(this.scrolling&&30<d)this.scrolling=!1;else for(d=0;d<c;++d){var e=this.legendList[d];if(e.hitTest(a,b)&&this.selectedLegend.name===e.name)return this.selectedLegend}};e.prototype.doScroll=function(a,b){this.scrollX+=a-this.prevX;this.scrollY+=b-this.prevY;var c=this.size.right-this.size.left;"ltr"===this.dir?this.totalLegendsWidth+this.scrollX<c&&(this.scrollX=c-this.totalLegendsWidth):this.scrollX-=2*(a-this.prevX);this.prevX=a;this.prevY=b;this.plot()};e.prototype.createLegend=function(a){var b,
c,e,f,g,q;b=a.name;c=a.percent;e=a.value;f=a.color;g=a.others;c=Math.round(c*d.DECIMAL);c/=d.DECIMAL;c=!0==a.isNull?"":$MA.format(c,"percent");0>e&&(c="-"+c);void 0!=a.valueDisplayText&&(a.valueDisplayText=c+" ("+a.valueDisplayText+")");this.showValueOnPieChart&&(q=this.chartView.getGraphGob());var s;if(g){s="";var r;for(r=0;r<g.length;r++)0<r&&(s+="  "),c=g[r].yCoord*d.DECIMAL,c=Math.round(c),c/=d.DECIMAL,c=!0==g[r].isNull?"":$MA.format(c,"percent"),s+=g[r].xCoord+": "+c,void 0!=g[r].valueDisplayText?
s+=" ("+g[r].valueDisplayText+")":this.showValueOnPieChart&&(s+=" ("+$MA.format(g[r].yValue,q.getValueFormat(0))+")")}this.showValueOnPieChart&&(c+=" ("+$MA.format(e,q.getValueFormat(0))+")");a=new $MA.BI.ValueBubbleLegend(b,b,c,a.valueDisplayText,f.toString(),s,this.textFont);a.setShowLabel(this.showLegendLabel);a.dir=this.dir;return a};e.prototype.hasPieSelected=function(){return this.isSelected};e.prototype.setLegends=function(a,b){var c=a?a.length:0,d,e;if(0<c){this.legendList=[];for(d=0;d<c;d++)if(e=
a[d])e=this.createLegend(e),this.legendList.push(e);this.isSelected=b}};e.prototype.drawOutLine=function(a,b,c,d,e){return"side"===this.position?this.drawSideOutline(a,b,c,d,e):this.drawTopOutline(a,b,c,d,e)};e.prototype.drawTopOutline=function(b,c,d,e,f){var g=document.getElementById(this.id),q=a.INDICATOR_SIZE,s=this.centerX,r=this.centerY-this.radius;b.strokeStyle=this.outlineColor;b.lineWidth=2;var u=s+c/2,v=r-q,w=v-d;1>w&&(w=1,v=w+d,r=v+q);d=$MA.roundToHalf(s-c/2);var u=$MA.roundToHalf(u),v=
$MA.roundToHalf(v),w=$MA.roundToHalf(w),x=b.createLinearGradient(0,0,0,v);x.addColorStop(0,"rgba(221,221,221,0.8)");x.addColorStop(1,"rgba(255,255,255,0.2)");if(!f)return e&&(d=1,u=g.width-1),b.beginPath(),$MA.ContextHelper.roundRect(b,d,w,u-d,v-w,10),b.closePath(),b.stroke(),b.fillStyle=x,b.fill(),b={left:d,top:w,right:u,bottom:v,width:u-d};b.lineJoin="round";b.beginPath();b.moveTo(s,r);s+q>=g.width?(u=g.width-1,d=u-c,e&&(d=1,u=g.width-1),b.lineTo(u,v),b.lineTo(u,w+10),b.quadraticCurveTo(u,w,u-10,
w),b.lineTo(d+10,w),b.quadraticCurveTo(d,w,d,w+10),b.lineTo(d,v-10),b.quadraticCurveTo(d,v,d+10,v),b.lineTo(s-q,v)):0>=s-q?(d=1,u=d+c,e&&(d=1,u=g.width-1),b.lineTo(d,v),b.lineTo(d,w+10),b.quadraticCurveTo(d,w,d+10,w),b.lineTo(u-10,w),b.quadraticCurveTo(u,w,u,w+10),b.lineTo(u,v-10),b.quadraticCurveTo(u,v,u-10,v),b.lineTo(s+q,v)):(0>d?(d=1,u=d+c):u>g.width&&(u=g.width-1,d=u-c),e&&(d=1,u=g.width-1),b.lineTo(s+q,v),s+q<u-10&&b.lineTo(u-10,v),b.quadraticCurveTo(u,v,u,v-10),b.lineTo(u,w+10),b.quadraticCurveTo(u,
w,u-10,w),b.lineTo(d+10,w),b.quadraticCurveTo(d,w,d,w+10),b.lineTo(d,v-10),b.quadraticCurveTo(d,v,d+10,v),d+10<s-q&&b.lineTo(s-q,v));b.closePath();b.stroke();b.fillStyle=x;b.fill();return b={left:d,top:w,right:u,bottom:v,width:u-d}};e.prototype.drawSideOutline=function(b,c,d,e,f){var g=document.getElementById(this.id),q=a.INDICATOR_SIZE,s=0,r=0,u=0;this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?(s=this.centerX-this.radius,r=s-c-q,u=s-q):(s=this.centerX+this.radius,r=s+q,u=s+c+q);c=this.centerY;
b.strokeStyle=this.outlineColor;b.lineWidth=2;var v=c+d/2;d=v-d;r=$MA.roundToHalf(r);u=$MA.roundToHalf(u);v=$MA.roundToHalf(v);d=$MA.roundToHalf(d);var w=b.createLinearGradient(0,0,0,v);w.addColorStop(0,"rgba(221,221,221,0.8)");w.addColorStop(1,"rgba(255,255,255,0.2)");if(!f)return e&&(this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?r=0:u=g.width-1),b.beginPath(),$MA.ContextHelper.roundRect(b,r,d,u-r,v-d,10),b.closePath(),b.stroke(),b.fillStyle=w,b.fill(),b={left:r,top:d,right:u,bottom:v,width:u-
r};b.lineJoin="round";b.beginPath();b.moveTo(s,c);u>g.width&&(u=g.width-1);0>r&&(r=0);this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?(b.lineTo(u,c+q),c+q<v-10&&b.lineTo(u,v-10),b.quadraticCurveTo(u,v,u-10,v),b.lineTo(r+10,v),b.quadraticCurveTo(r,v,r,v-10),b.lineTo(r,d+10),b.quadraticCurveTo(r,d,r+10,d),b.lineTo(u-10,d),b.quadraticCurveTo(u,d,u,d+10),d+10<c-q&&b.lineTo(u,c-q)):(b.lineTo(r,c+q),c+q<v-10&&b.lineTo(r,v-10),b.quadraticCurveTo(r,v,r+10,v),b.lineTo(u-10,v),b.quadraticCurveTo(u,v,u,
v-10),b.lineTo(u,d+10),b.quadraticCurveTo(u,d,u-10,d),b.lineTo(r+10,d),b.quadraticCurveTo(r,d,r,d+10),d+10<c-q&&b.lineTo(r,c-q));b.closePath();b.stroke();b.fillStyle=w;b.fill();return b={left:r,top:d,right:u,bottom:v,width:u-r}};e.prototype.getRadian=function(){return"top"===this.position?-Math.PI/2:this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?-Math.PI:-0.001};e.prototype.show=function(a,b){if(a)if(this.chartView=a,0!=a.tableViewElem.offsetHeight)this.legend=void 0,this.legendList=[];else{if(b){var c=
a.getGraph(),d=this.getRadian(),e=c.getPieProperty("PieFillBrush",d);this.text=c.getPieProperty("PieDataString",d);if(void 0!=e&&(a.refreshValueBubbleLegends(),$MA.Browser.isJBStockBrowser)){this.drawValueBubbleTimer&&clearTimeout(this.drawValueBubbleTimer);var f=this;this.drawValueBubbleTimer=setTimeout(function(){f.plot();f.drawValueBubbleTimer=void 0;a.plotByShow=!0},150);return}}this.plot()}};e.prototype.drawLegends=function(a,b,c){a.save();var d=this.size.right-this.size.left-2*this.padding;
a.beginPath();a.rect(this.size.left+this.padding,this.size.top,d,c);a.clip();var e=this.scrollX;0>e?(c=this.size.right-this.size.left,b+e<c&&(e=c-b)):e=0;this.scrollX=e;c=this.size.left+this.padding;var f=this.size.right-this.padding,g=c+e,s=this.size.top+this.padding,r=this.legendList.length;if("ltr"===this.dir)for(b=0,d;b<r&&!(e=this.legendList[b],d=e.getWidth(a),g+d>=c&&g<=f&&e.draw(a,g,s,this.textColor,this.fillColor),g+=d+1,g>f);++b);else for(g=g+b-2*e-2*this.padding,g>a.canvas.width&&(g=a.canvas.width-
e-this.padding),b=0,d;b<r&&!(e=this.legendList[b],d=e.getWidth(a),g=g-d-1,e.draw(a,g,s,this.textColor,this.fillColor),g<c);++b);a.restore()};e.getDefaultHeight=function(){return 2*e.DEFAULT_PADDING+$MA.BI.ValueBubbleLegend.getDefaultHeight()};e.prototype.getHeightInt=function(a){a=(a|=this.legend)?a.getHeight():0<this.legendList.length?this.legendList[0].getHeight():$MA.BI.ValueBubbleLegend.getDefaultHeight();return 2*this.padding+a};e.prototype.getHeight=function(b){b=this.getHeightInt(b);"side"!==
this.position&&(b+=a.INDICATOR_SIZE);return b};e.prototype.plot=function(){var a=this.chartView.getGraph();if(a.getValueBubble()){this.pieGraphLegendPos=a.getLegendProperty("LegendPosition");var a=this.context,b=a.canvas,c=b.width;b.width=c;var d=this.padding,e=this.legendList.length,f,g,b=0;if(0<e){for(g=0;g<e;++g)f=this.legendList[g],f.setFirst(0===g),f.setLast(g===e-1),b+=f.getWidth(a),g!=e-1&&(b+=1);b+=2*d;f=this.getHeightInt(f);d=!1;"side"===this.position?this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?
(d=0>=this.centerX-this.radius-b,this.scrollable=0>this.centerX-this.radius-b):(d=this.centerX+this.radius+b>=c,this.scrollable=this.centerX+this.radius+b>c):(d=b>=c,this.scrollable=b>c);this.size=this.drawOutLine(a,b,f,d,!this.isSelected);this.drawLegends(a,b,f)}this.totalLegendsWidth=b}};f=function(b){a.call(this,b);this.categoryText="";this.id=b;this.currentY=this.offset=this.startY=this.startX=this.value=this.itemSize=this.incr=0;this.dragging=!1;this.legends=void 0;this.padding=7;if(b=document.getElementById(b))b.vbObj=
this,this.context=b.getContext("2d");this.getStyles()};f.prototype=new a;f.create=function(a){return new f(a)};f.prototype.plot=function(a){a=this.context;var b=a.canvas,c=b.width;b.width=c;a.fillStyle=this.outlineColor;a.fillRect(this.startX,this.currentY-this.itemSize/2,c,this.itemSize)};f.prototype.updating=function(a,b){this.value=this.getValue();this.currentY=b};f.prototype.update=function(){this.dragging=!1;this.value=this.getValue();this.currentY=this.startY+this.offset+this.value*this.incr};
f.prototype.getValue=function(){var a=document.getElementById(this.id),b=this.currentY;b<this.startY?b=this.startY:b>a.offsetHeight-this.startY&&(b=a.offsetHeight-this.startY);return Math.round((b-this.startY-this.offset)/this.incr)};f.prototype.reset=function(){this.legends=[];this.points=[]};f.prototype.addLegend=function(a,b,c,d,e,f){if(!this.showNullValue&&""===c)return null;a=new $MA.BI.ValueBubbleLegend(a,b,c,f,d.toString(),void 0,this.textFont);a.setEnabled(e);a.setShowLabel(this.showLegendLabel);
void 0===this.legends&&(this.legends=[]);this.legends.push(a);return a};f.prototype.drawLegends=function(a,b,c){a.save();var d=b.right-b.left-2*this.padding,e=16+2*this.padding,f=this.padding;a.beginPath();a.rect(b.left+this.padding,b.top+f,d,b.bottom-b.top);a.clip();d=b.top+f;f=b.bottom-this.padding;b=b.left+this.padding;if(c){var g,s=d;for(g=0;g<c.length&&s<f;s+=e+2*this.padding){var r=c[g];r.getWidth(a);0<=s&&(s+e>=d&&s<=f)&&(r.draw(a,b,s,this.textColor,this.fillColor),g++)}}a.restore()};var g=
function(a){this.getValueBubbleObject=function(){return a}};g.prototype.updating=function(a,b){return this.getValueBubbleObject().updating(a,b)};g.prototype.update=function(){return this.getValueBubbleObject().update()};g.prototype.show=function(a,b,c,d,e,f){return this.getValueBubbleObject().show(a,b,c,d,e,f)};return{create:function(a,b){var d;"hbvs"===a?d=new c(b):"vs"===a?d=new f(b):"pbvs"===a&&(d=new e(b));if(d)return new g(d)},getPieBubbleValueSliderDefaultHeight:function(){return e.getDefaultHeight()}}}();
$MA.BI.ChartView.prototype.isValueBubbleVisible=function(){return this.getGraph().getValueBubble()};$MA.BI.ChartView.prototype.showValueBubble=function(a){this.getGraph().setValueBubbleProperty("ValueBubble",a);this.refreshValueBubbleView(!1);this.refreshAsync()};
$MA.BI.ChartView.prototype.setValueBubbleStyle=function(a){var b=!0,c;if(null!=a){var d=this.getGraph();void 0!==a.style&&(b=d.setValueBubbleProperty("valuebubblestyle",a.style));void 0!==a.legendIconShape&&(this.legendIconShape=c=a.legendIconShape);(c=this.getValueBubbleObject())&&c.configureSlider(a)&&(d.setValueBubbleProperty("ValueBubbleHeight",c.getHeight()),d.setValueBubbleProperty("ValueBubblePosition",c.getPosition()),d.setValueBubbleProperty("ValueBubbleCategoriesDisplayOrder",c.categoriesDisplayOrder))}else b=
!1;return b};$MA.BI.ChartView.prototype.getValueBubbleStyle=function(){var a=this.valueBubbleViewElem.vbObj.getConfiguration(),b=this.getGraph();a.style=b.getValueBubbleStyle();return a};$MA.BI.ChartView.prototype.getValueBubbleHeight=function(){return this.getValueBubbleObject().getHeight()};$MA.BI.ChartView.prototype.getValueBubblePosition=function(){return this.getValueBubbleObject().getPosition()};$MA.BI.ChartView.prototype.getValueBubbleObject=function(){if(this.valueBubbleViewElem)return this.valueBubbleViewElem.vbObj};
$MA.BI.ChartView.prototype.clickValueBubble=function(a,b,c,d,e,f,g,h,k){var l=a.getGraph(),p=b+a.valueBubbleViewElem.offsetLeft;f=c+a.valueBubbleViewElem.offsetTop;var m=l.getDrawArea();if(void 0!=m&&!(b>m.width+m.left)){var n=a.getGraphGob(),m=a.valueBubbleViewElem.vbObj,q=l.getAllGraphObjs().length,s;for(s=0;s<q;s++)if(0<=l.getAllGraphObjs()[s].graphType.indexOf("line")){m.isDrawIntersectionPoints=!0;break}q=0;void 0!=m.onMouseDown&&(q=m.onMouseDown(b,c));if(0<q)this.targetIsSlider=!0,a.targetIsSlider=
!0;else{if(0>=q)if(m.dragging=h?!1:!0,0<=b&&(m.currentX=b),0<=c&&(m.currentY=c),m.clientX=d-g.offsetLeft,m.clientY=e+g.offsetTop,m.dataX=a.valueBubbleViewElem.offsetLeft,m.dataY=a.valueBubbleViewElem.offsetTop,l.isDataScattered()){m.showCategoryText=!1;m.showCategoryDisplayName=!1;m.showValueDisplayName=!1;a=k;void 0==a?(a=l.getNearestCategoryLoc(p,f),c=a[0].LocX):(this.selectedCategoryValue=a[0].Category,c=l.getUpdatedX(a[0].Category));m.value=a;m.actualX=b;m.actualY=f;if(0>=m.value.length)return;
m.currentX=h?c-m.dataX:b}else h?(m.update(),m.text=l.getDataString(m.value,n.getValueFormat(0))):m.updating(b,c);this.updateValueBubble();m.plot();this.updateAccessibiltyContent()}}};
$MA.BI.ChartView.prototype.moveValueBubble=function(a,b,c,d,e){var f=this.getGraph(),g=this.getValueBubbleObject();g.clientX=c-e.offsetLeft;g.clientY=d+e.offsetTop;var h=f.getDrawArea();b<h.top||(a>h.width+h.left||b>h.top+h.height||a>h.left+h.width)||(f.isDataScattered()?(g.value=f.getNearestCategoryLoc(c-e.offsetLeft,d-e.offsetTop),g.currentX=a):g.updating(a,b),1!==f.getSeriesList()[0].items.length||f.isDataScattered()||(g.value=0),this.displayValueBubble())};
$MA.BI.ChartView.prototype.updateValueBubble=function(){var a=this.getGraph(),b=this.getGraphGob(),c=this.getValueBubbleObject(),d,e,f,g,h,k,l,p;if(a.isDataScattered()){if(void 0!=c.reset&&c.reset(),void 0!=c.categoryText){c.categoryText=a.getCategoryString(c.value[0].ItemNumber);c.categoryDisplayText=a.getCategoryDisplayText(c.value[0].ItemNumber);c.categoryDisplayName=b.getObject("category").getProperty("displayname");c.valueDisplayName=b.getObject("values").getDisplayName(0);(e=b.getObject("values").getDisplayName(1))||
(e="size");d=c.value.length;var m=b.getValueFormat(0),n;for(d-=1;0<=d;d--){h=c.value[d].Series;var q=c.value[d].ItemNumber;k=h.items[q];n=$MA.format(k.yValue,m,h.locale);l=a.getSeriesString(h);var s=c.value[d].SeriesNo;void 0==s&&(s=0);var r=h.items[q].originalIndex;void 0==r&&(r=q);f=a.getCustomisedFillBrush(s,r);var u;void 0!=a.getSeriesFillBrush(s)&&(u=a.getSeriesFillBrush(s).toString());"bubble"==this.getChartType()?(s=a.getColorDataList(),0<s.length&&(g=s.get(h.getItemColorData(r,"color")),void 0==
g&&(g=0)),void 0!=u&&(p=u),void 0!=g&&(p=a.getDrawContext(g).getFillBrush().toString())):void 0!=u&&(p=u);void 0!=f&&(p=f);l=c.addLegend(h,l,n,p,h.isEnabled(),k.valueDisplayText);null!=l&&(l.showNullValue=c.showNullValue,h=a.getShape(q),l.shape=h,l.set2ndName(e),h=k.otherValuesDisplayText,void 0!=h&&0<h.length&&void 0!=h[0]||(h=k.otherValues?k.otherValues[0]:k.yValue,$MA.format(h,b.getValueFormat(1))),l.scatterChart=a.isDataScattered(),h=b.getObject("values").getBubbleChartOtherValuesDisplayName("color"),
l.setColorMeasureName(h),l.otherValues=k.otherValues,l.valueDisplayName=b.getObject("values").getDisplayName(0),l.categoryDisplayName=b.getObject("category").getProperty("displayname"),l.categoryValue=a.getCategoryDisplayText(c.value[d].ItemNumber),l.shapeMeasureName=b.getObject("values").getBubbleChartOtherValuesDisplayName("shape"),l.heightMeasureName=b.getObject("values").getBubbleChartOtherValuesDisplayName("height"))}}}else if(m=a.getSeriesList(),0!=m.length){if(1==m[0].items.length||1==a.getMaxItemCount())c.value=
0;d=a.getDataDisplayString(c.value,b.getValueFormat(0));c.text=a.getDataString(c.value,b.getValueFormat(0));u=c.text.split("\n");q=d.split("\n");void 0!=c.reset&&c.reset();if(void 0!=c.categoryText)for(c.categoryText=a.getCategoryString(c.value),c.categoryDisplayText=a.getCategoryDisplayText(c.value),c.categoryDisplayName=b.getObject("category").getProperty("displayname"),c.valueDisplayName=b.getObject("values").getDisplayName(0),g=c.value,d=0;d<m.length;++d){h=m[d];if("tablebar"==a.graphType){p=
a.getTableProperty("TableFirstRow");e=p%m.length;if(c.value==Math.floor(p/m.length)&&d<e)continue;!h.isEnabled()&&u.length+d<m.length&&u.unshift("disabled")}l=a.getSeriesString(h);p=h.drawContext.fillBrush;f=a.getCustomisedFillBrush(d,g);void 0!=f&&(p=f);e=""==q[d]?void 0:q[d];l=c.addLegend(h,l,u.shift(),p.toString(),h.isEnabled(),e);h.graphObj instanceof $MA.Graph.LineGraphObject&&(void 0!=l&&null!=l)&&(l.shape=this.legendIconShape);0<=a.graphType.indexOf("bubble")&&null!=l&&(l.showNullValue=c.showNullValue,
(e=b.getObject("values").getBubbleChartOtherValuesDisplayName("width"))||(e="size"),k=h.items[c.value],void 0!=k&&void 0!=k.otherValuesDisplayText&&(h=k.otherValuesDisplayText,void 0!=h&&void 0!=h[0]&&0<h.length||(h=k.otherValues?k.otherValues[0]:k.yValue,$MA.format(h,b.getValueFormat(1))),l.otherValues=k.otherValues,l.set2ndName(e)))}this.setValueBubblePoints(c,m)}};
$MA.BI.ChartView.prototype.displayValueBubble=function(){if(void 0===this.sliderUpdater){var a=this;this.sliderUpdater=setTimeout(function(){a.updateValueBubble();a.getValueBubbleObject().plot();a.sliderUpdater=void 0},50)}};
$MA.BI.ChartView.prototype.setValueBubblePoints=function(a,b){if(a.isDrawIntersectionPoints){var c,d,e=[];if(1==b[0].items.length)for(c=0;c<b.length;++c)e[c]=[],d=b[c],e[c].push({xCoord:d.items[0].xCoord,yCoord:d.items[0].yCoord,itemNumber:0});else{var f=this.getGraph(),g=a.value,h=-1;d=0;var h=a.clientX,k=a.chartView.getGraphElem();for(d=0;k.offsetParent;)d+=k.offsetLeft,k=k.offsetParent;h-=d;k=f.getAllGraphObjs();void 0!=b[0].items[a.value]&&(c=b[0].items[a.value].xCoord);if(void 0==c){d=0;for(c=
k.length;d<c&&!(0<=k[d].graphType.indexOf("line"));d++);c=(c=f.getDrawObject(0,a.value,k[d]))?c.item.xCoord:0}h=h>c?"ltr"===this.dir?g+1:g-1:"ltr"===this.dir?g-1:g+1;for(c=0;c<b.length;++c){e[c]=[];d=b[c];var l=f.getDrawObject(c,g,k);e[c].push({xCoord:d.items[g]&&void 0!=d.items[g].xCoord?d.items[g].xCoord:l.item.xCoord,yCoord:d.items[g]&&void 0!=d.items[g].yCoord?d.items[g].yCoord:l.item.yCoord,itemNumber:g});var p=f.getDrawObject(c,h,k);void 0===p?e[c].push({xCoord:d.items[g]&&void 0!=d.items[g].xCoord?
d.items[g].xCoord:l.item.xCoord,yCoord:d.items[g]&&void 0!=d.items[g].yCoord?d.items[g].yCoord:l.item.yCoord,itemNumber:g}):e[c].push({xCoord:d.items[h]&&void 0!=d.items[h].xCoord?d.items[h].xCoord:p.item.xCoord,yCoord:d.items[h]&&void 0!=d.items[h].yCoord?d.items[h].yCoord:p.item.yCoord,itemNumber:h})}}a.points=e}};
$MA.BI.ChartView.prototype.onValueBubbleViewTouchStart=function(a){var b=a.changedTouches[0],c=$MA.getMouseXY(b,a.srcElement),d=c.x,c=c.y,e=this.getGraph().getDrawArea();d>e.width+e.left||(void 0==a.target.vbObj&&(d-=this.valueBubbleViewElem.offsetLeft,c-=this.valueBubbleViewElem.offsetTop),this.clickValueBubble(this,d,c,b.clientX,b.clientY,!1,this.elem))};
$MA.BI.ChartView.prototype.onValueBubbleViewTouchMove=function(a){var b=a.changedTouches[0],c=this.getGraph().getDrawArea(),d=$MA.getMouseXY(b,a.srcElement);a=d.x;d=d.y;a>c.width-5+c.left||(c=this.getValueBubbleObject(),c.dragging?this.moveValueBubble(a,d,b.pageX,b.pageY,this.elem):c.scrolling&&void 0!=c.doScroll&&c.doScroll(a,d))};
$MA.BI.ChartView.prototype.onValueBubbleViewTouchEnd=function(a){var b=this.getValueBubbleObject(),c=this.getGraph(),d=this.getGraphGob(),e=c.getSeriesList(),e=b.legends.length,f;if(c.getValueBubble()){if(b.dragging)c.isDataScattered()?(b.currentX=b.value[0].LocX-b.dataX,b.dragging=!1):(b.update(),b.text=c.getDataString(b.value,d.getValueFormat(0)));else if(f=a.changedTouches[0],f=$MA.getMouseXY(f,a.srcElement),a=f.x,f=f.y,c.getValueBubble()&&void 0!=b.onMouseUp&&b.onMouseUp(a,f)){for(a=0;a<e;++a)f=
b.legends[a],c.setSeriesState(f.seriesValue,f.isEnabled(),f.graphObjIndex),c.setLegendState(f.seriesValue,f.isEnabled(),f.graphObjIndex);this.refreshChartViews();if(0<=c.graphType.indexOf("percent"))for(b.text=c.getDataString(b.value,d.getValueFormat(0)),d=b.text.split("\n"),b.reset(),b.categoryText=c.getCategoryString(b.value),b.categoryDisplayText=c.getCategoryDisplayText(b.value),e=c.getSeriesList(),a=0;a<e.length;++a){f=e[a];var g=c.getSeriesString(f);b.addLegend(f,g,d[a],c.getSeriesFillBrush(a).toString(),
f.isEnabled())}}b.plot();this.updateWhatIfVariableControls()}};$MA.BI.Breadcrumbs=function(a){this.id=a;a=document.getElementById(a);if(void 0!=a){a.breadcrumbs=this;var b=this;a.addEventListener($MA.isTouchEventSupported?"touchstart":"mousedown",function(a){b.onTouchStart(a)},!1)}this.itemX=[];this.itemWidth=[];this.itemText=[];this.overflow=!1;this.getStyles()};$MA.BI.Breadcrumbs.BKCOLOR="#808080";$MA.BI.Breadcrumbs.TEXTCOLOR="#FFFFFF";$MA.BI.Breadcrumbs.LINEARSTARTCOLOR="#303030";
$MA.BI.Breadcrumbs.LINEARENDCOLOR="#A0A0A0";$MA.BI.Breadcrumbs.prototype.getStyles=function(){this.bkColor=$MA.BI.Breadcrumbs.BKCOLOR;this.textColor=$MA.BI.Breadcrumbs.TEXTCOLOR;var a=$MA.getCSSRule(".chart_breadcrumbs");void 0!=a&&(""!=a.style.backgroundColor&&(this.bkColor=a.style.backgroundColor),""!=a.style.color&&(this.textColor=a.style.color))};
$MA.BI.Breadcrumbs.prototype.calcItemWidth=function(a,b){var c;for(c=b.length-1;0<=c;c--)this.itemX.pop(),this.itemWidth.pop();var d=document.getElementById(this.id).width,e,f=0;for(c=0;c<b.length;c++)if(e=a.measureText(b[c]),this.itemX[c]="ltr"===$MA.dir?f:a.canvas.width-f,this.itemWidth[c]=40+e.width,this.itemText[c]=b[c],f+=40+e.width,52>d-f){this.itemWidth[c]=52;this.itemText[c]="...";break}return f};
$MA.BI.Breadcrumbs.prototype.getX=function(a){return a.touches&&a.touches.item?$MA.getMouseXY(a.touches.item(0),a.srcElement).x:$MA.getMouseXY(a).x};$MA.BI.Breadcrumbs.prototype.onTouchStart=function(a){var b,c=this.getX(a);for(b=this.itemX.length-1;0<=b;b--)if("ltr"===$MA.dir){if(c>this.itemX[b])break}else if(c<this.itemX[b])break;if(this.onitemclicked)if("..."==this.itemText[b])this.onitemclicked(-1);else this.onitemclicked(b);a.preventDefault();a.stopPropagation()};
$MA.BI.Breadcrumbs.prototype.plot=function(a,b){var c=a.getContext?a.getContext("2d"):null;c.clearRect(0,0,a.width,a.height);c.font="Bold 14px Helvetica";this.calcItemWidth(c,b);var d,e,f;for(d=b.length-1;0<=d;d--)"ltr"===$MA.dir?(c.beginPath(),0==d?(e=this.itemX[d],f=this.itemWidth[d]):(e=this.itemX[d]-20,f=this.itemWidth[d]+20),c.moveTo(e+f-20,0),c.lineTo(e+f,a.height/2),c.lineTo(e+f-20,a.height),c.stroke(),c.moveTo(e,0),c.lineTo(e+f-20,0),c.lineTo(e+f,a.height/2),c.lineTo(e+f-20,a.height),c.lineTo(e,
a.height),c.closePath(),f=c.createLinearGradient(0,0,e+f,0),f.addColorStop(0,$MA.BI.Breadcrumbs.LINEARSTARTCOLOR),f.addColorStop(1,$MA.BI.Breadcrumbs.LINEARENDCOLOR),c.fillStyle=f,c.fill(),$MA.platform.blackberry&&1==b.length&&(c.clearRect(0,0,a.width,a.height),c.fill()),c.fillStyle=this.textColor,c.fillText(this.itemText[d],this.itemX[d]+5,20)):(c.beginPath(),0==d?(e=this.itemX[d],f=this.itemWidth[d]):(e=this.itemX[d]+20,f=this.itemWidth[d]+20),c.moveTo(e-f+20,0),c.lineTo(e-f,a.height/2),c.lineTo(e-
f+20,a.height),c.stroke(),c.moveTo(e,0),c.lineTo(e-f+20,0),c.lineTo(e-f,a.height/2),c.lineTo(e-f+20,a.height),c.lineTo(e,a.height),c.closePath(),f=c.createLinearGradient(e,0,e-f,0),f.addColorStop(0,$MA.BI.Breadcrumbs.LINEARSTARTCOLOR),f.addColorStop(1,$MA.BI.Breadcrumbs.LINEARENDCOLOR),c.fillStyle=f,c.fill(),$MA.platform.blackberry&&1==b.length&&(c.clearRect(0,0,a.width,a.height),c.fill()),c.fillStyle=this.textColor,c.textAlign="right",0==d?c.fillText(this.itemText[d],e-5,20):c.fillText(this.itemText[d],
e-25,20))};$MA.BI.DAVariables=void 0;$MA.BI.GetDAVariable=function(a){if(void 0!=a&&void 0!=$MA.BI.DAVariables){var b;for(b=0;b<$MA.BI.DAVariables.items.length;b++)if($MA.BI.DAVariables.items[b].name==a)return $MA.BI.DAVariables.items[b]}};$MA.BI.DA={};$MA.BI.DA.Variable=function(){this.variableindex=this.choices=this.selection=this.decimals=this.step=this.max=this.min=this.value=this.variableType=this.displayName=this.name=void 0};$MA.BI.DA.Variable.Name=0;$MA.BI.DA.Variable.DISPLAYNAME=1;
$MA.BI.DA.Variable.VARIABLETYPE=2;$MA.BI.DA.Variable.VALUE=3;$MA.BI.DA.Variable.MIN=4;$MA.BI.DA.Variable.MAX=5;$MA.BI.DA.Variable.STEP=6;$MA.BI.DA.Variable.DECIMALS=7;$MA.BI.DA.Variable.SELECTION=8;$MA.BI.DA.Variable.CHOICES=9;
$MA.BI.DA.Variable.propertyIds={name:$MA.BI.DA.Variable.Name,displayname:$MA.BI.DA.Variable.DISPLAYNAME,variabletype:$MA.BI.DA.Variable.VARIABLETYPE,value:$MA.BI.DA.Variable.VALUE,min:$MA.BI.DA.Variable.MIN,max:$MA.BI.DA.Variable.MAX,step:$MA.BI.DA.Variable.STEP,decimals:$MA.BI.DA.Variable.DECIMALS,selection:$MA.BI.DA.Variable.SELECTION,choices:$MA.BI.DA.Variable.CHOICES};
$MA.BI.DA.Variable.prototype.createObject=function(a){a=$MA.BI.DA.Variable.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.BI.DA.Variable.CHOICES:this.choices=b=new $MA.BI.DA.VariableChoices}return b};
$MA.BI.DA.Variable.prototype.setProperty=function(a,b){var c=$MA.BI.DA.Variable.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.BI.DA.Variable.Name:this.name=b;break;case $MA.BI.DA.Variable.DISPLAYNAME:this.displayName=b;break;case $MA.BI.DA.Variable.VARIABLETYPE:this.variableType=b;break;case $MA.BI.DA.Variable.VALUE:this.value=b;break;case $MA.BI.DA.Variable.MIN:this.min=b;break;case $MA.BI.DA.Variable.MAX:this.max=b;break;case $MA.BI.DA.Variable.STEP:this.step=b;break;case $MA.BI.DA.Variable.DECIMALS:this.decimals=
b;break;case $MA.BI.DA.Variable.SELECTION:this.selection=b}return!0};
$MA.BI.DA.Variable.prototype.getValue=function(){var a;if(this.variableType)switch(this.variableType.toLowerCase()){case "double":case "float":a=parseFloat(this.value.toString());break;case "integer":a=parseInt(this.value.toString(),10);break;case "boolean":a=$MA.parseBool(this.value);break;case "date":a=$MA.parseDate(this.value.toString());break;case "enum":void 0!=this.choices&&this.choices.items.length>parseInt(this.selection,10)&&(a=this.choices.items[parseInt(this.selection,10)].value)}else return this.value;
return a};$MA.BI.DA.Variables=function(){this.items=[]};$MA.BI.DA.Variables.VARIABLE=0;$MA.BI.DA.Variables.propertyIds={variable:$MA.BI.DA.Variables.VARIABLE};$MA.BI.DA.Variables.prototype.createObject=function(a){a=$MA.BI.DA.Variables.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.BI.DA.Variables.VARIABLE:b=new $MA.BI.DA.Variable,b.variableindex=this.items.length,this.items.push(b)}return b};$MA.BI.DA.VariableChoice=function(){this.value=this.display=void 0};
$MA.BI.DA.VariableChoice.DISPLAY=0;$MA.BI.DA.VariableChoice.VALUE=1;$MA.BI.DA.VariableChoice.propertyIds={display:$MA.BI.DA.VariableChoice.DISPLAY,value:$MA.BI.DA.VariableChoice.VALUE};$MA.BI.DA.VariableChoice.prototype.setProperty=function(a,b){var c=$MA.BI.DA.VariableChoice.propertyIds[a.toLowerCase()];if(void 0==c)return!1;switch(c){case $MA.BI.DA.VariableChoice.DISPLAY:this.display=b;break;case $MA.BI.DA.VariableChoice.VALUE:this.value=b}return!0};
$MA.BI.DA.VariableChoices=function(){this.items=[]};$MA.BI.DA.VariableChoices.CHOICE=0;$MA.BI.DA.VariableChoices.propertyIds={choice:$MA.BI.DA.VariableChoices.CHOICE};$MA.BI.DA.VariableChoices.prototype.createObject=function(a){a=$MA.BI.DA.VariableChoices.propertyIds[a.toLowerCase()];if(void 0==a)return null;var b=null;switch(a){case $MA.BI.DA.VariableChoices.CHOICE:b=new $MA.BI.DA.VariableChoice,this.items.push(b)}return b};
$MA.Chart=function(a,b){$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart "+$MA.getLocalisation(null,"Start","Start")+" "+$MA.getLocalisation(null,"Chart_Id"," Chart Id: ")+a);this.id=a;void 0!=b&&"boolean"==typeof b?b||(this.settings={showGraphViewOnly:!0}):this.settings=b;this.events=void 0;this.numberOfVisibleCategory=this.refreshCount=0;var c=document.getElementById(a);if(c){c.className="chart";var d=c.macontrol;d&&d.reset();c.macontrol=this}else $MA.log.error(a+$MA.getLocalisation(null,"Error_InvalidID",
" is an invalid id"));$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart "+$MA.getLocalisation(null,"End","End"))};
$MA.Chart.prototype.load=function(a){$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.load "+$MA.getLocalisation(null,"Start","Start")+" "+a);var b=$MA.createXHR();void 0!=b&&(b.open("GET",$MA.getMetadataUrl(a),!1),b.send(null),200==b.status||304==b.status||0==b.status?this.create(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a),$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.load "+$MA.getLocalisation(null,"End","End")))};
$MA.Chart.prototype.create=function(a){var b=new $MA.BI.ChartObject(this),c;"object"==typeof a?($MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.create "+$MA.getLocalisation(null,"Start","Start")+" "+JSON.stringify(a)),c=new $MA.DataView.JsonMetaDataReader):($MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.create Start"+a),c=new $MA.DataView.XmlMetaDataReader);c.parse(b,a);this.initialize(b);$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.create "+$MA.getLocalisation(null,"End","End"))};
$MA.Chart.prototype.initialize=function(a){this.reset();var b=a.dvObj;b.initialize();var c=b.getGraphGob();0<a.zoomingLevels.length?(b=a.zoomingLevels[0].query,c.getObject("Category").setProperty("Column",a.zoomingLevels[0].categoryColumn)):b=a.getQuery();b&&(c.setFirstItem(0),c.setMaxItems(),a.retrieve(b));var d;switch(a.getChartType()){case "column":case "hierarchycolumn":case "waterfallcolumn":case "hierarchywaterfallcolumn":case "stackedcolumn":case "hundredpercentstackedcolumn":case "hierarchystackedcolumn":case "hierarchy100pctstackedcolumn":d=
new $MA.BI.BarChartView(this.id,a);break;case "bar":case "waterfallbar":d=new $MA.BI.HBarChartView(this.id,a);break;case "line":case "hierarchyline":d=new $MA.BI.LineChartView(this.id,a);break;case "bubble":d=new $MA.BI.BubbleChartView(this.id,a);break;case "pie":d=new $MA.BI.PieChartView(this.id,a);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoGraphType","Unsupported graph type"))}d&&(this.chartView=d,d.getGraphView().initialize(a.dvObj),this.settings&&(void 0!=this.settings.showGraphViewOnly?
this.settings.showGraphViewOnly&&(this.showToolBar(!1),this.showValueBubble(!1),this.showRangeSelectorView(!1)):(void 0!=this.settings.showToolBar&&this.showToolBar(this.settings.showToolBar),void 0!=this.settings.showValueBubble&&this.showValueBubble(this.settings.showValueBubble),void 0!=this.settings.showRangeSelectorView&&this.showRangeSelectorView(this.settings.showRangeSelectorView),void 0!=this.settings.showTableView&&this.showTableView(this.settings.showTableView))))};
$MA.Chart.prototype.switchToFullView=function(a){var b=this.chartView.chartObj;this.settings&&(this.settings.showGraphViewOnly=!a);this.initialize(b)};$MA.Chart.prototype.isFullView=function(){return this.settings?!this.settings.showGraphViewOnly:!0};$MA.Chart.prototype.isToolBarVisible=function(){var a=!1;this.chartView&&this.chartView.toolBarElem&&(a=""==this.chartView.toolBarElem.style.display);return a};$MA.Chart.prototype.showToolBar=function(a){this.chartView&&this.isToolBarVisible()!=a&&this.chartView.showToolBar(a)};
$MA.Chart.prototype.isValueBubbleVisible=function(){var a=!1;this.chartView&&(a=this.chartView.isValueBubbleVisible());return a};$MA.Chart.prototype.showValueBubble=function(a){this.chartView&&this.isValueBubbleVisible()!=a&&this.chartView.showValueBubble(a)};$MA.Chart.prototype.setValueBubbleStyle=function(a){var b=!1;this.chartView&&(b=this.chartView.setValueBubbleStyle(a))&&this.refresh();return b};
$MA.Chart.prototype.getValueBubbleStyle=function(a){return this.chartView?this.chartView.getValueBubbleStyle():null};$MA.Chart.prototype.isTableViewVisible=function(){var a=!1;this.chartView&&this.chartView.tableViewElem&&(a=0!=this.chartView.tableViewElem.offsetHeight);return a};$MA.Chart.prototype.showTableView=function(a){this.chartView&&this.isTableViewVisible()!=a&&this.chartView.showTableView(a)};
$MA.Chart.prototype.isRangeSelectorViewVisible=function(){var a=!1;this.chartView&&this.chartView.rangeSelectorViewElem&&(a=0!=this.chartView.rangeSelectorViewElem.offsetHeight);return a};$MA.Chart.prototype.showRangeSelectorView=function(a){this.chartView&&this.isRangeSelectorViewVisible()!=a&&this.chartView.showRangeSelectorView(a)};$MA.Chart.prototype.isWhatIfViewVisible=function(a){a=!1;this.chartView&&this.chartView.whatIfViewElem&&(a=0!=this.chartView.whatIfViewElem.offsetHeight);return a};
$MA.Chart.prototype.showWhatIfView=function(a){this.chartView&&this.isWhatIfViewVisible()!=a&&this.chartView.showWhatIfView(a)};$MA.Chart.prototype.isDynamicAnalysisViewVisible=function(){var a=!1;this.chartView&&this.chartView.dynamicAnalysisViewElem&&(a=0<this.chartView.dynamicAnalysisViewElem.offsetHeight);return a};$MA.Chart.prototype.showDynamicAnalysisView=function(a){this.chartView&&this.isDynamicAnalysisViewVisible()!=a&&this.chartView.showDynamicAnalysisView(a)};
$MA.Chart.prototype.getZoomingLevel=function(){if(this.chartView)return this.chartView.getZoomingLevel()};$MA.Chart.prototype.setZoomingLevel=function(a){this.chartView&&this.chartView.setZoomingLevel(a)};$MA.Chart.prototype.getNumberOfZoomingLevels=function(){if(this.chartView&&this.chartView.chartObj)return this.chartView.chartObj.zoomingLevels.length};$MA.Chart.prototype.setLegend=function(a){this.chartView&&this.chartView.setLegend(a)};
$MA.Chart.prototype.setLegendOffset=function(a,b){this.chartView&&this.chartView.setLegendOffset(a,b)};$MA.Chart.prototype.setDataPointsColor=function(a,b){this.chartView&&this.chartView.setDataPointsColor(a,b)};
$MA.Chart.prototype.refresh=function(a){if(a)this.refreshCount=0,this.chartView&&this.chartView.refresh(),$MA.Graph.Share&&$MA.Graph.Share.refresh();else{this.refreshCount++;var b=this,c=setTimeout(function(){clearTimeout(c);0<b.refreshCount&&(b.refreshCount=0,b.chartView&&b.chartView.refresh(),$MA.Graph.Share&&$MA.Graph.Share.refresh());b=null},50)}};$MA.Chart.prototype.applyCSS=function(){this.chartView&&this.chartView.applyCSS()};
$MA.Chart.prototype.setDataTable=function(a,b){$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.setDataTable "+$MA.getLocalisation(null,"Start","Start")+" "+$MA.getLocalisation(null,"No_Of_Rows","No.Of.Rows")+": "+(a?a.length:0)+$MA.getLocalisation(null,"GraphName"," Graph Name")+": "+b);this.chartView&&this.chartView.setDataTable(a,b);$MA.log.debug($MA.TRACE_LEVEL1,"$MA.Chart.setDataTable "+$MA.getLocalisation(null,"End","End"))};
$MA.Chart.prototype.reset=function(){this.chartView&&this.chartView.reset&&(this.chartView.reset(),this.chartView=void 0);var a=document.getElementById(this.id);if(a&&a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild)};$MA.Chart.prototype.getProperty=function(a){if(this.chartView&&a)return this.chartView.getProperty(a)};
$MA.Chart.prototype.setProperty=function(a,b,c){if(this.chartView&&a&&this.chartView.setProperty(a,b))if(a=a.toLowerCase(),0<=a.indexOf("charttype")||0<=a.indexOf("piestyle")||0<=a.indexOf("dir"))c||this.initialize(this.chartView.chartObj);else if("showtotal"==a||"parentastotal"==a)this.chartView.applyWaterfallStyle(),this.chartView.refresh()};$MA.Chart.prototype.getSelectedCategory=function(){if(this.chartView)return this.chartView.getSelectedCategory()};
$MA.Chart.prototype.getSelectedCategoryGroup=function(){if(this.chartView)return this.chartView.getSelectedCategoryGroup()};$MA.Chart.prototype.getSelectedCategoryIndex=function(){if(this.chartView)return this.chartView.getSelectedCategoryIndexRel()};$MA.Chart.prototype.getSelectedSeries=function(a){if(this.chartView)return this.chartView.getSelectedSeries(a)};$MA.Chart.prototype.getNumberOfCategories=function(){if(this.chartView)return this.chartView.getCategoryCount()};
$MA.Chart.prototype.getNumberOfVisibleCategories=function(){if(this.chartView)return this.chartView.getNumberOfVisibleCategories()};$MA.Chart.prototype.setNumberOfVisibleCategories=function(a){0<a&&(this.numberOfVisibleCategory=a,this.chartView&&this.chartView.setNumberOfVisibleCategories(this.numberOfVisibleCategory))};$MA.Chart.prototype.retrieve=function(a){this.chartView&&this.chartView.retrieve(a)};
$MA.Chart.prototype.bind=function(a,b){void 0==this.events&&(this.events=new $MA.Hash);this.events.set(a,b)};$MA.Chart.prototype.unbind=function(a){this.events&&this.events.remove(a)};$MA.Chart.prototype.trigger=function(a,b,c){this.events&&(a=this.events.get(a))&&(void 0==c&&(c={}),a(b,c))};$MA.Chart.prototype.copyGraphTo=function(a){var b=this.chartView.getGraphElem();0==a.width&&(a.width=b.width,a.height=b.height);a.getContext("2d").drawImage(b,0,0,a.width,a.height)};
$MA.Chart.prototype.setPalette=function(a,b){this.chartView&&this.chartView.setPalette(a,b)};$MA.Chart.getStyles=function(){$MA.Graph.getStyles()};$MA.Chart.PieChartCategoryTextMaxLength=-1;
$MA.Chart.setPieChartCategoryTextMaxLength=function(a){var b=parseInt(a,10);isNaN(b)?$MA.log.error($MA.getLocalisation(null,"Error_DataParsing",a+" is not a number")):0<=b&&4>b?$MA.log.error("setPieChartCategoryTextMaxLength : "+$MA.getLocalisation(null,"Msg_UnderMin","The selected Value %1 is below minimum value %2.").replace("%1",b).replace("%2",4)):$MA.Chart.PieChartCategoryTextMaxLength=b};$MA.Chart.prototype.getCanvas=function(){return this.chartView.getGraph().getCanvas()};
$MA.Chart.prototype.getDrawArea=function(){return this.chartView.getGraph().getDrawArea()};$MA.Chart.prototype.getCategoryObject=function(a){return this.chartView.getGraph().getCategoryNodes(a)};$MA.Chart.prototype.getValueLoc=function(a){return this.chartView.getGraph().getValueLoc(a)};$MA.Chart.prototype.preventDefaultRendering=function(a){this.chartView&&this.chartView.getGraph().preventDefaultRendering(a)};$MA.Chart.prototype.getDrawingContentType=function(){return this.chartView.getGraph().getDrawingContentType()};
$MA.Chart.prototype.setSelectedCategoryIndex=function(a){this.chartView.setSelectedCategoryIndex(a,!0)};$MA.Chart.prototype.showTableValue=function(a){this.chartView&&this.chartView.showTableValue&&this.chartView.showTableValue(a)};$MA.Chart.prototype.setMonoColor=function(a){this.chartView&&this.chartView.setMonoColor(a)};$MA.Chart.prototype.getSelectedBubbleInfo=function(){if(this.chartView)return this.chartView.getSelectedBubbleInfo()};$MA.Chart.prototype.setShowDotsWidth=function(a){if(this.chartView)return this.chartView.setShowDotsWidth(a)};
$MA.Chart.prototype.setHorizontalBarHeight=function(a){if(this.chartView)return this.chartView.setHorizontalBarHeight(a)};$MA.Chart.prototype.setBubbleBorderColor=function(a){if(this.chartView)return this.chartView.setBubbleBorderColor(a)};$MA.Chart.prototype.setBubbleMinSize=function(a){if(this.chartView)return this.chartView.setBubbleMinSize(a)};$MA.Chart.prototype.setMonoSymbol=function(a){if(this.chartView)return this.chartView.setMonoSymbol(a)};$MA.Chart.prototype.setSymbolPalette=function(a){if(this.chartView)return this.chartView.setSymbolPalette(a)};
$MA.Chart.prototype.collapse=function(a){this.chartView.getGraph().collapse(a);this.refresh(!1)};$MA.Chart.prototype.expand=function(a){this.chartView.getGraph().expand(a);this.refresh(!1)};$MA.Chart.prototype.isRootLevel=function(){return this.chartView.getGraph().isRootLevel()};$MA.Chart.prototype.isLeafLevel=function(){return this.chartView.getGraph().isLeafLevel()};$MA.Chart.prototype.setGraphLineWidth=function(a,b){this.chartView.getGraph().setProperty("GraphLineWidth",a,b)};
$MA.Chart.prototype.setMaxPies=function(a){this.chartView.getGraph().setProperty("MaxPies",a)};$MA.Chart.prototype.setTotalFormat=function(a){this.chartView.getGraph().setProperty("TotalFormat",a)};$MA.Chart.prototype.setBarChartTableWidth=function(a){this.chartView.getGraph().setProperty("BarChartTableWidth",a);this.chartView.refresh()};$MA.Chart.prototype.setWhatIfValue=function(a,b,c){return this.chartView.setWhatIfValue(a,b,c)};
$MA.Chart.prototype.setRangeSelectorStartPosition=function(a){this.chartView.getGraphGob().setFirstItem(a);this.chartView.refresh()};$MA.DrillDownGroup=function(a){this.id=a;this.level=0;this.events=this.filterValues=this.chartElems=void 0;var b=document.getElementById(a);b?((a=b.macontrol)&&a.reset(),b.macontrol=this):$MA.log.error(a+$MA.getLocalisation(null,"Error_InvalidID"," is an invalid id"))};$MA.DrillDownGroup.getDrillDownGroup=function(a){return a.macontrol};
$MA.DrillDownGroup.prototype.load=function(a){var b=$MA.createXHR();void 0!=b&&(b.open("GET",$MA.getMetadataUrl(a),!1),b.send(null),200==b.status||304==b.status||0==b.status?this.create(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};
$MA.DrillDownGroup.prototype.create=function(a){var b=new $MA.BI.DrillDownObject(this);("object"==typeof a?new $MA.DataView.JsonMetaDataReader:new $MA.DataView.XmlMetaDataReader).parse(b,a);this.drillDownObj=b;this.reset();a=document.getElementById(this.id);this.createChart(a,b.chartObjs[0]);this.trigger("initialized",{id:this.id})};$MA.DrillDownGroup.prototype.refresh=function(a){var b=document.getElementById(this.id),c=this.chartElems[this.level];c.style.height=b.offsetHeight+"px";$MA.BI.SimpleChartView.getChart(c).refresh(a)};
$MA.DrillDownGroup.prototype.showToolBar=function(a){$MA.BI.SimpleChartView.getChart(this.chartElems[this.level]).showToolBar(a)};
$MA.DrillDownGroup.prototype.drillDown=function(a,b){if(this.level+1==this.drillDownObj.chartObjs.length)return!1;if("object"==typeof a)this.updateChart(a,b);else{var c=$MA.BI.SimpleChartView.getChart(this.chartElems[this.level]);c.chartView.initializeTableView();var d=c.chartView.getTableView().dvObj,e=0;0<c.chartView.chartObj.zoomingLevels.length&&(e=this.chartObj.level);c=[];for(d=d.getRow(a);0<=e;e--)c.push(d[e]);this.updateChart(c,b)}return!0};
$MA.DrillDownGroup.prototype.drillBack=function(){var a=!1;0<this.level&&(a=this.drillUp(this.level-1));return a};$MA.DrillDownGroup.prototype.getCurrentChart=function(){return $MA.BI.SimpleChartView.getChart(this.chartElems[this.level])};$MA.DrillDownGroup.prototype.bind=function(a,b){void 0==this.events&&(this.events=new $MA.Hash);this.events.set(a,b)};$MA.DrillDownGroup.prototype.unbind=function(a){this.events&&this.events.remove(a)};
$MA.DrillDownGroup.prototype.trigger=function(a,b,c){this.events&&(a=this.events.get(a))&&a(b,c)};$MA.DrillDownGroup.prototype.reset=function(){this.level=0;this.chartElems=[];this.filterValues=[];var a=document.getElementById(this.id);if(a&&a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild)};
$MA.DrillDownGroup.prototype.createChart=function(a,b){var c=document.createElement("div");c.id=this.id+"_chart";c.className="chart";c.style.width="100%";c.style.height=a.offsetHeight+"px";a.appendChild(c);var d=$MA.DrillDownGroup.getDrillDownGroup(a);d.chartElems[d.level]=c;c=new $MA.Chart(c.id);b._parent=c;c.ondrilldown=this.onDrillDown;c.ondrillup=this.onDrillUp;c.initialize(b);this.setTitle(b)};
$MA.DrillDownGroup.prototype.onDrillDown=function(a,b){var c=document.getElementById(this.id),d=c.parentNode,e=$MA.DrillDownGroup.getDrillDownGroup(d);e.events&&e.events.get("drilldown")?(c=$MA.BI.SimpleChartView.getChart(c),e.trigger("drilldown",{id:d.id,categoryIndex:c.getSelectedCategoryIndex(),categoryValues:a,seriesName:b})):e.updateChart(a,b)};
$MA.DrillDownGroup.prototype.getItemValues=function(){var a=[],b,c,d;for(b=0;b<this.filterValues.length;b++)c=this.filterValues[b],d=c.itemValues.length,a.push($MA.format(c.itemValues[d-1]));return a};
$MA.DrillDownGroup.prototype.updateChart=function(a,b){if(this.level+1!=this.drillDownObj.chartObjs.length){var c=this.drillDownObj,d=this.chartElems[this.level],e=$MA.BI.SimpleChartView.getChart(d),f=e.isToolBarVisible(),g=e.isTableViewVisible(),h=d.offsetHeight,k=document.getElementById(this.id);k.removeChild(k.children[this.id+"_chart"]);this.level++;this.filterValues[this.level-1]={itemValues:a,seriesName:b};this.chartElems.length>this.level?(d=this.chartElems[this.level],e=$MA.BI.SimpleChartView.getChart(d),
c=e.chartView.chartObj,c.filterValues=this.filterValues,this.setTitle(c),k.appendChild(d),0==c.zoomingLevels.length?e.chartView.retrieve(c.getQuery()):(c.level=0,e.chartView.retrieve(c.zoomingLevels[0].query)),e.chartView.updateToolbarBreadcrumbs(this.getItemValues()),e.showToolBar(f),e.showTableView(g),d.offsetHeight!=h&&(d.style.height=h+"px",e.refresh())):(c=c.chartObjs[this.level],c.filterValues=this.filterValues,this.createChart(k,c),d=this.chartElems[this.level],e=$MA.BI.SimpleChartView.getChart(d),
e.chartView.updateToolbarBreadcrumbs(this.getItemValues()),e.showToolBar(f),e.showTableView(g));e.chartView.isDrillLevelChanged=!0;e.chartView.highlightCurrentZoomingLevel()}};$MA.DrillDownGroup.prototype.onDrillBack=function(){var a=document.getElementById(this.id).parentNode;$MA.DrillDownGroup.getDrillDownGroup(a).drillBack()};$MA.DrillDownGroup.prototype.onDrillUp=function(a){var b=document.getElementById(this.id).parentNode,b=$MA.DrillDownGroup.getDrillDownGroup(b);-1==a?b.drillBack():b.drillUp(a)};
$MA.DrillDownGroup.prototype.setTitle=function(a){a=a._parent.chartView.getGraphGob();this.trigger("titlechanged",{id:this.id,title:a.title})};
$MA.DrillDownGroup.prototype.drillUp=function(a){if(void 0==a||null==a||isNaN(a)||0>a||a>=this.level)return!1;var b=document.getElementById(this.id),c=this.chartElems[this.level],d=$MA.BI.SimpleChartView.getChart(c),e=d.isToolBarVisible(),f=d.isTableViewVisible(),g=c.offsetHeight;b.removeChild(b.children[this.id+"_chart"]);this.level=a;b.appendChild(this.chartElems[this.level]);for(b=this.filterValues.length-1;b>a;b--)this.filterValues.pop();this.setTitle(this.drillDownObj.chartObjs[this.level]);
c=this.chartElems[this.level];d=$MA.BI.SimpleChartView.getChart(c);d.showToolBar(e);d.showTableView(f);d.chartView&&(d.chartView.isDrillLevelChanged=!0,c.offsetHeight!=g&&(c.style.height=g+"px",d.refresh()));return!0};$MA.DrillDownGroup.prototype.getCurrentLevel=function(a){return this.level};$MA.DA={};$MA.DA.createVariables=function(a){var b=new $MA.BI.DA.Variables;("object"==typeof a?new $MA.DataView.JsonMetaDataReader:new $MA.DataView.XmlMetaDataReader).parse(b,a);$MA.BI.DAVariables=b};
$MA.DA.load=function(a){var b=$MA.createXHR();void 0!=b&&(b.open("GET",a,!1),b.send(null),200==b.status||304==b.status||0==b.status?$MA.DA.createVariables(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};$MA.DA.getValue=function(a){if(a=$MA.BI.GetDAVariable(a))return a.getValue()};
$MA.DA.setValue=function(a,b){var c=$MA.BI.GetDAVariable(a);if(c)if(c.variableType&&"enum"==c.variableType.toLowerCase()){var d,e=c.choices.items.length;for(d=0;d<e;d++)if(c.choices.items[d].value==b){c.selection=d;break}}else c.setProperty("value",b)};
$MA.BI.ChartView.prototype.createDynamicAnalysisView=function(a){var b=document.createElement("div");b.id=this.id+"_dynamicanalysis";b.style.position="relative";b.style.width="100%";b.style.height="0px";b.style.overflowX="auto";b.style.overflowY="auto";b.className="chart_dynamicanalysis_view";a.appendChild(b);this.dynamicAnalysisViewElem=b};
$MA.BI.ChartView.prototype.showDynamicAnalysisView=function(a){if(this.showDynamicAnalysisFlag=a)this.showWhatIfFlag=!1;this.refreshViews();this.isZoomingLevelChanged?this.refreshValueBubbleView(!0):this.orientation==window.orientation?this.refreshValueBubbleView(!1):(this.refreshValueBubbleView(!0),this.orientation=window.orientation)};
$MA.BI.ChartView.prototype.hasDAVariables=function(a,b){var c=!1;if(void 0==$MA.BI.DAVariables)return c;if(b){var d=b.length,e,f;for(e=0;e<d;e++)if(f=b[e],f instanceof $MA.Expression.VariableNode){if(void 0!=f.getVariableIndex()){c=!0;break}}else if(f.getArgs()&&(c=this.hasDAVariables(f,f.getArgs())))break}else a instanceof $MA.Expression.VariableNode&&void 0!=a.getVariableIndex()&&(c=!0);return c};
$MA.BI.ChartView.prototype.searchDAVariables=function(a){if(a&&$MA.BI.DAVariables){var b=a.length,c,d;for(c=0;c<b;c++)d=a[c],d instanceof $MA.Expression.VariableNode?void 0!=d.getVariableIndex()&&this.initializeDAVariableControl(d):d&&d.getArgs()&&this.searchDAVariables(d.getArgs())}};
$MA.BI.ChartView.prototype.initializeDAVariableControl=function(a){if(window.jQuery){$=jQuery.noConflict();var b=this.dynamicAnalysisViewElem.id+"_"+a._name.replace("$","_DA_");if(void 0==$("#"+b)[0]){var c=document.getElementById(this.dynamicAnalysisViewElem.id+"__table"),d=document.createElement("tr");c.appendChild(d);var c=$MA.BI.DAVariables.items[a.getVariableIndex()],e=document.createElement("td"),f="";switch(c.variableType.toLowerCase()){case "double":case "float":f=f+'<div data-role="fieldcontain">'+
('<input id="'+b+'"  digitpicker="true" Type="float" readonly Min="'+c.min.toString()+'" Max="'+c.max.toString()+'" Decimal="'+c.decimals.toString()+'" Description="'+c.displayName+'" value="'+c.value.toString()+'" />');f+="</div>";break;case "integer":f+='<div data-role="fieldcontain" id="'+b+'_MA_slider_fieldcontain">';f+='<label id="'+b+'_value" class="ui-input-text ui-slider" for="'+b+'">'+c.displayName+"</label>";f+='<input type="text" data-type="range"  name="'+b+'" id="'+b+'" class="ui-slider-input ui-input-text ui-body-b ui-corner-all ui-shadow-inset"  value="'+
c.value.toString()+'" min="'+c.min.toString()+'" max="'+c.max.toString()+'" />';f+="</div>";break;case "boolean":f+='<div data-role="fieldcontain">';f+='<label for="'+b+'">'+c.displayName+"</label>";f+='<select name="'+b+'" id="'+b+'" data-role="slider">';f+='<option value="0">'+$MA.getLocalisation(null,"False","False")+"</option>";f+='<option value="1">'+$MA.getLocalisation(null,"True","True")+"</option>";f+="</select></div>";break;case "date":f+='<div data-role="fieldcontain">';f+='<label class="ui-datepicker-date-label ui-slider" for="'+
b+'">'+c.displayName+"</label>";f+='<input type="text" name="'+b+'" id="'+b+'"  value=""  readonly />';f+="</div>";break;case "enum":f+='<div data-role="fieldcontain">';f+='<label for="'+b+'" class="select">'+c.displayName+"</label>";f+='<select name="'+b+'" id="'+b+'" data-native-menu="false" data-inline="true">';if(void 0!=c.choices){var g,h=c.choices.items.length;for(g=0;g<h;g++){if(c.choices.items[g].name==name)return $MA.BI.DAVariables.items[g];f+='<option value="'+c.choices.items[g].value+'">'+
c.choices.items[g].display+"</option>"}}f+="</select></div>"}e.innerHTML=f;d.appendChild(e);document.getElementById(b).__davariablename__=a._name;document.getElementById(b).__davariableindex__=a.getVariableIndex();document.getElementById(b).setAttribute("ignored","true");var k=this;switch(c.variableType.toLowerCase()){case "double":case "float":$MAControl.DigitPickerControl.init();$("#"+b).bind("onValueChange",function(a,b){$MA.BI.DAVariables.items[this.__davariableindex__].value=b.toString();k.refreshAction=
"resetTable";$(window).trigger("dachanged",[this.__davariablename__,b])});break;case "integer":$("#"+b).slider();var l=document.getElementById(b),p=function(){l.__curvalue__!=l.value&&(l.__curvalue__=l.value,$MA.BI.DAVariables.items[l.__davariableindex__].value=l.value.toString(),k.refreshAction="resetTable",$(window).trigger("dachanged",[l.__davariablename__,l.value]))};$("#"+b).parent().bind("mouseup",function(a){document.activeElement!=l&&p()});$("#"+b).parent().bind("touchend",function(a){document.activeElement!=
l&&p()});$(document).bind("vmouseup",function(a){document.activeElement!=l&&p()});$("#"+b).bind("change",function(a){a.srcElement==a.target&&p()});break;case "boolean":$("#"+b)[0].selectedIndex=c.getValue()?1:0;$("#"+b).slider();$("#"+b).bind("change",function(a){$MA.BI.DAVariables.items[this.__davariableindex__].value=this.value.toString();k.refreshAction="resetTable";setTimeout(function(){$(window).trigger("dachanged",[this.__davariablename__,this.value])},200)});break;case "date":a=$MA.BI.DAVariables.items[a.getVariableIndex()].value.match(RegExp(/(\d{4})-(\d{2})-(\d{2})/));
$("#"+b)[0].value=a[2]+"/"+a[3]+"/"+a[1];$("#"+b).datepicker();$("#"+b).bind("change",function(a){a=this.value.match(RegExp(/(\d{2})\/(\d{2})\/(\d{4})/));$MA.BI.DAVariables.items[this.__davariableindex__].value=a[3]+"-"+a[1]+"-"+a[2];k.refreshAction="resetTable";$(window).trigger("dachanged",[this.__davariablename__,this.value])});break;case "enum":$("#"+b)[0].selectedIndex=void 0==c.selection?0:parseInt(c.selection,10),$("#"+b).selectmenu(),$("#"+b).bind("change",function(a){$MA.BI.DAVariables.items[this.__davariableindex__].value=
this.value.toString();$MA.BI.DAVariables.items[this.__davariableindex__].selection=this.selectedIndex;k.refreshAction="resetTable";$(window).trigger("dachanged",[this.__davariablename__,this.value])})}}}};
$MA.BI.ChartView.prototype.initializeDynamicAnalysisView=function(){if(void 0!=this.dynamicAnalysisViewElem){var a=document.createElement("table");a.id=this.dynamicAnalysisViewElem.id+"__table";a.style.marginLeft="5%";a.style.width="95%";this.dynamicAnalysisViewElem.appendChild(a);a=this.getGraphGob().getValueExpr(0);if(void 0!=a){var b=a.getArgs();void 0!=b?this.searchDAVariables(b):a instanceof $MA.Expression.VariableNode&&void 0!=a.getVariableIndex()&&this.initializeDAVariableControl(a);$MA.platform.blackberry&&
void 0!==window.jQuery&&$('a[role="slider"]').css({"box-shadow":"none"});this.dynamicAnalysisViewElem.addEventListener("touchstart",function(a){window.iScroller&&(iScroller.disableEventHandlers?iScroller.disableEventHandlers():$MA.disableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("disable")},!1);this.dynamicAnalysisViewElem.addEventListener("touchend",function(a){window.iScroller&&(iScroller.enableEventHandlers?
iScroller.enableEventHandlers():$MA.enableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("enable")},!1)}}};$MA.BI.ChartView.prototype.createWhatIfView=function(a){var b=document.createElement("div");b.id=this.id+"_whatif";b.style.position="relative";b.style.width="100%";b.style.height="0px";b.style.overflowX="auto";b.style.overflowY="auto";b.className="chart_whatif_view";a.appendChild(b);this.whatIfViewElem=b};
$MA.BI.ChartView.prototype.showWhatIfView=function(a){if(this.showWhatIfFlag=a)this.initializeWhatIfView(),this.showDynamicAnalysisFlag=!1;this.refreshViews();this.isZoomingLevelChanged?this.refreshValueBubbleView(!0):this.orientation==window.orientation?this.refreshValueBubbleView(!1):(this.refreshValueBubbleView(!0),this.orientation=window.orientation);this.updateWhatIfVariableControls()};$MA.BI.ChartView.prototype.onWhatIfEnd=function(){this.refreshRangeSelectorView()};
$MA.BI.ChartView.prototype.onWhatIfChange=function(a,b,c,d){""==d&&(d="0");c=this.getGraphView().dvObj;var e=this.getValueBubbleObject();if(!(0>e.value)){var f=this.getGraph(),g=this.getGraphGob(),h=f.getCategoryValue(e.value);void 0==g.series?h=g.getCategoryColumn()+"=='"+h+"'":(h="and ("+g.getCategoryColumn()+"=='"+h+"', ",h+=g.getSeriesColumn()+"=='"+f.getSeriesName(a)+"')");a=c.find(h);if(c.getItem(a,b)!=d&&(c.setItem(a,b,d),!this.wfTimeoutId)){var k=this;this.wfTimeoutId=setTimeout(function(){k.refreshGraphView();
e.text=f.getDataString(e.value,g.getValueFormat(0));var a=f.getSeriesList(),b=e.text.split("\n");e.reset&&e.reset();if(e.categoryText){e.categoryText=f.getCategoryString(e.value);var c;for(c=0;c<a.length;++c){var d=a[c],h=f.getSeriesString(d);e.addLegend(d,h,b[c],f.getSeriesFillBrush(c).toString(),d.isEnabled())}}k.setValueBubblePoints(e,a);e.plot();k.resetTable();k.wfTimeoutId=void 0},$MA.BI.ChartView.touchTimeSlot)}}};
$MA.BI.ChartView.prototype.searchWhatIfVariables=function(a){if(a&&this.chartObj.whatIfColumns){var b=a.length,c,d,e,f;for(e=0;e<b;e++)if(c=a[e],c instanceof $MA.Expression.VariableNode){var g=!1,h=this.chartObj.whatIfColumns.columns;for(f=0;f<h.length;f++)if(h[f].name==c._name){g=!0;d=h[f];break}g&&this.initializeWhatIfVariableControl(c,d)}else c.getArgs()&&this.searchWhatIfVariables(c.getArgs())}};
$MA.BI.ChartView.prototype.initializeWhatIfVariableControl=function(a,b){function c(a,b){f.onWhatIfChange(this.__seriesid__,this.__whatifid__,this.__whatifname__,b);f.onWhatIfEnd()}function d(a){f.onWhatIfChange(this.__seriesid__,this.__whatifid__,this.__whatifname__,this.value)}function e(a){f.onWhatIfEnd()}if(window.jQuery){$=jQuery.noConflict();var f=this,g=a._dvObj.getTableColumns()[a._id],h=this.whatIfViewElem.id+"__series0__table_"+g.name;if(void 0==$("#"+h)[0]){this.whatIfViewElem._whatifnames.push(g.name);
var k,l;for(k=0;k<this.whatIfViewElem._seriesnumber;k++){var h=document.getElementById(this.whatIfViewElem.id+"__series"+k+"__table"),p=document.createElement("tr");h.appendChild(p);h=h.id+"_"+g.name;l=document.createElement("td");var m=-1E5,n=1E5,q=0,s=2,r="";switch(b.variableType.toLowerCase()){case "float":m=parseFloat(b.min.toString());n=parseFloat(b.max.toString());q=void 0==b.value?(m+n)/2:parseFloat(b.value.toString());s=parseInt(b.decimals.toString(),10);parseFloat(b.step.toString());r+='<div data-role="fieldcontain">';
r+='<input id="'+h+'"  digitpicker="true" Type="float" readonly Min="'+m.toString()+'" Max="'+n.toString()+'" Decimal="'+s.toString()+'" Description="'+b.displayName+'" value="'+q.toString()+'" />';r+="</div>";break;case "integer":m=parseInt(b.min.toString(),10);n=parseInt(b.max.toString(),10);q=void 0==b.value?Math.floor((m+n)/2):parseInt(b.value.toString(),10);r+='<div class="ui-field-contain ui-body ui-br" data-role="fieldcontain" id="'+h+'_MA_slider_fieldcontain">';r+='<label id="'+h+'_value" class="ui-input-text ui-slider" for="'+
h+'">'+b.displayName+"</label>";r+='<input type="number" data-type="range" name="'+h+'" id="'+h+'"  data-theme="b" class="ui-slider-input ui-input-text ui-body-b ui-corner-all ui-shadow-inset" value="'+q.toString()+'" min="'+m.toString()+'" max="'+n.toString()+'"  />';r+="</div>";break;default:return}l.innerHTML=r;p.appendChild(l);document.getElementById(h).__whatifname__=g.name;document.getElementById(h).__whatifid__=g.id;document.getElementById(h).__seriesid__=k;document.getElementById(h).__chartview__=
this;document.getElementById(h).__whatifvariabletype__=b.variableType;document.getElementById(h).setAttribute("ignored","true");switch(b.variableType.toLowerCase()){case "float":$MAControl.DigitPickerControl.init();$("#"+h).bind("onValueChange",c);break;case "integer":$("#"+h).slider(),$("#"+h).bind("change",d),$("#"+h).bind("blur",e),$MA.isTouchEventSupported?$("#"+h+"_MA_slider_fieldcontain").bind("touchend",e):$("#"+h+"_MA_slider_fieldcontain").bind("mouseup",e)}}}}};
$MA.BI.ChartView.prototype.initializeWhatIfView=function(){if(void 0!=this.whatIfViewElem&&!this.whatIfViewElem.hasChildNodes()){var a=this.getGraphGob().getValueExpr(0);if(void 0!=a){var b=this.getGraph(),c=b.getSeriesCount();if(0!=c){var d=document.createElement("table");d.id=this.whatIfViewElem.id+"__table";d.style.marginLeft="5%";d.style.width="95%";this.whatIfViewElem.appendChild(d);this.whatIfViewElem._whatifnames=[];this.whatIfViewElem._seriesnumber=c;var d=document.getElementById(this.whatIfViewElem.id+
"__table"),b=b.getSeriesList(),e;for(e=0;e<this.whatIfViewElem._seriesnumber;e++){var f;0==e%2?(f=document.createElement("tr"),f.id=this.whatIfViewElem.id+"_table_row"+e/2,d.appendChild(f)):f=document.getElementById(this.whatIfViewElem.id+"_table_row"+(e-1)/2);var g=document.createElement("td");g.style.width=1<this.whatIfViewElem._seriesnumber?"50%":"100%";var h="";1<c&&(h+=b[e].name+"</br>");h+='<table id="'+this.whatIfViewElem.id+"__series"+e+'__table" width="100%"/>';g.innerHTML=h;f.appendChild(g)}if((c=
a.getArgs())&&this.chartObj.whatIfColumns)this.searchWhatIfVariables(c);else if(a instanceof $MA.Expression.ColumnNode&&this.chartObj.whatIfColumns){for(var c=!1,d=this.chartObj.whatIfColumns.columns,k,b=0;b<d.length;b++)if(d[b].name==a._dvObj.getTableColumns()[a._id].name){c=!0;k=d[b];break}c&&this.initializeWhatIfVariableControl(a,k)}$MA.platform.blackberry&&void 0!==window.jQuery&&$('a[role="slider"]').css({"box-shadow":"none"});this.whatIfViewElem.addEventListener("touchstart",function(a){window.iScroller&&
(iScroller.disableEventHandlers?iScroller.disableEventHandlers():$MA.disableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("disable")},!1);this.whatIfViewElem.addEventListener("touchend",function(a){window.iScroller&&(iScroller.enableEventHandlers?iScroller.enableEventHandlers():$MA.enableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("enable")},
!1)}}}};
$MA.BI.ChartView.prototype.updateWhatIfVariableControls=function(){if(this.whatIfViewElem&&0<this.whatIfViewElem.offsetHeight&&this.chartObj.whatIfColumns){var a=this.getValueBubbleObject(),b=this.whatIfViewElem._whatifnames,c=this.getGraphView().dvObj,d=this.getGraph(),e=this.getGraphGob(),a=d.getCategoryValue(a.value),f,g,h=this.chartObj.whatIfColumns.columns,k,l;for(k=0;k<b.length;k++)for(l=0;l<this.whatIfViewElem._seriesnumber;l++){1==this.whatIfViewElem._seriesnumber?f=e.getCategoryColumn()+"=='"+
a+"'":(f="and ("+e.getCategoryColumn()+"=='"+a+"', ",f+=e.getSeriesColumn()+"=='"+d.getSeriesName(l)+"')");g=c.find(f);f=document.getElementById(this.whatIfViewElem.id+"__series"+l+"__table_"+b[k]);var p=c.getItem(g,f.__whatifid__);void 0!=f&&(parseFloat(p)>f.max?f.max=p:parseFloat(p)<f.min&&(f.min=p),"float"==f.__whatifvariabletype__.toLowerCase()?(g=h[k],f.value=p.toFixed(parseInt(g.decimals,10))):(f.value=Math.floor(p),window.jQuery&&($=jQuery.noConflict(),$("#"+f.id).slider("refresh"))))}}};
$MA.BI.ChartView.prototype.setWhatIfValue=function(a,b,c){var d=this.getGraph().getSeriesCount();if(!(b>=d)&&(d=this.getGraphView().dvObj.getTableColumn(a)))this.onWhatIfChange(b,d.id,a,c)};$MA.BI.Control||($MA.BI.Control={});window.$MAControl||($MAControl=$MA.BI.Control);$MAControl.DigitPickerControl=function(){$MAControl.DigitPickerControl.init()};
$MAControl.DigitPickerControl.init=function(){document.getElementById("MADigitPickerControl")||(this.setGlobalParams(),this.pickerContainer=document.createElement("div"),this.pickerContainer.id="MADigitPickerControl",this.pickerContainer.style.zIndex="50000",this.pickerContainer.style.position="absolute",this.pickerContainer.style.display="none",document.body.appendChild(this.pickerContainer),this.CheckPlatform(),this.isMobile?(window.addEventListener("touchstart",DPC_onContainerTap2,!0),this.pickerContainer.addEventListener("touchstart",
DPC_onContainerTouchStart,!1),this.pickerContainer.addEventListener("touchend",DPC_onContainerTouchEnd,!1),this.pickerContainer.addEventListener("touchmove",DPC_onContainerTouchMove,!1),this.isAndroid&&this.BindPageEvent()):this.pickerContainer.addEventListener&&(this.pickerContainer.addEventListener("mousedown",DPC_onContainerMouseDown,!1),this.pickerContainer.addEventListener("mouseup",DPC_onContainerMouseUp,!1),this.pickerContainer.addEventListener("mousemove",DPC_onContainerMouseMove,!1),window.addEventListener("mouseup",
DPC_onContainerTap2,!1)),$MAControl.DigitPickerControl.initPopup());var a=document.getElementsByTagName("input"),b=a.length,c;for(c=0;c<b;c++){var d=a[c],e=d.getAttribute("digitpicker");null!=e&&"true"==e?d.id?this.createDescriptionAndButton(d):$MA.log.error($MA.getLocalisation(null,"Error_NoDatepickerID","Attribute 'id' is mandatory for DigitPickerControl.")):d.id&&0==d.id.indexOf(this.editIdPrefix)&&this.createDescriptionAndButton(d)}};
$MAControl.DigitPickerControl.setGlobalParams=function(){this.isAndroid=this.isMobile=this.isIOS=!1;this.scrollOffsetY=10;this.scrollItemHeight=40;this.editIdPrefix="DPC_";this.displayed=!1;this.HIDE_TIMEOUT=200;this.buttonIdPrefix="DPCBUTTON";this.scrollIdPrefix="DPC_SCROLL_";this.originalValue="";this.pickerFrameId="digitpickerframe";this.highValueMessage=$MA.getLocalisation(null,"Msg_OverMax","The selected Value %1 is beyond maximum value %2.");this.lowValueMessage=$MA.getLocalisation(null,"Msg_BelowMin",
"The selected Value %1 is below minimum value %2.");this.dragBeginY=this.offsetV=0;this.isMouseDown=this.inDrag=!1;this.ani_startTime=this.curScrollDiv=null;this.ani_startY=this.ani_targetY=this.ani_duration=0;this.drag_startTimeOffset=this.drag_lastEventTime=this.drag_originalStartTime=this.drag_startTime=null;this.drag_momentumAniFramesHandled=0;this.drag_startMomentumResetTime=350;this.fps=80;this.friction=0.7;this.theta=Math.log(1-this.friction/10)};function DPC_autoInit(){}
window.addEventListener?window.addEventListener("load",DPC_autoInit,!1):window.attachEvent&&window.attachEvent("onload",DPC_autoInit);
$MAControl.DigitPickerControl.createDescriptionAndButton=function(a){var b=this.buttonIdPrefix+a.id;if(document.getElementById(b))return!1;var c=a.getAttribute("Description"),d=null;null!=c&&""!=c&&(d=document.createElement("div"),d.className="digitpicker-description",d.innerText=c);a.className="digitpicker-value";var e=document.createElement("a");e.id=b;e.href="#";e.title=c;e.setAttribute("digitpicker_inputid",a.id);e.className="digitpicker-button";e.addEventListener?e.addEventListener("click",DPC_onButtonClick,
!1):e.attachEvent&&e.attachEvent("onclick",DPC_onButtonClick);b=a.parentNode;c=document.createElement("div");c.className="digitpicker-container";var f=document.createElement("div");f.className="digitpicker-value-button";var g=null;a.nextSibling&&(g=a.nextSibling);b.removeChild(a);null!=d&&c.appendChild(d);f.appendChild(a);f.appendChild(e);c.appendChild(f);g?b.insertBefore(c,g):b.appendChild(c);return!0};
$MAControl.DigitPickerControl.show=function(){if(!this.displayed){var a=this.buttonControl;if(null!=a){var b,c;window.jQuery?($=jQuery.noConflict(),b=$(a).offset(),c=parseInt($("#MADigitPickerControl").css("width").replace("px",""),10)-a.offsetWidth,a=parseInt($("#MADigitPickerControl").css("height").replace("px",""),10)-a.offsetHeight):(b=this.getOffset(a),c=300,a=182);c=b.left>c?b.left-c:0;this.pickerContainer.style.top=(b.top>a?b.top-a:0)+"px";this.pickerContainer.style.left=c+"px";this.pickerContainer.style.display=
"block";this.displayed=!0}}};$MAControl.DigitPickerControl.getOffset=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument;a=c.documentElement;var d=c.body,c=c.defaultView||c.parentWindow;return{top:b.top+(c.pageYOffset||a.scrollTop||d.scrollTop)-(a.clientTop||d.clientTop||0),left:b.left+(c.pageXOffset||a.scrollLeft||d.scrollLeft)-(a.clientLeft||d.clientLeft||0)}};
$MAControl.DigitPickerControl.hide=function(){this.displayed&&(this.pickerContainer.style.display="none",this.displayed=!1,this.newValue&&"undefined"!=this.newValue&&(this.inputControl.value=this.newValue,window.jQuery&&($=jQuery.noConflict(),$(this.inputControl).trigger("onValueChange",[this.newValue]))))};
$MAControl.DigitPickerControl.getAllCode=function(){var a;a=""+("<div class='calframe' id='"+this.pickerFrameId+"'>");a+="<div class='x-layout-box-left'><div class='x-layout-box-left-inner'>";a+=this.getDigitsCode();a+="</div>";a+="</div>";a+="<div class='x-layout-box-right'/>";return a+="</div>"};
$MAControl.DigitPickerControl.getDigitsCode=function(){var a,b="";for(a=0;a<this.intPart;a++)b+=this.getOneDigitColumnCode(a);if(0<this.decimalPart)for(b+=this.getPointColumnCode(this.intPart),a=0;a<this.decimalPart;a++)b+=this.getOneDigitColumnCode(this.intPart+1+a);return b};
$MAControl.DigitPickerControl.getOneDigitColumnCode=function(a){var b;b=""+("<div class='x-picker-slot' style='width: "+this.columWidth[a]+"%;'>");b=b+"<div class='x-picker-mask' ><div class='x-picker-bar' ></div></div>"+("<div id="+this.scrollIdPrefix+a+" class='x-scroller' style='-webkit-transform: translate3d(0px, 0px, 0px); '>");for(a=0;9>=a;a++)b+="<div class='x-picker-item' role='button'>"+a+"</div>";b+="</div>";return b+="</div>"};
$MAControl.DigitPickerControl.getPointColumnCode=function(a){var b;b=""+("<div class='x-picker-slot' style='width: "+this.columWidth[a]+"%;'>");b=b+"<div class='x-picker-mask'><div class='x-picker-bar' ></div></div>"+("<div id="+this.scrollIdPrefix+a+" class='x-scroller' style='-webkit-transform: translate3d(0px, 0px, 0px); '>");b+="<div class='x-picker-item'>.</div>";b+="</div>";return b+="</div>"};
$MAControl.DigitPickerControl.build=function(){var a=this.getAllCode();document.getElementById(this.pickerContainer.id).innerHTML=a};$MAControl.DigitPickerControl.readData=function(){if(this.displayed){var a,b;b="";var c;for(c=0;c<this.originalValue.length;c++)a=this.originalValue[c],"."!=a?(a=document.getElementById(this.scrollIdPrefix+c),a=this.getSelectedItemIndex(a),b+=a.toString()):b+=".";return b}};
$MAControl.DigitPickerControl.getSelectedItemIndex=function(a){var b=0,c;if(a){var d=this.getOffsetV(a),e;for(e=0;10>e;e++)if(c=this.getItemOffsetByIndex(a,e),c<d+this.scrollItemHeight/2&&c>d-this.scrollItemHeight/2){b=e;break}}return b};$MAControl.DigitPickerControl.getItemOffsetByIndex=function(a,b){return this.scrollOffsetY-a.children[b].offsetTop};
$MAControl.DigitPickerControl.checkData=function(){var a=this.readData(),b;"float"==this.valueType.toLowerCase()?b=parseFloat(a):"int"==this.valueType.toLowerCase()&&(b=parseInt(a,10));a="";if(b>this.maxValue)return a=this.highValueMessage.replace("%1",b),a=a.replace("%2",this.maxValue);if(b<this.minValue)return a=this.lowValueMessage.replace("%1",b),a=a.replace("%2",this.minValue);this.newValue=b;return a};
$MAControl.DigitPickerControl.selectData=function(){if(this.displayed){var a,b,c;for(a=0;a<this.originalValue.length;a++)if(b=this.originalValue[a],"."!=b&&(c=document.getElementById(this.scrollIdPrefix+a)))c.style.webkitTransform="translate3d(0px, "+(-c.children[parseInt(b,10)].offsetTop+this.scrollOffsetY)+"px, 0px)"}};
$MAControl.DigitPickerControl.showPicker=function(a,b){if(!this.displayed&&null!=a&&!a.disabled){this.inputControl=a;this.buttonControl=b;var c=this.inputControl.getAttribute("Max"),d;this.originalValue=a.value;this.valueType=this.inputControl.getAttribute("Type");this.decimalPart=parseInt(this.inputControl.getAttribute("Decimal"),10);this.maxValue=parseInt(c,10);this.minValue=parseInt(this.inputControl.getAttribute("Min"),10);this.intPart=this.maxValue.toString().length;10<this.maxValue?this.maxValue==
Math.pow(10,c.length-1)&&(this.intPart-=1):this.intPart=1;"float"==this.valueType.toLowerCase()?(this.maxValue=parseFloat(c),this.minValue=parseFloat(this.inputControl.getAttribute("Min")),d=parseFloat(this.originalValue).toFixed(this.decimalPart),this.originalValue=d.toString(),d=0<this.decimalPart?this.intPart+1+this.decimalPart:c.length):"int"==this.valueType.toLowerCase()&&(d=this.intPart);this.columWidth=[];var c=Math.floor(100/d),e=100%d,f;for(f=0;f<d;f++)f>=d-e?this.columWidth.push(c+1):this.columWidth.push(c);
for(;this.originalValue.length<d;)this.originalValue="0"+this.originalValue;this.newValue="undefined";this.build();this.show();this.selectData()}};function DPC_onButtonClick(a){$MAControl.DigitPickerControl.onButtonClick(a)}
$MAControl.DigitPickerControl.onButtonClick=function(a){a.preventDefault();a.stopPropagation();if(this.displayed)a=this.checkData(),this.isMobile&&!this.isIOS?(this.hide(),""!=a&&$MAControl.DigitPickerControl.showPopup(a)):(""!=a&&$MAControl.DigitPickerControl.showPopup(a),this.hide());else{null==a&&(a=window.event);a=void 0!=a.srcElement?a.srcElement:a.originalTarget;var b=document.getElementById(a.getAttribute("digitpicker_inputid"));this.showPicker(b,a)}};
function DPC_onContainerTap2(a){$MAControl.DigitPickerControl.onContainerTap2(a)}$MAControl.DigitPickerControl.onContainerTap2=function(a){if(this.displayed){var b=a.target,c=!1;if(this.isMobile)for(;null!=b;){if("MADigitPickerControl"==b.id){c=!0;break}b=b.parentNode}c||(this.stopEvent(a),a=this.checkData(),this.isMobile&&!this.isIOS?(this.hide(),""!=a&&$MAControl.DigitPickerControl.showPopup(a)):(""!=a&&$MAControl.DigitPickerControl.showPopup(a),this.hide()))}return!1};
$MAControl.DigitPickerControl.onContainerTap=function(a){null==a&&(a=window.event);a=a.target;var b;"undefined"==a.innerText||null==a.innerText?(b=a.wholeText,a=a.parentNode):b=a.innerText;if(!a)return!1;1==b.length&&0<=parseInt(b,10)&&(b=a.parentNode,this.scrollWithAni(b,this.getOffsetV(b),-a.offsetTop+this.scrollOffsetY));return!1};
$MAControl.DigitPickerControl.scrollWithAni=function(a,b,c){this.ani_startTime=Date.now();this.ani_duration=this.HIDE_TIMEOUT;this.ani_startY=b;this.ani_targetY=c;this.curScrollDiv=a;this.doAnimationFrame(this)};$MAControl.DigitPickerControl.doAnimationFrame=function(a){var b=a.getAnimationNewOffsetY();a.curScrollDiv.style.webkitTransform="translate3d(0px, "+b+"px, 0px)";a.ani_targetY!=b&&(a.timeout=setTimeout($MAControl.DigitPickerControl.doAnimationFrame,10,a))};
$MAControl.DigitPickerControl.getAnimationNewOffsetY=function(){var a=this.ani_targetY-this.ani_startY,b=Date.now()-this.ani_startTime,b=Math.min(1,b/this.ani_duration);return this.ani_startY+b*a};$MAControl.DigitPickerControl.getOffsetV=function(a){a=a.style.webkitTransform.toLowerCase();a=a.substring(a.indexOf("(")+1,a.indexOf(")")).split(",");return parseInt(a[1].substring(0,a[1].indexOf("p")),10)};function DPC_onContainerTouchEnd(a){$MAControl.DigitPickerControl.onContainerMouseUp(a)}
function DPC_onContainerMouseUp(a){$MAControl.DigitPickerControl.onContainerMouseUp(a)}$MAControl.DigitPickerControl.onContainerMouseUp=function(a){this.stopEvent(a);if(this.isMouseDown&&!this.inDrag)this.onContainerTap(a);this.inDrag&&(this.inDrag=!1,this.onContainerDragend(a));this.isMouseDown=!1};function DPC_onContainerTouchStart(a){$MAControl.DigitPickerControl.onContainerMouseDown(a,a.touches[0].pageY);$MAControl.DigitPickerControl.stopEvent(a)}
function DPC_onContainerMouseDown(a){$MAControl.DigitPickerControl.onContainerMouseDown(a,a.pageY);$MAControl.DigitPickerControl.stopEvent(a)}$MAControl.DigitPickerControl.onContainerMouseDown=function(a,b){null==a&&(a=window.event);var c=a.target;this.stopMomentumAnimation();if(!c)return!1;c="undefined"==c.innerText||null==c.innerText?c.wholeText:c.innerText;1==c.length&&0<=parseInt(c,10)&&(this.isMouseDown=!0,this.dragBeginY=b);return!1};
function DPC_onContainerTouchMove(a){$MAControl.DigitPickerControl.onContainerMouseMove(a,a.touches[0].pageY)}function DPC_onContainerMouseMove(a){$MAControl.DigitPickerControl.onContainerMouseMove(a,a.pageY)}$MAControl.DigitPickerControl.onContainerMouseMove=function(a,b){if(this.isMouseDown)if(this.inDrag)this.onContainerDrag(a,b);else 2<Math.abs(b-this.dragBeginY)&&(this.inDrag=!0,this.onContainerDragstart(a,b));this.stopEvent(a)};
$MAControl.DigitPickerControl.onContainerDragstart=function(a,b){null==a&&(a=window.event);var c=a.target.parentNode;this.offsetV=$MAControl.DigitPickerControl.getOffsetV(c);this.dragBeginY=b;this.curScrollDiv=c;this.drag_lastEventTime=this.drag_originalStartTime=this.drag_startTime=a.timeStamp;this.drag_startTimeOffset=$MAControl.DigitPickerControl.offsetV;this.drag_momentumAniFramesHandled=0};
$MAControl.DigitPickerControl.onContainerDrag=function(a,b){if(2<Math.abs(b-this.dragBeginY)){var c=this.curScrollDiv;this.offsetV=this.offsetV+b-this.dragBeginY;c.style.webkitTransform="translate3d(0px, "+this.offsetV+"px, 0px)";this.dragBeginY=b}this.drag_lastEventTime=a.timeStamp;this.drag_lastEventTime-this.drag_startTime>this.drag_startMomentumResetTime&&(this.drag_originalStartTime=this.drag_startTime=a.timeStamp,this.drag_startTimeOffset=this.offsetV)};
$MAControl.DigitPickerControl.onContainerDragend=function(a){$MAControl.DigitPickerControl.startMomentumAnimation(a)};
$MAControl.DigitPickerControl.startMomentumAnimation=function(a){var b=a.timeStamp-this.drag_originalStartTime;if(b>this.drag_startMomentumResetTime&&!this.inOffsetBoundary(this.offsetV))return!1;this.drag_momentumAniStartVelocity=(this.offsetV-this.drag_startTimeOffset)/(b/30);this.drag_momentumAniStartTime=a.timeStamp;this.drag_momentumAniProcessingTime=0;this.drag_momentumAniStartOffset=this.offsetV;if(this.drag_isDecelerating=1<Math.abs(this.drag_momentumAniStartVelocity))this.ani_dec_startVelocity=
this.drag_momentumAniStartVelocity,this.ani_dec_startOffset=this.drag_momentumAniStartOffset,this.ani_dec_startTime=this.drag_momentumAniStartTime;if(this.drag_isDecelerating)return this.isMomentumAnimating=!0,this.drag_momentumAniFramesHandled=0,this.timeout=setTimeout(this.doMomentumAnimationFrame,1E3/this.fps,this),!0;a=this.getSelectedItemIndex(this.curScrollDiv);a=this.getItemOffsetByIndex(this.curScrollDiv,a);this.scrollWithAni(this.curScrollDiv,this.offsetV,a);return!1};
$MAControl.DigitPickerControl.stopMomentumAnimation=function(){if(this.isMomentumAnimating){this.timeout&&clearTimeout(this.timeout);this.isMomentumAnimating=this.drag_isDecelerating=!1;var a=this.curScrollDiv.offsetHeight/10,b=Math.round((this.offsetV-this.scrollOffsetY)/a)*a+this.scrollOffsetY,a=a-this.curScrollDiv.offsetHeight+this.scrollOffsetY,c=this.scrollOffsetY;b<a?b=a:b>c&&(b=c);this.scrollWithAni(this.curScrollDiv,this.offsetV,b)}};
$MAControl.DigitPickerControl.doMomentumAnimationFrame=function(a){if(a.isMomentumAnimating){this.timeout=setTimeout($MAControl.DigitPickerControl.doMomentumAnimationFrame,1E3/$MAControl.DigitPickerControl.fps,a);var b=Date.now(),c=a.offsetV,d,e;a.drag_isDecelerating&&((c=a.decel_getOffset(),d=a.drag_momentumAniStartVelocity*a.decel_getFrictionFactor(),e=a.inOffsetBoundary(c),e)?1>=Math.abs(d)&&(a.drag_isDecelerating=!1):a.drag_isDecelerating=!1);a.drag_isDecelerating?(a.drag_momentumAniFramesHandled++,
a.drag_momentumAniProcessingTime+=Date.now()-b,a.setOffset(c)):a.stopMomentumAnimation()}};$MAControl.DigitPickerControl.decel_getOffset=function(){return this.ani_dec_startOffset-this.ani_dec_startVelocity*(1-this.decel_getFrictionFactor())/this.theta};$MAControl.DigitPickerControl.decel_getFrictionFactor=function(){var a=Date.now()-this.ani_dec_startTime;return Math.exp(a/30*this.theta)};
$MAControl.DigitPickerControl.setOffset=function(a,b){if(this.offsetV!=a&&!b){var c=this.curScrollDiv;this.offsetV=a;c.style.webkitTransform="translate3d(0px, "+this.offsetV+"px, 0px)"}return this};$MAControl.DigitPickerControl.inOffsetBoundary=function(a){return a<-this.curScrollDiv.offsetHeight||0<a?!1:!0};
$MAControl.DigitPickerControl.CheckPlatform=function(){var a=navigator.userAgent;if(0<=a.indexOf("iPad")||0<=a.indexOf("iPhone"))this.isIOS=!0;0<=a.indexOf("Android")&&(this.isAndroid=!0);if(this.isIOS||this.isAndroid||0<=a.indexOf("Lenovo-3GW100")||0<=a.indexOf("Pre")||0<=a.indexOf("XT806")||0<=a.indexOf("BB10"))this.isMobile=!0};$MAControl.DigitPickerControl.stopEvent=function(a){a||(a=window.event);a.cancelBubble=!0;a.returnValue=!1;a.stopPropagation&&(a.stopPropagation(),a.preventDefault());return!1};
$MAControl.DigitPickerControl.BindPageEvent=function(){window.jQuery&&(GlobalDigitPicker=this,$=jQuery.noConflict(),$("div").live("pagebeforehide",function(a,b){window.GlobalDigitPicker&&GlobalDigitPicker.hide()}))};
$MAControl.DigitPickerControl.initPopup=function(){this.pickerPopup=document.createElement("div");this.pickerPopup.style.backgroundColor="rgba(0, 0, 0, 0.5)";this.pickerPopup.style.width=window.innerWidth+"px";this.pickerPopup.style.height=window.innerHeight+"px";this.pickerPopup.style.position="absolute";this.pickerPopup.style.top="0px";this.pickerPopup.style.left="0px";this.pickerPopup.style.display="none";this.pickerPopup.style.zIndex="50001";this.pickerPopup.id="digitPickerPopup";document.body.appendChild(this.pickerPopup);
this.pickerPopupMsg=document.createElement("div");this.pickerPopupMsg.style.position="fixed";this.pickerPopupMsg.style.top="40%";this.pickerPopupMsg.style.borderRadius="15px";this.pickerPopupMsg.style.padding="15px";this.pickerPopupMsg.style.paddingLeft="10px";this.pickerPopupMsg.style.paddingRight="10px";this.pickerPopupMsg.style.maxWidth="80%";this.pickerPopupMsg.style.border="solid 1px black";this.pickerPopupMsg.style.backgroundColor="white";this.pickerPopup.appendChild(this.pickerPopupMsg);this.isMobile?
this.pickerPopup.addEventListener("touchstart",function(a){document.getElementById("digitPickerPopup").style.display="none";a.preventDefault();a.stopPropagation();return!1},!0):this.pickerPopup.addEventListener("mousedown",function(a){document.getElementById("digitPickerPopup").style.display="none";a.preventDefault();a.stopPropagation();return!1},!0);var a=this;window.addEventListener("resize",function(){"none"!=a.pickerPopup.style.display&&(a.pickerPopup.style.width=window.innerWidth+"px",a.pickerPopup.style.height=
window.innerHeight+"px",a.pickerPopupMsg.style.left=a.pickerPopup.offsetWidth/2-a.pickerPopupMsg.offsetWidth/2+"px")},!1)};$MAControl.DigitPickerControl.showPopup=function(a){this.pickerPopupMsg.innerHTML=a;this.pickerPopup.style.width=window.innerWidth+"px";this.pickerPopup.style.height=window.innerHeight+"px";this.pickerPopup.style.display="block";this.pickerPopupMsg.style.left=this.pickerPopup.offsetWidth/2-this.pickerPopupMsg.offsetWidth/2+"px"};$MA.Chart=$MA.Chart;$MA.Chart.getStyles=$MA.Chart.getStyles;
$MA.Chart.setPieChartCategoryTextMaxLength=$MA.Chart.setPieChartCategoryTextMaxLength;$MA.Chart.prototype.load=$MA.Chart.prototype.load;$MA.Chart.prototype.create=$MA.Chart.prototype.create;$MA.Chart.prototype.refresh=$MA.Chart.prototype.refresh;$MA.Chart.prototype.applyCSS=$MA.Chart.prototype.applyCSS;$MA.Chart.prototype.showToolBar=$MA.Chart.prototype.showToolBar;$MA.Chart.prototype.isToolBarVisible=$MA.Chart.prototype.isToolBarVisible;$MA.Chart.prototype.showTableView=$MA.Chart.prototype.showTableView;
$MA.Chart.prototype.isTableViewVisible=$MA.Chart.prototype.isTableViewVisible;$MA.Chart.prototype.showRangeSelectorView=$MA.Chart.prototype.showRangeSelectorView;$MA.Chart.prototype.isRangeSelectorViewVisible=$MA.Chart.prototype.isRangeSelectorViewVisible;$MA.Chart.prototype.showWhatIfView=$MA.Chart.prototype.showWhatIfView;$MA.Chart.prototype.isWhatIfViewVisible=$MA.Chart.prototype.isWhatIfViewVisible;$MA.Chart.prototype.showDynamicAnalysisView=$MA.Chart.prototype.showDynamicAnalysisView;
$MA.Chart.prototype.isDynamicAnalysisViewVisible=$MA.Chart.prototype.isDynamicAnalysisViewVisible;$MA.Chart.prototype.showValueBubble=$MA.Chart.prototype.showValueBubble;$MA.Chart.prototype.setValueBubbleStyle=$MA.Chart.prototype.setValueBubbleStyle;$MA.Chart.prototype.getValueBubbleStyle=$MA.Chart.prototype.getValueBubbleStyle;$MA.Chart.prototype.isValueBubbleVisible=$MA.Chart.prototype.isValueBubbleVisible;$MA.Chart.prototype.getProperty=$MA.Chart.prototype.getProperty;
$MA.Chart.prototype.setProperty=$MA.Chart.prototype.setProperty;$MA.Chart.prototype.getZoomingLevel=$MA.Chart.prototype.getZoomingLevel;$MA.Chart.prototype.setZoomingLevel=$MA.Chart.prototype.setZoomingLevel;$MA.Chart.prototype.getNumberOfZoomingLevels=$MA.Chart.prototype.getNumberOfZoomingLevels;$MA.Chart.prototype.setLegend=$MA.Chart.prototype.setLegend;$MA.Chart.prototype.setLegendOffset=$MA.Chart.prototype.setLegendOffset;$MA.Chart.prototype.setDataTable=$MA.Chart.prototype.setDataTable;
$MA.Chart.prototype.bind=$MA.Chart.prototype.bind;$MA.Chart.prototype.unbind=$MA.Chart.prototype.unbind;$MA.Chart.prototype.copyGraphTo=$MA.Chart.prototype.copyGraphTo;$MA.Chart.prototype.getSelectedCategory=$MA.Chart.prototype.getSelectedCategory;$MA.Chart.prototype.getSelectedCategoryGroup=$MA.Chart.prototype.getSelectedCategoryGroup;$MA.Chart.prototype.getSelectedSeries=$MA.Chart.prototype.getSelectedSeries;$MA.Chart.prototype.switchToFullView=$MA.Chart.prototype.switchToFullView;
$MA.Chart.prototype.isFullView=$MA.Chart.prototype.isFullView;$MA.Chart.prototype.getNumberOfCategories=$MA.Chart.prototype.getNumberOfCategories;$MA.Chart.prototype.setNumberOfVisibleCategories=$MA.Chart.prototype.setNumberOfVisibleCategories;$MA.Chart.prototype.getSelectedCategoryIndex=$MA.Chart.prototype.getSelectedCategoryIndex;$MA.Chart.prototype.getCanvas=$MA.Chart.prototype.getCanvas;$MA.Chart.prototype.getDrawArea=$MA.Chart.prototype.getDrawArea;
$MA.Chart.prototype.getNumberOfVisibleCategories=$MA.Chart.prototype.getNumberOfVisibleCategories;$MA.Chart.prototype.getCategoryObject=$MA.Chart.prototype.getCategoryObject;$MA.Chart.prototype.getValueLoc=$MA.Chart.prototype.getValueLoc;$MA.Chart.prototype.preventDefaultRendering=$MA.Chart.prototype.preventDefaultRendering;$MA.Chart.prototype.getDrawingContentType=$MA.Chart.prototype.getDrawingContentType;$MA.Chart.prototype.setSelectedCategoryIndex=$MA.Chart.prototype.setSelectedCategoryIndex;
$MA.Chart.prototype.retrieve=$MA.Chart.prototype.retrieve;$MA.Chart.prototype.setPalette=$MA.Chart.prototype.setPalette;$MA.Chart.prototype.showTableValue=$MA.Chart.prototype.showTableValue;$MA.Chart.prototype.setMonoColor=$MA.Chart.prototype.setMonoColor;$MA.Chart.prototype.getSelectedBubbleInfo=$MA.Chart.prototype.getSelectedBubbleInfo;$MA.Chart.prototype.setDataPointsColor=$MA.Chart.prototype.setDataPointsColor;$MA.Chart.prototype.setHorizontalBarHeight=$MA.Chart.prototype.setHorizontalBarHeight;
$MA.Chart.prototype.setShowDotsWidth=$MA.Chart.prototype.setShowDotsWidth;$MA.Chart.prototype.setBubbleBorderColor=$MA.Chart.prototype.setBubbleBorderColor;$MA.Chart.prototype.setBubbleMinSize=$MA.Chart.prototype.setBubbleMinSize;$MA.Chart.prototype.setSymbolPalette=$MA.Chart.prototype.setSymbolPalette;$MA.Chart.prototype.setMonoSymbol=$MA.Chart.prototype.setMonoSymbol;$MA.Chart.prototype.collapse=$MA.Chart.prototype.collapse;$MA.Chart.prototype.expand=$MA.Chart.prototype.expand;
$MA.Chart.prototype.isRootLevel=$MA.Chart.prototype.isRootLevel;$MA.Chart.prototype.isLeafLevel=$MA.Chart.prototype.isLeafLevel;$MA.Chart.prototype.setGraphLineWidth=$MA.Chart.prototype.setGraphLineWidth;$MA.Chart.prototype.setMaxPies=$MA.Chart.prototype.setMaxPies;$MA.Chart.prototype.setTotalFormat=$MA.Chart.prototype.setTotalFormat;$MA.Chart.prototype.setBarChartTableWidth=$MA.Chart.prototype.setBarChartTableWidth;$MA.Chart.prototype.setWhatIfValue=$MA.Chart.prototype.setWhatIfValue;
$MA.Chart.prototype.setRangeSelectorStartPosition=$MA.Chart.prototype.setRangeSelectorStartPosition;$MA.BI.Object.prototype.getParent=$MA.BI.Object.prototype.getParent;$MA.BI.ChartObject.prototype.getNumberOfZoomingLevels=$MA.BI.ChartObject.prototype.getNumberOfZoomingLevels;$MA.BI.ChartObject.prototype.setDataTable=$MA.BI.ChartObject.prototype.setDataTable;$MA.DrillDownGroup=$MA.DrillDownGroup;$MA.DrillDownGroup.prototype.drillDown=$MA.DrillDownGroup.prototype.drillDown;
$MA.DrillDownGroup.prototype.drillBack=$MA.DrillDownGroup.prototype.drillBack;$MA.DrillDownGroup.prototype.drillUp=$MA.DrillDownGroup.prototype.drillUp;$MA.DrillDownGroup.prototype.getCurrentChart=$MA.DrillDownGroup.prototype.getCurrentChart;$MA.DrillDownGroup.prototype.getChartAtIndex=$MA.DrillDownGroup.prototype.getChartAtIndex;$MA.DrillDownGroup.prototype.showToolBar=$MA.DrillDownGroup.prototype.showToolBar;$MA.DrillDownGroup.prototype.refresh=$MA.DrillDownGroup.prototype.refresh;
$MA.DrillDownGroup.prototype.bind=$MA.DrillDownGroup.prototype.bind;$MA.DrillDownGroup.prototype.unbind=$MA.DrillDownGroup.prototype.unbind;$MA.DrillDownGroup.prototype.getCurrentLevel=$MA.DrillDownGroup.prototype.getCurrentLevel;$MA.DrillDownGroup.getDrillDownGroup=$MA.DrillDownGroup.getDrillDownGroup;$MA.Expression=$MA.Expression;$MA.Expression.parse=$MA.Expression.parse;$MA.Expression.prototype.evaluate=$MA.Expression.prototype.evaluate;$MA.DA=$MA.DA;$MA.DA.load=$MA.DA.load;
$MA.DA.createVariables=$MA.DA.createVariables;$MA.DA.getValue=$MA.DA.getValue;$MA.DA.setValue=$MA.DA.setValue;$MA.DataTable=$MA.DataTable;$MA.DataTable.prototype.addColumn=$MA.DataTable.prototype.addColumn;$MA.DataTable.prototype.addRow=$MA.DataTable.prototype.addRow;$MA.DataTable.prototype.addRows=$MA.DataTable.prototype.addRows;$MA.DataTable.prototype.getNumberOfColumns=$MA.DataTable.prototype.getNumberOfColumns;$MA.DataTable.prototype.getNumberOfRows=$MA.DataTable.prototype.getNumberOfRows;
$MA.DataTable.prototype.refresh=$MA.DataTable.prototype.refresh;$MA.DataTable.prototype.getProperty=$MA.DataTable.prototype.getProperty;$MA.FileDataTable=$MA.FileDataTable;$MA.FileDataTable.prototype.setData=$MA.FileDataTable.prototype.setData;$MA.Graph=$MA.Graph;$MA.Graph.Share=$MA.Graph.Share;$MA.Graph.Share.prototype.setTool=$MA.Graph.Share.prototype.setTool;$MA.Graph.Share.prototype.setMoveTool=$MA.Graph.Share.prototype.setMoveTool;$MA.Graph.Share.prototype.deleteSelect=$MA.Graph.Share.prototype.deleteSelect;
$MA.Graph.Share.prototype.selectColor=$MA.Graph.Share.prototype.selectColor;$MA.Graph.Share.prototype.goHistory=$MA.Graph.Share.prototype.goHistory;$MA.Graph.Share.prototype.isUndo=$MA.Graph.Share.prototype.isUndo;$MA.Graph.Share.prototype.isRedo=$MA.Graph.Share.prototype.isRedo;$MA.Graph.Share.selectTool=$MA.Graph.Share.selectTool;$MA.Graph.Share.sendMail=$MA.Graph.Share.sendMail;$MA.Graph.Share.saveIt=$MA.Graph.Share.saveIt;$MA.Graph.Share.goHistory=$MA.Graph.Share.goHistory;
$MA.Graph.Share.moveIt=$MA.Graph.Share.moveIt;$MA.Graph.Share.deleteIt=$MA.Graph.Share.deleteIt;$MA.Graph.Share.selectColor=$MA.Graph.Share.selectColor;$MA.sendGraphShareMail=$MA.sendGraphShareMail;"undefined"!=typeof $&&(window.$=window.$);$MA.setLocale=$MA.setLocale;$MA.setCurrencySymbol=$MA.setCurrencySymbol;$MA.setImagesFolder=$MA.setImagesFolder;$MA.isBrowserCompatible=$MA.isBrowserCompatible;$MA.setTrace=$MA.setTrace;

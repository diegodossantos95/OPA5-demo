/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/richtexteditor/RichTextEditorRenderer',['jquery.sap.global','sap/ui/core/Renderer'],function(q,R){"use strict";var a={};
a.render=function(r,o){var t=o.getAggregation("_toolbarWrapper");var c=t&&o._bCustomToolbarRequirementsFullfiled;r.write('<div');r.writeControlData(o);if(o.getEditorType()=="TinyMCE4"){r.writeAttribute("data-sap-ui-preserve",o.getId());}r.addClass("sapUiRTE");if(o.getRequired()){r.addClass("sapUiRTEReq");}if(o.getUseLegacyTheme()){r.addClass("sapUiRTELegacyTheme");}if(c){r.addClass("sapUiRTEWithCustomToolbar");}r.writeClasses();r.addStyle("width",o.getWidth());r.addStyle("height",o.getHeight());r.writeStyles();if(o.getTooltip_AsString()){r.writeAttributeEscaped("title",o.getTooltip_AsString());}r.write('>');if(c){t.addStyleClass("sapUiRTECustomToolbar");r.renderControl(t);}var s="render"+o.getEditorType()+"Editor";if(this[s]&&typeof this[s]==="function"){this[s].call(this,r,o);}r.write('</div>');};
return a;},true);
sap.ui.predefine('sap/ui/richtexteditor/ToolbarWrapper',['jquery.sap.global','sap/ui/core/Control','./library','sap/ui/core/IconPool','sap/ui/core/Item'],function(q,C,l,I,a){"use strict";
var T=C.extend("sap.ui.richtexteditor.ToolbarWrapper",{metadata:{interfaces:["sap.ui.richtexteditor.IToolbar"],library:"sap.ui.richtexteditor",aggregations:{_toolbar:{type:"sap.m.OverflowToolbar",multiple:false,visibility:"hidden"},_customInsertImageDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customInsertLinkDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customTextColorDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customBackgroundColorDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_customInsertTableDialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{editor:{type:"sap.ui.richtexteditor.RichTextEditor",multiple:false}}}});
T.prototype.init=function(){this._helper=l.RichTextEditorHelper;this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.richtexteditor");};
T.prototype.onBeforeRendering=function(){if(!this.getAggregation("_toolbar")){this.setAggregation("_toolbar",this._createCustomToolbar());this.setAggregation("_customInsertImageDialog",this._helper.createDialog(this._createInsertImageConfig("InsertImage")));this.setAggregation("_customInsertLinkDialog",this._helper.createDialog(this._createInsertLinkConfig("InsertLink")));this.setAggregation("_customTextColorDialog",this._helper.createDialog(this._createColorDialogConfig("TextColor")));this.setAggregation("_customBackgroundColorDialog",this._helper.createDialog(this._createColorDialogConfig("BackgroundColor")));this.setAggregation("_customInsertTableDialog",this._helper.createDialog(this._createInsertTableConfig("InsertTable")));}};
T.prototype.exit=function(){this._customButtons=null;};
T.prototype._getId=function(e){this._getId.counter=this._getId.counter?this._getId.counter+1:1;var r=this.getEditor()?this.getEditor().getId():"_rte"+this._getId.counter,t=this.getId(),b=[r+t];if(e||e===0){b.push(e);}return b.join("-");};
T.prototype.getEditor=function(){var i=this.getAssociation("editor"),e=sap.ui.getCore().byId(i);return e||null;};
T.prototype.modifyRTEToolbarConfig=function(c){var t=this;c.toolbar=false;c.setup=function(e){e.on('init',function(){var E=l.EditorCommands;e.execCommand("FontName",false,E["FontFamily"]["Verdana"].commandValue);e.execCommand("FontSize",false,"8");e.execCommand("JustifyLeft",false);});e.on('NodeChange',function(){t._syncToolbarStates(this);});};return c;};
T.prototype._syncToolbarStates=function(n){var e,c,E,o=l.EditorCommands,f=n.formatter,_=function(t,d,c){var A;for(A in t){if(t.hasOwnProperty(A)&&d.match(t[A].style)){if(c.getIcon()!==I.getIconURI(e[A].icon)){c.setIcon(I.getIconURI(e[A].icon));}else{c.setIcon(I.getIconURI(e["Left"].icon));}break;}}},b=function(d,F,c){var s,g,t,h=d.getDoc().queryCommandValue("FontName");for(s in F){if(!F.hasOwnProperty(s)){break;}g=F[s].commandValue.match(/\w+/g).join("").toLowerCase();h=h&&h.match(/\w+/g).join("").toLowerCase();t=F[s].text.match(/\w+/g).join("").toLowerCase();if(g===h||h===t){c.setSelectedItemId(c.getId()+s);break;}}};for(E in o){if(!o.hasOwnProperty(E)){continue;}e=o[E];c=sap.ui.getCore().byId(this._getId(E));if(!c){continue;}if(E==="TextAlign"){_(e,f,c);}else if(E==="FontFamily"){b(n,e,c);}else if(E==="FontSize"&&n.getDoc().queryCommandValue(E)){c.setSelectedItemId(c.getId()+n.getDoc().queryCommandValue(E));}else if(c.getMetadata().getName()==="sap.m.ToggleButton"){c.setPressed(f.match(e.style));}}};
T.prototype._createButtonConfig=function(c){var e=l.EditorCommands,o=e[c],r=this.getEditor();return{id:this._getId(c),icon:I.getIconURI(o.icon),tooltip:this._oResourceBundle.getText(o.bundleKey),press:function(){if(r){r.getNativeApi().execCommand(o.command);}else{q.sap.log.warning("Cannot execute native command: "+o.command);}}};};
T.prototype._createMenuButtonItems=function(c){var e=this._helper,E=l.EditorCommands,i=[],o;for(var s in E[c]){if(s==='bundleKey'){continue;}o=E[c][s];i.push(e.createMenuItem(this._getId(c+s),o.text,I.getIconURI(o.icon)));}return i;};
T.prototype._createFontStyleSelectItems=function(){var e=l.EditorCommands,f=e["FontFamily"],i=[],o;for(var F in f){o={id:this._getId("FontFamily"+F),text:f[F].text};i.push(new a(o));}return i;};
T.prototype._getFontStyleCommand=function(i){var e=l.EditorCommands,f=e["FontFamily"];for(var F in f){if(f.hasOwnProperty(F)&&f[F].text===i){return f[F].commandValue;}}};
T.prototype._createFontSizeSelectItems=function(){var i=[],n=1,o,e=l.EditorCommands;e["FontSize"].forEach(function(b){o={id:this._getId("FontSize"+n),text:b+"pt"};i.push(new a(o));n++;},this);return i;};
T.prototype._getColor=function(c){var r=this.getEditor(),o=l.EditorCommands[c].style,n=r.getNativeApi().selection.getNode(),N=r.getNativeApi().dom.getParents(n),i,b,s;for(i=0;i<N.length;i++){b=N[i];s=b.style[o];if(s&&s!=""){return s;}}return l.EditorCommands[c].defaultValue;};
T.prototype._createButtonForDialog=function(c){var o=l.EditorCommands[c],t=this;if(!o){return;}return{id:this._getId(c),icon:sap.ui.core.IconPool.getIconURI(o.icon),tooltip:this._oResourceBundle.getText(o.bundleKey),press:function(){if(c.indexOf("Color")!==-1){t.getAggregation("_custom"+c+"Dialog").getContent()[0].setColorString(t._getColor(c));}t.getAggregation("_custom"+c+"Dialog").open();}};};
T.prototype._createColorDialogConfig=function(t){var c=l.EditorCommands[t],e=this._helper,o=e.createColorPicker(),r=this.getEditor(),b=this,B=[];if(!c){return;}B.push(e.createButton({id:this._getId("OKButton"+t),text:"OK",press:function(){if(b._getColor(t).replace(/,\s/g,',')!==o.getColorString()){r.getNativeApi().execCommand(c.command,false,o.Color.hex);}b.getAggregation("_custom"+t+"Dialog").close();}}));B.push(e.createButton({id:this._getId("cancelButton"+t),text:"Cancel",press:function(){b.getAggregation("_custom"+t+"Dialog").close();}}));return{contentWidth:'320px',title:c.title,content:[o],buttons:B};};
T.prototype._generateImageHTML=function(u,t,h,w,r){var U=u?' src="'+u+'"':'',A=t?' alt="'+t+'"':'',H=h?' height="'+h+'px"':'',W=w?' width="'+h+'px"':'',d=H+W;if(r){d=H?H:W;}return'<img'+U+A+d+'/>';};
T.prototype._createInsertImageConfig=function(){var u=this._helper.createInput(),U=this._helper.createLabel({text:"Source URL",labelFor:u}),t=this._helper.createInput(),o=this._helper.createLabel({text:"Image Description",labelFor:t}),d=this._helper.createInput({width:'8rem',fieldWidth:"6rem",description:'px'}),b=this._helper.createText({textAlign:"Center",width:'2rem',text:'x'}),D=this._helper.createInput({fieldWidth:"6rem",width:'8rem',description:'px'}),c=this._helper.createHBox({wrap:"Wrap",alignItems:"Center",justifyContent:"SpaceBetween",items:[d,b,D]}),e=this._helper.createLabel({text:"Dimensions"}),r=this._helper.createCheckBox(),R=this._helper.createLabel({text:"Maintain Aspect Ratio",labelFor:r}),f=this.getEditor(),g=this,B=[];B.push(this._helper.createButton({id:this._getId("InsertImageButton"),text:"Insert",press:function(){f.getNativeApi().insertContent(g._generateImageHTML(u.getValue(),t.getValue(),d.getValue(),D.getValue(),r.getSelected()));g.getAggregation("_customInsertImageDialog").close();}}));B.push(this._helper.createButton({id:this._getId("CancelInsertImageButton"),text:"Cancel",press:function(){g.getAggregation("_customInsertImageDialog").close();}}));return{contentWidth:'320px',title:sap.ui.richtexteditor.EditorCommands["InsertImage"].title,buttons:B,content:[U,u,o,t,e,c,r,R]};};
T.prototype._generateLinkHTML=function(u,t,s,b){var U=u?' href="'+u+'"':'',c=s?' title="'+s+'"':'',d=b?' target="_blank"':'';t=t?t:'';return'<a'+U+c+d+'>'+t+'</a>';};
T.prototype._createInsertLinkConfig=function(){var u=this._helper.createInput(),U=this._helper.createLabel({text:"URL",labelFor:u}),t=this._helper.createInput(),o=this._helper.createLabel({text:"Display Text",labelFor:t}),b=this._helper.createInput(),c=this._helper.createLabel({text:"Title",labelFor:b}),d=this._helper.createSelect({id:this._getId("InsertLinkSelect"),items:[new a({id:this._getId("InsertLinkSelectNone"),text:"None"}),new a({id:this._getId("InsertLinkSelectNewWindow"),text:"New Window"})]}),e=this._helper.createLabel({text:"Target",labelFor:d}),f=this._helper.createVBox({direction:"Column",alignItems:"Start",items:[e,d]}),r=this.getEditor(),g=this,B=[];B.push(this._helper.createButton({id:this._getId("InsertLinkButton"),text:"Insert",press:function(E){var h=d.getSelectedItem().getText()==="New Window"?true:false;r.getNativeApi().insertContent(g._generateLinkHTML(u.getValue(),t.getValue(),b.getValue(),h));g.getAggregation("_customInsertLinkDialog").close();}}));B.push(this._helper.createButton({id:this._getId("CancelInsertLinkButton"),text:"Cancel",press:function(){g.getAggregation("_customInsertLinkDialog").close();}}));return{contentWidth:'320px',title:l.EditorCommands["InsertLink"].title,buttons:B,content:[U,u,o,t,c,b,f]};};
T.prototype._createInsertTableConfig=function(){var r=this._helper.createStepInput({value:2,min:0,width:"50%"}),R=this._helper.createLabel({text:"Number of Rows:",labelFor:r}),c=this._helper.createStepInput({value:2,min:0,width:"50%"}),o=this._helper.createLabel({text:"Number of Cols:",labelFor:c}),d=this._helper.createInput({width:'8rem',fieldWidth:"6rem",description:'px'}),t=this._helper.createText({textAlign:"Center",width:'2rem',text:'x'}),D=this._helper.createInput({fieldWidth:"6rem",width:'8rem',description:'px'}),b=this._helper.createHBox({wrap:"Wrap",alignItems:"Center",justifyContent:"SpaceBetween",items:[d,t,D]}),e=this._helper.createLabel({text:"Dimensions"}),f=this.getEditor(),g=this,B=[];B.push(this._helper.createButton({id:this._getId("InsertTableButton"),text:"Insert",press:function(){var h=f.getNativeApi().plugins.table.insertTable(r.getValue(),c.getValue()),i=f.getNativeApi().dom;i.setStyle(h,'width',D.getValue()+"px");i.setStyle(h,'height',d.getValue()+"px");g.getAggregation("_customInsertTableDialog").close();}}));B.push(this._helper.createButton({id:this._getId("CancelInsertTableButton"),text:"Cancel",press:function(){g.getAggregation("_customInsertTableDialog").close();}}));return{title:sap.ui.richtexteditor.EditorCommands["InsertTable"].title,buttons:B,content:this._helper.createVBox({direction:"Column",alignItems:"Start",items:[R,r,o,c,e,b]})};};
T.prototype._createCustomToolbar=function(){var e=this._helper,c=[],b=l.ButtonGroups;Object.keys(b).forEach(function(g){c=c.concat(this.addButtonGroup(g));},this);return e.createOverflowToolbar(this._getId(),c);};
T.prototype.setShowGroup=function(g,s){var o=this._findGroupedControls(g),t=this.getAggregation("_toolbar");o.forEach(function(O){O.setVisible(s);});t&&t.rerender();};
T.prototype.addButtonGroup=function(g){var r=this.getEditor(),e=this._helper,c=[],b=l.ButtonGroups,o=l.EditorCommands,v,V,d,f,h,i,j,k;switch(g){case"font-style":f=r?r.getShowGroupFontStyle():false;b["font-style"].forEach(function(n){c.push(e.createToggleButton(this._createButtonConfig(n)).setVisible(f));},this);break;case"font":d=r?r.getShowGroupFont():false;c.push(e.createSelect({id:this._getId("FontFamily"),items:this._createFontStyleSelectItems(),change:function(E){var n;if(r){n=E.getSource().getSelectedItem();r.getNativeApi().execCommand('FontName',false,this._getFontStyleCommand(n.getText()));}else{q.sap.log.warning("Cannot execute native command: "+'FontName');}}.bind(this)}).setVisible(d));c.push(e.createSelect({id:this._getId("FontSize"),items:this._createFontSizeSelectItems(),change:function(E){var n;if(r){n=E.getSource().getSelectedItem();r.getNativeApi().execCommand('FontSize',false,n.getText());}else{q.sap.log.warning("Cannot execute native command: "+'FontSize');}}}).setVisible(d));c.push(e.createButton(this._createButtonForDialog("TextColor")).setVisible(d));c.push(e.createButton(this._createButtonForDialog("BackgroundColor")).setVisible(d));break;case"text-align":i=r?r.getShowGroupTextAlign():false;var m=this._createMenuButtonItems("TextAlign");c.push(e.createMenuButton(this._getId("TextAlign"),m,function(E){var s;if(r){s=E.getParameter("item");r.getNativeApi().execCommand('Justify'+s.getText());this.getParent().setIcon(s.getIcon());}else{q.sap.log.warning("Cannot execute native command: "+'Justify');}},m[0].getIcon(),this._oResourceBundle.getText(o["TextAlign"].bundleKey)).setVisible(i));break;case"structure":V=r?r.getShowGroupStructure():false;b["structure"].forEach(function(n){c.push(e.createButton(this._createButtonConfig(n)).setVisible(V));},this);break;case"clipboard":v=r?r.getShowGroupClipboard():false;b["clipboard"].forEach(function(n){c.push(e.createButton(this._createButtonConfig(n)).setVisible(v));},this);break;case"undo":h=r?r.getShowGroupUndo():false;b["undo"].forEach(function(n){c.push(e.createButton(this._createButtonConfig(n)).setVisible(h));},this);break;case"insert":k=r?r.getShowGroupInsert():false;c.push(e.createButton(this._createButtonForDialog("InsertImage")).setVisible(k));break;case"link":j=r?r.getShowGroupLink():false;c.push(e.createButton(this._createButtonForDialog("InsertLink")).setVisible(j));c.push(e.createButton(this._createButtonConfig("Unlink")).setVisible(j));break;case"table":c.push(e.createButton(this._createButtonForDialog("InsertTable")));break;}return c;};
T.prototype.addButtonGroupToContent=function(g,f){var G;if(!f&&g.buttons[0]==="table"){G=g.buttons[0];sap.ui.richtexteditor.ButtonGroups.custom[g.name]={name:g.buttons[0],controls:["InsertTable"]};}if(f&&g.name==="table"){G=g.name;sap.ui.richtexteditor.ButtonGroups[g.name]=["InsertTable"];}if(!sap.ui.richtexteditor.ButtonGroups[g.name]&&!sap.ui.richtexteditor.ButtonGroups.custom[g.name]){return this;}var t=this.getAggregation("_toolbar"),c=this.addButtonGroup(G),b=c.length,i;for(i=0;i<b;i+=1){t.addContent(c[i]);}return this;};
T.prototype.removeButtonGroup=function(g){var o=this._findGroupedControls(g);o.forEach(function(O){O.destroy();});};
T.prototype._findGroupedControls=function(g){var b=l.ButtonGroups,t=this.getAggregation("_toolbar"),c;if(!t){return[];}c=b[g]?b[g]:b.custom[g].controls;var i=c.map(function(n){return this._getId(n);},this);return t.findAggregatedObjects(false,function(A){return i.indexOf(A.getId())>-1;})||[];};
T.prototype.modifyToolbarContent=function(m){var r,b=Array.prototype.slice.call(arguments);b.shift();switch(m){case"add":r=this._proxyToolbarAdd.apply(this,b);break;case"destroy":r=this._proxyToolbarDestroy.apply(this,b);break;case"get":r=this._proxyToolbarGet.apply(this,b);break;case"indexOf":r=this._proxyToolbarIndexOf.apply(this,b);break;case"insert":r=this._proxyToolbarInsert.apply(this,b);break;case"removeAll":r=this._proxyToolbarRemoveAll.apply(this,b);break;case"remove":r=this._proxyToolbarRemove.apply(this,b);break;}return r;};
T.prototype._updateCustomToolbarRefIds=function(i,b){var c,d;c=this._customButtons||[];d=c.indexOf(i);if(d>-1){c.splice(d,1);}if(b!==-1){b=b>=0&&b<=c.length?b:c.length;c.splice(b,0,i);}this._customButtons=c;};
T.prototype._proxyToolbarAdd=function(i){var t=this.getAggregation("_toolbar"),r=t.addContent(i);t.rerender();if(r){this._updateCustomToolbarRefIds(i.getId());}return r;};
T.prototype._proxyToolbarGet=function(){var t=this.getAggregation("_toolbar"),c=this._customButtons||[];return t.findAggregatedObjects(false,function(A){return c.indexOf(A.getId())>-1;})||[];};
T.prototype._proxyToolbarDestroy=function(){var i=this._proxyToolbarGet();i.forEach(function(o){o.destroy();});this._customButtons=[];};
T.prototype._proxyToolbarIndexOf=function(i){var c=this._customButtons||[],s=typeof i==="object"?i.getId():i;return c.indexOf(s);};
T.prototype._proxyToolbarInsert=function(i,b){var r,t=this.getAggregation("_toolbar"),c=t.getContent()||[],d=this._customButtons||[],e=c.length-d.length;if(b<0){b=0;}else if(b>d.length){b=d.length;}else if(!b&&b!==0){b=d.length;}e+=b;r=t.insertContent(i,e);t.rerender();if(r){this._updateCustomToolbarRefIds(i.getId(),b);}return r;};
T.prototype._proxyToolbarRemoveAll=function(){var i=this._proxyToolbarGet();i.forEach(this._proxyToolbarRemove,this);return i;};
T.prototype._proxyToolbarRemove=function(i){var s,r,t=this.getAggregation("_toolbar");switch(typeof i){case"string":s=i;break;case"object":s=i.getId();break;case"number":s=this._customButtons[i];break;}r=t.removeContent(s);if(r&&s){this._updateCustomToolbarRefIds(s,-1);}return r;};
return T;},true);
sap.ui.predefine('sap/ui/richtexteditor/ToolbarWrapperRenderer',['jquery.sap.global','sap/ui/core/Renderer'],function(q,R){"use strict";var T={};
T.render=function(r,t){t.getAggregation("_toolbar").addStyleClass("sapUiRTECustomToolbar");r.renderControl(t.getAggregation("_toolbar"));};
return T;},true);
sap.ui.predefine('sap/ui/richtexteditor/library',['jquery.sap.global','sap/ui/core/Core','sap/ui/core/library'],function(q,C,l){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.richtexteditor",dependencies:["sap.ui.core"],types:["sap.ui.richtexteditor.EditorType"],interfaces:["sap.ui.richtexteditor.IToolbar"],controls:["sap.ui.richtexteditor.RichTextEditor","sap.ui.richtexteditor.ToolbarWrapper"],elements:[],version:"1.50.6"});sap.ui.richtexteditor.EditorType={TinyMCE:"TinyMCE",TinyMCE4:"TinyMCE4"};sap.ui.richtexteditor.EditorCommands={Bold:{icon:"bold-text",command:"Bold",style:"bold",bundleKey:"BOLD_BUTTON_TOOLTIP"},Italic:{icon:"italic-text",command:"Italic",style:"italic",bundleKey:"ITALIC_BUTTON_TOOLTIP"},Underline:{icon:"underline-text",command:"Underline",style:"underline",bundleKey:"UNDERLINE_BUTTON_TOOLTIP"},Strikethrough:{icon:"edit",command:"Strikethrough",style:"strikethrough",bundleKey:"STRIKETHROUGH_BUTTON_TOOLTIP"},Copy:{icon:"copy",command:"Copy",bundleKey:"COPY_BUTTON_TOOLTIP"},Cut:{icon:"scissors",command:"Cut",bundleKey:"CUT_BUTTON_TOOLTIP"},Paste:{icon:"paste",command:"Paste",bundleKey:"PASTE_BUTTON_TOOLTIP"},UnorderedList:{icon:"list",command:"InsertUnorderedList",bundleKey:"UNORDERED_LIST_BUTTON_TOOLTIP"},OrderedList:{icon:"numbered-text",command:"InsertOrderedList",bundleKey:"ORDERED_LIST_BUTTON_TOOLTIP"},Outdent:{icon:"outdent",command:"Outdent",bundleKey:"OUTDENT_BUTTON_TOOLTIP"},Indent:{icon:"indent",command:"Indent",bundleKey:"INDENT_BUTTON_TOOLTIP"},Undo:{icon:"undo",command:"Undo",bundleKey:"UNDO_BUTTON_TOOLTIP"},Redo:{icon:"redo",command:"Redo",bundleKey:"REDO_BUTTON_TOOLTIP"},TextAlign:{Left:{text:"Left",icon:"text-align-left",style:"alignleft"},Center:{text:"Center",icon:"text-align-center",style:"aligncenter"},Right:{text:"Right",icon:"text-align-right",style:"alignright"},Full:{text:"Full",icon:"text-align-justified",style:"alignjustify"},bundleKey:"TEXTALIGN_BUTTON_TOOLTIP"},FontFamily:{AndaleMono:{text:"Andale Mono",commandValue:'"andale mono",monospace'},Arial:{text:"Arial",commandValue:"arial, helvetica, sans-serif"},ArialBlack:{text:"Arial Black",commandValue:'"arial black", sans-serif'},BookAntiqua:{text:"Book Antiqua",commandValue:'"book antiqua", palatino, serif'},ComicSansMS:{text:"Comic Sans MS",commandValue:'"comic sans ms", sans-serif'},CourierNew:{text:"Courier New",commandValue:'"courier new", couriret, monospace'},Georgia:{text:"Georgia",commandValue:"georgia, palatino, serif"},Helvetica:{text:"Helvetica",commandValue:'helvetica, arial, sans-serif'},Impact:{text:"Impact",commandValue:"impact, sans-serif"},Symbol:{text:"Symbol",commandValue:'"symbol"'},Tahoma:{text:"Tahoma",commandValue:"tahoma, arial, helvetica, sans-serif"},Terminal:{text:"Terminal",commandValue:"terminal, monaco, monospace"},TimesNewRoman:{text:"Times New Roman",commandValue:'"times new roman", times, sans-serif'},TrebuchetMS:{text:"Trebuchet MS",commandValue:'"trebuchet ms", geneva, sans-serif'},Verdana:{text:"Verdana",commandValue:"verdana, geneva, sans-serif"},Webdings:{text:"Webdings",commandValue:'"webdings"'},Wingings:{text:"Wingings",commandValue:'wingings, "zapf dingbats"'}},FontSize:[8,10,12,14,18,24,36],TextColor:{title:"Text Color",icon:"text-color",command:"ForeColor",style:"color",defaultValue:"#000000",bundleKey:"TEXT_COLOR_BUTTON_TOOLTIP"},BackgroundColor:{title:"Background Color",icon:"color-fill",command:"HiliteColor",style:"background-color",defaultValue:"#ffffff",bundleKey:"BACKGROUND_COLOR_BUTTON_TOOLTIP"},InsertImage:{title:"Insert Image",icon:"picture",bundleKey:"IMAGE_BUTTON_TOOLTIP"},InsertLink:{title:"Insert Link",icon:"chain-link",bundleKey:"LINK_BUTTON_TOOLTIP"},Unlink:{icon:"broken-link",command:"unlink",bundleKey:"UNLINK_BUTTON_TOOLTIP"},InsertTable:{title:"Insert Table",icon:"table-view",bundleKey:"TABLE_BUTTON_TOOLTIP"}};sap.ui.richtexteditor.ButtonGroups={"font-style":["Bold","Italic","Underline","Strikethrough"],"text-align":["TextAlign"],"font":["FontFamily","FontSize","TextColor","BackgroundColor"],"structure":["UnorderedList","OrderedList","Outdent","Indent"],"link":["InsertLink","Unlink"],"insert":["InsertImage"],"undo":["Undo","Redo"],"clipboard":["Cut","Copy","Paste"],"custom":[]};var s=function(){sap.ui.require(["sap/m/MenuItem","sap/m/Button","sap/m/ToggleButton","sap/m/MenuButton","sap/m/Menu","sap/m/Select","sap/m/ToolbarSeparator","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/Dialog","sap/m/Label","sap/m/CheckBox","sap/m/Input","sap/ui/unified/ColorPicker","sap/m/HBox","sap/m/VBox","sap/m/Text","sap/m/StepInput"],function(m,B,t,M,o,S,T,O,c,d,L,e,i,f,h,v,g,j){sap.ui.richtexteditor.RichTextEditorHelper.bSapMLoaded=true;_.Button=B;_.ToggleButton=t;_.MenuButton=M;_.Menu=o;_.Select=S;_.ToolbarSeparator=T;_.OverflowToolbar=O;_.OverflowToolbarLayoutData=c;_.MenuItem=m;_.Dialog=d;_.Label=L;_.CheckBox=e;_.Input=i;_.ColorPicker=f;_.HBox=h;_.VBox=h;_.Text=g;_.StepInput=j;});};var _={};var a=function(c,S){if(_[c]){return new _[c](S);}};q.sap.setObject("sap.ui.richtexteditor.RichTextEditorHelper",{bSapMLoaded:false,createOverflowToolbar:function(i,c){return a("OverflowToolbar",{id:i,content:c});},createButton:function(c){c.type=sap.m.ButtonType.Transparent;return a("Button",c);},createMenuButton:function(i,I,f,c,t){return a("MenuButton",{layoutData:a("OverflowToolbarLayoutData",{priority:sap.m.OverflowToolbarPriority.NeverOverflow}),type:sap.m.ButtonType.Transparent,id:i,menu:a("Menu",{itemSelected:f,items:I}),icon:c,tooltip:t});},createMenuItem:function(i,t,I){return a("MenuItem",{id:i,icon:I,text:t});},createToggleButton:function(c){c.layoutData=a("OverflowToolbarLayoutData",{priority:sap.m.OverflowToolbarPriority.NeverOverflow});c.type=sap.m.ButtonType.Transparent;return a("ToggleButton",c);},createToolbarSeparator:function(){return a("ToolbarSeparator");},createSelect:function(c){return a("Select",c);},createInput:function(c){return a("Input",c);},createLabel:function(c){return a("Label",c);},createCheckBox:function(){return a("CheckBox",{});},createColorPicker:function(){return a("ColorPicker",{});},createDialog:function(c){return a("Dialog",c);},createText:function(c){return a("Text",c);},createHBox:function(c){return a("HBox",c);},createVBox:function(c){return a("VBox",c);},createStepInput:function(c){return a("StepInput",c);}});if(sap.ui.getCore().getLoadedLibraries()["sap.m"]){s();}else{var b=function(e){var E=e.getParameters();if(E.stereotype==="library"&&E.name==="sap.m"){q.sap.delayedCall(0,null,s);q.sap.delayedCall(0,sap.ui.getCore(),'detachLibraryChanged',[b]);}};sap.ui.getCore().attachLibraryChanged(b);}return sap.ui.richtexteditor;},false);
sap.ui.predefine('sap/ui/richtexteditor/RichTextEditor',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/ResizeHandler','./library','./ToolbarWrapper'],function(q,C,R,l,T){"use strict";var E={Initial:"Initial",Loading:"Loading",Initializing:"Initializing",Loaded:"Loaded",Ready:"Ready",Destroyed:"Destroyed"};
/**
	 * Constructor for a new RichTextEditor.
	 *
	 * The RichTextEditor uses a third party component, which might in some cases not be
	 * completely compatible with the way UI5's (re-)rendering mechanism works. If you keep hidden
	 * instances of the control (instances which are not visible in the DOM), you might run into
	 * problems with some browser versions. In this case please make sure you destroy the
	 * RichTextEditor instance instead of hiding it and create a new one when you show it again.
	 *
	 * @param {string} [sId] id for the new control, generated automatically if no id is given
	 * @param {object} [mSettings] initial settings for the new control
	 *
	 * @class
	 *
	 * The RichTextEditor-Control is used to enter formatted text.
	 *
	 * The <code>RichTextEditor</code> uses a third party component, which might in some cases not be
	 * completely compatible with the way UI5's (re-)rendering mechanism works. <strong>If you keep hidden
	 * instances of the control (instances which are not visible in the DOM), you might run into
	 * problems with some browser versions.</strong> In this case please make sure you destroy the
	 * <code>RichTextEditor</code> instance instead of hiding it and create a new one when you show it again.
	 *
	 * @extends sap.ui.core.Control
	 *
	 * @author SAP SE
	 *
	 * @constructor
	 * @public
	 * @disclaimer Since version 1.6.0.
	 * The RichTextEditor of SAPUI5 contains a third party component TinyMCE provided by Moxiecode Systems AB. The SAP license agreement covers the development of applications with RichTextEditor of SAPUI5 (as of May 2014).
	 * @alias sap.ui.richtexteditor.RichTextEditor
	 * @ui5-metamodel This control/element also will be described in the UI5 (legacy) designtime metamodel
	 */

var a=C.extend("sap.ui.richtexteditor.RichTextEditor",{metadata:{library:"sap.ui.richtexteditor",properties:{value:{type:"string",group:"Data",defaultValue:''},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editorType:{type:"string",group:"Misc",defaultValue:'TinyMCE'},editorLocation:{type:"string",group:"Misc",defaultValue:'js/tiny_mce/tiny_mce_src.js',deprecated:true},editable:{type:"boolean",group:"Misc",defaultValue:true},showGroupFontStyle:{type:"boolean",group:"Misc",defaultValue:true},showGroupTextAlign:{type:"boolean",group:"Misc",defaultValue:true},showGroupStructure:{type:"boolean",group:"Misc",defaultValue:true},showGroupFont:{type:"boolean",group:"Misc",defaultValue:false},showGroupClipboard:{type:"boolean",group:"Misc",defaultValue:true},showGroupInsert:{type:"boolean",group:"Misc",defaultValue:false},showGroupLink:{type:"boolean",group:"Misc",defaultValue:false},showGroupUndo:{type:"boolean",group:"Misc",defaultValue:false},wrapping:{type:"boolean",group:"Appearance",defaultValue:true},required:{type:"boolean",group:"Misc",defaultValue:false},sanitizeValue:{type:"boolean",group:"Misc",defaultValue:true},plugins:{type:"object[]",group:"Behavior",defaultValue:[]},useLegacyTheme:{type:"boolean",group:"Appearance",defaultValue:true},buttonGroups:{type:"object[]",group:"Behavior",defaultValue:[]},customToolbar:{type:"boolean",group:"Misc",defaultValue:false}},events:{change:{parameters:{newValue:{type:"string"}}},ready:{},readyRecurring:{},beforeEditorInit:{}},aggregations:{_toolbarWrapper:{type:"sap.ui.richtexteditor.IToolbar",multiple:false,visibility:"hidden",defaultValue:null},customButtons:{type:"sap.ui.core.Control",multiple:true,singularName:"customButton",defaultValue:null}}}});
a._lastId=0;a._iCountInstances=0;a.BUTTON_GROUPS=l.ButtonGroups;a.EDITORTYPE_TINYMCE=l.EditorType.TinyMCE;a.EDITORTYPE_TINYMCE4=l.EditorType.TinyMCE4;a.EDITORLOCATION_TINYMCE="js/tiny_mce/tiny_mce.js";a.EDITORLOCATION_TINYMCE4="js/tiny_mce4/tinymce.min.js";if(sap.ui.getCore().getConfiguration().getDebug()){a.EDITORLOCATION_TINYMCE="js/tiny_mce/tiny_mce_src.js";a.EDITORLOCATION_TINYMCE4="js/tiny_mce4/tinymce.js";}a.MAPPED_LANGUAGES_TINYMCE4={"sh":"sr","ji":"yi","in":"id","iw":"he","no":"nb"};a.SUPPORTED_LANGUAGES_TINYMCE4={"en":true,"ar":true,"ar_SA":true,"hy":true,"az":true,"eu":true,"be":true,"bn_BD":true,"bs":true,"bg_BG":true,"ca":true,"zh_CN":true,"zh_TW":true,"hr":true,"cs":true,"da":true,"dv":true,"nl":true,"en_CA":true,"en_GB":true,"et":true,"fo":true,"fi":true,"fr_FR":true,"gd":true,"gl":true,"ka_GE":true,"de":true,"de_AT":true,"el":true,"he_IL":true,"hi_IN":true,"hu_HU":true,"is_IS":true,"id":true,"it":true,"ja":true,"kk":true,"km_KH":true,"ko_KR":true,"ku":true,"ku_IQ":true,"lv":true,"lt":true,"lb":true,"ml":true,"ml_IN":true,"mn_MN":true,"nb_NO":true,"fa":true,"fa_IR":true,"pl":true,"pt_BR":true,"pt_PT":true,"ro":true,"ru":true,"ru@petr1708":true,"sr":true,"si_LK":true,"sk":true,"sl_SI":true,"es":true,"es_MX":true,"sv_SE":true,"tg":true,"ta":true,"ta_IN":true,"tt":true,"th_TH":true,"tr_TR":true,"ug":true,"uk":true,"uk_UA":true,"vi":true,"vi_VN":true,"cy":true};a.SUPPORTED_LANGUAGES_DEFAULT_REGIONS={"zh":"CN","fr":"FR","bn":"BD","bg":"BG","ka":"GE","he":"IL","hi":"IN","hu":"HU","is":"IS","km":"KH","ko":"KR","ku":"IQ","mn":"MN","nb":"NO","pt":"PT","si":"SI","sv":"SE","th":"TH","tr":"TR"};a.pLoadTinyMCE=null;
a.loadTinyMCE=function(L){if(L){var r=sap.ui.resource('sap.ui.richtexteditor',L),s=document.querySelector("#sapui5-tinyMCE"),b=s?s.getAttribute("src"):"";if(r!==b&&a._iCountInstances===1){delete window.tinymce;delete window.TinyMCE;a.pLoadTinyMCE=null;}if(!a.pLoadTinyMCE){a.pLoadTinyMCE=new Promise(function(f,c){q.sap.includeScript(r,"sapui5-tinyMCE",f,c);});}}return a.pLoadTinyMCE;};
a.prototype.init=function(){this._bEditorCreated=false;this._sTimerId=null;a._iCountInstances++;this.setButtonGroups([{name:"font-style",visible:true,row:0,priority:10,buttons:["bold","italic","underline","strikethrough"]},{name:"text-align",visible:true,row:0,priority:20,buttons:["justifyleft","justifycenter","justifyright","justifyfull"]},{name:"font",visible:false,row:0,priority:30,buttons:["fontselect","fontsizeselect","forecolor","backcolor"]},{name:"clipboard",visible:true,row:1,priority:10,buttons:["cut","copy","paste"]},{name:"structure",visible:true,row:1,priority:20,buttons:["bullist","numlist","outdent","indent"]},{name:"e-mail",visible:false,row:1,priority:30,buttons:[]},{name:"undo",visible:false,row:1,priority:40,buttons:["undo","redo"]},{name:"insert",visible:false,row:1,priority:50,buttons:["image","emotions"]},{name:"link",visible:false,row:1,priority:60,buttons:["link","unlink"]}]);this.setPlugins([{name:"lists"},{name:"emotions"},{name:"directionality"},{name:"inlinepopups"},{name:"tabfocus"},{name:"table"}]);this._textAreaId=this.getId()+"-textarea";this._iframeId=this._textAreaId+"_ifr";this._textAreaDom=document.createElement("textarea");this._textAreaDom.id=this._textAreaId;this._textAreaDom.style.height="100%";this._textAreaDom.style.width="100%";this._callEditorSpecific("init");};
a.prototype.onBeforeRendering=function(){this._customToolbarEnablement();if(!this._bCustomToolbarRequirementsFullfiled&&this.getCustomToolbar()){q.sap.log.warning("Cannot set custom toolbar - not all requirements are fulfilled.");}this._callEditorSpecific("onBeforeRendering");};
a.prototype.onAfterRendering=function(){this._callEditorSpecific("onAfterRendering");};
a.prototype.reinitialize=function(){clearTimeout(this._iReinitTimeout);this._iReinitTimeout=window.setTimeout(this._callEditorSpecific.bind(this,"reinitialize"),0);};
a.prototype.getNativeApi=function(){return this._callEditorSpecific("getNativeApi");};
a.prototype.exit=function(){q.sap.clearDelayedCall(this._reinitDelay);this._callEditorSpecific("exit");a._iCountInstances--;};
a.prototype.setValue=function(v){if(this.getSanitizeValue()){v=q.sap._sanitizeHTML(v);}if(v===this.getValue()){return this;}this.setProperty("value",v,true);v=this.getProperty("value");var m="setValue"+this.getEditorType();if(this[m]&&typeof this[m]==="function"){this[m].call(this,v);}else{this.reinitialize();}return this;};
a.prototype._callEditorSpecific=function(p){var m=p+this.getEditorType();if(this[m]&&typeof this[m]==="function"){return this[m].call(this);}else{return undefined;}};
a.prototype.setEditable=function(e){this.setProperty("editable",e,true);this.reinitialize();return this;};
a.prototype.setWrapping=function(w){this.setProperty("wrapping",w,true);this.reinitialize();return this;};
a.prototype.setRequired=function(r){this.setProperty("required",r,true);this.reinitialize();return this;};
a.prototype._setShowGroup=function(s,S){var c=this.getAggregation("_toolbarWrapper");this.setProperty(S.property,s,true);this.setButtonGroupVisibility(S.buttonGroup,s);if(!c){this.reinitialize();return this;}c.setShowGroup(S.buttonGroup,s);return this;};
a.prototype.setShowGroupFontStyle=function(s){return this._setShowGroup(s,{property:'showGroupFontStyle',buttonGroup:'font-style'});};
a.prototype.setShowGroupTextAlign=function(s){return this._setShowGroup(s,{property:'showGroupTextAlign',buttonGroup:'text-align'});};
a.prototype.setShowGroupStructure=function(s){return this._setShowGroup(s,{property:'showGroupStructure',buttonGroup:'structure'});};
a.prototype.setShowGroupFont=function(s){return this._setShowGroup(s,{property:'showGroupFont',buttonGroup:'font'});};
a.prototype.setShowGroupClipboard=function(s){return this._setShowGroup(s,{property:'showGroupClipboard',buttonGroup:'clipboard'});};
a.prototype.setShowGroupInsert=function(s){return this._setShowGroup(s,{property:'showGroupInsert',buttonGroup:'insert'});};
a.prototype.setShowGroupLink=function(s){return this._setShowGroup(s,{property:'showGroupLink',buttonGroup:'link'});};
a.prototype.setShowGroupUndo=function(s){return this._setShowGroup(s,{property:'showGroupUndo',buttonGroup:'undo'});};
a.prototype.addPlugin=function(p){if(typeof p==="string"){p={name:p};}var P=this.getProperty("plugins");P.push(p);this.setProperty("plugins",P);this.reinitialize();return this;};
a.prototype.removePlugin=function(p){var P=this.getProperty("plugins").slice(0);for(var i=0;i<P.length;++i){if(P[i].name===p){P.splice(i,1);--i;}}this.setProperty("plugins",P);this.reinitialize();return this;};
a.prototype.setUseLegacyTheme=function(u){var d=this.getDomRef();if(d){q(d).toggleClass("sapUiRTELegacyTheme",u);}return this.setProperty("useLegacyTheme",u,true);};
a.prototype.addButtonGroup=function(g){var G=this.getProperty("buttonGroups").slice(),c=this.getAggregation("_toolbarWrapper"),f=true;for(var i=0;i<G.length;++i){if(g==="string"&&G[i].name===g||G[i].name===g.name){return this;}}if(typeof g==="string"){f=false;g={name:this._createId("buttonGroup"),buttons:[g]};}if(g.visible===undefined){g.visible=true;}if(g.priority===undefined){g.priority=10;}if(g.row===undefined){g.row=0;}if(c){c.addButtonGroupToContent(g,f);}var b=this.getButtonGroups();b.push(g);this.setButtonGroups(b);return this;};
a.prototype.removeButtonGroup=function(g){var G=this.getProperty("buttonGroups").slice(0),c=this.getAggregation("_toolbarWrapper");for(var i=0;i<G.length;++i){if(G[i].name===g){G.splice(i,1);--i;c&&c.removeButtonGroup(g);}}this.setProperty("buttonGroups",G);this.reinitialize();return this;};
a.prototype.setButtonGroupVisibility=function(g,v){var b=this.getButtonGroups();for(var i=0,L=b.length;i<L;++i){if(b[i].name===g){b[i].visible=v;}}return this;};
a.prototype._createId=function(p){if(p===undefined){p="_rte";}return p+(a._lastId++);};
a.prototype.setEditorType=function(e){if(!this._bEditorCreated){this._callEditorSpecific("unload");this.setProperty("editorType",e);switch(e){case l.EditorType.TinyMCE:this.setEditorLocation(a.EDITORLOCATION_TINYMCE);this.removePlugin("emoticons");this.addPlugin("emotions");this.removePlugin("lists");this.addPlugin("inlinepopups");this.removeButtonGroup("text-align");this.removePlugin("image");this.removePlugin("link");this.removePlugin("textcolor");this.removePlugin("colorpicker");this.removePlugin("textpattern");this.removePlugin("powerpaste");this.addButtonGroup({name:"text-align",visible:true,row:0,priority:20,buttons:["justifyleft","justifycenter","justifyright","justifyfull"]});this.removeButtonGroup("insert");this.addButtonGroup({name:"insert",visible:false,row:1,priority:50,buttons:["image","emotions"]});break;case l.EditorType.TinyMCE4:this.setEditorLocation(a.EDITORLOCATION_TINYMCE4);this.removePlugin("emotions");this.addPlugin("emoticons");this.addPlugin("lists");this.removePlugin("inlinepopups");this.removeButtonGroup("text-align");this.addPlugin("image");this.addPlugin("link");this.addPlugin("textcolor");this.addPlugin("colorpicker");this.addPlugin("textpattern");this.addPlugin("powerpaste");this.addButtonGroup({name:"text-align",visible:true,row:0,priority:20,buttons:["alignleft","aligncenter","alignright","alignjustify"]});this.removeButtonGroup("insert");this.addButtonGroup({name:"insert",visible:false,row:1,priority:50,buttons:["image","emoticons"]});break;default:q.sap.log.error("editorType property set to an unknown editor type");}this._callEditorSpecific("init");}else{q.sap.log.error("editorType property cannot be set after the RichtextEditor has been rendered");}return this;};
a.prototype.setEditorLocation=function(e){if(!this._bEditorCreated){this.setProperty("editorLocation",e);}else{q.sap.log.error("editorLocation property cannot be set after the RichtextEditor has been rendered");}return this;};
a.prototype._createButtonRowsTinyMCE=function(b,g){b=b===undefined?",":b;g=g===undefined?"|":g;var B=this.getButtonGroups(),G=b+g+b,i,L,m,o={},c=[];for(i=0,L=B.length;i<L;++i){m=B[i];if(!o[m.priority]){o[m.priority]=[];}if(m.priority===undefined){m.priority=Number.MAX_VALUE;}o[m.priority].push(m);}for(var k in o){for(i=0,L=o[k].length;i<L;++i){m=o[k][i];var r=m.row||0;if(!m.visible||!m.buttons||m.buttons.length===0){continue;}if(!c[r]){c[r]="";}c[r]+=m.buttons.join(b)+G;}}for(i=0;i<c.length;++i){if(c[i]===null){continue;}else if(!c[i]){c.splice(i,1);c.push(null);continue;}if(c[i].substr(-3)===G){c[i]=c[i].substr(0,c[i].length-G.length);}if(c[i].substr(-1)===b){c[i]=c[i].substr(0,c[i].length-b.length);}if(c[i].length===0){c.splice(i,1);c.push(null);}}return c;};
a.prototype._createPluginsListTinyMCE=function(){var p=this.getPlugins(),P=[];for(var i=0,L=p.length;i<L;++i){P.push(p[i].name);}return P.join(",");};
a.prototype.tinyMCEReady=function(){var i=q.sap.domById(this._iframeId);return!!i;};
a.prototype.setValueTinyMCE=function(v){if(this._bEditorCreated){q.sap.byId(this._textAreaId).text(v);this.setContentTinyMCE();}else{this.setProperty("value",v,true);if(this.getDomRef()){q.sap.byId(this._textAreaId).val(v);}}};
a.prototype.onTinyMCEChange=function(c){var o=this.getValue(),n=c.getContent();if((o!==n)&&!this.bExiting){this.setProperty("value",n,true);this.fireChange({oldValue:o,newValue:n});}};
a.prototype._tinyMCEKeyboardHandler=function(e){var n,k=e['keyCode'];switch(k){case q.sap.KeyCodes.TAB:if(!this.$focusables.index(q(e.target))===0){var i=this.$focusables.size()-1;this.$focusables.get(i).focus();}break;case q.sap.KeyCodes.ARROW_LEFT:case q.sap.KeyCodes.ARROW_UP:n=this.$focusables.index(q(e.target))-1;if(n===0){n=this.$focusables.size()-2;}this.$focusables.get(n).focus();break;case q.sap.KeyCodes.ARROW_RIGHT:case q.sap.KeyCodes.ARROW_DOWN:n=this.$focusables.index(q(e.target))+1;if(n===this.$focusables.size()-1){n=1;}this.$focusables.get(n).focus();break;default:break;}};
a.prototype._getLanguageTinyMCE=function(){var L=new sap.ui.core.Locale(sap.ui.getCore().getConfiguration().getLanguage()),s=L.getLanguage(),r=L.getRegion(),m={"zh":"zh-"+(r?r.toLowerCase():"cn"),"sh":"sr","hi":"en"};s=m[s]?m[s]:s;return s;};
a.initTinyMCEStatic=function(){a.TinyMCE={};a.TinyMCEInitialized=true;};
a.prototype.initTinyMCE=function(){sap.ui.getCore().getEventBus().subscribe("sap.ui","__preserveContent",this._tinyMCEPreserveHandler,this);sap.ui.getCore().getEventBus().subscribe("sap.ui","__beforePopupClose",this._tinyMCEPreserveHandler,this);};
a.prototype.onBeforeRenderingTinyMCE=function(){a.loadTinyMCE(this.getEditorLocation()).then(function(){try{window.tinymce.execCommand('mceRemoveControl',false,this._textAreaId);}catch(e){}}.bind(this));};
a.prototype.onAfterRenderingTinyMCE=function(){a.loadTinyMCE().then(function(){this.getDomRef().appendChild(this._textAreaDom);this._textAreaDom.style.display="";this._textAreaDom.style.visibility="";this._textAreaDom.value=this.getValue();if(!this._bEditorCreated){this.initTinyMCEAfterFirstRendering();}else{this.setContentTinyMCE();if(window.tinymce){window.tinymce.execCommand('mceAddControl',false,this._textAreaId);}this.initWhenTinyMCEReady();}}.bind(this));};
a.prototype.initTinyMCEAfterFirstRendering=function(){var c=this.getAggregation("_toolbarWrapper");if(!a.TinyMCEInitialized){a.initTinyMCEStatic();}if(this.sTimerId){q.sap.clearDelayedCall(this.sTimerId);this.sTimerId=null;}if(!window.tinymce){this.sTimerId=q.sap.delayedCall(10,this,this.initTinyMCEAfterFirstRendering);return;}this._bEditorCreated=true;var b=this._createButtonRowsTinyMCE(),p=this._createPluginsListTinyMCE(),o={mode:"exact",directionality:(sap.ui.getCore().getConfiguration().getRTL()?"rtl":"ltr"),elements:this._textAreaId,theme:"advanced",language:this._getLanguageTinyMCE(),browser_spellcheck:true,convert_urls:false,plugins:p,theme_advanced_buttons1:b[0],theme_advanced_buttons2:b[1],theme_advanced_buttons3:b[2],theme_advanced_buttons4:b[3],theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"none",readonly:(this.getEditable()?0:1),nowrap:!this.getWrapping(),onchange_callback:function(d){var i=d.editorId.substr(0,d.editorId.lastIndexOf("-")),r=sap.ui.getCore().byId(i);if(r){r.onTinyMCEChange(d);}else{q.sap.log.error("RichtTextEditor change called for unknown instance: "+i);}}};if(this._bCustomToolbarRequirementsFullfiled&&c){o=c.modifyRTEToolbarConfig(o);}this.fireBeforeEditorInit({configuration:o});tinymce.init(o);this._bEditorCreated=true;this.setContentTinyMCE();this.initWhenTinyMCEReady();};
a.prototype._tinyMCEPreserveHandler=function(c,e,d){if((this.getDomRef()&&window.tinymce&&q(d.domNode).find(q.sap.byId(this._textAreaId)).length>0)||(q.sap.byId(this._textAreaId).length===0)){var o=this.getNativeApi();if(o&&o.getContainer()){var t=this,r=function(){try{window.tinymce.execCommand('mceRemoveControl',false,t._textAreaId,{skip_focus:true});}catch(b){}};try{this.setProperty("value",o.getContent(),true);}catch(b){q.sap.log.warning("TinyMCE was hidden before value could be read, changes might be lost.");}var p=q(d.domNode).control(0);if(p&&p.attachClosed){p.attachClosed(r);}else{r();}}}};
a.prototype.initWhenTinyMCEReady=function(){if(this.sTimerId){q.sap.clearDelayedCall(this.sTimerId);this.sTimerId=null;}if(!this.tinyMCEReady()){this.sTimerId=q.sap.delayedCall(10,this,"initWhenTinyMCEReady");return;}var i=this.getNativeApiTinyMCE(),I=q.sap.byId(this._iframeId),b=q(i.getBody()),t,s,c;if(this.getTooltip()&&this.getTooltip().length>0){s=q.sap.encodeHTML(this.getTooltip_Text());i.getBody().title=s;I.attr("title",s);}else{c=i.getLang("aria.rich_text_area")+" - "+i.getLang('advanced.help_shortcut');I.attr("title",c);}if(sap.ui.Device.browser.firefox){I.parent().height("100%");}if(sap.ui.Device.browser.internet_explorer){I.height(I.parent().height());var d=this.getDomRef();var r=function(){I.height(I.parent().height());};if(d.attachEvent){d.attachEvent("resize",r);}else if(d.addEventListener){d.addEventListener("resize",r);}}var e=this._textAreaId+"_tbl",$=q.sap.byId(e);this.$focusables=$.find(":sapFocusable");$.bind('keydown',q.proxy(this,"_tinyMCEKeyboardHandler"));q.sap.byId(this.getId()+"-textarea_fontselect").attr("title","Font");q.sap.byId(this.getId()+"-textarea_fontsizeselect").attr("title","Font Size");b.bind('focus',function(){if(!t){t=true;if(sap.ui.Device.browser.internet_explorer||sap.ui.Device.browser.edge){I.trigger('activate');}else{I.trigger('focus');}b.focus();t=false;}});this._registerWithPopupTinyMCE();window.tinymce.execCommand('mceFocus',false,this._textAreaId);this.fireReady();};
a.prototype.reinitializeTinyMCE=function(){if(this._bEditorCreated){this._bEditorCreated=false;this.rerender();this.setContentTinyMCE();}};
a.prototype.unloadTinyMCE=function(){if(window.tinymce){try{window.tinymce.execCommand('mceRemoveControl',false,this._textAreaId);}catch(e){}}sap.ui.getCore().getEventBus().unsubscribe("sap.ui","__preserveContent",this._tinyMCEPreserveHandler);sap.ui.getCore().getEventBus().unsubscribe("sap.ui","__beforePopupClose",this._tinyMCEPreserveHandler);};
a.prototype.exitTinyMCE=function(){this.bExiting=true;if(this._textAreaDom.parentNode){this._textAreaDom.parentNode.removeChild(this._textAreaDom);}this._textAreaDom=null;this.unloadTinyMCE();};
a.prototype.getNativeApiTinyMCE=function(){var e=null;if(window.tinymce&&window.tinymce.majorVersion=="3"&&this._textAreaId){e=window.tinymce.getInstanceById(this._textAreaId);}return e;};
a.prototype.setContentTinyMCE=function(){var b=this.getNativeApiTinyMCE(),v;if(b&&b.getContainer()){v=this.getValue();if(v!=null){b.setContent(v);b.undoManager.clear();b.undoManager.add();if(!this.getEditable()){q.each(b.getDoc().getElementsByTagName("a"),function(i,A){A.target="_blank";});}}}};
a.prototype._registerWithPopupTinyMCE=function(){var e=this.getNativeApi(),b=sap.ui.getCore().getEventBus(),p=this.$().closest("[data-sap-ui-popup]");setTimeout(function(){if(p.length===1){var s="sap.ui.core.Popup.addFocusableContent-"+p.attr("data-sap-ui-popup"),o={id:this._iframeId};b.publish("sap.ui",s,o);e.windowManager.onOpen.add(function(t,f,P){if(P){o={id:P.mce_window_id+"_ifr"};b.publish("sap.ui",s,o);}});}},0);};
a.prototype.initTinyMCE4=function(){this._oEditor=null;this._tinyMCE4Status=E.Initial;this._boundResizeEditorTinyMCE4=this._resizeEditorTinyMCE4.bind(this);this._bInitializationPending=false;this._lastRestHeight=0;sap.ui.getCore().getEventBus().subscribe("sap.ui","__preserveContent",this._tinyMCE4PreserveHandler,this);sap.ui.getCore().getEventBus().subscribe("sap.ui","__beforePopupClose",this._tinyMCE4PreserveHandler,this);};
a.prototype.exitTinyMCE4=function(){this._bUnloading=true;sap.ui.getCore().getEventBus().unsubscribe("sap.ui","__preserveContent",this._tinyMCE4PreserveHandler);sap.ui.getCore().getEventBus().unsubscribe("sap.ui","__beforePopupClose",this._tinyMCE4PreserveHandler);R.deregister(this._resizeHandlerId);this._resizeHandlerId=null;this._removeEditorTinyMCE4();};
a.prototype._removeEditorTinyMCE4=function(){switch(this._tinyMCE4Status){case E.Initial:case E.Loading:case E.Loaded:break;case E.Initializing:this._pTinyMCE4Initialized.then(this._removeEditorTinyMCE4.bind(this,this._oEditor));break;case E.Ready:this._oEditor.remove();this._tinyMCE4Status=E.Destroyed;this._boundResizeEditorTinyMCE4=null;this._oEditor=null;break;case E.Destroyed:break;default:q.sap.log.error("Unknown TinyMCE4 status: "+this._tinyMCE4Status);break;}};
a.prototype.onBeforeRenderingTinyMCE4=function(){if(!window.tinymce||window.tinymce.majorVersion!="4"){this._tinyMCE4Status=E.Loading;this._pTinyMCE4Loaded=a.loadTinyMCE(this.getEditorLocation()).then(function(){this._tinyMCE4Status=E.Loaded;}.bind(this));}else{this._pTinyMCE4Loaded=Promise.resolve();this._tinyMCE4Status=E.Loaded;}};
a.prototype.onAfterRenderingTinyMCE4=function(){var d=this.getDomRef();if(d&&d.parentNode&&d.parentNode.getAttribute("data-sap-ui-preserve")){d.removeAttribute("data-sap-ui-preserve");}if(!window.tinymce){this._pTinyMCE4Loaded.then(this.onAfterRenderingTinyMCE4.bind(this));}else if(window.tinymce.majorVersion!="4"){this._pTinyMCE4Loaded.then(this.onAfterRenderingTinyMCE4.bind(this));}else if(!d){}else{var p=sap.ui.core.RenderManager.findPreservedContent(this.getId());switch(this._tinyMCE4Status){case E.Initializing:if(p.size()>0){this.$().replaceWith(p);}else{d.appendChild(this._textAreaDom);}break;case E.Loaded:case E.Loading:p.remove();this.getDomRef().appendChild(this._textAreaDom);this.reinitializeTinyMCE4();break;case E.Ready:if(p.size()>0){this.$().replaceWith(p);}else{d.appendChild(this._textAreaDom);}this.reinitializeTinyMCE4();break;default:q.sap.log.error("Unknown TinyMCE4 status: "+this._tinyMCE4Status);break;}}};
a.prototype.reinitializeTinyMCE4=function(){if(this._bInitializationPending||this._bUnloading){return;}var r=function(){if(this._oEditor){this._oEditor.remove();}this._initializeTinyMCE4();}.bind(this);switch(this._tinyMCE4Status){case E.Initial:break;case E.Loading:this._bInitializationPending=true;this._pTinyMCE4Loaded.then(r);break;case E.Initializing:this._bInitializationPending=true;this._pTinyMCE4Initialized.then(r);break;case E.Loaded:case E.Ready:this._bInitializationPending=true;setTimeout(function(){r();},0);break;default:q.sap.log.error("Unknown TinyMCE4 status: "+this._tinyMCE4Status);break;}};
a.prototype.getNativeApiTinyMCE4=function(){return this._oEditor;};
a.prototype.setValueTinyMCE4=function(v){switch(this._tinyMCE4Status){case E.Initial:case E.Initializing:case E.Loading:break;case E.Ready:this._oEditor.setContent(v);this._oEditor.undoManager.clear();this._oEditor.undoManager.add();if(!this.getEditable()){q.each(this._oEditor.getDoc().getElementsByTagName("a"),function(i,A){A.target="_blank";});}break;default:q.sap.log.error("Unknown TinyMCE4 status: "+this._tinyMCE4Status);break;}};
a.prototype._initializeTinyMCE4=function(){this._pTinyMCE4Initialized=new Promise(function(r,f){this._bInitializationPending=false;this._tinyMCE4Status=E.Initializing;this._textAreaDom.value=this._patchTinyMCE4Value(this.getValue());window.tinymce.init(this._createConfigTinyMCE4(function(){this._tinyMCE4Status=E.Ready;setTimeout(function(){if(!this._bInitializationPending){this._onAfterReadyTinyMCE4();}r();}.bind(this),0);}.bind(this)));}.bind(this));};
a.prototype._patchTinyMCE4Value=function(v){if(v.indexOf("<!")===0){v="&#8203;"+v;}return v;};
a.prototype._onAfterReadyTinyMCE4=function(){if(this._bUnloading){return;}this._oEditor.on("change",function(c){this.onTinyMCEChange(this._oEditor);}.bind(this));var e=q(this._oEditor.getContainer());e.bind('keydown',q.proxy(this,this._tinyMCEKeyboardHandler));var $=q.sap.byId(this._iframeId),b=q(this._oEditor.getBody()),t=false;b.bind('focus',function(){if(!t){t=true;if(sap.ui.Device.browser.internet_explorer||sap.ui.Device.browser.edge){$.trigger('activate');}else{$.trigger('focus');}b.focus();t=false;}});if(this.getTooltip()&&this.getTooltip().length>0){var s=this.getTooltip_Text();this._oEditor.getBody().setAttribute("title",s);$.attr("title",s);}this._registerWithPopupTinyMCE4();if(!this._resizeHandlerId){this._resizeHandlerId=R.register(this,this._boundResizeEditorTinyMCE4);}var r=this._resizeEditorTinyMCE4.bind(this);var o=this._oEditor.getDoc();if(o.readyState=="complete"){r();}else{o.addEventListener("readystatechange",function(){if(o.readyState=="complete"){r();}});}this.fireReadyTinyMCE4();};
a.prototype.fireReadyTinyMCE4=function(){switch(this._tinyMCE4Status){case E.Initial:case E.Loading:case E.Loaded:case E.Initializing:break;case E.Ready:if(!this._bInitializationPending){if(!this._readyFired){this._readyFired=true;this.fireReady.apply(this,arguments);}this.fireReadyRecurring.apply(this,arguments);}break;default:q.sap.log.error("Unknown TinyMCE4 status: "+this._tinyMCE4Status);break;}};
a.prototype._createConfigTinyMCE4=function(o){var c=this.getAggregation("_toolbarWrapper");var b=this._createButtonRowsTinyMCE(" ","|");if(b.length===0){b=false;}var p=this._createPluginsListTinyMCE();var d={directionality:(sap.ui.getCore().getConfiguration().getRTL()?"rtl":"ltr"),content_css:sap.ui.resource('sap.ui.richtexteditor',"themes/base/content/TinyMCE4Content.css"),selector:"#"+this._textAreaId,theme:"modern",menubar:false,language:this._getLanguageTinyMCE4(),browser_spellcheck:true,convert_urls:false,plugins:p,toolbar_items_size:'small',toolbar:b,statusbar:false,image_advtab:true,readonly:(this.getEditable()?0:1),nowrap:!this.getWrapping(),init_instance_callback:function(e){this._oEditor=e;o();}.bind(this)};if(this._bCustomToolbarRequirementsFullfiled&&c){d=c.modifyRTEToolbarConfig(d);}this.fireBeforeEditorInit({configuration:d});return d;};
a.prototype._getLanguageTinyMCE4=function(){var L=new sap.ui.core.Locale(sap.ui.getCore().getConfiguration().getLanguage()),s=L.getLanguage(),r=L.getRegion(),b;s=a.MAPPED_LANGUAGES_TINYMCE4[s]||s;if(!r){r=a.SUPPORTED_LANGUAGES_DEFAULT_REGIONS[s];}b=r?s+"_"+r.toUpperCase():s;if(!a.SUPPORTED_LANGUAGES_TINYMCE4[b]){b=s;}if(!a.SUPPORTED_LANGUAGES_TINYMCE4[b]){b="en";}return b;};
a.prototype._resizeEditorTinyMCE4=function(){if(this._tinyMCE4Status!==E.Ready){return;}var e=this._oEditor.getContentAreaContainer(),f=this.getDomRef().offsetHeight,c=this._oEditor.getContainer().offsetHeight,i=e.offsetHeight,b,r,d;b=this.getAggregation("_toolbarWrapper")?this.getAggregation("_toolbarWrapper").getAggregation("_toolbar").getDomRef().offsetHeight:"0";r=f-(c-i)-b;d=Math.abs(this._lastRestHeight-r);if(d==0||d>5){try{this._oEditor.theme.resizeTo(undefined,r-2);}catch(g){}}this._lastRestHeight=r;};
a.prototype._registerWithPopupTinyMCE4=function(){var b=sap.ui.getCore().getEventBus(),p=this.$().closest("[data-sap-ui-popup]");setTimeout(function(){if(p.length===1){var P=p.attr("data-sap-ui-popup"),o={id:this._iframeId};b.publish("sap.ui","sap.ui.core.Popup.addFocusableContent-"+P,o);if(this._oEditor){this._oEditor.on('OpenWindow',function(e){var o={id:e.win._id};b.publish("sap.ui","sap.ui.core.Popup.addFocusableContent-"+P,o);});this._oEditor.on('CloseWindow',function(e){var o={id:e.win._id};b.publish("sap.ui","sap.ui.core.Popup.removeFocusableContent-"+P,o);});}}}.bind(this),0);};
a.prototype._tinyMCE4PreserveHandler=function(c,e,d){if((this.getDomRef()&&window.tinymce&&q(d.domNode).find(q.sap.byId(this._textAreaId)).length>0)||(q.sap.byId(this._textAreaId).length===0)){if(this._oEditor){try{this._oEditor.save();var s=this._oEditor.getContent();this.setProperty("value",s,true);}catch(b){q.sap.log.warning("TinyMCE was hidden before value could be read, changes might be lost.");}this._oEditor.hide();this._removeEditorTinyMCE4(this._oEditor);}}};
a.prototype._checkCustomToolbarRequirements=function(){var r=this.getCustomToolbar()&&this.getEditorType()===l.EditorType.TinyMCE4&&l.RichTextEditorHelper.bSapMLoaded;this.$().toggleClass("sapUiRTEWithCustomToolbar",r);return r;};
a.prototype._customToolbarEnablement=function(){var c,t=this.getAggregation("_toolbarWrapper");this._bCustomToolbarRequirementsFullfiled=this._checkCustomToolbarRequirements();if(this._bCustomToolbarRequirementsFullfiled&&!t){c=this.getAggregation("customButtons");this.removeAllAggregation("customButtons");t=new T({editor:this});this.setAggregation("_toolbarWrapper",t);if(c&&c.length){q.sap.delayedCall(0,this,function(){c.forEach(function(b){t.modifyToolbarContent("add",b);});});}}else if(!this._bCustomToolbarRequirementsFullfiled&&t){c=t.modifyToolbarContent("removeAll");if(c&&c.length){c.forEach(function(b){this.addAggregation("customButtons",b);},this);}this.destroyAggregation("_toolbarWrapper");}};
["add","destroy","get","indexOf","insert","removeAll","remove"].forEach(function(m){var M=m+"CustomButton"+(["destroy","get","removeAll"].indexOf(m)>-1?"s":"");a.prototype[M]=function(){var r=null,i=arguments[0],t=this.getAggregation("_toolbarWrapper");if(typeof i==="object"&&i.getMetadata().getName()!=="sap.m.Button"){q.sap.log.error("Only sap.m.Button is allowed as aggregation.");return;}if(t&&t.modifyToolbarContent){r=t.modifyToolbarContent.bind(t,m).apply(t,arguments);}else{r=this[m+"Aggregation"].bind(this,"customButtons").apply(this,arguments);}return r;};});return a;},true);
jQuery.sap.registerPreloadedModules({
"name":"sap/ui/richtexteditor/library-preload",
"version":"2.0",
"modules":{
	"sap/ui/richtexteditor/manifest.json":'{\n  "_version": "1.2.0",\n  "sap.app": {\n    "_version": "1.2.0",\n    "id": "sap.ui.richtexteditor",\n    "type": "library",\n    "embeds": [],\n    "applicationVersion": {\n      "version": "1.50.6"\n    },\n    "title": "A rich text editor (RTE) control.",\n    "description": "A rich text editor (RTE) control. Requires installation of an additional rich text editor library.",\n    "ach": "CA-UI5-CTR",\n    "resources": "resources.json",\n    "offline": true\n  },\n  "sap.ui": {\n    "_version": "1.1.0",\n    "technology": "UI5",\n    "supportedThemes": [\n      "base",\n      "sap_belize",\n      "sap_belize_plus",\n      "sap_bluecrystal",\n      "sap_hcb",\n      "sap_ux"\n    ]\n  },\n  "sap.ui5": {\n    "_version": "1.1.0",\n    "dependencies": {\n      "minUI5Version": "1.50",\n      "libs": {\n        "sap.ui.core": {\n          "minVersion": "1.50.6"\n        }\n      }\n    }\n  }\n}'
}});
//# sourceMappingURL=library-preload.js.map
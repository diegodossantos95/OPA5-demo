(function(){var e=tinymce.each;tinymce.create('tinymce.plugins.AdvListPlugin',{init:function(a,u){var t=this;t.editor=a;function b(s){var f=[];e(s.split(/,/),function(c){f.push({title:'advlist.'+(c=='default'?'def':c.replace(/-/g,'_')),styles:{listStyleType:c=='default'?'':c}});});return f;};t.numlist=a.getParam("advlist_number_styles")||b("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");t.bullist=a.getParam("advlist_bullet_styles")||b("default,circle,disc,square");if(tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent))t.isIE7=true;},createControl:function(n,c){var t=this,b,f,a=t.editor;if(n=='numlist'||n=='bullist'){if(t[n][0].title=='advlist.def')f=t[n][0];function h(g,f){var s=true;e(f.styles,function(v,n){if(a.dom.getStyle(g,n)!=v){s=false;return false;}});return s;};function d(){var l,g=a.dom,s=a.selection;l=g.getParent(s.getNode(),'ol,ul');if(!l||l.nodeName==(n=='bullist'?'OL':'UL')||h(l,f))a.execCommand(n=='bullist'?'InsertUnorderedList':'InsertOrderedList');if(f){l=g.getParent(s.getNode(),'ol,ul');if(l){g.setStyles(l,f.styles);l.removeAttribute('data-mce-style');}}a.focus();};b=c.createSplitButton(n,{title:'advanced.'+n+'_desc','class':'mce_'+n,onclick:function(){d();}});b.onRenderMenu.add(function(b,m){m.onHideMenu.add(function(){if(t.bookmark){a.selection.moveToBookmark(t.bookmark);t.bookmark=0;}});m.onShowMenu.add(function(){var g=a.dom,l=g.getParent(a.selection.getNode(),'ol,ul'),i;if(l||f){i=t[n];e(m.items,function(j){var s=true;j.setSelected(0);if(l&&!j.isDisabled()){e(i,function(k){if(k.id==j.id){if(!h(l,k)){s=false;return false;}}});if(s)j.setSelected(1);}});if(!l)m.items[f.id].setSelected(1);}a.focus();if(tinymce.isIE){t.bookmark=a.selection.getBookmark(1);}});m.add({id:a.dom.uniqueId(),title:'advlist.types','class':'mceMenuItemTitle',titleItem:true}).setDisabled(1);e(t[n],function(i){if(t.isIE7&&i.styles.listStyleType=='lower-greek')return;i.id=a.dom.uniqueId();m.add({id:i.id,title:i.title,onclick:function(){f=i;d();}});});});return b;}},getInfo:function(){return{longname:'Advanced lists',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('advlist',tinymce.plugins.AdvListPlugin);})();

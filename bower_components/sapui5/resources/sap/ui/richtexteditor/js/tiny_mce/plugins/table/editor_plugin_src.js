(function(t){var a=t.each;function b(r,p){var d=p.ownerDocument,c=d.createRange(),e;c.setStartBefore(p);c.setEnd(r.endContainer,r.endOffset);e=d.createElement('body');e.appendChild(c.cloneContents());return e.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,'-').replace(/<[^>]+>/g,'').length===0;}function g(c,n){return parseInt(c.getAttribute(n)||1,10);}function T(d,e,s){var f,h,j,k;function l(c,i){c=c.cloneNode(i);c.removeAttribute('id');return c;}function m(){var c=0;f=[];a(['thead','tbody','tfoot'],function(i){var r=e.select('> '+i+' tr',d);a(r,function(N,y){y+=c;a(e.select('> td, > th',N),function(O,x){var P,Q,R,S;if(f[y]){while(f[y][x]){x++;}}R=g(O,'rowspan');S=g(O,'colspan');for(Q=y;Q<y+R;Q++){if(!f[Q]){f[Q]=[];}for(P=x;P<x+S;P++){f[Q][P]={part:i,real:Q==y&&P==x,elm:O,rowspan:R,colspan:S};}}});});c+=r.length;});}function n(x,y){var r;r=f[y];if(r){return r[x];}}function o(c,i,r){if(c){r=parseInt(r,10);if(r===1){c.removeAttribute(i,1);}else{c.setAttribute(i,r,1);}}}function p(c){return c&&(e.hasClass(c.elm,'mceSelected')||c==k);}function q(){var r=[];a(d.rows,function(c){a(c.cells,function(i){if(e.hasClass(i,'mceSelected')||i==k.elm){r.push(c);return false;}});});return r;}function u(){var r=e.createRng();r.setStartAfter(d);r.setEndAfter(d);s.setRng(r);e.remove(d);}function v(c){var i;t.walk(c,function(r){var x;if(r.nodeType==3){a(e.getParents(r.parentNode,null,c).reverse(),function(r){r=l(r,false);if(!i){i=x=r;}else if(x){x.appendChild(r);}x=r;});if(x){x.innerHTML=t.isIE&&!t.isIE11?'&nbsp;':'<br data-mce-bogus="1" />';}return false;}},'childNodes');c=l(c,false);o(c,'rowSpan',1);o(c,'colSpan',1);if(i){c.appendChild(i);}else{if(!t.isIE||t.isIE11){c.innerHTML='<br data-mce-bogus="1" />';}}return c;}function w(){var r=e.createRng(),c;a(e.select('tr',d),function(i){if(i.cells.length===0){e.remove(i);}});if(e.select('tr',d).length===0){r.setStartAfter(d);r.setEndAfter(d);s.setRng(r);e.remove(d);return;}a(e.select('thead,tbody,tfoot',d),function(i){if(i.rows.length===0){e.remove(i);}});m();c=f[Math.min(f.length-1,h.y)];if(c){s.select(c[Math.min(c.length-1,h.x)].elm,true);s.collapse(true);}}function z(x,y,i,N){var O,P,r,c,Q;O=f[y][x].elm.parentNode;for(r=1;r<=i;r++){O=e.getNext(O,'tr');if(O){for(P=x;P>=0;P--){Q=f[y+r][P].elm;if(Q.parentNode==O){for(c=1;c<=N;c++){e.insertAfter(v(Q),Q);}break;}}if(P==-1){for(c=1;c<=N;c++){O.insertBefore(v(O.cells[0]),O.cells[0]);}}}}}function A(){a(f,function(r,y){a(r,function(c,x){var N,O,i;if(p(c)){c=c.elm;N=g(c,'colspan');O=g(c,'rowspan');if(N>1||O>1){o(c,'rowSpan',1);o(c,'colSpan',1);for(i=0;i<N-1;i++){e.insertAfter(v(c),c);}z(x,y,O-1,N);}}});});}function B(c,i,r){var N,O,P,Q,x,y,R,S,U,V,W;if(c){W=J(c);N=W.x;O=W.y;P=N+(i-1);Q=O+(r-1);}else{h=j=null;a(f,function(X,y){a(X,function(c,x){if(p(c)){if(!h){h={x:x,y:y};}j={x:x,y:y};}});});N=h.x;O=h.y;P=j.x;Q=j.y;}R=n(N,O);S=n(P,Q);if(R&&S&&R.part==S.part){A();m();R=n(N,O).elm;o(R,'colSpan',(P-N)+1);o(R,'rowSpan',(Q-O)+1);for(y=O;y<=Q;y++){for(x=N;x<=P;x++){if(!f[y]||!f[y][x]){continue;}c=f[y][x].elm;if(c!=R){U=t.grep(c.childNodes);a(U,function(X){R.appendChild(X);});if(U.length){U=t.grep(R.childNodes);V=0;a(U,function(X){if(X.nodeName=='BR'&&e.getAttrib(X,'data-mce-bogus')&&V++<U.length-1){R.removeChild(X);}});}e.remove(c);}}}w();}}function C(c){var i,r,N,x,O,P,Q,R,S;a(f,function(U,y){a(U,function(r){if(p(r)){r=r.elm;O=r.parentNode;P=l(O,false);i=y;if(c){return false;}}});if(c){return!i;}});for(x=0;x<f[0].length;x++){if(!f[i][x]){continue;}r=f[i][x].elm;if(r!=N){if(!c){S=g(r,'rowspan');if(S>1){o(r,'rowSpan',S+1);continue;}}else{if(i>0&&f[i-1][x]){R=f[i-1][x].elm;S=g(R,'rowSpan');if(S>1){o(R,'rowSpan',S+1);continue;}}}Q=v(r);o(Q,'colSpan',r.colSpan);P.appendChild(Q);N=r;}}if(P.hasChildNodes()){if(!c){e.insertAfter(P,O);}else{O.parentNode.insertBefore(P,O);}}}function D(c){var i,r;a(f,function(y){a(y,function(N,x){if(p(N)){i=x;if(c){return false;}}});if(c){return!i;}});a(f,function(x,y){var N,O,P;if(!x[i]){return;}N=x[i].elm;if(N!=r){P=g(N,'colspan');O=g(N,'rowspan');if(P==1){if(!c){e.insertAfter(v(N),N);z(i,y,O-1,P);}else{N.parentNode.insertBefore(v(N),N);z(i,y,O-1,P);}}else{o(N,'colSpan',N.colSpan+1);}r=N;}});}function E(){var c=[];a(f,function(r){a(r,function(i,x){if(p(i)&&t.inArray(c,x)===-1){a(f,function(r){var i=r[x].elm,y;y=g(i,'colSpan');if(y>1){o(i,'colSpan',y-1);}else{e.remove(i);}});c.push(x);}});});w();}function F(){var r;function c(i){var x,y;a(i.cells,function(N){var O=g(N,'rowSpan');if(O>1){o(N,'rowSpan',O-1);x=J(N);z(x.x,x.y,1,1);}});x=J(i.cells[0]);a(f[x.y],function(N){var O;N=N.elm;if(N!=y){O=g(N,'rowSpan');if(O<=1){e.remove(N);}else{o(N,'rowSpan',O-1);}y=N;}});}r=q();a(r.reverse(),function(i){c(i);});w();}function G(){var r=q();e.remove(r);w();return r;}function H(){var r=q();a(r,function(c,i){r[i]=l(c,true);});return r;}function I(r,c){if(!r){return;}var x=q(),y=x[c?0:x.length-1],N=y.cells.length;a(f,function(i){var O;N=0;a(i,function(P){if(P.real){N+=P.colspan;}if(P.elm.parentNode==y){O=1;}});if(O){return false;}});if(!c){r.reverse();}a(r,function(O){var P=O.cells.length,Q,i;for(i=0;i<P;i++){Q=O.cells[i];o(Q,'colSpan',1);o(Q,'rowSpan',1);}for(i=P;i<N;i++){O.appendChild(v(O.cells[P-1]));}for(i=N;i<P;i++){e.remove(O.cells[i]);}if(c){y.parentNode.insertBefore(O,y);}else{e.insertAfter(O,y);}});e.removeClass(e.select('td.mceSelected,th.mceSelected'),'mceSelected');}function J(c){var i;a(f,function(r,y){a(r,function(N,x){if(N.elm==c){i={x:x,y:y};return false;}});return!i;});return i;}function K(c){h=J(c);}function L(){var c,i;c=i=0;a(f,function(r,y){a(r,function(N,x){var O,P;if(p(N)){N=f[y][x];if(x>c){c=x;}if(y>i){i=y;}if(N.real){O=N.colspan-1;P=N.rowspan-1;if(O){if(x+O>c){c=x+O;}}if(P){if(y+P>i){i=y+P;}}}}});});return{x:c,y:i};}function M(c){var i,r,N,O,P,Q,R,S,y,x;j=J(c);if(h&&j){i=Math.min(h.x,j.x);r=Math.min(h.y,j.y);N=Math.max(h.x,j.x);O=Math.max(h.y,j.y);P=N;Q=O;for(y=r;y<=Q;y++){c=f[y][i];if(!c.real){if(i-(c.colspan-1)<i){i-=c.colspan-1;}}}for(x=i;x<=P;x++){c=f[r][x];if(!c.real){if(r-(c.rowspan-1)<r){r-=c.rowspan-1;}}}for(y=r;y<=O;y++){for(x=i;x<=N;x++){c=f[y][x];if(c.real){R=c.colspan-1;S=c.rowspan-1;if(R){if(x+R>P){P=x+R;}}if(S){if(y+S>Q){Q=y+S;}}}}}e.removeClass(e.select('td.mceSelected,th.mceSelected'),'mceSelected');for(y=r;y<=Q;y++){for(x=i;x<=P;x++){if(f[y][x]){e.addClass(f[y][x].elm,'mceSelected');}}}}}m();k=e.getParent(s.getStart(),'th,td');if(k){h=J(k);j=L();k=n(h.x,h.y);}t.extend(this,{deleteTable:u,split:A,merge:B,insertRow:C,insertCol:D,deleteCols:E,deleteRows:F,cutRows:G,copyRows:H,pasteRows:I,getPos:J,setStartCell:K,setEndCell:M});}t.create('tinymce.plugins.TablePlugin',{init:function(d,u){var w,f,h=true;function j(n){var s=d.selection,c=d.dom.getParent(n||s.getNode(),'table');if(c){return new T(c,d.dom,s);}}function k(){d.getBody().style.webkitUserSelect='';if(h){d.dom.removeClass(d.dom.select('td.mceSelected,th.mceSelected'),'mceSelected');h=false;}}a([['table','table.desc','mceInsertTable',true],['delete_table','table.del','mceTableDelete'],['delete_col','table.delete_col_desc','mceTableDeleteCol'],['delete_row','table.delete_row_desc','mceTableDeleteRow'],['col_after','table.col_after_desc','mceTableInsertColAfter'],['col_before','table.col_before_desc','mceTableInsertColBefore'],['row_after','table.row_after_desc','mceTableInsertRowAfter'],['row_before','table.row_before_desc','mceTableInsertRowBefore'],['row_props','table.row_desc','mceTableRowProps',true],['cell_props','table.cell_desc','mceTableCellProps',true],['split_cells','table.split_cells_desc','mceTableSplitCells',true],['merge_cells','table.merge_cells_desc','mceTableMergeCells',true]],function(c){d.addButton(c[0],{title:c[1],cmd:c[2],ui:c[3]});});if(!t.isIE){d.onClick.add(function(d,e){e=e.target;if(e.nodeName==='TABLE'){d.selection.select(e);d.nodeChanged();}});}d.onPreProcess.add(function(d,c){var n,i,e,l=d.dom,v;n=l.select('table',c.node);i=n.length;while(i--){e=n[i];l.setAttrib(e,'data-mce-style','');if((v=l.getAttrib(e,'width'))){l.setStyle(e,'width',v);l.setAttrib(e,'width','');}if((v=l.getAttrib(e,'height'))){l.setStyle(e,'height',v);l.setAttrib(e,'height','');}}});d.onNodeChange.add(function(d,c,n){var p;n=d.selection.getStart();p=d.dom.getParent(n,'td,th,caption');c.setActive('table',n.nodeName==='TABLE'||!!p);if(p&&p.nodeName==='CAPTION'){p=0;}c.setDisabled('delete_table',!p);c.setDisabled('delete_col',!p);c.setDisabled('delete_table',!p);c.setDisabled('delete_row',!p);c.setDisabled('col_after',!p);c.setDisabled('col_before',!p);c.setDisabled('row_after',!p);c.setDisabled('row_before',!p);c.setDisabled('row_props',!p);c.setDisabled('cell_props',!p);c.setDisabled('split_cells',!p);c.setDisabled('merge_cells',!p);});d.onInit.add(function(d){var s,l,p=d.dom,q;w=d.windowManager;d.onMouseDown.add(function(d,e){if(e.button!=2){k();l=p.getParent(e.target,'td,th');s=p.getParent(l,'table');}});p.bind(d.getDoc(),'mouseover',function(e){var c,i,m=e.target;if(l&&(q||m!=l)&&(m.nodeName=='TD'||m.nodeName=='TH')){i=p.getParent(m,'table');if(i==s){if(!q){q=j(i);q.setStartCell(l);d.getBody().style.webkitUserSelect='none';}q.setEndCell(m);h=true;}c=d.selection.getSel();try{if(c.removeAllRanges){c.removeAllRanges();}else{c.empty();}}catch(n){}e.preventDefault();}});d.onMouseUp.add(function(d){var r,c=d.selection,e,i,n,m;function o(n,A){var i=new t.dom.TreeWalker(n,n);do{if(n.nodeType==3&&t.trim(n.nodeValue).length!==0){if(A){r.setStart(n,0);}else{r.setEnd(n,n.nodeValue.length);}return;}if(n.nodeName=='BR'){if(A){r.setStartBefore(n);}else{r.setEndBefore(n);}return;}n=(A?i.next():i.prev());}while(n);}if(l){if(q){d.getBody().style.webkitUserSelect='';}e=p.select('td.mceSelected,th.mceSelected');if(e.length>0){r=p.createRng();n=e[0];r.setStartBefore(n);r.setEndAfter(n);o(n,1);i=new t.dom.TreeWalker(n,p.getParent(e[0],'table'));do{if(n.nodeName=='TD'||n.nodeName=='TH'){if(!p.hasClass(n,'mceSelected')){break;}m=n;}n=i.next();}while(n);o(m);c.setRng(r);}d.nodeChanged();l=q=s=null;}});d.onKeyUp.add(function(){k();});d.onKeyDown.add(function(d){x(d);});d.onMouseDown.add(function(d,e){if(e.button!=2){x(d);}});function v(d,r,n,c){var e=3,i=d.dom.getParent(r.startContainer,'TABLE'),m,o,A;if(i){m=i.parentNode;}o=r.startContainer.nodeType==e&&r.startOffset===0&&r.endOffset===0&&c&&(n.nodeName==="TR"||n===m);A=(n.nodeName==="TD"||n.nodeName==="TH")&&!c;return o||A;}function x(d){if(!t.isWebKit){return;}var r=d.selection.getRng();var n=d.selection.getNode();var c=d.dom.getParent(r.startContainer,'TD,TH');if(!v(d,r,n,c)){return;}if(!c){c=n;}var e=c.lastChild;while(e.lastChild){e=e.lastChild;}r.setEnd(e,e.nodeValue.length);d.selection.setRng(r);}d.plugins.table.fixTableCellSelection=x;if(d&&d.plugins.contextmenu){d.plugins.contextmenu.onContextMenu.add(function(c,m,e){var i,n=d.selection,o=n.getNode()||d.getBody();if(d.dom.getParent(e,'td')||d.dom.getParent(e,'th')||d.dom.select('td.mceSelected,th.mceSelected').length){m.removeAll();if(o.nodeName=='A'&&!d.dom.getAttrib(o,'name')){m.add({title:'advanced.link_desc',icon:'link',cmd:d.plugins.advlink?'mceAdvLink':'mceLink',ui:true});m.add({title:'advanced.unlink_desc',icon:'unlink',cmd:'UnLink'});m.addSeparator();}if(o.nodeName=='IMG'&&o.className.indexOf('mceItem')==-1){m.add({title:'advanced.image_desc',icon:'image',cmd:d.plugins.advimage?'mceAdvImage':'mceImage',ui:true});m.addSeparator();}m.add({title:'table.desc',icon:'table',cmd:'mceInsertTable',value:{action:'insert'}});m.add({title:'table.props_desc',icon:'table_props',cmd:'mceInsertTable'});m.add({title:'table.del',icon:'delete_table',cmd:'mceTableDelete'});m.addSeparator();i=m.addMenu({title:'table.cell'});i.add({title:'table.cell_desc',icon:'cell_props',cmd:'mceTableCellProps'});i.add({title:'table.split_cells_desc',icon:'split_cells',cmd:'mceTableSplitCells'});i.add({title:'table.merge_cells_desc',icon:'merge_cells',cmd:'mceTableMergeCells'});i=m.addMenu({title:'table.row'});i.add({title:'table.row_desc',icon:'row_props',cmd:'mceTableRowProps'});i.add({title:'table.row_before_desc',icon:'row_before',cmd:'mceTableInsertRowBefore'});i.add({title:'table.row_after_desc',icon:'row_after',cmd:'mceTableInsertRowAfter'});i.add({title:'table.delete_row_desc',icon:'delete_row',cmd:'mceTableDeleteRow'});i.addSeparator();i.add({title:'table.cut_row_desc',icon:'cut',cmd:'mceTableCutRow'});i.add({title:'table.copy_row_desc',icon:'copy',cmd:'mceTableCopyRow'});i.add({title:'table.paste_row_before_desc',icon:'paste',cmd:'mceTablePasteRowBefore'}).setDisabled(!f);i.add({title:'table.paste_row_after_desc',icon:'paste',cmd:'mceTablePasteRowAfter'}).setDisabled(!f);i=m.addMenu({title:'table.col'});i.add({title:'table.col_before_desc',icon:'col_before',cmd:'mceTableInsertColBefore'});i.add({title:'table.col_after_desc',icon:'col_after',cmd:'mceTableInsertColAfter'});i.add({title:'table.delete_col_desc',icon:'delete_col',cmd:'mceTableDeleteCol'});}else{m.add({title:'table.desc',icon:'table',cmd:'mceInsertTable'});}});}function y(d,e){var V=t.VK;var m=e.keyCode;function o(c,i,n){var r=c?'previousSibling':'nextSibling';var O=d.dom.getParent(i,'tr');var P=O[r];if(P){K(d,i,P,c);t.dom.Event.cancel(n);return true;}else{var Q=d.dom.getParent(O,'table');var R=O.parentNode;var S=R.nodeName.toLowerCase();if(S==='tbody'||S===(c?'tfoot':'thead')){var U=A(c,Q,R,'tbody');if(U!==null){return C(c,U,i,n);}}return D(c,O,r,Q,n);}}function A(c,i,n,r){var O=d.dom.select('>'+r,i);var P=O.indexOf(n);if(c&&P===0||!c&&P===O.length-1){return B(c,i);}else if(P===-1){var Q=n.tagName.toLowerCase()==='thead'?0:O.length-1;return O[Q];}else{return O[P+(c?-1:1)];}}function B(c,i){var n=c?'thead':'tfoot';var r=d.dom.select('>'+n,i);return r.length!==0?r[0]:null;}function C(c,i,n,r){var O=E(i,c);if(O){K(d,n,O,c);}t.dom.Event.cancel(r);return true;}function D(c,i,n,r,O){var P=r[n];if(P){F(P);return true;}else{var Q=d.dom.getParent(r,'td,th');if(Q){return o(c,Q,O);}else{var R=E(i,!c);F(R);return t.dom.Event.cancel(O);}}}function E(c,i){var n=c&&c[i?'lastChild':'firstChild'];return n&&n.nodeName==='BR'?d.dom.getParent(n,'td,th'):n;}function F(n){d.selection.setCursorLocation(n,0);}function G(){return m==V.UP||m==V.DOWN;}function H(d){var n=d.selection.getNode();var c=d.dom.getParent(n,'tr');return c!==null;}function I(i){var n=0;var c=i;while(c.previousSibling){c=c.previousSibling;n=n+g(c,"colspan");}return n;}function J(n,I){var c=0;var r=0;a(n.children,function(O,i){c=c+g(O,"colspan");r=i;if(c>I){return false;}});return r;}function K(d,n,r,c){var i=I(d.dom.getParent(n,'td,th'));var O=J(r,i);var P=r.childNodes[O];var Q=E(P,c);F(Q||P);}function L(N){var n=d.selection.getNode();var c=d.dom.getParent(n,'td,th');var i=d.dom.getParent(N,'td,th');return c&&c!==i&&M(c,i);}function M(n,c){return d.dom.getParent(n,'TABLE')===d.dom.getParent(c,'TABLE');}if(G()&&H(d)){var N=d.selection.getNode();setTimeout(function(){if(L(N)){o(!e.shiftKey&&m===V.UP,N,e);}},0);}}if(t.isWebKit){d.onKeyDown.add(y);}function z(){var c;c=d.getBody().lastChild;while(c&&c.nodeType==3&&!c.nodeValue.length){c=c.previousSibling;}if(c&&c.nodeName==='TABLE'){if(d.settings.forced_root_block){d.dom.add(d.getBody(),d.settings.forced_root_block,null,t.isIE&&!t.isIE11?'&nbsp;':'<br data-mce-bogus="1" />');}else{d.dom.add(d.getBody(),'br',{'data-mce-bogus':'1'});}}}if(t.isGecko){d.onKeyDown.add(function(d,e){var r,c,p=d.dom;if(e.keyCode==37||e.keyCode==38){r=d.selection.getRng();c=p.getParent(r.startContainer,'table');if(c&&d.getBody().firstChild==c){if(b(r,c)){r=p.createRng();r.setStartBefore(c);r.setEndBefore(c);d.selection.setRng(r);e.preventDefault();}}}});}d.onKeyUp.add(z);d.onSetContent.add(z);d.onVisualAid.add(z);d.onPreProcess.add(function(d,o){var c=o.node.lastChild;if(c&&(c.nodeName=="BR"||(c.childNodes.length==1&&(c.firstChild.nodeName=='BR'||c.firstChild.nodeValue=='\u00a0')))&&c.previousSibling&&c.previousSibling.nodeName=="TABLE"){d.dom.remove(c);}});z();d.startContent=d.getContent({format:'raw'});});a({mceTableSplitCells:function(c){c.split();},mceTableMergeCells:function(c){var r,e,i;i=d.dom.getParent(d.selection.getNode(),'th,td');if(i){r=i.rowSpan;e=i.colSpan;}if(!d.dom.select('td.mceSelected,th.mceSelected').length){w.open({url:u+'/merge_cells.htm',width:240+parseInt(d.getLang('table.merge_cells_delta_width',0),10),height:110+parseInt(d.getLang('table.merge_cells_delta_height',0),10),inline:1},{rows:r,cols:e,onaction:function(l){c.merge(i,l.cols,l.rows);},plugin_url:u});}else{c.merge();}},mceTableInsertRowBefore:function(c){c.insertRow(true);},mceTableInsertRowAfter:function(c){c.insertRow();},mceTableInsertColBefore:function(c){c.insertCol(true);},mceTableInsertColAfter:function(c){c.insertCol();},mceTableDeleteCol:function(c){c.deleteCols();},mceTableDeleteRow:function(c){c.deleteRows();},mceTableCutRow:function(c){f=c.cutRows();},mceTableCopyRow:function(c){f=c.copyRows();},mceTablePasteRowBefore:function(c){c.pasteRows(f,true);},mceTablePasteRowAfter:function(c){c.pasteRows(f);},mceTableDelete:function(c){c.deleteTable();}},function(c,n){d.addCommand(n,function(){var e=j();if(e){c(e);d.execCommand('mceRepaint');k();}});});a({mceInsertTable:function(v){w.open({url:u+'/table.htm',width:400+parseInt(d.getLang('table.table_delta_width',0),10),height:320+parseInt(d.getLang('table.table_delta_height',0),10),inline:1},{plugin_url:u,action:v?v.action:0});},mceTableRowProps:function(){w.open({url:u+'/row.htm',width:400+parseInt(d.getLang('table.rowprops_delta_width',0),10),height:295+parseInt(d.getLang('table.rowprops_delta_height',0),10),inline:1},{plugin_url:u});},mceTableCellProps:function(){w.open({url:u+'/cell.htm',width:400+parseInt(d.getLang('table.cellprops_delta_width',0),10),height:295+parseInt(d.getLang('table.cellprops_delta_height',0),10),inline:1},{plugin_url:u});}},function(c,n){d.addCommand(n,function(e,v){c(v);});});}});t.PluginManager.add('table',t.plugins.TablePlugin);})(tinymce);

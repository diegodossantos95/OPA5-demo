(function(t){t.PluginManager.add('legacyoutput',function(a,u,$){a.settings.inline_styles=false;a.on('init',function(){var b='p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img',f=t.explode(a.settings.font_size_style_values),s=a.schema;a.formatter.register({alignleft:{selector:b,attributes:{align:'left'}},aligncenter:{selector:b,attributes:{align:'center'}},alignright:{selector:b,attributes:{align:'right'}},alignjustify:{selector:b,attributes:{align:'justify'}},bold:[{inline:'b',remove:'all'},{inline:'strong',remove:'all'},{inline:'span',styles:{fontWeight:'bold'}}],italic:[{inline:'i',remove:'all'},{inline:'em',remove:'all'},{inline:'span',styles:{fontStyle:'italic'}}],underline:[{inline:'u',remove:'all'},{inline:'span',styles:{textDecoration:'underline'},exact:true}],strikethrough:[{inline:'strike',remove:'all'},{inline:'span',styles:{textDecoration:'line-through'},exact:true}],fontname:{inline:'font',attributes:{face:'%value'}},fontsize:{inline:'font',attributes:{size:function(v){return t.inArray(f,v.value)+1;}}},forecolor:{inline:'font',attributes:{color:'%value'}},hilitecolor:{inline:'font',styles:{backgroundColor:'%value'}}});t.each('b,i,u,strike'.split(','),function(n){s.addValidElements(n+'[*]');});if(!s.getElementRule("font")){s.addValidElements("font[face|size|color|style]");}t.each(b.split(','),function(n){var r=s.getElementRule(n);if(r){if(!r.attributes.align){r.attributes.align={};r.attributesOrder.push('align');}}});});a.addButton('fontsizeselect',function(){var b=[],d='8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7';var f=a.settings.fontsize_formats||d;a.$.each(f.split(' '),function(i,c){var e=c,v=c;var g=c.split('=');if(g.length>1){e=g[0];v=g[1];}b.push({text:e,value:v});});return{type:'listbox',text:'Font Sizes',tooltip:'Font Sizes',values:b,fixedWidth:true,onPostRender:function(){var s=this;a.on('NodeChange',function(){var c;c=a.dom.getParent(a.selection.getNode(),'font');if(c){s.value(c.size);}else{s.value('');}});},onclick:function(e){if(e.control.settings.value){a.execCommand('FontSize',false,e.control.settings.value);}}};});a.addButton('fontselect',function(){function c(e){e=e.replace(/;$/,'').split(';');var i=e.length;while(i--){e[i]=e[i].split('=');}return e;}var d='Andale Mono=andale mono,monospace;'+'Arial=arial,helvetica,sans-serif;'+'Arial Black=arial black,sans-serif;'+'Book Antiqua=book antiqua,palatino,serif;'+'Comic Sans MS=comic sans ms,sans-serif;'+'Courier New=courier new,courier,monospace;'+'Georgia=georgia,palatino,serif;'+'Helvetica=helvetica,arial,sans-serif;'+'Impact=impact,sans-serif;'+'Symbol=symbol;'+'Tahoma=tahoma,arial,helvetica,sans-serif;'+'Terminal=terminal,monaco,monospace;'+'Times New Roman=times new roman,times,serif;'+'Trebuchet MS=trebuchet ms,geneva,sans-serif;'+'Verdana=verdana,geneva,sans-serif;'+'Webdings=webdings;'+'Wingdings=wingdings,zapf dingbats';var b=[],f=c(a.settings.font_formats||d);$.each(f,function(i,e){b.push({text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf('dings')==-1?'font-family:'+e[1]:''});});return{type:'listbox',text:'Font Family',tooltip:'Font Family',values:b,fixedWidth:true,onPostRender:function(){var s=this;a.on('NodeChange',function(){var e;e=a.dom.getParent(a.selection.getNode(),'font');if(e){s.value(e.face);}else{s.value('');}});},onselect:function(e){if(e.control.settings.value){a.execCommand('FontName',false,e.control.settings.value);}}};});});})(tinymce);

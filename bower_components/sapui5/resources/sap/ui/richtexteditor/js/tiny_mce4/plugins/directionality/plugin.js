tinymce.PluginManager.add('directionality',function(e){function s(d){var a=e.dom,c,b=e.selection.getSelectedBlocks();if(b.length){c=a.getAttrib(b[0],"dir");tinymce.each(b,function(f){if(!a.getParent(f.parentNode,"*[dir='"+d+"']",a.getRoot())){if(c!=d){a.setAttrib(f,"dir",d);}else{a.setAttrib(f,"dir",null);}}});e.nodeChanged();}}function g(d){var a=[];tinymce.each('h1 h2 h3 h4 h5 h6 div p'.split(' '),function(n){a.push(n+'[dir='+d+']');});return a.join(',');}e.addCommand('mceDirectionLTR',function(){s("ltr");});e.addCommand('mceDirectionRTL',function(){s("rtl");});e.addButton('ltr',{title:'Left to right',cmd:'mceDirectionLTR',stateSelector:g('ltr')});e.addButton('rtl',{title:'Right to left',cmd:'mceDirectionRTL',stateSelector:g('rtl')});});

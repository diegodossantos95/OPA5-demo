tinymce.PluginManager.add('visualblocks',function(a,u){var c,v,b;if(!window.NodeList){return;}function t(){var s=this;s.active(b);a.on('VisualBlocks',function(){s.active(a.dom.hasClass(a.getBody(),'mce-visualblocks'));});}a.addCommand('mceVisualBlocks',function(){var d=a.dom,l;if(!c){c=d.uniqueId();l=d.create('link',{id:c,rel:'stylesheet',href:u+'/css/visualblocks.css'});a.getDoc().getElementsByTagName('head')[0].appendChild(l);}a.on("PreviewFormats AfterPreviewFormats",function(e){if(b){d.toggleClass(a.getBody(),'mce-visualblocks',e.type=="afterpreviewformats");}});d.toggleClass(a.getBody(),'mce-visualblocks');b=a.dom.hasClass(a.getBody(),'mce-visualblocks');if(v){v.active(d.hasClass(a.getBody(),'mce-visualblocks'));}a.fire('VisualBlocks');});a.addButton('visualblocks',{title:'Show blocks',cmd:'mceVisualBlocks',onPostRender:t});a.addMenuItem('visualblocks',{text:'Show blocks',cmd:'mceVisualBlocks',onPostRender:t,selectable:true,context:'view',prependToContext:true});a.on('init',function(){if(a.settings.visualblocks_default_state){a.execCommand('mceVisualBlocks',false,null,{skip_focus:true});}});a.on('remove',function(){a.dom.removeClass(a.getBody(),'mce-visualblocks');});});

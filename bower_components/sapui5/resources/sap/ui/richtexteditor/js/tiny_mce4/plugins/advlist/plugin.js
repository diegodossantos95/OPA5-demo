tinymce.PluginManager.add('advlist',function(a){var o,u;var h=function(a,p){var e=a.settings.plugins?a.settings.plugins:'';return tinymce.util.Tools.inArray(e.split(/[ ,]/),p)!==-1;};function i(e){return a.$.contains(a.getBody(),e);}function b(n){return n&&(/^(OL|UL|DL)$/).test(n.nodeName)&&i(n);}function c(e,s){var g=[];if(s){tinymce.each(s.split(/[ ,]/),function(j){g.push({text:j.replace(/\-/g,' ').replace(/\b\w/g,function(k){return k.toUpperCase();}),data:j=='default'?'':j});});}return g;}o=c('OL',a.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"));u=c('UL',a.getParam("advlist_bullet_styles","default,circle,disc,square"));function d(e,s){a.undoManager.transact(function(){var g,j=a.dom,k=a.selection;g=j.getParent(k.getNode(),'ol,ul');if(!g||g.nodeName!=e||s===false){var m={'list-style-type':s?s:''};a.execCommand(e=='UL'?'InsertUnorderedList':'InsertOrderedList',false,m);}g=j.getParent(k.getNode(),'ol,ul');if(g){tinymce.util.Tools.each(j.select('ol,ul',g).concat([g]),function(g){if(g.nodeName!==e&&s!==false){g=j.rename(g,e);}j.setStyle(g,'listStyleType',s?s:null);g.removeAttribute('data-mce-style');});}a.focus();});}function f(e){var g=a.dom.getStyle(a.dom.getParent(a.selection.getNode(),'ol,ul'),'listStyleType')||'';e.control.items().each(function(j){j.active(j.settings.data===g);});}var l=function(g){return function(){var s=this;a.on('NodeChange',function(e){var j=tinymce.util.Tools.grep(e.parents,b);s.active(j.length>0&&j[0].nodeName===g);});};};if(h(a,"lists")){a.addCommand('ApplyUnorderedListStyle',function(e,v){d('UL',v['list-style-type']);});a.addCommand('ApplyOrderedListStyle',function(e,v){d('OL',v['list-style-type']);});a.addButton('numlist',{type:(o.length>0)?'splitbutton':'button',tooltip:'Numbered list',menu:o,onPostRender:l('OL'),onshow:f,onselect:function(e){d('OL',e.control.settings.data);},onclick:function(){d('OL',false);}});a.addButton('bullist',{type:(u.length>0)?'splitbutton':'button',tooltip:'Bullet list',onPostRender:l('UL'),menu:u,onshow:f,onselect:function(e){d('UL',e.control.settings.data);},onclick:function(){d('UL',false);}});}});

tinymce.PluginManager.add('save',function(e){function s(){var f;f=tinymce.DOM.getParent(e.id,'form');if(e.getParam("save_enablewhendirty",true)&&!e.isDirty()){return;}tinymce.triggerSave();if(e.getParam("save_onsavecallback")){e.execCallback('save_onsavecallback',e);e.nodeChanged();return;}if(f){e.setDirty(false);if(!f.onsubmit||f.onsubmit()){if(typeof f.submit=="function"){f.submit();}else{d(e.translate("Error: Form submit field collision."));}}e.nodeChanged();}else{d(e.translate("Error: No form element found."));}}function d(m){e.notificationManager.open({text:m,type:'error'});}function c(){var h=tinymce.trim(e.startContent);if(e.getParam("save_oncancelcallback")){e.execCallback('save_oncancelcallback',e);return;}e.setContent(h);e.undoManager.clear();e.nodeChanged();}function a(){var b=this;e.on('nodeChange dirty',function(){b.disabled(e.getParam("save_enablewhendirty",true)&&!e.isDirty());});}e.addCommand('mceSave',s);e.addCommand('mceCancel',c);e.addButton('save',{icon:'save',text:'Save',cmd:'mceSave',disabled:true,onPostRender:a});e.addButton('cancel',{text:'Cancel',icon:false,cmd:'mceCancel',disabled:true,onPostRender:a});e.addShortcut('Meta+S','','mceSave');});

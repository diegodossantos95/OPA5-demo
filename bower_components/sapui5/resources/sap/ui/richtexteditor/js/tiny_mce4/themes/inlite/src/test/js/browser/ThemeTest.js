asynctest('browser/core/ThemeTest',['ephox.mcagar.api.TinyLoader','ephox.mcagar.api.TinyApis','ephox.mcagar.api.TinyActions','ephox.mcagar.api.TinyDom','tinymce/inlite/Theme','ephox.agar.api.Pipeline','ephox.agar.api.Chain','ephox.agar.api.UiFinder','ephox.agar.api.Mouse','ephox.agar.api.GeneralSteps','ephox.agar.api.UiControls','ephox.agar.api.FocusTools'],function(T,a,b,c,d,P,C,U,M,G,e,F){var s=arguments[arguments.length-2];var f=arguments[arguments.length-1];var g=c.fromDom(document.body);var h=C.fromChainsWith(g,[U.cWaitForState('label','.mce-tinymce-inline',function(q){return q.dom().style.display==="";})]);var i=function(q){return C.fromChains([U.cFindIn('div[aria-label="'+q+'"]'),M.cTrueClick]);};var j=C.asStep(c.fromDom(document),[F.cGetFocused,M.cTrueClick]);var k=function(q){return C.asStep({},[h,i(q)]);};var w=function(){return C.asStep({},[h]);};var B=function(t){return G.sequence([t.sSetContent('<p>a</p>'),t.sSetSelection([0,0],0,[0,0],1),k('Bold'),t.sAssertContent('<p><strong>a</strong></p>')]);};var H=function(t){return G.sequence([t.sSetContent('<p>a</p>'),t.sSetSelection([0,0],0,[0,0],1),k('Heading 2'),t.sAssertContent('<h2>a</h2>')]);};var I=function(q){return C.asStep({},[h,i('Insert/Edit link'),h,U.cFindIn('input'),e.cSetValue(q),h,i('Ok')]);};var l=C.fromChainsWith(g,[U.cWaitForState('window element','.mce-window',function(){return true;})]);var m=function(q){return C.fromChains([U.cFindIn('button:contains("'+q+'")'),M.cTrueClick]);};var n=function(q){return C.asStep({},[l,m(q)]);};var o=function(q,r){return G.sequence([I(q),n(r)]);};var u=C.asStep({},[h,i('Insert/Edit link'),h,i('Remove link')]);var L=function(t){var q=function(z,D,E,J,K,N,O){return G.sequence([t.sSetContent(z),t.sSetSelection(D,E,J,K),O,t.sAssertContent(N)]);};var r=function(z,D,E,J,K,N,O){return q(z,D,E,J,K,O,I(N));};var v=function(z,D,E,J,K,N){return q(z,D,E,J,K,N,u);};var x=function(z,D,E,J,K,N,O){return q(z,D,E,J,K,O,o(N,'Ok'));};var y=function(z,D,E,J,K,N,O){return q(z,D,E,J,K,O,o(N,'Cancel'));};return G.sequence([x('<p>a</p>',[0,0],0,[0,0],1,'www.site.com','<p><a href="http://www.site.com">a</a></p>'),y('<p>a</p>',[0,0],0,[0,0],1,'www.site.com','<p><a href="www.site.com">a</a></p>'),r('<p>a</p>',[0,0],0,[0,0],1,'#1','<p><a href="#1">a</a></p>'),r('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,'#2','<p><a id="x" href="#2">a</a></p>'),r('<p><a href="#3">a</a></p>',[0,0,0],0,[0,0,0],1,'','<p>a</p>'),v('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,'<p>a</p>')]);};var p=function(t){return G.sequence([t.sSetContent('<p><br></p><p>b</p>'),t.sSetCursor([0],0),k('Insert table'),t.sAssertContent(['<table style="width: 100%;">','<tbody>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','</tbody>','</table>','<p>b</p>'].join('\n'))]);};var A=function(t,q){return G.sequence([t.sSetContent('<p>a</p>'),t.sSetSelection([0,0],0,[0,0],1),w(),q.sContentKeydown(121,{alt:true}),j,t.sAssertContent('<p><strong>a</strong></p>')]);};T.setup(function(q,r,t){var v=a(q),x=b(q);P.async({},[B(v),H(v),L(v),p(v),A(v,x)],r,t);},{theme:'inlite',plugins:'image table link paste contextmenu textpattern',insert_toolbar:'quickimage media quicktable',selection_toolbar:'bold italic | quicklink h1 h2 blockquote',inline:true},s,f);});

(function(a,u){"use strict";var m={};function b(c,e){var j,k=[];for(var i=0;i<c.length;++i){j=m[c[i]]||g(c[i]);if(!j){throw'module definition dependecy not found: '+c[i];}k.push(j);}e.apply(null,k);}function d(i,c,e){if(typeof i!=='string'){throw'invalid module definition, module id must be defined and be a string';}if(c===u){throw'invalid module definition, dependencies must be specified';}if(e===u){throw'invalid module definition, definition function must be specified';}b(c,function(){m[i]=e.apply(null,arguments);});}function f(i){return!!m[i];}function g(i){var t=a;var c=i.split(/[.\/]/);for(var e=0;e<c.length;++e){if(!t[c[e]]){return;}t=t[c[e]];}return t;}function h(c){var i,t,e,j,p;for(i=0;i<c.length;i++){t=a;e=c[i];j=e.split(/[.\/]/);for(var k=0;k<j.length-1;++k){if(t[j[k]]===u){t[j[k]]={};}t=t[j[k]];}t[j[j.length-1]]=m[e];}if(a.AMDLC_TESTS){p=a.privateModules||{};for(e in m){p[e]=m[e];}for(i=0;i<c.length;i++){delete p[c[i]];}a.privateModules=p;}}d("tinymce/tableplugin/Utils",["tinymce/Env"],function(E){var s=function(n){return function(t,v){if(t){v=parseInt(v,10);if(v===1||v===0){t.removeAttribute(n,1);}else{t.setAttribute(n,v,1);}}};};var c=function(n){return function(t){return parseInt(t.getAttribute(n)||1,10);};};function p(e){if(!E.ie||E.ie>9){if(!e.hasChildNodes()){e.innerHTML='<br data-mce-bogus="1" />';}}}return{setColSpan:s('colSpan'),setRowSpan:s('rowspan'),getColSpan:c('colSpan'),getRowSpan:c('rowSpan'),setSpanVal:function(t,n,v){s(n)(t,v);},getSpanVal:function(t,n){return c(n)(t);},paddCell:p};});d("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(T,U){var c=function(q,x,y){return q[y]?q[y][x]:null;};var e=function(q,x,y){var r=c(q,x,y);return r?r.elm:null;};var i=function(q,x,y,r){var t,v,w=0,z=e(q,x,y);for(t=y;r>0?t<q.length:t>=0;t+=r){v=c(q,x,t);if(z!==v.elm){break;}w++;}return w;};var j=function(q,x,y){var r,t=q[y];for(var v=x;v<t.length;v++){r=t[v];if(r.real){return r.elm;}}return null;};var k=function(q,y){var r,t=[],v=q[y];for(var x=0;x<v.length;x++){r=v[x];t.push({elm:r.elm,above:i(q,x,y,-1)-1,below:i(q,x,y,1)-1});x+=U.getColSpan(r.elm)-1;}return t;};var l=function(q,r){var t=q.elm.ownerDocument;var v=t.createElement('td');U.setColSpan(v,U.getColSpan(q.elm));U.setRowSpan(v,r);U.paddCell(v);return v;};var n=function(q,r,x,y){var t=j(q,x+1,y);if(!t){t=j(q,0,y);t.parentNode.appendChild(r);}else{t.parentNode.insertBefore(r,t);}};var s=function(q,r,x,y){if(r.above!==0){U.setRowSpan(r.elm,r.above);var t=l(r,r.below+1);n(q,t,x,y);return t;}return null;};var o=function(q,r,x,y){if(r.below!==0){U.setRowSpan(r.elm,r.above+1);var t=l(r,r.below);n(q,t,x,y+1);return t;}return null;};var p=function(q,x,y,r){var t=k(q,y);var v=e(q,x,y).parentNode;var w=[];T.each(t,function(z,x){var A=r?s(q,z,x,y):o(q,z,x,y);if(A!==null){w.push(w);}});return{cells:w,row:v};};return{splitAt:p};});d("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(T,E,U,S){var e=T.each,j=U.getSpanVal,s=U.setSpanVal;return function(k,t,l){var n,o,p,q,v=k.selection,w=v.dom;function z(){k.$('td[data-mce-selected],th[data-mce-selected]').removeAttr('data-mce-selected');}function A(c){return c===k.getBody();}function B(c,i){if(!c){return[];}i=T.map(i.split(','),function(r){return r.toLowerCase();});return T.grep(c.childNodes,function(c){return T.inArray(i,c.nodeName.toLowerCase())!==-1;});}function C(){var c=0;n=[];o=0;e(['thead','tbody','tfoot'],function(i){var r=B(t,i)[0];var q1=B(r,'tr');e(q1,function(tr,y){y+=c;e(B(tr,'td,th'),function(td,x){var x2,y2,r1,s1;if(n[y]){while(n[y][x]){x++;}}r1=j(td,'rowspan');s1=j(td,'colspan');for(y2=y;y2<y+r1;y2++){if(!n[y2]){n[y2]=[];}for(x2=x;x2<x+s1;x2++){n[y2][x2]={part:i,real:y2==y&&x2==x,elm:td,rowspan:r1,colspan:s1};}}o=Math.max(o,x+1);});});c+=q1.length;});}function D(c){k.fire('newrow',{node:c});return c;}function F(c){k.fire('newcell',{node:c});return c;}function G(c,i){c=c.cloneNode(i);c.removeAttribute('id');return c;}function H(x,y){var r;r=n[y];if(r){return r[x];}}function I(n,y){return n[y]?n[y]:null;}function J(n,x){var c=[];for(var y=0;y<n.length;y++){c.push(H(x,y));}return c;}function K(c){return c&&(!!w.getAttrib(c.elm,'data-mce-selected')||c==l);}function L(){var r=[];e(t.rows,function(c){e(c.cells,function(i){if(w.getAttrib(i,'data-mce-selected')||(l&&i==l.elm)){r.push(c);return false;}});});return r;}function M(){var c=0;e(n,function(r){e(r,function(i){if(K(i)){c++;}});if(c){return false;}});return c;}function N(){var r=w.createRng();if(A(t)){return;}r.setStartAfter(t);r.setEndAfter(t);v.setRng(r);w.remove(t);}function O(c){var i,r={};if(k.settings.table_clone_elements!==false){r=T.makeMap((k.settings.table_clone_elements||'strong em b i span font h1 h2 h3 h4 h5 h6 p div').toUpperCase(),/[ ,]/);}T.walk(c,function(x){var y;if(x.nodeType==3){e(w.getParents(x.parentNode,null,c).reverse(),function(x){if(!r[x.nodeName]){return;}x=G(x,false);if(!i){i=y=x;}else if(y){y.appendChild(x);}y=x;});if(y){y.innerHTML=E.ie&&E.ie<10?'&nbsp;':'<br data-mce-bogus="1" />';}return false;}},'childNodes');c=G(c,false);F(c);s(c,'rowSpan',1);s(c,'colSpan',1);if(i){c.appendChild(i);}else{U.paddCell(c);}return c;}function P(){var r=w.createRng(),c;e(w.select('tr',t),function(i){if(i.cells.length===0){w.remove(i);}});if(w.select('tr',t).length===0){r.setStartBefore(t);r.setEndBefore(t);v.setRng(r);w.remove(t);return;}e(w.select('thead,tbody,tfoot',t),function(i){if(i.rows.length===0){w.remove(i);}});C();if(p){c=n[Math.min(n.length-1,p.y)];if(c){v.select(c[Math.min(c.length-1,p.x)].elm,true);v.collapse(true);}}}function Q(x,y,i,q1){var tr,x2,r,c,t1;tr=n[y][x].elm.parentNode;for(r=1;r<=i;r++){tr=w.getNext(tr,'tr');if(tr){for(x2=x;x2>=0;x2--){t1=n[y+r][x2].elm;if(t1.parentNode==tr){for(c=1;c<=q1;c++){w.insertAfter(O(t1),t1);}break;}}if(x2==-1){for(c=1;c<=q1;c++){tr.insertBefore(O(tr.cells[0]),tr.cells[0]);}}}}}function R(){e(n,function(r,y){e(r,function(c,x){var q1,r1,i;if(K(c)){c=c.elm;q1=j(c,'colspan');r1=j(c,'rowspan');if(q1>1||r1>1){s(c,'rowSpan',1);s(c,'colSpan',1);for(i=0;i<q1-1;i++){w.insertAfter(O(c),c);}Q(x,y,r1-1,q1);}}});});}function V(c,r,x){var y=[];for(var i=0;i<c.length;i++){if(i<r||i>x){y.push(c[i]);}}return y;}function W(c){return T.grep(c,function(i){return i.real===false;});}function X(c){var r=[];for(var i=0;i<c.length;i++){var x=c[i].elm;if(r[r.length-1]!==x){r.push(x);}}return r;}function Y(n,c,i,r,x){var q1=0;if(x-i<1){return 0;}for(var y=i+1;y<=x;y++){var r1=V(I(n,y),c,r);var s1=W(r1);if(r1.length===s1.length){T.each(X(s1),function(t1){U.setRowSpan(t1,U.getRowSpan(t1)-1);});q1++;}}return q1;}function Z(n,c,i,r,y){var q1=0;if(r-c<1){return 0;}for(var x=c+1;x<=r;x++){var r1=V(J(n,x),i,y);var s1=W(r1);if(r1.length===s1.length){T.each(X(s1),function(t1){U.setColSpan(t1,U.getColSpan(t1)-1);});q1++;}}return q1;}function $(c,i,r){var q1,r1,s1,t1,u1,x,y,v1,w1,x1,y1,z1,A1;if(c){q1=k1(c);r1=q1.x;s1=q1.y;t1=r1+(i-1);u1=s1+(r-1);}else{p=q=null;e(n,function(D1,y){e(D1,function(c,x){if(K(c)){if(!p){p={x:x,y:y};}q={x:x,y:y};}});});if(p){r1=p.x;s1=p.y;t1=q.x;u1=q.y;}}v1=H(r1,s1);w1=H(t1,u1);if(v1&&w1&&v1.part==w1.part){R();C();z1=Y(n,r1,s1,t1,u1);A1=Z(n,r1,s1,t1,u1);v1=H(r1,s1).elm;var B1=(t1-r1-A1)+1;var C1=(u1-s1-z1)+1;if(B1===o&&C1===n.length){B1=1;C1=1;}if(B1===o&&C1>1){C1=1;}s(v1,'colSpan',B1);s(v1,'rowSpan',C1);for(y=s1;y<=u1;y++){for(x=r1;x<=t1;x++){if(!n[y]||!n[y][x]){continue;}c=n[y][x].elm;if(c!=v1){x1=T.grep(c.childNodes);e(x1,function(D1){v1.appendChild(D1);});if(x1.length){x1=T.grep(v1.childNodes);y1=0;e(x1,function(D1){if(D1.nodeName=='BR'&&y1++<x1.length-1){v1.removeChild(D1);}});}w.remove(c);}}}P();}}function _(c){var i,r,q1,x,r1,s1,t1,u1,v1,w1;e(n,function(x1,y){e(x1,function(r){if(K(r)){r=r.elm;r1=r.parentNode;s1=D(G(r1,false));i=y;if(c){return false;}}});if(c){return i===u;}});if(i===u){return;}for(x=0,w1=0;x<n[0].length;x+=w1){if(!n[i][x]){continue;}r=n[i][x].elm;w1=j(r,'colspan');if(r!=q1){if(!c){v1=j(r,'rowspan');if(v1>1){s(r,'rowSpan',v1+1);continue;}}else{if(i>0&&n[i-1][x]){u1=n[i-1][x].elm;v1=j(u1,'rowSpan');if(v1>1){s(u1,'rowSpan',v1+1);continue;}}}t1=O(r);s(t1,'colSpan',r.colSpan);s1.appendChild(t1);q1=r;}}if(s1.hasChildNodes()){if(!c){w.insertAfter(s1,r1);}else{r1.parentNode.insertBefore(s1,r1);}}}function a1(c,r){r=r||L().length||1;for(var i=0;i<r;i++){_(c);}}function b1(c){var i,r;e(n,function(y){e(y,function(q1,x){if(K(q1)){i=x;if(c){return false;}}});if(c){return i===u;}});e(n,function(x,y){var q1,r1,s1;if(!x[i]){return;}q1=x[i].elm;if(q1!=r){s1=j(q1,'colspan');r1=j(q1,'rowspan');if(s1==1){if(!c){w.insertAfter(O(q1),q1);Q(i,y,r1-1,s1);}else{q1.parentNode.insertBefore(O(q1),q1);Q(i,y,r1-1,s1);}}else{s(q1,'colSpan',q1.colSpan+1);}r=q1;}});}function c1(c,r){r=r||M()||1;for(var i=0;i<r;i++){b1(c);}}function d1(n){return T.grep(e1(n),K);}function e1(n){var c=[];e(n,function(r){e(r,function(i){c.push(i);});});return c;}function f1(){var c=[];if(A(t)){if(n[0].length==1){return;}if(d1(n).length==e1(n).length){return;}}e(n,function(r){e(r,function(i,x){if(K(i)&&T.inArray(c,x)===-1){e(n,function(r){var i=r[x].elm,y;y=j(i,'colSpan');if(y>1){s(i,'colSpan',y-1);}else{w.remove(i);}});c.push(x);}});});P();}function g1(){var r;function c(i){var x,y;e(i.cells,function(q1){var r1=j(q1,'rowSpan');if(r1>1){s(q1,'rowSpan',r1-1);x=k1(q1);Q(x.x,x.y,1,1);}});x=k1(i.cells[0]);e(n[x.y],function(q1){var r1;q1=q1.elm;if(q1!=y){r1=j(q1,'rowSpan');if(r1<=1){w.remove(q1);}else{s(q1,'rowSpan',r1-1);}y=q1;}});}r=L();if(A(t)&&r.length==t.rows.length){return;}e(r.reverse(),function(i){c(i);});P();}function h1(){var r=L();if(A(t)&&r.length==t.rows.length){return;}w.remove(r);P();return r;}function i1(){var r=L();e(r,function(c,i){r[i]=G(c,true);});return r;}function j1(r,c){var x,y,q1;if(!r){return;}x=S.splitAt(n,p.x,p.y,c);y=x.row;T.each(x.cells,F);q1=T.map(r,function(i){return i.cloneNode(true);});if(!c){q1.reverse();}e(q1,function(r1){var i,s1=r1.cells.length,t1;D(r1);for(i=0;i<s1;i++){t1=r1.cells[i];F(t1);s(t1,'colSpan',1);s(t1,'rowSpan',1);}for(i=s1;i<o;i++){r1.appendChild(F(O(r1.cells[s1-1])));}for(i=o;i<s1;i++){w.remove(r1.cells[i]);}if(c){y.parentNode.insertBefore(r1,y);}else{w.insertAfter(r1,y);}});z();}function k1(c){var i;e(n,function(r,y){e(r,function(q1,x){if(q1.elm==c){i={x:x,y:y};return false;}});return!i;});return i;}function l1(c){p=k1(c);}function m1(){var c,i;c=i=0;e(n,function(r,y){e(r,function(q1,x){var r1,s1;if(K(q1)){q1=n[y][x];if(x>c){c=x;}if(y>i){i=y;}if(q1.real){r1=q1.colspan-1;s1=q1.rowspan-1;if(r1){if(x+r1>c){c=x+r1;}}if(s1){if(y+s1>i){i=y+s1;}}}}});});return{x:c,y:i};}function n1(c){var i,r,q1,r1,s1,t1,u1,v1,x,y;q=k1(c);if(p&&q){i=Math.min(p.x,q.x);r=Math.min(p.y,q.y);q1=Math.max(p.x,q.x);r1=Math.max(p.y,q.y);s1=q1;t1=r1;for(y=r;y<=r1;y++){for(x=i;x<=q1;x++){c=n[y][x];if(c.real){u1=c.colspan-1;v1=c.rowspan-1;if(u1){if(x+u1>s1){s1=x+u1;}}if(v1){if(y+v1>t1){t1=y+v1;}}}}}z();for(y=r;y<=t1;y++){for(x=i;x<=s1;x++){if(n[y][x]){w.setAttrib(n[y][x].elm,'data-mce-selected','1');}}}}}function o1(c,i){var r,x,y;r=k1(c);x=r.y*o+r.x;do{x+=i;y=H(x%o,Math.floor(x/o));if(!y){break;}if(y.elm!=c){v.select(y.elm,true);if(w.isEmpty(y.elm)){v.collapse(true);}return true;}}while(y.elm==c);return false;}function p1(c){if(p){var i=S.splitAt(n,p.x,p.y,c);T.each(i.cells,F);}}t=t||w.getParent(v.getStart(true),'table');C();l=l||w.getParent(v.getStart(true),'th,td');if(l){p=k1(l);q=m1();l=H(p.x,p.y);}T.extend(this,{deleteTable:N,split:R,merge:$,insertRow:_,insertRows:a1,insertCol:b1,insertCols:c1,splitCols:p1,deleteCols:f1,deleteRows:g1,cutRows:h1,copyRows:i1,pasteRows:j1,getPos:k1,setStartCell:l1,setEndCell:n1,moveRelIdx:o1,refresh:C});};});d("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(V,D,E,T,U){var j=T.each,k=U.getSpanVal;return function(l){function p(){function o(e){var x=e.keyCode;function y(c,i){var n=c?'previousSibling':'nextSibling';var r=l.dom.getParent(i,'tr');var P=r[n];if(P){L(l,i,P,c);e.preventDefault();return true;}var Q=l.dom.getParent(r,'table');var R=r.parentNode;var S=R.nodeName.toLowerCase();if(S==='tbody'||S===(c?'tfoot':'thead')){var W=z(c,Q,R,'tbody');if(W!==null){return B(c,W,i);}}return C(c,r,n,Q);}function z(c,i,n,r){var P=l.dom.select('>'+r,i);var Q=P.indexOf(n);if(c&&Q===0||!c&&Q===P.length-1){return A(c,i);}else if(Q===-1){var R=n.tagName.toLowerCase()==='thead'?0:P.length-1;return P[R];}return P[Q+(c?-1:1)];}function A(c,i){var n=c?'thead':'tfoot';var r=l.dom.select('>'+n,i);return r.length!==0?r[0]:null;}function B(c,i,n){var r=F(i,c);if(r){L(l,n,r,c);}e.preventDefault();return true;}function C(c,i,n,r){var P=r[n];if(P){G(P);return true;}var Q=l.dom.getParent(r,'td,th');if(Q){return y(c,Q,e);}var R=F(i,!c);G(R);e.preventDefault();return false;}function F(c,i){var n=c&&c[i?'lastChild':'firstChild'];return n&&n.nodeName==='BR'?l.dom.getParent(n,'td,th'):n;}function G(n){l.selection.setCursorLocation(n,0);}function H(){return x==V.UP||x==V.DOWN;}function I(l){var n=l.selection.getNode();var c=l.dom.getParent(n,'tr');return c!==null;}function J(i){var n=0;var c=i;while(c.previousSibling){c=c.previousSibling;n=n+k(c,"colspan");}return n;}function K(n,J){var c=0,r=0;j(n.children,function(P,i){c=c+k(P,"colspan");r=i;if(c>J){return false;}});return r;}function L(c,n,r,i){var P=J(l.dom.getParent(n,'td,th'));var Q=K(r,P);var R=r.childNodes[Q];var S=F(R,i);G(S||R);}function M(O){var n=l.selection.getNode();var c=l.dom.getParent(n,'td,th');var i=l.dom.getParent(O,'td,th');return c&&c!==i&&N(c,i);}function N(n,c){return l.dom.getParent(n,'TABLE')===l.dom.getParent(c,'TABLE');}if(H()&&I(l)){var O=l.selection.getNode();D.setEditorTimeout(l,function(){if(M(O)){y(!e.shiftKey&&x===V.UP,O,e);}},0);}}l.on('KeyDown',function(e){o(e);});}function q(){function i(r,c){var e=c.ownerDocument,n=e.createRange(),o;n.setStartBefore(c);n.setEnd(r.endContainer,r.endOffset);o=e.createElement('body');o.appendChild(n.cloneContents());return o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,'-').replace(/<[^>]+>/g,'').length===0;}l.on('KeyDown',function(e){var r,c,n=l.dom;if(e.keyCode==37||e.keyCode==38){r=l.selection.getRng();c=n.getParent(r.startContainer,'table');if(c&&l.getBody().firstChild==c){if(i(r,c)){r=n.createRng();r.setStartBefore(c);r.setEndBefore(c);l.selection.setRng(r);e.preventDefault();}}}});}function s(){l.on('KeyDown SetContent VisualAid',function(){var c;for(c=l.getBody().lastChild;c;c=c.previousSibling){if(c.nodeType==3){if(c.nodeValue.length>0){break;}}else if(c.nodeType==1&&(c.tagName=='BR'||!c.getAttribute('data-mce-bogus'))){break;}}if(c&&c.nodeName=='TABLE'){if(l.settings.forced_root_block){l.dom.add(l.getBody(),l.settings.forced_root_block,l.settings.forced_root_block_attrs,E.ie&&E.ie<10?'&nbsp;':'<br data-mce-bogus="1" />');}else{l.dom.add(l.getBody(),'br',{'data-mce-bogus':'1'});}}});l.on('PreProcess',function(o){var c=o.node.lastChild;if(c&&(c.nodeName=="BR"||(c.childNodes.length==1&&(c.firstChild.nodeName=='BR'||c.firstChild.nodeValue=='\u00a0')))&&c.previousSibling&&c.previousSibling.nodeName=="TABLE"){l.dom.remove(c);}});}function t(){function c(e,r,n,o){var x=3,y=e.dom.getParent(r.startContainer,'TABLE');var z,A,B;if(y){z=y.parentNode;}A=r.startContainer.nodeType==x&&r.startOffset===0&&r.endOffset===0&&o&&(n.nodeName=="TR"||n==z);B=(n.nodeName=="TD"||n.nodeName=="TH")&&!o;return A||B;}function i(){var r=l.selection.getRng();var n=l.selection.getNode();var e=l.dom.getParent(r.startContainer,'TD,TH');if(!c(l,r,n,e)){return;}if(!e){e=n;}var o=e.lastChild;while(o.lastChild){o=o.lastChild;}if(o.nodeType==3){r.setEnd(o,o.data.length);l.selection.setRng(r);}}l.on('KeyDown',function(){i();});l.on('MouseDown',function(e){if(e.button!=2){i();}});}function v(){function c(e){l.selection.select(e,true);l.selection.collapse(true);}function i(e){l.$(e).empty();U.paddCell(e);}l.on('keydown',function(e){if((e.keyCode==V.DELETE||e.keyCode==V.BACKSPACE)&&!e.isDefaultPrevented()){var n,o,r,x;n=l.dom.getParent(l.selection.getStart(),'table');if(n){o=l.dom.select('td,th',n);r=T.grep(o,function(x){return!!l.dom.getAttrib(x,'data-mce-selected');});if(r.length===0){x=l.dom.getParent(l.selection.getStart(),'td,th');if(l.selection.isCollapsed()&&x&&l.dom.isEmpty(x)){e.preventDefault();i(x);c(x);}return;}e.preventDefault();l.undoManager.transact(function(){if(o.length==r.length){l.execCommand('mceTableDelete');}else{T.each(r,i);c(r[0]);}});}}});}function w(){var i=function(e){return e&&e.nodeName=='CAPTION'&&e.parentNode.nodeName=='TABLE';};var r=function(e,B){var C=l.selection.getRng();var F=e.ownerDocument.createTextNode('\u00a0');if(C.startOffset){e.insertBefore(F,e.firstChild);}else{e.appendChild(F);}if(B){l.selection.select(F,true);l.selection.collapse(true);}};var c=function(e){return(e.keyCode==V.DELETE||e.keyCode==V.BACKSPACE)&&!e.isDefaultPrevented();};var n=function(e){return e.firstChild===e.lastChild&&e.firstChild;};var o=function(e){return e&&e.nodeType===3;};var x=function(e){var B=n(e);return o(B)&&B.data.length===1?B.data:null;};var y=function(e){var B=n(e);var C=x(e);return B&&!o(B)||C&&!A(C);};var z=function(e){return l.dom.isEmpty(e)||A(x(e));};var A=function(e){return e==='\u00a0';};l.on('keydown',function(e){if(!c(e)){return;}var B=l.dom.getParent(l.selection.getStart(),'caption');if(!i(B)){return;}if(E.ie){if(!l.selection.isCollapsed()){l.undoManager.transact(function(){l.execCommand('Delete');if(z(B)){r(B,true);}});e.preventDefault();}else if(y(B)){r(B);}}if(z(B)){e.preventDefault();}});}v();w();if(E.webkit){p();t();}if(E.gecko){q();s();}if(E.ie>9){q();s();}};});d("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(T,c,i){return function(j,s){var k=j.dom,t,l,n,o,p=true,r,q;function v(e){j.getBody().style.webkitUserSelect='';if(e||p){j.$('td[data-mce-selected],th[data-mce-selected]').removeAttr('data-mce-selected');p=false;}}var w=function(){l=t=n=o=null;s(false);};function x(e,z){if(!e||!z){return false;}return e===k.getParent(z,'table');}function y(e){var z,A=e.target,B;if(r||q){return;}if(A===o){return;}o=A;if(n&&l){B=k.getParent(A,'td,th');if(!x(n,B)){B=k.getParent(n,'td,th');}if(l===B&&!p){return;}s(true);if(x(n,B)){e.preventDefault();if(!t){t=new T(j,n,l);j.getBody().style.webkitUserSelect='none';}t.setEndCell(B);p=true;z=j.selection.getSel();try{if(z.removeAllRanges){z.removeAllRanges();}else{z.empty();}}catch(C){}}}}j.on('SelectionChange',function(e){if(p){e.stopImmediatePropagation();}},true);j.on('MouseDown',function(e){if(e.button!=2&&!r&&!q){v();l=k.getParent(e.target,'td,th');n=k.getParent(l,'table');}});j.on('mouseover',y);j.on('remove',function(){k.unbind(j.getDoc(),'mouseover',y);v();});j.on('MouseUp',function(){var e,z=j.selection,A,B,C,D;function E(C,F){var B=new c(C,C);do{if(C.nodeType==3&&i.trim(C.nodeValue).length!==0){if(F){e.setStart(C,0);}else{e.setEnd(C,C.nodeValue.length);}return;}if(C.nodeName=='BR'){if(F){e.setStartBefore(C);}else{e.setEndBefore(C);}return;}}while((C=(F?B.next():B.prev())));}if(l){if(t){j.getBody().style.webkitUserSelect='';}A=k.select('td[data-mce-selected],th[data-mce-selected]');if(A.length>0){e=k.createRng();C=A[0];e.setStartBefore(C);e.setEndAfter(C);E(C,1);B=new c(C,k.getParent(A[0],'table'));do{if(C.nodeName=='TD'||C.nodeName=='TH'){if(!k.getAttrib(C,'data-mce-selected')){break;}D=C;}}while((C=B.next()));E(D);z.setRng(e);}j.nodeChanged();w();}});j.on('KeyUp Drop SetContent',function(e){v(e.type=='setcontent');w();r=false;});j.on('ObjectResizeStart ObjectResized',function(e){r=e.type!='objectresized';});j.on('dragstart',function(){q=true;});j.on('drop dragend',function(){q=false;});return{clear:v};};});d("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(T,E){var e=T.each;return function(c){var s=this;function j(){var i=c.settings.color_picker_callback;if(i){return function(){var s=this;i.call(c,function(w){s.value(w).fire('change');},s.value());};}}function k(i){return{title:'Advanced',type:'form',defaults:{onchange:function(){q(i,this.parents().reverse()[0],this.name()=="style");}},items:[{label:'Style',name:'style',type:'textbox'},{type:'form',padding:0,formItemDefaults:{layout:'grid',alignH:['start','right']},defaults:{size:7},items:[{label:'Border color',type:'colorbox',name:'borderColor',onaction:j()},{label:'Background color',type:'colorbox',name:'backgroundColor',onaction:j()}]}]};}function r(i){return i?i.replace(/px$/,''):"";}function l(i){if(/^[0-9]+$/.test(i)){i+="px";}return i;}function n(i){e('left center right'.split(' '),function(w){c.formatter.remove('align'+w,{},i);});}function o(i){e('top middle bottom'.split(' '),function(w){c.formatter.remove('valign'+w,{},i);});}function p(i,w,x){function y(z,A){A=A||[];T.each(z,function(B){var C={text:B.text||B.title};if(B.menu){C.menu=y(B.menu);}else{C.value=B.value;if(w){w(C);}}A.push(C);});return A;}return y(i,x||[]);}function q(i,w,x){var y=w.toJSON();var z=i.parseStyle(y.style);if(x){w.find('#borderColor').value(z["border-color"]||'')[0].fire('change');w.find('#backgroundColor').value(z["background-color"]||'')[0].fire('change');}else{z["border-color"]=y.borderColor;z["background-color"]=y.backgroundColor;}w.find('#style').value(i.serializeStyle(i.parseStyle(i.serializeStyle(z))));}function t(i,w,x){var y=i.parseStyle(i.getAttrib(x,'style'));if(y["border-color"]){w.borderColor=y["border-color"];}if(y["background-color"]){w.backgroundColor=y["background-color"];}w.style=i.serializeStyle(y);}function v(i,w,x){var y=i.parseStyle(i.getAttrib(w,'style'));e(x,function(z){y[z.name]=z.value;});i.setAttrib(w,'style',i.serializeStyle(i.parseStyle(i.serializeStyle(y))));}s.tableProps=function(){s.table(true);};s.table=function(w){var x=c.dom,y,z,A,B,C={},D,F;function G(){function I(K,L,M){if(K.tagName==="TD"||K.tagName==="TH"){x.setStyle(K,L,M);}else{if(K.children){for(var i=0;i<K.children.length;i++){I(K.children[i],L,M);}}}}var J;q(x,this);C=T.extend(C,this.toJSON());if(C["class"]===false){delete C["class"];}c.undoManager.transact(function(){if(!y){y=c.plugins.table.insertTable(C.cols||1,C.rows||1);}c.dom.setAttribs(y,{style:C.style,'class':C['class']});if(c.settings.table_style_by_css){F=[];F.push({name:'border',value:C.border});F.push({name:'border-spacing',value:l(C.cellspacing)});v(x,y,F);x.setAttribs(y,{'data-mce-border-color':C.borderColor,'data-mce-cell-padding':C.cellpadding,'data-mce-border':C.border});if(y.children){for(var i=0;i<y.children.length;i++){I(y.children[i],'border',C.border);I(y.children[i],'padding',l(C.cellpadding));}}}else{c.dom.setAttribs(y,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});}if(x.getAttrib(y,'width')&&!c.settings.table_style_by_css){x.setAttrib(y,'width',r(C.width));}else{x.setStyle(y,'width',l(C.width));}x.setStyle(y,'height',l(C.height));J=x.select('caption',y)[0];if(J&&!C.caption){x.remove(J);}if(!J&&C.caption){J=x.create('caption');J.innerHTML=!E.ie?'<br data-mce-bogus="1"/>':'\u00a0';y.insertBefore(J,y.firstChild);}n(y);if(C.align){c.formatter.apply('align'+C.align,{},y);}c.focus();c.addVisual();});}function H(I,J){var K=c.dom.select("td,th",I),L;function M(L,N){for(var i=0;i<N.length;i++){var O=x.getStyle(N[i],J);if(typeof L==="undefined"){L=O;}if(L!=O){return"";}}return L;}L=M(L,K);return L;}if(w===true){y=x.getParent(c.selection.getStart(),'table');if(y){C={width:r(x.getStyle(y,'width')||x.getAttrib(y,'width')),height:r(x.getStyle(y,'height')||x.getAttrib(y,'height')),cellspacing:r(x.getStyle(y,'border-spacing')||x.getAttrib(y,'cellspacing')),cellpadding:x.getAttrib(y,'data-mce-cell-padding')||x.getAttrib(y,'cellpadding')||H(y,'padding'),border:x.getAttrib(y,'data-mce-border')||x.getAttrib(y,'border')||H(y,'border'),borderColor:x.getAttrib(y,'data-mce-border-color'),caption:!!x.select('caption',y)[0],'class':x.getAttrib(y,'class')};e('left center right'.split(' '),function(i){if(c.formatter.matchNode(y,'align'+i)){C.align=i;}});}}else{z={label:'Cols',name:'cols'};A={label:'Rows',name:'rows'};}if(c.settings.table_class_list){if(C["class"]){C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,'');}B={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_class_list,function(i){if(i.value){i.textStyle=function(){return c.formatter.getCssText({block:'table',classes:[i.value]});};}})};}D={type:'form',layout:'flex',direction:'column',labelGapCalc:'children',padding:0,items:[{type:'form',labelGapCalc:false,padding:0,layout:'grid',columns:2,defaults:{type:'textbox',maxWidth:50},items:(c.settings.table_appearance_options!==false)?[z,A,{label:'Width',name:'width'},{label:'Height',name:'height'},{label:'Cell spacing',name:'cellspacing'},{label:'Cell padding',name:'cellpadding'},{label:'Border',name:'border'},{label:'Caption',name:'caption',type:'checkbox'}]:[z,A,{label:'Width',name:'width'},{label:'Height',name:'height'}]},{label:'Alignment',name:'align',type:'listbox',text:'None',values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},B]};if(c.settings.table_advtab!==false){t(x,C,y);c.windowManager.open({title:"Table properties",data:C,bodyType:'tabpanel',body:[{title:'General',type:'form',items:D},k(x)],onsubmit:G});}else{c.windowManager.open({title:"Table properties",data:C,body:D,onsubmit:G});}};s.merge=function(i,w){c.windowManager.open({title:"Merge cells",body:[{label:'Cols',name:'cols',type:'textbox',value:'1',size:10},{label:'Rows',name:'rows',type:'textbox',value:'1',size:10}],onsubmit:function(){var x=this.toJSON();c.undoManager.transact(function(){i.merge(w,x.cols,x.rows);});}});};s.cell=function(){var i=c.dom,w,x,y,z=[];function A(F,G,H){if(z.length===1||H){i.setAttrib(F,G,H);}}function B(F,G,H){if(z.length===1||H){i.setStyle(F,G,H);}}function C(){q(i,this);x=T.extend(x,this.toJSON());c.undoManager.transact(function(){e(z,function(w){A(w,'scope',x.scope);A(w,'style',x.style);A(w,'class',x['class']);B(w,'width',l(x.width));B(w,'height',l(x.height));if(x.type&&w.nodeName.toLowerCase()!==x.type){w=i.rename(w,x.type);}if(z.length===1){n(w);o(w);}if(x.align){c.formatter.apply('align'+x.align,{},w);}if(x.valign){c.formatter.apply('valign'+x.valign,{},w);}});c.focus();});}z=c.dom.select('td[data-mce-selected],th[data-mce-selected]');w=c.dom.getParent(c.selection.getStart(),'td,th');if(!z.length&&w){z.push(w);}w=w||z[0];if(!w){return;}if(z.length>1){x={width:'',height:'',scope:'','class':'',align:'',style:'',type:w.nodeName.toLowerCase()};}else{x={width:r(i.getStyle(w,'width')||i.getAttrib(w,'width')),height:r(i.getStyle(w,'height')||i.getAttrib(w,'height')),scope:i.getAttrib(w,'scope'),'class':i.getAttrib(w,'class')};x.type=w.nodeName.toLowerCase();e('left center right'.split(' '),function(F){if(c.formatter.matchNode(w,'align'+F)){x.align=F;}});e('top middle bottom'.split(' '),function(F){if(c.formatter.matchNode(w,'valign'+F)){x.valign=F;}});t(i,x,w);}if(c.settings.table_cell_class_list){y={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_cell_class_list,function(F){if(F.value){F.textStyle=function(){return c.formatter.getCssText({block:'td',classes:[F.value]});};}})};}var D={type:'form',layout:'flex',direction:'column',labelGapCalc:'children',padding:0,items:[{type:'form',layout:'grid',columns:2,labelGapCalc:false,padding:0,defaults:{type:'textbox',maxWidth:50},items:[{label:'Width',name:'width'},{label:'Height',name:'height'},{label:'Cell type',name:'type',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'Cell',value:'td'},{text:'Header cell',value:'th'}]},{label:'Scope',name:'scope',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Row',value:'row'},{text:'Column',value:'col'},{text:'Row group',value:'rowgroup'},{text:'Column group',value:'colgroup'}]},{label:'H Align',name:'align',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},{label:'V Align',name:'valign',type:'listbox',text:'None',minWidth:90,maxWidth:null,values:[{text:'None',value:''},{text:'Top',value:'top'},{text:'Middle',value:'middle'},{text:'Bottom',value:'bottom'}]}]},y]};if(c.settings.table_cell_advtab!==false){c.windowManager.open({title:"Cell properties",bodyType:'tabpanel',data:x,body:[{title:'General',type:'form',items:D},k(i)],onsubmit:C});}else{c.windowManager.open({title:"Cell properties",data:x,body:D,onsubmit:C});}};s.row=function(){var i=c.dom,w,x,y,z,A,B=[],C;function D(H,I,J){if(B.length===1||J){i.setAttrib(H,I,J);}}function F(H,I,J){if(B.length===1||J){i.setStyle(H,I,J);}}function G(){var w,H,I;q(i,this);A=T.extend(A,this.toJSON());c.undoManager.transact(function(){var J=A.type;e(B,function(y){D(y,'scope',A.scope);D(y,'style',A.style);D(y,'class',A['class']);F(y,'height',l(A.height));if(J!==y.parentNode.nodeName.toLowerCase()){w=i.getParent(y,'table');H=y.parentNode;I=i.select(J,w)[0];if(!I){I=i.create(J);if(w.firstChild){w.insertBefore(I,w.firstChild);}else{w.appendChild(I);}}I.appendChild(y);if(!H.hasChildNodes()){i.remove(H);}}if(B.length===1){n(y);}if(A.align){c.formatter.apply('align'+A.align,{},y);}});c.focus();});}w=c.dom.getParent(c.selection.getStart(),'table');x=c.dom.getParent(c.selection.getStart(),'td,th');e(w.rows,function(H){e(H.cells,function(I){if(i.getAttrib(I,'data-mce-selected')||I==x){B.push(H);return false;}});});y=B[0];if(!y){return;}if(B.length>1){A={height:'',scope:'','class':'',align:'',type:y.parentNode.nodeName.toLowerCase()};}else{A={height:r(i.getStyle(y,'height')||i.getAttrib(y,'height')),scope:i.getAttrib(y,'scope'),'class':i.getAttrib(y,'class')};A.type=y.parentNode.nodeName.toLowerCase();e('left center right'.split(' '),function(H){if(c.formatter.matchNode(y,'align'+H)){A.align=H;}});t(i,A,y);}if(c.settings.table_row_class_list){z={name:'class',type:'listbox',label:'Class',values:p(c.settings.table_row_class_list,function(H){if(H.value){H.textStyle=function(){return c.formatter.getCssText({block:'tr',classes:[H.value]});};}})};}C={type:'form',columns:2,padding:0,defaults:{type:'textbox'},items:[{type:'listbox',name:'type',label:'Row type',text:'Header',maxWidth:null,values:[{text:'Header',value:'thead'},{text:'Body',value:'tbody'},{text:'Footer',value:'tfoot'}]},{type:'listbox',name:'align',label:'Alignment',text:'None',maxWidth:null,values:[{text:'None',value:''},{text:'Left',value:'left'},{text:'Center',value:'center'},{text:'Right',value:'right'}]},{label:'Height',name:'height'},z]};if(c.settings.table_row_advtab!==false){c.windowManager.open({title:"Row properties",data:A,bodyType:'tabpanel',body:[{title:'General',type:'form',items:C},k(i)],onsubmit:G});}else{c.windowManager.open({title:"Row properties",data:A,body:C,onsubmit:G});}};};});d("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(T,V){var c;return function(k){var R='mce-resize-bar',l='mce-resize-bar-row',n='row-resize',o='data-row',p='data-initial-top',q='mce-resize-bar-col',s='col-resize',t='data-col',v='data-initial-left',w=4,x=10,y=10,z='mce-resize-bar-dragging';var A=new RegExp(/(\d+(\.\d+)?%)/),B=new RegExp(/px|em/);var C,D,E,F,G,H;function I(i,r){return{index:i,y:k.dom.getPos(r).y};}function J(i,r){return{index:i,y:k.dom.getPos(r).y+r.offsetHeight};}function K(i,e){return{index:i,x:k.dom.getPos(e).x};}function L(i,e){return{index:i,x:k.dom.getPos(e).x+e.offsetWidth};}function M(){var e=k.getBody().dir;return e==='rtl';}function N(){return k.inline;}function O(){return N?k.getBody().ownerDocument.body:k.getBody();}function P(i,e){return M()?L(i,e):K(i,e);}function Q(i,e){return M()?K(i,e):L(i,e);}function S(e,i){return U(e,'width')/U(i,'width')*100;}function U(e,i){var j=k.dom.getStyle(e,i,true);var r=parseInt(j,10);return r;}function W(e){var i=U(e,'width');var j=U(e.parentElement,'width');return i/j*100;}function X(e,i){var j=U(e,'width');return i/j*100;}function Y(e,i){var j=U(e.parentElement,'width');return i/j*100;}function Z(e,j,r){var M1=[];for(var i=1;i<r.length;i++){var N1=r[i].element;M1.push(e(i-1,N1));}var O1=r[r.length-1];M1.push(j(r.length-1,O1.element));return M1;}function $(){var e=k.dom.select('.'+R,O());T.each(e,function(i){k.dom.remove(i);});}function _(e){$();j1(e);}function a1(e,i,j,r,M1,N1,O1,P1){var Q1={'data-mce-bogus':'all','class':R+' '+e,'unselectable':'on','data-mce-resize':false,style:'cursor: '+i+'; '+'margin: 0; '+'padding: 0; '+'position: absolute; '+'left: '+j+'px; '+'top: '+r+'px; '+'height: '+M1+'px; '+'width: '+N1+'px; '};Q1[O1]=P1;return Q1;}function b1(r,e,i){T.each(r,function(j){var M1=i.x,N1=j.y-w/2,O1=w,P1=e;k.dom.add(O(),'div',a1(l,n,M1,N1,O1,P1,o,j.index));});}function c1(e,i,j){T.each(e,function(r){var M1=r.x-w/2,N1=j.y,O1=i,P1=w;k.dom.add(O(),'div',a1(q,s,M1,N1,O1,P1,t,r.index));});}function d1(e){return T.map(e.rows,function(r){var i=T.map(r.cells,function(j){var M1=j.hasAttribute('rowspan')?parseInt(j.getAttribute('rowspan'),10):1;var N1=j.hasAttribute('colspan')?parseInt(j.getAttribute('colspan'),10):1;return{element:j,rowspan:M1,colspan:N1};});return{element:r,cells:i};});}function e1(e){function r(i,j){return i+','+j;}function M1(i,j){return P1[r(i,j)];}function N1(){var i=[];T.each(Q1,function(j){i=i.concat(j.cells);});return i;}function O1(){return Q1;}var P1={};var Q1=[];var R1=0;var S1=0;T.each(e,function(T1,U1){var V1=[];T.each(T1.cells,function(W1){var X1=0;while(P1[r(U1,X1)]!==u){X1++;}var Y1={element:W1.element,colspan:W1.colspan,rowspan:W1.rowspan,rowIndex:U1,colIndex:X1};for(var i=0;i<W1.colspan;i++){for(var j=0;j<W1.rowspan;j++){var cr=U1+j;var cc=X1+i;P1[r(cr,cc)]=Y1;R1=Math.max(R1,cr+1);S1=Math.max(S1,cc+1);}}V1.push(Y1);});Q1.push({element:T1.element,cells:V1});});return{grid:{maxRows:R1,maxCols:S1},getAt:M1,getAllCells:N1,getAllRows:O1};}function f1(e,j){var r=[];for(var i=e;i<j;i++){r.push(i);}return r;}function g1(e,j,r){var M1=e();var N1;for(var i=0;i<M1.length;i++){if(j(M1[i])){N1=M1[i];}}return N1?N1:r();}function h1(e){var j=f1(0,e.grid.maxCols);var r=f1(0,e.grid.maxRows);return T.map(j,function(M1){function N1(){var Q1=[];for(var i=0;i<r.length;i++){var R1=e.getAt(i,M1);if(R1&&R1.colIndex===M1){Q1.push(R1);}}return Q1;}function O1(i){return i.colspan===1;}function P1(){var Q1;for(var i=0;i<r.length;i++){Q1=e.getAt(i,M1);if(Q1){return Q1;}}return null;}return g1(N1,O1,P1);});}function i1(e){var j=f1(0,e.grid.maxCols);var r=f1(0,e.grid.maxRows);return T.map(r,function(M1){function N1(){var Q1=[];for(var i=0;i<j.length;i++){var R1=e.getAt(M1,i);if(R1&&R1.rowIndex===M1){Q1.push(R1);}}return Q1;}function O1(i){return i.rowspan===1;}function P1(){return e.getAt(M1,0);}return g1(N1,O1,P1);});}function j1(e){var i=d1(e);var j=e1(i);var r=i1(j);var M1=h1(j);var N1=k.dom.getPos(e);var O1=r.length>0?Z(I,J,r):[];var P1=M1.length>0?Z(P,Q,M1):[];b1(O1,e.offsetWidth,N1);c1(P1,e.offsetHeight,N1);}function k1(e,r,M1,N1){if(r<0||r>=e.length-1){return"";}var O1=e[r];if(O1){O1={value:O1,delta:0};}else{var P1=e.slice(0,r).reverse();for(var i=0;i<P1.length;i++){if(P1[i]){O1={value:P1[i],delta:i+1};}}}var Q1=e[r+1];if(Q1){Q1={value:Q1,delta:1};}else{var R1=e.slice(r+1);for(var j=0;j<R1.length;j++){if(R1[j]){Q1={value:R1[j],delta:j+1};}}}var S1=Q1.delta-O1.delta;var T1=Math.abs(Q1.value-O1.value)/S1;return M1?T1/U(N1,'width')*100:T1;}function l1(e,i){var j=k.dom.getStyle(e,i);if(!j){j=k.dom.getAttrib(e,i);}if(!j){j=k.dom.getStyle(e,i,true);}return j;}function m1(e,i,j){var r=l1(e,'width');var M1=parseInt(r,10);var N1=i?S(e,j):U(e,'width');if(i&&!v1(r)||!i&&!w1(r)){M1=0;}return!isNaN(M1)&&M1>0?M1:N1;}function n1(e,j,r){var M1=h1(e);var N1=T.map(M1,function(R1){return P(R1.colIndex,R1.element).x;});var O1=[];for(var i=0;i<M1.length;i++){var P1=M1[i].element.hasAttribute('colspan')?parseInt(M1[i].element.getAttribute('colspan'),10):1;var Q1=P1>1?k1(N1,i):m1(M1[i].element,j,r);Q1=Q1?Q1:x;O1.push(Q1);}return O1;}function o1(e){var i=l1(e,'height');var j=parseInt(i,10);if(v1(i)){j=0;}return!isNaN(j)&&j>0?j:U(e,'height');}function p1(e){var r=i1(e);var j=T.map(r,function(P1){return I(P1.rowIndex,P1.element).y;});var M1=[];for(var i=0;i<r.length;i++){var N1=r[i].element.hasAttribute('rowspan')?parseInt(r[i].element.getAttribute('rowspan'),10):1;var O1=N1>1?k1(j,i):o1(r[i].element);O1=O1?O1:y;M1.push(O1);}return M1;}function q1(e,i,j,r,M1){var N1=e.slice(0);function O1(T1){return T.map(T1,function(){return 0;});}function P1(){var S1;if(M1){S1=[100-N1[0]];}else{var T1=Math.max(r,N1[0]+j);S1=[T1-N1[0]];}return S1;}function Q1(T1,U1){var V1=O1(N1.slice(0,T1));var W1=O1(N1.slice(U1+1));var S1;if(j>=0){var X1=Math.max(r,N1[U1]-j);S1=V1.concat([j,X1-N1[U1]]).concat(W1);}else{var Y1=Math.max(r,N1[T1]+j);var Z1=N1[T1]-Y1;S1=V1.concat([Y1-N1[T1],Z1]).concat(W1);}return S1;}function R1(T1,U1){var V1=O1(N1.slice(0,U1));var S1;if(j>=0){S1=V1.concat([j]);}else{var W1=Math.max(r,N1[U1]+j);S1=V1.concat([W1-N1[U1]]);}return S1;}var S1;if(e.length===0){S1=[];}else if(e.length===1){S1=P1();}else if(i===0){S1=Q1(0,1);}else if(i>0&&i<e.length-1){S1=Q1(i,i+1);}else if(i===e.length-1){S1=R1(i-1,i);}else{S1=[];}return S1;}function r1(e,j,M1){var r=0;for(var i=e;i<j;i++){r+=M1[i];}return r;}function s1(e,i){var j=e.getAllCells();return T.map(j,function(r){var M1=r1(r.colIndex,r.colIndex+r.colspan,i);return{element:r.element,width:M1,colspan:r.colspan};});}function t1(e,i){var j=e.getAllCells();return T.map(j,function(r){var M1=r1(r.rowIndex,r.rowIndex+r.rowspan,i);return{element:r.element,height:M1,rowspan:r.rowspan};});}function u1(e,j){var r=e.getAllRows();return T.map(r,function(M1,i){return{element:M1.element,height:j[i]};});}function v1(e){return A.test(e);}function w1(e){return B.test(e);}function x1(e,j,r){var M1=d1(e);var N1=e1(M1);function O1(X1,Y1){T.each(X1,function($1){k.dom.setStyle($1.element,'width',$1.width+Y1);k.dom.setAttrib($1.element,'width',null);});}function P1(){return r<N1.grid.maxCols-1?W(e):W(e)+Y(e,j);}function Q1(){return r<N1.grid.maxCols-1?U(e,'width'):U(e,'width')+j;}function R1(Z1,Y1,$1){if(r==N1.grid.maxCols-1||!$1){k.dom.setStyle(e,'width',Z1+Y1);k.dom.setAttrib(e,'width',null);}}var S1=v1(e.width)||v1(e.style.width);var T1=n1(N1,S1,e);var U1=S1?X(e,j):j;var V1=q1(T1,r,U1,x,S1,e);var W1=[];for(var i=0;i<V1.length;i++){W1.push(V1[i]+T1[i]);}var X1=s1(N1,W1);var Y1=S1?'%':'px';var Z1=S1?P1():Q1();k.undoManager.transact(function(){O1(X1,Y1);R1(Z1,Y1,S1);});}function y1(e,j,r){var M1=d1(e);var N1=e1(M1);var O1=p1(N1);var P1=[],Q1=0;for(var i=0;i<O1.length;i++){P1.push(i===r?j+O1[i]:O1[i]);Q1+=Q1[i];}var R1=t1(N1,P1);var S1=u1(N1,P1);k.undoManager.transact(function(){T.each(S1,function(T1){k.dom.setStyle(T1.element,'height',T1.height+'px');k.dom.setAttrib(T1.element,'height',null);});T.each(R1,function(T1){k.dom.setStyle(T1.element,'height',T1.height+'px');k.dom.setAttrib(T1.element,'height',null);});k.dom.setStyle(e,'height',Q1+'px');k.dom.setAttrib(e,'height',null);});}function z1(){C=setTimeout(function(){D1();},200);}function A1(){clearTimeout(C);}function B1(){var e=document.createElement('div');e.setAttribute('style','margin: 0; '+'padding: 0; '+'position: fixed; '+'left: 0px; '+'top: 0px; '+'height: 100%; '+'width: 100%;');e.setAttribute('data-mce-bogus','all');return e;}function C1(i,j){k.dom.bind(i,'mouseup',function(){D1();});k.dom.bind(i,'mousemove',function(e){A1();if(D){j(e);}});k.dom.bind(i,'mouseout',function(){z1();});}function D1(){k.dom.remove(E);if(D){k.dom.removeClass(F,z);D=false;var i,e;if(F1(F)){var j=parseInt(k.dom.getAttrib(F,v),10);var r=k.dom.getPos(F).x;i=parseInt(k.dom.getAttrib(F,t),10);e=M()?j-r:r-j;if(Math.abs(e)>=1){x1(c,e,i);}}else if(G1(F)){var M1=parseInt(k.dom.getAttrib(F,p),10);var N1=k.dom.getPos(F).y;i=parseInt(k.dom.getAttrib(F,o),10);e=N1-M1;if(Math.abs(e)>=1){y1(c,e,i);}}_(c);k.nodeChanged();}}function E1(e,i){E=E?E:B1();D=true;k.dom.addClass(e,z);F=e;C1(E,i);k.dom.add(O(),E);}function F1(e){return k.dom.hasClass(e,q);}function G1(e){return k.dom.hasClass(e,l);}function H1(e){G=G!==u?G:e.clientX;var i=e.clientX-G;G=e.clientX;var j=k.dom.getPos(F).x;k.dom.setStyle(F,'left',j+i+'px');}function I1(e){H=H!==u?H:e.clientY;var i=e.clientY-H;H=e.clientY;var j=k.dom.getPos(F).y;k.dom.setStyle(F,'top',j+i+'px');}function J1(e){G=u;E1(e,H1);}function K1(e){H=u;E1(e,I1);}function L1(e){var i=e.target,j=k.getBody();if(!k.$.contains(j,c)&&c!==j){return;}if(F1(i)){e.preventDefault();var r=k.dom.getPos(i).x;k.dom.setAttrib(i,v,r);J1(i);}else if(G1(i)){e.preventDefault();var M1=k.dom.getPos(i).y;k.dom.setAttrib(i,p,M1);K1(i);}else{$();}}k.on('init',function(){k.dom.bind(O(),'mousedown',L1);});k.on('ObjectResized',function(e){var i=e.target;if(i.nodeName==='TABLE'){var j=[];T.each(i.rows,function(r){T.each(r.cells,function(M1){var N1=k.dom.getStyle(M1,'width',true);j.push({cell:M1,width:N1});});});T.each(j,function(r){k.dom.setStyle(r.cell,'width',r.width);k.dom.setAttrib(r.cell,'width',null);});}});k.on('mouseover',function(e){if(!D){var i=k.dom.getParent(e.target,'table');if(e.target.nodeName==='TABLE'||i){c=i;_(i);}}});k.on('keydown',function(e){switch(e.keyCode){case V.LEFT:case V.RIGHT:case V.UP:case V.DOWN:$();break;}});k.on('remove',function(){$();k.dom.unbind(O(),'mousedown',L1);});return{adjustWidth:x1,adjustHeight:y1,clearBars:$,drawBars:j1,determineDeltas:q1,getTableGrid:e1,getTableDetails:d1,getWidths:n1,getPixelHeights:p1,isPercentageBasedSize:v1,isPixelBasedSize:w1,recalculateWidths:s1,recalculateCellHeights:t1,recalculateRowHeights:u1};};});d("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(T,Q,C,D,R,c,j,E,P){var k=c.each;function l(n){var o,s=this,p=new D(n),r;if(n.settings.object_resizing&&n.settings.table_resize_bars!==false&&(n.settings.object_resizing===true||n.settings.object_resizing==='table')){r=R(n);}function q(e){return function(){n.execCommand(e);};}function t(e,i){var y,x,M,N;M='<table id="__mce"><tbody>';for(y=0;y<i;y++){M+='<tr>';for(x=0;x<e;x++){M+='<td>'+(E.ie&&E.ie<10?'&nbsp;':'<br>')+'</td>';}M+='</tr>';}M+='</tbody></table>';n.undoManager.transact(function(){n.insertContent(M);N=n.dom.get('__mce');n.dom.setAttrib(N,'id',null);n.$('tr',N).each(function(O,S){n.fire('newrow',{node:S});n.$('th,td',S).each(function(O,U){n.fire('newcell',{node:U});});});n.dom.setAttribs(N,n.settings.table_default_attributes||{});n.dom.setStyles(N,n.settings.table_default_styles||{});});return N;}function v(e,i,x){function y(){var M,N,O={},S=0,U;N=n.dom.select('td[data-mce-selected],th[data-mce-selected]');M=N[0];if(!M){M=n.selection.getStart();}if(x&&N.length>0){k(N,function(V){return O[V.parentNode.parentNode.nodeName]=1;});k(O,function(V){S+=V;});U=S!==1;}else{U=!n.dom.getParent(M,i);}e.disabled(U);n.selection.selectorChanged(i,function(U){e.disabled(!U);});}if(n.initialized){y();}else{n.on('init',y);}}function w(){v(this,'table');}function z(){v(this,'td,th');}function A(){v(this,'td,th',true);}function B(){var e='';e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var y=0;y<10;y++){e+='<tr>';for(var x=0;x<10;x++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(y*10+x)+'" href="#" '+'data-mce-x="'+x+'" data-mce-y="'+y+'"></a></td>';}e+='</tr>';}e+='</table>';e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e;}function F(e,i,M){var N=M.getEl().getElementsByTagName('table')[0];var x,y,O,S,U;var V=M.isRtl()||M.parent().rel=='tl-tr';N.nextSibling.innerHTML=(e+1)+' x '+(i+1);if(V){e=9-e;}for(y=0;y<10;y++){for(x=0;x<10;x++){S=N.rows[y].childNodes[x].firstChild;U=(V?x>=e:x<=e)&&y<=i;n.dom.toggleClass(S,'mce-active',U);if(U){O=S;}}}return O.parentNode;}if(n.settings.table_grid===false){n.addMenuItem('inserttable',{text:'Table',icon:'table',context:'table',onclick:p.table});}else{n.addMenuItem('inserttable',{text:'Table',icon:'table',context:'table',ariaHideMenu:true,onclick:function(e){if(e.aria){this.parent().hideAll();e.stopImmediatePropagation();p.table();}},onshow:function(){F(0,0,this.menu.items()[0]);},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName('a');n.dom.removeClass(e,'mce-active');n.dom.addClass(e[0],'mce-active');},menu:[{type:'container',html:B(),onPostRender:function(){this.lastX=this.lastY=0;},onmousemove:function(e){var i=e.target,x,y;if(i.tagName.toUpperCase()=='A'){x=parseInt(i.getAttribute('data-mce-x'),10);y=parseInt(i.getAttribute('data-mce-y'),10);if(this.isRtl()||this.parent().rel=='tl-tr'){x=9-x;}if(x!==this.lastX||y!==this.lastY){F(x,y,e.control);this.lastX=x;this.lastY=y;}}},onclick:function(e){var s=this;if(e.target.tagName.toUpperCase()=='A'){e.preventDefault();e.stopPropagation();s.parent().cancel();n.undoManager.transact(function(){t(s.lastX+1,s.lastY+1);});n.addVisual();}}}]});}n.addMenuItem('tableprops',{text:'Table properties',context:'table',onPostRender:w,onclick:p.tableProps});n.addMenuItem('deletetable',{text:'Delete table',context:'table',onPostRender:w,cmd:'mceTableDelete'});n.addMenuItem('cell',{separator:'before',text:'Cell',context:'table',menu:[{text:'Cell properties',onclick:q('mceTableCellProps'),onPostRender:z},{text:'Merge cells',onclick:q('mceTableMergeCells'),onPostRender:A},{text:'Split cell',onclick:q('mceTableSplitCells'),onPostRender:z}]});n.addMenuItem('row',{text:'Row',context:'table',menu:[{text:'Insert row before',onclick:q('mceTableInsertRowBefore'),onPostRender:z},{text:'Insert row after',onclick:q('mceTableInsertRowAfter'),onPostRender:z},{text:'Delete row',onclick:q('mceTableDeleteRow'),onPostRender:z},{text:'Row properties',onclick:q('mceTableRowProps'),onPostRender:z},{text:'-'},{text:'Cut row',onclick:q('mceTableCutRow'),onPostRender:z},{text:'Copy row',onclick:q('mceTableCopyRow'),onPostRender:z},{text:'Paste row before',onclick:q('mceTablePasteRowBefore'),onPostRender:z},{text:'Paste row after',onclick:q('mceTablePasteRowAfter'),onPostRender:z}]});n.addMenuItem('column',{text:'Column',context:'table',menu:[{text:'Insert column before',onclick:q('mceTableInsertColBefore'),onPostRender:z},{text:'Insert column after',onclick:q('mceTableInsertColAfter'),onPostRender:z},{text:'Delete column',onclick:q('mceTableDeleteCol'),onPostRender:z}]});var G=[];k("inserttable tableprops deletetable | cell row column".split(' '),function(e){if(e=='|'){G.push({text:'-'});}else{G.push(n.menuItems[e]);}});n.addButton("table",{type:"menubutton",title:"Table",menu:G});if(!E.isIE){n.on('click',function(e){e=e.target;if(e.nodeName==='TABLE'){n.selection.select(e);n.nodeChanged();}});}s.quirks=new Q(n);n.on('Init',function(){s.cellSelection=new C(n,function(e){if(e&&r){r.clearBars();}});s.resizeBars=r;});n.on('PreInit',function(){n.serializer.addAttributeFilter('data-mce-cell-padding,data-mce-border,data-mce-border-color',function(e,x){var i=e.length;while(i--){e[i].attr(x,null);}});});k({mceTableSplitCells:function(e){e.split();},mceTableMergeCells:function(e){var i;i=n.dom.getParent(n.selection.getStart(),'th,td');if(!n.dom.select('td[data-mce-selected],th[data-mce-selected]').length){p.merge(e,i);}else{e.merge();}},mceTableInsertRowBefore:function(e){e.insertRows(true);},mceTableInsertRowAfter:function(e){e.insertRows();},mceTableInsertColBefore:function(e){e.insertCols(true);},mceTableInsertColAfter:function(e){e.insertCols();},mceTableDeleteCol:function(e){e.deleteCols();},mceTableDeleteRow:function(e){e.deleteRows();},mceTableCutRow:function(e){o=e.cutRows();},mceTableCopyRow:function(e){o=e.copyRows();},mceTablePasteRowBefore:function(e){e.pasteRows(o,true);},mceTablePasteRowAfter:function(e){e.pasteRows(o);},mceSplitColsBefore:function(e){e.splitCols(true);},mceSplitColsAfter:function(e){e.splitCols(false);},mceTableDelete:function(e){if(r){r.clearBars();}e.deleteTable();}},function(e,i){n.addCommand(i,function(){var x=new T(n);if(x){e(x);n.execCommand('mceRepaint');s.cellSelection.clear();}});});k({mceInsertTable:p.table,mceTableProps:function(){p.table(true);},mceTableRowProps:p.row,mceTableCellProps:p.cell},function(e,i){n.addCommand(i,function(x,y){e(y);});});function H(){n.addButton('tableprops',{title:'Table properties',onclick:p.tableProps,icon:'table'});n.addButton('tabledelete',{title:'Delete table',onclick:q('mceTableDelete')});n.addButton('tablecellprops',{title:'Cell properties',onclick:q('mceTableCellProps')});n.addButton('tablemergecells',{title:'Merge cells',onclick:q('mceTableMergeCells')});n.addButton('tablesplitcells',{title:'Split cell',onclick:q('mceTableSplitCells')});n.addButton('tableinsertrowbefore',{title:'Insert row before',onclick:q('mceTableInsertRowBefore')});n.addButton('tableinsertrowafter',{title:'Insert row after',onclick:q('mceTableInsertRowAfter')});n.addButton('tabledeleterow',{title:'Delete row',onclick:q('mceTableDeleteRow')});n.addButton('tablerowprops',{title:'Row properties',onclick:q('mceTableRowProps')});n.addButton('tablecutrow',{title:'Cut row',onclick:q('mceTableCutRow')});n.addButton('tablecopyrow',{title:'Copy row',onclick:q('mceTableCopyRow')});n.addButton('tablepasterowbefore',{title:'Paste row before',onclick:q('mceTablePasteRowBefore')});n.addButton('tablepasterowafter',{title:'Paste row after',onclick:q('mceTablePasteRowAfter')});n.addButton('tableinsertcolbefore',{title:'Insert column before',onclick:q('mceTableInsertColBefore')});n.addButton('tableinsertcolafter',{title:'Insert column after',onclick:q('mceTableInsertColAfter')});n.addButton('tabledeletecol',{title:'Delete column',onclick:q('mceTableDeleteCol')});}function I(e){var i=n.dom.is(e,'table')&&n.getBody().contains(e);return i;}function J(){var e=n.settings.table_toolbar;if(e===''||e===false){return;}if(!e){e='tableprops tabledelete | '+'tableinsertrowbefore tableinsertrowafter tabledeleterow | '+'tableinsertcolbefore tableinsertcolafter tabledeletecol';}n.addContextToolbar(I,e);}function K(){return o;}function L(e){o=e;}H();J();if(n.settings.table_tab_navigation!==false){n.on('keydown',function(e){var i,x,y;if(e.keyCode==9){i=n.dom.getParent(n.selection.getStart(),'th,td');if(i){e.preventDefault();x=new T(n);y=e.shiftKey?-1:1;n.undoManager.transact(function(){if(!x.moveRelIdx(i,y)&&y>0){x.insertRow();x.refresh();x.moveRelIdx(i,y);}});}}});}s.insertTable=t;s.setClipboardRows=L;s.getClipboardRows=K;}P.add('table',l);});})(window);

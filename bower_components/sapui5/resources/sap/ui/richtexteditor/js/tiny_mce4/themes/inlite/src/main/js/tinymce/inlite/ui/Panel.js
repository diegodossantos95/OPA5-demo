define('tinymce/inlite/ui/Panel',['global!tinymce.util.Tools','global!tinymce.ui.Factory','global!tinymce.DOM','tinymce/inlite/ui/Toolbar','tinymce/inlite/ui/Forms','tinymce/inlite/core/Measure','tinymce/inlite/core/Layout','tinymce/inlite/alien/EditorSettings'],function(T,F,D,a,b,M,L,E){return function(){var c=['bold','italic','|','quicklink','h2','h3','blockquote'];var d=['quickimage','quicktable'];var p,e;var f=function(x,y){return T.map(y,function(z){return a.create(x,z.id,z.items);});};var g=function(x){return E.getToolbarItemsOr(x,'selection_toolbar',c);};var h=function(x){return E.getToolbarItemsOr(x,'insert_toolbar',d);};var i=function(x){return x.items().length>0;};var j=function(x,y){var z=f(x,y).concat([a.create(x,'text',g(x)),a.create(x,'insert',h(x)),b.createQuickLinkForm(x,r)]);return F.create({type:'floatpanel',role:'dialog',classes:'tinymce tinymce-inline arrow',ariaLabel:'Inline toolbar',layout:'flex',direction:'column',align:'stretch',autohide:false,autofix:true,fixed:true,border:1,items:T.grep(z,i),oncancel:function(){x.focus();}});};var s=function(p){if(p){p.show();}};var m=function(p,x){p.moveTo(x.x,x.y);};var t=function(p,x){x=x?x.substr(0,2):'';T.each({t:'down',b:'up',c:'center'},function(y,z){p.classes.toggle('arrow-'+y,z===x.substr(0,1));});if(x==='cr'){p.classes.toggle('arrow-left',true);p.classes.toggle('arrow-right',false);}else if(x==='cl'){p.classes.toggle('arrow-left',true);p.classes.toggle('arrow-right',true);}else{T.each({l:'left',r:'right'},function(y,z){p.classes.toggle('arrow-'+y,z===x.substr(1,1));});}};var k=function(p,x){var y=p.items().filter('#'+x);if(y.length>0){y[0].show();p.reflow();return true;}return false;};var l=function(p,x,y,z){var A,B,C,G;s(p);p.items().hide();if(!k(p,x)){r(p);return;}G=E.getHandlerOr(y,'inline_toolbar_position_handler',L.defaultHandler);A=M.getContentAreaRect(y);B=D.getRect(p.getEl());if(x==='insert'){C=L.calcInsert(z,A,B);}else{C=L.calc(z,A,B);}if(C){B=C.rect;e=z;m(p,L.userConstrain(G,z,A,B));t(p,C.position);}else{r(p);}};var n=function(){return p.items().filter('form:visible').length>0;};var o=function(x,y){if(p){p.items().hide();if(!k(p,y)){r(p);return;}var z,A,B,C;s(p);p.items().hide();k(p,y);C=E.getHandlerOr(x,'inline_toolbar_position_handler',L.defaultHandler);z=M.getContentAreaRect(x);A=D.getRect(p.getEl());B=L.calc(e,z,A);if(B){A=B.rect;m(p,L.userConstrain(C,e,z,A));t(p,B.position);}}};var q=function(x,y,z,A){if(!p){p=j(x,A);p.renderTo(document.body).reflow().moveTo(z.x,z.y);x.nodeChanged();}l(p,y,x,z);};var r=function(){if(p){p.hide();}};var u=function(){if(p){p.find('toolbar:visible').eq(0).each(function(x){x.focus(true);});}};var v=function(){if(p){p.remove();p=null;}};var w=function(){return p&&p.visible()&&n();};return{show:q,showForm:o,inForm:w,hide:r,focus:u,remove:v};};});

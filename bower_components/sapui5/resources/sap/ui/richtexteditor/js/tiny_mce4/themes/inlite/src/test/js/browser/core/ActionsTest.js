asynctest('browser/core/ActionsTest',['ephox.mcagar.api.TinyLoader','ephox.mcagar.api.TinyApis','tinymce/inlite/core/Actions','ephox.agar.api.Pipeline','ephox.agar.api.Step','ephox.agar.api.GeneralSteps'],function(T,a,A,P,S,G){var s=arguments[arguments.length-2];var b=arguments[arguments.length-1];var w=function(f,g){return function(){var h=Array.prototype.slice.call(arguments);return S.sync(function(){f.apply(null,[].concat(g).concat(h));});};};var I=function(f,t){var i=function(g,r,h,m){var j=w(A.insertTable,f);return G.sequence([t.sSetContent(''),j(g,r),t.sAssertContent(h,m)]);};return G.sequence([i(2,3,['<table style="width: 100%;">','<tbody>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','</tbody>','</table>'].join('\n'),'Should be a 2x3 table'),i(3,2,['<table style="width: 100%;">','<tbody>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','<tr>','<td>&nbsp;</td>','<td>&nbsp;</td>','<td>&nbsp;</td>','</tr>','</tbody>','</table>'].join('\n'),'Should be a 3x2 table')]);};var F=function(f,t){var g=function(n){var h=w(A.formatBlock,f);return G.sequence([t.sSetContent('<p>a</p>'),t.sSetCursor([0],0),h(n),t.sAssertContent('<'+n+'>a</'+n+'>','Should be a '+n+' block')]);};return G.sequence([g('h1'),g('h2'),g('pre')]);};var c=function(f,t){var C=function(i,g,p,o,h,O,j){var k=w(A.createLink,f);return G.sequence([t.sSetContent(i),t.sSetSelection(p,o,h,O),k(g),t.sAssertContent(j,'Should have a link')]);};return G.sequence([C('<p>a</p>','#1',[0,0],0,[0,0],1,'<p><a href="#1">a</a></p>'),C('<p><a href="#1">a</a></p>','#2',[0,0],0,[0,0],1,'<p><a href="#2">a</a></p>'),C('<p><a href="#1"><em>a</em></a></p>','#2',[0,0,0],0,[0,0,0],1,'<p><a href="#2"><em>a</em></a></p>')]);};var u=function(f,t){var U=function(i,p,o,g,O,h){var j=w(A.unlink,f);return G.sequence([t.sSetContent(i),t.sSetSelection(p,o,g,O),j(),t.sAssertContent(h,'Should not have a link')]);};return G.sequence([U('<p>a</p>',[0,0],0,[0,0],1,'<p>a</p>'),U('<p><a href="#">a</a></p>',[0,0,0],0,[0,0,0],1,'<p>a</p>'),U('<p><a href="#"><em>a</em></a></p>',[0,0,0],0,[0,0,0],1,'<p><em>a</em></p>'),U('<p><a href="#">a</a>b</p>',[0,0,0],0,[0,1],1,'<p>ab</p>')]);};var d=function(f,t){var g=atob(f);var h=new Uint8Array(g.length);for(var i=0;i<h.length;i++){h[i]=g.charCodeAt(i);}return new Blob([h],{type:t});};var e=function(f,t){var i=function(j,p,o,h,g,k){var l=w(A.insertBlob,f);return G.sequence([t.sSetContent(j),t.sSetCursor(p,o),l(h,g),t.sAssertContent(k,'Should have a image')]);};var g='R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';var h=d(g,'image/gif');return G.sequence([i('<p>a</p>',[0,0],0,g,h,'<p><img src="data:image/gif;base64,'+g+'" />a</p>')]);};T.setup(function(f,o,g){var t=a(f);P.async({},[I(f,t),F(f,t),e(f,t),c(f,t),u(f,t)],o,g);},{inline:true},s,b);});

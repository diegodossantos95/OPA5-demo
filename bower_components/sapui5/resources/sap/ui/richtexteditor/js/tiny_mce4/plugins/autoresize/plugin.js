tinymce.PluginManager.add('autoresize',function(a){var s=a.settings,o=0;function i(){return a.plugins.fullscreen&&a.plugins.fullscreen.isFullscreen();}if(a.settings.inline){return;}function r(e){var d,b,c,f,D=tinymce.DOM,g,m,h,j,p,k,l,n;b=a.getDoc();if(!b){return;}c=b.body;f=b.documentElement;g=s.autoresize_min_height;if(!c||(e&&e.type==="setcontent"&&e.initial)||i()){if(c&&f){c.style.overflowY="auto";f.style.overflowY="auto";}return;}h=a.dom.getStyle(c,'margin-top',true);j=a.dom.getStyle(c,'margin-bottom',true);p=a.dom.getStyle(c,'padding-top',true);k=a.dom.getStyle(c,'padding-bottom',true);l=a.dom.getStyle(c,'border-top-width',true);n=a.dom.getStyle(c,'border-bottom-width',true);m=c.offsetHeight+parseInt(h,10)+parseInt(j,10)+parseInt(p,10)+parseInt(k,10)+parseInt(l,10)+parseInt(n,10);if(isNaN(m)||m<=0){m=tinymce.Env.ie?c.scrollHeight:(tinymce.Env.webkit&&c.clientHeight===0?0:c.offsetHeight);}if(m>s.autoresize_min_height){g=m;}if(s.autoresize_max_height&&m>s.autoresize_max_height){g=s.autoresize_max_height;c.style.overflowY="auto";f.style.overflowY="auto";}else{c.style.overflowY="hidden";f.style.overflowY="hidden";c.scrollTop=0;}if(g!==o){d=g-o;D.setStyle(a.iframeElement,'height',g+'px');o=g;if(tinymce.isWebKit&&d<0){r(e);}}}function w(t,b,c){tinymce.util.Delay.setEditorTimeout(a,function(){r({});if(t--){w(t,b,c);}else if(c){c();}},b);}s.autoresize_min_height=parseInt(a.getParam('autoresize_min_height',a.getElement().offsetHeight),10);s.autoresize_max_height=parseInt(a.getParam('autoresize_max_height',0),10);a.on("init",function(){var b,c;b=a.getParam('autoresize_overflow_padding',1);c=a.getParam('autoresize_bottom_margin',50);if(b!==false){a.dom.setStyles(a.getBody(),{paddingLeft:b,paddingRight:b});}if(c!==false){a.dom.setStyles(a.getBody(),{paddingBottom:c});}});a.on("nodechange setcontent keyup FullscreenStateChanged",r);if(a.getParam('autoresize_on_init',true)){a.on('init',function(){w(20,100,function(){w(5,1000);});});}a.addCommand('mceAutoResize',r);});

/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/comp/config/condition/Type','sap/m/Input','sap/m/DateRangeSelection','sap/m/DatePicker','sap/m/Text','sap/m/Select','sap/ui/core/date/UniversalDate','sap/ui/core/Locale','sap/ui/core/LocaleData','sap/ui/model/odata/Filter'],function(q,T,I,D,a,b,S,U,L,c,F){"use strict";sap.ui.model.type.Integer.extend("sap.ui.model.type.NullableInteger",{parseValue:function(v,i){switch(this.getPrimitiveType(i)){case"string":if(v===""){return null;}}return sap.ui.model.type.Integer.prototype.parseValue.apply(this,arguments);}});var d=T.extend("sap.ui.comp.config.condition.DateRangeType",{constructor:function(f,o,e){T.apply(this,[f,o,e]);this.oDateFormat=o&&o._oDateFormatSettings?o._oDateFormatSettings:{UTC:true};this._bIgnoreTime=false;this._maxIntValue=10000;this.bMandatory=this.oFieldMetadata?this.oFieldMetadata.isMandatory:false;}});d.prototype.applySettings=function(s){T.prototype.applySettings.apply(this,arguments);if(s&&s.ignoreTime){this._bIgnoreTime=s.ignoreTime;}};d.setStartTime=function(o){if(o instanceof Date){o=new U(o);}if(!o){o=new U();}o.setHours(0);o.setMinutes(0);o.setSeconds(0);o.setMilliseconds(0);return o;};d.setEndTime=function(o){o=d.toUniversalDate(o);o.setHours(23);o.setMinutes(59);o.setSeconds(59);o.setMilliseconds(999);return o;};d.toUniversalDate=function(o){if(o instanceof Date){o=new U(o);}if(!o){o=new U();}return o;};d.getWeekStartDate=function(u){var l=new L(sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().toString()),o=c.getInstance(l),f=o.getFirstDayOfWeek();if(!u){u=new U();}u.setDate(u.getDate()-u.getDay()+f);return d.setStartTime(u);};d.getMonthStartDate=function(u){if(!u){u=new U();}u.setDate(1);return d.setStartTime(u);};d.getQuarterStartDate=function(u){if(!u){u=new U();}u.setMonth(3*Math.floor(u.getMonth()/3));u.setDate(1);return d.setStartTime(u);};d.getYearStartDate=function(u){if(!u){u=new U();}u.setMonth(0);u.setDate(1);return d.setStartTime(u);};d.getDateRange=function(v,t,u,C,i){if(u===true){C=true;u=null;}if(!u){u=new U();}else if(!(u instanceof U)){throw new Error("Date must be a UniversalDate object "+this);}var s=new U(),e;if(u){s.getJSDate().setTime(u.getTime());s=d.setStartTime(s);}if(v!==0&&!isNaN(v)){if(t==="DAY"){if(i&&v>0){s.setDate(s.getDate()+1);}e=new U(s);e.setDate(s.getDate()+v);}else if(t==="WEEK"){if(C){s=d.getWeekStartDate(s);}if(i&&v>0){s.setDate(s.getDate()+7);}e=new U(s);e.setDate(s.getDate()+(v*7));}else if(t==="MONTH"){if(C){s=d.getMonthStartDate(s);}if(i&&v>0){s.setMonth(s.getMonth()+1);}e=new U(s);e.setMonth(s.getMonth()+v);}else if(t==="QUARTER"){if(C){s=d.getQuarterStartDate(s);}if(i&&v>0){s.setMonth(s.getMonth()+3);}e=new U(s);e.setMonth(s.getMonth()+(v*3));}else if(t==="YEAR"){if(C){s=d.getYearStartDate(s);}if(i&&v>0){s.setFullYear(s.getFullYear()+1);}e=new U(s);e.setFullYear(s.getFullYear()+v);}}if(!e){return[];}if(e.getTime()<s.getTime()){e=[s,s=e][0];}e.setDate(e.getDate()-1);return[d.setStartTime(s),d.setEndTime(e)];};d.getTextField=function(i,e){if(e){return new b(T._createStableId(i,"text"),{text:"{path: '$smartEntityFilter>value1', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:i.oDateFormat.style,pattern:i.oDateFormat.pattern})+"} - {path: '$smartEntityFilter>value2', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:i.oDateFormat.style,pattern:i.oDateFormat.pattern})+"}"});}return new b(T._createStableId(i,"text"),{text:{path:'$smartEntityFilter>value1',type:'sap.ui.model.type.Date',formatOptions:{style:i.oDateFormat.style,pattern:i.oDateFormat.pattern}}});};d.getIntField=function(i){return new I(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,value:{path:"$smartEntityFilter>value1",type:new sap.ui.model.type.NullableInteger({},{minimum:0,maximum:i._maxIntValue})},textAlign:"End",width:"100%"});};d.ControlFactory=function(i,r,o){if(o.type==="range"){var C=d.getTextField(i,o.display!=="start");C.addStyleClass("sapUiCompFilterBarCTPaddingTop");r.push(C);return;}if(o.type==="int"){var C=d.getIntField(i);r.push(C);if(o.descriptionTextKeys){C.setFieldWidth("auto");C.bindProperty("description",{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer",formatter:function(){var t=o.descriptionTextKeys[0];var s=o.descriptionTextKeys[1];if(this.getBinding("description").getValue()===1){return T.getTranslatedText(t);}else{return T.getTranslatedText(s||t);}}});}}};d._defaultOnChangeHandler=function(v,i){if(v.toLowerCase()===this.languageText.toLowerCase()){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("inputstate","NONE",i.getContext());if(this.category.indexOf("FIXED")!==0){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}return false;};d._IntOnChangeHandler=function(v,i){if(this.basicLanguageText.indexOf("{0}")>=0){var r=new RegExp(this.basicLanguageText.replace("{0}","[a-zA-Z0-9_]+")+"$",'i');if(v.match(r)){var x=this.basicLanguageText.indexOf("{0}");if(x>=0){var n=this.basicLanguageText.length-x;v=v.slice(0,v.length-n+3);v=v.slice(x);var V=parseInt(v,10);if(!isNaN(V)&&V<=i._maxIntValue){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",V);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}}return false;};d._DateOnChangeHandler=function(v,i){if(v.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=v.slice(this.languageText.length);if(s.length>0&&s[0]===" "){s=s.trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var o=i._getDateFormatter(true);var e=o.parse(s);if(e){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",e);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}return false;};d._DateRangeOnChangeHandler=function(v,i){if(v.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=v.slice(this.languageText.length).trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var V=s.split("-")[0];var e=s.split("-")[1];var o=i._getDateFormatter(true);var f=o.parse(V);var g=o.parse(e);if(f&&g){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",f);i.oModel.setProperty("/condition/value2",g);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}return false;};d._MonthOnChangeHandler=function(v,i){var m;var r=false;if(v.toLowerCase().indexOf(this.languageText.toLowerCase())===0){m=v.slice(this.languageText.length).trim();if(m.indexOf("(")==0){m=m.slice(1);m=m.slice(0,m.length-1);}r=true;}else{m=v;}var M=this.getValueList();var e=-1;M.some(function(o,f){var r=o.text.toLowerCase()===m.toLowerCase();if(r){e=f;}return r;});if(e>-1){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",e);i.oModel.setProperty("inputstate","NONE",i.getContext());return true;}else{if(r){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return r;}};d._DefaultFilterSuggestItem=function(v,o,e){var m=false;if(q.sap.startsWithIgnoreCase(this.languageText.toLowerCase(),v.toLowerCase())){m=true;}else{var w=this.languageText.split(" ");for(var i=0;i<w.length;i++){var W=w[i];if(q.sap.startsWithIgnoreCase(W.toLowerCase(),v.toLowerCase())){m=true;}}}o.setAdditionalText(this.textValue);o.setText(this.languageText);return m;};d._HideFilterSuggestItem=function(v,i,o){return false;};d._IntFilterSuggestItem=function(v,i,o){var x=this.basicLanguageText.indexOf("{0}");var p;var P;if(x>=0){p=this.basicLanguageText.slice(0,x).trim();P=this.basicLanguageText.slice(x+3).trim();}var e=v.split(" ");if(e.length<1||e.length>3){return false;}var m=false;var n;var f=function(v){return!!v.match(/(?!(0))(^[0-9]+$)/)&&parseInt(v,10)>0;};if(q.sap.startsWithIgnoreCase(p.toLowerCase(),e[0].toLowerCase())){if(e[1]){if(f(e[1])){n=e[1];if(e[2]){if(q.sap.startsWithIgnoreCase(P.toLowerCase(),e[2].toLowerCase())){m=true;}}else{m=true;}}}else{m=true;}}else if(f(e[0])&&e.length<3){n=e[0];if(e[1]){if(q.sap.startsWithIgnoreCase(P.toLowerCase(),e[1].toLowerCase())){m=true;}}else{m=true;}}else if(q.sap.startsWithIgnoreCase(P.toLowerCase(),e[0].toLowerCase())&&e.length==1){m=true;}if(m&&n){var t;switch(this.category){case"DYNAMIC.DATE.INT":t="DAY";break;case"DYNAMIC.WEEK.INT":t="WEEK";break;case"DYNAMIC.MONTH.INT":t="MONTH";break;case"DYNAMIC.QUARTER.INT":t="QUARTER";break;case"DYNAMIC.YEAR.INT":t="YEAR";break;default:t="DAY";break;}var N=parseInt(n,10),g=true;if(N>o._maxIntValue){m=false;}if(q.sap.startsWith(this.key,"LAST")){N=N*-1;g=false;}var h=d.getDateRange(N,t,true,g,g);var j=o._getDateFormatter(true);if(Math.abs(N)===1&&this.singulareBasicLanguageText){i.setText(this.singulareBasicLanguageText);if(t!=="DAY"){i.setAdditionalText(j.format(h[0])+" - "+j.format(h[1]));}else{i.setAdditionalText(j.format(h[0]));}}else{i.setText(o._fillNumberToText(this.basicLanguageText,n));i.setAdditionalText(j.format(h[0])+" - "+j.format(h[1]));}i._value1=parseInt(n,10);}else{i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;}return m;};d._DateFilterSuggestItem=function(v,i,o){var e=o._getDateFormatter(true);var f=e.parse(v);if(f){i.setText(this.languageText+" ("+e.format(f)+")");i._value1=f;return true;}else{i.setText(this.languageText);i._value1=null;return false;}};d._DateRangeFilterSuggestItem=function(v,i,o){var e=o._getDateFormatter(true);var f,g;var s="-";var V=false;var h=v.split(s);if(h.length===2){if(h[0].slice(h[0].length-1,h[0].length)==" "){h[0]=h[0].slice(0,h[0].length-1);}if(h[1].slice(0,1)==" "){h[1]=h[1].slice(1);}}else{h=v.split(" "+s+" ");}if(h.length<2){var j=v.split(" ");if(j.length===2){h=j;}}if(h.length>=1&&h.length<=2){f=e.parse(h[0]);if(f){i._value1=f;if(h.length==2&&h[1]===""){h.splice(1,1);}if(h.length==2){g=e.parse(h[1]);if(g){i._value2=g;V=true;i.setText(this.languageText+" ("+e.format(f)+" "+s+" "+e.format(g)+")");}}else{V=true;i.setText(this.languageText+" ("+e.format(f)+" "+s+")");}}}if(!V){i.setText(this.languageText);i._value1=null;i._value2=null;}return V;};d._MonthFilterSuggestItem=function(v,o,e){var m=false;o._value1=null;var M=this.getValueList();for(var i=0;i<M.length;i++){var f=M[i];m=q.sap.startsWithIgnoreCase(f.text.toLowerCase(),v.toLowerCase());if(m){o.setText(this.languageText+" ("+f.text+")");o._value1=i;break;}}return m;};d._DefaultOnItemSelected=function(v,i,o){o.oModel.setProperty("/condition/operation",this.key);if("value1"in this){o.oModel.setProperty("/condition/value1",i._value1);}if("value2"in this){o.oModel.setProperty("/condition/value2",i._value2);}o.oModel.setProperty("inputstate","NONE",o.getContext());o._bSuggestItemSelected=true;};d._IntOnItemSelected=function(v,i,o){var n=i._value1;o.oModel.setProperty("/condition/operation",this.key);o.oModel.setProperty("/condition/value1",n);o.oModel.setProperty("inputstate","NONE",o.getContext());o._bSuggestItemSelected=true;};d.getFixedRangeOperation=function(k,t,C,e,f,o){return{key:k,textKey:t,category:C,order:o||100,defaultValues:e||null,type:"range",display:"range",filterSuggestItem:f||d._DefaultFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:d.ControlFactory};};d.Operations={DATERANGE:{key:"DATERANGE",textKey:"CONDITION_DATERANGETYPE_DATERANGE",category:"DYNAMIC.DATERANGE",order:2,defaultOperation:true,defaultValues:[null,null],value1:null,value2:null,onChange:d._DateRangeOnChangeHandler,filterSuggestItem:d._DateRangeFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:function(i,r){var l=new sap.m.Label({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELFROM")});l.addStyleClass("sapUiCompFilterBarCTPaddingTop");r.push(l);var C=new a(T._createStableId(i,"field1"),{dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});l.setLabelFor(C);r.push(C);l=new sap.m.Label({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELTO")});l.addStyleClass("sapUiCompFilterBarCTPaddingTop");r.push(l);C=new a(T._createStableId(i,"field2"),{dateValue:{path:"$smartEntityFilter>value2"},minDate:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});l.setLabelFor(C);r.push(C);}},FROM:{key:"FROM",textKey:"CONDITION_DATERANGETYPE_FROM",category:"DYNAMIC.DATE",order:0,defaultValues:[null],value1:null,onChange:d._DateOnChangeHandler,filterSuggestItem:d._DateFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:function(i,r){var C=new a(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});r.push(C);}},TO:{key:"TO",textKey:"CONDITION_DATERANGETYPE_TO",category:"DYNAMIC.DATE",order:1,defaultValues:[null],value1:null,onChange:d._DateOnChangeHandler,filterSuggestItem:d._DateFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:function(i,r,o){var C=new a(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});r.push(C);}},LASTDAYS:{key:"LASTDAYS",textKey:"CONDITION_DATERANGETYPE_LASTDAYS",singularTextKey:"CONDITION_DATERANGETYPE_YESTERDAY",category:"DYNAMIC.DATE.INT",order:4,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTWEEKS:{key:"LASTWEEKS",textKey:"CONDITION_DATERANGETYPE_LASTWEEKS",singularTextKey:"CONDITION_DATERANGETYPE_LASTWEEK",category:"DYNAMIC.WEEK.INT",order:8,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTMONTHS:{key:"LASTMONTHS",textKey:"CONDITION_DATERANGETYPE_LASTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_LASTMONTH",category:"DYNAMIC.MONTH.INT",order:14,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTQUARTERS:{key:"LASTQUARTERS",textKey:"CONDITION_DATERANGETYPE_LASTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_LASTQUARTER",category:"DYNAMIC.QUARTER.INT",order:19,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTYEARS:{key:"LASTYEARS",textKey:"CONDITION_DATERANGETYPE_LASTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_LASTYEAR",category:"DYNAMIC.YEAR.INT",order:28,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTDAYS:{key:"NEXTDAYS",textKey:"CONDITION_DATERANGETYPE_NEXTDAYS",singularTextKey:"CONDITION_DATERANGETYPE_TOMORROW",category:"DYNAMIC.DATE.INT",order:5,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTWEEKS:{key:"NEXTWEEKS",textKey:"CONDITION_DATERANGETYPE_NEXTWEEKS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTWEEK",category:"DYNAMIC.WEEK.INT",order:10,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTMONTHS:{key:"NEXTMONTHS",textKey:"CONDITION_DATERANGETYPE_NEXTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTMONTH",category:"DYNAMIC.MONTH.INT",order:16,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTQUARTERS:{key:"NEXTQUARTERS",textKey:"CONDITION_DATERANGETYPE_NEXTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTQUARTER",category:"DYNAMIC.QUARTER.INT",order:21,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTYEARS:{key:"NEXTYEARS",textKey:"CONDITION_DATERANGETYPE_NEXTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTYEAR",category:"DYNAMIC.YEAR.INT",order:30,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},SPECIFICMONTH:{key:"SPECIFICMONTH",textKey:"CONDITION_DATERANGETYPE_SPECIFICMONTH",category:"DYNAMIC.MONTH",order:11,defaultValues:function(){var o=new U();return[o.getMonth()];},value1:null,onChange:d._MonthOnChangeHandler,onItemSelected:d._DefaultOnItemSelected,filterSuggestItem:d._MonthFilterSuggestItem,getControls:function(i,r,o){var s=new S(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,width:"100%",selectedKey:{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer"}});s.bindAggregation("items",{path:"$smartEntityFilter>/currentoperation/valueList",template:new sap.ui.core.ListItem({text:{path:"$smartEntityFilter>text"},key:{path:"$smartEntityFilter>key"}})});r.push(s);},getValueList:function(){var o=new U(),m=[],f=sap.ui.core.format.DateFormat.getDateInstance({pattern:"MMMM"});o.setDate(15);o.setMonth(0);for(var i=0;i<12;i++){m.push({text:f.format(o),key:i});o.setMonth(o.getMonth()+1);}return m;}},TODAY:{key:"TODAY",textKey:"CONDITION_DATERANGETYPE_TODAY",category:"FIXED.DATE",order:3,defaultValues:function(){return d.getDateRange(1,"DAY",true);},type:"range",display:"start",onChange:d._defaultOnChangeHandler,onItemSelected:d._DefaultOnItemSelected,getControls:d.ControlFactory},THISWEEK:d.getFixedRangeOperation("THISWEEK","CONDITION_DATERANGETYPE_THISWEEK","FIXED.WEEK",function(){return d.getDateRange(1,"WEEK",true);},d._DefaultFilterSuggestItem,6),LASTWEEK:d.getFixedRangeOperation("LASTWEEK","CONDITION_DATERANGETYPE_LASTWEEK","FIXED.WEEK",function(){return d.getDateRange(-1,"WEEK",true);},d._DefaultFilterSuggestItem,7),LAST2WEEKS:d.getFixedRangeOperation("LAST2WEEKS","CONDITION_DATERANGETYPE_LAST2WEEKS","FIXED.WEEK",function(){return d.getDateRange(-2,"WEEK",true);},d._HideFilterSuggestItem,-1),LAST3WEEKS:d.getFixedRangeOperation("LAST3WEEKS","CONDITION_DATERANGETYPE_LAST3WEEKS","FIXED.WEEK",function(){return d.getDateRange(-3,"WEEK",true);},d._HideFilterSuggestItem,-1),LAST4WEEKS:d.getFixedRangeOperation("LAST4WEEKS","CONDITION_DATERANGETYPE_LAST4WEEKS","FIXED.WEEK",function(){return d.getDateRange(-4,"WEEK",true);},d._HideFilterSuggestItem,-1),LAST5WEEKS:d.getFixedRangeOperation("LAST5WEEKS","CONDITION_DATERANGETYPE_LAST5WEEKS","FIXED.WEEK",function(){return d.getDateRange(-5,"WEEK",true);},d._HideFilterSuggestItem,-1),NEXTWEEK:d.getFixedRangeOperation("NEXTWEEK","CONDITION_DATERANGETYPE_NEXTWEEK","FIXED.WEEK",function(){return d.getDateRange(1,"WEEK",true,true,true);},d._DefaultFilterSuggestItem,9),NEXT2WEEKS:d.getFixedRangeOperation("NEXT2WEEKS","CONDITION_DATERANGETYPE_NEXT2WEEKS","FIXED.WEEK",function(){return d.getDateRange(2,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),NEXT3WEEKS:d.getFixedRangeOperation("NEXT3WEEKS","CONDITION_DATERANGETYPE_NEXT3WEEKS","FIXED.WEEK",function(){return d.getDateRange(3,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),NEXT4WEEKS:d.getFixedRangeOperation("NEXT4WEEKS","CONDITION_DATERANGETYPE_NEXT4WEEKS","FIXED.WEEK",function(){return d.getDateRange(4,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),NEXT5WEEKS:d.getFixedRangeOperation("NEXT5WEEKS","CONDITION_DATERANGETYPE_NEXT5WEEKS","FIXED.WEEK",function(){return d.getDateRange(5,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),THISMONTH:d.getFixedRangeOperation("THISMONTH","CONDITION_DATERANGETYPE_THISMONTH","FIXED.MONTH",function(){return d.getDateRange(1,"MONTH",true);},d._DefaultFilterSuggestItem,12),LASTMONTH:d.getFixedRangeOperation("LASTMONTH","CONDITION_DATERANGETYPE_LASTMONTH","FIXED.MONTH",function(){return d.getDateRange(-1,"MONTH",true);},d._DefaultFilterSuggestItem,13),NEXTMONTH:d.getFixedRangeOperation("NEXTMONTH","CONDITION_DATERANGETYPE_NEXTMONTH","FIXED.MONTH",function(){return d.getDateRange(1,"MONTH",true,true,true);},d._DefaultFilterSuggestItem,15),THISQUARTER:d.getFixedRangeOperation("THISQUARTER","CONDITION_DATERANGETYPE_THISQUARTER","FIXED.QUARTER",function(){return d.getDateRange(1,"QUARTER",true);},d._DefaultFilterSuggestItem,17),LASTQUARTER:d.getFixedRangeOperation("LASTQUARTER","CONDITION_DATERANGETYPE_LASTQUARTER","FIXED.QUARTER",function(){return d.getDateRange(-1,"QUARTER",true);},d._DefaultFilterSuggestItem,18),NEXTQUARTER:d.getFixedRangeOperation("NEXTQUARTER","CONDITION_DATERANGETYPE_NEXTQUARTER","FIXED.QUARTER",function(){return d.getDateRange(1,"QUARTER",true,true,true);},d._DefaultFilterSuggestItem,20),YEARTODATE:d.getFixedRangeOperation("YEARTODATE","CONDITION_DATERANGETYPE_YEARTODATE","FIXED.YEAR",function(){return[d.getYearStartDate(new U()),d.setEndTime()];},d._DefaultFilterSuggestItem,31),THISYEAR:d.getFixedRangeOperation("THISYEAR","CONDITION_DATERANGETYPE_THISYEAR","FIXED.YEAR",function(){return d.getDateRange(1,"YEAR",true);},d._DefaultFilterSuggestItem,26),LASTYEAR:d.getFixedRangeOperation("LASTYEAR","CONDITION_DATERANGETYPE_LASTYEAR","FIXED.YEAR",function(){return d.getDateRange(-1,"YEAR",true);},d._DefaultFilterSuggestItem,27),NEXTYEAR:d.getFixedRangeOperation("NEXTYEAR","CONDITION_DATERANGETYPE_NEXTYEAR","FIXED.YEAR",function(){return d.getDateRange(1,"YEAR",true,true,true);},d._DefaultFilterSuggestItem,29),QUARTER1:d.getFixedRangeOperation("QUARTER1","CONDITION_DATERANGETYPE_QUARTER1","FIXED.QUARTER",function(){var s=d.getYearStartDate();return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,22),QUARTER2:d.getFixedRangeOperation("QUARTER2","CONDITION_DATERANGETYPE_QUARTER2","FIXED.QUARTER",function(){var s=d.getDateRange(1,"QUARTER",d.getYearStartDate())[1];s.setMilliseconds(1000);return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,23),QUARTER3:d.getFixedRangeOperation("QUARTER3","CONDITION_DATERANGETYPE_QUARTER3","FIXED.QUARTER",function(){var s=d.getDateRange(2,"QUARTER",d.getYearStartDate())[1];s.setMilliseconds(1000);return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,24),QUARTER4:d.getFixedRangeOperation("QUARTER4","CONDITION_DATERANGETYPE_QUARTER4","FIXED.QUARTER",function(){var s=d.getDateRange(3,"QUARTER",d.getYearStartDate())[1];s.setMilliseconds(1000);return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,25)};d.prototype.getControls=function(o){var C=[];if(!o){return;}o.getControls(this,C,o);return C;};d.prototype.setIgnoreTime=function(i){this._bIgnoreTime=i;};T.prototype.getIgnoreTime=function(i){return this._bIgnoreTime;};d.prototype.getDefaultValues=function(o){if(!o){return[];}var e=o.defaultValues||[];if(typeof e==="function"){e=o.defaultValues();}var C=this.getCondition(),v=e[0]||null,V=e[1]||null;if(o.key==="DATERANGE"&&C&&C.value1&&C.value2){v=C.value1.oDate||C.value1;V=C.value2.oDate||C.value2;}else{if(v instanceof Date){v=new U(v);}if(V instanceof Date){V=new U(V);}}return[v,V];};d.prototype.getOperations=function(){var o=[];for(var n in d.Operations){var O=d.Operations[n];if(this._filterOperation(O)){o.push(O);}}return o;};d.prototype._updateOperation=function(o){T.prototype._updateOperation.apply(this,[o]);if(o.languageText&&!o.basicLanguageText){o.basicLanguageText=o.languageText;if(!o.singulareBasicLanguageText&&o.singularTextKey){o.singulareBasicLanguageText=this.getTranslatedText(o.singularTextKey);}o.languageText=this._fillNumberToText(o.languageText);}if(o.display){var e=this.getDefaultValues(o);var f=this._getDateFormatter(false);if(o.display==="start"){o.textValue=f.format(e[0].oDate);}else if(o.display==="range"&&e&&e[0]&&e[1]){o.textValue=f.format(e[0].oDate)+" - "+f.format(e[1].oDate);}}o.suggestText=o.languageText;};d.prototype.updateOperations=function(){var o=this.getOperations();for(var i=0;i<o.length;i++){this._updateOperation(o[i]);}return this.oModel.setProperty("operations",o,this.getContext(),true);};d.prototype.isValidCondition=function(){var C=this.getCondition(),o=this.getOperation(C.operation);if(o&&C&&C.key&&C.operation){if("value1"in o&&"value2"in o){return"value1"in C&&C.value1!==null&&"value2"in C&&C.value2!==null;}else if("value1"in o){return"value1"in C&&C.value1!==null;}else if("value2"in o){return"value2"in C&&C.value2!==null;}else if(!("value1"in o)&&!("value2"in o)){return true;}}return false;};d.prototype.providerDataUpdated=function(u,o){};d.prototype.initialize=function(j){T.prototype.initialize.apply(this,[j]);this.oModel.suspend();var o=q.extend({},j,true);var C=(new U()).getCalendarType();if(!j.conditionTypeInfo){if(j.ranges&&j.ranges.length==1){var O="DATERANGE";if(j.ranges[0].operation==="GE"){O="FROM";}if(j.ranges[0].operation==="LE"){O="TO";}j.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:O,value1:j.ranges[0].value1,value2:j.ranges[0].value2,calendarType:C}};}else{var e=this.getDefaultOperation(),k=e?e.key:"";j.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:k,calendarType:C}};}}if(j.conditionTypeInfo){j=j.conditionTypeInfo;}if(j.name&&j.data){if(j.name!==this.getName()){q.sap.log.debug("ConditionType "+this.getName()+" tries to deserialize data from "+j.name);}j=j.data;}if(!j.operation){return;}if(this.getOperation(j.operation)&&this.getOperation(j.operation).order<0){var i=["LAST2WEEKS","LAST3WEEKS","LAST4WEEKS","LAST5WEEKS"].indexOf(j.operation);if(i>=0){j.operation="LASTWEEKS";j.value1=i+2;}i=["NEXT2WEEKS","NEXT3WEEKS","NEXT4WEEKS","NEXT5WEEKS"].indexOf(j.operation);if(i>=0){j.operation="NEXTWEEKS";j.value1=i+2;}}var f=this.getOperation(j.operation);if(!f){if(this.getAsync()){this.setPending(true);var t=this,h=function(E){if(E.getParameter("pending")===false){t.oFilterProvider.detachPendingChange(h);t.initialize(o);}};this.oFilterProvider.attachPendingChange(h);this.oModel.resume();return;}}var v;if(C!==j.calendarType&&(j.calendarType==="Islamic"||C==="Islamic")&&j.operation==="SPECIFICMONTH"){j.operation="DATERANGE";var V=parseInt(j.value1,10),g=U.getInstance(new Date(),j.calendarType);g.setMonth(V);g=d.getMonthStartDate(g);v=d.getDateRange(1,"MONTH",g,true);j.value1=v[0].oDate.toISOString();j.value2=v[1].oDate.toISOString();}var p=this.getConditionContext().getObject();p.operation=j.operation;p.key=j.key;p.value1=null;p.value2=null;if(j.operation==="DATERANGE"){if(typeof j.value1==="string"){j.value1=j.value1===""?null:(new U(j.value1)).oDate;}if(typeof j.value2==="string"){j.value2=j.value2===""?null:(new U(j.value2)).oDate;}p.value1=j.value1;p.value2=j.value2;}else if(j.operation==="FROM"){if(typeof j.value1==="string"){j.value1=j.value1===""?null:(new U(j.value1)).oDate;}p.value1=j.value1;}else if(j.operation==="TO"){if(typeof j.value1==="string"){j.value1=j.value1===""?null:(new U(j.value1)).oDate;}p.value1=j.value1;}else if(["LASTDAYS","LASTWEEKS","LASTMONTHS","LASTQUARTERS","LASTYEARS"].indexOf(j.operation)>-1){p.value1=j.value1;}else if(j.operation==="SPECIFICMONTH"){p.value1=j.value1+"";}else{v=this.getDefaultValues(this.getOperation(j.operation));p.value1=v[0];p.value2=v[1];}this.bIgnoreBindingChange=true;this.oModel.resume();delete this.bIgnoreBindingChange;this.serialize(true,false);};d.prototype.serialize=function(u,f){var j={},C=this.getCondition();if(!C.operation){return null;}var o=this.getOperation(C.operation);if(!o||!("value1"in o)){C.value1=null;}if(!o||!("value2"in o)){C.value2=null;}C.calendarType=(new U()).getCalendarType();j.conditionTypeInfo={name:this.getName(),data:C};if(this.iChangeTimer){q.sap.clearDelayedCall(this.iChangeTimer);delete this.iChangeTimer;}if(u){this._updateProvider(j,true,f);}else{this.iChangeTimer=q.sap.delayedCall(1,this,this._updateProvider,[j,false,f]);}return j;};d.prototype._updateProvider=function(j,s,f){j.ranges=this.getFilterRanges();j.items=[];var e=false;var C=0;var i=0;var g=0;if(this.oModel.getData().currentoperation.languageText){var o=this.oModel.getData();var h=o.currentoperation.languageText;if(o.currentoperation.basicLanguageText.indexOf("{0}")>=0){if(j.conditionTypeInfo.data.value1!=null&&j.conditionTypeInfo.data.value1!=""){if(j.conditionTypeInfo.data.value1===1&&o.currentoperation.singulareBasicLanguageText){h=o.currentoperation.singulareBasicLanguageText;}else{h=this._fillNumberToText(o.currentoperation.basicLanguageText,j.conditionTypeInfo.data.value1);}this.oModel.setProperty("inputstate","NONE",this.getContext());}else if(this._bSuggestItemSelected){h=this._fillNumberToText(o.currentoperation.basicLanguageText);var x=o.currentoperation.basicLanguageText.indexOf("{0}");C=x+1;i=x;g=x+1;e=true;}else{h="";this.oModel.setProperty("inputstate","NONE",this.getContext());}}else if(o.currentoperation.textValue){h=o.currentoperation.languageText+" ("+o.currentoperation.textValue+")";this.oModel.setProperty("inputstate","NONE",this.getContext());}else{if(j.conditionTypeInfo.data.value1!==null&&j.conditionTypeInfo.data.value1!==""){var v=j.conditionTypeInfo.data.value1;var k=j.conditionTypeInfo.data.value2;var V;if(typeof v==="number"&&o.currentoperation.valueList){V=o.currentoperation.valueList[v].text;}else if(v instanceof Date){var l=this._getDateFormatter(false);if(j.conditionTypeInfo.data.operation!=="DATERANGE"&&(v&&!k)){V=l.format(v);}else if(j.conditionTypeInfo.data.operation==="DATERANGE"&&v&&k){V=l.format(v)+" - "+l.format(k);}else if(j.conditionTypeInfo.data.operation==="DATERANGE"&&v&&!k&&!(this._oPopup&&this._oPopup.isOpen())){V=l.format(v)+" - ";e=true;}else{V="";}}else{V=j.conditionTypeInfo.data.value1;}if(V){h=o.currentoperation.languageText+" ("+V+")";C=h.length-1;this.oModel.setProperty("inputstate","NONE",this.getContext());}else{h="";}}else{h="";}}this._bSuggestItemSelected=false;this.oModel.setProperty("/formattedText",h);if(e&&!(this._oPopup&&this._oPopup.isOpen())){this._oInput.$("inner").cursorPos(C);if(i<g){this._oInput.selectText(i,g);}this._oInput._lastValue="";}}if(this.oFilterProvider){this.oFilterProvider.oModel.setProperty("/"+this.sFieldName,j);this.oFilterProvider.setFilterData({},false,this.sFieldName);if(f&&this.oFilterProvider._oSmartFilter){this.oFilterProvider._oSmartFilter.fireFilterChange();if(this.oFilterProvider._oSmartFilter.getLiveMode()){this.oFilterProvider._oSmartFilter.triggerSearch(sap.ui.comp.smartfilterbar.SmartFilterBar.LIVE_MODE_INTERVAL);}}}};d.prototype.getFilterRanges=function(){var C=this.getCondition(),v=[];if(C.operation==="LASTDAYS"){v=d.getDateRange(-C.value1,"DAY",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTWEEKS"){v=d.getDateRange(-C.value1,"WEEK",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTMONTHS"){v=d.getDateRange(-C.value1,"MONTH",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTQUARTERS"){v=d.getDateRange(-C.value1,"QUARTER",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTYEARS"){v=d.getDateRange(-C.value1,"YEAR",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTDAYS"){v=d.getDateRange(C.value1,"DAY",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTWEEKS"){v=d.getDateRange(C.value1,"WEEK",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTMONTHS"){v=d.getDateRange(C.value1,"MONTH",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTQUARTERS"){v=d.getDateRange(C.value1,"QUARTER",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTYEARS"){v=d.getDateRange(C.value1,"YEAR",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="SPECIFICMONTH"){var V=parseInt(C.value1,10),o=new U();o.setMonth(V);o=d.getMonthStartDate(o);v=d.getDateRange(1,"MONTH",o,true);C.value1=v[0];C.value2=v[1];}if(C.value1 instanceof U){C.value1=C.value1.oDate;}if(C.value2 instanceof U){C.value2=C.value2.oDate;}if(C.operation==="FROM"){if(!(this.isValidCondition()&&C.value1)){return[];}C.operation="GE";delete C.value2;}else if(C.operation==="TO"){if(!(this.isValidCondition()&&C.value1)){return[];}C.operation="LE";delete C.value2;if(this._bIgnoreTime){C.value1=d.setStartTime(C.value1).oDate;}else{C.value1=d.setEndTime(C.value1).oDate;}}else{if(!(this.isValidCondition()&&C.value1&&C.value2)){return[];}C.operation="BT";if(this._bIgnoreTime){C.value2=d.setStartTime(C.value2).oDate;}else{C.value1=d.setStartTime(C.value1).oDate;C.value2=d.setEndTime(C.value2).oDate;}}C.exclude=false;C.keyField=C.key;delete C.key;return[C];};d.prototype.getTokenText=function(){return"";};d.prototype.getName=function(){return this.getMetadata().getName();};d.prototype.getType=function(){return"Edm.Date";};d.prototype._bindValueState=function(C){C.bindProperty("valueState",{path:"$smartEntityFilter>inputstate",formatter:function(){if(this.getBinding("valueState").getValue()==="ERROR"){return sap.ui.core.ValueState.Error;}else{return sap.ui.core.ValueState.None;}}});};d.prototype.initializeFilterItem=function(){this._oInput=new sap.m.Input(T._createStableId(this),{value:"{$smartEntityFilter>formattedText}",showValueHelp:true,showSuggestion:true,maxSuggestionWidth:"auto",valueHelpRequest:this._toggleOpen.bind(this)});this._oInput._highlightListText=function(){var i,l,e=this._oList.$().find('.sapMDLILabel, .sapMSLITitleOnly');for(i=0;i<e.length;i++){l=e[i];l.innerHTML=this._createHighlightedText(l);}};this._bindValueState(this._oInput);this._oInput.bindAggregation("suggestionItems",{path:"$smartEntityFilter>operations",sorter:new sap.ui.model.Sorter("order",false,false),filters:new sap.ui.model.Filter("order",function(v){return v!==undefined&&v>-1;}),template:new sap.ui.core.ListItem({key:{path:"$smartEntityFilter>key"}})});this._oInput.setFilterFunction(function(v,i){if(this._oPopup&&this._oPopup.isOpen()){return false;}var o=this.getOperation(i.getKey());v=v.trim();if(v==="?"){d._DefaultFilterSuggestItem.call(o,v,i,this);return o.category!=="DYNAMIC.DATERANGE"&&o.category!=="DYNAMIC.DATE";}if(o.filterSuggestItem){return o.filterSuggestItem(v,i,this);}else{return d._DefaultFilterSuggestItem.call(o,v,i,this);}}.bind(this));this._oInput.attachSuggestionItemSelected(function(e){var i=e.getParameter("selectedItem");if(!i){return;}var o=i.getKey();var O=this.getOperation(o);var v=e.oSource.getValue().trim();if(O.onItemSelected){O.onItemSelected(v,i,this);return;}else{d._DefaultOnItemSelected.call(O,v,i,this);}}.bind(this));this._oInput.attachChange(function(e){var v=e.getParameter("value");if(v){var o=this.getOperations();var h=o.some(function(O){if(O.onChange){return O.onChange(v,this);}else{return d._defaultOnChangeHandler.call(O,v,this);}},this);if(!h){this.oModel.setProperty("inputstate","ERROR",this.getContext());}}else{this.setCondition({key:this.sFieldName,operation:"FROM",value1:null,value2:null});this.oModel.setProperty("inputstate","NONE",this.getContext());}}.bind(this));this._oInput.attachBrowserEvent("focusin",function(e){if(q(e.target).hasClass("sapMInputBaseInner")&&this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();}}.bind(this));this._oInput.setBindingContext(this.getContext(),"$smartEntityFilter");this._oInput.setModel(this.getModel(),"$smartEntityFilter");this.bFireFilterChange=false;this.getModel().checkUpdate(true);this.bFireFilterChange=true;return this._oInput;};d.prototype._toggleOpen=function(e){if(!this._oPopup){this._oPopupLayout=new sap.m.VBox();this._oPopupLayout.addStyleClass("sapUiCompDateRangeType");this._initializeFilterItemPopoverContent(this._oPopupLayout);this._oPopup=new sap.m.ResponsivePopover({showCloseButton:false,showArrow:true,showHeader:false,horizontalScrolling:false,placement:sap.m.PlacementType.VerticalPreferedBottom,content:this._oPopupLayout,contentWidth:"18rem"});if(sap.ui.Device.system.phone){this._oPopup.setBeginButton(new sap.m.Button({text:T.getTranslatedText("CONDITION_DATERANGETYPE_POPOVER_CLOSEBUTTON"),type:"Emphasized",press:function(e){this._oPopup.close();}.bind(this)}));}sap.ui.getCore().getMessageManager().registerObject(this._oPopup,true);this._oPopup.setModel(this.getModel(),"$smartEntityFilter");this._oPopup._oControl.oPopup.setAutoCloseAreas([this._oInput.getDomRef()]);}if(!this._oPopup.isOpen()){this._oPopup.openBy(this._oInput._getValueHelpIcon());}else{this._oPopup.close();}};d.prototype._getDateFormatter=function(s){var f={style:this.oDateFormat.style,pattern:this.oDateFormat.pattern,strictParsing:s};return sap.ui.core.format.DateFormat.getInstance(f);};d.prototype._fillNumberToText=function(t,n){var N="X";if(n){N=String(n);}return t.replace("{0}",N);};d.prototype.destroy=function(){if(this.iChangeTimer){q.sap.clearDelayedCall(this.iChangeTimer);delete this.iChangeTimer;}if(this._oPopup){sap.ui.getCore().getMessageManager().unregisterObject(this._oPopup);this._oPopup.destroy();}T.prototype.destroy.apply(this,arguments);};return d;},true);

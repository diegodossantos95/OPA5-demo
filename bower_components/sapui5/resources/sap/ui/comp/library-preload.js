/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/comp/config/condition/DateRangeType',['jquery.sap.global','sap/ui/comp/config/condition/Type','sap/m/Input','sap/m/DateRangeSelection','sap/m/DatePicker','sap/m/Text','sap/m/Select','sap/ui/core/date/UniversalDate','sap/ui/core/Locale','sap/ui/core/LocaleData','sap/ui/model/odata/Filter'],function(q,T,I,D,a,b,S,U,L,c,F){"use strict";
sap.ui.model.type.Integer.extend("sap.ui.model.type.NullableInteger",{parseValue:function(v,i){switch(this.getPrimitiveType(i)){case"string":if(v===""){return null;}}return sap.ui.model.type.Integer.prototype.parseValue.apply(this,arguments);}});
var d=T.extend("sap.ui.comp.config.condition.DateRangeType",{constructor:function(f,o,e){T.apply(this,[f,o,e]);this.oDateFormat=o&&o._oDateFormatSettings?o._oDateFormatSettings:{UTC:true};this._bIgnoreTime=false;this._maxIntValue=10000;this.bMandatory=this.oFieldMetadata?this.oFieldMetadata.isMandatory:false;}});
d.prototype.applySettings=function(s){T.prototype.applySettings.apply(this,arguments);if(s&&s.ignoreTime){this._bIgnoreTime=s.ignoreTime;}};
d.setStartTime=function(o){if(o instanceof Date){o=new U(o);}if(!o){o=new U();}o.setHours(0);o.setMinutes(0);o.setSeconds(0);o.setMilliseconds(0);return o;};
d.setEndTime=function(o){o=d.toUniversalDate(o);o.setHours(23);o.setMinutes(59);o.setSeconds(59);o.setMilliseconds(999);return o;};
d.toUniversalDate=function(o){if(o instanceof Date){o=new U(o);}if(!o){o=new U();}return o;};
d.getWeekStartDate=function(u){var l=new L(sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().toString()),o=c.getInstance(l),f=o.getFirstDayOfWeek();if(!u){u=new U();}u.setDate(u.getDate()-u.getDay()+f);return d.setStartTime(u);};
d.getMonthStartDate=function(u){if(!u){u=new U();}u.setDate(1);return d.setStartTime(u);};
d.getQuarterStartDate=function(u){if(!u){u=new U();}u.setMonth(3*Math.floor(u.getMonth()/3));u.setDate(1);return d.setStartTime(u);};
d.getYearStartDate=function(u){if(!u){u=new U();}u.setMonth(0);u.setDate(1);return d.setStartTime(u);};
d.getDateRange=function(v,t,u,C,i){if(u===true){C=true;u=null;}if(!u){u=new U();}else if(!(u instanceof U)){throw new Error("Date must be a UniversalDate object "+this);}var s=new U(),e;if(u){s.getJSDate().setTime(u.getTime());s=d.setStartTime(s);}if(v!==0&&!isNaN(v)){if(t==="DAY"){if(i&&v>0){s.setDate(s.getDate()+1);}e=new U(s);e.setDate(s.getDate()+v);}else if(t==="WEEK"){if(C){s=d.getWeekStartDate(s);}if(i&&v>0){s.setDate(s.getDate()+7);}e=new U(s);e.setDate(s.getDate()+(v*7));}else if(t==="MONTH"){if(C){s=d.getMonthStartDate(s);}if(i&&v>0){s.setMonth(s.getMonth()+1);}e=new U(s);e.setMonth(s.getMonth()+v);}else if(t==="QUARTER"){if(C){s=d.getQuarterStartDate(s);}if(i&&v>0){s.setMonth(s.getMonth()+3);}e=new U(s);e.setMonth(s.getMonth()+(v*3));}else if(t==="YEAR"){if(C){s=d.getYearStartDate(s);}if(i&&v>0){s.setFullYear(s.getFullYear()+1);}e=new U(s);e.setFullYear(s.getFullYear()+v);}}if(!e){return[];}if(e.getTime()<s.getTime()){e=[s,s=e][0];}e.setDate(e.getDate()-1);return[d.setStartTime(s),d.setEndTime(e)];};
d.getTextField=function(i,e){if(e){return new b(T._createStableId(i,"text"),{text:"{path: '$smartEntityFilter>value1', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:i.oDateFormat.style,pattern:i.oDateFormat.pattern})+"} - {path: '$smartEntityFilter>value2', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:i.oDateFormat.style,pattern:i.oDateFormat.pattern})+"}"});}return new b(T._createStableId(i,"text"),{text:{path:'$smartEntityFilter>value1',type:'sap.ui.model.type.Date',formatOptions:{style:i.oDateFormat.style,pattern:i.oDateFormat.pattern}}});};
d.getIntField=function(i){return new I(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,value:{path:"$smartEntityFilter>value1",type:new sap.ui.model.type.NullableInteger({},{minimum:0,maximum:i._maxIntValue})},textAlign:"End",width:"100%"});};
d.ControlFactory=function(i,r,o){if(o.type==="range"){var C=d.getTextField(i,o.display!=="start");C.addStyleClass("sapUiCompFilterBarCTPaddingTop");r.push(C);return;}if(o.type==="int"){var C=d.getIntField(i);r.push(C);if(o.descriptionTextKeys){C.setFieldWidth("auto");C.bindProperty("description",{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer",formatter:function(){var t=o.descriptionTextKeys[0];var s=o.descriptionTextKeys[1];if(this.getBinding("description").getValue()===1){return T.getTranslatedText(t);}else{return T.getTranslatedText(s||t);}}});}}};
d._defaultOnChangeHandler=function(v,i){if(v.toLowerCase()===this.languageText.toLowerCase()){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("inputstate","NONE",i.getContext());if(this.category.indexOf("FIXED")!==0){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}return false;};
d._IntOnChangeHandler=function(v,i){if(this.basicLanguageText.indexOf("{0}")>=0){var r=new RegExp(this.basicLanguageText.replace("{0}","[a-zA-Z0-9_]+")+"$",'i');if(v.match(r)){var x=this.basicLanguageText.indexOf("{0}");if(x>=0){var n=this.basicLanguageText.length-x;v=v.slice(0,v.length-n+3);v=v.slice(x);var V=parseInt(v,10);if(!isNaN(V)&&V<=i._maxIntValue){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",V);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}}return false;};
d._DateOnChangeHandler=function(v,i){if(v.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=v.slice(this.languageText.length);if(s.length>0&&s[0]===" "){s=s.trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var o=i._getDateFormatter(true);var e=o.parse(s);if(e){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",e);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}return false;};
d._DateRangeOnChangeHandler=function(v,i){if(v.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=v.slice(this.languageText.length).trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var V=s.split("-")[0];var e=s.split("-")[1];var o=i._getDateFormatter(true);var f=o.parse(V);var g=o.parse(e);if(f&&g){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",f);i.oModel.setProperty("/condition/value2",g);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}return false;};
d._MonthOnChangeHandler=function(v,i){var m;var r=false;if(v.toLowerCase().indexOf(this.languageText.toLowerCase())===0){m=v.slice(this.languageText.length).trim();if(m.indexOf("(")==0){m=m.slice(1);m=m.slice(0,m.length-1);}r=true;}else{m=v;}var M=this.getValueList();var e=-1;M.some(function(o,f){var r=o.text.toLowerCase()===m.toLowerCase();if(r){e=f;}return r;});if(e>-1){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",e);i.oModel.setProperty("inputstate","NONE",i.getContext());return true;}else{if(r){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return r;}};
d._DefaultFilterSuggestItem=function(v,o,e){var m=false;if(q.sap.startsWithIgnoreCase(this.languageText.toLowerCase(),v.toLowerCase())){m=true;}else{var w=this.languageText.split(" ");for(var i=0;i<w.length;i++){var W=w[i];if(q.sap.startsWithIgnoreCase(W.toLowerCase(),v.toLowerCase())){m=true;}}}o.setAdditionalText(this.textValue);o.setText(this.languageText);return m;};
d._HideFilterSuggestItem=function(v,i,o){return false;};
d._IntFilterSuggestItem=function(v,i,o){var x=this.basicLanguageText.indexOf("{0}");var p;var P;if(x>=0){p=this.basicLanguageText.slice(0,x).trim();P=this.basicLanguageText.slice(x+3).trim();}var e=v.split(" ");if(e.length<1||e.length>3){return false;}var m=false;var n;var f=function(v){return!!v.match(/(?!(0))(^[0-9]+$)/)&&parseInt(v,10)>0;};if(q.sap.startsWithIgnoreCase(p.toLowerCase(),e[0].toLowerCase())){if(e[1]){if(f(e[1])){n=e[1];if(e[2]){if(q.sap.startsWithIgnoreCase(P.toLowerCase(),e[2].toLowerCase())){m=true;}}else{m=true;}}}else{m=true;}}else if(f(e[0])&&e.length<3){n=e[0];if(e[1]){if(q.sap.startsWithIgnoreCase(P.toLowerCase(),e[1].toLowerCase())){m=true;}}else{m=true;}}else if(q.sap.startsWithIgnoreCase(P.toLowerCase(),e[0].toLowerCase())&&e.length==1){m=true;}if(m&&n){var t;switch(this.category){case"DYNAMIC.DATE.INT":t="DAY";break;case"DYNAMIC.WEEK.INT":t="WEEK";break;case"DYNAMIC.MONTH.INT":t="MONTH";break;case"DYNAMIC.QUARTER.INT":t="QUARTER";break;case"DYNAMIC.YEAR.INT":t="YEAR";break;default:t="DAY";break;}var N=parseInt(n,10),g=true;if(N>o._maxIntValue){m=false;}if(q.sap.startsWith(this.key,"LAST")){N=N*-1;g=false;}var h=d.getDateRange(N,t,true,g,g);var j=o._getDateFormatter(true);if(Math.abs(N)===1&&this.singulareBasicLanguageText){i.setText(this.singulareBasicLanguageText);if(t!=="DAY"){i.setAdditionalText(j.format(h[0])+" - "+j.format(h[1]));}else{i.setAdditionalText(j.format(h[0]));}}else{i.setText(o._fillNumberToText(this.basicLanguageText,n));i.setAdditionalText(j.format(h[0])+" - "+j.format(h[1]));}i._value1=parseInt(n,10);}else{i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;}return m;};
d._DateFilterSuggestItem=function(v,i,o){var e=o._getDateFormatter(true);var f=e.parse(v);if(f){i.setText(this.languageText+" ("+e.format(f)+")");i._value1=f;return true;}else{i.setText(this.languageText);i._value1=null;return false;}};
d._DateRangeFilterSuggestItem=function(v,i,o){var e=o._getDateFormatter(true);var f,g;var s="-";var V=false;var h=v.split(s);if(h.length===2){if(h[0].slice(h[0].length-1,h[0].length)==" "){h[0]=h[0].slice(0,h[0].length-1);}if(h[1].slice(0,1)==" "){h[1]=h[1].slice(1);}}else{h=v.split(" "+s+" ");}if(h.length<2){var j=v.split(" ");if(j.length===2){h=j;}}if(h.length>=1&&h.length<=2){f=e.parse(h[0]);if(f){i._value1=f;if(h.length==2&&h[1]===""){h.splice(1,1);}if(h.length==2){g=e.parse(h[1]);if(g){i._value2=g;V=true;i.setText(this.languageText+" ("+e.format(f)+" "+s+" "+e.format(g)+")");}}else{V=true;i.setText(this.languageText+" ("+e.format(f)+" "+s+")");}}}if(!V){i.setText(this.languageText);i._value1=null;i._value2=null;}return V;};
d._MonthFilterSuggestItem=function(v,o,e){var m=false;o._value1=null;var M=this.getValueList();for(var i=0;i<M.length;i++){var f=M[i];m=q.sap.startsWithIgnoreCase(f.text.toLowerCase(),v.toLowerCase());if(m){o.setText(this.languageText+" ("+f.text+")");o._value1=i;break;}}return m;};
d._DefaultOnItemSelected=function(v,i,o){o.oModel.setProperty("/condition/operation",this.key);if("value1"in this){o.oModel.setProperty("/condition/value1",i._value1);}if("value2"in this){o.oModel.setProperty("/condition/value2",i._value2);}o.oModel.setProperty("inputstate","NONE",o.getContext());o._bSuggestItemSelected=true;};
d._IntOnItemSelected=function(v,i,o){var n=i._value1;o.oModel.setProperty("/condition/operation",this.key);o.oModel.setProperty("/condition/value1",n);o.oModel.setProperty("inputstate","NONE",o.getContext());o._bSuggestItemSelected=true;};
d.getFixedRangeOperation=function(k,t,C,e,f,o){return{key:k,textKey:t,category:C,order:o||100,defaultValues:e||null,type:"range",display:"range",filterSuggestItem:f||d._DefaultFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:d.ControlFactory};};
d.Operations={DATERANGE:{key:"DATERANGE",textKey:"CONDITION_DATERANGETYPE_DATERANGE",category:"DYNAMIC.DATERANGE",order:2,defaultOperation:true,defaultValues:[null,null],value1:null,value2:null,onChange:d._DateRangeOnChangeHandler,filterSuggestItem:d._DateRangeFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:function(i,r){var l=new sap.m.Label({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELFROM")});l.addStyleClass("sapUiCompFilterBarCTPaddingTop");r.push(l);var C=new a(T._createStableId(i,"field1"),{dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});l.setLabelFor(C);r.push(C);l=new sap.m.Label({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELTO")});l.addStyleClass("sapUiCompFilterBarCTPaddingTop");r.push(l);C=new a(T._createStableId(i,"field2"),{dateValue:{path:"$smartEntityFilter>value2"},minDate:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});l.setLabelFor(C);r.push(C);}},FROM:{key:"FROM",textKey:"CONDITION_DATERANGETYPE_FROM",category:"DYNAMIC.DATE",order:0,defaultValues:[null],value1:null,onChange:d._DateOnChangeHandler,filterSuggestItem:d._DateFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:function(i,r){var C=new a(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});r.push(C);}},TO:{key:"TO",textKey:"CONDITION_DATERANGETYPE_TO",category:"DYNAMIC.DATE",order:1,defaultValues:[null],value1:null,onChange:d._DateOnChangeHandler,filterSuggestItem:d._DateFilterSuggestItem,onItemSelected:d._DefaultOnItemSelected,getControls:function(i,r,o){var C=new a(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(e){var v=e.getParameter("valid");if(v){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});r.push(C);}},LASTDAYS:{key:"LASTDAYS",textKey:"CONDITION_DATERANGETYPE_LASTDAYS",singularTextKey:"CONDITION_DATERANGETYPE_YESTERDAY",category:"DYNAMIC.DATE.INT",order:4,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTWEEKS:{key:"LASTWEEKS",textKey:"CONDITION_DATERANGETYPE_LASTWEEKS",singularTextKey:"CONDITION_DATERANGETYPE_LASTWEEK",category:"DYNAMIC.WEEK.INT",order:8,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTMONTHS:{key:"LASTMONTHS",textKey:"CONDITION_DATERANGETYPE_LASTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_LASTMONTH",category:"DYNAMIC.MONTH.INT",order:14,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTQUARTERS:{key:"LASTQUARTERS",textKey:"CONDITION_DATERANGETYPE_LASTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_LASTQUARTER",category:"DYNAMIC.QUARTER.INT",order:19,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},LASTYEARS:{key:"LASTYEARS",textKey:"CONDITION_DATERANGETYPE_LASTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_LASTYEAR",category:"DYNAMIC.YEAR.INT",order:28,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTDAYS:{key:"NEXTDAYS",textKey:"CONDITION_DATERANGETYPE_NEXTDAYS",singularTextKey:"CONDITION_DATERANGETYPE_TOMORROW",category:"DYNAMIC.DATE.INT",order:5,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTWEEKS:{key:"NEXTWEEKS",textKey:"CONDITION_DATERANGETYPE_NEXTWEEKS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTWEEK",category:"DYNAMIC.WEEK.INT",order:10,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTMONTHS:{key:"NEXTMONTHS",textKey:"CONDITION_DATERANGETYPE_NEXTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTMONTH",category:"DYNAMIC.MONTH.INT",order:16,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTQUARTERS:{key:"NEXTQUARTERS",textKey:"CONDITION_DATERANGETYPE_NEXTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTQUARTER",category:"DYNAMIC.QUARTER.INT",order:21,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},NEXTYEARS:{key:"NEXTYEARS",textKey:"CONDITION_DATERANGETYPE_NEXTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTYEAR",category:"DYNAMIC.YEAR.INT",order:30,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:d._IntOnChangeHandler,filterSuggestItem:d._IntFilterSuggestItem,onItemSelected:d._IntOnItemSelected,getControls:d.ControlFactory},SPECIFICMONTH:{key:"SPECIFICMONTH",textKey:"CONDITION_DATERANGETYPE_SPECIFICMONTH",category:"DYNAMIC.MONTH",order:11,defaultValues:function(){var o=new U();return[o.getMonth()];},value1:null,onChange:d._MonthOnChangeHandler,onItemSelected:d._DefaultOnItemSelected,filterSuggestItem:d._MonthFilterSuggestItem,getControls:function(i,r,o){var s=new S(T._createStableId(i,"field"),{ariaLabelledBy:i.oOperationSelect||null,width:"100%",selectedKey:{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer"}});s.bindAggregation("items",{path:"$smartEntityFilter>/currentoperation/valueList",template:new sap.ui.core.ListItem({text:{path:"$smartEntityFilter>text"},key:{path:"$smartEntityFilter>key"}})});r.push(s);},getValueList:function(){var o=new U(),m=[],f=sap.ui.core.format.DateFormat.getDateInstance({pattern:"MMMM"});o.setDate(15);o.setMonth(0);for(var i=0;i<12;i++){m.push({text:f.format(o),key:i});o.setMonth(o.getMonth()+1);}return m;}},TODAY:{key:"TODAY",textKey:"CONDITION_DATERANGETYPE_TODAY",category:"FIXED.DATE",order:3,defaultValues:function(){return d.getDateRange(1,"DAY",true);},type:"range",display:"start",onChange:d._defaultOnChangeHandler,onItemSelected:d._DefaultOnItemSelected,getControls:d.ControlFactory},THISWEEK:d.getFixedRangeOperation("THISWEEK","CONDITION_DATERANGETYPE_THISWEEK","FIXED.WEEK",function(){return d.getDateRange(1,"WEEK",true);},d._DefaultFilterSuggestItem,6),LASTWEEK:d.getFixedRangeOperation("LASTWEEK","CONDITION_DATERANGETYPE_LASTWEEK","FIXED.WEEK",function(){return d.getDateRange(-1,"WEEK",true);},d._DefaultFilterSuggestItem,7),LAST2WEEKS:d.getFixedRangeOperation("LAST2WEEKS","CONDITION_DATERANGETYPE_LAST2WEEKS","FIXED.WEEK",function(){return d.getDateRange(-2,"WEEK",true);},d._HideFilterSuggestItem,-1),LAST3WEEKS:d.getFixedRangeOperation("LAST3WEEKS","CONDITION_DATERANGETYPE_LAST3WEEKS","FIXED.WEEK",function(){return d.getDateRange(-3,"WEEK",true);},d._HideFilterSuggestItem,-1),LAST4WEEKS:d.getFixedRangeOperation("LAST4WEEKS","CONDITION_DATERANGETYPE_LAST4WEEKS","FIXED.WEEK",function(){return d.getDateRange(-4,"WEEK",true);},d._HideFilterSuggestItem,-1),LAST5WEEKS:d.getFixedRangeOperation("LAST5WEEKS","CONDITION_DATERANGETYPE_LAST5WEEKS","FIXED.WEEK",function(){return d.getDateRange(-5,"WEEK",true);},d._HideFilterSuggestItem,-1),NEXTWEEK:d.getFixedRangeOperation("NEXTWEEK","CONDITION_DATERANGETYPE_NEXTWEEK","FIXED.WEEK",function(){return d.getDateRange(1,"WEEK",true,true,true);},d._DefaultFilterSuggestItem,9),NEXT2WEEKS:d.getFixedRangeOperation("NEXT2WEEKS","CONDITION_DATERANGETYPE_NEXT2WEEKS","FIXED.WEEK",function(){return d.getDateRange(2,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),NEXT3WEEKS:d.getFixedRangeOperation("NEXT3WEEKS","CONDITION_DATERANGETYPE_NEXT3WEEKS","FIXED.WEEK",function(){return d.getDateRange(3,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),NEXT4WEEKS:d.getFixedRangeOperation("NEXT4WEEKS","CONDITION_DATERANGETYPE_NEXT4WEEKS","FIXED.WEEK",function(){return d.getDateRange(4,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),NEXT5WEEKS:d.getFixedRangeOperation("NEXT5WEEKS","CONDITION_DATERANGETYPE_NEXT5WEEKS","FIXED.WEEK",function(){return d.getDateRange(5,"WEEK",true,true,true);},d._HideFilterSuggestItem,-1),THISMONTH:d.getFixedRangeOperation("THISMONTH","CONDITION_DATERANGETYPE_THISMONTH","FIXED.MONTH",function(){return d.getDateRange(1,"MONTH",true);},d._DefaultFilterSuggestItem,12),LASTMONTH:d.getFixedRangeOperation("LASTMONTH","CONDITION_DATERANGETYPE_LASTMONTH","FIXED.MONTH",function(){return d.getDateRange(-1,"MONTH",true);},d._DefaultFilterSuggestItem,13),NEXTMONTH:d.getFixedRangeOperation("NEXTMONTH","CONDITION_DATERANGETYPE_NEXTMONTH","FIXED.MONTH",function(){return d.getDateRange(1,"MONTH",true,true,true);},d._DefaultFilterSuggestItem,15),THISQUARTER:d.getFixedRangeOperation("THISQUARTER","CONDITION_DATERANGETYPE_THISQUARTER","FIXED.QUARTER",function(){return d.getDateRange(1,"QUARTER",true);},d._DefaultFilterSuggestItem,17),LASTQUARTER:d.getFixedRangeOperation("LASTQUARTER","CONDITION_DATERANGETYPE_LASTQUARTER","FIXED.QUARTER",function(){return d.getDateRange(-1,"QUARTER",true);},d._DefaultFilterSuggestItem,18),NEXTQUARTER:d.getFixedRangeOperation("NEXTQUARTER","CONDITION_DATERANGETYPE_NEXTQUARTER","FIXED.QUARTER",function(){return d.getDateRange(1,"QUARTER",true,true,true);},d._DefaultFilterSuggestItem,20),YEARTODATE:d.getFixedRangeOperation("YEARTODATE","CONDITION_DATERANGETYPE_YEARTODATE","FIXED.YEAR",function(){return[d.getYearStartDate(new U()),d.setEndTime()];},d._DefaultFilterSuggestItem,31),THISYEAR:d.getFixedRangeOperation("THISYEAR","CONDITION_DATERANGETYPE_THISYEAR","FIXED.YEAR",function(){return d.getDateRange(1,"YEAR",true);},d._DefaultFilterSuggestItem,26),LASTYEAR:d.getFixedRangeOperation("LASTYEAR","CONDITION_DATERANGETYPE_LASTYEAR","FIXED.YEAR",function(){return d.getDateRange(-1,"YEAR",true);},d._DefaultFilterSuggestItem,27),NEXTYEAR:d.getFixedRangeOperation("NEXTYEAR","CONDITION_DATERANGETYPE_NEXTYEAR","FIXED.YEAR",function(){return d.getDateRange(1,"YEAR",true,true,true);},d._DefaultFilterSuggestItem,29),QUARTER1:d.getFixedRangeOperation("QUARTER1","CONDITION_DATERANGETYPE_QUARTER1","FIXED.QUARTER",function(){var s=d.getYearStartDate();return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,22),QUARTER2:d.getFixedRangeOperation("QUARTER2","CONDITION_DATERANGETYPE_QUARTER2","FIXED.QUARTER",function(){var s=d.getDateRange(1,"QUARTER",d.getYearStartDate())[1];s.setMilliseconds(1000);return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,23),QUARTER3:d.getFixedRangeOperation("QUARTER3","CONDITION_DATERANGETYPE_QUARTER3","FIXED.QUARTER",function(){var s=d.getDateRange(2,"QUARTER",d.getYearStartDate())[1];s.setMilliseconds(1000);return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,24),QUARTER4:d.getFixedRangeOperation("QUARTER4","CONDITION_DATERANGETYPE_QUARTER4","FIXED.QUARTER",function(){var s=d.getDateRange(3,"QUARTER",d.getYearStartDate())[1];s.setMilliseconds(1000);return d.getDateRange(1,"QUARTER",s);},d._DefaultFilterSuggestItem,25)};
d.prototype.getControls=function(o){var C=[];if(!o){return;}o.getControls(this,C,o);return C;};
d.prototype.setIgnoreTime=function(i){this._bIgnoreTime=i;};
T.prototype.getIgnoreTime=function(i){return this._bIgnoreTime;};
d.prototype.getDefaultValues=function(o){if(!o){return[];}var e=o.defaultValues||[];if(typeof e==="function"){e=o.defaultValues();}var C=this.getCondition(),v=e[0]||null,V=e[1]||null;if(o.key==="DATERANGE"&&C&&C.value1&&C.value2){v=C.value1.oDate||C.value1;V=C.value2.oDate||C.value2;}else{if(v instanceof Date){v=new U(v);}if(V instanceof Date){V=new U(V);}}return[v,V];};
d.prototype.getOperations=function(){var o=[];for(var n in d.Operations){var O=d.Operations[n];if(this._filterOperation(O)){o.push(O);}}return o;};
d.prototype._updateOperation=function(o){T.prototype._updateOperation.apply(this,[o]);if(o.languageText&&!o.basicLanguageText){o.basicLanguageText=o.languageText;if(!o.singulareBasicLanguageText&&o.singularTextKey){o.singulareBasicLanguageText=this.getTranslatedText(o.singularTextKey);}o.languageText=this._fillNumberToText(o.languageText);}if(o.display){var e=this.getDefaultValues(o);var f=this._getDateFormatter(false);if(o.display==="start"){o.textValue=f.format(e[0].oDate);}else if(o.display==="range"&&e&&e[0]&&e[1]){o.textValue=f.format(e[0].oDate)+" - "+f.format(e[1].oDate);}}o.suggestText=o.languageText;};
d.prototype.updateOperations=function(){var o=this.getOperations();for(var i=0;i<o.length;i++){this._updateOperation(o[i]);}return this.oModel.setProperty("operations",o,this.getContext(),true);};
d.prototype.isValidCondition=function(){var C=this.getCondition(),o=this.getOperation(C.operation);if(o&&C&&C.key&&C.operation){if("value1"in o&&"value2"in o){return"value1"in C&&C.value1!==null&&"value2"in C&&C.value2!==null;}else if("value1"in o){return"value1"in C&&C.value1!==null;}else if("value2"in o){return"value2"in C&&C.value2!==null;}else if(!("value1"in o)&&!("value2"in o)){return true;}}return false;};
d.prototype.providerDataUpdated=function(u,o){};
d.prototype.initialize=function(j){T.prototype.initialize.apply(this,[j]);this.oModel.suspend();var o=q.extend({},j,true);var C=(new U()).getCalendarType();if(!j.conditionTypeInfo){if(j.ranges&&j.ranges.length==1){var O="DATERANGE";if(j.ranges[0].operation==="GE"){O="FROM";}if(j.ranges[0].operation==="LE"){O="TO";}j.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:O,value1:j.ranges[0].value1,value2:j.ranges[0].value2,calendarType:C}};}else{var e=this.getDefaultOperation(),k=e?e.key:"";j.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:k,calendarType:C}};}}if(j.conditionTypeInfo){j=j.conditionTypeInfo;}if(j.name&&j.data){if(j.name!==this.getName()){q.sap.log.debug("ConditionType "+this.getName()+" tries to deserialize data from "+j.name);}j=j.data;}if(!j.operation){return;}if(this.getOperation(j.operation)&&this.getOperation(j.operation).order<0){var i=["LAST2WEEKS","LAST3WEEKS","LAST4WEEKS","LAST5WEEKS"].indexOf(j.operation);if(i>=0){j.operation="LASTWEEKS";j.value1=i+2;}i=["NEXT2WEEKS","NEXT3WEEKS","NEXT4WEEKS","NEXT5WEEKS"].indexOf(j.operation);if(i>=0){j.operation="NEXTWEEKS";j.value1=i+2;}}var f=this.getOperation(j.operation);if(!f){if(this.getAsync()){this.setPending(true);var t=this,h=function(E){if(E.getParameter("pending")===false){t.oFilterProvider.detachPendingChange(h);t.initialize(o);}};this.oFilterProvider.attachPendingChange(h);this.oModel.resume();return;}}var v;if(C!==j.calendarType&&(j.calendarType==="Islamic"||C==="Islamic")&&j.operation==="SPECIFICMONTH"){j.operation="DATERANGE";var V=parseInt(j.value1,10),g=U.getInstance(new Date(),j.calendarType);g.setMonth(V);g=d.getMonthStartDate(g);v=d.getDateRange(1,"MONTH",g,true);j.value1=v[0].oDate.toISOString();j.value2=v[1].oDate.toISOString();}var p=this.getConditionContext().getObject();p.operation=j.operation;p.key=j.key;p.value1=null;p.value2=null;if(j.operation==="DATERANGE"){if(typeof j.value1==="string"){j.value1=j.value1===""?null:(new U(j.value1)).oDate;}if(typeof j.value2==="string"){j.value2=j.value2===""?null:(new U(j.value2)).oDate;}p.value1=j.value1;p.value2=j.value2;}else if(j.operation==="FROM"){if(typeof j.value1==="string"){j.value1=j.value1===""?null:(new U(j.value1)).oDate;}p.value1=j.value1;}else if(j.operation==="TO"){if(typeof j.value1==="string"){j.value1=j.value1===""?null:(new U(j.value1)).oDate;}p.value1=j.value1;}else if(["LASTDAYS","LASTWEEKS","LASTMONTHS","LASTQUARTERS","LASTYEARS"].indexOf(j.operation)>-1){p.value1=j.value1;}else if(j.operation==="SPECIFICMONTH"){p.value1=j.value1+"";}else{v=this.getDefaultValues(this.getOperation(j.operation));p.value1=v[0];p.value2=v[1];}this.bIgnoreBindingChange=true;this.oModel.resume();delete this.bIgnoreBindingChange;this.serialize(true,false);};
d.prototype.serialize=function(u,f){var j={},C=this.getCondition();if(!C.operation){return null;}var o=this.getOperation(C.operation);if(!o||!("value1"in o)){C.value1=null;}if(!o||!("value2"in o)){C.value2=null;}C.calendarType=(new U()).getCalendarType();j.conditionTypeInfo={name:this.getName(),data:C};if(this.iChangeTimer){q.sap.clearDelayedCall(this.iChangeTimer);delete this.iChangeTimer;}if(u){this._updateProvider(j,true,f);}else{this.iChangeTimer=q.sap.delayedCall(1,this,this._updateProvider,[j,false,f]);}return j;};
d.prototype._updateProvider=function(j,s,f){j.ranges=this.getFilterRanges();j.items=[];var e=false;var C=0;var i=0;var g=0;if(this.oModel.getData().currentoperation.languageText){var o=this.oModel.getData();var h=o.currentoperation.languageText;if(o.currentoperation.basicLanguageText.indexOf("{0}")>=0){if(j.conditionTypeInfo.data.value1!=null&&j.conditionTypeInfo.data.value1!=""){if(j.conditionTypeInfo.data.value1===1&&o.currentoperation.singulareBasicLanguageText){h=o.currentoperation.singulareBasicLanguageText;}else{h=this._fillNumberToText(o.currentoperation.basicLanguageText,j.conditionTypeInfo.data.value1);}this.oModel.setProperty("inputstate","NONE",this.getContext());}else if(this._bSuggestItemSelected){h=this._fillNumberToText(o.currentoperation.basicLanguageText);var x=o.currentoperation.basicLanguageText.indexOf("{0}");C=x+1;i=x;g=x+1;e=true;}else{h="";this.oModel.setProperty("inputstate","NONE",this.getContext());}}else if(o.currentoperation.textValue){h=o.currentoperation.languageText+" ("+o.currentoperation.textValue+")";this.oModel.setProperty("inputstate","NONE",this.getContext());}else{if(j.conditionTypeInfo.data.value1!==null&&j.conditionTypeInfo.data.value1!==""){var v=j.conditionTypeInfo.data.value1;var k=j.conditionTypeInfo.data.value2;var V;if(typeof v==="number"&&o.currentoperation.valueList){V=o.currentoperation.valueList[v].text;}else if(v instanceof Date){var l=this._getDateFormatter(false);if(j.conditionTypeInfo.data.operation!=="DATERANGE"&&(v&&!k)){V=l.format(v);}else if(j.conditionTypeInfo.data.operation==="DATERANGE"&&v&&k){V=l.format(v)+" - "+l.format(k);}else if(j.conditionTypeInfo.data.operation==="DATERANGE"&&v&&!k&&!(this._oPopup&&this._oPopup.isOpen())){V=l.format(v)+" - ";e=true;}else{V="";}}else{V=j.conditionTypeInfo.data.value1;}if(V){h=o.currentoperation.languageText+" ("+V+")";C=h.length-1;this.oModel.setProperty("inputstate","NONE",this.getContext());}else{h="";}}else{h="";}}this._bSuggestItemSelected=false;this.oModel.setProperty("/formattedText",h);if(e&&!(this._oPopup&&this._oPopup.isOpen())){this._oInput.$("inner").cursorPos(C);if(i<g){this._oInput.selectText(i,g);}this._oInput._lastValue="";}}if(this.oFilterProvider){this.oFilterProvider.oModel.setProperty("/"+this.sFieldName,j);this.oFilterProvider.setFilterData({},false,this.sFieldName);if(f&&this.oFilterProvider._oSmartFilter){this.oFilterProvider._oSmartFilter.fireFilterChange();if(this.oFilterProvider._oSmartFilter.getLiveMode()){this.oFilterProvider._oSmartFilter.triggerSearch(sap.ui.comp.smartfilterbar.SmartFilterBar.LIVE_MODE_INTERVAL);}}}};
d.prototype.getFilterRanges=function(){var C=this.getCondition(),v=[];if(C.operation==="LASTDAYS"){v=d.getDateRange(-C.value1,"DAY",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTWEEKS"){v=d.getDateRange(-C.value1,"WEEK",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTMONTHS"){v=d.getDateRange(-C.value1,"MONTH",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTQUARTERS"){v=d.getDateRange(-C.value1,"QUARTER",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="LASTYEARS"){v=d.getDateRange(-C.value1,"YEAR",true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTDAYS"){v=d.getDateRange(C.value1,"DAY",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTWEEKS"){v=d.getDateRange(C.value1,"WEEK",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTMONTHS"){v=d.getDateRange(C.value1,"MONTH",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTQUARTERS"){v=d.getDateRange(C.value1,"QUARTER",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="NEXTYEARS"){v=d.getDateRange(C.value1,"YEAR",true,true,true);C.value1=v[0];C.value2=v[1];}else if(C.operation==="SPECIFICMONTH"){var V=parseInt(C.value1,10),o=new U();o.setMonth(V);o=d.getMonthStartDate(o);v=d.getDateRange(1,"MONTH",o,true);C.value1=v[0];C.value2=v[1];}if(C.value1 instanceof U){C.value1=C.value1.oDate;}if(C.value2 instanceof U){C.value2=C.value2.oDate;}if(C.operation==="FROM"){if(!(this.isValidCondition()&&C.value1)){return[];}C.operation="GE";delete C.value2;}else if(C.operation==="TO"){if(!(this.isValidCondition()&&C.value1)){return[];}C.operation="LE";delete C.value2;if(this._bIgnoreTime){C.value1=d.setStartTime(C.value1).oDate;}else{C.value1=d.setEndTime(C.value1).oDate;}}else{if(!(this.isValidCondition()&&C.value1&&C.value2)){return[];}C.operation="BT";if(this._bIgnoreTime){C.value2=d.setStartTime(C.value2).oDate;}else{C.value1=d.setStartTime(C.value1).oDate;C.value2=d.setEndTime(C.value2).oDate;}}C.exclude=false;C.keyField=C.key;delete C.key;return[C];};
d.prototype.getTokenText=function(){return"";};
d.prototype.getName=function(){return this.getMetadata().getName();};
d.prototype.getType=function(){return"Edm.Date";};
d.prototype._bindValueState=function(C){C.bindProperty("valueState",{path:"$smartEntityFilter>inputstate",formatter:function(){if(this.getBinding("valueState").getValue()==="ERROR"){return sap.ui.core.ValueState.Error;}else{return sap.ui.core.ValueState.None;}}});};
d.prototype.initializeFilterItem=function(){this._oInput=new sap.m.Input(T._createStableId(this),{value:"{$smartEntityFilter>formattedText}",showValueHelp:true,showSuggestion:true,maxSuggestionWidth:"auto",valueHelpRequest:this._toggleOpen.bind(this)});this._oInput._highlightListText=function(){var i,l,e=this._oList.$().find('.sapMDLILabel, .sapMSLITitleOnly');for(i=0;i<e.length;i++){l=e[i];l.innerHTML=this._createHighlightedText(l);}};this._bindValueState(this._oInput);this._oInput.bindAggregation("suggestionItems",{path:"$smartEntityFilter>operations",sorter:new sap.ui.model.Sorter("order",false,false),filters:new sap.ui.model.Filter("order",function(v){return v!==undefined&&v>-1;}),template:new sap.ui.core.ListItem({key:{path:"$smartEntityFilter>key"}})});this._oInput.setFilterFunction(function(v,i){if(this._oPopup&&this._oPopup.isOpen()){return false;}var o=this.getOperation(i.getKey());v=v.trim();if(v==="?"){d._DefaultFilterSuggestItem.call(o,v,i,this);return o.category!=="DYNAMIC.DATERANGE"&&o.category!=="DYNAMIC.DATE";}if(o.filterSuggestItem){return o.filterSuggestItem(v,i,this);}else{return d._DefaultFilterSuggestItem.call(o,v,i,this);}}.bind(this));this._oInput.attachSuggestionItemSelected(function(e){var i=e.getParameter("selectedItem");if(!i){return;}var o=i.getKey();var O=this.getOperation(o);var v=e.oSource.getValue().trim();if(O.onItemSelected){O.onItemSelected(v,i,this);return;}else{d._DefaultOnItemSelected.call(O,v,i,this);}}.bind(this));this._oInput.attachChange(function(e){var v=e.getParameter("value");if(v){var o=this.getOperations();var h=o.some(function(O){if(O.onChange){return O.onChange(v,this);}else{return d._defaultOnChangeHandler.call(O,v,this);}},this);if(!h){this.oModel.setProperty("inputstate","ERROR",this.getContext());}}else{this.setCondition({key:this.sFieldName,operation:"FROM",value1:null,value2:null});this.oModel.setProperty("inputstate","NONE",this.getContext());}}.bind(this));this._oInput.attachBrowserEvent("focusin",function(e){if(q(e.target).hasClass("sapMInputBaseInner")&&this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();}}.bind(this));this._oInput.setBindingContext(this.getContext(),"$smartEntityFilter");this._oInput.setModel(this.getModel(),"$smartEntityFilter");this.bFireFilterChange=false;this.getModel().checkUpdate(true);this.bFireFilterChange=true;return this._oInput;};
d.prototype._toggleOpen=function(e){if(!this._oPopup){this._oPopupLayout=new sap.m.VBox();this._oPopupLayout.addStyleClass("sapUiCompDateRangeType");this._initializeFilterItemPopoverContent(this._oPopupLayout);this._oPopup=new sap.m.ResponsivePopover({showCloseButton:false,showArrow:true,showHeader:false,horizontalScrolling:false,placement:sap.m.PlacementType.VerticalPreferedBottom,content:this._oPopupLayout,contentWidth:"18rem"});if(sap.ui.Device.system.phone){this._oPopup.setBeginButton(new sap.m.Button({text:T.getTranslatedText("CONDITION_DATERANGETYPE_POPOVER_CLOSEBUTTON"),type:"Emphasized",press:function(e){this._oPopup.close();}.bind(this)}));}sap.ui.getCore().getMessageManager().registerObject(this._oPopup,true);this._oPopup.setModel(this.getModel(),"$smartEntityFilter");this._oPopup._oControl.oPopup.setAutoCloseAreas([this._oInput.getDomRef()]);}if(!this._oPopup.isOpen()){this._oPopup.openBy(this._oInput._getValueHelpIcon());}else{this._oPopup.close();}};
d.prototype._getDateFormatter=function(s){var f={style:this.oDateFormat.style,pattern:this.oDateFormat.pattern,strictParsing:s};return sap.ui.core.format.DateFormat.getInstance(f);};
d.prototype._fillNumberToText=function(t,n){var N="X";if(n){N=String(n);}return t.replace("{0}",N);};
d.prototype.destroy=function(){if(this.iChangeTimer){q.sap.clearDelayedCall(this.iChangeTimer);delete this.iChangeTimer;}if(this._oPopup){sap.ui.getCore().getMessageManager().unregisterObject(this._oPopup);this._oPopup.destroy();}T.prototype.destroy.apply(this,arguments);};
return d;},true);
sap.ui.predefine('sap/ui/comp/config/condition/Type',['jquery.sap.global','sap/ui/base/EventProvider','sap/ui/model/json/JSONModel','sap/m/Select'],function(q,E,J,S){"use strict";
var T=E.extend("sap.ui.comp.config.condition.Type",{constructor:function(f,F,o){E.call(this);this.oFilterProvider=F;var d={condition:{operation:"",value1:null,value2:null,key:f},operations:[],controls:[],currentoperation:{},pending:false};this.oModel=new J(d);var c=this.oModel.checkUpdate;this.oModel.suspend=function(){this.bSuspended=true;this.checkUpdate=function(){};};this.oModel.resume=function(){this.bSuspended=false;this.checkUpdate=c;this.checkUpdate();};this.oContext=this.oModel.getContext("/");this.oConditionContext=this.oModel.getContext("/condition");this.sFieldName=f;var O=this.oModel.bindProperty("operation",this.oConditionContext),t=this;O.attachChange(function(){var s=t.oModel.getProperty("operation",t.getConditionContext()),a=t.getOperation(s);if(a){a=q.extend({},a);if(!t.bIgnoreBindingChange){var D=t.getDefaultValues(a);t.setDefaultValues(D[0],D[1]);}}t.setControls([]);t.setControls(t.getControls(a));if(a){if(a.getValueList){a.valueList=a.getValueList();}t.oModel.setProperty("/currentoperation",a);}if(!t.bIgnoreBindingChange){t.serialize(false,t.bFireFilterChange);}});var v=this.oModel.bindProperty("value1",this.oConditionContext);v.attachChange(function(){if(!t.bIgnoreBindingChange){t.serialize(false,t.bFireFilterChange);}});var V=this.oModel.bindProperty("value2",this.oConditionContext);V.attachChange(function(){if(!t.bIgnoreBindingChange){t.serialize(false,t.bFireFilterChange);}});var p=this.oModel.bindProperty("pending",this.oContext);p.attachChange(function(){if(t.bAsync){if(t._iPendingTimer){q.sap.clearDelayedCall(t._iPendingTimer);}t._iPendingTimer=q.sap.delayedCall(10,t,"fireEvent",["PendingChange",{oSource:t,pending:t.oModel.getProperty("/pending")}]);}});this._oOperationSelect=null;this.oFieldMetadata=o;this.oOperationFilter=null;this.bAsync=false;}});
T._createStableId=function(i,s){if(i&&i.oFilterProvider&&i.oFieldMetadata){return i.oFilterProvider._createFilterControlId(i.oFieldMetadata)+(s?s:"");}else{return undefined;}};
T.getTranslatedText=function(t,r){if(typeof t==="object"){r=t.bundle;t=t.key;}if(!r){r="sap.ui.comp";}return sap.ui.getCore().getLibraryResourceBundle(r).getText(t)||t;};
T.prototype.getTranslatedText=T.getTranslatedText;
T.prototype.applySettings=function(s){if(s&&s.operations&&s.operations.filter){this.oOperationFilter=s.operations.filter;}else{this.oOperationFilter=null;}};
T.prototype.getParent=function(){return this.oFilterProvider._oSmartFilter;};
T.prototype.getModel=function(){return this.oModel;};
T.prototype.getConditionContext=function(){return this.oConditionContext;};
T.prototype.setDefaultValues=function(v,V){this.oModel.setProperty("value1",v,this.getConditionContext(),true);this.oModel.setProperty("value2",V,this.getConditionContext(),true);};
T.prototype.getContext=function(){return this.oContext;};
T.prototype.getControls=function(o){return[];};
T.prototype.getOperations=function(){return[];};
T.prototype.isPending=function(){return this.getModel().getProperty("pending",this.getContext());};
T.prototype.attachPendingChange=function(h){this.attachEvent("PendingChange",h);};
T.prototype.detachPendingChange=function(h){this.detachEvent("PendingChange",h);};
T.prototype.setPending=function(v){if(this.bAsync){this.getModel().setProperty("pending",v,this.getContext());}};
T.prototype._filterOperation=function(o){if(!this.oOperationFilter){return true;}var f=this.oOperationFilter,v=o[f.path];if(f.path&&f.contains&&v){var e=f.exclude||false,F=(typeof f.contains==="string")?f.contains.split(","):f.contains,r=e;for(var j=0;j<F.length;j++){if(e&&v.indexOf(F[j])>-1){r=false;}else if(!e&&v.indexOf(F[j])>-1){r=true;}}}return r;};
T.prototype._updateOperation=function(o){if(!o.textValue){o.textValue="";}if(!o.languageText&&o.textKey){o.languageText=this.getTranslatedText(o.textKey);}};
T.prototype.updateOperations=function(){this.oModel.setProperty("operations",[],this.getContext());};
T.prototype.getOperation=function(o){var O=this.oModel.getProperty("operations",this.getContext())||[];for(var i=0;i<O.length;i++){if(o===O[i].key){return O[i];}}return null;};
T.prototype.getDefaultOperation=function(){var o=this.getOperations();if(!o||o.length===0){return null;}for(var i=0;i<o.length;i++){if(o[i].defaultOperation){return o[i];}}return o[0];};
T.prototype.setControls=function(c){var o=this.oModel.getProperty("controls",this.getContext());if(o){for(var i=0;i<o.length;i++){o[i].destroy();}}this.oModel.setProperty("controls",c,this.getContext());if(c){for(var i=0;i<c.length;i++){c[i].setBindingContext(this.getConditionContext(),"$smartEntityFilter");}this._setAriaLabeledByToControls(c);}};
T.prototype._setAriaLabeledByToControls=function(c){if(this._oOperationLabel&&c){for(var i=0;i<c.length;i++){if(c[i].addAriaLabelledBy){if(c[i].getAriaLabelledBy().indexOf(this._oOperationLabel.getId())===-1){c[i].addAriaLabelledBy(this._oOperationLabel);}}}}};
T.prototype.setOperation=function(o){var O=this.getOperation(o);if(O){this.setCondition({operation:O.key,key:this.sFieldName,value1:O.defaultValues[0]||null,value2:O.defaultValues[1]||null});this.getModel().checkUpdate(true);}else{}};
T.prototype.isValidCondition=function(){return false;};
T.prototype.setCondition=function(c){this.oModel.setProperty("key",c.key,this.oConditionContext);this.oModel.setProperty("operation",c.operation,this.oConditionContext);this.oModel.setProperty("value1",c.value1,this.oConditionContext);this.oModel.setProperty("value2",c.value2,this.oConditionContext);this.oModel.setProperty("tokenText",this.getTokenText(c),this.oConditionContext);return this;};
T.prototype.setAsync=function(a){this.bAsync=a;};
T.prototype.getAsync=function(a){return this.bAsync;};
T.prototype.initialize=function(j){this.updateOperations();};
T.prototype.serialize=function(){};
T.prototype.validate=function(f){this._bForceError=f!==false;var i=this.getModel().getProperty("inputstate",this.getContext())||"NONE";if(!this.isPending()&&this.oFieldMetadata&&this.oFieldMetadata.isMandatory&&(!this.isValidCondition()||i!=="NONE")&&this._bForceError){this.getModel().setProperty("inputstate","ERROR",this.getContext());return false;}this.getModel().setProperty("inputstate","NONE",this.getContext());return true;};
T.prototype.getCondition=function(){var c=q.extend({},this.oModel.getProperty("",this.oConditionContext));return c;};
T.prototype.providerDataUpdated=function(u,d){};
T.prototype.getFilter=function(f){return null;};
T.prototype.getFilterRanges=function(p){return null;};
T.prototype.getTokenText=function(o){return"";};
T.prototype.getName=function(){return this.getMetadata().getName();};
T.prototype.getType=function(){return"Edm";};
T.prototype._initializeFilterItemPopoverContent=function(l){var o=new sap.m.Label({text:T.getTranslatedText("CONDITION_DATERANGETYPE_POPOVER_LABEL")});l.addItem(o);this._oOperationLabel=o;var O=new sap.m.Select(T._createStableId(this,"select"),{width:"100%",ariaLabelledBy:o});if(O._oList&&O._oList.setShowSecondaryValues){O._oList.setShowSecondaryValues(true);}O.bindProperty("selectedKey",{path:"$smartEntityFilter>condition/operation"});O.bindAggregation("items",{path:"$smartEntityFilter>operations",sorter:new sap.ui.model.Sorter("order",false,false),filters:new sap.ui.model.Filter("order",function(v){return v!==undefined&&v>-1;}),template:new sap.ui.core.ListItem({text:{path:"$smartEntityFilter>languageText"},key:{path:"$smartEntityFilter>key"},additionalText:{path:"$smartEntityFilter>textValue"}})});O.setBindingContext(this.getContext(),"$smartEntityFilter");var L=this.getModel().bindList("controls",this.getContext());L.attachChange(function(){var n=L.getModel().getProperty("controls",L.getContext());if(n){for(var i=0;i<n.length;i++){l.addItem(n[i]);}}});l.addItem(O);o.setLabelFor(O);this._oOperationSelect=O;l.setModel(this.getModel(),"$smartEntityFilter");this.bIgnoreBindingChange=true;this.getModel().checkUpdate(true);this.bIgnoreBindingChange=false;this.oLayout=l;};
T.prototype.destroy=function(){this.setControls([]);this.oLayout=null;E.prototype.destroy.apply(this,arguments);};
return T;},true);
sap.ui.predefine('sap/ui/comp/filterbar/FilterBar.designtime',[],function(){"use strict";return{annotations:{},properties:{persistencyKey:{ignore:true},advancedMode:{ignore:true},deltaVariantMode:{ignore:true},useToolbar:{ignore:true},expandAdvancedArea:{ignore:true},searchEnabled:{ignore:false},filterBarExpanded:{ignore:false},considerGroupTitle:{ignore:false},showClearButton:{ignore:false},showRestoreButton:{ignore:false},showGoOnFB:{ignore:false},showRestoreOnFB:{ignore:false},showClearOnFB:{ignore:false},showGoButton:{ignore:true},filterContainerWidth:{ignore:false},header:{ignore:false},showFilterConfiguration:{ignore:false},useSnapshot:{ignore:false}},customData:{}};},false);
sap.ui.predefine('sap/ui/comp/filterbar/FilterBar',['jquery.sap.global','sap/m/MultiInput','sap/m/Bar','sap/m/Button','sap/m/ButtonType','sap/m/CheckBox','sap/m/Label','sap/m/LabelDesign','sap/m/Link','sap/m/List','sap/m/ListSeparators','sap/m/Panel','sap/m/PlacementType','sap/m/SearchField','sap/m/Text','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/ui/Device','sap/ui/comp/state/UIState','./VariantConverterFrom','./VariantConverterTo','sap/ui/comp/library','sap/ui/comp/smartvariants/PersonalizableInfo','sap/ui/comp/smartvariants/SmartVariantManagementUi2','sap/ui/comp/variants/VariantManagement','sap/ui/core/Icon','sap/ui/core/TextAlign','sap/ui/core/Title','sap/ui/core/ValueState','sap/ui/layout/Grid','sap/ui/layout/GridRenderer','sap/ui/layout/GridData','sap/ui/layout/HorizontalLayout','sap/ui/layout/ResponsiveFlowLayout','sap/ui/layout/ResponsiveFlowLayoutData','sap/ui/layout/VerticalLayout','sap/ui/layout/form/Form','sap/ui/layout/form/FormContainer','sap/ui/layout/form/FormElement','sap/ui/layout/form/ResponsiveGridLayout','sap/ui/layout/form/FormRenderer','sap/ui/comp/util/IdentifierUtil'],function(q,M,B,a,b,C,L,c,d,e,f,P,g,S,T,h,k,D,U,V,l,m,o,p,r,I,s,t,u,G,v,w,H,R,x,y,F,z,A,E,J,K){"use strict";
var N=G.extend("sap.ui.comp.filterbar.FilterBar",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:""},advancedMode:{type:"boolean",group:"Misc",defaultValue:false},expandAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},searchEnabled:{type:"boolean",group:"Misc",defaultValue:true},filterBarExpanded:{type:"boolean",group:"Misc",defaultValue:true},considerGroupTitle:{type:"boolean",group:"Misc",defaultValue:false},showClearButton:{type:"boolean",group:"Misc",defaultValue:false},showRestoreButton:{type:"boolean",group:"Misc",defaultValue:true},showGoOnFB:{type:"boolean",group:"Misc",defaultValue:true},showRestoreOnFB:{type:"boolean",group:"Misc",defaultValue:false},showClearOnFB:{type:"boolean",group:"Misc",defaultValue:false},showGoButton:{type:"boolean",group:"Misc",defaultValue:null,deprecated:true},deltaVariantMode:{type:"boolean",group:"Misc",defaultValue:true},filterContainerWidth:{type:"string",group:"Misc",defaultValue:"12rem"},useToolbar:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:""},showFilterConfiguration:{type:"boolean",group:"Misc",defaultValue:true},useSnapshot:{type:"boolean",group:"Misc"}},aggregations:{filterItems:{type:"sap.ui.comp.filterbar.FilterItem",multiple:true,singularName:"filterItem"},filterGroupItems:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"filterGroupItem"},_parameters:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"_parameter",visibility:"hidden"}},associations:{basicSearch:{type:"sap.m.SearchField",multiple:false}},events:{cancel:{},reset:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},search:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},beforeVariantSave:{parameters:{context:{type:"string"}}},beforeVariantFetch:{},afterVariantLoad:{parameters:{context:{type:"string"},executeOnSelect:{type:"boolean"}}},filterChange:{added:{type:"sap.ui.core.Control"},deleted:{type:"sap.ui.core.Control"},filterItem:{type:"sap.ui.comp.filterbar.FilterGroupItem"}},clear:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},initialise:{},initialized:{},afterVariantSave:{},filtersDialogClosed:{parameters:{context:{type:"string"}}},filtersDialogBeforeOpen:{},filtersDialogCancel:{},filtersDialogSearch:{},filtersDialogSearchForFilters:{parameters:{newValue:{type:"string"}}},assignedFiltersChanged:{}}},
renderer:v.render
});
N.INTERNAL_GROUP="__$INTERNAL$";
N.prototype.init=function(){this._oBasicAreaLayout=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._oHideShowButton=null;this._oSearchButton=null;this._oFiltersButton=null;this._oClearButtonOnFB=null;this._oRestoreButtonOnFB=null;this._oDialog=null;this._oFilterDialog=null;this._bIsInitialized=false;this._aFields=null;this._oBasicSearchField=null;this._oVariant={};this._filterChangeSemaphore=true;this._triggerFilterChangeState=true;this._fRegisteredFilterChangeHandlers=null;this._fInitialiseVariants=null;this._bHostedVariantManagement=false;this._bDoItOnce=false;this._oLabelTextWidth=0;this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.setHSpacing(0);this.addStyleClass("sapUiCompFilterBar");if(this._isPhone()){this.addStyleClass("sapUiCompFilterBarPhone");}else{this.addStyleClass("sapUiCompFilterBarNonPhone");}this.addStyleClass("sapUiCompFilterBarMarginBottom");this.addStyleClass("sapUiCompFilterBarPaddingPanel");this.addStyleClass("sapContrastPlus");this._oToolbar=this._createToolbar();this._oToolbar.setLayoutData(new w({span:"L12 M12 S12"}));this.addContent(this._oToolbar);this._oBasicAreaLayout=this._createBasicAreaLayout();this._oBasicAreaLayout.setLayoutData(new w({span:"L12 M12 S12"}));this.addContent(this._oBasicAreaLayout);this._oAdvancedPanel=new P();this._oAdvancedPanel.setLayoutData(new w({span:"L12 M12 S12"}));this._oAdvancedPanel.setVisible(false);this._oAdvancedAreaForm=this._createAdvancedAreaForm();this._oAdvancedPanel.addContent(this._oAdvancedAreaForm);this.addContent(this._oAdvancedPanel);this._hResizeListener=sap.ui.core.ResizeHandler.register(this._oBasicAreaLayout,this._fHandleResize.bind(this));this.oModel=new sap.ui.model.json.JSONModel({});this.setModel(this.oModel,"FilterBar");this._oHintText=new T({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:s.Center});this._oHintText.setVisible(false);this._oHintText.addStyleClass("sapUiCompFilterBarHint");this._oBasicAreaLayout.addContent(this._oHintText);if(this._isTablet()||this._isPhone()){this.setFilterBarExpanded(false);}};
N.prototype._hasAnyVisibleFiltersOnFB=function(){var j=this._retrieveVisibleAdvancedItems();for(var i=0;i<j.length;i++){if(j[i].filterItem.getVisibleInFilterBar()){return true;}}return false;};
N.prototype._showHintText=function(){var i=0;if(!this._oHintText){return;}if(!this.getAdvancedMode()&&!this._isPhone()){var j=!this._hasAnyVisibleFiltersOnFB();if(j&&this._mAdvancedAreaFilter){i=this._oBasicAreaLayout.indexOfContent(this._oHintText);if(i<0){this._oBasicAreaLayout.insertContent(this._oHintText,0);}}this._oHintText.setVisible(j);if(i<0){this._oBasicAreaLayout.rerender();}}};
N.prototype._hasRelevantFilters=function(){var i,n=null,j;if(!this._mAdvancedAreaFilter||(Object.keys(this._mAdvancedAreaFilter)<1)){return false;}if(this.getAdvancedMode()){for(n in this._mAdvancedAreaFilter){var O=this._mAdvancedAreaFilter[n];if(O&&O.items){for(i=0;i<O.items.length;i++){j=O.items[i];if(j){if(this._determineVisibility(j.filterItem)){return true;}}}}}return false;}return true;};
N.prototype._adaptButtonsEnablement=function(){var i=false||!!this._mAdvancedAreaFilter;if(this._oHideShowButton){this._oHideShowButton.setEnabled(i);if(this.getAdvancedMode()&&!this._isPhone()){this._oHideShowButton.setVisible(this._hasRelevantFilters());}}this._oClearButtonOnFB.setEnabled(i);this._oRestoreButtonOnFB.setEnabled(i);this._oFiltersButton.setEnabled(i);if(i&&this.getFilterBarExpanded()&&!this._isPhone()&&!this.getAdvancedMode()){this._oBasicAreaLayout.setVisible(true);}};
N.prototype.getVariantManagement=function(){return this._oVariantManagement;};
N.prototype.setShowClearOnFB=function(i){if(!this._isPhone()){this.setProperty("showClearOnFB",i);this._oClearButtonOnFB.setVisible(i);}return this;};
N.prototype.setShowRestoreOnFB=function(i){if(!this._isPhone()){this.setProperty("showRestoreOnFB",i);this._oRestoreButtonOnFB.setVisible(i);}return this;};
N.prototype.setShowGoOnFB=function(i){this.setProperty("showGoOnFB",i);this._calcVisibilityGoButton();return this;};
N.prototype._calcVisibilityGoButton=function(){var i=this.getShowGoOnFB();if(i&&!this._isPhone()&&this.isLiveMode&&this.isLiveMode()){i=false;}this._oSearchButton.setVisible(i);};
N.prototype.setShowGoButton=function(i){this.setShowGoOnFB(i);return this;};
N.prototype.getShowGoButton=function(){return this.getShowGoOnFB();};
N.prototype.hideGoButton=function(){this._oSearchButton.setVisible(false);};
N.prototype.restoreGoButton=function(){this._oSearchButton.setVisible(this.getShowGoOnFB());};
N.prototype.setShowFilterConfiguration=function(i){this.setProperty("showFilterConfiguration",i);if(this._oFiltersButton&&!this._isPhone()){this._oFiltersButton.setVisible(i);}return this;};
N.prototype.isCurrentVariantStandard=function(){var i;if(this._oVariantManagement){i=this._oVariantManagement.getCurrentVariantId();if(i===""){return true;}return(i===this._oVariantManagement.getStandardVariantKey());}return undefined;};
N.prototype.setCurrentVariantId=function(i,j){if(this._oVariantManagement){this._oVariantManagement.setCurrentVariantId(i,j);}};
N.prototype.getCurrentVariantId=function(){var i="";if(this._oVariantManagement){i=this._oVariantManagement.getCurrentVariantId();}return i;};
N.prototype.getDataSuiteFormat=function(i){return this._getDataSuiteFormat(i,null);};
N.prototype._getDataSuiteFormat=function(i,j){var n=null;var O,Q,W;if(this._oVariantManagement){O=this.getCurrentVariantId();if(this.getFilterDataAsString){W=this._determineVariantFiltersInfo(i,true);Q=this.getFilterDataAsString(i);if(Q){var X=new l();n=X.convert(O,W,Q,this,j);}}}return n;};
N.prototype.getBasicSearchName=function(){var i=null;if(this._oBasicSearchField&&this.getEntitySet){i="$"+this.getEntitySet()+".basicSearch";}return i;};
N.prototype.getBasicSearchValue=function(){return this._getBasicSearchValue();};
N.prototype.getUiState=function(i){var j,n=false;if(i){n=(i.allFilters===true);}j=this._getDataSuiteFormat(n,"13.0");return new U({selectionVariant:JSON.parse(j)});};
N.prototype.setUiState=function(i,j){var n,O=null,Q=false,W=true;if(j){Q=(j.replace===true);W=(j.strictMode===true);}if(i){O=i.getSelectionVariant();if(O){n=JSON.stringify(O);}}this._setDataSuiteFormat(n,Q,W);};
N.prototype.setDataSuiteFormat=function(i,j){this._setDataSuiteFormat(i,j,true);};
N.prototype._setDataSuiteFormat=function(i,j,n){var O,Q;if(i){O=new V();Q=O.convert(i,this,n);if(Q){if(Q.variantId&&this._oVariantManagement){if(this._bIsInitialized){if(this._oVariantManagement.isPageVariant()){this._oVariantManagement._selectVariant(Q.variantId,"DATA_SUITE");}else{this._setFilterVisibility(Q.variantId);}}this._oVariantManagement.setInitialSelectionKey(Q.variantId);}if(Q.payload&&(j||(Object.keys(JSON.parse(Q.payload)).length>0))&&this.setFilterDataAsString){this.setFilterDataAsString(Q.payload,j);}if(Q.basicSearch&&this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(""||Q.basicSearch);this._updateToolbarText();}}}};
N.prototype._setFilterVisibility=function(i){if(this._oVariantManagement.getSelectionKey()!==i){this._oVariantManagement.setInitialSelectionKey(i);var j=this._getStandardVariant();if(j){var n=this._oVariantManagement.getVariantContent(this,i);if(n&&n.filterbar){if(n.version==="V2"){n=this.mergeVariant(j,n);}this._reapplyVisibility(n.filterbar);}}}};
N.prototype.applySettings=function(j){if(this._possibleToChangeVariantManagement()){if(j&&j.customData){for(var i=0;i<j.customData.length;i++){var n=j.customData[i];if(n&&n.mProperties&&n.mProperties.key==="pageVariantPersistencyKey"){this._oVariantManagement.setPersistencyKey(n.mProperties.value);this._oVariantManagement.setVisible(true);this._bHostedVariantManagement=true;}}}}if(j&&j.persistencyKey){this._bHostedVariantManagement=true;}this._applyLayoutDataToToolbarButtons();G.prototype.applySettings.apply(this,arguments);};
N.prototype._applyLayoutDataToToolbarButtons=function(i){q.sap.require("sap.m.ToolbarLayoutData");if(this._isPhone()||this._isTablet()||this.getAdvancedMode()||!this.getUseToolbar()){return;}this._oHideShowButton.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:true}));this._oClearButtonOnFB.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:true}));this._oRestoreButtonOnFB.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:true}));this._oFiltersButton.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:true}));this._oSearchButton.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:false}));};
N.prototype.setPersistencyKey=function(i){this.setProperty("persistencyKey",i);if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(true);}return this;};
N.prototype._possibleToChangeVariantManagement=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){return true;}return false;};
N.prototype.clearVariantSelection=function(){if(this._oVariantManagement){this._oVariantManagement.clearVariantSelection();}};
N.prototype.setSearchEnabled=function(i){this.setProperty("searchEnabled",i);if(this._oSearchButton){this._oSearchButton.setEnabled(i);}return this;};
N.prototype.setSearchButtonEmphType=function(i){};
N.prototype.setSimplifiedMode=function(i){};
N.prototype.getSimplifiedMode=function(){if(this.getAdvancedMode()){return false;}return true;};
N.prototype.setExpandAdvancedArea=function(i){this.setFilterBarExpanded(i);};
N.prototype.getExpandAdvancedArea=function(){return this.getFilterBarExpanded();};
N.prototype.setAdvancedMode=function(i){this.setProperty("advancedMode",i);this.toggleStyleClass("sapContrastPlus",!i);if(i){if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false);}if(this._oToolbar){this._oToolbar.addStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");if(this._oBasicSearchField){if(this._oToolbar.indexOfContent(this._oBasicSearchField)<0){this._oToolbar.insertContent(this._oBasicSearchField,1);}}}}else{if(this.getPersistencyKey()&&this._possibleToChangeVariantManagement()){if(this._oVariantManagement){this._oVariantManagement.setVisible(true);}if(this._oToolbar){this._oToolbar.removeStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");}}}this._oFiltersButton.setVisible(!i);if(this._oHideShowButton){this._oHideShowButton.setVisible((i&&this._isPhone())?false:true);}this._oBasicAreaLayout.setVisible(!i&&this.getFilterBarExpanded());this._oAdvancedPanel.setVisible(i&&this.getFilterBarExpanded());this._adaptButtonsEnablement();return this;};
N.prototype.setUseToolbar=function(i){this.setProperty("useToolbar",i);if(!i){this._adaptNewFilterBarDesign();}else{this._recreateToolbar();}return this;};
N.prototype._recreateToolbar=function(){if(!this._oToolbar){this._bButtonaAdded=false;if(this._oButtonsVLayout){this._oBasicAreaLayout.removeContent(this._oButtonsVLayout);this._oButtonsVLayout.destroy();this._oButtonsVLayout=null;}this._oToolbar=this._createToolbar(true);this._oToolbar.setLayoutData(new w({span:"L12 M12 S12"}));this.insertContent(this._oToolbar,0);if(this._oVariantManagement){if(this._oVariantManagement instanceof p||((this._oVariantManagement.getId()===(this.getId()+"-variant")))){this._oToolbar.insertContent(this._oVariantManagement,0);}}this._adaptButtonsEnablement();if(this._oBasicSearchFieldContainer){this._oBasicAreaLayout.removeContent(this._oBasicSearchFieldContainer);this._cleanBasicSearchContainer();this.setBasicSearch(this._oBasicSearchField);}this._oHintText=new T({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:s.Center});this._oHintText.setVisible(false);this._oHintText.addStyleClass("sapUiCompFilterBarHint");this._oBasicAreaLayout.addContent(this._oHintText);this._updateToolbarText();}};
N.prototype._cleanBasicSearchContainer=function(){if(this._oBasicSearchFieldContainer){var j=this._oBasicSearchFieldContainer.removeAllContent();if(j){for(var i=0;i<j.length;i++){if(j[i]!==this._oBasicSearchField){j[i].destroy();}}}this._oBasicSearchFieldContainer.destroy();this._oBasicSearchFieldContainer=null;}};
N.prototype.setHeader=function(i){this.setProperty("header",i);if(this.getUseToolbar()){this._addHeaderToToolbar(i);}return this;};
N.prototype._addHeaderToToolbar=function(i){if(this._oToolbar){if(this._oVariantManagement&&(this._oVariantManagement.getVisible()||this._bHostedVariantManagement)&&(this._oToolbar.indexOfContent(this._oVariantManagement)>-1)){if(!this._oSeparator){q.sap.require("sap.m.ToolbarSeparator");this._oSeparator=new sap.m.ToolbarSeparator();this._oToolbar.setHeight("3rem");}this._oToolbar.removeContent(this._oSeparator);this._oToolbar.insertContent(this._oSeparator,0);}if(!this._oText){this._oText=new T();this._oText.addStyleClass("sapMH4Style");this._oText.addStyleClass("sapUiCompSmartChartHeader");}this._oText.setText(i);this._oToolbar.removeContent(this._oText);this._oToolbar.insertContent(this._oText,0);}};
N.prototype._isNewFilterBarDesign=function(){if(this.getAdvancedMode()){return false;}if(!this.getUseToolbar()){return true;}return false;};
N.prototype._adaptNewFilterBarDesign=function(){if(this._isNewFilterBarDesign()){this.setFilterBarExpanded(true);this._oBasicAreaLayout.setVisible(true);if(this.getUseToolbar()){var j=this._oToolbar.getContent();for(var i=j.length-1;i>0;i--){this._oToolbar.removeContent(j[i]);}}else{if(this._oToolbar){this.removeContent(this._oToolbar);this._oToolbar.removeAllContent();this._oToolbar.destroy();this._oToolbar=null;}}if(this._oHintText){this._oBasicAreaLayout.removeContent(this._oHintText);this._oHintText.destroy();this._oHintText=null;}if(this._oHideShowButton){this._oHideShowButton.destroy();this._oHideShowButton=null;}if(!this._bButtonaAdded){this._bButtonaAdded=true;this._addButtonsToBasicArea();}if(this._oBasicSearchField){this.setBasicSearch(this._oBasicSearchField);}}};
N.prototype._addButtonsToBasicArea=function(){var i=new y();if(sap.ui.getCore().getConfiguration().getRTL()){i.addStyleClass("sapUiCompFilterBarFloatLeft");}else{i.addStyleClass("sapUiCompFilterBarFloatRight");}var j=new H();j.setLayoutData(new x({margin:true}));i.addContent(new T());i.addContent(j);j.addContent(this._oClearButtonOnFB);this._oClearButtonOnFB.addStyleClass("sapUiCompFilterBarPaddingRightBtn");j.addContent(this._oRestoreButtonOnFB);this._oRestoreButtonOnFB.addStyleClass("sapUiCompFilterBarPaddingRightBtn");j.addContent(this._oFiltersButton);this._oFiltersButton.addStyleClass("sapUiCompFilterBarPaddingRightBtn");j.addContent(this._oSearchButton);this._updateToolbarText();i.addStyleClass("sapUiCompFilterBarPaddingRight");if(this._isPhone()){i.addStyleClass("sapUiCompFilterBarRemoveMinWidth");this._oBasicAreaLayout.insertContent(i,0);}else{i.addStyleClass("sapUiCompFilterBarPaddingTop");this._oBasicAreaLayout.addContent(i);}this._oButtonsVLayout=i;};
N.prototype._addBasicSearchToBasicArea=function(i){var n=null;if(this._oBasicSearchFieldContainer){if(this._oBasicSearchFieldContainer.$()){n=this._oBasicSearchFieldContainer.$().width();}if(!n){n=this._oBasicSearchFieldContainer.getWidth();}this._cleanBasicSearchContainer();}if(i){var j=new L({text:"\u2008"});j.addStyleClass("sapBasicSearchFilter");var O=this._addControlToBasicAreaContainer(null,i,j);if(O){O.setVisible(true);var Q=0;if(this._isPhone()){Q=1;}this._oBasicAreaLayout.insertContent(O,Q);this._oBasicSearchFieldContainer=O;if(n){if(typeof n==='string'){this._oBasicSearchFieldContainer.setWidth(n);}else{this._oBasicSearchFieldContainer.setWidth(n+"px");}}}}};
N.prototype._setCollectiveSearch=function(i){if(this.getAdvancedMode()){if(this._oToolbar){if(this._oVariantManagement){this._oToolbar.removeContent(this._oVariantManagement);this._unregisterVariantManagement(this._oVariantManagement);this._oVariantManagement=null;}if(this._oCollectiveSearch){this._oToolbar.removeContent(this._oCollectiveSearch);}this._oCollectiveSearch=i;this._oToolbar.insertContent(this._oCollectiveSearch,0);this._oToolbar.removeStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");}}};
N.prototype.setBasicSearch=function(i){var j=this;this.setAssociation("basicSearch",i,true);if(typeof i==="string"){i=sap.ui.getCore().byId(i);}if(this._oBasicSearchField&&this._oToolbar){this._oToolbar.removeContent(this._oBasicSearchField);}if(i&&this._isNewFilterBarDesign()){this._addBasicSearchToBasicArea(i);}else{if(i&&this._oToolbar&&(!this._isPhone()||this.getAdvancedMode())){var n=this._indexOfSpacerOnToolbar();this._oToolbar.insertContent(i,n);if(this._isUi2Mode()){i.attachLiveChange(function(O){j.fireFilterChange(O);});}}}this._oBasicSearchField=i;return this;};
N.prototype._getBasicSearchValue=function(){if(this._oBasicSearchField&&this._oBasicSearchField.getValue){return this._oBasicSearchField.getValue();}return null;};
N.prototype._indexOfSpacerOnToolbar=function(){var j=this._oToolbar.getContent(),i;if(j){for(i=0;i<j.length;i++){if(j[i]instanceof k){return i;}}}return 0;};
N.prototype.addFilterItem=function(i){var n,j,O;if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem' may not be null nor empty");}n=i.getName();if(!n){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.name' may not be null nor empty");}j=i.getControl();if(!j){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.control' may not be null nor empty");}this.addAggregation("filterItems",i,true);if(!this._aBasicAreaSelection){this._aBasicAreaSelection=[];}var Q={control:i.getControl(),filterItem:i};this._aBasicAreaSelection.push(Q);O=new sap.ui.comp.filterbar.FilterGroupItem({label:i.getLabel(),labelTooltip:i.getLabelTooltip(),name:i.getName(),mandatory:i.getMandatory(),visible:i.getVisible(),visibleInFilterBar:i.getVisibleInFilterBar(),partOfCurrentVariant:true,control:i.getControl(),groupName:N.INTERNAL_GROUP,groupTitle:"",hiddenFilter:i.getHiddenFilter()});if(i.data('isCustomField')){O.data('isCustomField',true);}i.attachChange(this._filterItemChange.bind(this,null));this.addFilterGroupItem(O);return this;};
N.prototype.addFilterGroupItem=function(i){var n,j,O,Q;if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItem()"+" Expected argument 'oFilterGroupItem' may not be null nor empty");}this.addAggregation("filterGroupItems",i,true);j=i.getGroupName();if(!j){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" GroupName may not be null nor empty");}n=i.getName();if(!n){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" Name may not be null nor empty");}if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};}if(!this._mAdvancedAreaFilter[j]){this._mAdvancedAreaFilter[j]={};this._mAdvancedAreaFilter[j].filterItem=null;this._mAdvancedAreaFilter[j].items=[];}if(!this._mAdvancedAreaFilter[j].items){this._mAdvancedAreaFilter[j].items=[];}if(!this._mAdvancedAreaFilter[j].filterItem){this._mAdvancedAreaFilter[j].filterItem=i;}O={control:i.getControl(),filterItem:i};if(this.getAdvancedMode()||i.getVisibleInFilterBar()){i.setVisibleInFilterBar(true);}else{i.setVisibleInFilterBar(false);}this._mAdvancedAreaFilter[j].items.push(O);if(!i.getHiddenFilter()){Q=this._addControlToBasicAreaFormContainer(i);if(Q){O.container=Q;Q.setVisible(i.getVisible()&&i.getVisibleInFilterBar());if(i.getVisibleInFilterBar()){i.setPartOfCurrentVariant(i.getVisibleInFilterBar());}i.attachChange(this._filterGroupItemChange.bind(this));}if(this.getAdvancedMode()){this._rerenderAA();}else{this._showHintText();}}this._adaptButtonsEnablement();return this;};
N.prototype._addParameter=function(j){var i,O,n,Q=false,W=N.INTERNAL_GROUP;j._setParameter(true);j.setVisibleInFilterBar(true);j.setPartOfCurrentVariant(true);this.addAggregation("_parameters",j,true);O={control:j.getControl(),filterItem:j};if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};}if(!this._mAdvancedAreaFilter[W]){this._mAdvancedAreaFilter[W]={};this._mAdvancedAreaFilter[W].filterItem=null;}if(!this._mAdvancedAreaFilter[W].items){this._mAdvancedAreaFilter[W].items=[];}for(i=0;i<this._mAdvancedAreaFilter[W].items.length;i++){var X=this._mAdvancedAreaFilter[W].items[i];if(X.filterItem._isParameter()){continue;}this._mAdvancedAreaFilter[W].items.splice(i,0,O);Q=true;break;}if(!Q){this._mAdvancedAreaFilter[W].items.push(O);}n=this._addControlToBasicAreaFormContainer(j);if(n){O.container=n;n.setVisible(j.getVisible());}if(Q){this._oBasicAreaLayout.removeContent(n);this._addContainerInOrder(O.filterItem,O.container);}if(!this.getAdvancedMode()){this._showHintText();}this._adaptButtonsEnablement();return this;};
N.prototype._filterItemChange=function(i,j){var n;var O;var Q;if(j&&j.oSource&&(j.oSource instanceof sap.ui.comp.filterbar.FilterItem)){Q=j.getParameter("propertyName");if(Q==="visibleInFilterBar"||Q==="visible"||Q==="label"||Q==="labelTooltip"||Q==="mandatory"){n=this._determineItemByName(j.oSource.getName(),N.INTERNAL_GROUP);if(n&&n.filterItem){if((Q==="visible")){O=j.oSource.getVisible();n.filterItem.setVisible(O);}else if(Q==="visibleInFilterBar"){O=j.oSource.getVisibleInFilterBar();var W=this._checkChangePossibleVisibleInFilterBar(n.filterItem,O);if(W){n.filterItem.setVisibleInFilterBar(O);}else{j.oSource.setVisibleInFilterBar(true);}}else if(Q==="label"){n.filterItem.setLabel(j.oSource.getLabel());}else if(Q==="labelTooltip"){n.filterItem.setLabelTooltip(j.oSource.getLabelTooltip());}else if(Q==="mandatory"){O=j.oSource.getMandatory();n.filterItem.setMandatory(O);}}}}};
N.prototype._filterGroupItemChange=function(i){var j;var n;if(i&&i.oSource){n=i.getParameter("propertyName");if(n==="visibleInFilterBar"||n==="visible"){j=this._determineItemByName(i.oSource.getName(),i.oSource.getGroupName());if(j){if(n==="visibleInFilterBar"){var O=i.oSource.getVisibleInFilterBar();var Q=this._checkChangePossibleVisibleInFilterBar(i.oSource,O);if(!Q){i.oSource.setVisibleInFilterBar(true);O=true;}if(O){i.oSource.setPartOfCurrentVariant(true);}if(!this.getAdvancedMode()&&!this._oDialog){this._rerenderItem(j);this._adaptLinkText(i.oSource.getGroupName());}}else if(n==="visible"){if(this.getAdvancedMode()&&j.container){j.container.setVisible(true);}else{this._updateToolbarText();this._rerenderGroup(j,i.oSource.getGroupName());}}this._showHintText();}}else if(n==="groupTitle"){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[i.oSource.getGroupName()]){if(this._mAdvancedAreaFilter[i.oSource.getGroupName()].formcontainer){this._mAdvancedAreaFilter[i.oSource.getGroupName()].formcontainer.setTitle(i.oSource.getGroupTitle());}else{this._adaptGroupTitle(i.oSource.getGroupName());}}}else if(n==="label"){if(!this._mAdvancedAreaFilter[i.oSource.getGroupName()].formcontainer){this._adaptGroupTitleForFilter(i.oSource);}}else if(n==="mandatory"){if(this._oFilterDialog){this._adaptMandatoryForFilter(i.oSource);}}else if((n==="partOfCurrentVariant")&&this.ensureLoadedValueHelpList){var W=this.determineFilterItemByName(i.oSource.getName());if(W&&W.getPartOfCurrentVariant()){this.ensureLoadedValueHelpList(i.oSource.getName());}}if(this.getAdvancedMode()){this._rerenderAA();}}};
N.prototype._addContainer=function(i){if(i){if(this._oBasicAreaLayout&&!this._oFilterDialog){if(i.container&&(this._oBasicAreaLayout.indexOfContent(i.container)===-1)){this._addContainerInOrder(i.filterItem,i.container);}}}};
N.prototype._addContainerInOrder=function(j,O){var n,i,Q,W=this._oBasicAreaLayout.getContent(),X=-1;if(this._isNewFilterBarDesign()){if(this._isPhone()){X++;}if(this._oBasicSearchField){X++;}}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){var Y=this._mAdvancedAreaFilter[n];if(Y&&Y.items){for(i=0;i<Y.items.length;i++){if(!Y.items[i].container){continue;}if(Y.items[i].container===O){this._oBasicAreaLayout.insertContent(O,X+1);return;}Q=W.indexOf(Y.items[i].container);if(Q>=0){X=Q;}}}}}};
N.prototype._checkChangePossibleVisibleInFilterBar=function(i,j){if(i&&i.getMandatory()&&!j){var n=this._hasFilterValue(i);if(!n){i.setVisibleInFilterBar(true);return false;}}return true;};
N.prototype._adaptLinkText=function(i){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[i]&&this._mAdvancedAreaFilter[i].link){this._setLinkText(i,this._mAdvancedAreaFilter[i].link);}};
N.prototype._hasFilterValue=function(i){var j=this._getFiltersWithValues();return this._checkFilterForValue(j,i);};
N.prototype._adaptMandatoryForFilter=function(i){var j;var n=i.getGroupName();if(i){j=this._determineItemByName(i.getName(),n);if(j&&j.checkbox&&j.checkbox.getVisible()){var O=true;if(i.getMandatory()){var Q=this._hasFilterValue(i);if(!Q){O=false;i.setVisibleInFilterBar(true);}}j.checkbox.setEnabled(O);}}};
N.prototype._adaptGroupTitleForFilter=function(i){var j;var n;if(i&&!i.getHiddenFilter()){j=i.getLabel();n=i.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){if(n&&i.getGroupTitle()){n.setText(j+" ("+i.getGroupTitle()+')');}}else{n.setText(j);}}};
N.prototype._adaptGroupTitle=function(j){var i;var n;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){n=this._mAdvancedAreaFilter[j].items[i];if(n&&n){this._adaptGroupTitleForFilter(n.filterItem);}}}};
N.prototype._adaptGroupsTitle=function(){var n=null;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&n!==N.INTERNAL_GROUP){this._adaptGroupTitle(n);}}}};
N.prototype.registerGetFiltersWithValues=function(i){this._fRegisterGetFiltersWithValues=i;return this;};
N.prototype.registerFetchData=function(i){this._fRegisteredFetchData=i;return this;};
N.prototype.registerApplyData=function(i){this._fRegisteredApplyData=i;return this;};
N.prototype._isTINAFScenario=function(){if(this._oVariantManagement){if(!this._isUi2Mode()){return true;}}else{if(this._oCollectiveSearch&&this.getAdvancedMode()){return true;}}return false;};
N.prototype.fireInitialise=function(){if(this._isTINAFScenario()){this._createVisibleFilters();if(this.getAdvancedMode()){this._ensureFilterLoaded(null);}this._fireInitialiseEvent();}else{this._initializeVariantManagement();}};
N.prototype.variantsInitialized=function(){this.fireInitialized();};
N.prototype.fireInitialized=function(){this.fireEvent("initialized");};
N.prototype._initializeVariantManagement=function(){this._createVisibleFilters();if(this._oVariantManagement&&this.getPersistencyKey()){if(this._isTINAFScenario()){this._oVariantManagement.initialise(this._initialiseVariants,this);}else{this._fInitialiseVariants=this._initialiseVariants.bind(this);this._oVariantManagement.attachInitialise(this._fInitialiseVariants,this);this._oVariantManagement.initialise();}}else{this._fireInitialiseEvent();}};
N.prototype._fireInitialiseEvent=function(){try{this.fireEvent("initialise");}catch(i){q.sap.log.error("error during initialise event handling - "+i.message);}this._bIsInitialized=true;this._updateToolbarText();};
N.prototype._initialiseVariants=function(){this._fireInitialiseEvent();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false);}};
N.prototype.fireAfterVariantLoad=function(i,j){this._rerenderFilters();var n={context:i,executeOnSelect:j};this.fireEvent("afterVariantLoad",n);};
N.prototype.fireBeforeVariantSave=function(i){var j={context:i};var n=this._getConsiderFilterChanges();if(i){this._setConsiderFilterChanges(false);}this.fireEvent("beforeVariantSave",j);if(i){this._setConsiderFilterChanges(n);}};
N.prototype.removeAllFilterItems=function(){var i;var j=[];this._aBasicAreaSelection=null;var n=this._oBasicAreaLayout.getContent();if(n){for(i=0;i<n.length;i++){this._oBasicAreaLayout.removeContent(n[i]);}}if(this._mAdvancedAreaFilter){if((this._mAdvancedAreaFilter[N.INTERNAL_GROUP])&&(this._mAdvancedAreaFilter[N.INTERNAL_GROUP].items)){for(i=0;i<this._mAdvancedAreaFilter[N.INTERNAL_GROUP].items.length;i++){if(this._mAdvancedAreaFilter[N.INTERNAL_GROUP].items[i].filterItem){j.push(this._mAdvancedAreaFilter[N.INTERNAL_GROUP].items[i].filterItem);}}delete this._mAdvancedAreaFilter[N.INTERNAL_GROUP];}if(Object.keys(this._mAdvancedAreaFilter).length===0){this._mAdvancedAreaFilter=null;}}this._destroyItems(j);this._adaptButtonsEnablement();return j;};
N.prototype.removeAllFilterGroupItems=function(){var n=null,i;var j=[];for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){if(this._mAdvancedAreaFilter[n].items[i].filterItem){j.push(this._mAdvancedAreaFilter[n].items[i].filterItem);}}delete this._mAdvancedAreaFilter[n];}}if(Object.keys(this._mAdvancedAreaFilter).length===0){this._mAdvancedAreaFilter=null;}}this.__bDeleteMode=true;this._destroyItems(j);this.__bDeleteMode=false;this._adaptButtonsEnablement();return j;};
N.prototype.removeAllFilters=function(){this.removeAllFilterItems();this.removeAllFilterGroupItems();this.removeBasicSearch();};
N.prototype.removeBasicSearch=function(){this.setBasicSearch(null);};
N.prototype.getAllFilterItems=function(j){var i,n=null;var O=[];var Q,W;if(!j){this._ensureFilterLoaded(null);}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){Q=this._mAdvancedAreaFilter[n];if(Q.items){for(i=0;i<Q.items.length;i++){W=Q.items[i];if(W&&W.filterItem&&W.filterItem.getVisible()){if(j){if(W.filterItem.getVisibleInFilterBar()||W.filterItem.getPartOfCurrentVariant()){O.push(W.filterItem);}}else{O.push(W.filterItem);}}}}}}}return O;};
N.prototype._clearErrorState=function(){this._resetFiltersInErrorValueState();};
N.prototype.getAggregation=function(n){if(n=="filterGroupItems"&&!this.__bDeleteMode){this._ensureFilterLoaded(null);}return G.prototype.getAggregation.apply(this,arguments);};
N.prototype._getFilterInformation=function(){return[];};
N.prototype._createVisibleFilters=function(){this._getFilters();};
N.prototype._getFilters=function(){this._aFields=this._getFilterInformation();var i,j;if(this._aFields&&this._aFields.length>0){if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};if(!this.getAdvancedMode()){this._mAdvancedAreaFilter[N.INTERNAL_GROUP]={};this._mAdvancedAreaFilter[N.INTERNAL_GROUP].filterItem=null;this._mAdvancedAreaFilter[N.INTERNAL_GROUP].items=null;}}for(i=0;i<this._aFields.length;i++){j=this._aFields[i];if(j.groupName!==N.INTERNAL_GROUP){if(!this._mAdvancedAreaFilter[j.groupName]){this._mAdvancedAreaFilter[j.groupName]={};this._mAdvancedAreaFilter[j.groupName].groupTitle=j.groupTitle;this._mAdvancedAreaFilter[j.groupName].filterItem=null;this._mAdvancedAreaFilter[j.groupName].items=[];}}if(j.visibleInAdvancedArea||(j.groupName===N.INTERNAL_GROUP)){this._instanciateFilterItem(j);}}}this._adaptButtonsEnablement();};
N.prototype.isVisibleInFilterBarByName=function(n){var i,j=this._getFilterMetadata(n);if(j&&j.factory){if((j.hasOwnProperty("visibleInAdvancedArea")&&j.visibleInAdvancedArea)||(j.groupName===N.INTERNAL_GROUP)){return true;}}else{i=this.determineFilterItemByName(n);if(i){return i.getVisibleInFilterBar();}}return false;};
N.prototype._getFilterMetadata=function(n){if(this._aFields){for(var i=0;i<this._aFields.length;i++){if(this._aFields[i].fieldName===n){return this._aFields[i];}}}return null;};
N.prototype.getNonVisibleCustomFilterNames=function(){if(this._aFields.length>0){return this._getLazyNonVisibleCustomFilterNames();}else{return this._getNonVisibleCustomFilterNames();}};
N.prototype._getLazyNonVisibleCustomFilterNames=function(){var i=this,j=[];this._aFields.forEach(function(n){if(n.factory){if(n.isCustomFilterField&&!n.visibleInAdvancedArea){j.push(n.fieldName);}}else if(i._isNonVisibleCustomFilterNamesByName(n.fieldName,n.groupName)){j.push(n.fieldName);}});return j;};
N.prototype._isNonVisibleCustomFilterNamesByName=function(n,j){var i,O;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){O=this._mAdvancedAreaFilter[j].items[i];if(O.filterName&&(O.filterItem.getName()===n)){return this._isNonVisibleCustomFilterNamesByFilter(O.filterItem);}}}return false;};
N.prototype._isNonVisibleCustomFilterNamesByFilter=function(i){if(i.data("isCustomField")&&!i.getVisibleInFilterBar()){return true;}return false;};
N.prototype._getNonVisibleCustomFilterNames=function(){var i=this,j=[],n=this.getAllFilterItems();if(n){n.forEach(function(O){if(i._isNonVisibleCustomFilterNamesByFilter(O)){j.push(O.getName());}});}return j;};
N.prototype._ensureFilterLoaded=function(n){var i,j,O;if(this._aFields&&this._aFields.length>0){for(j=0;j<this._aFields.length;j++){O=this._aFields[j];if(!O.factory){continue;}if(n){for(i=0;i<n.length;i++){if((O.fieldName===n[i].name)&&(O.groupName===n[i].group)){this._instanciateFilterItem(O);break;}}}else{this._instanciateFilterItem(O);}}if(!n){this._aFields=[];}}};
N.prototype._instanciateFilterItem=function(i){var j=i.factory;if(j){delete i.factory;j.call(i);}};
N.prototype._destroyItems=function(j){if(j&&j.length){for(var i=0;i<j.length;i++){j[i].destroy();}}};
N.prototype._reapplyVisibility=function(j){var i,n=null;var O;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var Q=this._mAdvancedAreaFilter[n];if(Q&&Q.items){for(i=0;i<Q.items.length;i++){O=Q.items[i];if(O&&O.filterItem){this._setPersVisibility(j,O.filterItem);}}if(n!==N.INTERNAL_GROUP){this._adaptLinkText(n);}}}}}};
N.prototype._setPersVisibility=function(i,j){var n,O;var Q;if(j&&!j.getHiddenFilter()){O=j.getName();n=j.getGroupName();Q=this._checkForFilterInfo(i,O,n);if(this._isTINAFScenario()){if(Q){j.setVisibleInFilterBar(Q.visibleInFilterBar);j.setPartOfCurrentVariant(Q.partOfCurrentVariant);if(Q.hasOwnProperty("visible")){j.setVisible(Q.visible);}}else{j.setVisibleInFilterBar(false);if((n===N.INTERNAL_GROUP)||j._isParameter()){j.setPartOfCurrentVariant(true);}else{j.setPartOfCurrentVariant(false);}}}else{if(Q&&(Q.visibleInFilterBar!==undefined)){j.setVisibleInFilterBar((Q.visibleInFilterBar));j.setPartOfCurrentVariant((Q.partOfCurrentVariant));}else{if((n!==N.INTERNAL_GROUP)&&Q&&(Q.group===n)){j.setVisibleInFilterBar((Q!==null));}}}if(n===N.INTERNAL_GROUP){j.setPartOfCurrentVariant(true);}if(j){var W=this.determineControlByFilterItem(j,true);if(W&&W.getValueState&&(W.getValueState()!==u.None)){if(W.setValue){W.setValue("");}W.setValueState(u.None);}}}};
N.prototype._checkForFilterInfo=function(j,n,O){var i;var Q=null;if(j&&j.length){for(i=0;i<j.length;i++){if(j[i].name===n){if((j[i].group===O)||this.isLiveMode){Q=j[i];break;}}}}return Q;};
N.prototype._createVariantManagement=function(){var i=new p(this.getId()+"-variantUi2",{});var j=new o({type:"filterBar",keyName:"persistencyKey"});j.setControl(this);i.addPersonalizableControl(j);i.addStyleClass("sapUiCompFilterBarMarginLeft");return i;};
N.prototype.fireAssignedFiltersChanged=function(){this.fireEvent("assignedFiltersChanged");};
N.prototype.retrieveFiltersWithValuesAsText=function(){var j,n,O=this.retrieveFiltersWithValues(),Q,W=this.getBasicSearchValue();if(W&&O){O.splice(0,0,W);}if(!O||(O.length===0)){j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO");}else{if(!this._isPhone()){Q=Math.min(5,O.length);n="";for(var i=0;i<Q;i++){n+=O[i];if(i<(Q-1)){n+=', ';}}j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS",[O.length,n]);if(Q<O.length){j+=", ...";}}else{j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[O.length]);}}return j;};
N.prototype.retrieveFiltersWithValues=function(){var i,j=[];var n=this._getFiltersWithValues();if(n){for(i=0;i<n.length;i++){if(n[i].getVisible()&&n[i].getPartOfCurrentVariant()){j.push(n[i].getLabel());}}}return j;};
N.prototype._getFiltersWithValues=function(){if(this._fRegisterGetFiltersWithValues){try{return this._fRegisterGetFiltersWithValues();}catch(i){q.sap.log.error("callback for obtaining the filter count throws an exception");}}return null;};
N.prototype._getFiltersWithValuesCount=function(){var n=0;var i=this.retrieveFiltersWithValues();n=i.length;if(this._oBasicSearchField&&this._oBasicSearchField.getValue&&this._oBasicSearchField.getValue()){n++;}return n;};
N.prototype._checkFilterForValue=function(j,n){var i;if(j){for(i=0;i<j.length;i++){if(j[i]===n){return true;}}}return false;};
N.prototype._handleVisibilityOfToolbar=function(){if(this.getAdvancedMode()&&this._oToolbar){var j=false;var n=this._oToolbar.getContent();for(var i=0;i<n.length;i++){if(n[i]instanceof k){continue;}if(n[i].getVisible&&n[i].getVisible()){j=true;break;}}this._oToolbar.setVisible(j);}};
N.prototype._toggleHideShow=function(){this.setFilterBarExpanded(!this.getFilterBarExpanded());};
N.prototype._updateToolbarText=function(){var i=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS":"FILTER_BAR_ACTIVE_FILTERS";var Z=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_ZERO":"FILTER_BAR_ACTIVE_FILTERS_ZERO";var n=this._getFiltersWithValuesCount();var j=n?(this._oRb.getText(i,[n])):(this._oRb.getText(Z));this._oFiltersButton.setText(j);this._oFiltersButton.setTooltip(j);this.fireAssignedFiltersChanged();};
N.prototype.setFilterBarExpanded=function(i){if(this.getAdvancedMode()){this.setProperty("filterBarExpanded",i);if(this._oHideShowButton){if(i){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_HIDE"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_SHOW"));}}this._calcVisibilityGoButton();this._oAdvancedPanel.setVisible(i);}else{var j=this._isPhone()?false:i;this.setProperty("filterBarExpanded",j);if(this._isNewFilterBarDesign()){return;}if(this._isPhone()){if(this._oHideShowButton){this._oHideShowButton.setVisible(false);}this._calcVisibilityGoButton();this._oBasicAreaLayout.setVisible(false);}else{if(this._oHideShowButton){if(j){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_HIDE"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_HIDE"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_SHOW"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_SHOW"));}this._oHideShowButton.setVisible(true);}this._calcVisibilityGoButton();if(this._oHideShowButton){if(this._oHideShowButton.getEnabled()){this._oBasicAreaLayout.setVisible(j);}else{this._oBasicAreaLayout.setVisible(false);}}}}this._updateToolbarText();};
N.prototype._selectionChangedInFilterDialog=function(i,j){j.setVisibleInFilterBar(i.getSelected());if(this._getConsiderFilterChanges()&&this._oVariantManagement&&this._oVariantManagement.getEnabled()){this._oVariantManagement.currentVariantSetModified(true);}this._bDirtyViaDialog=true;};
N.prototype._mandatoryFilterChange=function(i){if(!i){return;}var j=i.getParameters();if(!j||!j.oSource){return;}var n=this._determineByControl(j.oSource);if(n&&n.checkbox){var O=n.filterItem;if(!O.getMandatory()){return;}var Q=this._hasFilterValue(O);if(O.getVisibleInFilterBar()){if(Q){n.checkbox.setEnabled(true);}else{n.checkbox.setEnabled(false);}}else{if(!Q){O.setVisibleInFilterBar(true);n.checkbox.setSelected(true);n.checkbox.setEnabled(false);}}}};
N.prototype._createFiltersAndAdaptBasicArea=function(){var i;this._setConsiderFilterChanges(false);this._recreateBasicAreaContainer(true);i=this._createFilters();var j=this._retrieveVisibleAdvancedItems();if(this._oAddToFilterBarLabel&&(!j||(j.length<=0))){this._oAddToFilterBarLabel.setVisible(false);}this._setConsiderFilterChanges(true);return i;};
N.prototype._determineNotAssignedFiltersCount=function(j){var n=0,i,O;if(this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){O=this._mAdvancedAreaFilter[j].items[i].filterItem;if(!O.getVisible()||O.getHiddenFilter()){continue;}if(!O.getPartOfCurrentVariant()&&!O.getVisibleInFilterBar()){n++;}}}return n;};
N.prototype._rerenderGroup=function(j,n){var i;var O;this._rerenderItem(j);this._adaptLinkText(n);if(j.formelement){if(this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items&&this._mAdvancedAreaFilter[n].formcontainer){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){O=this._mAdvancedAreaFilter[n].items[i].filterItem;if(O&&O.getVisible()){this._mAdvancedAreaFilter[n].formcontainer.setVisible(true);return;}}this._mAdvancedAreaFilter[n].formcontainer.setVisible(false);}}};
N.prototype._setLinkTextAndCount=function(i,j,n){var O;if(n){O=this._oRb.getText("FILTER_BAR_SHOW_MORE_FILTERS",[n]);}else{O=this._oRb.getText("FILTER_BAR_SHOW_CHANGE_FILTERS");}j.setText(O);};
N.prototype._setLinkText=function(i,j){var n=this._determineNotAssignedFiltersCount(i);this._setLinkTextAndCount(i,j,n);};
N.prototype._createLink=function(i,j){var n,O=this;n=K.replace(i);var Q=new d(this.getId()+"-link-"+n);this._setLinkText(i,Q);Q.attachPress(function(){O._createAddRemoveFiltersDialog(i,Q);});if(j){Q.addAriaLabelledBy(j);}return Q;};
N.prototype._isPhone=function(){return(D.system.phone)?true:false;};
N.prototype._isTablet=function(){return(D.system.tablet&&!D.system.desktop)?true:false;};
N.prototype._createForm=function(i){var j=this;var n=null;n=F.extend('sap.ui.comp.filterbar.Form',{metadata:{},renderer:function(O,Q){J.render.apply(this,arguments);}});(function(){n.prototype.contentOnAfterRendering=function(){F.prototype.contentOnAfterRendering.apply(this,arguments);j._adaptStyleSheet();if(j._oFilterDialog&&j._oFilterDialog.isOpen()&&(j._isNewFilterBarDesign()||!j._isPhone())){j._repositionAddToFilterBarLabel();}};}());return new n({editable:true,layout:i});};
N.prototype._adaptStyleSheet=function(){var i,O;var j,Q,n=null;for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j&&j.control&&j.control instanceof M){Q=j.control.$();if(Q){O=Q.parent().css("overflow");if(O!=="visible"){Q.parent().css({"overflow":"visible"});}}}}}}};
N.prototype._addFieldToFiltersDialog=function(i,j,n){var O,Q,W,X;if(!i&&!i.filterItem||i.filterItem.getHiddenFilter()){return;}var Y=this._determineVisibility(i.filterItem);if(i.control.getWidth){i.width=i.control.getWidth();if(i.control.setWidth){i.control.setWidth("100%");}}O=i.filterItem.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){O.setText(i.filterItem.getLabel());}Q=new C({tooltip:this._oRb.getText("FILTER_BAR_SHOW_IN_FILTERBAR")});Q.setSelected(i.filterItem.getVisibleInFilterBar());if(i.filterItem.getMandatory()){X=this._checkFilterForValue(n,i.filterItem);if(!X&&i.filterItem.getVisibleInFilterBar()){Q.setEnabled(false);}}Q.attachSelect(this._selectionChangedInFilterDialog.bind(this,Q,i.filterItem));if(this._isNewFilterBarDesign()||!this._isPhone()){i.control.setLayoutData(new w({span:"L8 M8 S11"}));Q.setLayoutData(new w({span:"L1 M1 S1"}));}else{i.control.setLayoutData(new w({span:"L8 M8 S12"}));Q.setVisible(false);}W=new A({label:O,fields:[i.control,Q]});W.setVisible(Y);i.formelement=W;i.checkbox=Q;j.addFormElement(W);};
N.prototype._createHeaderAddToFilterBar=function(i){var j,n;if(this._isNewFilterBarDesign()||!this._isPhone()){j=new L({});j.setLayoutData(new w({span:"L10 M10"}));j.addStyleClass("sapUiCompFilterBarAddFilterLabel");this._oAddToFilterBarLabel=j;n=new A({label:j,fields:[]});i.addFormElement(n);j.setLabelFor(null);}};
N.prototype._addBasicSearchAddToFilterBar=function(i){var j;if(!this._isPhone()){this._oBasicSearchFieldClone=this._oBasicSearchField.clone();if(this._oToolbar){this._replaceOnToolbar(this._oBasicSearchField,this._oBasicSearchFieldClone);}else{this._addBasicSearchToBasicArea(this._oBasicSearchFieldClone);}}else{if(this.getAdvancedMode()){this._oBasicSearchFieldClone=this._oBasicSearchField.clone();}}if(this._isNewFilterBarDesign()||!this._isPhone()){this._oBasicSearchField.setLayoutData(new w({span:"L8 M8 S11",indent:"L3 M3 S0"}));}else{this._oBasicSearchField.setLayoutData(new w({span:"L8 M8 S12"}));}if(this._isPhone()&&this.getAdvancedMode()){j=new A({fields:[this._oBasicSearchFieldClone]});}else{j=new A({fields:[this._oBasicSearchField]});}i.addFormElement(j);};
N.prototype._isGroupEmpty=function(i){var j=true;i.some(function(n){if(n.filterItem&&n.filterItem.getVisible()&&!n.filterItem.getHiddenFilter()){j=false;return true;}return false;});return j;};
N.prototype._createFilters=function(){var j=this,n=null,i,O;var Q=null,W,X,Y;var Z,$,_=true,a1;this._oClonedVM=null;var b1=new E();b1.setColumnsL(1);b1.setLabelSpanL(3);b1.setColumnsM(1);b1.setLabelSpanM(3);var c1=this._createForm(b1);c1.addStyleClass("sapUiCompFilterBarDialogForm");if(this._possibleToChangeVariantManagement()&&this._oToolbar){var d1=this._oToolbar.indexOfContent(this._oVariantManagement);if(d1>=0){this._oClonedVM=this._oVariantManagement.clone();this._oClonedVM._setSelectionByKey(this._oVariantManagement.getSelectionKey());this._replaceOnToolbar(this._oVariantManagement,this._oClonedVM);Q=new z();this._oVariantManagement.setLayoutData(new w({span:"L10 M10 S12"}));W=new A({fields:this._oVariantManagement});Q.addFormElement(W);c1.addFormContainer(Q);}c1.addStyleClass("sapUiCompFilterBarGroupTitle");}if(this._oBasicSearchField&&!this._isNewFilterBarDesign()){if(!Q){Q=new z();c1.addFormContainer(Q);}this._addBasicSearchAddToFilterBar(Q);}this._ensureFilterLoaded(null);var e1=this._getFiltersWithValues();this._fRegisteredFilterChangeHandlers=function(f1){j._mandatoryFilterChange(f1);};this.attachFilterChange(this._fRegisteredFilterChangeHandlers);this._oVariant.content=this.fetchVariant();if(this._oVariantManagement){this._oVariant.key=this._oVariantManagement.getSelectionKey();this._oVariant.modified=this._oVariantManagement.currentVariantGetModified();}this._oInitialVariant={};q.extend(true,this._oInitialVariant,this._oVariant);for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){if(n===N.INTERNAL_GROUP){O=this._oRb.getText("FILTER_BAR_BASIC_GROUP");}else{O=this._mAdvancedAreaFilter[n].filterItem.getGroupTitle();}$=new t({text:O});Q=new z({title:$});if(_&&!this._isGroupEmpty(this._mAdvancedAreaFilter[n].items)){_=false;this._createHeaderAddToFilterBar(Q);if(this._oBasicSearchField&&this._isNewFilterBarDesign()){this._addBasicSearchAddToFilterBar(Q);}}a1=0;this._mAdvancedAreaFilter[n].formcontainer=Q;for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){Y=this._mAdvancedAreaFilter[n].items[i];this._addFieldToFiltersDialog(Y,Q,e1);if(!Y.filterItem.getVisible()){a1++;}}X=Q.getFormElements();if(X&&X.length>0){if((n!==N.INTERNAL_GROUP)&&!this.getAdvancedMode()){Z=this._createLink(n,$);if(Z){if(this._isPhone()){Z.setLayoutData(new w({span:"L8 M8 S12"}));}else{Z.setLayoutData(new w({span:"L8 M8 S12",indent:"L3 M3 S0"}));}W=new A({fields:[Z]});this._mAdvancedAreaFilter[n].link=Z;Q.addFormElement(W);}if(a1===X.length){Q.setVisible(false);}}c1.addFormContainer(Q);}}}return c1;};
N.prototype._replaceOnToolbar=function(i,n){var j;if(this._oToolbar){j=this._oToolbar.indexOfContent(i);if(j>-1){this._oToolbar.insertContent(n,j);this._oToolbar.removeContent(i);}}};
N.prototype._recreateBasicAreaContainer=function(j){var n=null,i;var O,Q;var W,X,Y;if(this._possibleToChangeVariantManagement()&&this._oToolbar&&this._oClonedVM&&this._oVariantManagement){this._replaceOnToolbar(this._oClonedVM,this._oVariantManagement);this._oClonedVM.destroy();this._oClonedVM=null;}if(!this._isPhone()&&this._oToolbar&&this._oBasicSearchFieldClone&&this._oBasicSearchField){this._replaceOnToolbar(this._oBasicSearchFieldClone,this._oBasicSearchField);this._oBasicSearchFieldClone.destroy();this._oBasicSearchFieldClone=null;}var Z=this._oBasicAreaLayout.removeAllContent();if(!j){if(Z){var $=Z.length;var _=0;if(this._isNewFilterBarDesign()){if(this._isPhone()){_++;}else{$--;}}for(i=_;i<$;i++){if(Z[i]!==this._oHintText){Z[i].destroy();}}}}if(this._isNewFilterBarDesign()){this._addBasicSearchToBasicArea(this._oBasicSearchField);this._addButtonsToBasicArea();}for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){W=this._mAdvancedAreaFilter[n].items[i].filterItem;if(W.getHiddenFilter()){continue;}Y=null;if(j){if(!W.getVisible()||!W.getVisibleInFilterBar()){continue;}X=this._mAdvancedAreaFilter[n].items[i].container;if(X){if(X.$()&&X.$().width()){Y=X.$().width();}X.removeAllContent();X.destroy();}O=this._mAdvancedAreaFilter[n].items[i].control.clone();Q=W.getLabelControl(this.getId()).clone();Q.setLabelFor(null);if(this.getConsiderGroupTitle()){W.getLabelControl(this.getId()).setText(W.getLabel());}}else{O=this._mAdvancedAreaFilter[n].items[i].control;Q=W.getLabelControl(this.getId());if(this._mAdvancedAreaFilter[n].items[i].width){O.setWidth(this._mAdvancedAreaFilter[n].items[i].width);}}X=this._addControlToBasicAreaContainer(W,O,Q);if(X){X.setVisible(W.getVisible()&&W.getVisibleInFilterBar());this._mAdvancedAreaFilter[n].items[i].container=X;if(j&&Y){X.setWidth(Y+"px");}}}}}};
N.prototype._searchRequested=function(){var i,j=false;if(this.verifySearchAllowed){i=this.verifySearchAllowed();if(i.hasOwnProperty("pending")){return;}else if(i.hasOwnProperty("error")||i.hasOwnProperty("mandatory")){j=true;}}if(j){this._bOKFiltersDialogTriggered=false;this._activateMainContent();}else{this._bOKFiltersDialogTriggered=true;if(!this.isLiveMode||!this.isLiveMode()){this.search();}else{this._oFilterDialog.close();}}};
N.prototype._activateMainContent=function(){var i=this.getFilterDialogContent();if(i&&(i.length>1)){this.addFilterDialogContent(i[0]);}};
N.prototype.fireSearch=function(i){if(this._oFilterDialog&&this._bOKFiltersDialogTriggered){this._oFilterDialog.close();}this.fireEvent("search",i);};
N.prototype._closeDialogAndRestoreFilterBar=function(i){this._sSearchCriteriaInFiltersDialog=null;this._oVariant={};i.removeAllFormContainers();this._recreateBasicAreaContainer();this._deleteProperties();this._adaptGroupsTitle();if(this._fRegisteredFilterChangeHandlers){this.detachFilterChange(this._fRegisteredFilterChangeHandlers);this._fRegisteredFilterChangeHandlers=null;}if(this.isLiveMode&&this.isLiveMode()){this.search();}this._updateToolbarText();};
N.prototype._variantSave=function(i){var j;this._oVariant={};this.fireBeforeVariantSave();if(this._oVariantManagement&&this._oFilterDialog){j=this._oVariantManagement.getSelectionKey();this._oVariant.key=j;this._oVariant.modified=false;this._oVariant.content=this._oVariantManagement.getVariantContent(this,j);}};
N.prototype._afterVariantSave=function(i){this.fireAfterVariantSave();};
N.prototype._variantSavePressed=function(i){this._bVariantSavePressed=true;if(this._oVariantManagement){var j=this._oVariantManagement.getSelectionKey();var n=this._oVariantManagement.getItemByKey(this._oVariantManagement.getSelectionKey());if(!this._oVariantManagement._isIndustrySolutionModeAndVendorLayer()&&((j===this._oVariantManagement.getStandardVariantKey())||(n&&n.getReadOnly&&n.getReadOnly()))){this._oVariantManagement._openSaveAsDialog();}else{this._oVariantManagement._variantSavePressed();}this._bDirtyViaDialog=false;if(this._oInitialVariant&&this._oVariantManagement._getVariantContent){this._oInitialVariant.content=this._oVariantManagement._getVariantContent(this,j);}}};
N.prototype._findFirstVisibleGroup=function(){var n=null;for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].formcontainer&&this._mAdvancedAreaFilter[n].formcontainer.getVisible()){return this._mAdvancedAreaFilter[n].formcontainer.getTitle();}}return null;};
N.prototype._checkForCollision=function(i,j){var n=this._oFilterDialog.getDomRef("scroll");this._oLabelTextWidth=Math.max(j.width(),this._oLabelTextWidth);if(!this._oLabelTextWidth){return false;}if(!(i.position()&&i.width())){return false;}if((this._oLabelTextWidth>0)&&n&&(i.position().left+i.width())>=(n.clientWidth-this._oLabelTextWidth-32)){if(this._oAddToFilterBarLabel){this._oAddToFilterBarLabel.setText("");}return true;}return false;};
N.prototype._repositionAddToFilterBarLabel=function(){if(this._isNewFilterBarDesign()||!this._isPhone()){var i=this._findFirstVisibleGroup();if(i&&this._oAddToFilterBarLabel){var j=i.$();if(j){var n=this._oAddToFilterBarLabel.$();if(n){j.css({display:"inline"});if(this._checkForCollision(j,n)){return;}var O=j.offset();var Q=n.offset();if(Q&&O){Q.top=Math.ceil(O.top);n.offset(Q);if(!sap.ui.getCore().getConfiguration().getRTL()){n.css({left:"auto"});}}}}}if(this._oAddToFilterBarLabel&&!this._oAddToFilterBarLabel.getText()){this._oAddToFilterBarLabel.setText(this._oRb.getText("FILTER_BAR_SHOW_IN_FILTERBAR"));}}};
N.prototype._filterSetInErrorState=function(i){if(this._oFilterDialog&&this._oFilterDialog.isOpen()){if(this._getConsiderFilterChanges()&&this._oVariantManagement&&this._oVariantManagement.getEnabled()){this._oVariantManagement.currentVariantSetModified(true);}this._bDirtyViaDialog=true;}};
N.prototype._cancelFilterDialog=function(i){if(i&&this._oVariantManagement){this._bDirtyViaDialog=this._oVariantManagement._bSaveCanceled;}if(!this.getPersistencyKey()&&(this.getUseSnapshot()===false)){this.fireCancel();return;}if(this._oInitialVariant&&this._oInitialVariant.content&&this._bDirtyViaDialog){this._resetFiltersInErrorValueState();this.applyVariant(this._oInitialVariant.content,"CANCEL");if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement._setSelectionByKey(this._oInitialVariant.key);}this._oVariantManagement.currentVariantSetModified(this._oInitialVariant.modified);}this.fireCancel();}};
N.prototype._resetFiltersInErrorValueState=function(){var n;n=this._retrieveCurrentSelectionSet(true,true);n.forEach(function(O){if(O.control&&O.control.setValueState&&O.control.getValueState){if(O.control.getValueState()===u.Error){if(O.control.setValue){O.control.setValue("");}O.control.setValueState(u.None);}}});};
N.prototype.showFilterDialog=function(){if(!this._oFilterDialog){this._showFilterDialog();}};
N.prototype.addFilterDialogContent=function(i){if(this._oFilterDialog&&i){var n=this._oFilterDialog.indexOfContent(i);if(n<0){this._oFilterDialog.addContent(i);}return this._setFilterDialogActiveContent(i);}return null;};
N.prototype.getFilterDialogContent=function(){if(this._oFilterDialog){return this._oFilterDialog.getContent();}return null;};
N.prototype._setFilterDialogActiveContent=function(n){var i=false;if(this._oFilterDialog){this.getFilterDialogContent().forEach(function(j){if(n===j){j.setVisible(true);i=true;}else{j.setVisible(false);}});if(i){return n;}}return null;};
N.prototype._getFilterDialogActiveContent=function(){var i=null;if(this._oFilterDialog){this.getFilterDialogContent().some(function(j){if(j.getVisible()){i=j;return true;}return false;});}return i;};
N.prototype.setContentWidth=function(n){if(this._oFilterDialog){this._oFilterDialog.setContentWidth(n+"px");}};
N.prototype.setContentHeight=function(n){if(this._oFilterDialog){this._oFilterDialog.setContentHeight(n+"px");}};
N.prototype._showFilterDialog=function(){q.sap.require("sap.m.Dialog");var i=this;this._oFilterDialog=new sap.m.Dialog(this.getId()+"-adapt-filters-dialog",{stretch:D.system.phone,resizable:true,draggable:true});this._oFilterDialog.setParent(this);this._oFilterDialog.addStyleClass("sapUiPopupWithPadding");if(this.$().closest(".sapUiSizeCompact").length>0){this._oFilterDialog.addStyleClass("sapUiSizeCompact");}this._oFilterDialog.addStyleClass("sapUiCompFilterBarDialog");if(!this._isPhone()){this._oFilterDialog.addStyleClass("sapUiCompFilterBarDialogNonPhone");}var j="FILTER_BAR_ADV_FILTERS_DIALOG";if(this._isNewFilterBarDesign()){j="FILTER_BAR_ADAPT_FILTERS_DIALOG";}this._oFilterDialog.setTitle(this._oRb.getText(j));this._oFilterDialog.addStyleClass("sapMH4FontSize");this._oFilterDialog.addStyleClass("sapMH4Style");this._oFilterDialog.setVerticalScrolling(true);var n=new B();this._oFiltersSearchField=new S({placeholder:this._oRb.getText("FILTER_BAR_SEARCH")});n.addContentRight(this._oFiltersSearchField);this._oFilterDialog.setSubHeader(n);var O=this._createFiltersAndAdaptBasicArea();if(!O){q.sap.log.error("Content for Advanced Filters Dialog could not be created");return;}this._oFilterDialog.addContent(O);this._oFiltersSearchField.attachLiveChange(function(Q){if(this._oFilterDialog){this.fireFiltersDialogSearchForFilters(Q.getParameters());this._triggerSearchInFilterDialog(Q);}}.bind(this));this._bOKFiltersDialogTriggered=false;this._bVariantSaveFiltersDialogTriggered=false;this._oFilterDialog.bDoNotAddToBasicArea=true;this._oFilterDialog.attachBeforeOpen(function(){this.fireFiltersDialogBeforeOpen();}.bind(this));this._oFilterDialog.attachAfterOpen(function(){if(!this._isPhone()&&(O===this._getFilterDialogActiveContent())){var Q=i._oFilterDialog.getDomRef("scroll");if(Q){this.setContentWidth(Q.clientWidth);this.setContentHeight(Q.clientHeight);}}}.bind(this));this._oFilterDialog.attachBeforeClose(function(){if(!i._bOKFiltersDialogTriggered){i._cancelFilterDialog(i._bVariantSaveFiltersDialogTriggered);}delete i._oFilterDialog.bDoNotAddToBasicArea;i._closeDialogAndRestoreFilterBar(O);});this._oFilterDialog.attachAfterClose(function(){i._oBasicAreaLayout.rerender();i._oInitialVariant=null;i._oFilterDialog.destroy();i._oFilterDialog=null;i._showHintText();var Q={};Q.context=i._bOKFiltersDialogTriggered?"SEARCH":"CANCEL";i.fireFiltersDialogClosed(Q);if(i._isNewFilterBarDesign()){i._fHandleResize();}});this._oFilterDialog.setInitialFocus(this._oFiltersSearchField);this._addFilterDialogButtons(O);this._bDirtyViaDialog=false;this._oFilterDialog.open();};
N.prototype.isDialogOpen=function(){return this._oFilterDialog?true:false;};
N.prototype._addFilterDialogButtons=function(i){q.sap.require("sap.m.OverflowToolbarPriority");q.sap.require("sap.m.OverflowToolbarLayoutData");var j=this;var n;var O=null,Q,W,X,Y;X=new a(this.getId()+"-btnGoFilterDialog",{text:this._oRb.getText("FILTER_BAR_GO"),press:function(){X.focus();j._dialogSearch(i);},layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}),type:b.Emphasized});this._oFilterDialog.addButton(X);if(!this.getAdvancedMode()){if(this._oVariantManagement&&this._oVariantManagement.getVisible()){this._oVariantManagement._delayedControlCreation();if(this._oVariantManagement.oVariantSave){O=new a(this.getId()+"-btnSaveFilterDialog",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),enabled:this._oVariantManagement.oVariantSave.getEnabled(),press:function(){j._dialogVariantSave(i);},layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.Low})});n=this._oVariantManagement.getModel("save_enablement");O.setModel(n);O.bindProperty("enabled","/enabled");this._oFilterDialog.addButton(O);}}Q=new a(this.getId()+"-btnClearFilterDialog",{text:this._oRb.getText("FILTER_BAR_CLEAR"),visible:this.getShowClearButton(),press:function(){j._dialogClear(i);},layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.Low})});this._oFilterDialog.addButton(Q);W=new a(this.getId()+"-btnRestoreFilterDialog",{text:this._oRb.getText("FILTER_BAR_RESTORE"),visible:this.getShowRestoreButton(),press:function(){j._dialogRestore(i);},layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.Low})});if(n){W.setEnabled(this._oVariantManagement.oVariantSave.getEnabled());W.setModel(n);W.bindProperty("enabled","/enabled");}this._oFilterDialog.addButton(W);Y=new a(this.getId()+"-btnCancelFilterDialog",{text:this._oRb.getText("FILTER_BAR_CANCEL"),press:function(){j._dialogCancel(i);},layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.High})});this._oFilterDialog.addButton(Y);}};
N.prototype._dialogSearch=function(i){this.fireFiltersDialogSearch();this._searchRequested();};
N.prototype._dialogCancel=function(i){if(this._oFilterDialog){this._bOKFiltersDialogTriggered=false;this.fireFiltersDialogCancel();this._oFilterDialog.close();}};
N.prototype._dialogVariantSave=function(i){this._bVariantSaveFiltersDialogTriggered=true;this._variantSavePressed();};
N.prototype._dialogRestore=function(i){this.reset();if(this._oVariantManagement&&this._oVariantManagement.getEnabled()){this._oVariantManagement.currentVariantSetModified(false);}};
N.prototype._dialogClear=function(i){this.clear();};
N.prototype._createButtons=function(i){var j=this;this._oHideShowButton=new a(this.getId()+"-btnShowHide",{text:this._oRb.getText("FILTER_BAR_HIDE"),tooltip:this._oRb.getText("FILTER_BAR_HIDE"),type:b.Transparent,enabled:false});this._oHideShowButton.attachPress(function(){j._toggleHideShow();});i.addContent(this._oHideShowButton);this._oClearButtonOnFB=new a(this.getId()+"-btnClear",{visible:this.getShowClearOnFB(),text:this._oRb.getText("FILTER_BAR_CLEAR"),tooltip:this._oRb.getText("FILTER_BAR_CLEAR"),type:b.Transparent,enabled:false});this._oClearButtonOnFB.attachPress(function(){j.clear();});i.addContent(this._oClearButtonOnFB);this._oRestoreButtonOnFB=new a(this.getId()+"-btnRestore",{visible:this.getShowRestoreOnFB(),text:this._oRb.getText("FILTER_BAR_RESTORE"),tooltip:this._oRb.getText("FILTER_BAR_RESTORE"),type:b.Transparent,enabled:false});this._oRestoreButtonOnFB.attachPress(function(){j.reset();if(j._oVariantManagement){j._oVariantManagement.currentVariantSetModified(false);}});i.addContent(this._oRestoreButtonOnFB);this._oFiltersButton=new a(this.getId()+"-btnFilters",{visible:this.getShowFilterConfiguration()||this._isPhone(),text:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),tooltip:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),type:b.Transparent,enabled:false});this._oFiltersButton.attachPress(function(){j._oFiltersButton.focus();j._showFilterDialog();});i.addContent(this._oFiltersButton);this._oSearchButton=new a(this.getId()+"-btnGo",{visible:this.getShowGoOnFB(),text:this._oRb.getText("FILTER_BAR_GO"),tooltip:this._oRb.getText("FILTER_BAR_GO"),type:b.Emphasized});this._oSearchButton.attachPress(function(){j._oSearchButton.focus();j.search();});i.addContent(this._oSearchButton);};
N.prototype._createVariantLayout=function(){this._oVariantManagement=this._createVariantManagement();if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false);}this._registerVariantManagement();return this._oVariantManagement;};
N.prototype._createToolbar=function(i){var j=new h(this.getId()+"-toolbar");if(!i){var n=this._createVariantLayout();j.addContent(n);}j.addContent(new k());this._createButtons(j);j.addStyleClass("sapUiCompFilterBarToolbar");j.addStyleClass("sapUiCompFilterBarToolbarMarker");return j;};
N.prototype._replaceVariantManagement=function(i){if(this._oVariantManagement){this._unregisterVariantManagement();if(this._oToolbar&&this._oToolbar.getContent(this._oVariantManagement)){this._oToolbar.removeContent(this._oVariantManagement);}this._oVariantManagement.destroy();}this._oVariantManagement=i;this._registerVariantManagement();this._adaptNewFilterBarDesign();};
N.prototype._createBasicAreaLayout=function(){var i=new H({visible:false});i.setAllowWrapping(true);i.addStyleClass("sapUiCompFilterBarWidth100");i.addStyleClass("sapUiCompFilterBarBasicArea");return i;};
N.prototype._createAdvancedAreaForm=function(){var i=new E();i.addStyleClass("sapUiCompFilterBarPaddingForm");i.setColumnsL(3);i.setColumnsM(2);var j=new F({editable:true});j.setLayout(i);return j;};
N.prototype._addControlToBasicAreaFormContainer=function(i){var j=i.getControl();if(!j){q.sap.log.error("no Control obtained");return null;}var n=i.getLabelControl(this.getId());if(!n){q.sap.log.error("no Label obtained");return null;}this._adaptGroupTitleForFilter(i);return this._addControlToBasicAreaContainer(i,j,n);};
N.prototype._addControlToBasicAreaContainer=function(i,j,n){var O=new y();O.setLayoutData(new x({margin:true}));if(j.setWidth){j.setWidth("100%");}O.setWidth(this.getFilterContainerWidth());if(n){if(!n.hasStyleClass("sapUiCompFilterLabel")){n.addStyleClass("sapUiCompFilterLabel");}O.addContent(n);if(n.setLabelFor){if(i&&j){n.setLabelFor(j);}else if(j){q.sap.require("sap.ui.core.InvisibleText");var Q=new sap.ui.core.InvisibleText({text:this._oRb.getText("FILTER_BAR_BSEARCH_PLACE_HOLDER")});O.addContent(Q);j.addAriaLabelledBy(Q);}}}O.addContent(j);O.addStyleClass("sapUiCompFilterBarPaddingRight");O.addStyleClass("sapUiCompFilterBarPaddingTop");if(!this.getAdvancedMode()&&(!this._oFilterDialog||(!this._oFilterDialog.hasOwnProperty("bDoNotAddToBasicArea")))){if(i&&i.getVisible()&&i.getVisibleInFilterBar()){if(this._isNewFilterBarDesign()){var W=this._oBasicAreaLayout.getContent();if(this._isPhone()){this._oBasicAreaLayout.addContent(O);}else{this._oBasicAreaLayout.insertContent(O,W.length-1);}}else{this._oBasicAreaLayout.addContent(O);}}}return O;};
N.prototype._rerenderAA=function(){this._oAdvancedAreaForm.removeAllFormContainers();var i=this._flattenMap();this._layOutAA(i);};
N.prototype._layOutAA=function(i){if(this._mAdvancedAreaFilter&&Object.keys(this._mAdvancedAreaFilter).length>1){this._layOutAAMultipleGroup(i);}else{this._layOutAASingleGroup(i);}};
N.prototype._layOutAAMultipleGroup=function(n){var i,j,O=0;var Q=null;for(i=0;i<n.length;i++){if(n[i].control===null){O++;}}var W=this._oAdvancedAreaForm.getLayout();if(W){if(O>=3){W.setLabelSpanL(5);W.setLabelSpanM(5);W.setColumnsL(3);W.setColumnsM(2);}else if(O===2){W.setLabelSpanL(4);W.setLabelSpanM(5);W.setColumnsL(2);W.setColumnsM(2);}else if(O===1){W.setLabelSpanL(4);W.setLabelSpanM(5);W.setColumnsL(2);W.setColumnsM(2);}}for(i=0;i<n.length;i++){if(n[i].control===null){Q=new z();if(Object.keys(this._mAdvancedAreaFilter).length>1){Q.setTitle(n[i].filterItem.getGroupTitle());}this._oAdvancedAreaForm.addFormContainer(Q);j=i+1;while(j<n.length&&(n[j].control)){this._addControlToAdvancedArea(n[j].filterItem,n[j].control,Q);j++;}i=j-1;}}if(O===1){this._oAdvancedAreaForm.addFormContainer(new z());}};
N.prototype._layOutAASingleGroup=function(j){var i,n,O,Q;var W=j.length-1;var X=W>2?2:1;if(X>1){O=Math.floor(W/X);Q=((O*X)<W);for(i=1;i<X;i++){n=i*O;if(Q){++n;}if((n+i)<j.length){j.splice(n+i,0,j[0]);}}}this._layOutAAMultipleGroup(j);};
N.prototype._flattenMap=function(){var n=null,i;var j=[];var O;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){O=false;for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){var Q=this._mAdvancedAreaFilter[n].items[i];if(Q.filterItem&&Q.filterItem.getVisibleInFilterBar()&&Q.filterItem.getVisible()&&!Q.filterItem.getHiddenFilter()){if(!O){O=true;j.push({control:null,filterItem:this._mAdvancedAreaFilter[n].filterItem});}j.push({control:Q.control,filterItem:Q.filterItem});}}}}}return j;};
N.prototype._triggerSearchByValue=function(j){var i,n,O;var Q;var W;j=j.replace(/^\s+|\s+$/g,"").toLowerCase();if(this._aListItems){var X=0;for(i=this._aListItems.length-1;i>=0;i--){Q=this._aListItems[i].getContent();if(Q&&(Q.length>0)){n=Q[0].getText();O=this._aListItems[i].data("quickinfo");if((n.toLowerCase().indexOf(j)>=0||(O&&O.toLowerCase().indexOf(j)>=0))||(this._aListItems[i].hasStyleClass("sapUiCompFilterBarGroupListItem")&&X>0)){W=true;if(this._aListItems[i].hasStyleClass("sapUiCompFilterBarGroupListItem")){if(!X){W=false;}}else{X++;}this._aListItems[i].setVisible(W);}else{this._aListItems[i].setVisible(false);}}}}};
N.prototype._triggerSearch=function(i){if(!i){return;}var j=i.getParameters();if(!j){return;}var n=j.newValue?j.newValue:"";this._triggerSearchByValue(n);};
N.prototype._triggerSearchByValueInFilterDialog=function(j){var n=null,i;var O,Q;var W,X;var Y;var Z;var $=true;j=j.replace(/^\s+|\s+$/g,"").toLowerCase();if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){W=this._mAdvancedAreaFilter[n];if(W&&W.items){Y=0;Z=0;for(i=0;i<W.items.length;i++){if(W.items[i]&&W.items[i].filterItem){X=W.items[i].filterItem;if(X.getHiddenFilter()){++Y;continue;}if(X.getVisible()){if(j&&W.items[i].formelement){O=X.getLabel();Q=X.getLabelTooltip();if((O.toLowerCase().indexOf(j)>=0||(Q&&Q.toLowerCase().indexOf(j)>=0))){if(X.getPartOfCurrentVariant()){W.items[i].formelement.setVisible(true);}else{++Z;}}else{++Y;W.items[i].formelement.setVisible(false);}}else if(W.items[i].formelement){W.items[i].formelement.setVisible(X.getVisibleInFilterBar()||X.getPartOfCurrentVariant());if(W.link&&!W.link.getVisible()){W.link.setVisible(true);}}}else{++Y;}}}if(W&&W.formcontainer){if(Y===W.items.length){W.formcontainer.setVisible(false);}else{$=false;W.formcontainer.setVisible(true);if(W.link){W.link.setVisible((j&&(Z===0))?false:true);if(j&&(Z>0)){this._setLinkTextAndCount(n,W.link,Z);}else{this._setLinkText(n,W.link);}}}}}}}}if(this._oAddToFilterBarLabel){this._oAddToFilterBarLabel.setVisible(!$);}};
N.prototype._triggerSearchInFilterDialog=function(i){if(!i){return;}var j=i.getParameters();if(!j){return;}var n=j.newValue?j.newValue:"";this._sSearchCriteriaInFiltersDialog=n;this._triggerSearchByValueInFilterDialog(n);};
N.prototype._generateListItems=function(j,n){q.sap.require("sap.m.CustomListItem");var i;var O,Q;var W;var X=false;if(this.$().closest(".sapUiSizeCompact").length>0){X=true;}if(j&&this._mAdvancedAreaFilter){Q=this._mAdvancedAreaFilter[j];if(Q&&Q.items){for(i=0;i<Q.items.length;i++){var Y=Q.items[i];if(Y&&Y.filterItem){if(!Y.filterItem.getVisible()||Y.filterItem.getHiddenFilter()){continue;}O=new sap.m.CustomListItem();O.setVisible(true);if(!X){O.addStyleClass("sapUiCompFilterBarListItem");}else{O.addStyleClass("sapUiCompFilterBarListItemCompact");}O.data("quickinfo",Y.filterItem.getLabelTooltip());Y.initialPartOfCurrentVariant=Y.filterItem.getPartOfCurrentVariant();Y.initialVisibleInFilterBar=Y.filterItem.getVisibleInFilterBar();O.data('item',Y);W=new L({text:Y.filterItem.getLabel(),tooltip:Y.filterItem.getLabelTooltip()});O.addContent(W);n.addItem(O);if(Y.filterItem.getPartOfCurrentVariant()){n.setSelectedItem(O);}if(Y.filterItem.getMandatory()&&Y.checkbox&&!Y.checkbox.getEnabled()){O.getModeControl().setEnabled(false);}}}}}var Z=this;n.attachSelectionChange(function($){if($){var _=$.getParameters();if(_){var O=_.listItem;if(O){var a1=O.getModeControl();var Y=O.data('item');Z._selectionChangedInAddFiltersDialog(a1,Y);}}}});};
N.prototype._rerenderItem=function(i){var j;if(i){j=i.filterItem.getVisible()&&i.filterItem.getVisibleInFilterBar();if(i.container){i.container.setVisible(j);if(j){this._addContainer(i);}}if(i.formelement){i.formelement.setVisible(i.filterItem.getVisible()&&(i.filterItem.getVisibleInFilterBar()||i.filterItem.getPartOfCurrentVariant()));if(i.checkbox){i.checkbox.setSelected(i.filterItem.getVisibleInFilterBar());}}}};
N.prototype._rerenderFilters=function(){var i;var n=null;var j=null;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];this._rerenderItem(j);}}}}this._updateToolbarText();};
N.prototype.rerenderFilters=function(){this._rerenderFilters();};
N.prototype._closeAddRemoveFiltersDialog=function(i,j){if(i&&j){if(this._sSearchCriteriaInFiltersDialog&&this._oFilterDialog){this._triggerSearchByValueInFilterDialog(this._sSearchCriteriaInFiltersDialog);}else{this._setLinkText(i,j);}}};
N.prototype._cancelAddRemoveFiltersDialog=function(j){var i;var n;if(j&&this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){n=this._mAdvancedAreaFilter[j].items[i];if((n.initialPartOfCurrentVariant!==undefined||n.initialVisibleInFilterBar!==undefined)&&n.filterItem){if(n.filterItem.getHiddenFilter()){continue;}if((n.initialPartOfCurrentVariant!==undefined)&&(n.filterItem.getPartOfCurrentVariant()!==n.initialPartOfCurrentVariant)){n.filterItem.setPartOfCurrentVariant(n.initialPartOfCurrentVariant);this._notifyAboutChangedFilters(n.initialPartOfCurrentVariant,n.control);}if((n.initialVisibleInFilterBar!==undefined)&&(n.filterItem.getVisibleInFilterBar()!==n.initialVisibleInFilterBar)){n.filterItem.setVisibleInFilterBar(n.initialVisibleInFilterBar);}}}}if(this._oVariantManagement&&(this._oVariant.modified2!==undefined)){this._oVariantManagement.currentVariantSetModified(this._oVariant.modified2);}};
N.prototype._createAddRemoveFiltersDialog=function(j,n){q.sap.require("sap.m.Dialog");q.sap.require("sap.m.ListMode");var i,O=this;if(!j){return;}this._oDialog=new sap.m.Dialog(this.getId()+"-set-filters-dialog",{stretch:D.system.phone,resizable:true,draggable:true});this._oDialog.addStyleClass("sapUiPopupWithPadding");this._oDialog.addStyleClass("sapUiCompAddRemoveFilterDialog");if(this.$().closest(".sapUiSizeCompact").length>0){this._oDialog.addStyleClass("sapUiSizeCompact");}this._oDialog.setTitle(this._oRb.getText("SELECT_FILTER_FIELDS"));this._oDialog.addStyleClass("sapMH4FontSize");this._oDialog.addStyleClass("sapMH4Style");this._oDialog.setVerticalScrolling(true);var Q=new B();var W=new S({placeholder:this._oRb.getText("FILTER_BAR_SEARCH")});this._oSearchField=W;W.attachLiveChange(function($){O._triggerSearch($);});Q.addContentRight(W);this._oDialog.setSubHeader(Q);var X=new e({mode:sap.m.ListMode.MultiSelect});X.setShowSeparators(f.None);this._oDialog.addContent(X);this._generateListItems(j,X);this._aListItems=X.getItems();for(i=0;i<this._aListItems.length;i++){X.addItem(this._aListItems[i]);}if(this._oVariant&&this._oVariantManagement){this._oVariant.modified2=this._oVariantManagement.currentVariantGetModified();}this._bOKButtonAddRemoveFilterDialogTriggered=false;var Y=new a(this.getId()+"-btnOKAddRemoveDialog",{text:this._oRb.getText("FILTER_BAR_OK")});Y.attachPress(function(){O._bOKButtonAddRemoveFilterDialogTriggered=true;O._oDialog.close();});this._oDialog.addAggregation("buttons",Y);this._oDialog.setInitialFocus(this._oSearchField);if(this._sSearchCriteriaInFiltersDialog){this._oSearchField.setValue(this._sSearchCriteriaInFiltersDialog);this._triggerSearchByValue(this._sSearchCriteriaInFiltersDialog);}var Z=new a(this.getId()+"-btnCancelAddRemoveDialog",{text:this._oRb.getText("FILTER_BAR_CANCEL"),press:function(){O._oDialog.close();}});this._oDialog.addAggregation("buttons",Z);this._oDialog.attachBeforeClose(function(){if(!O._bOKButtonAddRemoveFilterDialogTriggered){O._cancelAddRemoveFiltersDialog(j);}O.rerenderFilters();O._closeAddRemoveFiltersDialog(j,n);if(O._oFilterDialog){O._oFilterDialog.invalidate();}});this._oDialog.attachAfterClose(function(){this._aListItems=null;O._oDialog.destroy();O._oDialog=null;});this._oDialog.open();};
N.prototype._selectionChangedInAddFiltersDialog=function(i,j){var n=i.getSelected();if(!n&&j.filterItem.getMandatory()&&!j.checkbox.getEnabled()){i.setSelected(true);return;}j.filterItem.setPartOfCurrentVariant(n);j.filterItem.setVisibleInFilterBar(n);this._notifyAboutChangedFilters(n,j.control);};
N.prototype._setTriggerFilterChangeState=function(i){this._triggerFilterChangeState=i;};
N.prototype._getTriggerFilterChangeState=function(){return this._triggerFilterChangeState;};
N.prototype._setConsiderFilterChanges=function(i){this._filterChangeSemaphore=i;};
N.prototype._getConsiderFilterChanges=function(){return this._filterChangeSemaphore;};
N.prototype.fireFilterChange=function(i){this._updateToolbarText();if(!this._getTriggerFilterChangeState()){return;}if(this._getConsiderFilterChanges()&&this._oVariantManagement&&this._oVariantManagement.getEnabled()){this._oVariantManagement.currentVariantSetModified(true);}if(this._oFilterDialog&&!(this._oFilterDialog.isOpen())){return;}this._bDirtyViaDialog=true;this.fireEvent("filterChange",i);if(this._isNewFilterBarDesign()){}};
N.prototype._notifyAboutChangedFilters=function(i,j){var O,n=this._determineByControl(j);if(i){O={"added":j,"filterItem":n};}else{O={"deleted":j,"filterItem":n};}this.fireFilterChange(O);};
N.prototype._determineVariantFiltersInfo=function(j,O){var i;var n=null,Q,W;var X=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){Q=this._mAdvancedAreaFilter[n].items[i];if(j||Q.filterItem.getVisible()){W={group:Q.filterItem.getGroupName(),name:Q.filterItem.getName(),partOfCurrentVariant:Q.filterItem.getPartOfCurrentVariant(),visibleInFilterBar:Q.filterItem.getVisibleInFilterBar(),visible:Q.filterItem.getVisible()};if(O||this._considerFilter(W)){X.push(W);}}}}}}}return X;};
N.prototype.mergeVariant=function(i,j){var n={};q.extend(true,n,j);n.filterbar=[];n.filterBarVariant={};q.extend(true,n.filterbar,i.filterbar);q.extend(true,n.filterBarVariant,i.filterBarVariant);if(j&&j.version==="V2"){n.filterbar=this._mergeVariantFields(n.filterbar,j.filterbar);n.filterBarVariant=j.filterBarVariant;}return n;};
N.prototype._mergeVariantFields=function(j,n){var i;n.forEach(function(O){for(i=0;i<j.length;i++){if((j[i].group===O.group)&&(j[i].name===O.name)){j.splice(i,1);break;}}});return j.concat(n);};
N.prototype._isUi2Mode=function(){if(this._oVariantManagement instanceof p){return true;}return false;};
N.prototype._isDeltaHandling=function(){if(this._isUi2Mode()){return false;}return this.getDeltaVariantMode();};
N.prototype._getStandardVariant=function(){return this._oVariantManagement.getStandardVariant(this);};
N.prototype._considerFilter=function(j){if(!this._isDeltaHandling()){return true;}var n=null;var O=this._getStandardVariant();if(O&&O.filterbar){for(var i=0;i<O.filterbar.length;i++){if((O.filterbar[i].group===j.group)&&(O.filterbar[i].name===j.name)){n=O.filterbar[i];break;}}}if(!n){if(!j.partOfCurrentVariant){return false;}return true;}if((n.partOfCurrentVariant!==j.partOfCurrentVariant)||(n.visibleInFilterBar!==j.visibleInFilterBar)||(n.visible!==j.visible)){return true;}return false;};
N.prototype._addControlToAdvancedArea=function(i,j,n){var O=new A({label:i.getLabelControl(this.getId()),fields:[(j!==null)?j:new T()]});n.addFormElement(O);};
N.prototype._determineVisibility=function(i){var j=false;if(i){j=i.getVisible()&&(i.getVisibleInFilterBar()||i.getPartOfCurrentVariant());j=j&&!i.getHiddenFilter();}return j;};
N.prototype._retrieveVisibleAdvancedItems=function(){var i,n=null,j;var O=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j){if(this._determineVisibility(j.filterItem)){O.push(j);}}}}}}}return O;};
N.prototype._retrieveCurrentSelectionSet=function(W,j){var i,n,O,Q=[];var X=this._retrieveVisibleAdvancedItems();for(i=0;i<X.length;i++){n=X[i];if(n.control&&n.filterItem&&(j||!n.filterItem._isParameter())){if(W){O={name:X[i].filterItem.getName(),control:X[i].control};}else{O=X[i].control;}Q.push(O);}}return Q;};
N.prototype.search=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this.fireSearch(i);return true;};
N.prototype.clear=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this._clearErrorState();this.fireClear(i);this._updateToolbarText();};
N.prototype.reset=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this.fireReset(i);this._resetVariant();};
N.prototype._resetVariant=function(){var i=null,j=null;this._resetFiltersInErrorValueState();if(this._oVariantManagement){var n=this._oVariantManagement.getSelectionKey();if(n){i=this._oVariantManagement.getVariantContent(this,n);if(this._oVariant){this._oVariant.content=i;this._oVariant.modified=false;if(this.getPersistencyKey()&&this._oInitialVariant){this._oInitialVariant.content=i;this._oInitialVariant.modified=false;this._oInitialVariant.key=n;}}if(!this.getPersistencyKey()&&(this.getUseSnapshot()===undefined)&&this._oInitialVariant&&this._oInitialVariant.content){j=this._oInitialVariant.content;}if(i||j){this.applyVariant(i||j,"RESET");}}}this._resetFilterBarSearch();};
N.prototype._resetFilterBarSearch=function(){this._sSearchCriteriaInFiltersDialog="";if(this._oFiltersSearchField){this._oFiltersSearchField.setValue(this._sSearchCriteriaInFiltersDialog);this._triggerSearchByValueInFilterDialog(this._sSearchCriteriaInFiltersDialog);}};
N.prototype._applyVariant=function(i,j,n){var O,Q=null,W,X=false;if(i){if(n){W=this._getTriggerFilterChangeState();this._setTriggerFilterChangeState(false);}this._setConsiderFilterChanges(false);O=i.filterBarVariant;Q=i.filterbar;this._ensureFilterLoaded(Q);this._reapplyVisibility(Q);this._applyVariantFields(O);if(this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(""||i.basicSearch);}if(i.executeOnSelection){X=i.executeOnSelection;}this.fireAfterVariantLoad(j,X);this._setConsiderFilterChanges(true);this._updateToolbarText();if(X||(this.getLiveMode&&this.getLiveMode())){this.search();}else{this._clearErrorState();}if(n){this._setTriggerFilterChangeState(W);}}};
N.prototype._fetchVariantFiltersData=function(){if(this._fRegisteredFetchData){try{return this._fRegisteredFetchData();}catch(i){q.sap.log.error("callback for fetching data throws an exception");}}else{q.sap.log.warning("no callback for fetch data supplied");}return null;};
N.prototype._applyVariantFields=function(j){if(this._fRegisteredApplyData){try{return this._fRegisteredApplyData(j);}catch(i){q.sap.log.error("callback for applying data throws an exception");}}else{q.sap.log.warning("no callback for appy data supplied");}};
N.prototype._isStandardVariant=function(){var i=this.getCurrentVariantId();if(!i){return true;}if(this._oVariantManagement){if((i===this._oVariantManagement.getStandardVariantKey())){return true;}if(this._oVariantManagement._oStandardVariant===null){return true;}}return false;};
N.prototype.isCurrentVariantExecuteOnSelectEnabled=function(){if(this._oVariantManagement&&this._oVariantManagement.getEnabled()){var i=this.getCurrentVariantId();if(!i){return this._oVariantManagement.getExecuteOnSelectForStandardVariant();}var j=this._oVariantManagement.getItemByKey(i);if(j){return j.getExecuteOnSelection();}}return false;};
N.prototype.fetchVariant=function(){var i,j={},n;if(this._isDeltaHandling()){if(!this._isStandardVariant()){j.version="V2";}}this.fireBeforeVariantFetch();i=this._determineVariantFiltersInfo(true,!j.version);j.filterbar=(!i)?[]:i;j.filterBarVariant=this._fetchVariantFiltersData();n=this._getBasicSearchValue();if(n){j.basicSearch=n;}if(this._oVariant&&this._oVariant.content){this._oVariant.content=j;}return j;};
N.prototype.applyVariant=function(i,j,n){if(i.version==="V2"){i=this.mergeVariant(this._getStandardVariant(),i,j);}this._applyVariant(i,j,n);if(n&&this._isNewFilterBarDesign()){}};
N.prototype.determineMandatoryFilterItems=function(){var i;var j=[];var n=this._retrieveVisibleAdvancedItems();for(i=0;i<n.length;i++){if(n[i].filterItem.getMandatory()===true){if(n[i].control){j.push(n[i].filterItem);}}}return j;};
N.prototype.determineControlByFilterItem=function(j,O){var i,n=null;var Q,W;if(!j||(!O&&j._isParameter())){return null;}if(this._aBasicAreaSelection){for(i=0;i<this._aBasicAreaSelection.length;i++){Q=this._aBasicAreaSelection[i];if(j===Q.filterItem){return Q.control;}}}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){W=this._mAdvancedAreaFilter[n];if(W&&W.items){for(i=0;i<W.items.length;i++){Q=W.items[i];if((O||!Q.filterItem._isParameter())&&(j===Q.filterItem)){return Q.control;}}}}}}return null;};
N.prototype.determineControlByName=function(n,i){var j=this._determineEnsuredItemByName(n,i);if(j&&j.filterItem&&!j.filterItem._isParameter()){return j.control;}return null;};
N.prototype.determineLabelByName=function(n,i){var j=this._determineEnsuredItemByName(n,i);if(j&&j.filterItem){return j.filterItem._oLabel;}return null;};
N.prototype._determineEnsuredItemByName=function(n,i){if(!i){i=this._determineGroupNameByName(n);}this._ensureFilterLoaded([{name:n,group:i}]);return this._determineItemByName(n,i);};
N.prototype._determineGroupNameByName=function(n){if(this._aFields){for(var i=0;i<this._aFields.length;i++){if(this._aFields[i].fieldName===n){return this._aFields[i].groupName;}}}var j=this._determineFilterItemByName(n);if(j){var O=j.getGroupName();if(O!==N.INTERNAL_GROUP){return O;}}return null;};
N.prototype._determineItemByName=function(n,j){var i;var O,Q;var W=j;if(!n){return null;}if(!W){W=N.INTERNAL_GROUP;}if(this._mAdvancedAreaFilter){Q=this._mAdvancedAreaFilter[W];if(Q&&Q.items){for(i=0;i<Q.items.length;i++){O=Q.items[i];if(O&&O.filterItem&&(O.filterItem.getName()===n)){return O;}}}}return null;};
N.prototype.determineFilterItemByName=function(n){var i=this._determineEnsuredItemByName(n);if(i&&i.filterItem){return i.filterItem;}return null;};
N.prototype._determineFilterItemByName=function(i){var n,j;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){j=this._determineItemByName(i,n);if(j){return j.filterItem;}}}return null;};
N.prototype._determineByControl=function(j){var n=null,i;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var O=this._mAdvancedAreaFilter[n];if(O&&O.items){for(i=0;i<O.items.length;i++){if(O.items[i]&&O.items[i].control===j){return O.items[i];}}}}}}return null;};
N.prototype._deleteProperties=function(){var n=null,i;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var j=this._mAdvancedAreaFilter[n];if(j&&j.items){if(j.formcontainer){j.formcontainer.destroy();delete j.formcontainer;}if(j.link){delete j.link;}for(i=0;i<j.items.length;i++){if(j.items[i]&&j.items[i].checkbox){delete j.items[i].checkbox;}if(j.items[i]&&j.items[i].formelement){delete j.items[i].formelement;}}}}}}};
N.prototype.onAfterRendering=function(i){if(!this._bDoItOnce&&!(this._isPhone()||this._isTablet())){this._bDoItOnce=true;if(this._oHintText&&this._oHintText.getVisible()){this.setFilterBarExpanded(false);}}this._checkAndAdaptFilterWidth();};
N.prototype._fHandleResize=function(i){if(!this._isPhone()&&this._oFilterDialog&&this._oFilterDialog.isOpen()&&this._mAdvancedAreaFilter){this._repositionAddToFilterBarLabel();}this._checkAndAdaptFilterWidth();};
N.prototype._checkAndAdaptFilterWidth=function(){if(this._isNewFilterBarDesign()&&!this._oFilterDialog){this._adaptFilterWidth();}};
N.prototype._adaptFilterWidth=function(){var i;if(!this._oBasicAreaLayout){return;}if(!this._bIsInitialized){return;}var j=this._oBasicAreaLayout.getContent();if(!j){return;}for(i=j.length-1;i>=0;i--){if(!j[i].getVisible()){j.splice(i,1);}}if(j.length<1){return;}var n=this._oBasicAreaLayout.$().width()-1;var O,Q=this._calculateRequiredWidthAndResetToInitialWidth(j);if(Q>n){O=0;}else{O=j[j.length-1].$().width()+16;}var W=0,X=j.length-1;if(this._isPhone()){W++;X++;}var Y=0;for(i=W;i<X;i++){if((O+j[i].$().width()+16)>n){break;}O+=j[i].$().width()+16;Y++;}var Z=Math.floor((n-O)/Y);if((Y===1)&&(Q<n)){Z=Math.floor(Z/3);}if(Z>0){this._increaseFilterWidth(j,Z,n);}};
N.prototype._calculateRequiredWidthAndResetToInitialWidth=function(j){var i,n,O=j[j.length-1].$().width()+16;var Q=this._retrieveVisibleAdvancedItems();if(this._isPhone()){O=j[0].$().width()+16;}else{O=j[j.length-1].$().width()+16;}if(this._oBasicSearchFieldContainer&&this._oBasicSearchFieldContainer.$()){this._oBasicSearchFieldContainer.$().width(this.getFilterContainerWidth());this._oBasicSearchFieldContainer.$().css({"min-width":this.getFilterContainerWidth()});this._oBasicSearchFieldContainer.$().css({"max-width":this._oBasicSearchFieldContainer.$().width()*1.5});O+=this._oBasicSearchFieldContainer.$().width();O+=16;}for(i=0;i<Q.length;i++){if(Q[i].filterItem&&Q[i].filterItem.getVisible()&&Q[i].filterItem.getVisibleInFilterBar()){var W=Q[i].container;if(W&&W.$()){if(Q[i].filterWidth){n=W.$().width();if(n!==Q[i].filterWidth){W.$().width(Q[i].filterWidth);n=Q[i].filterWidth;}}else{W.$().width(this.getFilterContainerWidth());n=W.$().width();Q[i].filterWidth=n;}W.$().css({"min-width":n});W.$().css({"max-width":n*1.5});O+=n;O+=16;}}}return O;};
N.prototype._increaseFilterWidth=function(j,n,O){var Q,W=0,X=j.length-1;if(this._isPhone()){W++;X++;}for(var i=W;i<X;i++){Q=j[i].$().width()+n;j[i].$().width(Q);}};
N.prototype._destroyLazyFilterControl=function(){var j,i;if(this._aFields&&(this._aFields.length>0)){if(this._aFields&&this._aFields.length>0){for(j=0;j<this._aFields.length;j++){i=this._aFields[j];if(i.factory){if(i.control){i.control.destroy();}}}}}};
N.prototype._destroyNonVisibleFilterControl=function(){var i,n,j;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j&&j.container){if(this._oBasicAreaLayout&&(this._oBasicAreaLayout.indexOfContent(j.container)<0)){if(j.control&&!j.bDestroyed){j.control.destroy();j.bDestroyed=true;}}}}}}}};
N.prototype._destroyFilterControls=function(){if(!this.getAdvancedMode()){this._destroyLazyFilterControl();this._destroyNonVisibleFilterControl();}};
N.prototype._registerVariantManagement=function(){if(this._oVariantManagement){this._oVariantManagement.attachSave(this._variantSave,this);this._oVariantManagement.attachAfterSave(this._afterVariantSave,this);}};
N.prototype._unregisterVariantManagement=function(){if(this._oVariantManagement){if(this._fInitialiseVariants){this._oVariantManagement.detachInitialise(this._fInitialiseVariants);this._fInitialiseVariants=null;}this._oVariantManagement.detachSave(this._variantSave,this);this._oVariantManagement.detachAfterSave(this._afterVariantSave,this);if((!this.getUseToolbar()||this.getAdvancedMode())&&!this._oVariantManagement.getDomRef()){this._oVariantManagement.destroy();}}};
N.prototype.destroy=function(){sap.ui.core.ResizeHandler.deregister(this._hResizeListener);this._hResizeListener=null;this._unregisterVariantManagement();this._destroyFilterControls();G.prototype.destroy.apply(this,arguments);if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}if(this._oFilterDialog){this._oFilterDialog.destroy();this._oFilterDialog=null;}if(this.oModel){this.oModel.destroy();this.oModel=null;}this._aFields=null;this._oHintText=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._oBasicAreaLayout=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._oVariant=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._fRegisteredFilterChangeHandlers=null;this._oSearchButton=null;this._oFiltersButton=null;this._oHideShowButton=null;this._oClearButtonOnFB=null;this._oRestoreButtonOnFB=null;this._oAddToFilterBarLabel=null;this._oBasicSearchField=null;this._oBasicSearchFieldContainer=null;this._oButtonsVLayout=null;};
return N;},true);
sap.ui.predefine('sap/ui/comp/filterbar/FilterGroupItem',['./FilterItem','sap/ui/comp/library'],function(F,l){"use strict";
var a=F.extend("sap.ui.comp.filterbar.FilterGroupItem",{metadata:{library:"sap.ui.comp",properties:{groupTitle:{type:"string",group:"Misc",defaultValue:null},groupName:{type:"string",group:"Misc",defaultValue:null},visibleInAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false}}}});
a.prototype.init=function(){this.setVisibleInAdvancedArea(false);this._setParameter(false);};
a.prototype._setParameter=function(v){this._bIsParameter=v;};
a.prototype.setGroupTitle=function(v){this.setProperty("groupTitle",v);this.fireChange({propertyName:"groupTitle"});};
a.prototype.setVisibleInAdvancedArea=function(v){this.setVisibleInFilterBar(v);};
a.prototype.getVisibleInAdvancedArea=function(){return this.getVisibleInFilterBar();};
a.prototype.destroy=function(){F.prototype.destroy.apply(this,arguments);};
return a;},true);
sap.ui.predefine('sap/ui/comp/filterbar/FilterItem',['jquery.sap.global','sap/m/Label','sap/ui/comp/library','sap/ui/core/Element','sap/ui/core/TooltipBase','sap/ui/comp/util/IdentifierUtil'],function(q,L,l,E,T,I){"use strict";
var F=E.extend("sap.ui.comp.filterbar.FilterItem",{metadata:{library:"sap.ui.comp",properties:{label:{type:"string",group:"Misc",defaultValue:null},name:{type:"string",group:"Misc",defaultValue:null},mandatory:{type:"boolean",group:"Misc",defaultValue:false},visible:{type:"boolean",group:"Misc",defaultValue:true},labelTooltip:{type:"string",group:"Misc",defaultValue:null},partOfCurrentVariant:{type:"boolean",group:"Misc",defaultValue:false},visibleInFilterBar:{type:"boolean",group:"Misc",defaultValue:true},hiddenFilter:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{control:{type:"sap.ui.core.Control",multiple:false}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
F.prototype.init=function(){this._oLabel=null;this._bIsParameter=false;};
F.prototype._isParameter=function(){return this._bIsParameter;};
F.prototype.setVisible=function(v){this.setProperty("visible",v);this.fireChange({propertyName:"visible"});};
F.prototype.setVisibleInFilterBar=function(v){this.setProperty("visibleInFilterBar",v);this.fireChange({propertyName:"visibleInFilterBar"});};
F.prototype.setPartOfCurrentVariant=function(v){this.setProperty("partOfCurrentVariant",v);this.fireChange({propertyName:"partOfCurrentVariant"});};
F.prototype._getGroupName=function(){var n="";if(this.getGroupName){n=I.replace(this.getGroupName());}return n;};
F.prototype._getName=function(){var n=I.replace(this.getName());var g=this._getGroupName();if(g){n=g+"-"+n;}return n;};
F.prototype._createLabelControl=function(f){var t=this.getLabel();var i="filterItem-"+this._getName();if(f){i=f+"-"+i;}var o=new L({id:i,text:t,required:this.getMandatory(),tooltip:this.getLabelTooltip(),textAlign:"Begin"});return o;};
F.prototype.setMandatory=function(v){this.setProperty("mandatory",v);if(this._oLabel){this._oLabel.setRequired(v);}this.fireChange({propertyName:"mandatory"});};
F.prototype.setLabel=function(v){this.setProperty("label",v);if(this._oLabel){this._oLabel.setText(v);}if(!this.getLabelTooltip()){this.setLabelTooltip(v);}this.fireChange({propertyName:"label"});};
F.prototype.setLabelTooltip=function(t){this.setProperty("labelTooltip",t);if(this._oLabel){this._oLabel.setTooltip(t);}this.fireChange({propertyName:"labelTooltip"});};
F.prototype.getLabelControl=function(f){if(!this._oLabel){this._oLabel=this._createLabelControl(f);}return this._oLabel;};
F.prototype.destroy=function(){if(this._oLabel&&!this._oLabel.bDestroyed){this._oLabel.destroy();}E.prototype.destroy.apply(this,arguments);this._oLabel=null;};
return F;},true);
sap.ui.predefine('sap/ui/comp/filterbar/VariantConverterFrom',['jquery.sap.global','sap/ui/comp/library','sap/ui/comp/valuehelpdialog/ValueHelpDialog','sap/m/MultiComboBox','sap/m/MultiInput','sap/m/DatePicker','sap/m/DateRangeSelection'],function(q,l,V,M,a,D,b){"use strict";var c=function(){};
c.prototype.convert=function(s,f,S){var C=null,r=null,o;if(s){this._bStrictMode=S;o=JSON.parse(s);if(f&&f.getFilterBarViewMetadata&&o){this._sBasicSearchName=null;this._sBasicSearchValue=null;if(f.getBasicSearchName){this._sBasicSearchName=f.getBasicSearchName();}C={};if(o.Parameters){this._addParameters(o.Parameters,f,C);}if(o.SelectOptions){this._addSelectOptions(o.SelectOptions,f,C);}r={payload:null,variantId:null};r.payload=JSON.stringify(C);if(o.SelectionVariantID){r.variantId=o.SelectionVariantID;}if(this._sBasicSearchValue){r.basicSearch=this._sBasicSearchValue;}}}return r;};
c.prototype.retrieveVariantId=function(s){var v=null;var S;if(s){S=JSON.parse(s);if(S&&S.SelectionVariantID){v=S.SelectionVariantID;}}return v;};
c.prototype._getParameterMetaData=function(n,f,i){if(this._bStrictMode){return this._getParameterMetaDataStrictMode(n,f);}return this._getParameterMetaDataNonStrictMode(n,f,i);};
c.prototype._getFilter=function(n,f){var i,j,g,F;F=f.getFilterBarViewMetadata();if(F){for(i=0;i<F.length;i++){g=F[i];for(j=0;j<g.fields.length;j++){if(n===g.fields[j].fieldName){return g.fields[j];}}}}return null;};
c.prototype._getParameter=function(n,f){var j,A;if(f.getAnalyticalParameters){A=f.getAnalyticalParameters();if(A){for(j=0;j<A.length;j++){if(n===A[j].fieldName){return A[j];}}}}return null;};
c.prototype._getParameterWithInnerPrefix=function(n,f){var p=n;if(n.indexOf(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX)!==0){p=sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX+n;}return this._getParameter(p,f);};
c.prototype._getParameterMetaDataStrictMode=function(n,f){var m=this._getExactFilterMatch(n,f);if(m){return m;}return null;};
c.prototype._getParameterMetaDataNonStrictMode=function(o,f,i){var m,n,N,t,s=o;if(o.indexOf(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX)===0){s=o.substr(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX.length);}if(s.indexOf("P_")===0){n=s;N=s.substr(2);}else{n="P_"+s;N=s;}if(s!==n){t=n;}else if(s!==N){t=N;}if(i){m=this._getExactParameterMatch(s,f);if(m){return m;}m=this._getFuzzyParameterMatch(t,f);if(m){return m;}}else{m=this._getExactFilterMatch(s,f);if(m){return m;}m=this._getFuzzyFilterMatch(t,f);if(m){return m;}}return null;};
c.prototype._getExactParameterMatch=function(n,f){var F,p;p=this._getParameterWithInnerPrefix(n,f);if(p){return p;}F=this._getFilter(n,f);if(F){return F;}return null;};
c.prototype._getFuzzyParameterMatch=function(n,f){var F,p;p=this._getParameterWithInnerPrefix(n,f);if(p){return p;}F=this._getFilter(n,f);if(F){return F;}return null;};
c.prototype._getExactFilterMatch=function(n,f){var F,p;F=this._getFilter(n,f);if(F){return F;}p=this._getParameterWithInnerPrefix(n,f);if(p){return p;}return null;};
c.prototype._getFuzzyFilterMatch=function(n,f){var F,p;F=this._getFilter(n,f);if(F){return F;}p=this._getParameterWithInnerPrefix(n,f);if(p){return p;}return null;};
c.prototype._addParameters=function(s,f,C){var i;var n,v;var F;for(i=0;i<s.length;i++){v=s[i].PropertyValue;n=s[i].PropertyName;if(this._sBasicSearchName&&(n===this._sBasicSearchName)){this._sBasicSearchValue=v;continue;}F=this._getParameterMetaData(n,f,true);if(F){f.determineControlByName(n);this._addAccordingMetaData(C,F,v);}else{q.sap.log.error("neither metadata nor custom information for filter '"+n+"'");}}};
c.prototype._addSelectOptions=function(s,f,C){var i;var n,r;var F,o;for(i=0;i<s.length;i++){n=s[i].PropertyName;r=s[i].Ranges;if(this._sBasicSearchName&&(n===this._sBasicSearchName)){if(r&&r.length>0){this._sBasicSearchValue=r[0].Low;}continue;}f.determineControlByName(n);F=this._getParameterMetaData(n,f,false);if(F){o=F.control;this._addRangesAccordingMetaData(C,F,r,o);}else{q.sap.log.error("neither metadata nor custom information for filter '"+name+"'");}}};
c.convertOption=function(s,v){var i;switch(s){case"CP":i=sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.Contains;if(v){var n=v.indexOf('*');var d=v.lastIndexOf('*');if(n>-1){if((n===0)&&(d!==(v.length-1))){i=sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EndsWith;v=v.substring(1,v.length);}else if((n!==0)&&(d===(v.length-1))){i=sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.StartsWith;v=v.substring(0,v.length-1);}else{v=v.substring(1,v.length-1);}}}break;case"EQ":case"BT":case"LE":case"GE":case"GT":case"LT":i=s;break;default:q.sap.log.error("Suite Option is not supported '"+s+"'");i=undefined;v=undefined;}return{op:i,v:v};};
c.prototype._addRangesAccordingMetaData=function(C,f,r,o,n){var i,O;var d=function(F,r){var i,I,O;for(i=0;i<r.length;i++){O=c.convertOption(r[i].Option,r[i].Low);if(O&&O.op){I={"exclude":(r[i].Sign==="E"),"operation":O.op,"keyField":F,"value1":O.v,"value2":r[i].High};if(!C[F]){C[F]={ranges:[],items:[],value:null};}C[F].ranges.push(I);}}};if(r&&r.length>0){if(f.isCustomFilterField){if(!C._CUSTOM){C._CUSTOM={};}C._CUSTOM[f.fieldName]=r[0].Low;return;}if(f.conditionType){for(i=0;i<r.length;i++){if(!r[i].High){r[i].High=r[i].Low;}}d(f.fieldName,r);return;}if(f.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.single){if(!r[0].Low&&o&&(o instanceof D)){C[f.fieldName]=null;}else{C[f.fieldName]=r[0].Low;}}else if(f.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval){if(o&&(o instanceof b)){if(r[0].Low&&r[0].High){C[f.fieldName]={low:r[0].Low,high:r[0].High};}else if(r[0].Low&&!r[0].High){C[f.fieldName]={low:r[0].Low,high:r[0].Low};}else if(!r[0].Low&&r[0].High){C[f.fieldName]={low:r[0].High,high:r[0].High};}else{C[f.fieldName]={low:null,high:null};}}else{if(f.type==="Edm.Time"){d(f.fieldName,r);}else{C[f.fieldName]={low:r[0].Low===undefined?null:r[0].Low,high:r[0].High===undefined?null:r[0].High};}}}else if(f.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.multiple){C[f.fieldName]={ranges:[],items:[],value:null};if(o&&((o instanceof M)||(o instanceof a))){for(i=0;i<r.length;i++){O=c.convertOption(r[i].Option,r[i].Low);if(O.op===sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ){if(f.type==="Edm.DateTime"){C[f.fieldName].ranges.push({value1:O.v});}else{C[f.fieldName].items.push({key:O.v});}}}}else{d(f.fieldName,r);}}else{d(f.fieldName,r);}q.sap.log.warning("potential reduced information for filter '"+f.fieldName+"'");}else{q.sap.log.warning("no Ranges-section found for filter '"+f.fieldName+"'");}};
c.prototype._addAccordingMetaData=function(C,f,v){var h=f.type==="Edm.DateTime"?"":v;var r=[{Sign:"I",Low:v,High:h,Option:"EQ"}];this._addRangesAccordingMetaData(C,f,r);};
return c;},true);
sap.ui.predefine('sap/ui/comp/filterbar/VariantConverterTo',['jquery.sap.global','sap/ui/comp/library','sap/ui/comp/valuehelpdialog/ValueHelpDialog','sap/ui/comp/odata/ODataType','sap/ui/comp/util/FormatUtil'],function(q,l,V,O,F){"use strict";var a=function(){};
a.prototype.convert=function(k,f,d,o,v){var b,i,j,J,n=null,B,s;var S={SelectionVariantID:k};this._sAPILevel=v;if(d&&f){j=JSON.parse(d);if(j){b=this._getFields(f);if(b&&b.length>0){for(i=0;i<b.length;i++){this._convertField(S,b[i],j,o);}}if(j._CUSTOM){if(typeof j._CUSTOM==="string"){J=JSON.parse(j._CUSTOM);}else{J=j._CUSTOM;}for(n in J){if(n){this._addSingleValue(S,n,a._getValue(J[n],true));}}}if(o&&o.getBasicSearchName){B=o.getBasicSearchName();if(B){s=o.getBasicSearchValue();this._addSingleValue(S,B,a._getValue(s,true));}}}}return JSON.stringify(S);};
a.prototype._getParameterMetaData=function(n,f){var i,j,g;var b=f.getFilterBarViewMetadata();if(b){for(i=0;i<b.length;i++){g=b[i];for(j=0;j<g.fields.length;j++){if(n===g.fields[j].fieldName){return g.fields[j];}}}}if(f.getAnalyticalParameters){var A=f.getAnalyticalParameters();if(A){for(j=0;j<A.length;j++){if(n===A[j].fieldName){return A[j];}}}}return null;};
a.prototype._convertField=function(s,f,c,o){var b,v,d=null,r,e;if(c&&f&&s){b=c[f];if(b){e=this._getParameterMetaData(f,o);if(e){if(e.isCustomFilterField){return;}if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.single){v=(b.value===undefined)?b:b.value;v=a._getValue(v,true);this._addSingleValue(s,f,v);}else if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval){if(b.conditionTypeInfo){this._convertFieldByValue(s,f,c,e);}else{r=a.addRangeEntry(s,f);if((e.type==="Edm.DateTime")&&!b.high){b.high=b.low;}else if((e.type==="Edm.String")&&!b.high){d="EQ";}if(e.type==="Edm.Time"){this._addRangeMultipleRangeValues(r,b.ranges,true);}else if(O.isNumeric(e.type)&&!b.high){var d="BT",g=F.parseFilterNumericIntervalData(b.low);if(g&&(g.length===2)&&g[0]){this._addRangeLowHigh(r,{low:g[0],high:g[1]},"BT");}else{this._addRangeLowHigh(r,b,"EQ");}}else{this._addRangeLowHigh(r,b,d);}}}else if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.multiple){r=a.addRangeEntry(s,f);if(b.items&&b.items.length>0){this._addRangeMultipleSingleValues(r,b.items);}else if(b.ranges&&b.ranges.length>0){this._addRangeMultipleRangeValues(r,b.ranges);}else{this._addRangeSingleValue(r,b.value);}}else{this._convertFieldByValue(s,f,c,e);}}else{this._convertFieldByValue(s,f,c,e);}}}};
a.prototype._convertFieldByValue=function(s,f,c,o){var b;var r;if(c&&f&&s){b=c[f];if(b){if(b.conditionTypeInfo){if(b.ranges&&b.ranges.length>0){r=a.addRangeEntry(s,f);a.addRanges(r,b.ranges);}}else if((b.ranges!==undefined)&&(b.items!==undefined)&&(b.value!==undefined)){r=a.addRangeEntry(s,f);if(b.ranges&&b.ranges.length>0){a.addRanges(r,b.ranges);}if(b.items&&b.items.length>0){this._addRangeMultipleSingleValues(r,b.items);}if(b.value){this._addRangeSingleValue(r,b.value);}}else if((b.items!==undefined)&&b.items&&(b.items.length>0)){r=a.addRangeEntry(s,f);this._addRangeMultipleSingleValues(r,b.items);}else if((b.low!==undefined)&&b.low&&(b.high!==undefined)&&b.high){r=a.addRangeEntry(s,f);this._addRangeLowHigh(r,b);}else if((b.value!==undefined)&&b.value){this._addSingleValue(s,f,b.value);}else if(b){this._addSingleValue(s,f,b);}}}};
a.addRangeEntry=function(s,f){var o={PropertyName:f,Ranges:[]};if(!s.SelectOptions){s.SelectOptions=[];}s.SelectOptions.push(o);return o.Ranges;};
a.addRanges=function(r,R){var s,o,L,h;for(var i=0;i<R.length;i++){s=R[i].exclude?"E":"I";L=a._getValue(R[i].value1,true);h=null;if(R[i].operation===sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT){h=a._getValue(R[i].value2);}switch(R[i].operation){case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.Contains:o="CP";if(L){L="*"+L+"*";}break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.StartsWith:o="CP";if(L){L=L+"*";}break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EndsWith:o="CP";if(L){L="*"+L;}break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ:case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT:case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.LE:case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.GE:case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.GT:case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.LT:o=R[i].operation;break;default:q.sap.log.error("ValueHelpRangeOperation is not supported '"+R[i].operation+"'");return;}r.push({Sign:s,Option:o,Low:L,High:h});}};
a.prototype._addRangeMultipleSingleValues=function(r,I){for(var i=0;i<I.length;i++){r.push({Sign:"I",Option:"EQ",Low:a._getValue(I[i].key,true),High:null});}};
a.prototype._addRangeMultipleRangeValues=function(r,I,t){for(var i=0;i<I.length;i++){r.push({Sign:"I",Option:t?"BT":"EQ",Low:a._getValue(I[i].value1,true),High:t?a._getValue(I[i].value2):null});}};
a.prototype._addRangeSingleValue=function(r,v){r.push({Sign:"I",Option:"EQ",Low:a._getValue(v,true),High:null});};
a.prototype._addRangeLowHigh=function(r,L,o){var s=o||"BT";r.push({Sign:"I",Option:s,Low:a._getValue(L.low,true),High:a._getValue(L.high)});};
a.prototype._addParamaterSingleValue=function(s,f,v){if(!s.Parameters){s.Parameters=[];}s.Parameters.push({PropertyName:f,PropertyValue:v});};
a.prototype._createRangeSingleValue=function(s,f,v){var r=a.addRangeEntry(s,f);this._addRangeSingleValue(r,v);};
a.prototype._addSingleValue=function(s,f,v){var n;if(this._sAPILevel){n=f.split(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX);if(n.length>1){this._addParamaterSingleValue(s,n[n.length-1],v);}else{this._createRangeSingleValue(s,f,v);}}else{this._addParamaterSingleValue(s,f,v);}};
a.prototype._getFields=function(f){var r=[];if(f){for(var i=0;i<f.length;i++){r.push(f[i].name);}}return r;};
a._getValue=function(v,u){if((v===null)||(v===undefined)||(v==="")){return(u?"":null);}return""+v;};
return a;},true);
sap.ui.predefine('sap/ui/comp/library',['jquery.sap.global','sap/ui/core/Core','sap/ui/core/library','sap/m/library'],function(q,C,l,a){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.comp",version:"1.50.6",dependencies:["sap.ui.core","sap.m"],types:["sap.ui.comp.smartfield.ControlProposalType","sap.ui.comp.smartfield.ControlContextType","sap.ui.comp.smartfield.ControlType","sap.ui.comp.smartfield.DisplayBehaviour","sap.ui.comp.smartfield.JSONType","sap.ui.comp.smartfield.CriticalityRepresentationType","sap.ui.comp.smarttable.TableType","sap.ui.comp.smarttable.ExportType","sap.ui.comp.smartlist.ListType","sap.ui.comp.personalization.AggregationRole","sap.ui.comp.personalization.ResetType","sap.ui.comp.personalization.ChangeType"],interfaces:[],controls:["sap.ui.comp.filterbar.FilterBar","sap.ui.comp.navpopover.NavigationPopover","sap.ui.comp.navpopover.SmartLink","sap.ui.comp.odata.FieldSelector","sap.ui.comp.smartchart.SmartChart","sap.ui.comp.smartfield.SmartField","sap.ui.comp.smartfield.SmartLabel","sap.ui.comp.smartfilterbar.SmartFilterBar","sap.ui.comp.smartform.SmartForm","sap.ui.comp.smartmicrochart.SmartAreaMicroChart","sap.ui.comp.smartmicrochart.SmartBulletMicroChart","sap.ui.comp.smartmicrochart.SmartRadialMicroChart","sap.ui.comp.smartmicrochart.SmartMicroChart","sap.ui.comp.smarttable.SmartTable","sap.ui.comp.smartlist.SmartList","sap.ui.comp.smartvariants.SmartVariantManagement","sap.ui.comp.smartvariants.SmartVariantManagementUi2","sap.ui.comp.transport.TransportDialog","sap.ui.comp.valuehelpdialog.ValueHelpDialog","sap.ui.comp.variants.EditableVariantItem","sap.ui.comp.variants.VariantManagement"],elements:["sap.ui.comp.filterbar.FilterGroupItem","sap.ui.comp.filterbar.FilterItem","sap.ui.comp.navpopover.LinkData","sap.ui.comp.navpopover.SemanticObjectController","sap.ui.comp.smartfield.Configuration","sap.ui.comp.smartfield.ControlProposal","sap.ui.comp.smartfield.ObjectStatus","sap.ui.comp.smartfilterbar.ControlConfiguration","sap.ui.comp.smartfilterbar.GroupConfiguration","sap.ui.comp.smartfilterbar.SelectOption","sap.ui.comp.smartform.Group","sap.ui.comp.smartform.GroupElement","sap.ui.comp.smartform.Layout","sap.ui.comp.smartvariants.PersonalizableInfo","sap.ui.comp.variants.VariantItem","sap.ui.comp.navpopover.NavigationContainer"],extensions:{flChangeHandlers:{"sap.ui.comp.smartform.SmartForm":{"removeGroup":"sap/ui/comp/smartform/flexibility/changes/RemoveGroup","addGroup":"sap/ui/comp/smartform/flexibility/changes/AddGroup","moveGroups":"sap/ui/comp/smartform/flexibility/changes/MoveGroups","renameField":"sap/ui/comp/smartform/flexibility/changes/RenameTitle","combineFields":"sap/ui/comp/smartform/flexibility/changes/CombineFields","splitField":"sap/ui/comp/smartform/flexibility/changes/SplitField","moveControls":"default"},"sap.ui.comp.smartform.Group":{"hideControl":"default","unhideControl":"default","renameGroup":"sap/ui/comp/smartform/flexibility/changes/RenameGroup","addField":"sap/ui/comp/smartform/flexibility/changes/AddField","addFields":"sap/ui/comp/smartform/flexibility/changes/AddFields"},"sap.ui.comp.smartform.GroupElement":{"hideControl":"default","unhideControl":"sap/ui/comp/smartform/flexibility/changes/UnhideControl","renameField":"sap/ui/comp/smartform/flexibility/changes/RenameField"},"sap.ui.comp.navpopover.NavigationContainer":{"addLink":{"changeHandler":"sap/ui/comp/navpopover/flexibility/changes/AddLink","layers":{"USER":true}},"removeLink":{"changeHandler":"sap/ui/comp/navpopover/flexibility/changes/RemoveLink","layers":{"USER":true}}},"sap.ui.comp.smartvariants.SmartVariantManagement":{"addFavorite":{"changeHandler":"sap/ui/comp/smartvariants/flexibility/changes/addFavorite","layers":{"USER":true}},"removeFavorite":{"changeHandler":"sap/ui/comp/smartvariants/flexibility/changes/removeFavorite","layers":{"USER":true}}},"sap.ui.comp.smartfield.SmartField":"sap/ui/comp/smartfield/flexibility/SmartField"}}});sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX="$Parameter.";sap.ui.comp.STANDARD_VARIANT_NAME="STANDARD";
sap.ui.comp.smartform.inheritCostomDataToFields=function(c){var b=["sap.ui.fl:AppliedChanges"];for(var i=0;i<b.length;i++){if(c.getKey()==b[i]){return false;}}return true;};
sap.ui.comp.smartfield.ControlType={auto:"auto",dropDownList:"dropDownList",input:"input",datePicker:"datePicker",checkBox:"checkBox",selection:"selection"};sap.ui.comp.smartfield.DisplayBehaviour={auto:"auto",descriptionOnly:"descriptionOnly",descriptionAndId:"descriptionAndId",idAndDescription:"idAndDescription",idOnly:"idOnly",TrueFalse:"TrueFalse",OnOff:"OnOff",YesNo:"YesNo"};sap.ui.comp.smartfield.JSONType={String:"String",Date:"Date",Float:"Float",Integer:"Integer",Boolean:"Boolean",DateTime:"DateTime"};sap.ui.comp.smartfield.ControlContextType={None:"",ResponsiveTable:"responsiveTable",Form:"form",Table:"table",SmartFormGrid:"smartFormGrid"};sap.ui.comp.smartfield.ControlProposalType={None:"",ObjectNumber:"ObjectNumber",ObjectIdentifier:"ObjectIdentifier"};sap.ui.comp.smartfield.CriticalityRepresentationType={WithoutIcon:"WithoutIcon",WithIcon:"WithIcon"};sap.ui.comp.smarttable.TableType={Table:"Table",ResponsiveTable:"ResponsiveTable",AnalyticalTable:"AnalyticalTable",TreeTable:"TreeTable"};sap.ui.comp.smarttable.ExportType={GW:"GW",UI5Client:"UI5Client"};sap.ui.comp.smartlist.ListType={List:"List",Tree:"Tree"};sap.ui.comp.personalization.ResetType={ResetFull:"ResetFull",ResetPartial:"ResetPartial"};sap.ui.comp.personalization.AggregationRole={Dimension:"Dimension",Measure:"Measure",NotDimeasure:"NotDimeasure"};sap.ui.comp.personalization.ChangeType={Unchanged:"Unchanged",ModelChanged:"ModelChanged",TableChanged:"TableChanged"};sap.ui.comp.personalization.TableType={ResponsiveTable:"ResponsiveTable",Table:"Table",AnalyticalTable:"AnalyticalTable",TreeTable:"TreeTable",ChartWrapper:"ChartWrapper",SelectionWrapper:"SelectionWrapper"};sap.ui.comp.smartfilterbar.FilterType={auto:"auto",single:"single",multiple:"multiple",interval:"interval"};sap.ui.comp.smartfilterbar.ControlType={auto:"auto",input:"input",dropDownList:"dropDownList",date:"date"};sap.ui.comp.smartfilterbar.MandatoryType={auto:"auto",mandatory:"mandatory",notMandatory:"notMandatory"};sap.ui.comp.smartfilterbar.DisplayBehaviour={auto:"auto",descriptionOnly:"descriptionOnly",descriptionAndId:"descriptionAndId",idAndDescription:"idAndDescription",idOnly:"idOnly"};sap.ui.comp.smartfilterbar.SelectOptionSign={I:"I",include:"I",E:"E",exclude:"E"};sap.ui.comp.navpopover.ChangeHandlerType={addLink:"addLink",removeLink:"removeLink",moveLink:"moveLink"};sap.ui.comp.smartvariants.ChangeHandlerType={addFavorite:"addFavorite",removeFavorite:"removeFavorite"};return sap.ui.comp;},true);
sap.ui.predefine('sap/ui/comp/navpopover/Factory',['sap/ui/comp/library','sap/ui/comp/navpopover/FlexConnector'],function(C,F){"use strict";var a={getService:function(s){switch(s){case"CrossApplicationNavigation":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");case"URLParsing":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing");case"FlexConnector":return F;default:return null;}}};return a;},true);
sap.ui.predefine('sap/ui/comp/navpopover/FlexHandler',['jquery.sap.global','sap/ui/comp/library','sap/ui/base/ManagedObject','sap/ui/comp/personalization/Util','./Util','./Factory','sap/ui/comp/personalization/Controller'],function(q,C,M,P,U,F,a){"use strict";
var b=M.extend("sap.ui.comp.navpopover.FlexHandler",{
constructor:function(i,s){M.apply(this,arguments);},
metadata:{properties:{initialSnapshot:{type:"object",defaultValue:null},snapshotOfUserLayer:{type:"object",defaultValue:null},snapshotOfLayersWithoutUser:{type:"object",defaultValue:null}}}
});
b.prototype.applySettings=function(s){this.setInitialSnapshot({});this.setSnapshotOfUserLayer({});this.setSnapshotOfLayersWithoutUser({});M.prototype.applySettings.apply(this,arguments);};
b.prototype.init=function(){if(JSON.parse(q.sap.getUriParameters().get("sap-ui-smartlink"))){F.getService("FlexConnector").activateApplyChangeStatistics();}};
b.prototype.updateAvailableActionOfSnapshot=function(l,L){if(!l||!L){return;}var s;switch(L){case"USER":s=this.getSnapshotOfUserLayer();s[l.getKey()]={key:l.getKey(),visible:l.getVisible()};this.setSnapshotOfUserLayer(s);break;default:s=this.getSnapshotOfLayersWithoutUser();s[l.getKey()]={key:l.getKey(),visible:l.getVisible()};this.setSnapshotOfLayersWithoutUser(s);}};
b.prototype.discardAvailableActionsOfSnapshot=function(l){if(l!=="USER"){return;}this.setSnapshotOfUserLayer({});};
b.prototype.determineSnapshotOfAvailableActions=function(){var s=b._getUnion(this.getInitialSnapshot(),this.getSnapshotOfLayersWithoutUser());return b._getUnion(s,this.getSnapshotOfUserLayer());};
b.prototype.determineSnapshotOfChangedAvailableActions=function(){var s=this.determineSnapshotOfAvailableActions();return b._getUnionCondensed(this.getInitialSnapshot(),s);};
b.prototype.openSelectionDialog=function(s,f,S,c,i){var t=this;var o=q.extend(true,{},this.getSnapshotOfLayersWithoutUser());var d=q.extend(true,{},this.getSnapshotOfUserLayer());var e;var g;var h;if(i){e=b._getUnion(this.getInitialSnapshot(),o);g=b._getUnion(e,d);h=b._convertSnapshotToSelectionItems(d);}else{e=this.getInitialSnapshot();g=b._getUnion(e,o);h=b._convertSnapshotToSelectionItems(o);}return new Promise(function(r){var D=false;var j=new a({table:P.createSelectionWrapper(U.getStorableAvailableActions(b._convertSnapshotToObjectArray(e)),f),dialogConfirmedReset:function(){D=true;},setting:{selection:{visible:true,payload:{callbackSaveChanges:function(k){var l=D?e:g;var m=b._getUnion(g,k?b.convertArrayToSnapshot("columnKey",k):{});var n=b._convertSnapshotToChangeFormat(b._getUnionCondensed(l,m));if(c){c(n);return Promise.resolve(true);}if(D){return t._discardChanges(s,i).then(function(p){if(!p){t._revertChanges(s,o,d);return false;}return t._saveChanges(s,n);}).then(function(p){if(!p){t._revertChanges(s,o,d);return false;}return true;});}return t._saveChanges(s,n).then(function(p){if(!p){t._revertChanges(s,o,d);return false;}return true;});}}}},resetToInitialTableState:true,dialogAfterClose:function(){return r();}});j.setPersonalizationData({selection:{selectionItems:h}});j.openDialog({contentWidth:"25rem",contentHeight:"35rem",showReset:S,selection:{visible:true}});});};
b.prototype._discardChanges=function(s,i){return F.getService("FlexConnector").discardChangesForControl(s,i).then(function(){return true;})['catch'](function(e){q.sap.log.error("Changes could not be discarded in LRep: "+e.status);return false;});};
b.prototype._saveChanges=function(s,c){var m=c.filter(function(o){return o.visible===true;});var d=c.filter(function(o){return o.visible===false;});return F.getService("FlexConnector").createAndSaveChangesForControl(m,d,s).then(function(){return true;})['catch'](function(e){q.sap.log.error("Changes could not be saved in LRep: "+e.status);return false;});};
b.prototype._revertChanges=function(s,S,o){this.setSnapshotOfLayersWithoutUser(S);this.setSnapshotOfUserLayer(o);s._syncAvailableActions();};
b._getUnion=function(s,S){var o=q.extend(true,{},s);if(S){for(var k in o){if(S[k]&&S[k].visible!==undefined){o[k].visible=S[k].visible;}}}return o;};
b._getUnionCondensed=function(s,S){var o=b._condense(s,S);var c=b._condense(S,s);return b._getUnion(o,c);};
b._condense=function(s,S){var o={};for(var k in s){if(!P.semanticEqual(s[k],S[k])){o[k]=s[k];}}return o;};
b._convertSnapshotToChangeFormat=function(s){var m=b._convertSnapshotToObjectArray(s);return m.map(function(o){return{key:o.key,visible:o.visible};});};
b._convertSnapshotToSelectionItems=function(s){return b._convertSnapshotToObjectArray(s).map(function(m){return{columnKey:m.key,visible:m.visible};});};
b._convertSnapshotToObjectArray=function(s){return Object.keys(s).map(function(k){return s[k];});};
b.convertArrayToSnapshot=function(k,i){var s={};i.forEach(function(I){if(I[k]===undefined){return;}s[I[k]]=I;});return s;};
return b;},true);
sap.ui.predefine('sap/ui/comp/navpopover/LinkData',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element'],function(q,l,E){"use strict";
var L=E.extend("sap.ui.comp.navpopover.LinkData",{metadata:{library:"sap.ui.comp",properties:{text:{type:"string",defaultValue:null},href:{type:"string",defaultValue:null},target:{type:"string",defaultValue:null},description:{type:"string",defaultValue:undefined},visible:{type:"boolean",defaultValue:true},key:{type:"string",defaultValue:undefined},press:{type:"object",defaultValue:null},isSuperiorAction:{type:"boolean"}}}});
L.prototype.getJson=function(){return{key:this.getKey(),href:this.getHref(),text:this.getText(),target:this.getTarget(),description:this.getDescription(),visible:this.getVisible(),press:this.getPress(),isSuperiorAction:this.getIsSuperiorAction()};};
L.convert2Json=function(a){return a.map(function(o){return o.getJson();});};
return L;},true);
sap.ui.predefine('sap/ui/comp/navpopover/NavigationContainer',['sap/m/Link','sap/ui/core/Control','sap/m/VBox','sap/m/HBox','sap/m/Button','sap/m/Title','sap/m/Image','sap/m/Text','sap/ui/layout/form/SimpleForm','sap/m/VBoxRenderer','./Factory','./LinkData','sap/ui/model/json/JSONModel','./Util','sap/ui/core/TitleLevel','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout','sap/ui/layout/form/SimpleFormLayout','sap/ui/comp/personalization/Util','./FlexHandler'],function(L,C,V,H,B,T,I,a,S,b,F,c,J,U,d,e,f,g,P,h){"use strict";
var N=V.extend("sap.ui.comp.navpopover.NavigationContainer",{
metadata:{library:"sap.ui.comp",properties:{mainNavigationId:{type:"string",group:"Misc",defaultValue:null},availableActionsPersonalizationText:{type:"string",defaultValue:undefined},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true}},aggregations:{availableActions:{type:"sap.ui.comp.navpopover.LinkData",multiple:true,singularName:"availableAction"},mainNavigation:{type:"sap.ui.comp.navpopover.LinkData",multiple:false},flexHandler:{type:"sap.ui.comp.navpopover.FlexHandler",visibility:"hidden",multiple:false}},associations:{extraContent:{type:"sap.ui.core.Control",multiple:false},component:{type:"sap.ui.core.Element",multiple:false}},events:{navigate:{},availableActionsPersonalizationPress:{}}},
renderer:b.render
});
N.prototype.init=function(){V.prototype.init.call(this);var m=new J({mainNavigationLink:{title:undefined,subtitle:undefined,href:undefined,target:undefined},availableActions:[],availableActionsPressMap:{},availableActionsPersonalizationText:undefined,extraContent:undefined});m.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);m.setSizeLimit(1000);this.setModel(m,"$sapuicompNavigationContainer");this.setAggregation("flexHandler",new h());this._createContent();};
N.prototype.openSelectionDialog=function(i,s,j,k){var t=this;return this._getFlexHandler().openSelectionDialog(this,i,s,j,k).then(function(){t._updateAvailableActionsPersonalizationText();});};
N.prototype.getDirectLink=function(){var m=this.getModel("$sapuicompNavigationContainer");if(m.getProperty('/extraContent')){return null;}if(m.getProperty('/mainNavigationLink/href')&&!m.getProperty('/availableActions').length){return this._oHeaderArea.getItems()[0];}if(m.getProperty('/availableActions').length===1&&!m.getProperty('/mainNavigationLink/href')){return this._oActionArea.getItems()[0].getItems()[0];}return null;};
N.prototype.hasContent=function(){var m=this.getModel("$sapuicompNavigationContainer");return!!m.getProperty("/mainNavigationLink/href")||!!m.getProperty("/availableActions").length||!!m.getProperty('/extraContent');};
N.prototype.setExtraContent=function(o){var m=this.getModel("$sapuicompNavigationContainer");if(m.getProperty("/extraContent")){this.removeItem(1);}if(typeof o==="string"){o=sap.ui.getCore().byId(o);}this.insertItem(o,1);this.setAssociation("extraContent",o);m.setProperty("/extraContent",o);return this;};
N.prototype.setMainNavigationId=function(m){this.setProperty("mainNavigationId",m,true);var M=this.getModel("$sapuicompNavigationContainer");if(typeof m==="string"){M.setProperty("/mainNavigationLink/title",m);}return this;};
N.prototype.setMainNavigation=function(l){this.setAggregation("mainNavigation",l,true);if(!l){return this;}var m=this.getModel("$sapuicompNavigationContainer");if(l.getHref()){m.setProperty("/mainNavigationLink/href",this._convertToExternal(l.getHref()));m.setProperty("/mainNavigationLink/target",l.getTarget());this._oHeaderArea.removeStyleClass("navpopoversmallheader");}else{this._oHeaderArea.addStyleClass("navpopoversmallheader");}if(!m.getProperty("/mainNavigationLink/title")&&m.getProperty("/mainNavigationLink/title")!==''){m.setProperty("/mainNavigationLink/title",l.getText());}m.setProperty("/mainNavigationLink/subtitle",l.getDescription());return this;};
N.prototype.setAvailableActionsPersonalizationText=function(A){this.setProperty("availableActionsPersonalizationText",A,true);var m=this.getModel("$sapuicompNavigationContainer");m.setProperty("/availableActionsPersonalizationText",A);return this;};
N.prototype.setEnableAvailableActionsPersonalization=function(E){this.setProperty("enableAvailableActionsPersonalization",E,true);this._updateAvailableActionsPersonalizationText();return this;};
N.prototype.addAvailableAction=function(l){this.addAggregation("availableActions",l);if(!l){return this;}l.setHref(this._convertToExternal(l.getHref()));l.setPress(this._onLinkPress.bind(this));var m=this.getModel("$sapuicompNavigationContainer");var i=m.getProperty("/availableActions").length;m.getData().availableActions.splice(i,0,l.getJson());m.getData().availableActionsPressMap[l.getText()+"---"+l.getHref()]=this._onLinkPress.bind(this);m.refresh(true);return this;};
N.prototype.insertAvailableAction=function(l,i){this.insertAggregation("availableActions",l,i);if(!l){return this;}l.setHref(this._convertToExternal(l.getHref()));l.setPress(this._onLinkPress.bind(this));var m=this.getModel("$sapuicompNavigationContainer");m.getData().availableActions.splice(i,0,l.getJson());m.getData().availableActionsPressMap[l.getText()+"---"+l.getHref()]=this._onLinkPress.bind(this);m.refresh(true);return this;};
N.prototype.removeAvailableAction=function(l){var i=this.indexOfAvailableAction(l);if(i>-1){var m=this.getModel("$sapuicompNavigationContainer");m.getData().availableActions.splice(i,1);m.refresh(true);}l=this.removeAggregation("availableActions",l);return l;};
N.prototype.removeAllAvailableActions=function(){var A=this.removeAllAggregation("availableActions");var m=this.getModel("$sapuicompNavigationContainer");m.setProperty("/availableActions",[]);m.refresh(true);return A;};
N.prototype.exit=function(o){if(this.getModel("$sapuicompNavigationContainer")){this.getModel("$sapuicompNavigationContainer").destroy();}};
N.prototype.onAfterRenderingActionForm=function(){var m=this.getModel("$sapuicompNavigationContainer");var $=m.getProperty("/extraContent")?m.getProperty("/extraContent").$()[0]:undefined;if($&&$.scrollHeight>$.clientHeight){this.setFitContainer(false).setJustifyContent(sap.m.FlexJustifyContent.Start);}};
N.prototype._createContent=function(){var t=this;this.addStyleClass("navigationPopover");var o=new L({href:{path:'/mainNavigationLink/href'},text:{path:'/mainNavigationLink/title'},target:{path:'/mainNavigationLink/target'},visible:{path:'/mainNavigationLink/title',formatter:function(j){return!!j;}},enabled:{path:'/mainNavigationLink/href',formatter:function(v){return!!v;}},press:this._onLinkPress.bind(this)});o.addStyleClass("navigationPopoverTitle");var s=new a({text:{path:'/mainNavigationLink/subtitle'},visible:{path:'/mainNavigationLink/subtitle',formatter:function(v){return!!v;}}});this._oHeaderArea=new V({items:[o,s],visible:{path:'/mainNavigationLink/title',formatter:function(j){return!!j;}}});this._oHeaderArea.addStyleClass("navigationPopoverTitleH1");this._oHeaderArea.addStyleClass("navigationPopoverHeader");this._oHeaderArea.setModel(this.getModel("$sapuicompNavigationContainer"));this._oActionArea=new V({visible:{parts:[{path:'/availableActions'},{path:'/availableActionsPersonalizationText'}],formatter:function(m,A){var M=m.filter(function(j){return j.visible===true;});return M.length>0||!!A;}},items:[new V({items:{path:'/availableActions',templateShareable:false,template:new L({text:"{text}",href:"{href}",target:"{target}",press:this._onLinkPress.bind(this),visible:"{visible}"})}})]});this._oActionArea.addEventDelegate({onAfterRendering:this.onAfterRenderingActionForm.bind(this)});this._oActionArea.addStyleClass("navigationPopoverAvailableLinks");this._oActionArea.setModel(this.getModel("$sapuicompNavigationContainer"));this._oPersonalizationButton=new H({justifyContent:"End",items:new B({type:sap.m.ButtonType.Transparent,text:{path:'/availableActionsPersonalizationText'},visible:{parts:[{path:'/availableActions'},{path:'/availableActionsPersonalizationText'}],formatter:function(m,A){return m.length>0&&!!A;}},press:function(){t.fireAvailableActionsPersonalizationPress();}})});this._oPersonalizationButton.setModel(this.getModel("$sapuicompNavigationContainer"));this._oPersonalizationButton.addStyleClass("navigationPopoverPersonalizationButton");var i=new V({visible:{parts:[{path:'/availableActions'},{path:'/availableActionsPersonalizationText'}],formatter:function(m,A){var M=m.filter(function(j){return j.visible===true;});return M.length>0||!!A;}}});i.setModel(this.getModel("$sapuicompNavigationContainer"));i.addStyleClass("navigationPopoverSeparator");this.setFitContainer(true);this.setJustifyContent(sap.m.FlexJustifyContent.Start);this.addItem(this._oHeaderArea).addItem(i).addItem(this._oActionArea).addItem(this._oPersonalizationButton);};
N.prototype._onLinkPress=function(E){this.fireNavigate({text:E.getSource().getText(),href:E.getSource().getHref()});};
N.prototype._convertToExternal=function(s){var x=F.getService("CrossApplicationNavigation");if(!x){return s;}return x.hrefForExternal({target:{shellHash:s}},this._getComponent());};
N.prototype._getComponent=function(){var o=this.getComponent();if(typeof o==="string"){o=sap.ui.getCore().getComponent(o);}return o;};
N.prototype._getFlexHandler=function(){return this.getAggregation("flexHandler");};
N.prototype._updateAvailableAction=function(l,s){this._getFlexHandler().updateAvailableActionOfSnapshot(l,s);this._syncAvailableActions();};
N.prototype._discardAvailableActions=function(l){this._getFlexHandler().discardAvailableActionsOfSnapshot(l);this._syncAvailableActions();};
N.prototype._syncAvailableActions=function(){var s=this._getFlexHandler().determineSnapshotOfAvailableActions();var m=this.getModel("$sapuicompNavigationContainer");m.getProperty("/availableActions").forEach(function(M,i){if(s[M.key]!==undefined){m.setProperty("/availableActions/"+i+"/visible",s[M.key].visible);}});};
N.prototype._updateAvailableActionsPersonalizationText=function(){var A=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_DEFINE_LINKS");if(this.getEnableAvailableActionsPersonalization()){this.setAvailableActionsPersonalizationText(A);}};
return N;},true);
sap.ui.predefine('sap/ui/comp/navpopover/NavigationPopover',['jquery.sap.global','sap/m/Link','sap/m/ResponsivePopover','sap/m/Button','sap/m/Title','sap/m/Image','sap/m/Text','sap/ui/layout/form/SimpleForm','sap/m/VBox','sap/m/HBox','sap/m/ResponsivePopoverRenderer','./Factory','./LinkData','sap/ui/model/json/JSONModel'],function(q,L,R,B,T,I,a,S,V,H,b,F,c,J){"use strict";
var N=R.extend("sap.ui.comp.navpopover.NavigationPopover",{
metadata:{library:"sap.ui.comp",properties:{semanticObjectName:{type:"string",group:"Misc",defaultValue:null},semanticAttributes:{type:"object",group:"Misc",defaultValue:null},appStateKey:{type:"string",group:"Misc",defaultValue:null},mainNavigationId:{type:"string",group:"Misc",defaultValue:null},availableActionsPersonalizationText:{type:"string",group:"Misc",defaultValue:undefined}},aggregations:{availableActions:{type:"sap.ui.comp.navpopover.LinkData",multiple:true,singularName:"availableAction"},mainNavigation:{type:"sap.ui.comp.navpopover.LinkData",multiple:false},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData",multiple:false}},associations:{source:{type:"sap.ui.core.Control",multiple:false},extraContent:{type:"sap.ui.core.Control",multiple:false},component:{type:"sap.ui.core.Element",multiple:false}},events:{targetsObtained:{},navigate:{parameters:{text:{type:"string"},href:{type:"string"}}},availableActionsPersonalizationPress:{}}},
renderer:b.render
});
N.prototype.init=function(){R.prototype.init.call(this);var m=new J({mainNavigationLink:{title:undefined,subtitle:undefined,href:undefined,target:undefined},ownNavigation:undefined,availableActions:[],availableActionsPressMap:{},availableActionsPersonalizationText:undefined,extraContent:undefined});m.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);m.setSizeLimit(1000);this.setModel(m,"$sapuicompNavigationPopover");this._bUseExternalContent=false;this.addStyleClass("navigationPopover");this.setContentWidth("380px");this.setHorizontalScrolling(false);this.setShowHeader(sap.ui.Device.system.phone);this.setPlacement(sap.m.PlacementType.Auto);};
N.prototype.applySettings=function(s){if(s&&s.customData&&s.customData.getProperty("key")==="useExternalContent"){this._bUseExternalContent=true;}this._createContent();R.prototype.applySettings.apply(this,arguments);};
N.prototype.retrieveNavTargets=function(){var x=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!x||!u){q.sap.log.error("Service 'CrossApplicationNavigation' could not be obtained");this.fireTargetsObtained();return;}var t=this;this.setMainNavigation(null);this.setOwnNavigation(null);this.removeAllAvailableActions();var p=x.getLinks({semanticObject:this.getSemanticObjectName(),params:this.getSemanticAttributes(),appStateKey:this.getAppStateKey(),ui5Component:this._getComponent(),sortResultOnTexts:true});p.done(function(l){if(!l||!l.length){t.fireTargetsObtained();return;}var C=x.hrefForExternal();if(C&&C.indexOf("?")!==-1){C=C.split("?")[0];}l.forEach(function(o){if(o.intent.indexOf(C)===0){t.setOwnNavigation(new c({href:o.intent,text:o.text}));return;}var s=u.parseShellHash(o.intent);if(s.action&&(s.action==='displayFactSheet')){t.setMainNavigation(new c({href:o.intent,text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_FACTSHEET")}));return;}t.addAvailableAction(new c({href:o.intent,text:o.text}));});t.fireTargetsObtained();});p.fail(function(){q.sap.log.error("'retrieveNavTargets' failed");});};
N.prototype.show=function(d){if(!this._hasNavigationTargets()){q.sap.log.error("no navigation targets assigned");return;}var C=d||this._getControl();if(!C){q.sap.log.error("no source assigned");return;}this.openBy(C);};
N.prototype.getDirectLink=function(){if(this._bUseExternalContent){return this.getContent()[0].getDirectLink();}var m=this.getModel("$sapuicompNavigationPopover");if(m.getProperty('/extraContent')){return null;}if(m.getProperty('/mainNavigationLink/href')&&!m.getProperty('/availableActions').length){return this._oHeaderArea.getItems()[0];}if(m.getProperty('/availableActions').length===1&&!m.getProperty('/mainNavigationLink/href')){return this._oActionArea.getItems()[0].getItems()[0];}return null;};
N.prototype.hasContent=function(){if(this._bUseExternalContent){return this.getContent()[0].hasContent();}var m=this.getModel("$sapuicompNavigationPopover");return!!m.getProperty("/mainNavigationLink/href")||!!m.getProperty("/availableActions").length||!!m.getProperty('/extraContent');};
N.prototype.setMainNavigationId=function(m){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.setProperty("mainNavigationId",m,true);var M=this.getModel("$sapuicompNavigationPopover");if(typeof m==="string"){M.setProperty("/mainNavigationLink/title",m);}return this;};
N.prototype.setAvailableActionsPersonalizationText=function(A){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.setProperty("availableActionsPersonalizationText",A,true);var m=this.getModel("$sapuicompNavigationPopover");m.setProperty("/availableActionsPersonalizationText",A);return this;};
N.prototype.setExtraContent=function(C){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}var m=this.getModel("$sapuicompNavigationPopover");if(m.getProperty("/extraContent")){this._getContentContainer().removeItem(1);}if(typeof C==="string"){C=sap.ui.getCore().byId(C);}this._getContentContainer().insertItem(C,1);this.setAssociation("extraContent",C);m.setProperty("/extraContent",C);return this;};
N.prototype.setMainNavigation=function(l){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.setAggregation("mainNavigation",l,true);if(!l){return this;}var m=this.getModel("$sapuicompNavigationPopover");if(l.getHref()){m.setProperty("/mainNavigationLink/href",this._convertToExternal(l.getHref()));m.setProperty("/mainNavigationLink/target",l.getTarget());this._oHeaderArea.removeStyleClass("navpopoversmallheader");}else{this._oHeaderArea.addStyleClass("navpopoversmallheader");}if(!m.getProperty("/mainNavigationLink/title")&&m.getProperty("/mainNavigationLink/title")!==''){m.setProperty("/mainNavigationLink/title",l.getText());}m.setProperty("/mainNavigationLink/subtitle",l.getDescription());return this;};
N.prototype.addAvailableAction=function(l){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.addAggregation("availableActions",l);if(!l){return this;}l.setHref(this._convertToExternal(l.getHref()));l.setPress(this._onLinkPress.bind(this));var m=this.getModel("$sapuicompNavigationPopover");var i=m.getProperty("/availableActions").length;m.getData().availableActions.splice(i,0,l.getJson());m.getData().availableActionsPressMap[l.getText()+"---"+l.getHref()]=this._onLinkPress.bind(this);m.refresh(true);return this;};
N.prototype.insertAvailableAction=function(l,i){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.insertAggregation("availableActions",l,i);if(!l){return this;}l.setHref(this._convertToExternal(l.getHref()));l.setPress(this._onLinkPress.bind(this));var m=this.getModel("$sapuicompNavigationPopover");m.getData().availableActions.splice(i,0,l.getJson());m.getData().availableActionsPressMap[l.getText()+"---"+l.getHref()]=this._onLinkPress.bind(this);m.refresh(true);return this;};
N.prototype.removeAvailableAction=function(l){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}var i=this.indexOfAvailableAction(l);if(i>-1){var m=this.getModel("$sapuicompNavigationPopover");m.getData().availableActions.splice(i,1);m.refresh(true);}l=this.removeAggregation("availableActions",l);return l;};
N.prototype.removeAllAvailableActions=function(){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}var A=this.removeAllAggregation("availableActions");var m=this.getModel("$sapuicompNavigationPopover");m.setProperty("/availableActions",[]);m.refresh(true);return A;};
N.prototype.exit=function(C){if(this.getModel("$sapuicompNavigationPopover")){this.getModel("$sapuicompNavigationPopover").destroy();}R.prototype.exit.apply(this,arguments);};
N.prototype.onAfterRenderingActionForm=function(){var m=this.getModel("$sapuicompNavigationPopover");var C=m.getProperty("/extraContent")?m.getProperty("/extraContent").$()[0]:undefined;if(C&&C.scrollHeight>C.clientHeight){this._getContentContainer().setFitContainer(false).setJustifyContent(sap.m.FlexJustifyContent.Start);}};
N.prototype._createContent=function(){if(this._bUseExternalContent){return;}var t=this;var o=new L({href:{path:'/mainNavigationLink/href'},text:{path:'/mainNavigationLink/title'},target:{path:'/mainNavigationLink/target'},visible:{path:'/mainNavigationLink/title',formatter:function(e){return!!e;}},enabled:{path:'/mainNavigationLink/href',formatter:function(v){return!!v;}},press:this._onLinkPress.bind(this)});o.addStyleClass("navigationPopoverTitle");var s=new a({text:{path:'/mainNavigationLink/subtitle'},visible:{path:'/mainNavigationLink/subtitle',formatter:function(v){return!!v;}}});this._oHeaderArea=new V({items:[o,s],visible:{path:'/mainNavigationLink/title',formatter:function(e){return!!e;}}});this._oHeaderArea.addStyleClass("navigationPopoverTitleH1");this._oHeaderArea.addStyleClass("navigationPopoverHeader");this._oHeaderArea.setModel(this.getModel("$sapuicompNavigationPopover"));this._oActionArea=new V({visible:{parts:[{path:'/availableActions'},{path:'/availableActionsPersonalizationText'}],formatter:function(m,A){var M=m.filter(function(e){return e.visible===true;});return M.length>0||!!A;}},items:[new V({items:{path:'/availableActions',templateShareable:false,template:new L({text:"{text}",href:"{href}",target:"{target}",press:function(e){var O=t.getModel("$sapuicompNavigationPopover").getProperty("/availableActionsPressMap")[this.getText()+"---"+this.getHref()];if(O){O(e);}},visible:"{visible}"})}})]});this._oActionArea.addEventDelegate({onAfterRendering:this.onAfterRenderingActionForm.bind(this)});this._oActionArea.addStyleClass("navigationPopoverAvailableLinks");this._oActionArea.setModel(this.getModel("$sapuicompNavigationPopover"));this._oPersonalizationButton=new H({justifyContent:"End",items:new B({type:sap.m.ButtonType.Transparent,text:{path:'/availableActionsPersonalizationText'},visible:{parts:[{path:'/availableActions'},{path:'/availableActionsPersonalizationText'}],formatter:function(m,A){return m.length>0&&!!A;}},press:function(){t.fireAvailableActionsPersonalizationPress();}})});this._oPersonalizationButton.setModel(this.getModel("$sapuicompNavigationPopover"));this._oPersonalizationButton.addStyleClass("navigationPopoverPersonalizationButton");var d=new V({visible:{parts:[{path:'/availableActions'},{path:'/availableActionsPersonalizationText'}],formatter:function(m,A){var M=m.filter(function(e){return e.visible===true;});return M.length>0||!!A;}}});d.setModel(this.getModel("$sapuicompNavigationPopover"));d.addStyleClass("navigationPopoverSeparator");this.addContent(new V({fitContainer:true,justifyContent:sap.m.FlexJustifyContent.Start,items:[this._oHeaderArea,d,this._oActionArea,this._oPersonalizationButton]}));};
N.prototype._getContentContainer=function(){return this.getContent()[0];};
N.prototype._onLinkPress=function(e){this.fireNavigate({text:e.getSource().getText(),href:e.getSource().getHref()});};
N.prototype._hasNavigationTargets=function(){if(!this.hasContent()){q.sap.require("sap.m.MessageBox");var M=sap.ui.require("sap/m/MessageBox");M.show(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_DETAILS_NAV_NOT_POSSIBLE"),{icon:M.Icon.ERROR,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_MSG_NAV_NOT_POSSIBLE"),actions:[sap.m.MessageBox.Action.CLOSE],styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":""});return false;}return true;};
N.prototype._convertToExternal=function(h){var x=F.getService("CrossApplicationNavigation");if(!x){return h;}return x.hrefForExternal({target:{shellHash:h}},this._getComponent());};
N.prototype._getControl=function(){var C=this.getAssociation("source");if(typeof C==="string"){C=sap.ui.getCore().byId(C);}return C;};
N.prototype._getComponent=function(){var C=this.getComponent();if(typeof C==="string"){C=sap.ui.getCore().getComponent(C);}return C;};
return N;},true);
sap.ui.predefine('sap/ui/comp/navpopover/NavigationPopoverHandler',['jquery.sap.global','sap/ui/comp/library',"sap/ui/base/ManagedObject",'./SemanticObjectController','sap/ui/model/json/JSONModel','sap/ui/core/Control','./Factory','./NavigationPopover','./Util','sap/m/VBox','./LinkData','sap/m/MessageBox','sap/ui/comp/personalization/Controller','sap/ui/comp/personalization/Util','./FlexHandler','./NavigationContainer'],function(q,C,M,S,J,a,F,N,U,V,L,b,c,P,d,e){"use strict";
var f=M.extend("sap.ui.comp.navpopover.NavigationPopoverHandler",{metadata:{library:"sap.ui.comp",properties:{semanticObject:{type:"string",defaultValue:null},additionalSemanticObjects:{type:"string[]",defaultValue:[]},semanticObjectController:{type:"any",defaultValue:null},fieldName:{type:"string",defaultValue:null},semanticObjectLabel:{type:"string",defaultValue:null},mapFieldToSemanticObject:{type:"boolean",defaultValue:true},semanticAttributes:{type:"object",visibility:"hidden",defaultValue:null},contactAnnotationPath:{type:"string",defaultValue:undefined},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true}},associations:{control:{type:"sap.ui.core.Control",multiple:false}},events:{beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},innerNavigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}}}}});
f.prototype.init=function(){this._oPopover=null;var m=new J({semanticObject:undefined,semanticAttributes:undefined,appStateKey:undefined,mainNavigationId:undefined,contact:{exists:false,bindingPath:undefined,expand:undefined,select:undefined},navigationTarget:{mainNavigation:undefined,enableAvailableActionsPersonalization:undefined,availableActionsPersonalizationText:undefined,extraContent:undefined},availableActions:[]});m.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);m.setSizeLimit(1000);this.setModel(m,"$sapuicompNavigationPopoverHandler");};
f.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this.setSemanticAttributes(this._calculateSemanticAttributes(null));};
f.prototype.openPopover=function(D){var t=this;return this._getPopover().then(function(p){if(!p.hasContent()){t._showErrorDialog(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_DETAILS_NAV_NOT_POSSIBLE"),sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_MSG_NAV_NOT_POSSIBLE"),p);t._destroyPopover();return;}var l=p.getDirectLink();if(l){t._fireInnerNavigate({text:l.getText(),href:l.getHref()});window.location.href=l.getHref();t._destroyPopover();return;}p.show(D);});};
f.prototype.getSemanticObjectValue=function(){var s=this.getSemanticAttributes();if(s){return s[this.getSemanticObject()][this.getSemanticObject()];}return undefined;};
f.prototype.getNavigationPopoverStableId=function(){var A=this._getAppComponent();var s=this.getModel("$sapuicompNavigationPopoverHandler").getProperty("/semanticObject");if(!A||!s){return undefined;}var g=[s].concat(this.getAdditionalSemanticObjects());U.sortArrayAlphabetical(g);var h=g.join("--");return A.createId("sapuicompnavpopoverNavigationPopover---"+h);};
f.prototype.updateBindingContext=function(){a.prototype.updateBindingContext.apply(this,arguments);this.setSemanticAttributes(this._calculateSemanticAttributes(null));this._destroyPopover();};
f.prototype.setSemanticObject=function(s){this._destroyPopover();this.setProperty("semanticObject",s);this.getModel("$sapuicompNavigationPopoverHandler").setProperty("/semanticObject",s);this.setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
f.prototype.setSemanticAttributes=function(s){this.setProperty("semanticAttributes",s);this.getModel("$sapuicompNavigationPopoverHandler").setProperty("/semanticAttributes",s);return this;};
f.prototype.setEnableAvailableActionsPersonalization=function(E){this.setProperty("enableAvailableActionsPersonalization",E);this.getModel("$sapuicompNavigationPopoverHandler").setProperty("/navigationTarget/enableAvailableActionsPersonalization",E);return this;};
f.prototype.setFieldName=function(s){this.setProperty("fieldName",s);this.setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
f.prototype.setControl=function(o){this.setAssociation("control",o);this.setModel(o.getModel());this._destroyPopover();this._updateSemanticObjectController();this.setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
f.prototype.setMapFieldToSemanticObject=function(m){this.setProperty("mapFieldToSemanticObject",m);this.setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
f.prototype.setSemanticObjectController=function(s){this._updateSemanticObjectController(s);this.setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
f.prototype.exit=function(){this._destroyPopover();if(this.getSemanticObjectController()){this.getSemanticObjectController().unregisterControl(this);}if(this.getModel("$sapuicompNavigationPopoverHandler")){this.getModel("$sapuicompNavigationPopoverHandler").destroy();}};
f.prototype._initModel=function(){var t=this;var s;var g=this.getSemanticObject();var A=this.getAdditionalSemanticObjects();var h=this.getContactAnnotationPath();if(h===undefined&&this.getSemanticObjectController()&&this.getSemanticObjectController().getContactAnnotationPaths()&&this.getSemanticObjectController().getContactAnnotationPaths()[this.getFieldName()]!==undefined){h=this.getSemanticObjectController().getContactAnnotationPaths()[this.getFieldName()];}var o=sap.ui.getCore().byId(this.getControl());var B=o&&o.getBindingContext()?o.getBindingContext().getPath():null;var O=this.getModel();var i=this._getComponent();var I=o&&o.getId();var m,j;var k;return U.retrieveSemanticObjectMapping(this.getFieldName(),O,B).then(function(l){t.setSemanticAttributes(t._calculateSemanticAttributes(l));s=t.getSemanticAttributes();return t._fireBeforePopoverOpens(s,g,I);}).then(function(r){s=r.semanticAttributes;t.setSemanticAttributes(s);j=t.getSemanticObjectValue();m=(o&&o._getTextOfDom&&o._getTextOfDom())||t.getSemanticObjectValue();t.getModel("$sapuicompNavigationPopoverHandler").setProperty("/appStateKey",r.appStateKey);return t._prepareFormsAndTargets(g,A,r.appStateKey,i,s,m,O,B,h,j);}).then(function(r){k=r[0];return t._fireNavigationTargetsObtained(m,g,s,I,k.forms,r[1]);}).then(function(r){var l=t.getModel("$sapuicompNavigationPopoverHandler");l.setProperty("/mainNavigationId",r.mainNavigationId);l.setProperty("/navigationTarget/mainNavigation",r.mainNavigation);l.setProperty("/navigationTarget/extraContent",r.extraContent);l.setProperty("/contact/exists",!!k.forms.length);l.setProperty("/contact/bindingPath",k.bindingPath);l.setProperty("/contact/expand",k.expand);l.setProperty("/contact/select",k.select);l.setProperty("/availableActions",t._updateVisibilityOfAvailableActions(L.convert2Json(r.availableActions)));l.setProperty("/navigationTarget/enableAvailableActionsPersonalization",t._isAvailableActionsPersonalizationTextEnabled(l.getProperty("/availableActions")));});};
f.prototype._initPopover=function(){var t=this;return this._initModel().then(function(){var m=t.getModel("$sapuicompNavigationPopoverHandler");var p=t._createPopover();p.setModel(m,"$sapuicompNavigationPopoverHandler");var o=sap.ui.getCore().byId(t.getControl());if(o){o.addDependent(p);}p.getContent()[0]._updateAvailableActionsPersonalizationText();t._requestBindingContextForContact(p,m.getProperty("/contact/exists"));return p;});};
f.prototype._initNavigationContainer=function(){var t=this;return this._initModel().then(function(){var m=t.getModel("$sapuicompNavigationPopoverHandler");var n=t._createNavigationContainer();n.setModel(m,"$sapuicompNavigationPopoverHandler");var o=sap.ui.getCore().byId(t.getControl());if(o){o.addDependent(n);}n._updateAvailableActionsPersonalizationText();t._requestBindingContextForContact(n,m.getProperty("/contact/exists"));return n;});};
f.prototype._requestBindingContextForContact=function(n,i){if(!i){return;}var m=this.getModel("$sapuicompNavigationPopoverHandler");var o=sap.ui.getCore().byId(this.getControl());var B=o&&o.getBindingContext()?o.getBindingContext().getPath():null;if(m.getProperty("/contact/bindingPath")){n.bindContext({path:m.getProperty("/contact/bindingPath"),events:{change:function(){n.invalidate();}}});}else if(B){n.bindContext({path:B,parameters:{expand:m.getProperty("/contact/expand"),select:m.getProperty("/contact/select")},events:{change:function(){n.invalidate();}}});}};
f.prototype._getPopover=function(){if(!this._oPopover){return this._initPopover();}else{return Promise.resolve(this._oPopover);}};
f.prototype._getNavigationContainer=function(){return this._initNavigationContainer().then(function(n){return n;});};
f.prototype._destroyPopover=function(){if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
f.prototype._createPopover=function(){if(this._oPopover){return this._oPopover;}var n=this._createNavigationContainer();n.attachAvailableActionsPersonalizationPress(this._onAvailableActionsPersonalizationPress,this);this._oPopover=new N({customData:new sap.ui.core.CustomData({key:"useExternalContent"}),content:[n],semanticObjectName:"{$sapuicompNavigationPopoverHandler>/semanticObject}",semanticAttributes:"{$sapuicompNavigationPopoverHandler>/semanticAttributes}",appStateKey:"{$sapuicompNavigationPopoverHandler>/appStateKey}",source:this.getControl(),afterClose:this._destroyPopover.bind(this)});return this._oPopover;};
f.prototype._createNavigationContainer=function(){if(!!sap.ui.getCore().byId(this.getNavigationPopoverStableId())){q.sap.log.error("Duplicate ID '"+this.getNavigationPopoverStableId()+"'. The instance of NavigationContainer should be destroyed first in order to avoid duplicate creation of NavigationContainer with stable ID.");throw"Duplicate ID";}var m=this.getModel("$sapuicompNavigationPopoverHandler");var n=new e(this.getNavigationPopoverStableId(),{mainNavigationId:"{$sapuicompNavigationPopoverHandler>/mainNavigationId}",mainNavigation:m.getProperty("/navigationTarget/mainNavigation"),availableActions:{path:'$sapuicompNavigationPopoverHandler>/availableActions',templateShareable:false,template:new L({key:"{$sapuicompNavigationPopoverHandler>key}",href:"{$sapuicompNavigationPopoverHandler>href}",text:"{$sapuicompNavigationPopoverHandler>text}",target:"{$sapuicompNavigationPopoverHandler>target}",description:"{$sapuicompNavigationPopoverHandler>description}",visible:"{$sapuicompNavigationPopoverHandler>visible}"})},extraContent:m.getProperty("/navigationTarget/extraContent")?m.getProperty("/navigationTarget/extraContent").getId():undefined,component:this._getComponent(),enableAvailableActionsPersonalization:"{$sapuicompNavigationPopoverHandler>/navigationTarget/enableAvailableActionsPersonalization}",availableActionsPersonalizationText:"{$sapuicompNavigationPopoverHandler>/navigationTarget/availableActionsPersonalizationText}",navigate:this._onNavigate.bind(this)});n._getFlexHandler().setInitialSnapshot(d.convertArrayToSnapshot("key",m.getProperty("/availableActions")));return n;};
f.prototype._prepareFormsAndTargets=function(s,A,g,o,h,m,O,B,i,j){var p=U.retrieveContactAnnotationData(O,B,i).then(function(l){var n=U.parseContactAnnotation(l);return{bindingPath:l.entitySet?"/"+l.entitySet+"('"+j+"')":undefined,expand:n.expand,select:n.select,forms:U.createContactDetailForms(n.groups)};});var k=U.retrieveNavigationTargets(s,A,g,o,h,m);return Promise.all([p,k]);};
f.prototype._fireBeforePopoverOpens=function(s,g,i){var t=this;return new Promise(function(r){var R={semanticAttributes:s,appStateKey:undefined};if(!t.hasListeners("beforePopoverOpens")){return r(R);}t.fireBeforePopoverOpens({originalId:i,semanticObject:g,semanticAttributes:s?s[g]:s,semanticAttributesOfSemanticObjects:s,setSemanticAttributes:function(h,j){j=j||g;R.semanticAttributes=R.semanticAttributes||{};R.semanticAttributes[j]=h;},setAppStateKey:function(A){R.appStateKey=A;},open:function(){return r(R);}});});};
f.prototype._fireNavigationTargetsObtained=function(m,s,o,i,g,n){var t=this;return new Promise(function(r){var R={mainNavigationId:m,mainNavigation:n.mainNavigation,availableActions:n.availableActions,ownNavigation:n.ownNavigation,extraContent:g.length?new V({items:g}):undefined};if(!t.hasListeners("navigationTargetsObtained")){return r(R);}t.fireNavigationTargetsObtained({mainNavigation:n.mainNavigation,actions:n.availableActions,ownNavigation:n.ownNavigation,popoverForms:g,semanticObject:s,semanticAttributes:o?o[s]:o,originalId:i,show:function(m,h,A,j){if(arguments.length>0&&!(typeof m==="string"||h instanceof sap.ui.comp.navpopover.LinkData||q.isArray(A))&&j===undefined){j=A;A=h;h=m;m=undefined;}if(m!==undefined&&m!==null){R.mainNavigationId=m;}if(h!==undefined){R.mainNavigation=h;}if(A){A.forEach(function(k){if(k.getKey()===undefined){q.sap.log.error("'key' attribute of 'availableAction' '"+k.getText()+"' is undefined. Links without 'key' can not be persisted.");q.sap.log.warning("The 'visible' attribute of 'availableAction' '"+k.getText()+"' is set to 'true'");k.setVisible(true);}});R.availableActions=A;}if(j){R.extraContent=j;}return r(R);}});});};
f.prototype._onNavigate=function(E){var p=E.getParameters();this._fireInnerNavigate({text:p.text,href:p.href});};
f.prototype._onAvailableActionsPersonalizationPress=function(E){var t=this;var n=E.getSource();this._oPopover.setModal(true);n.openSelectionDialog(false,true,undefined,true).then(function(){if(t._oPopover){t._oPopover.setModal(false);}});};
f.prototype._fireInnerNavigate=function(p){var o=sap.ui.getCore().byId(this.getControl());var s=this.getSemanticObject();var g=this.getSemanticAttributes();this.fireInnerNavigate({text:p.text,href:p.href,originalId:o?o.getId():undefined,semanticObject:s,semanticAttributes:g?g[s]:g});};
f.prototype._getComponent=function(){var o=sap.ui.getCore().byId(this.getControl());if(!o){return null;}var p=o.getParent();while(p){if(p instanceof sap.ui.core.Component){if(p&&p.getAppComponent){p=p.getAppComponent();}return p;}p=p.getParent();}return null;};
f.prototype._getAppComponent=function(){return F.getService("FlexConnector").getAppComponentForControl(sap.ui.getCore().byId(this.getControl()));};
f.prototype._calculateSemanticAttributes=function(s){var o=sap.ui.getCore().byId(this.getControl());var B=this.getBindingContext()||(o&&o.getBindingContext());if(!B){return null;}var t=this;var g=this.getFieldName();var h=B.getObject(B.getPath());var i=["",this.getSemanticObject()].concat(this.getAdditionalSemanticObjects());var m=this.getMapFieldToSemanticObject();if(this.getSemanticObjectController()&&this.getSemanticObjectController().getMapFieldToSemanticObject()!==undefined){m=this.getSemanticObjectController().getMapFieldToSemanticObject();}var r={};i.forEach(function(j){r[j]={};for(var A in h){if(A==="__metadata"){continue;}if(!h[A]){continue;}var k;if(s){k=(s[j]&&s[j][A])?s[j][A]:A;}else{k=A;if(m){k=t._mapFieldToSemanticObject(A);}}var l=h[A];if(r[j][k]){if(h[g]){if(k===t._mapFieldToSemanticObject(t.getFieldName())){l=h[g];}else{q.sap.log.error("During the mapping of the attribute "+A+" a clash situation is occurred. This can lead to wrong navigation later on.");}}}r[j][k]=l;}});return r;};
f.prototype._mapFieldToSemanticObject=function(s){if(this.getFieldName()===s&&this.getSemanticObject()){return this.getSemanticObject();}var o=this.getSemanticObjectController();if(!o){return s;}var m=o.getFieldSemanticObjectMap();if(!m){return s;}return m[s]||s;};
f.prototype._updateSemanticObjectController=function(o){var g=this.getProperty("semanticObjectController");var h=sap.ui.getCore().byId(this.getControl());o=o||this.getSemanticObjectController()||this._getSemanticObjectControllerOfControl(h);if(o&&h&&o.isControlRegistered(h)){o.unregisterControl(this);}if(o!==g&&g){g.unregisterControl(this);}this.setProperty("semanticObjectController",o);if(o&&!o.isControlRegistered(h)){o.registerControl(this);}};
f.prototype._getSemanticObjectControllerOfControl=function(o){if(!o){return undefined;}var s;var p=o.getParent();while(p){if(p.getSemanticObjectController){s=p.getSemanticObjectController();if(s){this.setSemanticObjectController(s);break;}}p=p.getParent();}return s;};
f.prototype._updateVisibilityOfAvailableActions=function(m){if(!this._getEnabledAvailableActionsPersonalizationTotal()){return m;}var g=U.getStorableAvailableActions(m);var h=g.some(function(o){return!!o.isSuperiorAction;});g.forEach(function(o){if(m.length>10){o.visible=false;}if(h){o.visible=false;}if(o.isSuperiorAction){o.visible=true;}});return m;};
f.prototype._isAvailableActionsPersonalizationTextEnabled=function(m){var g=U.getStorableAvailableActions(m);if(g.length===0){return false;}return this._getEnabledAvailableActionsPersonalizationTotal();};
f.prototype._getEnabledAvailableActionsPersonalizationTotal=function(){var E=this.getEnableAvailableActionsPersonalization();if(this.getSemanticObjectController()&&this.getSemanticObjectController().getEnableAvailableActionsPersonalization()&&this.getSemanticObjectController().getEnableAvailableActionsPersonalization()[this.getFieldName()]!==undefined){E=this.getSemanticObjectController().getEnableAvailableActionsPersonalization()[this.getFieldName()];}return E;};
f.prototype._showErrorDialog=function(t,T,o){b.show(t,{icon:b.Icon.ERROR,title:T,actions:[sap.m.MessageBox.Action.CLOSE],styleClass:(o.$()&&o.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact navigationPopoverErrorDialog":"navigationPopoverErrorDialog"});};
return f;},true);
sap.ui.predefine('sap/ui/comp/navpopover/RTAHandler',['jquery.sap.global','sap/ui/comp/library','sap/ui/comp/personalization/Controller','sap/ui/comp/personalization/Util','./Util','sap/ui/comp/navpopover/flexibility/changes/AddLink','sap/ui/comp/navpopover/flexibility/changes/RemoveLink','sap/ui/fl/changeHandler/JsControlTreeModifier','./Factory'],function(q,C,a,P,U,A,R,J,F){"use strict";var b={};
b.isSettingsAvailable=function(){return!!F.getService("CrossApplicationNavigation");};
b.getStableElements=function(n){if(!n||!(n instanceof sap.ui.comp.navpopover.NavigationPopoverHandler)){return null;}var s=n.getNavigationPopoverStableId();if(!s){return null;}var o=n._getAppComponent();if(!o){return null;}return[{id:s,appComponent:o}];};
b.execute=function(n,g){return new Promise(function(r,c){if(!n||!(n instanceof sap.ui.comp.navpopover.NavigationPopoverHandler)){return c(new Error("oNavigationPopoverHandler is not of supported type sap.ui.comp.navpopover.NavigationPopoverHandler"));}if(!n.getNavigationPopoverStableId()){return c(new Error("StableId is not defined. SemanticObject="+n.getSemanticObject()));}var o=n._getAppComponent();if(!o){return c(new Error("AppComponent is not defined. oControl="+n.getControl()));}n._getNavigationContainer().then(function(N){var d=[];var e=[];var f=function(h){var i=h.filter(function(m){return m.visible===true;});var j=h.filter(function(m){return m.visible===false;});d=b._prepareResult(i,sap.ui.comp.navpopover.ChangeHandlerType.addLink,N.getId(),o);e=b._prepareResult(j,sap.ui.comp.navpopover.ChangeHandlerType.removeLink,N.getId(),o);};b._applyUnsavedChanges(g,N,o);N.openSelectionDialog(true,false,f,false).then(function(){N.destroy();r(d.concat(e));});});});};
b._prepareResult=function(m,c,s,o){return m.map(function(M){return{selectorControl:{id:s,controlType:"sap.ui.comp.navpopover.NavigationContainer",appComponent:o},changeSpecificData:{changeType:c,content:M}};});};
b._applyUnsavedChanges=function(g,n,o){var c=g(n.getId(),[sap.ui.comp.navpopover.ChangeHandlerType.addLink,sap.ui.comp.navpopover.ChangeHandlerType.removeLink]);c.forEach(function(d){switch(d.getChangeType()){case sap.ui.comp.navpopover.ChangeHandlerType.addLink:A.applyChange(d,n,{modifier:J,appComponent:o});break;case sap.ui.comp.navpopover.ChangeHandlerType.removeLink:R.applyChange(d,n,{modifier:J,appComponent:o});break;}});};
return b;},true);
sap.ui.predefine('sap/ui/comp/navpopover/SemanticObjectController',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element','./Factory','sap/ui/model/json/JSONModel'],function(q,l,E,F,J){"use strict";
var S=E.extend("sap.ui.comp.navpopover.SemanticObjectController",{metadata:{library:"sap.ui.comp",properties:{ignoredFields:{type:"string",group:"Misc",defaultValue:null},prefetchNavigationTargets:{type:"boolean",group:"Misc",defaultValue:false},fieldSemanticObjectMap:{type:"object",group:"Misc",defaultValue:null},entitySet:{type:"string",group:"Misc",defaultValue:null},contactAnnotationPaths:{type:"object",defaultValue:null},enableAvailableActionsPersonalization:{type:"object",defaultValue:null},mapFieldToSemanticObject:{type:"boolean"}},events:{navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}},prefetchDone:{parameters:{semanticObjects:{type:"object"}}}}}});
S.oSemanticObjects={};S.oNavigationTargetActions={};S.bHasPrefetchedDistinctSemanticObjects=false;S.bHasPrefetchedNavigationTargetActions=false;S.oPromise=null;S.oPromiseActions=null;
S.prototype.init=function(){S.prefetchDistinctSemanticObjects();this._proxyOnBeforePopoverOpens=this._onBeforePopoverOpens.bind(this);this._proxyOnTargetsObtained=this._onTargetsObtained.bind(this);this._proxyOnNavigate=this._onNavigate.bind(this);this._aRegisteredControls=[];};
S.prototype.isControlRegistered=function(c){return this._aRegisteredControls.indexOf(c)>-1;};
S.prototype.registerControl=function(c){if(!(c instanceof sap.ui.comp.navpopover.SmartLink||c instanceof sap.ui.comp.navpopover.NavigationPopoverHandler)){q.sap.log.warning("sap.ui.comp.navpopover.SemanticObjectController: "+(c.getMetadata?c.getMetadata():"parameter")+" is neither of SmartLink nor of NavigationPopoverHandler instance");return;}if(this.isControlRegistered(c)){return;}if(c.attachBeforePopoverOpens){c.attachBeforePopoverOpens(this._proxyOnBeforePopoverOpens);}if(c.attachNavigationTargetsObtained){c.attachNavigationTargetsObtained(this._proxyOnTargetsObtained);}if(c.attachInnerNavigate){c.attachInnerNavigate(this._proxyOnNavigate);}this._aRegisteredControls.push(c);};
S.prototype.unregisterControl=function(c){if(!c){return;}if(!this.isControlRegistered(c)){return;}if(c.detachBeforePopoverOpens){c.detachBeforePopoverOpens(this._proxyOnBeforePopoverOpens);}if(c.detachNavigationTargetsObtained){c.detachNavigationTargetsObtained(this._proxyOnTargetsObtained);}if(c.detachInnerNavigate){c.detachInnerNavigate(this._proxyOnNavigate);}this._aRegisteredControls.splice(this._aRegisteredControls.indexOf(c),1);};
S.prototype._onBeforePopoverOpens=function(e){var p=e.getParameters();if(this.hasListeners("beforePopoverOpens")){this.fireBeforePopoverOpens({semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,semanticAttributesOfSemanticObjects:p.semanticAttributesOfSemanticObjects,setSemanticAttributes:p.setSemanticAttributes,setAppStateKey:p.setAppStateKey,originalId:p.originalId,open:p.open});}else{p.open();}};
S.prototype._onTargetsObtained=function(e){var p=e.getParameters();if(!this.hasListeners("navigationTargetsObtained")){p.show();return;}this.fireNavigationTargetsObtained({mainNavigation:p.mainNavigation,actions:p.actions,ownNavigation:p.ownNavigation,popoverForms:p.popoverForms,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,originalId:p.originalId,show:p.show});};
S.prototype._onNavigate=function(e){var p=e.getParameters();this.fireNavigate({text:p.text,href:p.href,originalId:p.originalId,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes});};
S.prototype.setIgnoredState=function(s){if(s instanceof sap.ui.comp.navpopover.SmartLink){s._updateEnabled();}};
S.prototype.setIgnoredFields=function(i){this.setProperty("ignoredFields",i);this._aRegisteredControls.forEach(function(r){if(r._updateEnabled){r._updateEnabled();}});return this;};
S.prototype.setPrefetchNavigationTargets=function(p){this.setProperty("prefetchNavigationTargets",p);if(p!==true){return this;}q.sap.log.error("sap.ui.comp.navpopover.SemanticObjectController: Please be aware that in case of a large amount of semantic objects the performance may suffer significantly and the received links will be created out of context");var t=this;S.getDistinctSemanticObjects().then(function(s){S.getNavigationTargetActions(s).then(function(n){t.firePrefetchDone({semanticObjects:n});});});return this;};
S.prototype.getFieldSemanticObjectMap=function(){var m=this.getProperty("fieldSemanticObjectMap");if(m){return m;}if(!this.getEntitySet()){q.sap.log.warning("sap.ui.comp.navpopover.SemanticObjectController: FieldSemanticObjectMap is not set on SemanticObjectController, retrieval without EntitySet not possible");return null;}q.sap.require("sap.ui.comp.odata.MetadataAnalyser");var M=new sap.ui.comp.odata.MetadataAnalyser(this.getModel());m=M.getFieldSemanticObjectMap(this.getEntitySet());if(m){this.setProperty("fieldSemanticObjectMap",m,true);}return m;};
S.prototype.getEntitySet=function(){var e=this.getProperty("entitySet");if(e){return e;}var p=this.getParent();while(p){if(p.getEntitySet){e=p.getEntitySet();if(e){this.setProperty("entitySet",e,true);break;}}p=p.getParent();}return e;};
S.prototype.hasSemanticObjectLinks=function(s){return S.hasDistinctSemanticObject(s,S.oSemanticObjects);};
S.prefetchDistinctSemanticObjects=function(){S.getJSONModel();if(!S.bHasPrefetchedDistinctSemanticObjects){S.getDistinctSemanticObjects();}};
S.getDistinctSemanticObjects=function(){if(S.bHasPrefetchedDistinctSemanticObjects){return Promise.resolve(S.oSemanticObjects);}if(!S.oPromise){S.oPromise=new Promise(function(r){var c=F.getService("CrossApplicationNavigation");if(!c){q.sap.log.error("sap.ui.comp.navpopover.SemanticObjectController: Service 'CrossApplicationNavigation' could not be obtained");S.bHasPrefetchedDistinctSemanticObjects=true;return r({});}c.getDistinctSemanticObjects().then(function(s){s.forEach(function(a){S.oSemanticObjects[a]={};});var m=S.getJSONModel();m.setProperty("/distinctSemanticObjects",S.oSemanticObjects);S.bHasPrefetchedDistinctSemanticObjects=true;return r(S.oSemanticObjects);},function(){q.sap.log.error("sap.ui.comp.navpopover.SemanticObjectController: getDistinctSemanticObjects() of service 'CrossApplicationNavigation' failed");S.bHasPrefetchedDistinctSemanticObjects=true;return r({});});});}return S.oPromise;};
S.getNavigationTargetActions=function(s){if(S.bHasPrefetchedNavigationTargetActions){return Promise.resolve(S.oNavigationTargetActions);}if(!S.oPromiseLinks){S.oPromiseLinks=new Promise(function(r){var c=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!c||!u){q.sap.log.error("sap.ui.comp.navpopover.SemanticObjectController: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");S.bHasPrefetchedNavigationTargetActions=true;return r({});}var a=Object.keys(s);var p=a.map(function(b){return[{semanticObject:b}];});c.getLinks(p).then(function(L){a.forEach(function(b,i){S.oNavigationTargetActions[b]=[];L[i][0].forEach(function(o){var d=u.parseShellHash(o.intent);if(d&&d.semanticObject===b){S.oNavigationTargetActions[b].push(d.action);}});});var m=S.getJSONModel();m.setProperty("/navigationTargetActions",S.oNavigationTargetActions);S.bHasPrefetchedNavigationTargetActions=true;return r(S.oNavigationTargetActions);},function(){q.sap.log.error("sap.ui.comp.navpopover.SemanticObjectController: getLinks() of service 'CrossApplicationNavigation' failed");S.bHasPrefetchedNavigationTargetActions=true;return r({});});});}return S.oPromiseLinks;};
S.hasDistinctSemanticObject=function(s,o){return!!o[s];};
S.getJSONModel=function(){var m=sap.ui.getCore().getModel("$sapuicompSemanticObjectController_DistinctSemanticObjects");if(m&&!q.isEmptyObject(m.getData())){return m;}m=new J({distinctSemanticObjects:{}});m.setDefaultBindingMode(sap.ui.model.BindingMode.OneTime);m.setSizeLimit(1000);sap.ui.getCore().setModel(m,"$sapuicompSemanticObjectController_DistinctSemanticObjects");return m;};
S.destroyDistinctSemanticObjects=function(){S.oSemanticObjects={};S.oNavigationTargetActions={};S.oPromise=null;S.oPromiseActions=null;S.bHasPrefetchedDistinctSemanticObjects=false;S.bHasPrefetchedNavigationTargetActions=false;var m=sap.ui.getCore().getModel("$sapuicompSemanticObjectController_DistinctSemanticObjects");if(m){m.destroy();}};
return S;},true);
sap.ui.predefine('sap/ui/comp/navpopover/SmartLink.designtime',['./RTAHandler','sap/m/ObjectIdentifier'],function(R,O){"use strict";(function(){O.getMetadata().loadDesignTime().then(function(d){if(d.registerSettingsHandler){d.registerSettingsHandler({getStableElements:function(o){var n;o.fireEvent("ObjectIdentifier.designtime",{caller:"ObjectIdentifier.designtime",registerNavigationPopoverHandler:function(N){n=N;}});return R.getStableElements(n);},isSettingsAvailable:function(){return R.isSettingsAvailable();},execute:function(o,g){var n;o.fireEvent("ObjectIdentifier.designtime",{caller:"ObjectIdentifier.designtime",registerNavigationPopoverHandler:function(N){n=N;}});return R.execute(n,g);}});}});})();return{getStableElements:function(s){return R.getStableElements(s.getNavigationPopoverHandler());},actions:{settings:function(){if(!R.isSettingsAvailable()){jQuery.sap.log.error("sap.ui.comp.navpopover.SmartLink.designtime: 'settings' action is not available");return;}return{handler:function(s,g){if(arguments.length===3){return R.execute(s.getNavigationPopoverHandler(),arguments[2].getUnsavedChanges);}return R.execute(s.getNavigationPopoverHandler(),g);}};}},annotations:{semanticObjectMapping:{namespace:"com.sap.vocabularies.Common.v1",annotation:"SemanticObjectMapping",target:["Property"],defaultValue:null,appliesTo:["text"],group:["Behavior"],since:"1.48.0"},contact:{namespace:"com.sap.vocabularies.Communication.v1",annotation:"Contact",target:["EntityType"],defaultValue:null,appliesTo:["text","label","value"],group:["Behavior"],since:"1.40.1"}},properties:{semanticObject:{ignore:true},additionalSemanticObjects:{ignore:true},semanticObjectController:{ignore:true},fieldName:{ignore:true},semanticObjectLabel:{ignore:true},createControlCallback:{ignore:true},mapFieldToSemanticObject:{ignore:true},contactAnnotationPath:{ignore:false},ignoreLinkRendering:{ignore:true},enableAvailableActionsPersonalization:{ignore:false},uom:{ignore:true},enabled:{ignore:false}},customData:{}};},false);
sap.ui.predefine('sap/ui/comp/navpopover/SmartLink',['jquery.sap.global','sap/ui/base/ManagedObject','sap/m/Link','./LinkData','sap/ui/core/Control','./SemanticObjectController','./NavigationPopoverHandler','sap/ui/model/json/JSONModel','sap/ui/comp/personalization/Util'],function(q,M,L,a,C,S,N,J,P){"use strict";
var b=L.extend("sap.ui.comp.navpopover.SmartLink",{metadata:{library:"sap.ui.comp",designTime:true,properties:{semanticObject:{type:"string",defaultValue:null},additionalSemanticObjects:{type:"string[]",defaultValue:[]},semanticObjectController:{type:"any",defaultValue:null},fieldName:{type:"string",defaultValue:null},semanticObjectLabel:{type:"string",defaultValue:null},createControlCallback:{type:"object",defaultValue:null},mapFieldToSemanticObject:{type:"boolean",defaultValue:true},contactAnnotationPath:{type:"string",defaultValue:undefined},ignoreLinkRendering:{type:"boolean",defaultValue:false},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true},uom:{type:"string",defaultValue:undefined}},aggregations:{innerControl:{type:"sap.ui.core.Control",multiple:false}},events:{beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},innerNavigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}}}}});
b.prototype.getInnerControlValue=function(){if(this._isRenderingInnerControl()){var i=this._getInnerControl();if(i){if(i.getText){return i.getText();}if(i.getValue){return i.getValue();}}}return this.getText();};
b.prototype.getNavigationPopoverHandler=function(){return this._createNavigationPopoverHandler();};
b.prototype.init=function(){S.prefetchDistinctSemanticObjects();this._oNavigationPopoverHandler=null;this.attachPress(this._onLinkPressed);this.addStyleClass("sapUiCompSmartLink");};
b.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this._updateEnabled();};
b.prototype.updateBindingContext=function(){C.prototype.updateBindingContext.apply(this,arguments);this.setHref(null);this.setTarget(null);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setBindingContext(this.getBindingContext());}};
b.prototype._getTextOfDom=function(){if(this.$().find("span").length===2){return this.$().find("span")[0].textContent+this.$().find("span")[1].textContent;}else{return this.$()[0].textContent;}};
b.prototype.setText=function(t){if(this._isRenderingInnerControl()){this.setProperty("text",t,true);}else{L.prototype.setText.call(this,t);}return this;};
b.prototype.setMapFieldToSemanticObject=function(m){this.setProperty("mapFieldToSemanticObject",m);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setMapFieldToSemanticObject(m);}return this;};
b.prototype.setSemanticObject=function(s){this.setProperty("semanticObject",s);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setSemanticObject(s);}this._updateEnabled();return this;};
b.prototype.setAdditionalSemanticObjects=function(s){this.setProperty("additionalSemanticObjects",s);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setAdditionalSemanticObjects(s);}return this;};
b.prototype.setContactAnnotationPath=function(c){this.setProperty("contactAnnotationPath",c);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setContactAnnotationPath(c);}this._updateEnabled();return this;};
b.prototype.setEnableAvailableActionsPersonalization=function(e){this.setProperty("enableAvailableActionsPersonalization",e);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setEnableAvailableActionsPersonalization(e);}return this;};
b.prototype.setIgnoreLinkRendering=function(i){this.setProperty("ignoreLinkRendering",i);this._updateEnabled();return this;};
b.prototype.setFieldName=function(f){this.setProperty("fieldName",f);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setFieldName(f);}this._updateEnabled();return this;};
b.prototype.setSemanticObjectController=function(c){if(c&&!(c instanceof sap.ui.comp.navpopover.SemanticObjectController)){q.sap.log.warning("Warning: setSemanticObjectController() has to be an object of sap.ui.comp.navpopover.SemanticObjectController instances",this);return this;}var o=this.getProperty("semanticObjectController");if(o===c){return this;}if(o){o.unregisterControl(this);}this.setProperty("semanticObjectController",c,true);if(c){c.registerControl(this);}if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setSemanticObjectController(c);}this._updateEnabled();return this;};
b.prototype.onBeforeRendering=function(){L.prototype.onBeforeRendering.apply(this,arguments);if(!this.getSemanticObjectController()){var s=this._getSemanticObjectControllerOfParent();if(s){this.setSemanticObjectController(s);}}};
b.prototype.exit=function(){if(this.getSemanticObjectController()){this.getSemanticObjectController().unregisterControl(this);}if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.destroy();this._oNavigationPopoverHandler=null;}};
b.prototype._onLinkPressed=function(e){this._createNavigationPopoverHandler().openPopover();};
b.prototype._createNavigationPopoverHandler=function(){if(!this._oNavigationPopoverHandler){if(!this.getFieldName()){var B=this.getBinding("text");var f=B&&B.getPath();if(!f&&B&&B.getBindings){f=B.getBindings()[0].getPath();}this.setFieldName(f);}this._oNavigationPopoverHandler=new N({semanticObject:this.getSemanticObject(),additionalSemanticObjects:this.getAdditionalSemanticObjects(),semanticObjectController:this.getSemanticObjectController(),fieldName:this.getFieldName(),mapFieldToSemanticObject:this.getMapFieldToSemanticObject(),contactAnnotationPath:this.getContactAnnotationPath(),enableAvailableActionsPersonalization:this.getEnableAvailableActionsPersonalization(),control:this,beforePopoverOpens:this._onBeforePopoverOpens.bind(this),navigationTargetsObtained:this._onNavigationTargetsObtained.bind(this),innerNavigate:this._onInnerNavigate.bind(this)});this._oNavigationPopoverHandler.setModel(this.getModel());}return this._oNavigationPopoverHandler;};
b.prototype._onNavigationTargetsObtained=function(e){var p=e.getParameters();if(!this.hasListeners("navigationTargetsObtained")){p.show();return;}this.fireNavigationTargetsObtained({mainNavigation:p.mainNavigation,actions:p.actions,ownNavigation:p.ownNavigation,popoverForms:p.popoverForms,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,originalId:p.originalId,show:p.show});};
b.prototype._onBeforePopoverOpens=function(e){var p=e.getParameters();if(!this.hasListeners("beforePopoverOpens")){p.open();return;}this.fireBeforePopoverOpens({originalId:p.originalId,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,semanticAttributesOfSemanticObjects:p.semanticAttributesOfSemanticObjects,setSemanticAttributes:p.setSemanticAttributes,setAppStateKey:p.setAppStateKey,open:p.open});};
b.prototype._onInnerNavigate=function(e){var p=e.getParameters();if(!this.hasListeners("innerNavigate")){return;}this.fireInnerNavigate({text:p.text,href:p.href,originalId:p.originalId,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes});};
b.prototype._isRenderingInnerControl=function(){return this.getIgnoreLinkRendering()&&this._getInnerControl()!==null;};
b.prototype._getInnerControl=function(){var i=this.getAggregation("innerControl");if(i){return i;}var c=this.getCreateControlCallback();if(c){i=c();this.setAggregation("innerControl",i,true);return i;}return null;};
b.prototype._getSemanticObjectControllerOfParent=function(){var s;var p=this.getParent();while(p){if(p.getSemanticObjectController){s=p.getSemanticObjectController();if(s){this.setSemanticObjectController(s);break;}}p=p.getParent();}return s;};
b.prototype._updateEnabled=function(){var t=this;S.getDistinctSemanticObjects().then(function(s){var i=false;if(t.getSemanticObjectController()){var I=P.createArrayFromString(t.getSemanticObjectController().getIgnoredFields());i=I.indexOf(t.getFieldName())>-1;}var c=(t.getIgnoreLinkRendering()===false||t.getIgnoreLinkRendering()===true)?t.getIgnoreLinkRendering():false;var h=!(t.getContactAnnotationPath()===undefined);t.setEnabled(!i&&!c&&(S.hasDistinctSemanticObject(t.getSemanticObject(),s)||h));});};
return b;},true);
sap.ui.predefine('sap/ui/comp/navpopover/SmartLinkRenderer',['jquery.sap.global','sap/ui/core/Renderer','sap/m/LinkRenderer'],function(q,R,L){"use strict";var S=R.extend(L);
S.render=function(r,c){var b=true;if(c.getIgnoreLinkRendering()){var o=c._getInnerControl();if(o){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(o);r.write("</div>");b=false;}}if(b){L.render.apply(this,arguments);}};
S.writeText=function(r,c){if(!c.getUom()){r.writeEscaped(c.getText());return;}r.write("<span>"+q.sap.encodeHTML(c.getText())+"</span><span style='display:inline-block;min-width:2.5em;width:3.0em;text-align:start'>"+q.sap.encodeHTML(c.getUom())+"</span>");};
return S;},true);
sap.ui.predefine('sap/ui/comp/navpopover/Util',['sap/ui/comp/library','./Factory','./LinkData','sap/m/Link','sap/m/Text','sap/ui/layout/form/SimpleFormLayout','sap/m/Label','sap/ui/core/TitleLevel','sap/ui/core/Title','sap/ui/layout/form/SimpleForm','sap/m/Image'],function(C,F,L,c,T,S,d,e,f,g,I){"use strict";var U={getStorableAvailableActions:function(m){return m.filter(function(M){return M.key!==undefined;});},sortArrayAlphabetical:function(n){var l;try{l=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=='undefined'){var o=window.Intl.Collator(l,{numeric:true});n.sort(function(a,b){return o.compare(a,b);});}else{n.sort(function(a,b){return a.localeCompare(b,l,{numeric:true});});}}catch(E){}},retrieveNavigationTargets:function(s,a,A,o,b,m){var n={mainNavigation:undefined,ownNavigation:undefined,availableActions:[]};return new Promise(function(r){var x=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!x||!u){jQuery.sap.log.error("Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");return r(n);}var h=[s].concat(a);var p=h.map(function(i){return[{semanticObject:i,params:b?b[i]:undefined,appStateKey:A,ui5Component:o,sortResultsBy:"text"}];});x.getLinks(p).then(function(l){if(!l||!l.length){return r(n);}var j=x.hrefForExternal();if(j&&j.indexOf("?")!==-1){j=j.split("?")[0];}if(j){j+="?";}l[0][0].forEach(function(q){var t=u.parseShellHash(q.intent);var K=(t.semanticObject&&t.action)?t.semanticObject+"-"+t.action:undefined;var v=(q.tags&&q.tags.indexOf("superiorAction")>-1);if(q.intent.indexOf(j)===0){n.ownNavigation=new L({key:K,href:q.intent,text:q.text,visible:true,isSuperiorAction:v});return;}if(t.action&&(t.action==='displayFactSheet')){n.mainNavigation=new L({key:K,href:q.intent,text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_FACTSHEET"),visible:true,isSuperiorAction:v});return;}n.availableActions.push(new L({key:K,href:q.intent,text:q.text,visible:true,isSuperiorAction:v}));});if(!n.mainNavigation&&typeof m==="string"){n.mainNavigation=new L({text:m,visible:true});}var k=[];for(var i=1;i<h.length;i++){k=k.concat(l[i][0]);}k.forEach(function(q){var t=u.parseShellHash(q.intent);n.availableActions.push(new L({key:(t.semanticObject&&t.action)?t.semanticObject+"-"+t.action:undefined,href:q.intent,text:q.text,visible:true,isSuperiorAction:(q.tags&&q.tags.indexOf("superiorAction")>-1)}));});return r(n);},function(){jQuery.sap.log.error("'retrieveNavigationTargets' failed");return r(n);});});},retrieveSemanticObjectMapping:function(p,o,b){if(!p){return Promise.resolve(null);}if(!o||!o.getMetaModel()){return Promise.resolve(null);}var t=this;var m=o.getMetaModel();return new Promise(function(r){m.loaded().then(function(){var O=t._getEntityTypeNameOfBindingContext(b,m);var E=m.getODataEntityType(O);if(!E){return r(null);}var P=E.property.filter(function(h){return h.name===p;});if(P.length!==1){return r(null);}if(!P[0]["com.sap.vocabularies.Common.v1.SemanticObjectMapping"]){return r(null);}var s=t._getSemanticObjectMappingsOfProperty(P[0],t._getSemanticObjectsOfProperty(P[0]));var a={};for(var q in s){a[s[q].name]=s[q].mapping;}return r(a);});});},_getSemanticObjectsOfProperty:function(p){var s={};for(var a in p){var A=a.split("#")[0];var q=a.split("#")[1]||"";if(jQuery.sap.startsWith(A,"com.sap.vocabularies.Common.v1.SemanticObject")&&jQuery.sap.endsWith(A,"com.sap.vocabularies.Common.v1.SemanticObject")){s[q]={name:p[a]["String"],mapping:undefined};}}return s;},_getSemanticObjectMappingsOfProperty:function(p,s){var G=function(o){var m={};if(jQuery.isArray(o)){o.forEach(function(P){m[P.LocalProperty.PropertyPath]=P.SemanticObjectProperty.String;});}return m;};for(var a in p){var A=a.split("#")[0];var q=a.split("#")[1]||"";if(jQuery.sap.startsWith(A,"com.sap.vocabularies.Common.v1.SemanticObjectMapping")&&jQuery.sap.endsWith(A,"com.sap.vocabularies.Common.v1.SemanticObjectMapping")){if(s[q]){s[q].mapping=G(p[a]);}}}return s;},_getEntityTypeNameOfBindingContext:function(b,m){if(!b||!m){return null;}var M=m.getMetaContext(b);if(!M){return null;}var o=m.getObject(M.getPath());return o.namespace?o.namespace+"."+o.name:o.name;},retrieveContactAnnotationData:function(o,b,s){var t=this;return new Promise(function(r){if(!o||!o.getMetaModel()||s===undefined){return r({entitySet:undefined,path:undefined,contactAnnotation:undefined});}var m=o.getMetaModel();m.loaded().then(function(){var O=t._getEntityTypeNameOfBindingContext(b,m);var E=m.getODataEntityType(O);if(!E){return r({entitySet:undefined,path:undefined,contactAnnotation:undefined});}var a=m.getODataEntitySet(s);if(a){E=m.getODataEntityType(a.entityType);return r({entitySet:s,path:"",contactAnnotation:E["com.sap.vocabularies.Communication.v1.Contact"]});}var A=[];s.split("/").some(function(n){var h=m.getODataAssociationEnd(E,n);if(!h){return false;}A.push(n);E=m.getODataEntityType(h.type);});return r({entitySet:undefined,path:E["com.sap.vocabularies.Communication.v1.Contact"]?A.join("/"):undefined,contactAnnotation:E["com.sap.vocabularies.Communication.v1.Contact"]});});});},parseContactAnnotation:function(o){var a=o.contactAnnotation;if(!a||jQuery.isEmptyObject(a)){return{header:{},groups:[],expand:"",select:""};}var p=o.path?o.path+"/":"";var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var E=[o.path];var s=[];var G=[];var b={heading:r.getText("POPOVER_CONTACT_SECTION_TITLE"),elements:[]};if(a.photo){s.push(p+a.photo.Path);b.elements.push({valuePath:p+a.photo.Path,label:"",type:"image"});}if(a.fn){s.push(p+a.fn.Path);b.elements.push({valuePath:p+a.fn.Path,label:r.getText("POPOVER_CONTACT_SECTION_NAME"),type:sap.m.QuickViewGroupElementType.text});}if(a.role){s.push(p+a.role.Path);b.elements.push({valuePath:p+a.role.Path,label:r.getText("POPOVER_CONTACT_SECTION_ROLE"),type:sap.m.QuickViewGroupElementType.text});}if(a.title){s.push(p+a.title.Path);b.elements.push({valuePath:p+a.title.Path,label:r.getText("POPOVER_CONTACT_SECTION_JOBTITLE"),type:sap.m.QuickViewGroupElementType.text});}if(a.org){s.push(p+a.org.Path);b.elements.push({valuePath:p+a.org.Path,label:r.getText("POPOVER_CONTACT_SECTION_DEPARTMENT"),type:sap.m.QuickViewGroupElementType.text});}if(a.email){a.email.forEach(function(i){if(i.type&&i.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1){s.push(p+i.address.Path);b.elements.push({valuePath:p+i.address.Path,label:r.getText("POPOVER_CONTACT_SECTION_EMAIL"),type:sap.m.QuickViewGroupElementType.email});}});}if(a.tel){var h,m,P;a.tel.forEach(function(t){if(t.type&&t.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1){s.push(p+t.uri.Path);h={valuePath:p+t.uri.Path,label:r.getText("POPOVER_CONTACT_SECTION_FAX"),type:sap.m.QuickViewGroupElementType.phone};}else if(t.type&&t.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1){s.push(p+t.uri.Path);m={valuePath:p+t.uri.Path,label:r.getText("POPOVER_CONTACT_SECTION_MOBILE"),type:sap.m.QuickViewGroupElementType.phone};}else if(t.type&&t.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1){s.push(p+t.uri.Path);P={valuePath:p+t.uri.Path,label:r.getText("POPOVER_CONTACT_SECTION_PHONE"),type:sap.m.QuickViewGroupElementType.phone};}});if(P){b.elements.push(P);}if(m){b.elements.push(m);}if(h){b.elements.push(h);}}if(b.elements.length){G.push(b);}return{groups:G,expand:E.join(","),select:s.join(",")};},createContactDetailForms:function(G){if(!G.length){return[];}var a=[];G.forEach(function(o){if(!o.elements.length){return;}var b=new g({maxContainerCols:1,editable:false,layout:S.ResponsiveGridLayout});o.elements.forEach(function(E){var h=U._createControl(E);if(!h){return;}if(E.label){var l=new d({text:E.label,labelFor:h.getId()});b.addContent(l);}b.addContent(h);});if(b.getContent().length&&o.heading){b.insertContent(new f({text:o.heading,level:e.H2}),0);}a.push(b);});return a;},_createControl:function(G){switch(G.type){case"email":return new c({href:{path:G.valuePath,formatter:function(v){if(!v){return v;}return"mailto:"+v+(G.emailSubject?'?subject='+G.emailSubject:'');}},text:{path:G.valuePath},visible:{path:G.valuePath,formatter:function(v){return!!v;}}});case"phone":case"mobile":return new c({href:{path:G.valuePath,formatter:function(v){if(!v){return v;}return"tel:"+v;}},text:{path:G.valuePath},visible:{path:G.valuePath,formatter:function(v){return!!v;}}});case"image":var i=new I({src:{path:G.valuePath},visible:{path:G.valuePath,formatter:function(v){return!!v;}},decorative:false});i.addStyleClass("sapUiIcon");i.addStyleClass("navigationPopoverThumbnail");return i;default:return new T({text:{path:G.valuePath},visible:{path:G.valuePath,formatter:function(v){return!!v;}}});}}};return U;},true);
sap.ui.predefine('sap/ui/comp/navpopover/flexibility/changes/AddLink',['jquery.sap.global','sap/ui/fl/Utils'],function(q,U){"use strict";var A={};
A.applyChange=function(c,n,p){var C=c.getContent();if(q.isEmptyObject(C)){U.log.error("Change does not contain sufficient information to be applied");return false;}n.getAvailableActions().some(function(a){if(a.getKey()===C.key){p.modifier.setProperty(a,"visible",C.visible);n._updateAvailableAction(a,c.getLayer());return true;}});return true;};
A.completeChangeContent=function(c,s,p){if(q.isEmptyObject(s.content)){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.key){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(s.content.visible!==true){throw new Error("In oSpecificChangeInfo.content.select attribute should be 'true'");}c.setContent(s.content);};
A.discardChangesOfLayer=function(l,n){n._discardAvailableActions(l);};
return A;},true);
sap.ui.predefine('sap/ui/comp/navpopover/flexibility/changes/RemoveLink',['jquery.sap.global','sap/ui/fl/Utils'],function(q,U){"use strict";var R={};
R.applyChange=function(c,n,p){var C=c.getContent();if(q.isEmptyObject(C)){U.log.error("Change does not contain sufficient information to be applied");return false;}n.getAvailableActions().some(function(a){if(a.getKey()===C.key){p.modifier.setProperty(a,"visible",C.visible);n._updateAvailableAction(a,c.getLayer());return true;}});return true;};
R.completeChangeContent=function(c,s,p){if(q.isEmptyObject(s.content)){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.key){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(s.content.visible!==false){throw new Error("In oSpecificChangeInfo.content.select attribute should be 'false'");}c.setContent(s.content);};
R.discardChangesOfLayer=function(l,n){n._discardAvailableActions(l);};
return R;},true);
sap.ui.predefine('sap/ui/comp/odata/ChartMetadata',[],function(){"use strict";var u={"com.sap.vocabularies.UI.v1.ChartType/Column":"column","com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":"stacked_column","com.sap.vocabularies.UI.v1.ChartType/ColumnDual":"dual_column","com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual":"dual_stacked_column","com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":"100_stacked_column","com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual100":"100_dual_stacked_column","com.sap.vocabularies.UI.v1.ChartType/Bar":"bar","com.sap.vocabularies.UI.v1.ChartType/BarStacked":"stacked_bar","com.sap.vocabularies.UI.v1.ChartType/BarDual":"dual_bar","com.sap.vocabularies.UI.v1.ChartType/BarStackedDual":"dual_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/BarStacked100":"100_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/BarStackedDual100":"100_dual_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/Area":"line","com.sap.vocabularies.UI.v1.ChartType/AreaStacked":"stacked_column","com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":"100_stacked_column","com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":"bar","com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":"stacked_bar","com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":"100_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/Line":"line","com.sap.vocabularies.UI.v1.ChartType/LineDual":"dual_line","com.sap.vocabularies.UI.v1.ChartType/Combination":"combination","com.sap.vocabularies.UI.v1.ChartType/CombinationStacked":"stacked_combination","com.sap.vocabularies.UI.v1.ChartType/CombinationDual":"dual_combination","com.sap.vocabularies.UI.v1.ChartType/CombinationStackedDual":"dual_stacked_combination","com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStacked":"horizontal_stacked_combination","com.sap.vocabularies.UI.v1.ChartType/Pie":"pie","com.sap.vocabularies.UI.v1.ChartType/Donut":"donut","com.sap.vocabularies.UI.v1.ChartType/Scatter":"scatter","com.sap.vocabularies.UI.v1.ChartType/Bubble":"bubble","com.sap.vocabularies.UI.v1.ChartType/Radar":"line","com.sap.vocabularies.UI.v1.ChartType/HeatMap":"heatmap","com.sap.vocabularies.UI.v1.ChartType/TreeMap":"treemap","com.sap.vocabularies.UI.v1.ChartType/Waterfall":"waterfall","com.sap.vocabularies.UI.v1.ChartType/Bullet":"bullet","com.sap.vocabularies.UI.v1.ChartType/VerticalBullet":"vertical_bullet"};var m={"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1":"axis1","com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis2":"axis2","com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis3":"axis3"};var d={"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category":"category","com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series":"series"};var v=["AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"];var C={mCriticalityType:{},mImprovementDirectionType:{},getChartType:function(t){return u[t];},getAnnotationChartType:function(U){for(var c in u){if(u[c]===U){return c;}}},getMeasureRole:function(r){return m[r];},getDimensionRole:function(r){return d[r];},getCriticalityThresholds:function(){return v;},calculateConstantValue:function(t){var V=t?(t.Decimal||t.Int||t.String):undefined;return Number(V);},getCriticalityType:function(c){return C.mCriticalityType[c];},getImprovementDirectionType:function(i){return C.mImprovementDirectionType[i];},feedWithChartLibrary:function(c){if(!C.chartLibrary){C.chartLibrary=c;var a=c.coloring.CriticalityType;var I=c.coloring.ImprovementDirectionType;C.mCriticalityType={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":a.Neutral,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":a.Negative,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":a.Critical,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":a.Positive};C.mImprovementDirectionType={"com.sap.vocabularies.UI.v1.ImprovementDirectionType/Target":I.Target,"com.sap.vocabularies.UI.v1.ImprovementDirectionType/Maximize":I.Maximize,"com.sap.vocabularies.UI.v1.ImprovementDirectionType/Minimize":I.Minimize};}}};return C;},true);
sap.ui.predefine('sap/ui/comp/odata/CriticalityMetadata',[],function(){"use strict";var c={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":0,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":1,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":2,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":3};var C={0:"None",1:"Error",2:"Warning",3:"Success"};var m={0:"sap-icon://status-inactive",1:"sap-icon://status-negative",2:"sap-icon://status-critical",3:"sap-icon://status-positive"};var a={getCriticalityState:function(t){if(typeof t==="string"){t=c[t];}return C[t];},getCriticalityIcon:function(t){if(typeof t==="string"){t=c[t];}return m[t];},getShowCriticalityIcon:function(t){return t==="com.sap.vocabularies.UI.v1.CriticalityRepresentationType/WithoutIcon"?false:true;}};return a;},true);
sap.ui.predefine('sap/ui/comp/odata/MetadataAnalyser',['jquery.sap.global','sap/ui/model/odata/ODataModel','sap/ui/model/odata/ODataAnnotations','./ODataType'],function(q,O,a,b){"use strict";var f={"com.sap.vocabularies.Common.v1.FilterExpressionType/SingleInterval":"interval","com.sap.vocabularies.Common.v1.FilterExpressionType/MultiValue":"multi-value","com.sap.vocabularies.Common.v1.FilterExpressionType/SingleValue":"single-value"};var M=function(r){if(typeof r==="object"){this.oModel=r;}else{this._sResourceRootUri=r;}this._oMetadata=null;if(!this.oModel&&this._sResourceRootUri){this.oModel=new O(this._sResourceRootUri);}if(this.oModel){this._oMetaModel=this.oModel.getMetaModel();}if(this._oMetaModel){this._oMetadata=this._oMetaModel.getProperty("/");}if(this._oMetadata&&this._oMetadata.dataServices){this._oSchemaDefinition=this._oMetadata.dataServices.schema[0];}};
M.prototype.getNamespace=function(){if(this._oSchemaDefinition){return this._oSchemaDefinition.namespace;}};
M.prototype.getSchemaDefinition=function(){return this._oSchemaDefinition;};
M.prototype.getEntityContainerAttribute=function(A){var s=null,e;if(this._oMetaModel&&A){if(A.indexOf("sap:")<0){A="sap:"+A;}e=this._oMetaModel.getODataEntityContainer();s=e[A]||null;}return s;};
M.prototype.getEntityLabelByEntityTypeName=function(e){var E=this._getEntityDefinition(e),r,R="";if(E){r=E["com.sap.vocabularies.Common.v1.Label"];if(r&&r.String){R=r.String;}}return R;};
M.prototype._getEntityDefinition=function(e){var E=null;if(e){E=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e));}return E;};
M.prototype._getComplexTypeDefinition=function(c){var C=null;if(c){C=this._oMetaModel.getODataComplexType(this._getFullyQualifiedNameForEntity(c));}return C;};
M.prototype._getNameOfPropertyUsingComplexType=function(e,c){var C=this.getNamespace();if(e&&c&&C){var t=C+"."+c;var m=this._getEntityDefinition(e);if(m){var p=m.property;if(p&&p.length){var i=0;for(i=0;i<p.length;i++){var P=p[i];if(P&&P.type===t){return P.name;}}}}}return null;};
M.prototype.removeNamespace=function(s){var i,r=s;if(s){i=s.lastIndexOf(".")+1;}if(i>0){r=s.substring(i);}return r;};
M.prototype.getEntityTypeNameFromEntitySetName=function(e){var E=null,s=null;if(this._oMetaModel){E=this._oMetaModel.getODataEntitySet(e);if(E){s=E.entityType;}}return s;};
M.prototype.getEntitySetNameFromEntityTypeName=function(e){var Q,E,c,i,l,o;if(this._oMetaModel&&e){Q=this._getFullyQualifiedNameForEntity(e);E=this._oMetaModel.getODataEntityContainer();if(E&&Q){c=E.entitySet;l=c.length;for(i=0;i<l;i++){o=c[i];if(o.entityType===Q){break;}o=null;}if(o){return o.name;}}}return null;};
M.prototype.getKeysByEntitySetName=function(e){var k=null,E=null;if(!this._oMetaModel){return undefined;}E=this.getEntityTypeNameFromEntitySetName(e);if(E){k=this.getKeysByEntityTypeName(E);}return k;};
M.prototype.getKeysByEntityTypeName=function(e){var k=null,p=null,i,l=0,E=null;if(!this._oMetaModel){return undefined;}E=this._getEntityDefinition(e);if(E){if(E.key){p=E.key.propertyRef;if(p){l=p.length;k=[];for(i=0;i<l;i++){k.push(p[i].name);}}}}return k;};
M.prototype.getFieldsByEntitySetName=function(e){var F=null,E,s=null;if(!this._oMetaModel){return undefined;}E=this._oMetaModel.getODataEntitySet(e);if(E){s=E.entityType;}if(s){F=this.getFieldsByEntityTypeName(s);this._enrichEntitySetMetadata(F,E);}return F;};
M.prototype._enrichEntitySetMetadata=function(F,e){var l,o,n,N,r,m;n=this._getNonSortableFields(e);N=this._getNonFilterableFields(e);r=this._getRequiredFilterFields(e);m=this._getFilterExpressionRestriction(e);l=F.length;while(l--){o=F[l];o.sortable=!(n.indexOf(o.name)>-1);o.filterable=!(N.indexOf(o.name)>-1);o.requiredFilterField=(r.indexOf(o.name)>-1);o.filterRestriction=m[o.name];}};
M.prototype._extractPropertyPathsFromAnnotation=function(A,s){var p=[],c,l,P;if(A&&s){c=A[s];}if(c){l=c.length;while(l--){P=c[l].PropertyPath;if(P){p.push(P);}}}return p;};
M.prototype._getNonSortableFields=function(e){var s;if(e){s=e["Org.OData.Capabilities.V1.SortRestrictions"];}return this._extractPropertyPathsFromAnnotation(s,"NonSortableProperties");};
M.prototype._getNonFilterableFields=function(e){var F;if(e){F=e["Org.OData.Capabilities.V1.FilterRestrictions"];}return this._extractPropertyPathsFromAnnotation(F,"NonFilterableProperties");};
M.prototype._getRequiredFilterFields=function(e){var F;if(e){F=e["Org.OData.Capabilities.V1.FilterRestrictions"];}return this._extractPropertyPathsFromAnnotation(F,"RequiredProperties");};
M.prototype._getFilterExpressionRestriction=function(e){var F={},c,l,o,p,A;if(e){c=e["com.sap.vocabularies.Common.v1.FilterExpressionRestrictions"];if(c){l=c.length;while(l--){o=c[l];if(o){p=o.Property;A=o.AllowedExpressions;if(p&&A&&p.PropertyPath&&A.EnumMember){F[p.PropertyPath]=f[A.EnumMember];}}}}}return F;};
M.prototype._isFilterable=function(p,e){var n,F=!(p["sap:filterable"]==="false");if(F&&e){n=this._getNonFilterableFields(e);F=!(n.indexOf(p.name)>-1);}return F;};
M.prototype._isHiddenFilter=function(p){var h=false,r=p["com.sap.vocabularies.UI.v1.HiddenFilter"];if(r){h=true;}return h;};
M.prototype._isHidden=function(p){if(p["com.sap.vocabularies.UI.v1.Hidden"]){return true;}return false;};
M.prototype.getFieldsByEntityTypeName=function(e){var E;if(!this._oMetaModel){return undefined;}E=this._getEntityDefinition(e);return this._getFieldsByEntityDefinition(E);};
M.prototype.getFieldsByComplexTypeName=function(c,p){var C;if(!this._oMetaModel){return undefined;}C=this._getComplexTypeDefinition(c);return this._getFieldsByEntityDefinition(C,p);};
M.prototype.getAllEntityTypeNames=function(){if(!this._oMetaModel){return undefined;}var s=this._oSchemaDefinition;if(s.entityType&&s.entityType.length>0){var i=0;var r=[];for(i=0;i<s.entityType.length;i++){r.push(s.entityType[i].name);}return r;}return null;};
M.prototype.getFieldSemanticObjectMap=function(e){var o=this.getFieldsByEntitySetName(e);if(!o){return null;}var m={},i,l=o.length;for(i=0;i<l;i++){var F=o[i];var A=this.getSemanticObjectAnnotation(F.fullName);if(A&&A.semanticObject){m[F.name]=A.semanticObject;}}return m;};
M.prototype._getFieldsByEntityDefinition=function(e,p){var F=null,P=null,i=0,l=0,o,c;if(e){P=e.property;}if(P){F=[];l=P.length;for(i=0;i<l;i++){o=P[i];if(o){c=this._parseProperty(o,e,p);F.push(c);}}}return F;};
M.getDisplayFormat=function(p){var d=p["sap:display-format"];if(d){return d;}if(M.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsUpperCase"])){return"UpperCase";}};
M.getLinkDisplayFormat=function(p){if(M.isEmailAddress(p)){return"EmailAddress";}if(M.isPhoneNumber(p)){return"PhoneNumber";}if(M.isURL(p)){return"URL";}return"";};
M.getValueListMode=function(p){var v=p["sap:value-list"];if(v){return v;}if(M.isValueListWithFixedValues(p)){return"fixed-values";}return"";};
M.isTermTrue=function(t){return!!t&&(t.Bool==="true");};
M.isPropertyStringType=function(p){return!!p&&(p.type==="Edm.String");};
M.isTermDefaultTrue=function(t){if(t){return t.Bool?t.Bool!=="false":true;}return false;};
M.isNullable=function(p){return!(p&&(p.nullable==="false"));};
M.isDigitSequence=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsDigitSequence"]);};
M.isEmailAddress=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Communication.v1.IsEmailAddress"]);};
M.isPhoneNumber=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Communication.v1.IsPhoneNumber"]);};
M.isURL=function(p){return M.isPropertyStringType(p)&&(M.isTermDefaultTrue(p["Org.OData.Core.V1.IsURL"])||M.isTermDefaultTrue(p["Org.OData.Core.V1.IsUrl"]));};
M.isValueList=function(p){var t="com.sap.vocabularies.Common.v1.ValueList";return!!(p&&(p["sap:value-list"]||p[t]));};
M.isValueListWithFixedValues=function(p){var t="com.sap.vocabularies.Common.v1.ValueListWithFixedValues";return M.isTermTrue(p[t]);};
M.prototype._parseProperty=function(p,e,P){var F=q.extend({},p),r;r=p["com.sap.vocabularies.Common.v1.Label"];if(r){F.fieldLabel=r.String;}r=p["com.sap.vocabularies.Common.v1.QuickInfo"];if(r){F.quickInfo=r.String;}F.displayFormat=M.getDisplayFormat(p);F.isDigitSequence=M.isDigitSequence(p);F.isURL=M.isURL(p);F.isEmailAddress=M.isEmailAddress(p);F.isPhoneNumber=M.isPhoneNumber(p);F.aggregationRole=p["sap:aggregation-role"];r=p["Org.OData.Measures.V1.ISOCurrency"];if(r){F.isCurrencyField=true;F.isMeasureField=true;F.unit=r.Path;}r=p["Org.OData.Measures.V1.Unit"];if(r){F.isMeasureField=true;F.unit=r.Path;}r=p["com.sap.vocabularies.Common.v1.Text"];if(r){F.description=r.Path;F.displayBehaviour=this.getTextArrangementValue(r);}r=p["sap:filterable"];F.filterable=r!=="false";F.filterRestriction=p["sap:filter-restriction"];r=p["sap:required-in-filter"];F.requiredFilterField=r==="true";r=p["sap:sortable"];F.sortable=r!=="false";r=p["com.sap.vocabularies.UI.v1.IsImageURL"]||p["com.sap.vocabularies.UI.v1.IsImageUrl"];F.isImageURL=M.isTermDefaultTrue(r);r=p["com.sap.vocabularies.Common.v1.FieldControl"];F.visible=!(r&&r.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden");F.entityName=e.name;F.parentPropertyName=P;F.fullName=this._getFullyQualifiedNameForField(p.name,e);F.hidden=this._isHidden(p);F.hiddenFilter=this._isHiddenFilter(p)||F.hidden;if(p["defaultValue"]!=="undefined"){F.defaultPropertyValue=p["defaultValue"];}r=p["com.sap.vocabularies.Common.v1.FilterDefaultValue"];if(r){F.defaultFilterValue=this._getDefaultValues(p.type,r,p);}return F;};
M.prototype._getDefaultValues=function(t,r,p){var v=null,d=b.getDefaultValueTypeName(t);if(r[d]){v=r[d];}else{q.sap.log.error("default value for "+p.name+" expected through the property "+d);}return v;};
M.prototype.extractNavigationPropertyField=function(p,e){var E,m,o,P,s,n,c,F=null;if(e&&p){E="/"+e+"/";P=p.split("/");s=P.pop();n=P.join("/");if(n&&s){m=this._oMetaModel.getMetaContext(E+n);if(m){c=this._oMetaModel.getProperty(m.getPath());}}if(c){o=this._oMetaModel.getODataProperty(c,s);}if(o){F=this._parseProperty(o,c,n);}}return F;};
M.prototype.getAllFilterableFieldNamesByEntityTypeName=function(e){var g,i,c,j,d,r,G;r=[];g=this.getAllFilterableFieldsByEntityTypeName(e);if(g&&g.length){c=g.length;for(i=0;i<c;i++){G=g[i];if(G.fields&&G.fields.length){d=G.fields.length;for(j=0;j<d;j++){r.push(G.fields[j].name);}}}}return r;};
M.prototype._getAllFilterableFieldsByEntity=function(e,i,I,c){var F=[],E,o,A,n,r,s,S,d;if(!this._oMetaModel||!e){return undefined;}if(i){o=this._oMetaModel.getODataEntitySet(e);if(o){E=this._getEntityDefinition(o.entityType);}}else{E=this._getEntityDefinition(e);}if(E){F.push(this._getFilterableFieldsFromEntityDefinition(E,undefined,o));A=this._getFilterableAssociations(E,o);for(n in A){if(!c||(c.indexOf(n)>-1)){d=A[n];if(i){r=this._oMetaModel.getODataAssociationSetEnd(E,n);if(r.entitySet){S=this._oMetaModel.getODataEntitySet(r.entitySet);}}s=this._getEntityDefinition(d);if(s){if(I&&(s["sap:semantics"]==="parameters")){continue;}F.push(this._getFilterableFieldsFromEntityDefinition(s,n,S));}}}}return F;};
M.prototype.getAllFilterableFieldsByEntitySetName=function(e,i,c){if(!this._oMetaModel){return undefined;}return this._getAllFilterableFieldsByEntity(e,true,i,c);};
M.prototype.getAllFilterableFieldsByEntityTypeName=function(e){if(!this._oMetaModel){return undefined;}return this._getAllFilterableFieldsByEntity(e);};
M.prototype._getFilterableFieldsFromEntityDefinition=function(e,p,E){var F={},c=[],P=null,o,i,l,d=null;if(!this._oMetaModel||!e){return undefined;}o=e["com.sap.vocabularies.Common.v1.Label"];if(o){F.groupLabel=o.String;}F.groupEntityName=e.name;F.groupName=p;P=this._getFieldsByEntityDefinition(e,p);if(E){this._enrichEntitySetMetadata(P,E);}l=P.length;for(i=0;i<l;i++){d=P[i];if(d.visible&&d.filterable){c.push(d);}}F.fields=c;return F;};
M.prototype._getFullyQualifiedNameForField=function(F,e){var n,E,r=F;if(e){n=e.namespace;E=e.name;}if(n&&E){r=n+"."+E+"/"+F;}return r;};
M.prototype.getFieldNameByFullyQualifiedFieldName=function(F){var r,n;r=this.removeNamespace(F);n=r.indexOf("/");r=r.substring(n+1);return r;};
M.prototype._getFilterableAssociations=function(e,E){var F={},n=null,N=null,i,l=0,o=null;if(!this._oMetaModel||!e){return undefined;}n=e.navigationProperty;if(n&&n.length){l=n.length;for(i=0;i<l;i++){N=n[i];if(!this._isFilterable(N,E)||this._isHiddenFilter(N)){continue;}o=this._oMetaModel.getODataAssociationEnd(e,N.name);if(!o||o.type===(e.namespace+"."+e.name)){continue;}if(o.multiplicity==="1"||o.multiplicity==="0..1"){if(F[N.name]===undefined){F[N.name]=o.type;}}}}return F;};
M.prototype.getValueListAnnotationLazy=function(p){var P,A={additionalAnnotations:[]},r,s,c,t,d,o,Q;P=new Promise(function(R,e){if(p&&this._oMetaModel){c=p.split("/");t=this._oMetaModel.getODataEntityType(c[0])||this._oMetaModel.getODataComplexType(c[0]);s=c[1];d=this._oMetaModel.getODataProperty(t,s,true);if(d){o=this._oMetaModel.createBindingContext(d);this._oMetaModel.getODataValueLists(o).then(function(v){for(Q in v){r={annotation:v[Q]};if(r.annotation&&!r.annotation["PresentationVariantQualifier"]){this._enrichValueHelpAnnotation(r,s);if(!Q){A.primaryValueListAnnotation=r;}else{r.qualifier=Q;A.additionalAnnotations.push(r);}}}R(A);}.bind(this),e);return;}}e();}.bind(this));return P;};
M.prototype.getValueListAnnotationForFunctionImport=function(v,p){var A={additionalAnnotations:[]},r,Q;for(Q in v){r={annotation:v[Q]};if(r.annotation){this._enrichValueHelpAnnotation(r,p);if(!Q){A.primaryValueListAnnotation=r;}else{r.qualifier=Q;A.additionalAnnotations.push(r);}}}return A;};
M.prototype.getValueListAnnotation=function(p){var A={additionalAnnotations:[]},r,P,c,t,o,Q;if(p&&this._oMetaModel){c=p.split("/");t=this._oMetaModel.getODataEntityType(c[0])||this._oMetaModel.getODataComplexType(c[0]);o=this._oMetaModel.getODataProperty(t,c[1]);if(o){P=o.name;for(var s in o){if(s==="com.sap.vocabularies.Common.v1.ValueList"||s.indexOf("com.sap.vocabularies.Common.v1.ValueList#")>-1){Q=null;r={annotation:o[s]};c=s.split("#");if(c.length===2){Q=c[1];}if(r.annotation){this._enrichValueHelpAnnotation(r,P);if(!Q){A.primaryValueListAnnotation=r;}else{r.qualifier=Q;A.additionalAnnotations.push(r);}}}}}}return A;};
M.prototype._enrichValueHelpAnnotation=function(A,p){var r,R,e,k=[],K,I={},o={},c,d,F=[],v=[],g,P,V,l,h,L=0,i=0,j=0;if(A&&A.annotation){r=A.annotation;if(r){R=r["SearchSupported"];A.isSearchSupported=R?R.Bool==="true":false;R=r["CollectionPath"];if(R){A.valueListEntitySetName=R.String;if(this._oMetaModel){e=this._oMetaModel.getODataEntitySet(A.valueListEntitySetName);}if(e){A.valueListEntityName=e.entityType;A.semantics=e["sap:semantics"];k=this.getKeysByEntitySetName(e.name);F=this.getFieldsByEntitySetName(e.name);}}R=r["Label"];if(R){A.valueListTitle=R.String;}g=r["Parameters"];if(F&&g){L=g.length;}for(i=0;i<L;i++){h=g[i];V=undefined;l=undefined;P=h["ValueListProperty"];if(P){V=P.String;}P=h["LocalDataProperty"];if(P){l=P.PropertyPath;}c=false;if(h.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||h.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterIn"){c=true;}d=false;if(h.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||h.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterOut"){d=true;}if(c){I[l]=V;}if(d){o[l]=V;}if(d||h.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"){j=F.length;while(j--){if(F[j].name===V){v.push(F[j]);break;}}}if(!K&&d&&l===p){K=V;}}}A.inParams=I;A.outParams=o;A.fields=F;A.valueListFields=v;A.keys=k;A.keyField=K;A.descriptionField=this.getDescriptionFieldName(A.keyField,A.valueListEntitySetName);}};
M.prototype.getDescriptionFieldName=function(k,e){var F,i=0,l,o,d;if(typeof k==="object"){o=k;}else{F=this.getFieldsByEntitySetName(e);if(F){l=F.length;for(i=0;i<l;i++){o=F[i];if(o.name===k){break;}o=null;}}}if(o&&o["com.sap.vocabularies.Common.v1.Text"]){d=o["com.sap.vocabularies.Common.v1.Text"].Path;}return d;};
M.prototype.getIsSearchSupported=function(A){var i=false,p;if(A){p=A.SearchSupported;if(p&&p.Bool==="true"){i=true;}}return i;};
M.prototype.getValueListSemantics=function(A){var e,E,s;if(A){e=A["CollectionPath"]?A["CollectionPath"].String:undefined;}if(e){E=this._oMetaModel.getODataEntitySet(e);if(E){s=E["sap:semantics"];}}return s;};
M.prototype.getLineItemAnnotation=function(p,Q){var e,t,A,r;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){t="com.sap.vocabularies.UI.v1.LineItem";if(Q){t+="#"+Q;}A=e[t];if(A){r={annotation:A};this._enrichAnnotationWithUIDataField(r,A);}}}return r;};
M.prototype.isSemanticAggregation=function(p){var e;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){return e["sap:semantics"]==="aggregate";}}return false;};
M.prototype.getPresentationVariantAnnotation=function(p,Q){var e,t,A,l,i,r,L,c,I;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){t="com.sap.vocabularies.UI.v1.PresentationVariant";if(Q){t+="#"+Q;}A=e[t];if(A){r={annotation:A,requestAtLeastFields:[],sortOrderFields:[],groupByFields:[],maxItems:undefined};if(A.Visualizations){l=A.Visualizations.length;for(i=0;i<l;i++){I=A.Visualizations[i].AnnotationPath;if(!L&&(I==="@com.sap.vocabularies.UI.v1.LineItem"||I.indexOf("@com.sap.vocabularies.UI.v1.LineItem#")>-1)){L=e[I.substring(1)];r.lineItemAnnotation={annotation:L};this._enrichAnnotationWithUIDataField(r.lineItemAnnotation,L);}else if(!c&&(I==="@com.sap.vocabularies.UI.v1.Chart"||I.indexOf("@com.sap.vocabularies.UI.v1.Chart#")>-1)){c=e[I.substring(1)];r.chartAnnotation={annotation:c,semantics:e["sap:semantics"]};this._enrichChartAnnotation(r.chartAnnotation,c);}if(L&&c){break;}}}if(A.RequestAtLeast){l=A.RequestAtLeast.length;for(i=0;i<l;i++){r.requestAtLeastFields.push(A.RequestAtLeast[i].PropertyPath);}}if(A.SortOrder){l=A.SortOrder.length;for(i=0;i<l;i++){r.sortOrderFields.push({name:A.SortOrder[i].Property.PropertyPath,descending:A.SortOrder[i].Descending?A.SortOrder[i].Descending.Bool==="true":false});}}if(A.GroupBy){l=A.GroupBy.length;for(i=0;i<l;i++){r.groupByFields.push(A.GroupBy[i].PropertyPath);}}if(A.MaxItems){r.maxItems=A.MaxItems.Int;}}}}return r;};
M.prototype._enrichChartAnnotation=function(A,o){var i,l,c;if(A&&o){A.measureFields=[];A.dimensionFields=[];A.measureAttributes={};A.dimensionAttributes={};if(o.ChartType&&o.ChartType.EnumMember){A.chartType=o.ChartType.EnumMember;}if(o.Measures){l=o.Measures.length;for(i=0;i<l;i++){A.measureFields.push(o.Measures[i].PropertyPath);}}if(o.MeasureAttributes){l=o.MeasureAttributes.length;for(i=0;i<l;i++){c=o.MeasureAttributes[i];if(c.Measure){A.measureAttributes[c.Measure.PropertyPath]={role:c.Role?c.Role.EnumMember:null,dataPoint:c.DataPoint?c.DataPoint.AnnotationPath:null};}}}if(o.Dimensions){l=o.Dimensions.length;for(i=0;i<l;i++){A.dimensionFields.push(o.Dimensions[i].PropertyPath);}}if(o.DimensionAttributes){l=o.DimensionAttributes.length;for(i=0;i<l;i++){c=o.DimensionAttributes[i];if(c.Dimension){A.dimensionAttributes[c.Dimension.PropertyPath]={role:c.Role?c.Role.EnumMember:null};}}}}};
M.prototype.getChartAnnotation=function(p,Q){var e,A,r,t;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){t="com.sap.vocabularies.UI.v1.Chart";if(Q){t+="#"+Q;}A=e[t];if(A){r={annotation:A,semantics:e["sap:semantics"]};this._enrichChartAnnotation(r,A);}}}return r;};
M.prototype.getDataPointAnnotation=function(p){var e,P,Q,c,d,r={};if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){for(P in e){if(P==="com.sap.vocabularies.UI.v1.DataPoint"||P.indexOf("com.sap.vocabularies.UI.v1.DataPoint#")>-1){Q=null;d=e[P];c=P.split("#");if(c.length===2){Q=c[1];}if(d){if(Q){if(!r.additionalAnnotations){r.additionalAnnotations={};}r.additionalAnnotations[Q]=d;}else{r.primaryAnnotation=d;}}}}}}return r;};
M.prototype.getFieldGroupAnnotation=function(p){var e,Q,P,r,A,R,c=[];if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){for(var s in e){if(s==="com.sap.vocabularies.UI.v1.FieldGroup"||s.indexOf("com.sap.vocabularies.UI.v1.FieldGroup#")>-1){Q=null;A=e[s];P=s.split("#");if(P.length===2){Q=P[1];}if(A){R={annotation:A};if(Q){R.groupName=Q;}r=A["Label"];if(r){R.groupLabel=r.String;}r=A["Data"];if(r){this._enrichAnnotationWithUIDataField(R,r);}c.push(R);}}}}}return c;};
M.prototype.getFieldGroupsByFilterFacetsAnnotation=function(p){var e,P,Q,r,R,F=this.getFieldGroupAnnotation(p);R=F;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){for(var s in e){if(s==="com.sap.vocabularies.UI.v1.FilterFacets"||s.indexOf("com.sap.vocabularies.UI.v1.FilterFacets#")>-1){R=[];r=e[s];if(r){for(var i=0;i<r.length;i++){P=r[i].Target.AnnotationPath.split("#");if(P.length===2){Q=P[1];}if(Q){F.some(function(o){if(o.groupName===Q){if(r[i].Label){o.groupLabel=r[i].Label.String;}R.push(o);return true;}return false;});}}}}}}}return R;};
M.prototype._enrichAnnotationWithUIDataField=function(A,r){var F=[],u={},l={},I={},c={},p,s,P,L=0,i=0;if(A&&r){L=r.length;F=[];l={};for(i=0;i<L;i++){P=r[i];if(P&&(P.RecordType==="com.sap.vocabularies.UI.v1.DataField"||P.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){s=null;p=P["Value"];if(p){s=p.Path;}if(s){F.push(s);p=P["Url"];if(p){u[s]=this._extractURLInfo(p);}p=P["Label"];if(p&&p.String){l[s]=p.String;}I[s]=this._getImportanceAnnotation(P);p=P["Criticality"];if(p){c[s]=this._extractCriticalityInfo(p,P);}}}}A.fields=F;A.urlInfo=u;A.labels=l;A.importance=I;A.criticality=c;}};
M.prototype._extractCriticalityInfo=function(c,r){var R,C;if(c.Path||c.EnumMember){R={};R["path"]=c.Path;R["criticalityType"]=c.EnumMember;C=r["CriticalityRepresentation"];if(C&&C.EnumMember){R["criticalityRepresentationType"]=C.EnumMember;}}return R;};
M.prototype._extractURLInfo=function(p){var r,P,l,o;if(p){if(p.Apply&&p.Apply.Name==="odata.fillUriTemplate"){r={urlTarget:undefined,parameters:[]};if(!this._oDummyAnnotationHelperContext){this._oDummyAnnotationHelperContext=this._oMetaModel.createBindingContext("/");q.sap.require("sap.ui.model.odata.AnnotationHelper");}if(this._oDummyAnnotationHelperContext){r.urlTarget=sap.ui.model.odata.AnnotationHelper.format(this._oDummyAnnotationHelperContext,p);}P=p.Apply.Parameters;l=P&&P.length?P.length:0;while(l--){o=P[l];if(o&&o.Type==="LabeledElement"&&o.Value&&o.Value.Path){r.parameters.push(o.Value.Path);}}}else if(p.Path){r={urlPath:p.Path};}}return r;};
M.prototype.getSelectionVariantAnnotation=function(p){var e,A,Q,r=[],P;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){for(var s in e){if(s==="com.sap.vocabularies.UI.v1.SelectionVariant"||s.indexOf("com.sap.vocabularies.UI.v1.SelectionVariant#")>-1){Q="";A=e[s];P=s.split("#");if(P.length===2){Q=P[1];}if(A){r.push({qualifier:Q,annotation:A});}}}}}return r;};
M.prototype.getSelectionFieldsAnnotation=function(p){var e,A,l,i,r;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){A=e["com.sap.vocabularies.UI.v1.SelectionFields"];if(A){r={annotation:A,selectionFields:[]};l=A.length;for(i=0;i<l;i++){r.selectionFields.push(A[i].PropertyPath);}}}}return r;};
M.prototype.getSemanticKeyAnnotation=function(p){var e,A,l,i,r;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){A=e["com.sap.vocabularies.Common.v1.SemanticKey"];if(A){r={annotation:A,semanticKeyFields:[]};l=A.length;for(i=0;i<l;i++){r.semanticKeyFields.push(A[i].PropertyPath);}}}}return r;};
M.prototype._getImportanceAnnotation=function(p){var i=null,r;r=p["com.sap.vocabularies.UI.v1.Importance"];if(r){i=r.EnumMember;}switch(i){case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":return"Medium";case"com.sap.vocabularies.UI.v1.ImportanceType/Low":return"Low";default:return"High";}};
M.prototype.getTextArrangementValue=function(p){var P,t,o,A,d;if(p&&this._oMetaModel){if(typeof(p)==="string"){p=this._getFullyQualifiedNameForEntity(p);P=p.split("/");if(P.length>1){t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);o=this._oMetaModel.getODataProperty(t,P[1]);}else{o=this._oMetaModel.getODataEntityType(p)||this._oMetaModel.getODataComplexType(p);}}else{o=p;}if(o){A=o["com.sap.vocabularies.UI.v1.TextArrangement"];}if(A){switch(A.EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":d="descriptionAndId";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":d="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":d="idOnly";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":d="descriptionOnly";break;default:d=undefined;break;}}}return d;};
M.prototype.getSemanticObjectAnnotation=function(p){var P,t,o,A;if(p&&this._oMetaModel){P=p.split("/");t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);o=this._oMetaModel.getODataProperty(t,P[1]);if(o){A=o["com.sap.vocabularies.Common.v1.SemanticObject"];}return this._prepareSemanticObjectAnnotationFromProperty(A);}return null;};
M.prototype.getSemanticObjectsFromAnnotation=function(p){if(!p||!this._oMetaModel){return null;}var P=p.split("/");var t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);return M.getSemanticObjectsFromProperty(this._oMetaModel.getODataProperty(t,P[1]));};
M.getSemanticObjectsFromProperty=function(p){var s={defaultSemanticObject:undefined,additionalSemanticObjects:[]};for(var A in p){if(A==="com.sap.vocabularies.Common.v1.SemanticObject"){s.defaultSemanticObject=p[A]["String"];}else if(q.sap.startsWith(A,"com.sap.vocabularies.Common.v1.SemanticObject#")){s.additionalSemanticObjects.push(p[A]["String"]);}}return(s.defaultSemanticObject||s.additionalSemanticObjects.length>0)?s:undefined;};
M.prototype.getSemanticObjectAnnotationFromProperty=function(p){var A;if(p){A=p["com.sap.vocabularies.Common.v1.SemanticObject"];return this._prepareSemanticObjectAnnotationFromProperty(A);}return null;};
M.prototype._prepareSemanticObjectAnnotationFromProperty=function(A){var r,R;if(A){r=A["String"];if(r){R={annotation:A};R.semanticObject=r;}}return R;};
M.prototype._getFullyQualifiedNameForEntity=function(e){var n,r;if(!e){return undefined;}if(e.indexOf(".")>-1){return e;}n=this.getNamespace();if(n&&!(e.indexOf(n)>-1)){r=n+"."+e;}else{r=e;}return r;};
M.prototype.destroy=function(){this.oModel=null;this._oMetaModel=null;this._oMetadata=null;this._oSchemaDefinition=null;this._sResourceRootUri=null;this.bIsDestroyed=true;this._oDummyAnnotationHelperContext=null;};
return M;},true);
sap.ui.predefine('sap/ui/comp/odata/ODataModelUtil',["sap/ui/model/odata/v2/ODataModel"],function(O){"use strict";var a={handleModelInit:function(s,m){var l=false,M;if(s&&!s._bMetaModelLoadAttached&&m){M=s.getModel();if(M){if(M.getMetadata()&&M instanceof sap.ui.model.odata.v2.ODataModel){l=true;}else if(M.bLoadMetadataAsync||(M.getServiceMetadata&&!M.getServiceMetadata())){l=true;}s._bMetaModelLoadAttached=true;if(l&&M.getMetaModel()&&M.getMetaModel().loaded){M.getMetaModel().loaded().then(m.bind(s));}else{m.apply(s);}}}}};return a;},true);
sap.ui.predefine('sap/ui/comp/odata/ODataType',['sap/ui/model/odata/type/Boolean','sap/ui/model/odata/type/Byte','sap/ui/model/odata/type/DateTime','sap/ui/model/odata/type/DateTimeOffset','sap/ui/model/odata/type/Decimal','sap/ui/model/odata/type/Double','sap/ui/model/odata/type/Single','sap/ui/model/odata/type/Guid','sap/ui/model/odata/type/Int16','sap/ui/model/odata/type/Int32','sap/ui/model/odata/type/Int64','sap/ui/model/odata/type/SByte','sap/ui/model/odata/type/String','sap/ui/model/odata/type/Time'],function(B,a,D,b,c,d,S,G,I,e,f,g,h,T){"use strict";var u={"Edm.Boolean":B,"Edm.Byte":a,"Edm.DateTime":D,"Edm.DateTimeOffset":b,"Edm.Decimal":c,"Edm.Double":d,"Edm.Float":S,"Edm.Guid":G,"Edm.Int16":I,"Edm.Int32":e,"Edm.Int64":f,"Edm.SByte":g,"Edm.Single":S,"Edm.String":h,"Edm.Time":T};var m={"Edm.Boolean":"Boolean","Edm.Byte":"Byte","Edm.DateTime":"DateTime","Edm.DateTimeOffset":"DateTimeOffset","Edm.Decimal":"Decimal","Edm.Double":"Double","Edm.Float":"Float","Edm.Guid":"Guid","Edm.Int16":"Int16","Edm.Int32":"Int32","Edm.Int64":"Int64","Edm.SByte":"SByte","Edm.Single":"Single","Edm.String":"String","Edm.Time":"Time"};var n={"Edm.Decimal":true,"Edm.Double":true,"Edm.Float":true,"Edm.Int16":true,"Edm.Int32":true,"Edm.Int64":true,"Edm.Single":true};var i={"Edm.DateTime":true,"Edm.DateTimeOffset":true,"Edm.Time":true};var O={getType:function(t,F,C){var o=null,_;_=u[t];if(_){o=new _(F,C);}return o;},isNumeric:function(t){return n[t]?true:false;},isDateOrTime:function(t){return i[t]?true:false;},getDefaultValueTypeName:function(t){return m[t];}};return O;},true);
sap.ui.predefine('sap/ui/comp/personalization/BaseController',['sap/ui/base/ManagedObject','./Util'],function(M,U){"use strict";
var B=M.extend("sap.ui.comp.personalization.BaseController",{metadata:{"abstract":true,library:"sap.ui.comp",properties:{type:{type:"string",group:"Misc",defaultValue:null},model:{type:"sap.ui.model.json.JSONModel",group:"Misc",defaultValue:null},persistentDataRestore:{type:"object",group:"Misc",defaultValue:null,visibility:"hidden"},ignoreColumnKeys:{type:"object",group:"Misc",defaultValue:[],visibility:"hidden"},columnHelper:{type:"sap.ui.comp.personalization.ColumnHelper",defaultValue:null,visibility:"hidden"}},associations:{table:{type:"sap.ui.core.Control",multiple:false}},events:{beforePotentialTableChange:{},afterPotentialTableChange:{}}}});
B.prototype.init=function(){this._aColumnKeys=[];};
B.prototype.setModelFunction=function(){var t=this;return function(){if(!this.getModel("$sapmP13nPanel")){this.setModel(t.getModel("$sapuicomppersonalizationBaseController"),"$sapmP13nPanel");}};};
B.prototype.getTable=function(){var t=this.getAssociation("table");if(typeof t==="string"){t=sap.ui.getCore().byId(t);}return t;};
B.prototype.createPersistentStructure=function(i){i=i||[];var p={};p[this.getType()]={};p[this.getType()][this.getItemType()]=i;return p;};
B.prototype.createTransientStructure=function(i){i=i||[];var t={};t[this.getType()]={};t[this.getType()].items=i;return t;};
B.prototype.getItemType=function(){return this.getType()+"Items";};
B.prototype.getPersistentData=function(){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var p={};if(!d.persistentData[this.getType()]){p=this.createPersistentStructure();}else{p[this.getType()]=d.persistentData[this.getType()];}return p;};
B.prototype.setPersistentData=function(d){var D=this.getModel("$sapuicomppersonalizationBaseController").getData();D.persistentData[this.getType()]=d[this.getType()];};
B.prototype.getPersistentDataItems=function(){return this.getPersistentData()[this.getType()][this.getItemType()];};
B.prototype.getTransientData=function(){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var t={};if(!d.transientData[this.getType()]){t=this.createTransientStructure();}else{t[this.getType()]=d.transientData[this.getType()];}return t;};
B.prototype.setTransientData=function(d){var D=this.getModel("$sapuicomppersonalizationBaseController").getData();D.transientData[this.getType()]=d[this.getType()];};
B.prototype.initializeModel=function(m){this.setModel(m,"$sapuicomppersonalizationBaseController");this.setTransientData(this.getTransientData());this.setPersistentData(this.getPersistentData());};
B.prototype.getColumnMap=function(o){return o?this.getColumnHelper().getColumnMapOfValidColumnKeys(this.getType(),this.getIgnoreColumnKeys()):this.getColumnHelper().getColumnMap();};
B.prototype.createTableRestoreJson=function(c){this._aColumnKeys=c;this.setPersistentDataRestore(this._getTable2JsonRestore(c));};
B.prototype.getTableRestoreJson=function(){return U.copy(this.getPersistentDataRestore());};
B.prototype.reducePersistentModel=function(){var t=this.getTable();if(!t){return;}var i=[];var p=this.getPersistentData();p[this.getType()][this.getItemType()].forEach(function(I){if(this._aColumnKeys.indexOf(I.columnKey)>-1){i.push(I);}},this);p[this.getType()][this.getItemType()]=i;this.setPersistentData(p);};
B.prototype._getTable2Json=function(){};
B.prototype._getTable2JsonRestore=function(c){return this._getTable2Json();};
B.prototype.syncTable2PersistentModel=function(){this.setPersistentData(this._getTable2Json());};
B.prototype.syncTable2TransientModel=function(){};
B.prototype.getPanel=function(){};
B.prototype.onAfterSubmit=function(p){this.syncJsonModel2Table(this.getModel("$sapuicomppersonalizationBaseController").getData().persistentData);};
B.prototype.onAfterReset=function(p){};
B.prototype.syncJsonModel2Table=function(j){};
B.prototype.getChangeType=function(p,P){};
B.prototype.getChangeData=function(p,P){};
B.prototype.getUnionData=function(p,P){};
B.prototype.determineNeededColumnKeys=function(p){var r={};r[this.getType()]=[];if(!p||!p[this.getType()]||!p[this.getType()][this.getItemType()]){return r;}p[this.getType()][this.getItemType()].forEach(function(m){r[this.getType()].push(m.columnKey);},this);return r;};
B.prototype.exit=function(){this._aColumnKeys=null;};
return B;},true);
sap.ui.predefine('sap/ui/comp/personalization/ChartWrapper',['jquery.sap.global','sap/ui/core/Element'],function(q,E){"use strict";
var C=E.extend("sap.ui.comp.personalization.ChartWrapper",{
constructor:function(i,s){E.apply(this,arguments);},
metadata:{library:"sap.ui.comp",properties:{externalFilters:{type:"sap.m.P13nFilterItem[]",defaultValue:[]}},aggregations:{columns:{type:"sap.ui.comp.personalization.ColumnWrapper",multiple:true,singularName:"column"}},associations:{chart:{type:"sap.chart.Chart",multiple:false}},events:{externalFiltersSet:{parameters:{filters:{type:"sap.m.P13nFilterItem[]"}}}}}
});
C.prototype.getChartObject=function(){var c=this.getAssociation("chart");if(typeof c==="string"){c=sap.ui.getCore().byId(c);}return c;};
C.prototype.getDomRef=function(){var c=this.getChartObject();return c.getDomRef();};
C.prototype.setExternalFilters=function(f){f=this.validateProperty("externalFilters",f);this.setProperty("externalFilters",f,true);this.fireExternalFiltersSet({filters:f});return this;};
return C;},true);
sap.ui.predefine('sap/ui/comp/personalization/ColumnHelper',['jquery.sap.global','sap/ui/base/ManagedObject','./Util','./ColumnWrapper'],function(q,M,U,C){"use strict";
var a=M.extend("sap.ui.comp.personalization.ColumnHelper",{
constructor:function(i,s){M.apply(this,arguments);},
metadata:{properties:{callbackOnSetVisible:{type:"object",defaultValue:null},callbackOnSetSummed:{type:"object",defaultValue:null}}}
});
a.prototype.init=function(){this._oColumnKey2ColumnMap={};this._oColumnKeyIsMonkeyPatched={};this._oStoredColumnMapForColumnKeys={};};
a.prototype.addColumnMap=function(c){if(!c){return;}for(var s in c){this._addColumnToMap(s,c[s]);}};
a.prototype.addColumnsToMap=function(c){if(!c){return;}c.forEach(function(o){var s=U.getColumnKey(o);this._addColumnToMap(s,o);},this);};
a.prototype._addColumnToMap=function(c,o){if(!this._oColumnKey2ColumnMap[c]){this._oColumnKey2ColumnMap[c]=o;this._monkeyPatchColumn(o,c);}};
a.prototype.getColumnMap=function(){return this._oColumnKey2ColumnMap;};
a.prototype.getColumnMapOfValidColumnKeys=function(t,i){this._invalidateStoredColumnMapForColumnKeys(t);if(this._oStoredColumnMapForColumnKeys[t]){return this._oStoredColumnMapForColumnKeys[t].map;}if(!i||!i.length){this._oStoredColumnMapForColumnKeys[t]={columnKeys:this.getColumnKeysOfMap(),map:this._oColumnKey2ColumnMap};return this._oStoredColumnMapForColumnKeys[t].map;}this._oStoredColumnMapForColumnKeys[t]={columnKeys:this.getColumnKeysOfMap(),map:q.extend(true,{},this._oColumnKey2ColumnMap)};i.forEach(function(c){delete this._oStoredColumnMapForColumnKeys[t].map[c];},this);return this._oStoredColumnMapForColumnKeys[t].map;};
a.prototype._invalidateStoredColumnMapForColumnKeys=function(t){var v=this._oStoredColumnMapForColumnKeys[t];if(!v){return;}var c=this.getColumnKeysOfMap();var d=c.filter(function(s){return v.columnKeys.indexOf(s)<0;});if(d.length){delete this._oStoredColumnMapForColumnKeys[t];}};
a.prototype.getColumnKeysOfMap=function(){var c=[];for(var s in this._oColumnKey2ColumnMap){c.push(s);}return c;};
a.prototype.getVisibleColumnKeys=function(){var c=[];for(var s in this._oColumnKey2ColumnMap){var o=this._oColumnKey2ColumnMap[s];if(o.getVisible&&o.getVisible()){c.push(s);}}return c;};
a.prototype.getColumnKeysOfType=function(t){var c=[];for(var s in this._oColumnKey2ColumnMap){var o=this._oColumnKey2ColumnMap[s];if(U.getColumnType(o)===t){c.push(s);}}return c;};
a.prototype.hasFilterableColumns=function(){for(var c in this._oColumnKey2ColumnMap){if(U.isFilterable(this._oColumnKey2ColumnMap[c])){return true;}}return false;};
a.prototype.hasSortableColumns=function(){for(var c in this._oColumnKey2ColumnMap){if(U.isSortable(this._oColumnKey2ColumnMap[c])){return true;}}return false;};
a.prototype._monkeyPatchColumn=function(c,s){if(c instanceof C){return;}if(this._oColumnKeyIsMonkeyPatched[s]){return;}this._oColumnKeyIsMonkeyPatched[s]=true;var f=this.getCallbackOnSetVisible();var S=c.setVisible.bind(c);var b=function(v){if(f){f(v,s);}S(v);};c.setVisible=b;if(c.setSummed){var d=this.getCallbackOnSetSummed();var e=c.setSummed.bind(c);var g=function(i){if(d){d(i,c);}e(i);};c.setSummed=g;}};
a.prototype.exit=function(){this._oColumnKey2ColumnMap=null;this._oColumnKeyIsMonkeyPatched=null;this._oStoredColumnMapForColumnKeys=null;};
return a;},true);
sap.ui.predefine('sap/ui/comp/personalization/ColumnWrapper',['jquery.sap.global','sap/ui/core/Element'],function(q,E){"use strict";
var C=E.extend("sap.ui.comp.personalization.ColumnWrapper",{
constructor:function(i,s){E.apply(this,arguments);},
metadata:{library:"sap.ui.comp",properties:{label:{type:"string"},tooltip:{type:"string"},selected:{type:"boolean",defaultValue:false},aggregationRole:{type:"sap.ui.comp.personalization.AggregationRole"},role:{type:"string"},href:{type:"string",defaultValue:null},target:{type:"string",defaultValue:null},press:{type:"object",defaultValue:null},sorted:{type:"boolean",defaultValue:false},sortOrder:{type:"string",defaultValue:"Ascending"}}}
});
return C;},true);
sap.ui.predefine('sap/ui/comp/personalization/ColumnsController',['jquery.sap.global','./BaseController','sap/m/library','./Util'],function(q,B,l,U){"use strict";
var C=B.extend("sap.ui.comp.personalization.ColumnsController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(sap.m.P13nPanelType.columns);},
metadata:{properties:{triggerModelChangeOnColumnInvisible:{type:"boolean",group:"Misc",defaultValue:false}},events:{afterColumnsModelDataChange:{}}}
});
C.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){t.detachColumnMove(this._onColumnMove,this);t.detachColumnVisibility(this._onColumnVisibility,this);t.detachColumnResize(this._onColumnResize,this);t.attachColumnMove(this._onColumnMove,this);t.attachColumnVisibility(this._onColumnVisibility,this);t.attachColumnResize(this._onColumnResize,this);}this._monkeyPatchTable(t);};
C.prototype.createPersistentStructure=function(i){var p=B.prototype.createPersistentStructure.apply(this,arguments);p.columns.fixedColumnCount=0;return p;};
C.prototype._getTable2Json=function(){return this._mapTable2Json(this.getTable());};
C.prototype._getDataSuiteFormat2Json=function(d){return this._mapDataSuiteFormat2Json(d);};
C.prototype._mapTable2Json=function(t){var j=this.createPersistentStructure();if(!t){return j;}var c=this.getColumnMap(true);var i=0;t.getColumns().forEach(function(o){var s=U.getColumnKey(o);if(!c[s]){return;}j.columns.columnsItems.push({columnKey:s,index:i,visible:o.getVisible(),width:(o&&o.getWidth)?o.getWidth():undefined,total:(o&&o.getSummed)?o.getSummed():undefined});i++;});return j;};
C.prototype._mapDataSuiteFormat2Json=function(d){var p=U.copy(this.getPersistentDataRestore());if(d.Total&&d.Total.length){d.Total.forEach(function(c){var o=U.getArrayElementByKey("columnKey",c,p.columns.columnsItems);if(o){o.total=true;}});}if(d.Visualizations&&d.Visualizations.length){var L=d.Visualizations.filter(function(v){return v.Type==="LineItem";});if(L.length){p.columns.columnsItems.forEach(function(c){c.visible=false;});L[0].Content.forEach(function(c,i){var o=U.getArrayElementByKey("columnKey",c.Value,p.columns.columnsItems);if(!o){return;}o.visible=true;var I=U.getIndexByKey("columnKey",c.Value,p.columns.columnsItems);this._moveModelItems(I,i,p.columns.columnsItems);},this);}}return p;};
C.prototype._moveModelItems=function(i,I,a){if(i<0||I<0||i>a.length-1||I>a.length-1){return;}var m=a.splice(i,1);a.splice(I,0,m[0]);a.forEach(function(M,b){M.index=b;});};
C.prototype._getTable2JsonRestore=function(c){if(!c){return B.prototype._getTable2JsonRestore.apply(this,arguments);}var j=this.createPersistentStructure();var i=this.getIgnoreColumnKeys();var o=this.getColumnMap();var I=0;c.forEach(function(s){if(i.indexOf(s)>-1){return;}var a=o[s];j.columns.columnsItems.push({columnKey:s,index:I,visible:a?a.getVisible():false,width:a?a.getWidth():undefined,total:(a&&a.getSummed)?a.getSummed():undefined});I++;});return j;};
C.prototype.syncTable2TransientModel=function(){this._syncTable2TransientModel();};
C.prototype._determineTooltipText=function(o){var t=null;if(o&&o.getTooltip){if(o.getTooltip()instanceof sap.ui.core.TooltipBase){t=o.getTooltip().getTooltip_Text();}else{t=o.getTooltip_Text();}if(!t&&o instanceof sap.ui.table.AnalyticalColumn){t=o.getTooltip_AsString();}if(!t&&o.getLabel&&o.getLabel().getTooltip_Text){t=o.getLabel().getTooltip_Text();}}return t;};
C.prototype._syncTable2TransientModel=function(){var t=this.getTable();var i=[];var c;var o;if(t){var a=this.getColumnMap(true);if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){for(c in a){o=a[c];var T=this._determineTooltipText(o);i.push({columnKey:c,text:o.getLabel().getText(),tooltip:T,visible:o.getVisible(),width:o.getWidth(),total:(o&&o.getSummed)?o.getSummed():undefined});}}else{if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ResponsiveTable){for(c in a){o=a[c];i.push({columnKey:c,text:o.getHeader().getText(),tooltip:(o.getHeader().getTooltip()instanceof sap.ui.core.TooltipBase)?o.getHeader().getTooltip().getTooltip_Text():o.getHeader().getTooltip_Text(),visible:o.getVisible(),width:o.getWidth()});}}}}var I=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.columns.items;if(q(i).not(I).length!==0||q(I).not(i).length!==0){this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.columns.items=i;}};
C.prototype._setNewColumnItemIndex=function(d,c,n){var i=-1;if(c&&n!==null&&n!==undefined&&n>-1){i=U.getIndexByKey("columnKey",U.getColumnKey(c),d.persistentData.columns.columnsItems);if(i>-1){d.persistentData.columns.columnsItems[i].index=n;}else{d.persistentData.columns.columnsItems.push({columnKey:U.getColumnKey(c),index:n});}}};
C.prototype._onColumnMove=function(e){var i=0,n=null,t=null;var T=null,d=null,c=null;var N=null,o=null;c=e.getParameter("column");N=e.getParameter("newPos");this.fireBeforePotentialTableChange();if(c){T=this.getTable();o=T.indexOfColumn(c);}if(o!==null&&N!==null){d=this.getModel("$sapuicomppersonalizationBaseController").getData();if(o>N){for(i=N;i<=o;i++){if(i<o){t=T.getColumns()[i];n=i+1;}else{t=c;n=e.getParameter("newPos");}this._setNewColumnItemIndex(d,t,n);}}else{for(i=o;i<=N;i++){if(i===o){t=c;n=e.getParameter("newPos");}else{t=T.getColumns()[i];n=i-1;}this._setNewColumnItemIndex(d,t,n);}}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();}};
C.prototype._onColumnVisibility=function(e){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var c=e.getParameter("column");var v=e.getParameter("newVisible");this.fireBeforePotentialTableChange();var i=U.getIndexByKey("columnKey",U.getColumnKey(c),d.persistentData.columns.columnsItems);if(i>-1){d.persistentData.columns.columnsItems[i].visible=v;}else{d.persistentData.columns.columnsItems.push({columnKey:U.getColumnKey(c),visible:v});}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
C.prototype._onColumnTotal=function(p){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var c=p.column;var i=p.isSummed;this.fireBeforePotentialTableChange();var I=U.getIndexByKey("columnKey",U.getColumnKey(c),d.persistentData.columns.columnsItems);if(I>-1){d.persistentData.columns.columnsItems[I].total=i;}else{d.persistentData.columns.columnsItems.push({columnKey:U.getColumnKey(c),total:i});}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
C.prototype._onColumnFixedCount=function(f){this.fireBeforePotentialTableChange();this.getModel("$sapuicomppersonalizationBaseController").setProperty("/persistentData/columns/fixedColumnCount",f);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
C.prototype._onColumnResize=function(e){var c=e.getParameter("column");var d=this.getModel("$sapuicomppersonalizationBaseController").getData();this.fireBeforePotentialTableChange();var i=U.getIndexByKey("columnKey",U.getColumnKey(c),d.persistentData.columns.columnsItems);if(i>-1){d.persistentData.columns.columnsItems[i].width=e.getParameter("width");}else{d.persistentData.columns.columnsItems.push({columnKey:U.getColumnKey(c),width:e.getParameter("width")});}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
C.prototype.getPanel=function(p){sap.ui.getCore().loadLibrary("sap.m");q.sap.require("sap/m/P13nColumnsPanel");q.sap.require("sap/m/P13nItem");q.sap.require("sap/m/P13nColumnsItem");var t=this;var v=-1;if(p&&p.visibleItemsThreshold){v=p.visibleItemsThreshold;}var P=new sap.m.P13nColumnsPanel({visibleItemsThreshold:v,items:{path:'$sapmP13nPanel>/transientData/columns/items',template:new sap.m.P13nItem({columnKey:'{$sapmP13nPanel>columnKey}',text:'{$sapmP13nPanel>text}',visible:'{$sapmP13nPanel>visible}',tooltip:'{$sapmP13nPanel>tooltip}',width:"{$sapmP13nPanel>width}"})},columnsItems:{path:"$sapmP13nPanel>/persistentData/columns/columnsItems",template:new sap.m.P13nColumnsItem({columnKey:"{$sapmP13nPanel>columnKey}",index:"{$sapmP13nPanel>index}",visible:"{$sapmP13nPanel>visible}",width:"{$sapmP13nPanel>width}",total:"{$sapmP13nPanel>total}"})},beforeNavigationTo:this.setModelFunction(),changeColumnsItems:function(e){var m=[];if(e.getParameter("items")){e.getParameter("items").forEach(function(M){m.push({columnKey:M.columnKey,index:M.index===-1?undefined:M.index,visible:M.visible,width:M.width,total:M.total});});t.getModel("$sapuicomppersonalizationBaseController").setProperty("/persistentData/columns/columnsItems",m);}}});return P;};
C.prototype.syncJsonModel2Table=function(j){var t=this.getTable();var i=j.columns.columnsItems;this.fireBeforePotentialTableChange();if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){this._applyChangesToUiTableType(t,i);}else if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ResponsiveTable){this._applyChangesToMTableType(t,i);}this.fireAfterPotentialTableChange();};
C.prototype._sortByIndex=function(a,b){if(a.index!==undefined&&b.index===undefined){return-1;}if(b.index!==undefined&&a.index===undefined){return 1;}if(a.index<b.index){return-1;}if(a.index>b.index){return 1;}return 0;};
C.prototype._applyChangesToUiTableType=function(t,c){var o=null;var a={};var f=this.getModel("$sapuicomppersonalizationBaseController").getProperty("/persistentData/columns/fixedColumnCount");var b=this;var s=function(m,n){var r=[];m.sort(b._sortByIndex);m.forEach(function(p){r.push(p.columnKey);a[p.columnKey]=p;});n.forEach(function(p,I){if(r.indexOf(p)<0){r.splice(I,0,p);}});return r;};var S=function(m,o){var n=a[m];if(n&&n.visible!==undefined&&o.getVisible()!==n.visible){o.setVisible(n.visible,true);}};var i=false;var d=function(I,m,o){var T=t.indexOfColumn(o);var M=I;if(M!==undefined&&T!==M){if(T>-1){t.removeColumn(o,true);}t.insertColumn(o,M,true);}};var e=function(m,o){var n=a[m];if(n&&n.width!==undefined&&o.getWidth()!==n.width){o.setWidth(n.width,true);}};var g=function(m,o){var n=a[m];if(n&&n.total!==undefined&&o.getSummed&&o.getSummed()!==n.total){o.setSummed(n.total,true);}};var h=function(t){if(i){t.setFixedColumnCount(0,true);}else if(f!==t.getFixedColumnCount()){t.setFixedColumnCount(f,true);}};if(c.length){var j=s(c,this._aColumnKeys);var k=this.getColumnMap();j.forEach(function(m,I){o=k[m];if(o){S(m,o);d(I,m,o);e(m,o);g(m,o);}});h(t);}};
C.prototype._applyChangesToMTableType=function(t,c){var T=false;var o=this.getColumnMap();var s=function(a,b){var m=a.index;if(m!==undefined){b.setOrder(m,true);T=true;}};var S=function(a,b){if(a.visible!==undefined&&b.getVisible()!==a.visible){b.setVisible(a.visible,true);T=true;}};if(c.length){c.sort(function(a,b){if(a.index<b.index){return-1;}if(a.index>b.index){return 1;}return 0;});c.forEach(function(a){var b=o[a.columnKey];if(b){s(a,b);S(a,b);}},this);}if(T){t.invalidate();}};
C.prototype.getChangeType=function(p,P){var c=this.getChangeData(p,P);var n=U.getTableType(this.getTable())===sap.ui.comp.personalization.TableType.AnalyticalTable||this.getTriggerModelChangeOnColumnInvisible();if(c){var o=sap.ui.comp.personalization.ChangeType.TableChanged;c.columns.columnsItems.some(function(i){if(i.visible||(i.visible===false&&n)){o=sap.ui.comp.personalization.ChangeType.ModelChanged;return true;}if(i.total===false||i.total===true){o=sap.ui.comp.personalization.ChangeType.ModelChanged;return true;}});return o;}return sap.ui.comp.personalization.ChangeType.Unchanged;};
C.prototype.getChangeData=function(p,P){if(!P||!P.columns||!P.columns.columnsItems){return null;}var c={columns:U.copy(p.columns)};var i=true;i=(p.columns.fixedColumnCount===P.columns.fixedColumnCount);p.columns.columnsItems.some(function(I){var o=U.getArrayElementByKey("columnKey",I.columnKey,P.columns.columnsItems);if(!U.semanticEqual(I,o)){i=false;return true;}});if(i){return null;}var t=[];c.columns.columnsItems.forEach(function(I,a){var o=U.getArrayElementByKey("columnKey",I.columnKey,P.columns.columnsItems);if(U.semanticEqual(I,o)){t.push(I);return;}for(var b in I){if(b==="columnKey"||!o){if(o&&o[b]===undefined){delete I[b];}else{continue;}}if(I[b]===o[b]){delete I[b];}}if(Object.keys(I).length<2){t.push(I);}});t.forEach(function(I){var a=U.getIndexByKey("columnKey",I.columnKey,c.columns.columnsItems);c.columns.columnsItems.splice(a,1);});return c;};
C.prototype._sortArrayByPropertyName=function(A,p,t){var s=[];if(t===null||t===undefined){t=false;}if(A&&A.length>0&&p!==undefined&&p!==null&&p!==""){if(t){s=q.extend(true,[],A);}else{s=A;}s.sort(function(a,b){var c=a[p];var d=b[p];if(c<d||(c!==undefined&&d===undefined)){return-1;}if(c>d||(c===undefined&&d!==undefined)){return 1;}return 0;});}return s;};
C.prototype.getUnionData=function(p,P){var o=U.copy(p);if(!P||!P.columns||!P.columns.columnsItems||(P.columns.columnsItems.length===0&&P.columns.fixedColumnCount===0)){return o.columns?{columns:o.columns}:null;}if(!o||!o.columns||!o.columns.columnsItems){return{columns:q.extend(true,{},P.columns)};}var d=[];var u=this.createPersistentStructure();u.columns.fixedColumnCount=o.columns.fixedColumnCount;if(P.columns.fixedColumnCount!==undefined){u.columns.fixedColumnCount=P.columns.fixedColumnCount;}o.columns.columnsItems.forEach(function(c,i){var a=U.getArrayElementByKey("columnKey",c.columnKey,P.columns.columnsItems);if(a){if(a.visible!==undefined){c.visible=a.visible;}if(a.width!==undefined){c.width=a.width;}if(a.total!==undefined){c.total=a.total;}if(a.index!==undefined){c.index=a.index;d.push(c);return;}}u.columns.columnsItems.push(c);});if(d&&d.length>0){this._sortArrayByPropertyName(d,"index");d.forEach(function(D){u.columns.columnsItems.splice(D.index,0,D);});}u.columns.columnsItems.forEach(function(c,i){c.index=i;});return u;};
C.prototype.isColumnSelected=function(p,P,c){if(!p){P.columnsItems.some(function(o,I){if(o.columnKey===c&&o.visible){i=I;return true;}});return i>-1;}if(!p.selectedItems){return false;}var i=U.getIndexByKey("columnKey",c,p.selectedItems);return i>-1;};
C.prototype.getDataSuiteFormatSnapshot=function(d){var p=this.getUnionData(this.getPersistentDataRestore(),this.getPersistentData());if(!p.columns||!p.columns.columnsItems||!p.columns.columnsItems.length){return;}var c=p.columns.columnsItems.filter(function(o){return!!o.total;});if(c.length){d.Total=c.map(function(o){return o.columnKey;});}var a=p.columns.columnsItems.filter(function(o){return!!o.visible;});if(a.length){if(!d.Visualizations){d.Visualizations=[];}a.sort(this._sortByIndex);d.Visualizations.push({Type:"LineItem",Content:a.map(function(o){return{Value:o.columnKey,Label:undefined};})});}};
C.prototype._monkeyPatchTable=function(t){if(U.getTableBaseType(t)!==sap.ui.comp.personalization.TableType.Table){return;}var a=this;var s=t.setFixedColumnCount.bind(t);var S=function(f,b){a._onColumnFixedCount(f);s(f,b);};if(t.setFixedColumnCount.toString()===S.toString()){return;}t.setFixedColumnCount=S;};
C.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){t.detachColumnMove(this._onColumnMove,this);t.detachColumnVisibility(this._onColumnVisibility,this);t.detachColumnResize(this._onColumnResize,this);}};
return C;},true);
sap.ui.predefine('sap/ui/comp/personalization/Controller',['jquery.sap.global','sap/ui/base/ManagedObject','./ColumnsController','./FilterController','./GroupController','./SortController','./DimeasureController','./SelectionController','./Util','sap/ui/comp/library','./ChartWrapper','./SelectionWrapper','./ColumnHelper','sap/ui/core/MessageType','sap/m/P13nDialog','./Validator'],function(q,M,C,F,G,S,D,a,U,b,c,d,e,f,P,V){"use strict";
var g=M.extend("sap.ui.comp.personalization.Controller",{
constructor:function(i,s){M.apply(this,arguments);},
metadata:{publicMethods:["setPersonalizationData"],properties:{setting:{type:"object",defaultValue:{}},resetToInitialTableState:{type:"boolean",defaultValue:true},columnKeys:{type:"string[]",defaultValue:[]}},associations:{table:{type:"object",multiple:false}},events:{beforePotentialTableChange:{},afterPotentialTableChange:{},afterP13nModelDataChange:{parameters:{changeReason:{type:"sap.ui.comp.personalization.ResetType"},persistentData:{type:"object"},changeData:{type:"object"},changeType:{type:"sap.ui.comp.personalization.ChangeType"},changeTypeVariant:{type:"sap.ui.comp.personalization.ChangeType"},changeTypeRestore:{type:"sap.ui.comp.personalization.ChangeType"}}},requestColumns:{parameters:{columnKeys:{type:"string"}}},dialogAfterClose:{},dialogConfirmedReset:{}},library:"sap.ui.comp"}
});
g.prototype.setTable=function(t){if(this._bInitCalled){throw"The table instance should be passed only into constructor.";}this.setAssociation("table",t);return this;};
g.prototype.setSetting=function(s){if(this._bInitCalled){throw"The setting instance should be passed only into constructor.";}s=this.validateProperty("setting",s);this.setProperty("setting",s,true);return this;};
g.prototype.setColumnKeys=function(h){if(this._bInitCalled){throw"The columnKeys array should be passed only into constructor.";}h=this.validateProperty("columnKeys",h);this.setProperty("columnKeys",h,true);return this;};
g.prototype.setResetToInitialTableState=function(r){if(this._bInitCalled){throw"The resetToInitialTableState property should be passed only into constructor.";}r=this.validateProperty("resetToInitialTableState",r);this.setProperty("resetToInitialTableState",r,true);return this;};
g.prototype._mergeSettingCurrentBy=function(s){if(U.getTableType(this.getTable())===sap.ui.comp.personalization.TableType.ChartWrapper){this._oSettingCurrent=U.copy(this._oSettingOriginalChart);}else if(U.getTableType(this.getTable())===sap.ui.comp.personalization.TableType.SelectionWrapper){this._oSettingCurrent=U.copy(this._oSettingOriginalSelection);}else{this._oSettingCurrent=U.copy(this._oSettingOriginalTable);}for(var t in s){if(s[t].visible===false){delete this._oSettingCurrent[t];continue;}if(this._oSettingCurrent[t]&&this._oSettingCurrent[t].visible===true){this._oSettingCurrent[t].controller=s[t].controller?s[t].controller:this._oSettingCurrent[t].controller;this._oSettingCurrent[t].payload=s[t].payload?s[t].payload:undefined;this._oSettingCurrent[t].ignoreColumnKeys=s[t].ignoreColumnKeys?s[t].ignoreColumnKeys:[];this._oSettingCurrent[t].triggerModelChangeOnColumnInvisible=s[t].triggerModelChangeOnColumnInvisible?s[t].triggerModelChangeOnColumnInvisible:undefined;}else{this._oSettingCurrent[t]={visible:s[t].visible,controller:s[t].controller?s[t].controller:undefined,payload:s[t].payload?s[t].payload:undefined,ignoreColumnKeys:s[t].ignoreColumnKeys?s[t].ignoreColumnKeys:[],triggerModelChangeOnColumnInvisible:s[t].triggerModelChangeOnColumnInvisible?s[t].triggerModelChangeOnColumnInvisible:undefined};}}this._removeUnsupportedNamespaces();};
g.prototype._mixSetting=function(s,o){if(!o){return s;}for(var t in o){if(o[t].visible&&s[t]&&s[t].visible){o[t].controller=s[t].controller;o[t].payload=o[t].payload?o[t].payload:s[t].payload;}}return o;};
g.prototype.getTable=function(){var t=this.getAssociation("table");if(typeof t==="string"){t=sap.ui.getCore().byId(t);}return t;};
g.prototype.getModel=function(){return this._oModel;};
g.prototype.addColumns=function(o){this._oColumnHelper.addColumnMap(o);};
g.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this._initialize();};
g.prototype._initialize=function(){var t=this.getTable();if(!t){throw"The table instance should be passed into constructor.";}var h=t.getColumns();if(!U.isConsistent(h)){throw"The table instance provided contains some inconsistences (it could be a columnKey which is not provided or a duplicate columnKey).";}this._mergeSettingCurrentBy(this.getSetting());this._oColumnHelper.addColumnsToMap(h);var i=this.getProperty("columnKeys");if(!i.length){i=this._oColumnHelper.getColumnKeysOfMap();}this.setColumnKeys(i);this._checkIgnoredColumnKeys(t,this._oColumnHelper.getVisibleColumnKeys());this._masterSync(g.SyncReason.Initialize,null,null);this._bInitCalled=true;};
g.prototype.init=function(){var t=this;this._oDialog=null;this._oPayload=null;this._oPersistentDataRestore=null;this._oPersistentDataCurrentVariant=null;this._oPersistentDataAlreadyKnown=null;this._oPersistentDataBeforeOpen=null;this._oModel=null;this._aColumnKeysOfDateType=[];this._aColumnKeysOfBooleanType=[];this._aColumnKeysOfTimeType=[];this._bIsDirty=false;this._bInitCalled=false;this._bSuspend=false;this._bUnconfirmedResetPressed=false;this._oColumnHelper=new e({callbackOnSetVisible:this._onSetVisible.bind(this),callbackOnSetSummed:this._onSetSummed.bind(this)});this._oSettingOriginalTable={columns:{controller:new C({columnHelper:this._oColumnHelper,afterColumnsModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},sort:{controller:new S({columnHelper:this._oColumnHelper,afterSortModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},filter:{controller:new F({columnHelper:this._oColumnHelper,afterFilterModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},group:{controller:new G({columnHelper:this._oColumnHelper,afterGroupModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true}};this._oSettingOriginalChart={dimeasure:{controller:new D({columnHelper:this._oColumnHelper,afterDimeasureModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},sort:{controller:new S({columnHelper:this._oColumnHelper,afterSortModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},filter:{controller:new F({columnHelper:this._oColumnHelper,afterFilterModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true}};this._oSettingOriginalSelection={selection:{controller:new a({columnHelper:this._oColumnHelper,afterSelectionModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true}};};
g.prototype.openDialog=function(s){this._suspendTable();var m=this._determineMissingColumns(this.getColumnKeys());if(m.length){this.fireRequestColumns({columnKeys:m});this._masterSync(g.SyncReason.NewModelData,this._getPersistentDataCopy(),null);}this._masterSync(g.SyncReason.NewTableBinding,null,null);this._oDialog=new P({stretch:sap.ui.Device.system.phone,showReset:(s&&s.showReset!==undefined)?s.showReset:true,showResetEnabled:this._bIsDirty,initialVisiblePanelType:this._oInitialVisiblePanelType,validationExecutor:this._handleDialogValidate.bind(this)});if(s&&s.contentWidth){this._oDialog.setContentWidth(s.contentWidth);}if(s&&s.contentHeight){this._oDialog.setContentHeight(s.contentHeight);}this._oDialog.toggleStyleClass("sapUiSizeCompact",!!q(this.getTable().getDomRef()).closest(".sapUiSizeCompact").length);var o=this._mixSetting(this._oSettingCurrent,s);var p=this._callControllers(o,"getPanel");for(var t in o){if(p[t]){this._oDialog.addPanel(p[t]);}}this._oPersistentDataBeforeOpen=this._getPersistentDataCopy();this._oDialog.attachOk(this._handleDialogOk,this);this._oDialog.attachCancel(this._handleDialogCancel,this);this._oDialog.attachReset(this._handleDialogReset,this);this._oDialog.attachAfterClose(this._handleDialogAfterClose,this);this._oDialog.open();};
g.prototype._determineNeededColumnKeys=function(p){var n=this._callControllers(this._oSettingCurrent,"determineNeededColumnKeys",p);return U.getUnionOfColumnKeys(n);};
g.prototype._determineMissingColumns=function(n){if(!n.length){return[];}var m=[];var t=this._oColumnHelper.getColumnKeysOfMap();n.forEach(function(s){if(t.indexOf(s)<0){m.push(s);}});return m;};
g.prototype._getSettingOfPanels=function(){if(!this._oDialog||!this._oDialog.getPanels()){return{};}var s={};this._oDialog.getPanels().forEach(function(p){var t=p.getType();s[t]={controller:this._oSettingCurrent[t].controller,visible:this._oSettingCurrent[t].visible,payload:this._oSettingCurrent[t].payload};},this);return s;};
g.prototype._getPersistentDataCopy=function(){var p={};if(this.getModel()&&this.getModel().getData().persistentData){p=U.copy(this.getModel().getData().persistentData);}return p;};
g.prototype.getDataSuiteFormatSnapshot=function(){var o={};this._callControllers(this._oSettingCurrent,"getDataSuiteFormatSnapshot",o);return o;};
g.prototype.setDataSuiteFormatSnapshot=function(o,p){if(!this._sanityCheck(p)){return;}var h=this._callControllers(this._oSettingCurrent,"_getDataSuiteFormat2Json",o);var m=this._determineNeededColumnKeys(h);var i=this._determineNeededColumnKeys(p);var j=q.extend(true,{},m,i);j=U.getUnionOfColumnKeys(j);var k=this._determineMissingColumns(j);if(k.length){this.fireRequestColumns({columnKeys:k});}this._suspendTable();this._masterSync(g.SyncReason.NewModelDataMixedWithVariant,h,p);this._fireChangeEvent();this._resumeTable(true);};
g.prototype.setPersonalizationData=function(n){if(!this._sanityCheck(n)){return;}var m=this._determineMissingColumns(this._determineNeededColumnKeys(n));if(m.length){this.fireRequestColumns({columnKeys:m});}this._suspendTable();this._masterSync(g.SyncReason.NewModelDataVariant,n,null);this._resumeTable(true);this._fireChangeEvent();};
g.prototype.resetPersonalization=function(r){this._suspendTable();var R=this.getResetToInitialTableState();if(r===sap.ui.comp.personalization.ResetType.ResetFull||r===sap.ui.comp.personalization.ResetType.ResetPartial){R=(r===sap.ui.comp.personalization.ResetType.ResetFull);}if(R){this._masterSync(g.SyncReason.ResetModelData,null,null);this._fireChangeEvent(sap.ui.comp.personalization.ResetType.ResetFull);}else{this._masterSync(g.SyncReason.ResetModelDataVariant,null,null);this._fireChangeEvent(sap.ui.comp.personalization.ResetType.ResetPartial);}this._resumeTable(true);};
g.prototype._handleDialogReset=function(E){this._suspendTable();this._bUnconfirmedResetPressed=true;if(this.getResetToInitialTableState()){this._masterSync(g.SyncReason.ResetModelData,null,null);}else{this._masterSync(g.SyncReason.ResetModelDataVariant,null,null);}var r=this._getSettingOfPanels();this._callControllers(r,"onAfterReset",E.getParameter("payload"));this._resumeTable(true);};
g.prototype._handleDialogCancel=function(E){this._oDialog.detachCancel(this._handleDialogCancel,this);this._oDialog.close();};
g.prototype._handleDialogOk=function(E){this._oDialog.detachOk(this._handleDialogOk,this);if(this._bUnconfirmedResetPressed){this.fireDialogConfirmedReset();}this._oPayload={trigger:"ok",payload:E.getParameter("payload")};this._oDialog.close();};
g.prototype._handleDialogAfterClose=function(){var t=this;var _=this._oPayload;this._oInitialVisiblePanelType=this._oDialog.getVisiblePanel()?this._oDialog.getVisiblePanel().getType():this._getInitialVisiblePanelType();this._bUnconfirmedResetPressed=false;if(_&&_.trigger==="ok"){setTimeout(function(){var s=t._getSettingOfPanels();if(t._oDialog){t._oDialog.destroy();t._oDialog=null;}t._callControllers(s,"onAfterSubmit",t._oPayload.payload);t._oPayload=null;t._fireChangeEvent();t._oPersistentDataBeforeOpen=null;t._resumeTable(true);t.fireDialogAfterClose();},0);}else{setTimeout(function(){if(t._oDialog){t._oDialog.destroy();t._oDialog=null;}t._masterSync(g.SyncReason.NewModelData,t._oPersistentDataBeforeOpen,null);t._oPersistentDataBeforeOpen=null;t._resumeTable(false);t.fireDialogAfterClose();},0);}};
g.prototype._handleDialogValidate=function(p){var r=[];var t=this.getTable();var s=this._getSettingOfPanels();var o=this._oColumnHelper.getColumnMap();var h=this._callControllers(s,"getUnionData",U.copy(this._oPersistentDataRestore),this._getPersistentDataCopy());return V.checkGroupAndColumns(U.getTableType(t),s,p,o,h,r).then(function(R){return V.checkSaveChanges(U.getTableType(t),s,p,R).then(function(R){return R;});});};
g.prototype._getInitialVisiblePanelType=function(){for(var t in this._oSettingCurrent){return t;}};
g.prototype._suspendTable=function(){if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table){this._bSuspend=true;}};
g.prototype._resumeTable=function(i){i=(i===undefined)?true:i;var t=this.getTable();if(this._bSuspend){if(t){if(i){t.invalidate();}}this._bSuspend=false;}};
g.prototype._masterSync=function(u,n,N){var t;var j;var p;var o;switch(u){case g.SyncReason.NewTableBinding:this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");break;case g.SyncReason.Initialize:this.initializeModel();this._callControllers(this._oSettingCurrent,"setTable",this.getTable());this._setSizeLimit(this.getTable());this._callControllers(this._oSettingCurrent,"setIgnoreColumnKeys");this._callControllers(this._oSettingCurrent,"setTriggerModelChangeOnColumnInvisible");this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"createTableRestoreJson",this.getColumnKeys());this._callControllers(this._oSettingCurrent,"syncTable2PersistentModel");j=this._callControllers(this._oSettingCurrent,"getTableRestoreJson");this._oPersistentDataRestore=U.copy(j);this._oPersistentDataCurrentVariant={};this._aColumnKeysOfDateType=[];this._aColumnKeysOfTimeType=[];this._aColumnKeysOfBooleanType=[];this._oPersistentDataAlreadyKnown=U.copy(this._oPersistentDataRestore);for(t in this._oPersistentDataRestore){if(!this._oSettingCurrent[t]){delete this._oPersistentDataRestore[t];}}for(t in this._oPersistentDataAlreadyKnown){if(!this._oSettingCurrent[t]){delete this._oPersistentDataAlreadyKnown[t];}}for(t in this._oPersistentDataCurrentVariant){if(!this._oSettingCurrent[t]){delete this._oPersistentDataCurrentVariant[t];}}break;case g.SyncReason.NewModelDataVariant:if(n===null){n={};}p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(n));this.initializeModel(p);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",p);this._callControllers(this._oSettingCurrent,"reducePersistentModel");this._oPersistentDataCurrentVariant=U.copy(n);break;case g.SyncReason.NewModelData:if(n===null){n={};}p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(n));this.initializeModel(p);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",p);this._callControllers(this._oSettingCurrent,"reducePersistentModel");break;case g.SyncReason.NewModelDataMixedWithVariant:if(n===null){n={};}if(N===null){N={};}p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(n));this.initializeModel(p);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",p);this._callControllers(this._oSettingCurrent,"reducePersistentModel");this._oPersistentDataCurrentVariant=U.copy(N);break;case g.SyncReason.ResetModelData:o=this._projectRestoreData2PersistentModel4Panels(this._oPersistentDataRestore);this.initializeModel(o);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",U.copy(o));this._callControllers(this._oSettingCurrent,"reducePersistentModel");break;case g.SyncReason.ResetModelDataVariant:o=this._projectRestoreData2PersistentModel4Panels(this._oPersistentDataCurrentVariant);var h=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(o));this.initializeModel(h);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",h);this._callControllers(this._oSettingCurrent,"reducePersistentModel");break;default:}this.getModel().refresh();};
g.prototype.initializeModel=function(n){if(!this.getModel()){this._oModel=new sap.ui.model.json.JSONModel();this._oModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);}var N=null;if(n){N=U.copy(n);}var o=N||((this.getModel().getData()&&this.getModel().getData().persistentData)?this.getModel().getData().persistentData:{});for(var t in o){if(!this._oSettingCurrent[t]){delete o[t];}}this.getModel().setData({transientData:{},persistentData:o});this._callControllers(this._oSettingCurrent,"initializeModel",this.getModel());};
g.prototype._fireChangeEvent=function(r){var o={};var p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),this._getPersistentDataCopy());var h=U.copy(this._oPersistentDataAlreadyKnown);o.changeType=this._callControllers(this._oSettingCurrent,"getChangeType",p,h);if(this.getResetToInitialTableState()){var i=U.copy(this._oPersistentDataRestore);o.changeTypeRestore=this._callControllers(this._oSettingCurrent,"getChangeType",p,i);this._bIsDirty=U.hasChangedType(o.changeTypeRestore);}else{var j=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(this._oPersistentDataCurrentVariant));o.changeTypeVariant=this._callControllers(this._oSettingCurrent,"getChangeType",p,j);o.changeTypeRestore=o.changeTypeVariant;this._bIsDirty=U.hasChangedType(o.changeTypeRestore);}if(!U.hasChangedType(o.changeType)){return;}this._aColumnKeysOfDateType=this._oColumnHelper.getColumnKeysOfType("date");this._aColumnKeysOfTimeType=this._oColumnHelper.getColumnKeysOfType("time");this._aColumnKeysOfBooleanType=this._oColumnHelper.getColumnKeysOfType("boolean");if(r===sap.ui.comp.personalization.ResetType.ResetFull||r===sap.ui.comp.personalization.ResetType.ResetPartial){o.changeReason=r;}var k=this._callControllers(this._oSettingCurrent,"getChangeData",p,h);o.changeData=U.removeEmptyProperty(U.copy(k));U.recoverPersonalisationDateData(o.changeData,this._aColumnKeysOfDateType);U.recoverPersonalisationTimeData(o.changeData,this._aColumnKeysOfTimeType);U.recoverPersonalisationBooleanData(o.changeData,this._aColumnKeysOfBooleanType);var l=U.copy(this._oPersistentDataRestore);var m=this._callControllers(this._oSettingCurrent,"getChangeData",p,l);o.persistentData=U.removeEmptyProperty(m);U.recoverPersonalisationDateData(o.persistentData,this._aColumnKeysOfDateType);U.recoverPersonalisationTimeData(o.persistentData,this._aColumnKeysOfTimeType);U.recoverPersonalisationBooleanData(o.persistentData,this._aColumnKeysOfBooleanType);this.fireAfterP13nModelDataChange(o);this._oPersistentDataAlreadyKnown=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataAlreadyKnown),k);};
g.prototype._projectRestoreData2PersistentModel4Panels=function(p){if(!this._oDialog||q.isEmptyObject(p)){return p;}var o=this._getPersistentDataCopy();var h=this._oDialog.getPanels();h.forEach(function(i){if(p[i.getType()]){o[i.getType()]=U.copy(p[i.getType()]);}else{delete o[i.getType()];}});return o;};
g.prototype._checkIgnoredColumnKeys=function(t,v){if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ChartWrapper){return;}var i=U.getUnionOfAttribute(this._oSettingCurrent,"ignoreColumnKeys");i.some(function(s){if(v.indexOf(s)>-1){throw"The provided 'ignoreColumnKeys' are inconsistent. No columns specified as ignored is allowed to be visible.";}});};
g.prototype._onSetVisible=function(v,s){if(v){var i=U.getUnionOfAttribute(this._oSettingCurrent,"ignoreColumnKeys");if(i.indexOf(s)>-1){throw"The provided 'ignoreColumnKeys' are inconsistent. No column specified as ignored is allowed to be visible. "+this;}}};
g.prototype._onSetSummed=function(i,o){this._oSettingCurrent.columns.controller._onColumnTotal({column:o,isSummed:i});};
g.prototype._removeUnsupportedNamespaces=function(){if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table&&U.getTableType(this.getTable())!==sap.ui.comp.personalization.TableType.AnalyticalTable){delete this._oSettingCurrent.group;}};
g.prototype._getArgumentsByType=function(A,t){var r=[],o=null;if(A&&A.length&&t){A.forEach(function(h){if(h&&h[t]&&typeof h[t]!=="function"){o={};o[t]=h[t];r.push(o);}else{r.push(h);}});}return r;};
g.prototype._callControllers=function(s,m){var t=null,o=null,h=null,A=null;var r={},i=Array.prototype.slice.call(arguments,2);for(t in s){o=h=A=null;o=s[t];h=o.controller;if(!h||!o.visible||!h[m]){continue;}A=this._getArgumentsByType(i,t);if(m==="getPanel"){A.push(o.payload);}else if(m==="setIgnoreColumnKeys"){A.push(o.ignoreColumnKeys);}else if(m==="setTriggerModelChangeOnColumnInvisible"){A.push(o.triggerModelChangeOnColumnInvisible);}var R=h[m].apply(h,A);if(R!==null&&R!==undefined&&R[t]!==undefined){r[t]=R[t];}else{r[t]=R;}}return r;};
g.prototype._setSizeLimit=function(t){this.getModel().setSizeLimit(this.getTable().getColumns().length+1000);};
g.prototype._sanityCheck=function(n){return true;};
g.prototype.exit=function(){var t;this._resumeTable(false);if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}this._callControllers(this._oSettingCurrent,"destroy");for(t in this._oSettingCurrent){this._oSettingCurrent[t]=null;}this._oSettingCurrent=null;for(t in this._oSettingOriginalTable){this._oSettingOriginalTable[t]=null;}this._oSettingOriginalTable=null;this._oSettingCurrent=null;for(t in this._oSettingOriginalChart){this._oSettingOriginalChart[t]=null;}this._oSettingOriginalChart=null;if(this.getModel()){this.getModel().destroy();this._oModel=null;}this._oPersistentDataRestore=null;this._oPersistentDataCurrentVariant=null;this._oPersistentDataAlreadyKnown=null;this._oPersistentDataBeforeOpen=null;this._oPayload=null;this._oColumnHelper=null;};
g.SyncReason={NewTable:0,NewSetting:1,NewTableBinding:5,NewModelData:6,NewModelDataVariant:2,NewModelDataMixedWithVariant:7,ResetModelData:3,ResetModelDataVariant:4};return g;},true);
sap.ui.predefine('sap/ui/comp/personalization/DimeasureController',['jquery.sap.global','./BaseController','sap/m/library','sap/ui/comp/library','./ChartWrapper','./Util'],function(q,B,M,C,c,U){"use strict";
var D=B.extend("sap.ui.comp.personalization.DimeasureController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(sap.m.P13nPanelType.dimeasure);},
metadata:{events:{afterDimeasureModelDataChange:{}}}
});
D.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(U.getTableType(t)!==sap.ui.comp.personalization.TableType.ChartWrapper){throw"The provided object is incorrect. 'oTable' has to be an instance of sap.ui.comp.personalization.ChartWrapper. ";}var o=t.getChartObject();o.detachDrilledDown(this._onDrilledDown,this);o.attachDrilledDown(this._onDrilledDown,this);o.detachDrilledUp(this._onDrilledUp,this);o.attachDrilledUp(this._onDrilledUp,this);var a=this;var s=o.setChartType.bind(o);var S=function(b){s(b);var m=a.getModel("$sapuicomppersonalizationBaseController");var d=m.getData();if(b&&b!==d.persistentData.dimeasure.chartTypeKey){a.fireBeforePotentialTableChange();d.persistentData.dimeasure.chartTypeKey=b;a.fireAfterPotentialTableChange();a.fireAfterDimeasureModelDataChange();}};if(o.setChartType.toString()===S.toString()){return;}o.setChartType=S;};
D.prototype._onDrilledDown=function(e){this._updateModel(e.getSource());};
D.prototype._onDrilledUp=function(e){this._updateModel(e.getSource());};
D.prototype._updateModel=function(o){var m=this.getModel("$sapuicomppersonalizationBaseController");var d=m.getData();var a=this.getColumnMap();this.fireBeforePotentialTableChange();d.persistentData.dimeasure.dimeasureItems=[];o.getVisibleDimensions().forEach(function(s){var b=a[s];d.persistentData.dimeasure.dimeasureItems.push({columnKey:s,index:d.persistentData.dimeasure.dimeasureItems.length,visible:true,role:b.getRole()});});o.getVisibleMeasures().forEach(function(s){var b=a[s];d.persistentData.dimeasure.dimeasureItems.push({columnKey:s,index:d.persistentData.dimeasure.dimeasureItems.length,visible:true,role:b.getRole()});});m.refresh();this.fireAfterPotentialTableChange();this.fireAfterDimeasureModelDataChange();};
D.prototype.createPersistentStructure=function(i){var p=B.prototype.createPersistentStructure.apply(this,arguments);p.dimeasure.chartTypeKey="";return p;};
D.prototype.syncJsonModel2Table=function(j){var t=this.getTable();var o=t.getChartObject();var d=[];var m=[];var u=function(a,s,S,g){var b=U.copy(a);b.sort(D._sortByIndex);var e=[];b.forEach(function(f){if(f.visible===true){e.push(f.columnKey);var h=g(f.columnKey);if(h){h.setRole(f.role);}}});if(JSON.stringify(e)!==JSON.stringify(s)){S(e);}};this.fireBeforePotentialTableChange();U.splitDimeasures(j.dimeasure.dimeasureItems,this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.dimeasure.items,d,m);var v=o.getVisibleDimensions();u(d,v,o.setVisibleDimensions.bind(o),o.getDimensionByName.bind(o));var V=o.getVisibleMeasures();u(m,V,o.setVisibleMeasures.bind(o),o.getMeasureByName.bind(o));o.setChartType(j.dimeasure.chartTypeKey);this.fireAfterPotentialTableChange();};
D.prototype._getTable2Json=function(){var j=this.createPersistentStructure();this._addPersistentData(this._mapTable2Json(this.getTable()),j);return j;};
D.prototype._getDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();this._addPersistentData(this._mapDataSuiteFormat2Json(d),j);return j;};
D.prototype._addPersistentData=function(s,d){var o=this.getColumnMap(true);d.dimeasure.chartTypeKey=s.dimeasure.chartTypeKey;s.dimeasure.dimeasureItems.forEach(function(S){if(!o[S.columnKey]){return;}d.dimeasure.dimeasureItems.push({columnKey:S.columnKey,index:S.index,visible:S.visible,role:S.role});});};
D.prototype._mapTable2Json=function(t){var j=this.createPersistentStructure();if(!t){return j;}var o=t.getChartObject();var v=o.getVisibleDimensions();var V=o.getVisibleMeasures();var a=this.getColumnMap(true);var d=v.filter(function(s){return(a[s]&&(a[s].getAggregationRole()===sap.ui.comp.personalization.AggregationRole.Dimension||a[s].getAggregationRole()===sap.ui.comp.personalization.AggregationRole.Measure));}).map(function(s,i){return{columnKey:s,index:i,visible:true,role:a[s].getRole()};});var m=V.filter(function(s){return(a[s]&&(a[s].getAggregationRole()===sap.ui.comp.personalization.AggregationRole.Dimension||a[s].getAggregationRole()===sap.ui.comp.personalization.AggregationRole.Measure));}).map(function(s,i){return{columnKey:s,index:d.length+i,visible:true,role:a[s].getRole()};});j.dimeasure.chartTypeKey=o.getChartType();j.dimeasure.dimeasureItems=d.concat(m);return j;};
D.prototype._mapDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();if(!d.Visualizations||!d.Visualizations.length){return j;}var a=d.Visualizations.filter(function(v){return v.Type==="Chart";});if(!a.length){return j;}var b=[];if(a[0].Content.Dimensions.length&&a[0].Content.DimensionAttributes.length){b=a[0].Content.Dimensions.map(function(s,i){var o=U.getArrayElementByKey("Dimension",s,a[0].Content.DimensionAttributes);return{columnKey:s,index:i,visible:true,role:o?o.Role:this._getDefaultValueOfProperty("role",s,"Dimension")};},this);}var m=[];if(a[0].Content.Measures.length&&a[0].Content.MeasureAttributes.length){m=a[0].Content.Measures.map(function(s,i){var o=U.getArrayElementByKey("Measure",s,a[0].Content.MeasureAttributes);return{columnKey:s,index:b.length+i,visible:true,role:o?o.Role:this._getDefaultValueOfProperty("role",s,"Measure")};},this);}j.dimeasure.dimeasureItems=b.concat(m);j.dimeasure.chartTypeKey=sap.ui.comp.odata.ChartMetadata.getChartType(a[0].Content.ChartType);return j;};
D.prototype._getDefaultValueOfProperty=function(p,s,t){var T=this.getTable();if(T&&t==="Dimension"){return T.getChartObject().getDimensionByName(s).getMetadata().getProperty(p).getDefaultValue();}else if(T&&t==="Measure"){return T.getChartObject().getMeasureByName(s).getMetadata().getProperty(p).getDefaultValue();}return undefined;};
D.prototype._getTable2JsonRestore=function(a){if(!a){return B.prototype._getTable2JsonRestore.apply(this,arguments);}var j=this.createPersistentStructure();var i=this.getIgnoreColumnKeys();var o=this.getColumnMap();var b=this.getTable().getChartObject();var v=b.getVisibleDimensions();var V=b.getVisibleMeasures();var I=0;a.forEach(function(s){if(i.indexOf(s)>-1){return;}if(o[s].getAggregationRole()===sap.ui.comp.personalization.AggregationRole.NotDimeasure){return;}j.dimeasure.dimeasureItems.push({columnKey:s,index:I,visible:v.indexOf(s)>-1||V.indexOf(s)>-1,role:o[s].getRole()});I++;});j.dimeasure.chartTypeKey=b.getChartType();return j;};
D.prototype.syncTable2TransientModel=function(){var i=[];var t=this.getTable();if(!t){return;}var o=this.getColumnMap(true);for(var s in o){var a=o[s];if(a.getAggregationRole()===sap.ui.comp.personalization.AggregationRole.NotDimeasure){continue;}i.push({columnKey:s,text:a.getLabel(),tooltip:a.getTooltip(),aggregationRole:a.getAggregationRole()});}var I=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.dimeasure.items;if(q(i).not(I).length!==0||q(I).not(i).length!==0){this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.dimeasure.items=i;}};
D.prototype.getPanel=function(p){sap.ui.getCore().loadLibrary("sap.m");q.sap.require("sap/m/P13nDimMeasurePanel");q.sap.require("sap/m/P13nItem");q.sap.require("sap/m/P13nDimMeasureItem");var t=this;var a=[];if(p&&p.availableChartTypes){a=p.availableChartTypes;}var P=new sap.m.P13nDimMeasurePanel({availableChartTypes:a,chartTypeKey:"{$sapmP13nPanel>/persistentData/dimeasure/chartTypeKey}",items:{path:'$sapmP13nPanel>/transientData/dimeasure/items',template:new sap.m.P13nItem({columnKey:'{$sapmP13nPanel>columnKey}',text:'{$sapmP13nPanel>text}',tooltip:'{$sapmP13nPanel>tooltip}',aggregationRole:'{$sapmP13nPanel>aggregationRole}'})},dimMeasureItems:{path:"$sapmP13nPanel>/persistentData/dimeasure/dimeasureItems",template:new sap.m.P13nDimMeasureItem({columnKey:"{$sapmP13nPanel>columnKey}",index:"{$sapmP13nPanel>index}",visible:"{$sapmP13nPanel>visible}",role:"{$sapmP13nPanel>role}"})},beforeNavigationTo:t.setModelFunction(),changeChartType:function(e){t.getModel("$sapuicomppersonalizationBaseController").setProperty("/persistentData/dimeasure/chartTypeKey",e.getParameter("chartTypeKey"));},changeDimMeasureItems:function(e){var m=[];e.getParameter("items").forEach(function(o){m.push({columnKey:o.columnKey,index:o.index,visible:o.visible,role:o.role});});t.getModel("$sapuicomppersonalizationBaseController").setProperty("/persistentData/dimeasure/dimeasureItems",m);}});return P;};
D.prototype._isDimMeasureItemEqual=function(d,o){if(!d&&!o){return true;}if(d&&!o){if(d.index===-1&&d.visible===false){return true;}return false;}if(o&&!d){if(o.index===-1&&o.visible===false){return true;}return false;}for(var p in d){if(o[p]===undefined||d[p]!==o[p]){return false;}}return true;};
D.prototype._isSemanticEqual=function(p,P){if(p.dimeasure.chartTypeKey!==P.dimeasure.chartTypeKey){return false;}var s=function(a,b){if(a.visible===true&&(b.visible===false||b.visible===undefined)){return-1;}else if((a.visible===false||a.visible===undefined)&&b.visible===true){return 1;}else if(a.visible===true&&b.visible===true){if(a.index<b.index){return-1;}else if(a.index>b.index){return 1;}else{return 0;}}else if((a.visible===false||a.visible===undefined)&&(b.visible===false||b.visible===undefined)){if(a.columnKey<b.columnKey){return-1;}else if(a.columnKey>b.columnKey){return 1;}else{return 0;}}};var d=U.copy(p.dimeasure.dimeasureItems).sort(s);var e=U.copy(P.dimeasure.dimeasureItems).sort(s);var i=true;d.some(function(o,I){if(!this._isDimMeasureItemEqual(o,e[I])){i=false;return true;}},this);return i;};
D.prototype.getChangeType=function(p,P){if(!P||!P.dimeasure||!P.dimeasure.dimeasureItems){return sap.ui.comp.personalization.ChangeType.Unchanged;}return this._isSemanticEqual(p,P)?sap.ui.comp.personalization.ChangeType.Unchanged:sap.ui.comp.personalization.ChangeType.TableChanged;};
D.prototype.getChangeData=function(p,P){if(!p||!p.dimeasure||!p.dimeasure.dimeasureItems){return this.createPersistentStructure();}if(!P||!P.dimeasure||!P.dimeasure.dimeasureItems){return{chartTypeKey:p.dimeasure.chartTypeKey,dimeasure:U.copy(p.dimeasure)};}if(!this._isSemanticEqual(p,P)){return{chartTypeKey:p.dimeasure.chartTypeKey,dimeasure:U.copy(p.dimeasure)};}return null;};
D.prototype.getUnionData=function(d,o){if(!o||!o.dimeasure||!o.dimeasure.dimeasureItems){return{chartTypeKey:d.dimeasure.chartTypeKey,dimeasure:U.copy(d.dimeasure)};}return{dimeasure:{chartTypeKey:o.dimeasure.chartTypeKey?o.dimeasure.chartTypeKey:d.dimeasure.chartTypeKey,dimeasureItems:U.copy(o.dimeasure.dimeasureItems)}};};
D.prototype.getDataSuiteFormatSnapshot=function(d){var p=this.getUnionData(this.getPersistentDataRestore(),this.getPersistentData());if(!p.dimeasure||!p.dimeasure.dimeasureItems||!p.dimeasure.dimeasureItems.length){return;}var a=[];var m=[];var t=this.getTransientData();U.splitDimeasures(p.dimeasure.dimeasureItems,t.dimeasure.items,a,m);var b=a.filter(function(o){return!!o.visible;});var e=m.filter(function(o){return!!o.visible;});if(b.length||e.length){if(!d.Visualizations){d.Visualizations=[];}d.Visualizations.push({Type:"Chart",Content:{ChartType:sap.ui.comp.odata.ChartMetadata.getAnnotationChartType(p.dimeasure.chartTypeKey),Dimensions:b.map(function(o){return o.columnKey;}),DimensionAttributes:b.map(function(o){return{Dimension:o.columnKey,Role:o.role};}),Measures:e.map(function(o){return o.columnKey;}),MeasureAttributes:e.map(function(o){return{Measure:o.columnKey,Role:o.role};})}});}};
D._sortByIndex=function(a,b){if(a.index<b.index){return-1;}else if(a.index>b.index){return 1;}else{return 0;}};
D.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(t){var o=t.getChartObject();if(o){o.detachDrilledDown(this._onDrilledDown,this);o.detachDrilledUp(this._onDrilledUp,this);}}};
return D;},true);
sap.ui.predefine('sap/ui/comp/personalization/FilterController',['jquery.sap.global','./BaseController','sap/m/library','./Util','./ChartWrapper','sap/ui/comp/filterbar/VariantConverterTo','sap/ui/comp/filterbar/VariantConverterFrom'],function(q,B,l,U,C,V,a){"use strict";
var F=B.extend("sap.ui.comp.personalization.FilterController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(sap.m.P13nPanelType.filter);},
metadata:{events:{afterFilterModelDataChange:{}}}
});
F.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ChartWrapper){t.detachExternalFiltersSet(this._onExternalFiltersSet,this);t.attachExternalFiltersSet(this._onExternalFiltersSet,this);}};
F.prototype._getTable2Json=function(){var j=this.createPersistentStructure();this._addPersistentData(this._mapTable2Json(this.getTable()),j);return j;};
F.prototype._getDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();this._addPersistentData(this._mapDataSuiteFormat2Json(d),j);return j;};
F.prototype._addPersistentData=function(s,d){var c=this.getColumnMap(true);s.filter.filterItems.forEach(function(S){if(!S.isFiltered||!c[S.columnKey]){return;}d.filter.filterItems.push({columnKey:S.columnKey,exclude:S.exclude,operation:S.operation,value1:S.value1,value2:S.value2});});};
F.prototype._mapTable2Json=function(t){var j=this.createPersistentStructure();if(U.getTableBaseType(t)!==sap.ui.comp.personalization.TableType.Table){return j;}j.filter.filterItems=t.getColumns().map(function(c){return{columnKey:U.getColumnKey(c),isFiltered:c.getFiltered(),exclude:false,operation:c.getFilterOperator(),value1:c.getFilterValue(),value2:""};});return j;};
F.prototype._mapDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();if(!d.SelectOptions||!d.SelectOptions.length){return j;}j.filter.filterItems=d.SelectOptions.map(function(s){var c=a.convertOption(s.Ranges[0].Option,s.Ranges[0].Low);return{columnKey:s.PropertyName,isFiltered:true,exclude:(s.Ranges[0].Sign==="E"),operation:c.op,value1:c.v,value2:s.Ranges[0].High};});return j;};
F.prototype.syncTable2TransientModel=function(){var t=this.getTable();var i=[];var c;var s;if(t){var b,v,o;if(t.getModel()instanceof sap.ui.model.odata.ODataModel||t.getModel()instanceof sap.ui.model.odata.v2.ODataModel){q.sap.require("sap.ui.model.odata.type.Boolean");o=new sap.ui.model.odata.type.Boolean();}else{if(t.getModel()instanceof sap.ui.model.Model){q.sap.require("sap.ui.model.type.Boolean");o=new sap.ui.model.type.Boolean();}}if(o){b=["",o.formatValue(false,"string"),o.formatValue(true,"string")];}var d=this.getColumnMap(true);if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){for(s in d){c=d[s];if(U.isFilterable(c)){if(U.getColumnType(c)==="boolean"){v=U._getCustomProperty(c,"values")||b;}i.push({columnKey:s,text:c.getLabel().getText(),tooltip:(c.getTooltip()instanceof sap.ui.core.TooltipBase)?c.getTooltip().getTooltip_Text():c.getTooltip_Text(),maxLength:U._getCustomProperty(c,"maxLength"),precision:U._getCustomProperty(c,"precision"),scale:U._getCustomProperty(c,"scale"),type:U.getColumnType(c),values:v});}}}else if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ResponsiveTable){for(s in d){c=d[s];if(U.getColumnType(c)==="boolean"){v=U._getCustomProperty(c,"values")||b;}if(U.isFilterable(c)){i.push({columnKey:s,text:c.getHeader().getText(),tooltip:(c.getHeader().getTooltip()instanceof sap.ui.core.TooltipBase)?c.getHeader().getTooltip().getTooltip_Text():c.getHeader().getTooltip_Text(),maxLength:U._getCustomProperty(c,"maxLength"),precision:U._getCustomProperty(c,"precision"),scale:U._getCustomProperty(c,"scale"),type:U.getColumnType(c),values:v});}}}else if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ChartWrapper){for(s in d){c=d[s];if(U.isFilterable(c)){i.push({columnKey:s,text:c.getLabel(),tooltip:(c.getTooltip()instanceof sap.ui.core.TooltipBase)?c.getTooltip().getTooltip_Text():c.getTooltip_Text(),maxLength:U._getCustomProperty(c,"maxLength"),precision:U._getCustomProperty(c,"precision"),scale:U._getCustomProperty(c,"scale"),type:U.getColumnType(c),values:v});}}}}U.sortItemsByText(i,"text");var I=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.filter.items;if(q(i).not(I).length!==0||q(I).not(i).length!==0){this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.filter.items=i;}};
F.prototype._onExternalFiltersSet=function(e){var m=this.getModel("$sapuicomppersonalizationBaseController");var d=m.getData();var c=this.getColumnMap(true);this.fireBeforePotentialTableChange();d.persistentData.filter.filterItems=d.persistentData.filter.filterItems.filter(function(f){return f.source!=="chart";});e.getParameters().filters.forEach(function(f){if(f&&f.getColumnKey()&&f.getOperation()){var o=c[f.getColumnKey()];if(!o){return;}var M={columnKey:f.getColumnKey(),operation:f.getOperation(),value1:f.getValue1(),value2:f.getValue2(),source:"chart"};if(this._hasSemanticEqual(M,d.persistentData.filter.filterItems)){return;}d.persistentData.filter.filterItems.push(M);}},this);m.refresh();this.fireAfterPotentialTableChange();this.fireAfterFilterModelDataChange();};
F.prototype._hasSemanticEqual=function(f,b){if(!f||!b.length){return false;}var e=b.filter(function(o){for(var p in f){if(f[p]!==o[p]){return false;}}return true;});return e.length>0;};
F.prototype.getPanel=function(p){sap.ui.getCore().loadLibrary("sap.m");q.sap.require("sap/m/P13nFilterPanel");q.sap.require("sap/m/P13nItem");q.sap.require("sap/m/P13nFilterItem");if(!this.getColumnHelper().hasFilterableColumns()){return null;}if(p&&p.column){var c=U.getColumnKey(p.column);if(c){var i=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.filter.items;i.forEach(function(I){I["isDefault"]=I.columnKey===c;});}}var t=this;var P=new sap.m.P13nFilterPanel({containerQuery:true,items:{path:"$sapmP13nPanel>/transientData/filter/items",template:new sap.m.P13nItem({columnKey:'{$sapmP13nPanel>columnKey}',text:"{$sapmP13nPanel>text}",tooltip:"{$sapmP13nPanel>tooltip}",maxLength:"{$sapmP13nPanel>maxLength}",precision:"{$sapmP13nPanel>precision}",scale:"{$sapmP13nPanel>scale}",type:"{$sapmP13nPanel>type}",isDefault:"{$sapmP13nPanel>isDefault}",values:"{$sapmP13nPanel>values}"})},filterItems:{path:"$sapmP13nPanel>/persistentData/filter/filterItems",template:new sap.m.P13nFilterItem({key:"{$sapmP13nPanel>key}",columnKey:"{$sapmP13nPanel>columnKey}",exclude:"{$sapmP13nPanel>exclude}",operation:"{$sapmP13nPanel>operation}",value1:"{$sapmP13nPanel>value1}",value2:"{$sapmP13nPanel>value2}"})},beforeNavigationTo:t.setModelFunction()});var s=function(o,f){var b=this.getColumnMap(true);var d=b[f];var e=U._getCustomProperty(d,"fullName");if(e){q.sap.require("sap.ui.comp.providers.ValueListProvider");o.setShowSuggestion(true);o.setFilterSuggests(false);o.setModel(this.getTable().getModel());return new sap.ui.comp.providers.ValueListProvider({control:o,fieldName:f,typeAheadEnabled:true,aggregation:"suggestionRows",resolveInOutParams:false,loadAnnotation:true,fullyQualifiedFieldName:e,model:this.getTable().getModel(),enableShowTableSuggestionValueHelp:false});}}.bind(this);P._oIncludeFilterPanel._fSuggestCallback=s;P._oExcludeFilterPanel._fSuggestCallback=s;P.attachAddFilterItem(function(e){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var b=e.getParameters();var f={columnKey:b.filterItemData.getColumnKey(),operation:b.filterItemData.getOperation(),exclude:b.filterItemData.getExclude(),value1:b.filterItemData.getValue1(),value2:b.filterItemData.getValue2()};if(b.index>-1){d.persistentData.filter.filterItems.splice(b.index,0,f);}else{d.persistentData.filter.filterItems.push(f);}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);},this);P.attachRemoveFilterItem(function(e){var b=e.getParameters();var d=this.getModel("$sapuicomppersonalizationBaseController").getData();if(b.index>-1){d.persistentData.filter.filterItems.splice(b.index,1);this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);}},this);return P;};
F.prototype.syncJsonModel2Table=function(j){var c=this.getColumnMap();var o=q.extend(true,{},c);this.fireBeforePotentialTableChange();if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table){j.filter.filterItems.forEach(function(f){var b=c[f.columnKey];if(b){if(!b.getFiltered()){b.setFiltered(true);}delete o[f.columnKey];}});for(var s in o){var b=o[s];if(b&&b.getFiltered()){b.setFiltered(false);}}}this.fireAfterPotentialTableChange();};
F.prototype.getChangeType=function(p,P){if(!P||!P.filter||!P.filter.filterItems){return sap.ui.comp.personalization.ChangeType.Unchanged;}if(P&&P.filter&&P.filter.filterItems){P.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}if(p&&p.filter&&p.filter.filterItems){p.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}var i=JSON.stringify(p.filter.filterItems)!==JSON.stringify(P.filter.filterItems);return i?sap.ui.comp.personalization.ChangeType.ModelChanged:sap.ui.comp.personalization.ChangeType.Unchanged;};
F.prototype.getChangeData=function(p,P){if(!p||!p.filter||!p.filter.filterItems){return this.createPersistentStructure();}if(P&&P.filter&&P.filter.filterItems){P.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}if(p&&p.filter&&p.filter.filterItems){p.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}if(!P||!P.filter||!P.filter.filterItems){return{filter:U.copy(p.filter)};}if(JSON.stringify(p.filter.filterItems)!==JSON.stringify(P.filter.filterItems)){return{filter:U.copy(p.filter)};}return null;};
F.prototype.getUnionData=function(p,P){if(!p||!p.filter||!p.filter.filterItems){return this.createPersistentStructure();}if(!P||!P.filter||!P.filter.filterItems){return{filter:U.copy(p.filter)};}return{filter:U.copy(P.filter)};};
F.prototype.getDataSuiteFormatSnapshot=function(d){var p=this.getUnionData(this.getPersistentDataRestore(),this.getPersistentData());if(!p.filter||!p.filter.filterItems||!p.filter.filterItems.length){return;}p.filter.filterItems.forEach(function(f){var r=V.addRangeEntry(d,f.columnKey);V.addRanges(r,[f]);});};
F.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ChartWrapper){t.detachExternalFiltersSet(this._onExternalFiltersSet,this);}};
return F;},true);
sap.ui.predefine('sap/ui/comp/personalization/GroupController',['jquery.sap.global','./BaseController','sap/m/library','./Util','sap/m/P13nConditionPanel'],function(q,B,l,U,P){"use strict";
var G=B.extend("sap.ui.comp.personalization.GroupController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(sap.m.P13nPanelType.group);},
metadata:{events:{afterGroupModelDataChange:{}}}
});
G.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){t.detachGroup(this._onGroup,this);t.attachGroup(this._onGroup,this);}};
G.prototype._getTable2Json=function(){var j=this.createPersistentStructure();this._addPersistentData(this._mapTable2Json(this.getTable()),j);return j;};
G.prototype._getDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();this._addPersistentData(this._mapDataSuiteFormat2Json(d),j);return j;};
G.prototype._addPersistentData=function(s,d){var c=this.getColumnMap(true);s.group.groupItems.forEach(function(S){if(!S.isGrouped||!c[S.columnKey]){return;}d.group.groupItems.push({columnKey:S.columnKey,operation:S.operation,showIfGrouped:S.showIfGrouped});});};
G.prototype._mapTable2Json=function(t){var c=[];if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table&&t.getGroupBy){c=t.getGroupBy()||[];if(typeof c==="string"){c=[c];}}if(U.getTableType(t)===sap.ui.comp.personalization.TableType.AnalyticalTable&&t.getGroupedColumns){c=t.getGroupedColumns()||[];}var j=this.createPersistentStructure();j.group.groupItems=c.map(function(C){if(typeof C==="string"){C=sap.ui.getCore().byId(C);}return{columnKey:U.getColumnKey(C),isGrouped:C.getGrouped(),operation:C.getSortOrder&&C.getSortOrder()===sap.ui.table.SortOrder.Ascending?sap.m.P13nConditionOperation.GroupAscending:sap.m.P13nConditionOperation.GroupDescending,showIfGrouped:C.getShowIfGrouped?C.getShowIfGrouped():false};});return j;};
G.prototype._mapDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();if(!d.GroupBy||!d.GroupBy.length){return j;}j.group.groupItems=d.GroupBy.map(function(g){return{columnKey:g,isGrouped:true,operation:sap.m.P13nConditionOperation.GroupAscending,showIfGrouped:false};});return j;};
G.prototype.syncTable2TransientModel=function(){var t=this.getTable();var i=[];var c;var C;var o=this.getColumnMap(true);if(t){if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){for(C in o){c=o[C];if(U.isGroupable(c)){i.push({columnKey:C,text:c.getLabel().getText(),tooltip:(c.getTooltip()instanceof sap.ui.core.TooltipBase)?c.getTooltip().getTooltip_Text():c.getTooltip_Text()});}}}if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ResponsiveTable){for(C in o){c=o[C];if(U.isGroupable(c)){i.push({columnKey:C,text:c.getHeader().getText(),tooltip:(c.getHeader().getTooltip()instanceof sap.ui.core.TooltipBase)?c.getHeader().getTooltip().getTooltip_Text():c.getHeader().getTooltip_Text()});}}}}U.sortItemsByText(i,"text");var g=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.group.items;if(q(i).not(g).length!==0||q(g).not(i).length!==0){this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.group.items=i;}};
G.prototype._onGroup=function(e){var t=this.getTable();var g=e.mParameters.groupedColumns;this.fireBeforePotentialTableChange();var d=this.getModel("$sapuicomppersonalizationBaseController").getData();d.persistentData.group.groupItems=[];g.forEach(function(c,i){if(typeof c==="string"){c=sap.ui.getCore().byId(c);}if(U.getTableType(t)===sap.ui.comp.personalization.TableType.AnalyticalTable){if(c.getGrouped()){d.persistentData.group.groupItems.push({columnKey:U.getColumnKey(c),showIfGrouped:c.getShowIfGrouped?c.getShowIfGrouped():false});}}else if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){d.persistentData.group.groupItems.push({columnKey:U.getColumnKey(c),showIfGrouped:false});}},this);this.fireAfterPotentialTableChange();this.fireAfterGroupModelDataChange();};
G.prototype._hasTableGroupableColumns=function(){var t=this.getTable();if(!t){return false;}var h=false;t.getColumns().some(function(c){if(U.isGroupable(c)){h=true;return true;}});return h;};
G.prototype.getPanel=function(){sap.ui.getCore().loadLibrary("sap.m");q.sap.require("sap/m/P13nGroupPanel");q.sap.require("sap/m/P13nItem");q.sap.require("sap/m/P13nGroupItem");if(!this._hasTableGroupableColumns()){return null;}var t=this;var p=new sap.m.P13nGroupPanel({maxGroups:U.getTableType(this.getTable())===sap.ui.comp.personalization.TableType.AnalyticalTable?"-1":"1",containerQuery:true,items:{path:"$sapmP13nPanel>/transientData/group/items",template:new sap.m.P13nItem({columnKey:"{$sapmP13nPanel>columnKey}",text:"{$sapmP13nPanel>text}",tooltip:"{$sapmP13nPanel>tooltip}"})},groupItems:{path:"$sapmP13nPanel>/persistentData/group/groupItems",template:new sap.m.P13nGroupItem({columnKey:"{$sapmP13nPanel>columnKey}",operation:"{$sapmP13nPanel>operation}",showIfGrouped:"{$sapmP13nPanel>showIfGrouped}"})},beforeNavigationTo:t.setModelFunction()});p.attachAddGroupItem(function(e){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var a=e.getParameters();var g={columnKey:a.groupItemData.getColumnKey(),operation:a.groupItemData.getOperation(),showIfGrouped:a.groupItemData.getShowIfGrouped()};if(a.index>-1){d.persistentData.group.groupItems.splice(a.index,0,g);}else{d.persistentData.group.groupItems.push(g);}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);},this);p.attachRemoveGroupItem(function(e){var a=e.getParameters();var d=this.getModel("$sapuicomppersonalizationBaseController").getData();if(a.index>-1){d.persistentData.group.groupItems.splice(a.index,1);this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);}},this);return p;};
G.prototype.syncJsonModel2Table=function(j){var t=this.getTable();var c;var C=this.getColumnMap();this.fireBeforePotentialTableChange();if(U.getTableType(t)===sap.ui.comp.personalization.TableType.TreeTable){return;}else if(U.getTableType(t)===sap.ui.comp.personalization.TableType.AnalyticalTable){for(var s in C){c=C[s];if(c&&c.getGrouped()){c.setGrouped(false);c.setShowIfGrouped(false);}}j.group.groupItems.forEach(function(g){c=C[g.columnKey];if(!c){return;}c.setGrouped(true);c.setShowIfGrouped(g.showIfGrouped);});}else if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){if(j.group.groupItems.length>0){j.group.groupItems.some(function(g){c=C[g.columnKey];if(c){t.setGroupBy(c);return true;}},this);}else{t.setGroupBy(null);}}this.fireAfterPotentialTableChange();};
G.prototype.getChangeType=function(p,o){if(!o||!o.group||!o.group.groupItems){return sap.ui.comp.personalization.ChangeType.Unchanged;}var i=JSON.stringify(p.group.groupItems)!==JSON.stringify(o.group.groupItems);return i?sap.ui.comp.personalization.ChangeType.ModelChanged:sap.ui.comp.personalization.ChangeType.Unchanged;};
G.prototype.getChangeData=function(p,o){if(!p||!p.group||!p.group.groupItems){return this.createPersistentStructure();}if(!o||!o.group||!o.group.groupItems){return{group:U.copy(p.group)};}if(JSON.stringify(p.group.groupItems)!==JSON.stringify(o.group.groupItems)){return{group:U.copy(p.group)};}return null;};
G.prototype.getUnionData=function(p,o){if(!o||!o.group||!o.group.groupItems){return{group:U.copy(p.group)};}return{group:U.copy(o.group)};};
G.prototype.isGroupSelected=function(p,o,c){var i;if(!p){o.groupItems.some(function(g,I){if(g.columnKey===c){i=I;return true;}});return i>-1;}if(!p.selectedColumnKeys){return false;}if(p.selectedColumnKeys){p.selectedColumnKeys.some(function(s,I){if(s===c){i=I;return true;}});}return i>-1;};
G.prototype.getDataSuiteFormatSnapshot=function(d){var p=this.getUnionData(this.getPersistentDataRestore(),this.getPersistentData());if(!p.group||!p.group.groupItems||!p.group.groupItems.length){return;}d.GroupBy=p.group.groupItems.map(function(g){return g.columnKey;});};
G.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){t.detachGroup(this._onGroup,this);}};
return G;},true);
sap.ui.predefine('sap/ui/comp/personalization/SelectionController',['jquery.sap.global','./BaseController','sap/m/library','sap/ui/comp/library','./Util','sap/m/P13nSelectionPanel','sap/m/P13nItem','sap/m/P13nSelectionItem'],function(q,B,M,C,U,P,c,d){"use strict";
var S=B.extend("sap.ui.comp.personalization.SelectionController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(sap.m.P13nPanelType.selection);},
metadata:{events:{afterSelectionModelDataChange:{}}}
});
S.prototype.onAfterSubmit=function(p){if(!p||!p.selection){return;}var D=this.getModel("$sapuicomppersonalizationBaseController").getData();D.persistentData.selection.selectionItems=[];p.selection.selectionItems.forEach(function(s){D.persistentData.selection.selectionItems.push({columnKey:s.getColumnKey(),visible:s.getSelected()});});this.getModel("$sapuicomppersonalizationBaseController").refresh();B.prototype.onAfterSubmit.apply(this,arguments);};
S.prototype._getTable2Json=function(){var j=this.createPersistentStructure();var t=this.getTable();if(!t){return j;}var o=this.getColumnMap(true);for(var s in o){var a=o[s];j.selection.selectionItems.push({columnKey:s,text:a.getLabel(),visible:a.getSelected()});}return j;};
S.prototype._getTable2JsonRestore=function(){return this._getTable2Json();};
S.prototype.syncTable2TransientModel=function(){var i=[];var t=this.getTable();if(!t){return;}var o=this.getColumnMap(true);for(var s in o){var a=o[s];i.push({columnKey:s,text:a.getLabel(),href:a.getHref(),target:a.getTarget(),press:a.getPress()});}var I=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.selection.items;if(q(i).not(I).length!==0||q(I).not(i).length!==0){this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.selection.items=i;}};
S.prototype.getPanel=function(p){return new P({titleLarge:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_SELECTION_TITLE"),items:{path:'$sapmP13nPanel>/transientData/selection/items',template:new c({columnKey:'{$sapmP13nPanel>columnKey}',href:'{$sapmP13nPanel>href}',target:'{$sapmP13nPanel>target}',text:'{$sapmP13nPanel>text}',press:'{$sapmP13nPanel>press}'})},selectionItems:{path:"$sapmP13nPanel>/persistentData/selection/selectionItems",template:new d({columnKey:"{$sapmP13nPanel>columnKey}",selected:"{$sapmP13nPanel>visible}"})},beforeNavigationTo:this.setModelFunction()});};
S.prototype.getChangeType=function(D,o){return this.getChangeData(D,o)?sap.ui.comp.personalization.ChangeType.ModelChanged:sap.ui.comp.personalization.ChangeType.Unchanged;};
S.prototype.getChangeData=function(D,o){if(!o||!o.selection||!o.selection.selectionItems){return null;}var a={selection:U.copy(D.selection)};if(this._isSemanticEqual(D,o)){return null;}var t=[];a.selection.selectionItems.forEach(function(i){var I=U.getArrayElementByKey("columnKey",i.columnKey,o.selection.selectionItems);if(U.semanticEqual(i,I)){t.push(i);return;}for(var p in i){if(p==="columnKey"||!I){continue;}if(i[p]===I[p]){delete i[p];}}if(Object.keys(i).length<2){t.push(i);}});t.forEach(function(i){var I=U.getIndexByKey("columnKey",i.columnKey,a.selection.selectionItems);a.selection.selectionItems.splice(I,1);});return a;};
S.prototype.getUnionData=function(D,o){if(!o||!o.selection||!o.selection.selectionItems){return D.selection?{selection:U.copy(D.selection)}:null;}if(!D||!D.selection||!D.selection.selectionItems){return{selection:U.copy(o.selection)};}var u=this.createPersistentStructure();D.selection.selectionItems.forEach(function(s){var a=U.getArrayElementByKey("columnKey",s.columnKey,o.selection.selectionItems);if(a){if(a.visible!==undefined){s.visible=a.visible;}}u.selection.selectionItems.push(s);});return u;};
S.prototype._isSemanticEqual=function(D,o){var s=function(a,b){if(a.visible===true&&(b.visible===false||b.visible===undefined)){return-1;}else if((a.visible===false||a.visible===undefined)&&b.visible===true){return 1;}else if(a.visible===true&&b.visible===true){return 0;}else if((a.visible===false||a.visible===undefined)&&(b.visible===false||b.visible===undefined)){if(a.columnKey<b.columnKey){return-1;}else if(a.columnKey>b.columnKey){return 1;}else{return 0;}}};var e=U.copy(D.selection.selectionItems).sort(s);var f=U.copy(o.selection.selectionItems).sort(s);return!e.some(function(a,i){if(!U.semanticEqual(a,f[i])){return true;}});};
S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);};
return S;},true);
sap.ui.predefine('sap/ui/comp/personalization/SelectionWrapper',['jquery.sap.global','sap/ui/core/Element'],function(q,E){"use strict";
var S=E.extend("sap.ui.comp.personalization.SelectionWrapper",{
constructor:function(i,s){E.apply(this,arguments);},
metadata:{library:"sap.ui.comp",aggregations:{columns:{type:"sap.ui.comp.personalization.ColumnWrapper",multiple:true,singularName:"column"}}}
});
return S;},true);
sap.ui.predefine('sap/ui/comp/personalization/SortController',['jquery.sap.global','./BaseController','sap/m/library','./Util'],function(q,B,l,U){"use strict";
var S=B.extend("sap.ui.comp.personalization.SortController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(sap.m.P13nPanelType.sort);},
metadata:{events:{afterSortModelDataChange:{}}}
});
S.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){t.detachSort(this._onSort,this);t.attachSort(this._onSort,this);}};
S.prototype._getTable2Json=function(){var j=this.createPersistentStructure();U.createSort2Json(this.getTable(),j.sort.sortItems,this.getIgnoreColumnKeys());return j;};
S.prototype._getDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();U.addSortPersistentData(this._mapDataSuiteFormat2Json(d),j,this.getIgnoreColumnKeys());return j;};
S.prototype._mapDataSuiteFormat2Json=function(d){var j=this.createPersistentStructure();if(!d.SortOrder||!d.SortOrder.length){return j;}j.sort.sortItems=d.SortOrder.map(function(s){return{columnKey:s.Property,isSorted:true,operation:s.Descending?"Descending":"Ascending"};});return j;};
S.prototype.syncTable2TransientModel=function(){var t=this.getTable();var i=[];var c;var C;var o=this.getColumnMap(true);if(t){if(U.getTableBaseType(t)===sap.ui.comp.personalization.TableType.Table){for(C in o){c=o[C];if(U.isSortable(c)){i.push({columnKey:C,text:c.getLabel().getText(),tooltip:(c.getTooltip()instanceof sap.ui.core.TooltipBase)?c.getTooltip().getTooltip_Text():c.getTooltip_Text()});}}}else if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ResponsiveTable){for(C in o){c=o[C];if(U.isSortable(c)){i.push({columnKey:C,text:c.getHeader().getText(),tooltip:(c.getHeader().getTooltip()instanceof sap.ui.core.TooltipBase)?c.getHeader().getTooltip().getTooltip_Text():c.getHeader().getTooltip_Text()});}}}else if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ChartWrapper){for(C in o){c=o[C];i.push({columnKey:C,text:c.getLabel(),tooltip:(c.getTooltip()instanceof sap.ui.core.TooltipBase)?c.getTooltip().getTooltip_Text():c.getTooltip_Text()});}}}U.sortItemsByText(i,"text");var I=this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.sort.items;if(q(i).not(I).length!==0||q(I).not(i).length!==0){this.getModel("$sapuicomppersonalizationBaseController").getData().transientData.sort.items=i;}};
S.prototype._onSort=function(e){e.preventDefault();var a=e.mParameters.columnAdded;var t=this.getTable();if(typeof t==="string"){t=sap.ui.getCore().byId(t);}this.fireBeforePotentialTableChange();if(!a){var c=this.getColumnMap();for(var C in c){var o=c[C];if(o.setSorted){o.setSorted(false);}}}var o=e.mParameters.column;if(o&&o.setSorted){o.setSorted(true);o.setSortOrder(e.mParameters.sortOrder);}var s=this.getModel("$sapuicomppersonalizationBaseController").getData().persistentData.sort;if(!a){s.sortItems=[];}var i=U.getIndexByKey("columnKey",U.getColumnKey(o),s.sortItems);if(i>-1){s.sortItems.splice(i,1);}s.sortItems.push({columnKey:U.getColumnKey(o),operation:e.mParameters.sortOrder});this.fireAfterPotentialTableChange();this.fireAfterSortModelDataChange();};
S.prototype.getPanel=function(){sap.ui.getCore().loadLibrary("sap.m");q.sap.require("sap/m/P13nSortPanel");q.sap.require("sap/m/P13nItem");q.sap.require("sap/m/P13nSortItem");if(!this.getColumnHelper().hasSortableColumns()){return null;}var t=this;var p=new sap.m.P13nSortPanel({containerQuery:true,items:{path:"$sapmP13nPanel>/transientData/sort/items",template:new sap.m.P13nItem({columnKey:"{$sapmP13nPanel>columnKey}",text:"{$sapmP13nPanel>text}",tooltip:"{$sapmP13nPanel>tooltip}",maxLength:"{$sapmP13nPanel>maxlength}",type:"{$sapmP13nPanel>type}"})},sortItems:{path:"$sapmP13nPanel>/persistentData/sort/sortItems",template:new sap.m.P13nSortItem({columnKey:"{$sapmP13nPanel>columnKey}",operation:"{$sapmP13nPanel>operation}"})},beforeNavigationTo:t.setModelFunction()});p.attachAddSortItem(function(e){var d=this.getModel("$sapuicomppersonalizationBaseController").getData();var a=e.getParameters();var s={columnKey:a.sortItemData.getColumnKey(),operation:a.sortItemData.getOperation()};if(a.index>-1){d.persistentData.sort.sortItems.splice(a.index,0,s);}else{d.persistentData.sort.sortItems.push(s);}this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);},this);p.attachRemoveSortItem(function(e){var a=e.getParameters();var d=this.getModel("$sapuicomppersonalizationBaseController").getData();if(a.index>-1){d.persistentData.sort.sortItems.splice(a.index,1);this.getModel("$sapuicomppersonalizationBaseController").setData(d,true);}},this);return p;};
S.prototype.syncJsonModel2Table=function(j){var c=this.getColumnMap();var C=q.extend(true,{},c);this.fireBeforePotentialTableChange();if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table){j.sort.sortItems.forEach(function(a){var o=c[a.columnKey];if(!o){return;}if(!o.getSorted()){o.setSorted(true);}if(o.getSortOrder()!==a.operation){o.setSortOrder(a.operation);}delete C[a.columnKey];});for(var s in C){var o=C[s];if(o&&o.getSorted()){o.setSorted(false);}}}this.fireAfterPotentialTableChange();};
S.prototype.getChangeType=function(p,P){if(!P||!P.sort||!P.sort.sortItems){return sap.ui.comp.personalization.ChangeType.Unchanged;}var i=JSON.stringify(p.sort.sortItems)!==JSON.stringify(P.sort.sortItems);return i?sap.ui.comp.personalization.ChangeType.ModelChanged:sap.ui.comp.personalization.ChangeType.Unchanged;};
S.prototype.getChangeData=function(p,P){if(!p||!p.sort||!p.sort.sortItems){return{sort:{sortItems:[]}};}if(!P||!P.sort||!P.sort.sortItems){return{sort:U.copy(p.sort)};}if(JSON.stringify(p.sort.sortItems)!==JSON.stringify(P.sort.sortItems)){return{sort:U.copy(p.sort)};}return null;};
S.prototype.getUnionData=function(p,P){if(!P||!P.sort||!P.sort.sortItems){return{sort:U.copy(p.sort)};}return{sort:U.copy(P.sort)};};
S.prototype.getDataSuiteFormatSnapshot=function(d){var p=this.getUnionData(this.getPersistentDataRestore(),this.getPersistentData());if(!p.sort||!p.sort.sortItems||!p.sort.sortItems.length){return;}d.SortOrder=p.sort.sortItems.map(function(s){return{Property:s.columnKey,Descending:s.operation==="Descending"};});};
S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table){t.detachSort(this._onSort,this);}};
return S;},true);
sap.ui.predefine('sap/ui/comp/personalization/Util',['./ChartWrapper','./SelectionWrapper','./ColumnWrapper','sap/ui/comp/library','sap/m/library'],function(C,S,c,d,M){"use strict";var U={splitDimeasures:function(D,i,a,m){D.forEach(function(o){var I=this.getArrayElementByKey("columnKey",o.columnKey,i);if(I.aggregationRole===sap.ui.comp.personalization.AggregationRole.Dimension){a.push(o);}else if(I.aggregationRole===sap.ui.comp.personalization.AggregationRole.Measure){m.push(o);}},this);},createChartWrapper:function(o,a,b){var p;var e={};o.getDimensions().forEach(function(D){p=D.data("p13nData");e[p.columnKey]=new c({label:D.getLabel(),tooltip:D.getTooltip(),selected:o.getVisibleDimensions().indexOf(D.getName())>-1,aggregationRole:sap.ui.comp.personalization.AggregationRole.Dimension,role:D.getRole()?D.getRole():D.getMetadata().getProperty("role").getDefaultValue(),sorted:p.sorted,sortOrder:p.sortOrder,customData:new sap.ui.core.CustomData({key:"p13nData",value:p})});});o.getMeasures().forEach(function(m){p=m.data("p13nData");e[p.columnKey]=new c({label:m.getLabel(),tooltip:m.getTooltip(),selected:o.getVisibleMeasures().indexOf(m.getName())>-1,aggregationRole:sap.ui.comp.personalization.AggregationRole.Measure,role:m.getRole()?m.getRole():m.getMetadata().getProperty("role").getDefaultValue(),sorted:p.sorted,sortOrder:p.sortOrder,customData:new sap.ui.core.CustomData({key:"p13nData",value:p})});});if(a){a.forEach(function(p){e[p.columnKey]=new c({label:p.label,tooltip:p.tooltip,selected:false,aggregationRole:sap.ui.comp.personalization.AggregationRole.NotDimeasure,sorted:p.sorted,sortOrder:p.sortOrder,customData:new sap.ui.core.CustomData({key:"p13nData",value:p})});});}return new C({chart:o,columns:b.map(function(s){return e[s];})});},createSelectionWrapper:function(m,f){var a=m.map(function(o){var b=new c({label:o.text,selected:o.visible,href:f?undefined:o.href,target:o.target,press:o.press});b.data("p13nData",{columnKey:o.key});return b;},this);return new S({columns:a});},sortItemsByText:function(i,k){var l;try{var l=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=='undefined'){var o=window.Intl.Collator(l,{numeric:true});i.sort(function(a,b){return o.compare(a[k],b[k]);});}else{i.sort(function(a,b){return a[k].localeCompare(b[k],l,{numeric:true});});}}catch(e){}},recoverPersonalisationDateData:function(p,a){if(a.length&&p&&p.filter){p.filter.filterItems.forEach(function(f){if(a.indexOf(f.columnKey)>-1){if(f.value1&&typeof(f.value1)==="string"){f.value1=new Date(f.value1);}if(f.value2&&typeof(f.value2)==="string"){f.value2=new Date(f.value2);}}});}},recoverPersonalisationTimeData:function(p,a){if(a.length&&p&&p.filter){p.filter.filterItems.forEach(function(f){if(a.indexOf(f.columnKey)>-1){if(f.value1&&typeof(f.value1)==="string"){f.value1=new Date(f.value1);}if(f.value2&&typeof(f.value2)==="string"){f.value2=new Date(f.value2);}}});}},recoverPersonalisationBooleanData:function(p,a){if(a.length&&p&&p.filter){p.filter.filterItems.forEach(function(f){if(a.indexOf(f.columnKey)>-1){if(f.value1&&typeof(f.value1)==="string"){f.value1=f.value1==="true";}if(f.value2&&typeof(f.value2)==="string"){f.value2=f.value2==="true";}}});}},getUnionOfAttribute:function(s,a){var u=[];var A=function(b){if(u.indexOf(b)<0){u.push(b);}};for(var n in s){var N=s[n];if(!N[a]){continue;}N[a].forEach(A);}return u;},getUnionOfColumnKeys:function(o){var u=[];var f=function(a){var b=u.concat(a);u=b.filter(function(i,p){return b.indexOf(i)===p;});};for(var n in o){f(o[n]);}return u;},copy:function(o){if(o instanceof Array){return jQuery.extend(true,[],o);}return jQuery.extend(true,{},o);},sort:function(k,A){var r=this.copy(A);r.sort(function(a,b){var t=a[k].toLocaleLowerCase();var T=b[k].toLocaleLowerCase();if(t<T){return-1;}if(t>T){return 1;}return 0;});return r;},removeEmptyProperty:function(o){for(var t in o){if(o[t]===null||o[t]===undefined){delete o[t];}}return o;},semanticEqual:function(i,I){if(!i||!I){return false;}for(var p in i){if(i[p]!==I[p]){return false;}}return true;},hasChangedType:function(o){for(var t in o){if(o[t]===sap.ui.comp.personalization.ChangeType.ModelChanged||o[t]===sap.ui.comp.personalization.ChangeType.TableChanged){return true;}}return false;},isNamespaceChanged:function(o,n){if(o[n]){return o[n]===sap.ui.comp.personalization.ChangeType.ModelChanged||o[n]===sap.ui.comp.personalization.ChangeType.TableChanged;}return false;},createArrayFromString:function(e){if(!e){return[];}var E=[];var r=e.split(",");r.forEach(function(f){if(f!==""){E.push(f.trim());}});return E;},getIndexByKey:function(k,K,a){if(!a||!a.length){return-1;}var I=-1;a.some(function(e,i){if(e[k]!==undefined&&e[k]===K){I=i;return true;}});return I;},getColumnKey:function(o){return this._getCustomProperty(o,"columnKey")||o.getId();},getColumnType:function(o){return this._getCustomProperty(o,"type");},isGroupable:function(o){if(sap.ui.table&&sap.ui.table.AnalyticalColumn&&o instanceof sap.ui.table.AnalyticalColumn){var t=o.getParent();var b=t&&t.getBinding("rows");var r=b&&b.getAnalyticalQueryResult();if(t&&r&&r.findDimensionByPropertyName(o.getLeadingProperty())&&jQuery.inArray(o.getLeadingProperty(),b.getSortablePropertyNames())>-1&&jQuery.inArray(o.getLeadingProperty(),b.getFilterablePropertyNames())>-1){return true;}}if(o instanceof sap.m.Column){return this.isSortable(o);}return false;},isSortable:function(o){if(o.getSortProperty){return!!o.getSortProperty();}return!!this._getCustomProperty(o,"sortProperty");},isFilterable:function(o){if(o.getFilterProperty){return!!o.getFilterProperty();}return!!this._getCustomProperty(o,"filterProperty");},isConsistent:function(a){if(!a||!a.length){return true;}var o={};var b=true;var h=!!this._getCustomProperty(a[0],"columnKey");a.some(function(e){var s=this._getCustomProperty(e,"columnKey");var H=!!s;if(H!==h){b=false;return true;}if(h){if(o[s]){b=false;return true;}o[s]={};}},this);return b;},getArrayElementByKey:function(k,K,a){if(!a||!a.length){return null;}var e=null;a.some(function(E){if(E[k]!==undefined&&E[k]===K){e=E;return true;}});return e;},isColumnIgnored:function(o,i){if(!i){return false;}return i.indexOf(this.getColumnKey(o))>-1;},createSort2Json:function(t,D,i){if(this.getTableBaseType(t)!==sap.ui.comp.personalization.TableType.Table&&this.getTableType(t)!==sap.ui.comp.personalization.TableType.ChartWrapper){return;}this.addSortPersistentData(this._mapTable2P13nSortJson(t),{sort:{sortItems:D}},i);},addSortPersistentData:function(s,D,i){s.sort.sortItems.forEach(function(o){if(!o.isSorted||i.indexOf(o.columnKey)>-1){return;}D.sort.sortItems.push({columnKey:o.columnKey,operation:o.operation});});},_mapTable2P13nSortJson:function(t){return{sort:{sortItems:t.getColumns().map(function(o){return{columnKey:U.getColumnKey(o),isSorted:o.getSorted(),operation:o.getSortOrder()};})}};},getTableType:function(t){if(t instanceof sap.ui.comp.personalization.ChartWrapper){return sap.ui.comp.personalization.TableType.ChartWrapper;}if(t instanceof sap.ui.comp.personalization.SelectionWrapper){return sap.ui.comp.personalization.TableType.SelectionWrapper;}if(sap.m&&sap.m.Table&&t instanceof sap.m.Table){return sap.ui.comp.personalization.TableType.ResponsiveTable;}if(sap.ui.table&&sap.ui.table.AnalyticalTable&&t instanceof sap.ui.table.AnalyticalTable){return sap.ui.comp.personalization.TableType.AnalyticalTable;}if(sap.ui.table&&sap.ui.table.TreeTable&&t instanceof sap.ui.table.TreeTable){return sap.ui.comp.personalization.TableType.TreeTable;}if(sap.ui.table&&sap.ui.table.Table&&t instanceof sap.ui.table.Table){return sap.ui.comp.personalization.TableType.Table;}return null;},getTableBaseType:function(t){switch(this.getTableType(t)){case sap.ui.comp.personalization.TableType.ChartWrapper:return sap.ui.comp.personalization.TableType.ChartWrapper;case sap.ui.comp.personalization.TableType.SelectionWrapper:return sap.ui.comp.personalization.TableType.SelectionWrapper;case sap.ui.comp.personalization.TableType.ResponsiveTable:return sap.ui.comp.personalization.TableType.ResponsiveTable;case sap.ui.comp.personalization.TableType.AnalyticalTable:case sap.ui.comp.personalization.TableType.Table:case sap.ui.comp.personalization.TableType.TreeTable:return sap.ui.comp.personalization.TableType.Table;default:return null;}},_getCustomProperty:function(o,p){var a=this._getCustomData(o);if(!a||!p){return null;}return a[p];},_getCustomData:function(o){if(!o){return null;}var a=o.data("p13nData");if(typeof a==="string"){try{a=JSON.parse(a);o.data("p13nData",a);}catch(e){}}return a;}};return U;},true);
sap.ui.predefine('sap/ui/comp/personalization/Validator',['sap/m/library','sap/ui/core/MessageType'],function(M,a){"use strict";var V={checkGroupAndColumns:function(t,s,p,c,P,r){if(t!==sap.ui.comp.personalization.TableType.AnalyticalTable||!s.group||!s.columns){return Promise.resolve(r);}var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");for(var C in c){var b=s.columns.controller.isColumnSelected(p.columns,P.columns,C);var g=s.group.controller.isGroupSelected(p.group,P.group,C);if(g&&!b){r.push({columnKey:C,panelTypes:[sap.m.P13nPanelType.group,sap.m.P13nPanelType.columns],messageType:a.Warning,messageText:R.getText("PERSODIALOG_MSG_GROUPING_NOT_POSSIBLE_DESCRIPTION")});}}return Promise.resolve(r);},checkSaveChanges:function(t,s,p,r){if(t!==sap.ui.comp.personalization.TableType.SelectionWrapper||!s.selection||!s.selection.payload||!p||!p.selection){return Promise.resolve(r);}var S=p.selection.selectionItems.map(function(o){return{columnKey:o.getColumnKey(),visible:o.getSelected()};});return s.selection.payload.callbackSaveChanges(S).then(function(b){if(b){return r;}r.push({panelTypes:[sap.m.P13nPanelType.selection],messageType:a.Error,messageText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("PERSODIALOG_MSG_CHANGES_SAVE_FAILED")});return r;});}};return V;},true);
sap.ui.predefine('sap/ui/comp/providers/BaseValueListProvider',['jquery.sap.global','sap/ui/base/EventProvider','sap/ui/comp/odata/ODataType','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/util/FormatUtil'],function(q,E,O,M,F){"use strict";
var B=E.extend("sap.ui.comp.providers.BaseValueListProvider",{constructor:function(p){E.call(this);this.sFieldName=p.fieldName;this.oControl=p.control;this.sValueListEntitySetName=null;this.oODataModel=p.model;this.oFilterModel=p.filterModel;this.oFilterProvider=p.filterProvider;this.sDisplayFormat=p.displayFormat;this._oDateFormatSettings=p.dateFormatSettings;this._fieldViewMetadata=p.fieldViewMetadata;if(!this._oDateFormatSettings){this._oDateFormatSettings={};}if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}this.bResolveInOutParams=(p.resolveInOutParams===false)?false:true;this.sDisplayBehaviour=p.displayBehaviour;this.sDDLBDisplayBehaviour=this.sDisplayBehaviour;if(!this.sDDLBDisplayBehaviour||this.sDDLBDisplayBehaviour===sap.ui.comp.smartfilterbar.DisplayBehaviour.auto){this.sDDLBDisplayBehaviour=this.oFilterProvider?this.oFilterProvider.sDefaultDropDownDisplayBehaviour:sap.ui.comp.smartfilterbar.DisplayBehaviour.descriptionOnly;}this.sPropertyTypePath="";if(this.bResolveInOutParams&&!this.oFilterModel&&!this.oFilterProvider){this._resolvePropertyPath();}if(p.loadAnnotation&&p.fullyQualifiedFieldName){this._oMetadataAnalyser=p.metadataAnalyser;this._sFullyQualifiedFieldName=p.fullyQualifiedFieldName;this._attachAnnotationLoadOnRender();}else{this._onAnnotationLoad({primaryValueListAnnotation:p.annotation,additionalAnnotations:p.additionalAnnotations});}if(!sap.ui.comp.smartfilterbar||!sap.ui.comp.smartfilterbar.FilterProvider){q.sap.require("sap.ui.comp.smartfilterbar.FilterProvider");}}});
B.prototype._attachAnnotationLoadOnRender=function(){this.oBeforeRenderingEventDelegate={onBeforeRendering:function(){this.oControl.removeEventDelegate(this.oBeforeRenderingEventDelegate,this);delete this.oBeforeRenderingEventDelegate;if(!this._bValueListRequested){if(this.bInitialised){if(this._onMetadataInitialised&&this.sAggregationName&&!this.bTypeAheadEnabled&&this.oControl.$()){this._onMetadataInitialised();}}else{this._loadAnnotation();}}}};this.oControl.addEventDelegate(this.oBeforeRenderingEventDelegate,this);};
B.prototype.loadAnnotation=function(){if(this.oBeforeRenderingEventDelegate){this.oControl.removeEventDelegate(this.oBeforeRenderingEventDelegate,this);delete this.oBeforeRenderingEventDelegate;}if(this.oAfterRenderingEventDelegate){this.oControl.removeEventDelegate(this.oAfterRenderingEventDelegate,this);delete this.oAfterRenderingEventDelegate;}this._loadAnnotation();};
B.prototype._loadAnnotation=function(){if(!this._bValueListRequested){this._bValueListRequested=true;if(!this._oMetadataAnalyser){this._oMetadataAnalyser=new M(this.oODataModel);this._bCleanupMetadataAnalyser=true;}this._oMetadataAnalyser.getValueListAnnotationLazy(this._sFullyQualifiedFieldName).then(this._onAnnotationLoad.bind(this),function(e){this._oError=e;this.bInitialised=true;q.sap.log.debug(e);}.bind(this));}};
B.prototype.attachValueListChanged=function(f,l){this.attachEvent("valueListChanged",f,l);};
B.prototype.detachValueListChanged=function(f,l){this.detachEvent("valueListChanged",f,l);};
B.prototype._onAnnotationLoad=function(v){this.oPrimaryValueListAnnotation=v.primaryValueListAnnotation;this.additionalAnnotations=v.additionalAnnotations;this._resolveAnnotationData(this.oPrimaryValueListAnnotation);this.bInitialised=true;if(this._onMetadataInitialised&&this.sAggregationName&&!this.bTypeAheadEnabled&&this.oControl.$()){this._onMetadataInitialised();}};
B.prototype._resolvePropertyPath=function(){var b=this.oControl.getBindingInfo("value"),p,P,a;if(b&&b.parts){p=b.parts[0]?b.parts[0].path:"";}if(p){a=p.split("/");if(a.length>1){P=a[a.length-1];this.sPropertyTypePath=p.replace("/"+P,"");}}};
B.prototype._resolveAnnotationData=function(a){var l=0,i=0,c,f,t,T,C,o;if(this.oODataModel&&a){this.bSupportBasicSearch=a.isSearchSupported;this.sValueListTitle=a.valueListTitle||a.qualifier;this.sKey=a.keyField;this._aKeys=a.keys;this.sValueListEntitySetName=a.valueListEntitySetName;this.mInParams=a.inParams;this.mOutParams=a.outParams;this.sTokenDisplayBehaviour=this.sDisplayBehaviour;if(!this.sTokenDisplayBehaviour||this.sTokenDisplayBehaviour===sap.ui.comp.smartfilterbar.DisplayBehaviour.auto){this.sTokenDisplayBehaviour=this.oFilterProvider?this.oFilterProvider.sDefaultTokenDisplayBehaviour:sap.ui.comp.smartfilterbar.DisplayBehaviour.descriptionAndId;}if(!a.descriptionField){this.sTokenDisplayBehaviour=sap.ui.comp.smartfilterbar.DisplayBehaviour.idOnly;}this.sDescription=a.descriptionField||this.sKey;if(this.sValueListEntitySetName&&this.sKey){this._aCols=[];this.aSelect=[];c=a.valueListFields;l=c.length;for(i=0;i<l;i++){f=c[i];t=null;T=null;C=undefined;o=undefined;if(f.type==="Edm.Boolean"){t="boolean";}else if(f.type==="Edm.DateTime"&&f.displayFormat==="Date"){t="date";o=this._oDateFormatSettings;C={displayFormat:"Date"};}else if(f.type==="Edm.Decimal"){t="decimal";C={precision:f.precision,scale:f.scale};}else if(f.type==="Edm.String"){t="string";}T=O.getType(f.type,o,C);if(f.visible){this._aCols.push({label:f.fieldLabel,tooltip:f.quickInfo||f.fieldLabel,type:t,oType:T,width:F.getWidth(f,15),template:f.name,sort:f.sortable?f.name:undefined,sorted:f.sortable&&f.name===this.sKey,sortOrder:"Ascending"});}this.aSelect.push(f.name);}if(a.descriptionField){this.aSelect.push(a.descriptionField);}}else{if(!this.sKey){q.sap.log.error("BaseValueListProvider","key for ValueListEntitySetName '"+this.sValueListEntitySetName+"' missing! Please check your annotations");}}}};
B.prototype._getFilterData=function(){var d,f={};if(this.oFilterProvider&&this.oFilterProvider._oSmartFilter){d=this.oFilterProvider._oSmartFilter.getFilterData();if(this._fieldViewMetadata&&this._fieldViewMetadata.fieldName&&(this._fieldViewMetadata.fieldName.indexOf(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX)===0)){Object.keys(d).forEach(function(n){var a=n.split(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX);f[a[a.length-1]]=d[n];});return f;}}return d;};
B.prototype._setFilterData=function(f){var d=f,o={};if(this.oFilterProvider){if(this._fieldViewMetadata&&this._fieldViewMetadata.fieldName&&(this._fieldViewMetadata.fieldName.indexOf(sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX)===0)){Object.keys(f).forEach(function(n){o[sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX+n]=f[n];});d=o;}this.oFilterProvider.setFilterData(d);}};
B.prototype._calculateFilterInputData=function(){var l,v,d=null;delete this.mFilterInputData;if(this.oFilterProvider&&this.oFilterProvider._oSmartFilter){d=this._getFilterData();}else if(this.oFilterModel){d=this.oFilterModel.getData();}else if(this.oODataModel&&this.bResolveInOutParams){d=this.oODataModel.getData(this.sPropertyTypePath,this.oControl.getBindingContext());}if(this.mInParams&&d){this.mFilterInputData={};this.aFilterField=[];for(l in this.mInParams){if(l){v=this.mInParams[l];if(v!==this.sKey){if(d[l]){this.mFilterInputData[v]=d[l];this.aFilterField.push(v);}}}}}};
B.prototype._calculateAndSetFilterOutputData=function(d){var l,v,f=null,D,e,n,i,a;if(this.mOutParams&&d&&(this.oFilterProvider||this.oFilterModel)){f={};a=function(o){return o.key===n.key;};for(l in this.mOutParams){if(l){v=this.mOutParams[l];if(v!==this.sKey){e=null;i=d.length;while(i--){D=d[i];if(D[v]){n={key:D[v]};if(!f[l]){if(!e&&this.oFilterModel){e=this.oFilterModel.getData();}if(e&&e[l]&&e[l].items){f[l]=e[l];}else{f[l]={items:[]};}}if(f[l].items.filter(a).length<=0){var b=false;if(this.oFilterProvider&&e&&e[l]&&e[l].ranges){e[l].ranges.some(function(r){if(r.operation==="EQ"&&r.value1===n.key){b=true;}return b;});}if(!b){f[l].items.push(n);}}}}}}}if(f){if(this.oFilterProvider){this._setFilterData(f);if(!q.isEmptyObject(f)){this.fireEvent("valueListChanged",{"changes":Object.keys(f)});}}else if(this.oFilterModel){this.oFilterModel.setData(f,true);}}}else if(this.oODataModel&&this.bResolveInOutParams){this._calculateAndSetODataModelOutputData(d[0]);}};
B.prototype._calculateAndSetODataModelOutputData=function(d){var b,l,v,p,V,c={};if(d&&this.mOutParams){b=this.oControl.getBindingContext();for(l in this.mOutParams){if(l){v=this.mOutParams[l];if(v!==this.sKey){V=d[v];c[l]=V;p=this.sPropertyTypePath?this.sPropertyTypePath+"/"+l:l;this.oODataModel.setProperty(p,V,b,true);}}}if(c&&!q.isEmptyObject(c)){this.fireEvent("valueListChanged",{"changes":c});}}};
B.prototype.destroy=function(){sap.ui.base.EventProvider.prototype.destroy.apply(this,arguments);if(this._bCleanupMetadataAnalyser&&this._oMetadataAnalyser){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;this.oControl=null;this.sFieldName=null;this.mFilterInputData=null;this.aFilterField=null;this.sValueListEntitySetName=null;this.oODataModel=null;this.oFilterModel=null;this.oFilterProvider=null;this.oPrimaryValueListAnnotation=null;this.additionalAnnotations=null;this.sDisplayFormat=null;this.bSupportBasicSearch=null;this.bInitialised=null;this._oError=null;this.sValueListTitle=null;this.sKey=null;this._aKeys=null;this.mInParams=null;this.mOutParams=null;this.sDescription=null;this.aSelect=null;this._aCols=null;this.sDDLBDisplayBehaviour=null;this.sTokenDisplayBehaviour=null;this._oDateFormatSettings=null;this.bIsDestroyed=true;};
return B;},true);
sap.ui.predefine('sap/ui/comp/providers/ChartProvider',['jquery.sap.global','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/odata/ChartMetadata','sap/ui/comp/odata/ODataType','./ControlProvider','sap/ui/core/format/DateFormat'],function(q,M,C,O,a,D){"use strict";var b=function(p){if(p){this._oParentODataModel=p.model;this.sEntitySet=p.entitySet;this._sIgnoredFields=p.ignoredFields;this._bSkipAnnotationParse=p.skipAnnotationParse==="true";this._sChartQualifier=p.chartQualifier;this._sPresentationVariantQualifier=p.presentationVariantQualifier;this._oDefaultDropDownDisplayBehaviour=p.defaultDropDownDisplayBehaviour;try{this._oDateFormatSettings=p.dateFormatSettings?JSON.parse(p.dateFormatSettings):undefined;}catch(e){}if(p.chartLibrary){C.feedWithChartLibrary(p.chartLibrary);}}this._aODataFieldMetadata=[];this._oChartViewMetadata=null;this._oChartDataPointMetadata=null;this._aIgnoredFields=[];this._oMetadataAnalyser=new M(this._oParentODataModel);this._intialiseMetadata();};
b.prototype._intialiseMetadata=function(){var c,d=[],f,i,l=0;this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntitySet);this._sFullyQualifiedEntityTypeName=this._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.sEntitySet);if(!this._bSkipAnnotationParse){this._oPresentationVariant=this._oMetadataAnalyser.getPresentationVariantAnnotation(this._sFullyQualifiedEntityTypeName,this._sPresentationVariantQualifier);if(this._oPresentationVariant&&this._oPresentationVariant.chartAnnotation){this._oChartAnnotation=this._oPresentationVariant.chartAnnotation;}else{this._oChartAnnotation=this._oMetadataAnalyser.getChartAnnotation(this._sFullyQualifiedEntityTypeName,this._sChartQualifier);}}if(!this._oDefaultDropDownDisplayBehaviour){this._oDefaultDropDownDisplayBehaviour=this._oMetadataAnalyser.getTextArrangementValue(this._sFullyQualifiedEntityTypeName);}this._generateIgnoredFieldsArray();this._oControlProvider=new a({metadataAnalyser:this._oMetadataAnalyser,model:this._oParentODataModel,fieldsMetadata:this._aODataFieldMetadata,dateFormatSettings:this._oDateFormatSettings,defaultDropDownDisplayBehaviour:this._oDefaultDropDownDisplayBehaviour,enableDescriptions:false,entitySet:this.sEntitySet});if(this._aODataFieldMetadata){l=this._aODataFieldMetadata.length;}for(i=0;i<l;i++){f=this._aODataFieldMetadata[i];if(this._aIgnoredFields.indexOf(f.name)>-1||!f.visible){continue;}if(f.type.indexOf("Edm.")===0){c=this._getFieldViewMetadata(f);this._enrichWithChartViewMetadata(f,c);d.push(f);}}if(this._oChartAnnotation){this._oChartViewMetadata=q.extend({},this._oChartAnnotation);this._oChartViewMetadata.chartType=C.getChartType(this._oChartViewMetadata.chartType);this._oChartViewMetadata.fields=d;}};
b.prototype._setAnnotationMetadata=function(f){if(f&&f.fullName){var s=this._oMetadataAnalyser.getSemanticObjectsFromAnnotation(f.fullName);if(s){f.semanticObjects=s;}}};
b.prototype._getFieldViewMetadata=function(f){var c=this._oControlProvider.getFieldViewMetadata(f,false);this._setAnnotationMetadata(c);return c;};
b.prototype._generateIgnoredFieldsArray=function(){if(this._sIgnoredFields){this._aIgnoredFields=this._sIgnoredFields.split(",");}};
b.prototype._enrichWithChartViewMetadata=function(f,v){f.isMeasure=f.aggregationRole&&f.aggregationRole==="measure";f.isDimension=f.aggregationRole&&f.aggregationRole==="dimension";f.dateFormatter=this._getDateFormatter(f);f.role=this._getRole(f);f.dataPoint=this._getDataPoint(f);f.filterType=v.filterType;if(v.template){f.template=v.template;}if(f.isDimension){f.displayBehaviour=v.displayBehaviour;}f.isSemanticObject=(v.semanticObjects)?true:false;this._setInResult(f);this._setSortOrder(f);};
b.prototype._getDateFormatter=function(f){var c,d;switch(f.type){case"Edm.Date":d=D.getDateInstance(this.oDateFormatSettings);break;case"Edm.Time":d=D.getTimeInstance(this.oDateFormatSettings);break;case"Edm.DateTimeOffset":case"Edm.DateTime":if(f.displayFormat=="Date"){d=D.getDateInstance(this.oDateFormatSettings);}else{d=D.getDateTimeInstance(this.oDateFormatSettings);}break;default:break;}if(d){c=function(t){var e=new Date(t);return d.format(e);};}return c;};
b.prototype._setInResult=function(f){if(this._oPresentationVariant){if(this._oPresentationVariant.requestAtLeastFields&&this._oPresentationVariant.requestAtLeastFields.indexOf(f.name)>-1){f.inResult=true;}}};
b.prototype._setSortOrder=function(f){f.sorted=false;f.sortOrder="Ascending";var l;if(this._oPresentationVariant&&this._oPresentationVariant.sortOrderFields){l=this._oPresentationVariant.sortOrderFields.length;for(var i=0;i<l;i++){if(this._oPresentationVariant.sortOrderFields[i].name===f.name){f.sorted=true;f.sortOrder=this._oPresentationVariant.sortOrderFields[i].descending?"Descending":"Ascending";break;}}}};
b.prototype._unmarkTextDimensions=function(f,t){var i,F;for(i=0;i<f.length;i++){F=f[i];if(F.isDimension){if(t.indexOf(F.name)>-1){F.isDimension=false;}}}};
b.prototype._getRole=function(f){if(this._oChartAnnotation){if(f.isDimension&&this._oChartAnnotation.dimensionAttributes[f.name]){return C.getDimensionRole(this._oChartAnnotation.dimensionAttributes[f.name].role);}else if(f.isMeasure&&this._oChartAnnotation.measureAttributes[f.name]){return C.getMeasureRole(this._oChartAnnotation.measureAttributes[f.name].role);}}};
b.prototype._getDataPoint=function(f){if(this._oChartAnnotation&&f.isMeasure&&this._oChartAnnotation.measureAttributes[f.name]&&this._oChartAnnotation.measureAttributes[f.name].dataPoint){var d=this._oChartAnnotation.measureAttributes[f.name].dataPoint;var c=d.split("#");var Q=c.length===2?c[1]:"";return this._getMeasureDataPoint(Q,f.name);}return null;};
b.prototype.getChartViewMetadata=function(){return this._oChartViewMetadata;};
b.prototype.getChartDataPointMetadata=function(){if(!this._oChartDataPointMetadata&&this._sFullyQualifiedEntityTypeName){this._oChartDataPointMetadata=this._oMetadataAnalyser.getDataPointAnnotation(this._sFullyQualifiedEntityTypeName);}return this._oChartDataPointMetadata;};
b.prototype._getMeasureDataPoint=function(Q,m){var c=this.getChartDataPointMetadata();if(c){var d=null;if(Q){if(c.additionalAnnotations){d=c.additionalAnnotations[Q];}}else{if(c.primaryAnnotation){d=c.primaryAnnotation;}}if(d!=null&&d.Value&&d.Value.Path==m){return d;}}return null;};
b.prototype.getIsUTCDateHandlingEnabled=function(){return this._oDateFormatSettings?this._oDateFormatSettings.UTC:false;};
b.prototype.destroy=function(){if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(this._oControlProvider&&this._oControlProvider.destroy){this._oControlProvider.destroy();}this._oControlProvider=null;this._aODataFieldMetadata=null;this._oChartViewMetadata=null;this._oChartDataPointMetadata=null;this._sIgnoredFields=null;this.bIsDestroyed=true;};
b.prototype.provideSemanticColoring=function(d){var c={};if(d.Criticality){if(d.Criticality.Path){c={Calculated:d.Criticality.Path};}else{c={Static:C.getCriticalityType(d.Criticality.EnumMember)};}}else{var t={};var e=this._buildThresholds(t,d.CriticalityCalculation);if(e){c={ConstantThresholds:t};}else{c={DynamicThresholds:t};}}return c;};
b.prototype._buildThresholds=function(t,c){var d=true;t.ImprovementDirection=C.getImprovementDirectionType(c.ImprovementDirection.EnumMember);var v=C.getCriticalityThresholds();var l=v.length;var o={oneSupplied:false};var e={oneSupplied:false};for(var i=0;i<l;i++){o[v[i]]=c[v[i]]?c[v[i]].Path:undefined;o.oneSupplied=o.oneSupplied||o[v[i]];if(!o.oneSupplied){e[v[i]]=C.calculateConstantValue(c[v[i]]);e.oneSupplied=e.oneSupplied||e[v[i]];}}if(o.oneSupplied){d=false;for(var i=0;i<l;i++){if(o[v[i]]){t[v[i]]=o[v[i]];}}}else{var A;t.AggregationLevels=[];if(e.oneSupplied){A={VisibleDimensions:null};for(var i=0;i<l;i++){if(e[v[i]]){A[v[i]]=e[v[i]];}}t.AggregationLevels.push(A);}if(c.ConstantThresholds&&c.ConstantThresholds.length>0){for(var i=0;i<c.ConstantThresholds.length;i++){var f=c.ConstantThresholds[i];var V=f.AggregationLevel?[]:null;if(f.AggregationLevel&&f.AggregationLevel.length>0){for(var j=0;j<f.AggregationLevel.length;j++){V.push(f.AggregationLevel[j].PropertyPath);}}A={VisibleDimensions:V};for(var j=0;j<l;j++){var n=C.calculateConstantValue(f[v[j]]);if(n){A[v[j]]=n;}}t.AggregationLevels.push(A);}}}return d;};
b.prototype.getMaxItems=function(){var m=-1;if(this._oPresentationVariant&&this._oPresentationVariant.maxItems){m=Math.min(this._oPresentationVariant.maxItems,100);}return m;};
return b;},true);
sap.ui.predefine('sap/ui/comp/providers/ControlProvider',['jquery.sap.global','sap/m/CheckBox','sap/m/ComboBox','sap/m/DatePicker','sap/m/TimePicker','sap/m/HBox','sap/m/Input','sap/m/Text','sap/m/ObjectIdentifier','sap/m/ObjectStatus','sap/m/Image','sap/m/Link','sap/m/VBox','sap/ui/comp/navpopover/SmartLink','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/smartfield/ODataHelper','sap/ui/comp/smartfield/SmartField','sap/ui/comp/odata/ODataType','sap/ui/comp/odata/CriticalityMetadata','sap/ui/comp/util/FormatUtil','sap/ui/core/Control','sap/ui/comp/navpopover/SemanticObjectController'],function(q,C,a,D,T,H,I,b,O,c,d,L,V,S,M,e,f,g,h,F,j,k){"use strict";var l;var m=function(p){if(p){this._oParentODataModel=p.model;this._oMetadataAnalyser=p.metadataAnalyser;this._aODataFieldMetadata=p.fieldsMetadata;this._oLineItemAnnotation=p.lineItemAnnotation;this._oSemanticKeyAnnotation=p.semanticKeyAnnotation;this._smartTableId=p.smartTableId;this._isAnalyticalTable=p.isAnalyticalTable;this._isMobileTable=p.isMobileTable;this._oDateFormatSettings=p.dateFormatSettings;this._bEnableDescriptions=p.enableDescriptions;this._oCurrencyFormatSettings=p.currencyFormatSettings;this._oDefaultDropDownDisplayBehaviour=p.defaultDropDownDisplayBehaviour||"descriptionAndId";this.useSmartField=p.useSmartField==="true";this.useSmartToggle=p.useSmartToggle==="true";this._sEntitySet=p.entitySet;this._oSemanticKeyAdditionalControl=p._semanticKeyAdditionalControl;this._oSemanticObjectController=p.semanticObjectController;}if(!this._oMetadataAnalyser&&this._oParentODataModel){this._oMetadataAnalyser=new M(this._oParentODataModel);this._intialiseMetadata();}this._mSmartField={};this._oHelper=new e(this._oMetadataAnalyser.oModel);this._aValueListProvider=[];this._aValueHelpProvider=[];this._aLinkHandlers=[];};
m.prototype._intialiseMetadata=function(){if(!this._aODataFieldMetadata){this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntity);}};
m.prototype.getFieldViewMetadata=function(o,i){var n=this._createFieldMetadata(o);this._createFieldTemplate(n,i);return n;};
m.prototype._createFieldTemplate=function(v,i){if(this.useSmartField){v.template=new f({value:{path:v.name},entitySet:this._sEntitySet,contextEditable:{path:"sm4rtM0d3l>/editable",mode:"OneWay"},controlContext:this._isMobileTable?"responsiveTable":"table",wrapping:this._isMobileTable});if(g.isNumeric(v.type)||g.isDateOrTime(v.type)){v.template.setTextAlign("Right");v.template.setWidth("100%");}this._completeSmartField(v);v.template._setPendingEditState(i);}if(this.useSmartToggle){v.template=new l({editable:{path:"sm4rtM0d3l>/editable",mode:"OneWay"},edit:this.useSmartField?v.template:this._createEditableTemplate(v),display:this._createDisplayOnlyTemplate(v)});}else if(!this.useSmartField){v.template=i?this._createEditableTemplate(v):this._createDisplayOnlyTemplate(v);}};
m.prototype._completeSmartField=function(v){var o={annotations:{},path:v.name};if(!this._mSmartField.entitySetObject){this._mSmartField.entitySetObject=this._oHelper.oMeta.getODataEntitySet(this._sEntitySet);this._mSmartField.entityType=this._oHelper.oMeta.getODataEntityType(this._mSmartField.entitySetObject.entityType);}o.modelObject=this._oParentODataModel;o.entitySetObject=this._mSmartField.entitySetObject;o.entitySet=this._mSmartField.entitySetObject;o.entityType=this._mSmartField.entityType;this._oHelper.getProperty(o);v.fieldControlProperty=this._oHelper.oAnnotation.getFieldControlPath(o.property.property);if(v.fieldControlProperty&&v.parentPropertyName){v.fieldControlProperty=v.parentPropertyName+"/"+v.fieldControlProperty;}o.annotations.uom=this._oHelper.getUnitOfMeasure2(o);o.annotations.text=this._oHelper.getTextProperty2(o);o.annotations.lineitem=this._oLineItemAnnotation;o.annotations.semantic=M.getSemanticObjectsFromProperty(o.property.property);this._oHelper.getUOMTextAnnotation(o);if(o.property.property["sap:value-list"]||o.property.property["com.sap.vocabularies.Common.v1.ValueList"]){o.annotations.valuelist=this._oHelper.getValueListAnnotationPath(o);if(o.property.property["sap:value-list"]){o.annotations.valuelistType=o.property.property["sap:value-list"];}else{o.annotations.valuelistType=this._oMetadataAnalyser.getValueListSemantics(o.property.property["com.sap.vocabularies.Common.v1.ValueList"]);}}this._oHelper.getUOMValueListAnnotationPath(o);delete o.entitySet;v.template.data("configdata",{"configdata":o});v.template.data("dateFormatSettings",this._oDateFormatSettings);v.template.data("currencyFormatSettings",this._oCurrencyFormatSettings);v.template.data("defaultDropDownDisplayBehaviour",this._oDefaultDropDownDisplayBehaviour);if(o.annotations.uom||g.isNumeric(v.type)||g.isDateOrTime(v.type)){var A=v.template.getTextAlign();if(A==="Initial"){A="Right";}v.align=A;}};
m.prototype._createEditableTemplate=function(v,B){var t=null,o,i,n;if(v.type==="Edm.DateTime"||v.type==="Edm.DateTimeOffset"){if(v.displayFormat==="Date"){o=this._oDateFormatSettings;i={displayFormat:"Date"};t=new D({dateValue:{path:v.name}});}}else if(v.type==="Edm.Boolean"){t=new C({selected:{path:v.name}});}else if(v.type==="Edm.Decimal"){i={precision:v.precision,scale:v.scale};}else if(v.type==="Edm.String"){i={isDigitSequence:v.isDigitSequence};}n=g.getType(v.type,o,i);if(v.semanticObjects&&(!B)){t=this._createSmartLinkFieldTemplate(v,n,function(){return this._createEditableTemplate(v,true);}.bind(this));}if(!t){if(v.type==="Edm.Time"){t=new T({value:{path:v.name,type:n}});}else{t=new I({value:{path:v.name,type:n}});if(v.unit){t.bindProperty("description",{path:v.unit});t.setTextAlign("Right");t.setTextDirection("LTR");t.setFieldWidth("80%");}else if(this._bEnableDescriptions&&v.description){t.bindProperty("description",{path:v.description});}else if(g.isNumeric(v.type)||g.isDateOrTime(v.type)){t.setTextAlign("Right");t.setTextDirection("LTR");}if(v.hasValueListAnnotation){this._associateValueHelpAndSuggest(t,v);}}}return t;};
m.prototype._associateValueHelpAndSuggest=function(o,i){o.setShowValueHelp(true);this._aValueHelpProvider.push(new sap.ui.comp.providers.ValueHelpProvider({loadAnnotation:true,fullyQualifiedFieldName:i.fullName,metadataAnalyser:this._oMetadataAnalyser,control:o,model:this._oParentODataModel,preventInitialDataFetchInValueHelpDialog:true,dateFormatSettings:this._oDateFormatSettings,takeOverInputValue:false,fieldName:i.fieldName,type:i.type,maxLength:i.maxLength,displayFormat:i.displayFormat,displayBehaviour:i.displayBehaviour,title:i.label}));o.setShowSuggestion(true);o.setFilterSuggests(false);this._aValueListProvider.push(new sap.ui.comp.providers.ValueListProvider({loadAnnotation:true,fullyQualifiedFieldName:i.fullName,metadataAnalyser:this._oMetadataAnalyser,control:o,model:this._oParentODataModel,dateFormatSettings:this._oDateFormatSettings,typeAheadEnabled:true,aggregation:"suggestionRows",displayFormat:i.displayFormat,displayBehaviour:i.displayBehaviour}));};
m.prototype._createDisplayOnlyTemplate=function(v,B){var t=null,o=null,i,n,A,p;if(v.displayFormat==="Date"){i=this._oDateFormatSettings;n={displayFormat:"Date"};}else if(v.type==="Edm.Decimal"){n={precision:v.precision,scale:v.scale};}else if(v.type==="Edm.String"){n={isDigitSequence:v.isDigitSequence};}o=g.getType(v.type,i,n);if(g.isNumeric(v.type)||g.isDateOrTime(v.type)){A="Right";}if(this._isMobileTable){if(v.isImageURL){t=new d({src:{path:v.name},width:"3em",height:"3em"});}else if(this._oLineItemAnnotation&&this._oLineItemAnnotation.urlInfo&&this._oLineItemAnnotation.urlInfo[v.name]){t=this._createLink(v,o,this._oLineItemAnnotation.urlInfo[v.name]);}else if(this._oLineItemAnnotation&&this._oLineItemAnnotation.criticality&&this._oLineItemAnnotation.criticality[v.name]){t=this._createObjectStatusTemplate(v,o,this._oLineItemAnnotation.criticality[v.name]);}else if(this._oSemanticKeyAnnotation&&this._oSemanticKeyAnnotation.semanticKeyFields&&this._oSemanticKeyAnnotation.semanticKeyFields.indexOf(v.name)>-1){t=this._createObjectIdentifierTemplate(v,o,this._oSemanticKeyAnnotation.semanticKeyFields.indexOf(v.name)===0);}}if(!t){if(v.semanticObjects&&(!B)){t=this._createSmartLinkFieldTemplate(v,o,function(){return this._createDisplayOnlyTemplate(v,true);}.bind(this));}else if(v.unit){t=this._createMeasureFieldTemplate(v,o);}else{p=this._getDefaultBindingInfo(v,o);t=new b({wrapping:this._isMobileTable,textAlign:A,text:p});}}v.align=A;return t;};
m.prototype._getDefaultBindingInfo=function(v,t){var B={path:v.name,type:t};if(this._bEnableDescriptions&&v.description){B={parts:[{path:v.name,type:t},{path:v.description}],formatter:function(i,s){return F.getFormattedExpressionFromDisplayBehaviour(v.displayBehaviour,i,s);}};}return B;};
m.prototype._createLink=function(v,t,o){var i=null;v.linkProperties=o.parameters||o.urlPath;if(o.urlPath){i={path:o.urlPath};}else if(o.urlTarget){i=o.urlTarget;}return new L({text:this._getDefaultBindingInfo(v,t),wrapping:this._isMobileTable,href:i});};
m.prototype._createObjectIdentifierTemplate=function(v,t,i){var o,s,n,p,r,u;var w;var x=this;if(v.semanticObjects){k.getDistinctSemanticObjects().then(function(y){w=k.hasDistinctSemanticObject(v.semanticObjects.defaultSemanticObject,y);if(w){q.sap.require("sap.ui.comp.navpopover.NavigationPopoverHandler");u=new sap.ui.comp.navpopover.NavigationPopoverHandler({semanticObject:v.semanticObjects.defaultSemanticObject,additionalSemanticObjects:v.semanticObjects.additionalSemanticObjects,semanticObjectLabel:v.label,fieldName:v.name,semanticObjectController:x._oSemanticObjectController,navigationTargetsObtained:function(E){var o=sap.ui.getCore().byId(E.getSource().getControl());var z=E.getParameters().mainNavigation;if(z){z.setDescription(o.getText());}E.getParameters().show(o.getTitle(),z,undefined,undefined);}});x._aLinkHandlers.push(u);}});}if(v.description){switch(v.displayBehaviour){case"descriptionAndId":s=v.description;n=v.name;p=t;break;case"idAndDescription":s=v.name;n=v.description;r=t;break;case"idOnly":s=v.name;p=t;break;default:s=v.description;break;}}else{s=v.name;r=t;}o=new O({title:s?{path:s,type:r}:undefined,text:n?{path:n,type:p}:undefined,titleActive:v.semanticObjects?{path:"$sapuicompcontrolprovider_distinctSO>/distinctSemanticObjects/"+v.semanticObjects.defaultSemanticObject,formatter:function(y){return!!y;}}:false,titlePress:function(E){if(w&&u){u.setControl(E.getSource());u.openPopover(E.getParameter("domRef"));}}});o.attachEvent("ObjectIdentifier.designtime",function(E){if(u){u.setControl(E.getSource());E.getParameters().registerNavigationPopoverHandler(u);}});o.setModel(k.getJSONModel(),"$sapuicompcontrolprovider_distinctSO");if(this._oSemanticKeyAdditionalControl&&i){this._bSemanticKeyAdditionalControlUsed=true;return new V({renderType:"Bare",items:[o,this._oSemanticKeyAdditionalControl]}).addStyleClass("sapMTableContentMargin");}return o;};
m.prototype._createObjectStatusTemplate=function(v,t,o){var s,i,n,B;n=h.getShowCriticalityIcon(o.criticalityRepresentationType);if(o.path){v.criticality=o.path;s={path:o.path,formatter:h.getCriticalityState};if(n){i={path:o.path,formatter:h.getCriticalityIcon};}}else{s=h.getCriticalityState(o.criticalityType);if(n){i=h.getCriticalityIcon(o.criticalityType);}}if(v.unit){B={parts:[{path:v.name,type:t},{path:v.unit}],formatter:v.isCurrencyField?F.getInlineAmountFormatter():F.getInlineMeasureUnitFormatter(),useRawValues:v.isCurrencyField};}else if(v.description){B={path:v.description};}else{B={path:v.name,type:t};}return new c({text:B,state:s,icon:i});};
m.prototype._createSmartLinkFieldTemplate=function(v,t,i){var B=v.unit?{parts:[{path:v.name,type:t},{path:v.unit}],formatter:v.isCurrencyField?F.getAmountCurrencyFormatter():F.getMeasureUnitFormatter(),useRawValues:true}:this._getDefaultBindingInfo(v,t);var o=new S({semanticObject:v.semanticObjects.defaultSemanticObject,additionalSemanticObjects:v.semanticObjects.additionalSemanticObjects,semanticObjectLabel:v.label,fieldName:v.name,text:B,uom:v.unit?{path:v.unit}:undefined,wrapping:this._isMobileTable,semanticObjectController:this._oSemanticObjectController,navigationTargetsObtained:function(E){var n=this.getBinding("text");if(!q.isArray(n.getValue())||v.unit){E.getParameters().show();return;}var p=n.getValue();var r=F.getTextsFromDisplayBehaviour(v.displayBehaviour,p[0],p[1]);var s=E.getParameters().mainNavigation;if(s){s.setDescription(r.secondText);}E.getParameters().show(r.firstText,s,undefined,undefined);}});o.setCreateControlCallback(i);return o;};
m.prototype._createMeasureFieldTemplate=function(v,t){var o,A,i,n,u,E=false;E=!!(v.isCurrencyField&&this._oCurrencyFormatSettings&&this._oCurrencyFormatSettings.showCurrencySymbol);n=new b({layoutData:new sap.m.FlexItemData({growFactor:1,baseSize:"0%"}),textDirection:"LTR",wrapping:false,textAlign:"End",text:{parts:[{path:v.name,type:t},{path:v.unit}],formatter:v.isCurrencyField?F.getAmountCurrencyFormatter():F.getMeasureUnitFormatter(),useRawValues:v.isCurrencyField}});u=new b({layoutData:new sap.m.FlexItemData({shrinkFactor:0}),textDirection:"LTR",wrapping:false,textAlign:"Begin",width:"2.5em",text:{path:v.unit,formatter:E?F.getCurrencySymbolFormatter():undefined}});o=new H({renderType:"Bare",justifyContent:"End",items:[n,u]});o.addStyleClass("sapUiCompDirectionLTR");if(v.isCurrencyField&&this._isAnalyticalTable){if(!this._oMultiCurrencyUtil){q.sap.require("sap.ui.comp.util.MultiCurrencyUtil");this._oMultiCurrencyUtil=sap.ui.comp.util.MultiCurrencyUtil;}A=new L({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_LINK_TEXT")||"Show Details",visible:{path:v.unit,formatter:this._oMultiCurrencyUtil.isMultiCurrency},press:function(p){this._oMultiCurrencyUtil.openMultiCurrencyPopover(p,{currency:v.name,unit:v.unit,additionalParent:this.useSmartToggle,smartTableId:this._smartTableId,template:i});}.bind(this)});i=o;i.bindProperty("visible",{path:v.unit,formatter:function(s){return!this._oMultiCurrencyUtil.isMultiCurrency(s);}.bind(this)});o=new V({renderType:"Bare",items:[A,i]});}return o;};
m.prototype._createFieldMetadata=function(o){var i=q.extend({},o);i.label=o.fieldLabel||o.name;i.quickInfo=o.quickInfo||i.label;i.displayBehaviour=i.displayBehaviour||this._oDefaultDropDownDisplayBehaviour;i.filterType=this._getFilterType(o);this._updateValueListMetadata(i);this._setAnnotationMetadata(i);return i;};
m.prototype._updateValueListMetadata=function(o){o.hasValueListAnnotation=o["sap:value-list"]!==undefined;if(o.hasValueListAnnotation){o.hasFixedValues=o["sap:value-list"]==="fixed-values";}else if(o["com.sap.vocabularies.Common.v1.ValueList"]){o.hasValueListAnnotation=true;o.hasFixedValues=this._oMetadataAnalyser.getValueListSemantics(o["com.sap.vocabularies.Common.v1.ValueList"])==="fixed-values";}};
m.prototype._setAnnotationMetadata=function(o){if(o&&o.fullName){o.semanticObjects=this._oMetadataAnalyser.getSemanticObjectsFromAnnotation(o.fullName);}};
m.prototype._getFilterType=function(o){if(g.isNumeric(o.type)){return"numeric";}else if(o.type==="Edm.DateTime"&&o.displayFormat==="Date"){return"date";}else if(o.type==="Edm.String"){return"string";}else if(o.type==="Edm.Boolean"){return"boolean";}else if(o.type==="Edm.Time"){return"time";}return undefined;};
m.prototype.destroy=function(){var n=function(A){var i;if(A){i=A.length;while(i--){A[i].destroy();}}};if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(!this._bSemanticKeyAdditionalControlUsed&&this._oSemanticKeyAdditionalControl&&this._oSemanticKeyAdditionalControl.destroy){this._oSemanticKeyAdditionalControl.destroy();}n(this._aValueHelpProvider);this._aValueHelpProvider=null;n(this._aValueListProvider);this._aValueListProvider=null;n(this._aLinkHandlers);this._aLinkHandlers=null;if(this._oHelper){this._oHelper.destroy();}this._oHelper=null;this._mSmartField=null;this._aODataFieldMetadata=null;this._oDateFormatSettings=null;this._oCurrencyFormatSettings=null;this._oDefaultDropDownDisplayBehaviour=null;this._oLineItemAnnotation=null;this._oSemanticKeyAnnotation=null;this._oParentODataModel=null;this.bIsDestroyed=true;};
l=j.extend("sap.ui.comp.SmartToggle",{metadata:{library:"sap.ui.comp",properties:{editable:{type:"boolean",defaultValue:false}},aggregations:{edit:{type:"sap.ui.core.Control",multiple:false},display:{type:"sap.ui.core.Control",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:function(r,o){r.write("<span ");r.writeControlData(o);r.addClass("sapUiCompSmartToggle");r.writeClasses();r.write(">");r.renderControl(o.getEditable()?o.getEdit():o.getDisplay());r.write("</span>");}});
l.prototype.getFocusDomRef=function(){var o=this.getEditable()?this.getEdit():this.getDisplay();if(o){return o.getFocusDomRef();}return j.prototype.getFocusDomRef.call(this);};
l.prototype.getAccessibilityInfo=function(){var o=this.getEditable()?this.getEdit():this.getDisplay();if(o&&o.getAccessibilityInfo){return o.getAccessibilityInfo();}return null;};
l.prototype.addAssociation=function(A,i,s){if(A==="ariaLabelledBy"){var E=this.getEdit(),o=this.getDisplay();E&&E.addAssociation(A,i,s);o&&o.addAssociation(A,i,s);}return j.prototype.addAssociation.apply(this,arguments);};
l.prototype.removeAssociation=function(A,o,s){if(A==="ariaLabelledBy"){var E=this.getEdit(),i=this.getDisplay();E&&E.removeAssociation(A,o,s);i&&i.removeAssociation(A,o,s);}return j.prototype.removeAssociation.apply(this,arguments);};
l.prototype.removeAllAssociation=function(A,s){if(A==="ariaLabelledBy"){var E=this.getEdit(),o=this.getDisplay();E&&E.removeAllAssociation(A,s);o&&o.removeAllAssociation(A,s);}return j.prototype.removeAllAssociation.apply(this,arguments);};
return m;},true);
sap.ui.predefine('sap/ui/comp/providers/TableProvider',['jquery.sap.global','sap/ui/comp/odata/MetadataAnalyser','./ControlProvider','sap/ui/comp/util/FormatUtil'],function(q,M,C,F){"use strict";var T=function(p){if(p){this._oParentODataModel=p.model;this.sEntitySet=p.entitySet;this._sIgnoredFields=p.ignoredFields;this._sInitiallyVisibleFields=p.initiallyVisibleFields;this.isEditableTable=p.isEditableTable;this._smartTableId=p.smartTableId;this._isAnalyticalTable=p.isAnalyticalTable;this._isMobileTable=p.isMobileTable;this.useSmartField=p.useSmartField;this.useSmartToggle=p.useSmartToggle;this._bSkipAnnotationParse=p.skipAnnotationParse==="true";this._sLineItemQualifier=p.lineItemQualifier;this._sPresentationVariantQualifier=p.presentationVariantQualifier;this.enableInResultForLineItem=p.enableInResultForLineItem==="true";this._oSemanticKeyAdditionalControl=p._semanticKeyAdditionalControl;try{this._oDateFormatSettings=p.dateFormatSettings?JSON.parse(p.dateFormatSettings):undefined;this._oCurrencyFormatSettings=p.currencyFormatSettings?JSON.parse(p.currencyFormatSettings):undefined;this._oDefaultDropDownDisplayBehaviour=p.defaultDropDownDisplayBehaviour;}catch(e){}}if(!this._oDateFormatSettings){this._oDateFormatSettings={};}if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}this._aODataFieldMetadata=[];this._aTableViewMetadata=[];this._aIgnoredFields=[];this._aInitiallyVisibleFields=[];this._oMetadataAnalyser=new M(this._oParentODataModel);this._oSemanticObjectController=p.semanticObjectController;this._intialiseMetadata();};
T.prototype._intialiseMetadata=function(){var t=[],i,l,f,o,s,S,a;this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntitySet);a=this._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.sEntitySet);if(!this._bSkipAnnotationParse){this._oPresentationVariant=this._oMetadataAnalyser.getPresentationVariantAnnotation(a,this._sPresentationVariantQualifier);if(this._oPresentationVariant){this._oLineItemAnnotation=this._oPresentationVariant.lineItemAnnotation;}if(!this._oLineItemAnnotation){this._oLineItemAnnotation=this._oMetadataAnalyser.getLineItemAnnotation(a,this._sLineItemQualifier);}}if(this._isMobileTable){this._oSemanticKeyAnnotation=this._oMetadataAnalyser.getSemanticKeyAnnotation(a);this._addLineItemNavigationFields(a);}S=this._oMetadataAnalyser.getEntityContainerAttribute("supported-formats");if(S){this._bSupportsExcelExport=S.indexOf("xlsx")>-1;}if(!this._oDefaultDropDownDisplayBehaviour){this._oDefaultDropDownDisplayBehaviour=this._oMetadataAnalyser.getTextArrangementValue(a);}this._generateArrays();this._oControlProvider=new C({metadataAnalyser:this._oMetadataAnalyser,model:this._oParentODataModel,fieldsMetadata:this._aODataFieldMetadata,lineItemAnnotation:this._oLineItemAnnotation,semanticKeyAnnotation:this._oSemanticKeyAnnotation,_semanticKeyAdditionalControl:this._oSemanticKeyAdditionalControl,isMobileTable:this._isMobileTable,isAnalyticalTable:this._isAnalyticalTable,smartTableId:this._smartTableId,dateFormatSettings:this._oDateFormatSettings,currencyFormatSettings:this._oCurrencyFormatSettings,defaultDropDownDisplayBehaviour:this._oDefaultDropDownDisplayBehaviour,useSmartField:this.useSmartField,useSmartToggle:this.useSmartToggle,enableDescriptions:!this._isAnalyticalTable,entitySet:this.sEntitySet,semanticObjectController:this._oSemanticObjectController});this._oFieldSemanticObjectMap={};if(this._aODataFieldMetadata){l=this._aODataFieldMetadata.length;}for(i=0;i<l;i++){f=this._aODataFieldMetadata[i];if(this._aIgnoredFields.indexOf(f.name)>-1||!f.visible||f.hidden){continue;}if(f.type.indexOf("Edm.")===0){o=this._oControlProvider.getFieldViewMetadata(f,this.isEditableTable);this._enrichWithTableViewMetadata(o);t.push(o);if(o.semanticObject){this._oFieldSemanticObjectMap[o.name]=o.semanticObject;}}}s=function(b,c){if(b.index||b.index===0){if(c.index||c.index===0){return b.index-c.index;}return-1;}if(c.index||c.index===0){return 1;}return 0;};this._aTableViewMetadata=t.sort(s);};
T.prototype._addLineItemNavigationFields=function(f){var a,l,s,o;if(this._aODataFieldMetadata&&this._oLineItemAnnotation){a=this._oLineItemAnnotation.fields;if(a){l=a.length;}while(l--){s=a[l];if(s&&s.indexOf("/")>=0){o=this._oMetadataAnalyser.extractNavigationPropertyField(s,this.sEntitySet);if(o){o.name=o.parentPropertyName+"/"+o.name;if(o.description){o.description=o.parentPropertyName+"/"+o.description;}if(o.unit){o.unit=o.parentPropertyName+"/"+o.unit;}this._aODataFieldMetadata.push(o);}}}}};
T.prototype.getFieldSemanticObjectMap=function(){return this._oFieldSemanticObjectMap;};
T.prototype.getTableViewMetadata=function(){return this._aTableViewMetadata;};
T.prototype.getSupportsExcelExport=function(){return this._bSupportsExcelExport;};
T.prototype.getIsUTCDateHandlingEnabled=function(){return this._oDateFormatSettings?this._oDateFormatSettings.UTC:false;};
T.prototype.getRequestAtLeastFields=function(){return(this._oPresentationVariant&&this._oPresentationVariant.requestAtLeastFields)?this._oPresentationVariant.requestAtLeastFields:[];};
T.prototype._generateArrays=function(){if(this._sIgnoredFields){this._aIgnoredFields=this._sIgnoredFields.split(",");}if(this._sInitiallyVisibleFields){this._aInitiallyVisibleFields=this._sInitiallyVisibleFields.split(",");}};
T.prototype._enrichWithTableViewMetadata=function(f){var a=[],n=[],p,l;var e=function(P){var N,t;if(P&&P.indexOf("/")>-1){t=P.split("/");t.pop();N=t.join("/");}return N;};this._updateLabel(f);f.isInitiallyVisible=this._isInitiallyVisible(f);f.index=this._getIndex(f);f.width=F.getWidth(f);if(f.isMeasureField&&f.unit){a.push(f.unit);}else if(f.description){a.push(f.description);}if(f.criticality){a.push(f.criticality);}if(f.linkProperties&&f.linkProperties.length){a=a.concat(f.linkProperties);}if(f.fieldControlProperty){a.push(f.fieldControlProperty);}l=a.length;if(l){f.additionalProperty=a.join(",");while(l--){p=e(a[l]);if(p){n.push(p);}}}if(f.parentPropertyName){n.push(f.parentPropertyName);}f.navigationProperty=n.join(",");this._setSortOrder(f);if(this._isAnalyticalTable){f.summed=f.aggregationRole==="measure";this._setInResult(f);this._setGroupBy(f);}};
T.prototype._isInitiallyVisible=function(f){var i=false;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields){i=this._oLineItemAnnotation.fields.indexOf(f.name)>-1;if(i&&!sap.ui.Device.system.desktop){var I=this._getFieldImportance(f);if(I){if(sap.ui.Device.system.tablet){i=I==="High"||I==="Medium";}else if(sap.ui.Device.system.phone){i=I==="High";}}}}if(!i&&this._aInitiallyVisibleFields){i=this._aInitiallyVisibleFields.indexOf(f.name)>-1;}return i;};
T.prototype._setInResult=function(f){if(this._oPresentationVariant){if(this._oPresentationVariant.requestAtLeastFields&&this._oPresentationVariant.requestAtLeastFields.indexOf(f.name)>-1){f.inResult=true;}}else if(this.enableInResultForLineItem){if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields&&this._oLineItemAnnotation.fields.indexOf(f.name)>-1){f.inResult=true;}}};
T.prototype._setSortOrder=function(f){var l;if(this._oPresentationVariant&&this._oPresentationVariant.sortOrderFields){l=this._oPresentationVariant.sortOrderFields.length;for(var i=0;i<l;i++){if(this._oPresentationVariant.sortOrderFields[i].name===f.name){f.sorted=true;f.sortOrder=this._oPresentationVariant.sortOrderFields[i].descending?"Descending":"Ascending";break;}}}};
T.prototype._setGroupBy=function(f){if(this._oPresentationVariant&&this._oPresentationVariant.groupByFields&&this._oPresentationVariant.groupByFields.indexOf(f.name)>=0){f.grouped=true;}};
T.prototype._getFieldImportance=function(f){var r=null;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.importance){r=this._oLineItemAnnotation.importance[f.name];}return r;};
T.prototype._getIndex=function(f){var i=-1,l=0;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields){l=this._oLineItemAnnotation.fields.length;i=this._oLineItemAnnotation.fields.indexOf(f.name);}if(i<0&&this._aInitiallyVisibleFields){i=this._aInitiallyVisibleFields.indexOf(f.name);if(i>-1){i+=l;}}if(i>-1){return i;}return undefined;};
T.prototype._updateLabel=function(f){var l;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.labels){l=this._oLineItemAnnotation.labels[f.name];}if(l){f.label=l;if(f.template&&f.template.setSemanticObjectLabel){f.template.setSemanticObjectLabel(f.label);}}};
T.prototype.destroy=function(){if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(this._oControlProvider&&this._oControlProvider.destroy){this._oControlProvider.destroy();}this._oControlProvider=null;this._aODataFieldMetadata=null;this._aTableViewMetadata=null;this._aIgnoredFields=null;this._aInitiallyVisibleFields=null;this._sIgnoredFields=null;this._sInitiallyVisibleFields=null;this.bIsDestroyed=true;};
return T;},true);
sap.ui.predefine('sap/ui/comp/providers/ValueHelp.designtime',[],function(){"use strict";return{annotations:{valueList:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueList",target:["Property","Parameter"],defaultValue:null,appliesTo:["valueHelp"],group:["Behavior"],since:"1.28.1"},valueListParameterDisplayOnly:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueListParameterDisplayOnly",target:["PropertyPath"],defaultValue:null,appliesTo:["valueHelp/#columnList"],group:["Behavior"],since:"1.28.1"},valueListParameterIn:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueListParameterIn",target:["PropertyPath"],defaultValue:null,appliesTo:["valueHelp/#field"],group:["Behavior"],since:"1.28.1"},valueListParameterOut:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueListParameterOut",target:["PropertyPath"],defaultValue:null,appliesTo:["valueHelp/#field"],group:["Behavior"],since:"1.28.1"},valueListParameterInOut:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueListParameterInOut",target:["PropertyPath"],defaultValue:null,appliesTo:["valueHelp/#field"],group:["Behavior"],since:"1.28.1"}},customData:{}};},false);
sap.ui.predefine('sap/ui/comp/providers/ValueHelpProvider',['jquery.sap.global','sap/m/List','sap/m/PlacementType','sap/m/ResponsivePopover','sap/m/StandardListItem','./BaseValueListProvider','sap/ui/comp/util/FormatUtil','sap/ui/model/json/JSONModel'],function(q,L,P,R,S,B,F,J){"use strict";
var V=B.extend("sap.ui.comp.providers.ValueHelpProvider",{constructor:function(p){if(p){this.preventInitialDataFetchInValueHelpDialog=p.preventInitialDataFetchInValueHelpDialog;this.sTitle=p.title;this.bSupportMultiselect=!!p.supportMultiSelect;this.bSupportRanges=p.supportRanges;this.bIsSingleIntervalRange=p.isSingleIntervalRange;this.bIsUnrestrictedFilter=p.isUnrestrictedFilter;this.bTakeOverInputValue=(p.takeOverInputValue===false)?false:true;if(this.bIsSingleIntervalRange){this.bSupportRanges=true;}this._sType=p.type;this._sMaxLength=p.maxLength;this._sScale=p.scale;this._sPrecision=p.precision;}B.apply(this,arguments);this._onInitialise();}});
V.prototype._onInitialise=function(){if(this.oControl.attachValueHelpRequest){this._fVHRequested=function(e){if(!this.bInitialised){return;}this.oControl=e.getSource();this.bForceTriggerDataRetreival=e.getParameter("fromSuggestions");if(this.bTakeOverInputValue||this.bForceTriggerDataRetreival){this.sBasicSearchText=e.getSource().getValue();}this._createValueHelpDialog();}.bind(this);this.oControl.attachValueHelpRequest(this._fVHRequested);}};
V.prototype._createValueHelpDialog=function(){if(!this.bCreated){this.bCreated=true;if(!this._oValueHelpDialogClass){sap.ui.require(['sap/ui/comp/valuehelpdialog/ValueHelpDialog'],this._onValueHelpDialogRequired.bind(this));}else{this._onValueHelpDialogRequired(this._oValueHelpDialogClass);}}};
V.prototype._getTitle=function(){if(this.sTitle){return this.sTitle;}else if(this.oFilterProvider){return this.oFilterProvider._determineFieldLabel(this._fieldViewMetadata);}return"";};
V.prototype._onValueHelpDialogRequired=function(a){this._oValueHelpDialogClass=a;var v=this.oControl.getId()+"-valueHelpDialog";this.oValueHelpDialog=new a(v,{stretch:sap.ui.Device.system.phone,basicSearchText:this.sBasicSearchText,supportRangesOnly:this.bIsSingleIntervalRange||!this.oPrimaryValueListAnnotation,supportMultiselect:this.bSupportMultiselect,title:this._getTitle(),supportRanges:this.bSupportRanges,displayFormat:this.sDisplayFormat,ok:this._onOK.bind(this),cancel:this._onCancel.bind(this),afterClose:function(){if(this.oPrimaryValueListAnnotation){this._resolveAnnotationData(this.oPrimaryValueListAnnotation);}this.oValueHelpDialog.destroy();this.bCreated=false;if(this.oControl&&this.oControl.focus&&!sap.ui.Device.system.phone){this.oControl.focus();}}.bind(this)});this.oControl.addDependent(this.oValueHelpDialog);this.oValueHelpDialog.suggest(function(c,f){if(this.oPrimaryValueListAnnotation){q.sap.require("sap.ui.comp.providers.ValueListProvider");c.setShowSuggestion(true);c.setFilterSuggests(false);return new sap.ui.comp.providers.ValueListProvider({control:c,fieldName:f,typeAheadEnabled:true,aggregation:"suggestionRows",displayFormat:this.sDisplayFormat,displayBehaviour:this.sTokenDisplayBehaviour,resolveInOutParams:false,annotation:this.oPrimaryValueListAnnotation,model:this.oODataModel,enableShowTableSuggestionValueHelp:false});}}.bind(this));if(this.bIsSingleIntervalRange){this.oValueHelpDialog.setIncludeRangeOperations([sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ],this._sType);this.oValueHelpDialog.setMaxIncludeRanges(1);this.oValueHelpDialog.setMaxExcludeRanges(0);this._updateInitialInterval();}else if((this._sType==="date"||this._sType==="time")&&!this.bIsUnrestrictedFilter){this.oValueHelpDialog.setIncludeRangeOperations([sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ],this._sType);this.oValueHelpDialog.setMaxExcludeRanges(0);}if(this.oControl.$()&&this.oControl.$().closest(".sapUiSizeCompact").length>0){this.oValueHelpDialog.addStyleClass("sapUiSizeCompact");}else if(this.oControl.$()&&this.oControl.$().closest(".sapUiSizeCozy").length>0){this.oValueHelpDialog.addStyleClass("sapUiSizeCozy");}else if(q("body").hasClass("sapUiSizeCompact")){this.oValueHelpDialog.addStyleClass("sapUiSizeCompact");}else{this.oValueHelpDialog.addStyleClass("sapUiSizeCozy");}if(this.bSupportRanges){this.oValueHelpDialog.setRangeKeyFields([{label:this._getTitle(),key:this.sFieldName,type:this._sType,scale:this._sScale,precision:this._sPrecision,maxLength:this._sMaxLength}]);}if(!(this.bIsSingleIntervalRange||!this.oPrimaryValueListAnnotation)){this.oValueHelpDialog.setModel(this.oODataModel);this._createAdditionalValueHelpControls();this._createCollectiveSearchControls();}if(this.oControl.getTokens){var t=this.oControl.getTokens();this.oValueHelpDialog.setTokens(t);}this.oValueHelpDialog.open();};
V.prototype._updateInitialInterval=function(){var i=this.oControl.getValue(),t,r,v;if(i){t=new sap.m.Token();r={exclude:false,keyField:this.sFieldName};if(this._sType==="numeric"){v=F.parseFilterNumericIntervalData(i);}else{v=i.split("-");}if(v&&v.length===2){r.operation="BT";r.value1=v[0];r.value2=v[1];}else{r.operation="EQ";r.value1=i;}t.data("range",r);}if(t){this.oValueHelpDialog.setTokens([t]);}};
V.prototype._createCollectiveSearchControls=function(){var p,l,I,i=0,a=0,o,A,r;if(this.additionalAnnotations&&this.additionalAnnotations.length){o=function(e){var s=e.getParameter("listItem"),b;p.close();if(s){b=s.data("_annotation");if(b){this._triggerAnnotationChange(b);}}}.bind(this);l=new L({mode:sap.m.ListMode.SingleSelectMaster,selectionChange:o});r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");p=new R({placement:P.Bottom,showHeader:true,contentHeight:"30rem",title:r.getText("COLLECTIVE_SEARCH_SELECTION_TITLE"),content:[l],afterClose:function(){this.oValueHelpDialog._rotateSelectionButtonIcon(false);}.bind(this)});I=new S({title:this.oPrimaryValueListAnnotation.valueListTitle});I.data("_annotation",this.oPrimaryValueListAnnotation);l.addItem(I);l.setSelectedItem(I);this.oValueHelpDialog.oSelectionTitle.setText(this.oPrimaryValueListAnnotation.valueListTitle);this.oValueHelpDialog.oSelectionTitle.setTooltip(this.oPrimaryValueListAnnotation.valueListTitle);a=this.additionalAnnotations.length;for(i=0;i<a;i++){A=this.additionalAnnotations[i];I=new S({title:A.valueListTitle});I.data("_annotation",A);l.addItem(I);}this.oValueHelpDialog.oSelectionButton.setVisible(true);this.oValueHelpDialog.oSelectionTitle.setVisible(true);this.oValueHelpDialog.oSelectionButton.attachPress(function(){if(!p.isOpen()){this.oValueHelpDialog._rotateSelectionButtonIcon(true);p.openBy(this.oValueHelpDialog.oSelectionButton);}else{p.close();}}.bind(this));}};
V.prototype._triggerAnnotationChange=function(a){this.oValueHelpDialog.oSelectionTitle.setText(a.valueListTitle);this.oValueHelpDialog.oSelectionTitle.setTooltip(a.valueListTitle);this.oValueHelpDialog.resetTableState();this._resolveAnnotationData(a);this._createAdditionalValueHelpControls();};
V.prototype._createAdditionalValueHelpControls=function(){var b=null;this.oValueHelpDialog.setKey(this.sKey);this.oValueHelpDialog.setKeys(this._aKeys);this.oValueHelpDialog.setDescriptionKey(this.sDescription);this.oValueHelpDialog.setTokenDisplayBehaviour(this.sTokenDisplayBehaviour);var c=new J();c.setData({cols:this._aCols});this.oValueHelpDialog.setModel(c,"columns");if(this.bSupportBasicSearch){b=this.sKey;}if(this.oSmartFilterBar){this.oSmartFilterBar._setCollectiveSearch(null);this.oSmartFilterBar.destroy();}this.oSmartFilterBar=new sap.ui.comp.smartfilterbar.SmartFilterBar(this.oValueHelpDialog.getId()+"-smartFilterBar",{entitySet:this.sValueListEntitySetName,basicSearchFieldName:b,enableBasicSearch:this.bSupportBasicSearch,advancedMode:true,showGoOnFB:!sap.ui.Device.system.phone,expandAdvancedArea:(!this.bForceTriggerDataRetreival&&sap.ui.Device.system.desktop),search:this._onFilterBarSearchPressed.bind(this),reset:this._onFilterBarResetPressed.bind(this),filterChange:this._onFilterBarFilterChange.bind(this),initialise:this._onFilterBarInitialise.bind(this)});if(this._oDateFormatSettings){this.oSmartFilterBar.data("dateFormatSettings",this._oDateFormatSettings);}this.oSmartFilterBar.isRunningInValueHelpDialog=true;this.oValueHelpDialog.setFilterBar(this.oSmartFilterBar);};
V.prototype._onFilterBarFilterChange=function(){if(this.oValueHelpDialog.isOpen()){var t=this.oValueHelpDialog.getTable();if(t){t.setShowOverlay(true);this.oValueHelpDialog.TableStateSearchData();}}};
V.prototype._onFilterBarSearchPressed=function(){this._rebindTable();};
V.prototype._rebindTable=function(){var f,p,b,t,e,s;f=this.oSmartFilterBar.getFilters();p=this.oSmartFilterBar.getParameters()||{};if(this.aSelect&&this.aSelect.length){p["select"]=this.aSelect.toString();}if(this.sKey&&this._oMetadataAnalyser){e=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sValueListEntitySetName);for(var i=0;i<e.length;i++){if(e[i].name===this.sKey&&e[i].sortable!==false){s=new sap.ui.model.Sorter(this.sKey);break;}}}b={path:"/"+this.sValueListEntitySetName,filters:f,parameters:p,sorter:s,events:{dataReceived:function(E){this.oValueHelpDialog.TableStateDataFilled();t.setBusy(false);var o=E.getSource(),a;if(o&&this.oValueHelpDialog&&this.oValueHelpDialog.isOpen()){a=o.getLength();if(a){this.oValueHelpDialog.update();}}}.bind(this)}};t=this.oValueHelpDialog.getTable();t.setShowOverlay(false);this.oValueHelpDialog.TableStateDataSearching();t.setBusy(true);if(t instanceof sap.m.Table){b.factory=function(I,c){var C=t.getModel("columns").getData().cols;return new sap.m.ColumnListItem({cells:C.map(function(a){var d=a.template;return new sap.m.Label({text:"{"+d+"}"});})});};t.bindItems(b);}else{t.bindRows(b);}};
V.prototype._onFilterBarResetPressed=function(){this._calculateFilterInputData();if(this.oSmartFilterBar){this.oSmartFilterBar.setFilterData(this.mFilterInputData);}};
V.prototype._onFilterBarInitialise=function(){var b=null;this._onFilterBarResetPressed();if(this.oSmartFilterBar&&this.oSmartFilterBar.getBasicSearchControl){b=this.oSmartFilterBar.getBasicSearchControl();if(b){b.setValue(this.sBasicSearchText);if(sap.ui.Device.system.phone&&b instanceof sap.m.SearchField){b.setShowSearchButton(true);}}}if(!this.preventInitialDataFetchInValueHelpDialog||this.bForceTriggerDataRetreival){this._rebindTable();this.bForceTriggerDataRetreival=false;}};
V.prototype._onOK=function(c){var t=c.getParameter("tokens"),r,k,i=0,a=[],o=null;this._onCancel();if(this.oControl instanceof sap.m.MultiInput){this.oControl.setValue("");this.oControl.setTokens(t);i=t.length;while(i--){o=t[i].data("row");if(o){a.push(o);}}}else{if(t[0]){if(this.bIsSingleIntervalRange){r=t[0].data("range");if(r){if(r.operation==="BT"){k=r.value1+"-"+r.value2;}else{k=r.value1;}}}else{k=t[0].getKey();}o=t[0].data("row");if(o){a.push(o);}}this.oControl.setValue(k);this.oControl.fireChange({value:k,validated:true});}this._calculateAndSetFilterOutputData(a);};
V.prototype._onCancel=function(){this.oValueHelpDialog.close();this.oValueHelpDialog.setModel(null);};
V.prototype.destroy=function(){if(this.oControl&&this.oControl.detachValueHelpRequest){this.oControl.detachValueHelpRequest(this._fVHRequested);this._fVHRequested=null;}B.prototype.destroy.apply(this,arguments);if(this.oValueHelpDialog){this.oValueHelpDialog.destroy();this.oValueHelpDialog=null;}if(this.oSmartFilterBar){this.oSmartFilterBar.destroy();this.oSmartFilterBar=null;}this.sTitle=null;this._fieldViewMetadata=null;this._oValueHelpDialogClass=null;};
return V;},true);
sap.ui.predefine('sap/ui/comp/providers/ValueListProvider',['jquery.sap.global','sap/m/Column','sap/m/ColumnListItem','sap/m/Text','sap/m/Token','./BaseValueListProvider','sap/ui/core/Item','sap/ui/model/Filter','sap/ui/model/Sorter','sap/ui/model/json/JSONModel','sap/ui/comp/util/FormatUtil'],function(q,C,a,T,b,B,I,F,S,J,c){"use strict";
var V=B.extend("sap.ui.comp.providers.ValueListProvider",{constructor:function(p){if(p){this.sAggregationName=p.aggregation;this.bTypeAheadEnabled=p.typeAheadEnabled;this.bEnableShowTableSuggestionValueHelp=p.enableShowTableSuggestionValueHelp===undefined?true:p.enableShowTableSuggestionValueHelp;}B.apply(this,arguments);this._onInitialise();}});
V.prototype._onInitialise=function(){if(!this.bTypeAheadEnabled){this.oAfterRenderingEventDelegate={onAfterRendering:this._onMetadataInitialised};this.oControl.addEventDelegate(this.oAfterRenderingEventDelegate,this);}else if(this.oControl.attachSuggest){this._fSuggest=function(e){this.oControl=e.getSource();if(!this.bInitialised){return;}if(!this.oTemplate||!this.oControl.data("_hassuggestionTemplate")){this._createSuggestionTemplate();}var s=e.getParameter("suggestValue");this._fetchData(s);}.bind(this);this.oControl.attachSuggest(this._fSuggest);this._handleSelect();}};
V.prototype._onMetadataInitialised=function(){if(this.bInitialised){if(this.oAfterRenderingEventDelegate){this.oControl.removeEventDelegate(this.oAfterRenderingEventDelegate,this);delete this.oAfterRenderingEventDelegate;}this._createDropDownTemplate();this._fetchData();}};
V.prototype._isSortable=function(n){if(this.oPrimaryValueListAnnotation){for(var i=0;i<this.oPrimaryValueListAnnotation.valueListFields.length;i++){if(this.oPrimaryValueListAnnotation.valueListFields[i].name===n){return this.oPrimaryValueListAnnotation.valueListFields[i].sortable!==false;}}return false;}return true;};
V.prototype._createDropDownTemplate=function(){this._oTemplate=new I({key:"{"+this.sKey+"}",text:this._getDDLBTextBindingPath()});this._oSorter=null;if(this.sDDLBDisplayBehaviour===sap.ui.comp.smartfilterbar.DisplayBehaviour.idOnly||this.sDDLBDisplayBehaviour===sap.ui.comp.smartfilterbar.DisplayBehaviour.idAndDescription){if(this._isSortable(this.sKey)){this._oSorter=new S(this.sKey);}}else{if(this._isSortable(this.sDescription)){this._oSorter=new S(this.sDescription);}else if((this.sDescription!==this.sKey)&&this._isSortable(this.sKey)){this._oSorter=new S(this.sKey);}}};
V.prototype._createSuggestionTemplate=function(){var i=0,l=0,t,s=0;this._oTemplate=new a();if(this._aCols){this.oControl.removeAllSuggestionColumns();l=this._aCols.length;for(i=0;i<l;i++){var d=false,m="1px",w=this._aCols[i].width;if(sap.ui.Device.system.phone){w=undefined;if(i>=2){d=true;m=(i+1)*10+"rem";}}this.oControl.addSuggestionColumn(new C({header:new T({wrapping:false,text:this._aCols[i].label,tooltip:this._aCols[i].tooltip||this._aCols[i].label}),demandPopin:d,popinDisplay:sap.m.PopinDisplay.Inline,minScreenWidth:m,width:w}));t=null;if(this._aCols[i].type==="string"){t={path:this._aCols[i].template};}this._oTemplate.addCell(new T({wrapping:false,text:{path:this._aCols[i].template,type:this._aCols[i].oType},tooltip:t}));if(w){s+=parseFloat(w.substring(0,w.length-2));}}if(s>0){this.oControl.setProperty('maxSuggestionWidth',s+l+"em",true);}}this.oControl.data("_hassuggestionTemplate",true);};
V.prototype._getDDLBTextBindingPath=function(){return c.getFormattedBindingExpressionFromDisplayBehaviour(this.sDDLBDisplayBehaviour,this.sKey,this.sDescription);};
V.prototype._handleSelect=function(){var h=function(d,f){var k,t,o;if(d){k=d[this.sKey];t=d[this.sDescription];}if(k||(k==="")){if(this.oControl.addToken){t=c.getFormattedExpressionFromDisplayBehaviour(this.sTokenDisplayBehaviour,k,t);o=new b({key:k,text:t,tooltip:t});o.data("row",d);if(f){f(o);}delete this.oControl.__sValidationText;}else{this.oControl.setValue(k);this.oControl.fireChange({value:k,validated:true});}}this._calculateAndSetFilterOutputData([d]);}.bind(this);var A=function(){if(this.oFilterProvider&&this.oFilterProvider._oSmartFilter&&this.oFilterProvider._oSmartFilter.bIsSearchPending&&this.oFilterProvider._oSmartFilter.search){if(this.oFilterProvider._oSmartFilter.getLiveMode&&this.oFilterProvider._oSmartFilter.getLiveMode()){return;}this.oFilterProvider._oSmartFilter.search();}}.bind(this);if(this.oControl.addValidator){var v=this.oControl._tokenizer?this.oControl._tokenizer._aTokenValidators.slice():[];this.oControl.removeAllValidators();this._fValidator=function(d){if(!this.bInitialised){return;}if(v){var t;v.some(function(e){t=e(d);return t;},this);if(t){return t;}}var r=d.suggestionObject,D,i=d.text,f=[],p;if(r){D=this.oODataModel.getData(r.getBindingContextPath());h(D,d.asyncCallback);}else if(i){if(this.sDisplayFormat==="UpperCase"){i=i.toUpperCase();}if(this.oControl.__sValidationText!==i){this.oControl.__sValidationText=i;this.oControl.__bValidatingToken=true;this._calculateFilterInputData();if(this.mFilterInputData&&this.aFilterField){f=sap.ui.comp.smartfilterbar.FilterProvider.generateFilters(this.aFilterField,this.mFilterInputData);}f.push(new F(this.sKey,sap.ui.model.FilterOperator.EQ,i));if(this.bSupportBasicSearch){p={"search-focus":this.sKey};}this.oODataModel.read("/"+this.sValueListEntitySetName,{filters:f,urlParameters:p,success:function(R,e){var o=R;delete this.oControl.__bValidatingToken;if(R){if(R.results&&R.results.length>=1){if(R.results.length===1){o=R.results[0];}if(this.oControl.data("__validationError")){this.oControl.data("__validationError",null);this.oControl.setValueState("None");}}else{this.oControl.setValueState("Error");this.oControl.data("__validationError",true);}if(o&&o[this.sKey]){h(o,d.asyncCallback);}}A();}.bind(this),error:function(){if(this.oControl.data("__validationError")){this.oControl.setValueState("None");}delete this.oControl.__bValidatingToken;A();}.bind(this)});}else{if(this.oControl.data("__validationError")){this.oControl.setValueState(sap.ui.core.ValueState.Error);}}}}.bind(this);this.oControl.addValidator(this._fValidator);}else if(this.oControl.attachSuggestionItemSelected){this._fSuggestionItemSelected=function(e){var r=e.getParameter("selectedRow"),d;if(r){d=r.getModel().getData(r.getBindingContextPath());h(d);}};this.oControl.attachSuggestionItemSelected(this._fSuggestionItemSelected);}this.oControl.setRowResultFunction(function(s){var o,r="";if(s){o=s.getBindingContext();}if(o&&this.sKey){r=o.getProperty(this.sKey);}return r;}.bind(this));};
V.prototype._fetchData=function(s){var p={},f=[],l,e;if(this.bTypeAheadEnabled){if(s&&this.sDisplayFormat==="UpperCase"){s=s.toUpperCase();}if(this.bSupportBasicSearch){p["custom"]={"search-focus":this.sKey,"search":s};}this._calculateFilterInputData();if(this.mFilterInputData&&this.aFilterField){f=sap.ui.comp.smartfilterbar.FilterProvider.generateFilters(this.aFilterField,this.mFilterInputData,{dateSettings:this._oDateFormatSettings});}if(!this.bSupportBasicSearch){f.push(new F(this.sKey,sap.ui.model.FilterOperator.StartsWith,s));}l=10;if(this.bEnableShowTableSuggestionValueHelp){e={dataReceived:function(E){var o=E.getSource(),i;if(o){i=o.getLength();if(i&&i<=l){this.oControl.setShowTableSuggestionValueHelp(false);}else{this.oControl.setShowTableSuggestionValueHelp(true);}}}.bind(this)};}else{this.oControl.setShowTableSuggestionValueHelp(false);}}if(this.aSelect&&this.aSelect.length){p["select"]=this.aSelect.toString();}if(!this.sValueListEntitySetName){q.sap.log.error("ValueListProvider","Empty sValueListEntitySetName for "+this.sAggregationName+" binding! (missing primaryValueListAnnotation)");}this.oControl.bindAggregation(this.sAggregationName,{path:"/"+this.sValueListEntitySetName,length:l,parameters:p,filters:f,sorter:this._oSorter,events:e,template:this._oTemplate,templateShareable:false});};
V.prototype.destroy=function(){if(this.oControl){if(this.oControl.detachSuggest){this.oControl.detachSuggest(this._fSuggest);this._fSuggest=null;}if(this.oControl.removeValidator){this.oControl.removeValidator(this._fValidator);this._fValidator=null;}else if(this.oControl.detachSuggestionItemSelected){this.oControl.detachSuggestionItemSelected(this._fSuggestionItemSelected);this._fSuggestionItemSelected=null;}this.oControl.unbindAggregation(this.sAggregationName);this.oControl.data("_hassuggestionTemplate",false);delete this.oControl.__sValidationText;delete this.oControl.__bValidatingToken;}B.prototype.destroy.apply(this,arguments);if(this.oJsonModel){this.oJsonModel.destroy();this.oJsonModel=null;}this._oTemplate=null;this.sAggregationName=null;this.bTypeAheadEnabled=null;this._oSorter=null;};
return V;},true);
sap.ui.predefine('sap/ui/comp/smartchart/SmartChart.designtime',[],function(){"use strict";return{annotations:{semanticObject:{namespace:"com.sap.vocabularies.Common.v1",annotation:"SemanticObject",target:["EntitySet","EntityType","Property"],defaultValue:null,appliesTo:["text"],group:["Behavior"],since:"1.34.1"},fieldVisible:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControlType",target:["Property"],whiteList:{values:["Hidden"]},defaultValue:false,appliesTo:["field/#/visible"],group:["Behavior"],since:"1.34.1"},presentationVariant:{namespace:"com.sap.vocabularies.UI.v1",annotation:"PresentationVariant",target:["EntitySet","EntityType"],defaultValue:null,appliesTo:["chartFields"],group:["Behavior"],since:"1.34.1"},chart:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Chart",target:["EntityType"],defaultValue:null,appliesTo:["chart"],group:["Behavior"],since:"1.34.1"},dataPoint:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPoint",target:["PropertyValue"],defaultValue:null,appliesTo:["dataPoint"],group:["Behavior"],since:"1.48.0"}},customData:{dateFormatSettings:{type:"string",defaultValue:"\{'UTC':'true'\}",group:["Appearance"],since:"1.28.1"},skipAnnotationParse:{type:"boolean",defaultValue:null,appliesTo:["content"],since:"1.28.1"},defaultDimensionDisplayBehaviour:{type:"sap.ui.comp.smartfilterbar.DisplayBehaviour",defaultValue:"",since:"1.28.1"},chartQualifier:{type:"string",defaultValue:null,appliesTo:["content"]},presentationVariantQualifier:{type:"string",defaultValue:null,appliesTo:["content"]},p13nDialogSettings:{type:"object",defaultValue:{}}},properties:{entitySet:{ignore:true},smartFilterId:{ignore:true},ignoredFields:{ignore:true},requestAtLeastFields:{ignore:false},ignoreFromPersonalisation:{ignore:true},chartType:{ignore:true},ignoredChartTypes:{ignore:false},useVariantManagement:{ignore:true},useChartPersonalisation:{ignore:true},header:{ignore:false},persistencyKey:{ignore:true},currentVariantId:{ignore:false},enableAutoBinding:{ignore:false},chartBindingPath:{ignore:false},showDrillButtons:{ignore:false},showZoomButtons:{ignore:false},showSemanticNavigationButton:{ignore:false},showVariantManagement:{ignore:false},showDownloadButton:{ignore:false},showDetailsButton:{ignore:false},showDrillBreadcrumbs:{ignore:false},showChartTooltip:{ignore:false},showLegendButton:{ignore:false},legendVisible:{ignore:false},selectionMode:{ignore:false},showFullScreenButton:{ignore:false},useTooltip:{ignore:false},useListForChartTypeSelection:{ignore:true},detailsItemActionFactory:{ignore:false},detailsListActionFactory:{ignore:true},noData:{ignore:false},showChartTypeSelectionButton:{ignore:false}}};},false);
sap.ui.predefine('sap/ui/comp/smartchart/SmartChart',['jquery.sap.global','sap/ui/comp/library','sap/chart/Chart','sap/chart/library','sap/chart/data/Dimension','sap/chart/data/Measure','sap/m/SegmentedButton','sap/m/Button','sap/m/Text','sap/m/FlexItemData','sap/ui/core/Item','sap/m/OverflowToolbar','sap/m/OverflowToolbarButton','sap/m/ToolbarSeparator','sap/m/ToolbarDesign','sap/m/ToolbarSpacer','sap/m/VBox','sap/m/VBoxRenderer','sap/ui/comp/providers/ChartProvider','sap/ui/comp/smartfilterbar/FilterProvider','sap/ui/comp/smartvariants/SmartVariantManagement','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/comp/personalization/Util','sap/ui/Device','sap/ui/comp/odata/ODataModelUtil','sap/ui/comp/odata/MetadataAnalyser',"sap/m/P13nFilterItem","sap/viz/ui5/controls/VizTooltip","sap/ui/comp/state/UIState","sap/m/SelectionDetails","sap/m/SelectionDetailsItem","sap/m/SelectionDetailsItemLine","sap/m/Title"],function(q,c,C,d,D,M,S,B,T,F,I,O,f,g,h,j,V,k,m,o,p,r,s,P,t,u,v,w,x,U,y,z,A,E){"use strict";
var G=V.extend("sap.ui.comp.smartchart.SmartChart",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},smartFilterId:{type:"string",group:"Misc",defaultValue:null},ignoredFields:{type:"string",group:"Misc",defaultValue:null},requestAtLeastFields:{type:"string",group:"Misc",defaultValue:null},ignoreFromPersonalisation:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:null},ignoredChartTypes:{type:"string",group:"Misc",defaultValue:null},useVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},useChartPersonalisation:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},persistencyKey:{type:"string",group:"Misc",defaultValue:null},currentVariantId:{type:"string",group:"Misc",defaultValue:null},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},showDrillButtons:{type:"boolean",group:"Misc",defaultValue:true},showZoomButtons:{type:"boolean",group:"Misc",defaultValue:true},showSemanticNavigationButton:{type:"boolean",group:"Misc",defaultValue:true},showVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},showDownloadButton:{type:"boolean",group:"Misc",defaultValue:false},showDetailsButton:{type:"boolean",group:"Misc",defaultValue:false},showDrillBreadcrumbs:{type:"boolean",group:"Misc",defaultValue:false},showChartTooltip:{type:"boolean",group:"Misc",defaultValue:true},showLegendButton:{type:"boolean",group:"Misc",defaultValue:true},legendVisible:{type:"boolean",group:"Misc",defaultValue:true},selectionMode:{type:"sap.chart.SelectionMode",group:"Misc",defaultValue:sap.chart.SelectionMode.Multi},showFullScreenButton:{type:"boolean",group:"Misc",defaultValue:true},useTooltip:{type:"boolean",group:"Misc",defaultValue:true},useListForChartTypeSelection:{type:"boolean",group:"Misc",defaultValue:true},showChartTypeSelectionButton:{type:"boolean",group:"Misc",defaultValue:true},noData:{type:"string",group:"Misc",defaultValue:""}},associations:{smartVariant:{type:"sap.ui.core.Control",multiple:false}},aggregations:{toolbar:{type:"sap.m.Toolbar",multiple:false},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false},selectionDetailsItemActions:{type:"sap.ui.core.Item",multiple:true},selectionDetailsActions:{type:"sap.ui.core.Item",multiple:true},selectionDetailsActionGroups:{type:"sap.ui.core.Item",multiple:true}},events:{initialise:{},beforeRebindChart:{},dataReceived:{},afterVariantInitialise:{},afterVariantSave:{parameters:{currentVariantId:{type:"string"}}},afterVariantApply:{parameters:{currentVariantId:{type:"string"}}},showOverlay:{},fullScreenToggled:{parameters:{fullScreen:{type:"boolean"}}},selectionDetailsActionPress:{parameters:{action:{type:"sap.ui.core.Item"},itemContexts:{type:"sap.ui.model.Context"},level:{type:"sap.m.SelectionDetailsActionLevel"}}},chartDataChanged:{parameters:{changeTypes:{type:"object"}}}}},
renderer:k.render
});
G.prototype.init=function(){sap.m.FlexBox.prototype.init.call(this);this.addStyleClass("sapUiCompSmartChart");this.setFitContainer(true);this._bUpdateToolbar=true;this._oChartTypeModel=null;this.setHeight("100%");var a=new sap.ui.model.json.JSONModel({items:[]});this.setModel(a,"$smartChartTypes");this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this._processResizeHandler(true);if(!this.getLayoutData()){this.setLayoutData(new sap.m.FlexItemData({growFactor:1,baseSize:"50em"}));}};
G.prototype._getVariantManagementControl=function(a){var b=null;if(a){if(typeof a==='string'){b=sap.ui.getCore().byId(a);}else{b=a;}if(b){if(!(b instanceof p)){q.sap.log.error("Control with the id="+typeof a.getId=="function"?a.getId():a+" not of expected type");return null;}}}return b;};
G.prototype._createVariantManagementControl=function(){if(this._oVariantManagement||(!this.getUseVariantManagement()&&!this.getUseChartPersonalisation())||!this.getPersistencyKey()){return;}var a=new sap.ui.comp.smartvariants.PersonalizableInfo({type:"chart",keyName:"persistencyKey",dataSource:this.getEntitySet()});a.setControl(this);var b=this.getSmartVariant();if(b){this._oVariantManagement=this._getVariantManagementControl(b);}else if(this._oSmartFilter&&this._oSmartFilter.data("pageVariantPersistencyKey")){b=this._oSmartFilter.getSmartVariant();if(b){this._oVariantManagement=this._getVariantManagementControl(b);}}else{this._oVariantManagement=new p(this.getId()+"-variant",{showShare:true});}if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(this.getShowVariantManagement());}this._oVariantManagement.addPersonalizableControl(a);this._oVariantManagement.attachSave(this._variantSaved,this);this._oVariantManagement.attachAfterSave(this._variantAfterSave,this);this._oVariantManagement.initialise(this._variantInitialised,this);}};
G.prototype._variantInitialised=function(){if(!this._oCurrentVariant){this._oCurrentVariant="STANDARD";}this.fireAfterVariantInitialise();if(this._oVariantManagement&&!this._oVariantManagement.getEnabled()){this._checkAndTriggerBinding();}};
G.prototype._variantSaved=function(){if(this._oPersController){this._oPersController.setPersonalizationData(this._oCurrentVariant);}};
G.prototype._variantAfterSave=function(){this.fireAfterVariantSave({currentVariantId:this.getCurrentVariantId()});};
G.prototype.setUseChartPersonalisation=function(b){this.setProperty("useChartPersonalisation",b,true);this._bUpdateToolbar=true;};
G.prototype.setUseTooltip=function(b){this.setProperty("useTooltip",b,true);this._createTooltipOrPopover();};
G.prototype._createTooltipOrPopover=function(){if(this.getUseTooltip()&&this.getShowChartTooltip()){this._toggleChartTooltipVisibility(true);}else{this._createPopover();}};
G.prototype._createPopover=function(){if(this._oChart){if(!this._oPopover){q.sap.require("sap.viz.ui5.controls.Popover");this._oPopover=new sap.viz.ui5.controls.Popover({});}this._oPopover.connect(this._oChart.getVizUid());}};
G.prototype._destroyPopover=function(){if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
G.prototype.setUseVariantManagement=function(b){this.setProperty("useVariantManagement",b,true);if(this._oPersController){this._oPersController.setResetToInitialTableState(!b);}this._bUpdateToolbar=true;};
G.prototype.setToolbar=function(a){if(this._oToolbar){this.removeItem(this._oToolbar);}this._oToolbar=a;this._bUpdateToolbar=true;};
G.prototype.getToolbar=function(){return this._oToolbar;};
G.prototype.setHeader=function(a){this.setProperty("header",a,true);this._refreshHeaderText();};
G.prototype._refreshHeaderText=function(){if(!this._headerText){this._bUpdateToolbar=true;return;}var a=this.getHeader();this._headerText.setText(a);};
G.prototype._createToolbar=function(){if(!this._oToolbar){this._oToolbar=new O({design:h.Transparent,height:"auto"});this._oToolbar.addStyleClass("sapUiCompSmartChartToolbar");}this._oToolbar.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));this.insertItem(this._oToolbar,0);};
G.prototype._createToolbarContent=function(){this._addVariantManagementToToolbar();this._addSeparatorToToolbar();this._addHeaderToToolbar();this._addSpacerToToolbar();this._addSemanticNavigationButton();this._addDetailsButton();this._addDrillUpDownButtons();this._addLegendButton();this._addZoomInOutButtons();this._addDownloadButton();this._addPersonalisationToToolbar();this._addFullScreenButton();this._addChartTypeToToolbar();if(this._oToolbar&&(this._oToolbar.getContent().length===0||(this._oToolbar.getContent().length===1&&this._oToolbar.getContent()[0]instanceof j))){this.removeItem(this._oToolbar);this._oToolbar.destroy();this._oToolbar=null;}};
G.prototype.setShowVariantManagement=function(b){this.setProperty("showVariantManagement",b);if(this._oVariantManagement&&this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(b);}};
G.prototype.setShowDetailsButton=function(b){this.setProperty("showDetailsButton",b);if(this._oSelectionDetails){this._oSelectionDetails.setVisible(b);if(this._oDrillDownTextButton){this._oDrillDownTextButton.setVisible(b);}this._setBehaviorTypeForDataSelection();}if(this._oDrillDownButton){this._oDrillDownButton.setVisible(!b);}};
G.prototype.setShowChartTypeSelectionButton=function(b){this.setProperty("showChartTypeSelectionButton",b);if(this._oChartTypeButton){this._oChartTypeButton.setVisible(b);}};
G.prototype.setShowDownloadButton=function(b){this.setProperty("showDownloadButton",b);if(this._oDownloadButton){this._oDownloadButton.setVisible(b);}};
G.prototype.setShowDrillBreadcrumbs=function(b){this.setProperty("showDrillBreadcrumbs",b);if(this._oDrillBreadcrumbs){this._oDrillBreadcrumbs.setVisible(b);}if(this._oDrillUpButton){this._oDrillUpButton.setVisible(!b);}};
G.prototype.setShowChartTooltip=function(b){this.setProperty("showChartTooltip",b);this._toggleChartTooltipVisibility(b);};
G.prototype._setBehaviorTypeForDataSelection=function(){if(this.getShowDetailsButton()){this._oChart.setVizProperties({"interaction":{"behaviorType":"noHoverBehavior"}});}else{if(this._oChart.getVizProperties().interaction.behaviorType){var i=this._oChart.getVizProperties().interaction;delete i.behaviorType;this._oChart.setVizProperties({"interaction":i});}}};
G.prototype._addDrillBreadcrumbs=function(){if(!this._oDrillBreadcrumbs){q.sap.require("sap.m.Breadcrumbs");q.sap.require("sap.m.Link");this._oDrillBreadcrumbs=new sap.m.Breadcrumbs(this.getId()+"-drillBreadcrumbs",{visible:this.getShowDrillBreadcrumbs()}).addStyleClass("sapUiCompSmartChartBreadcrumbs");this.insertItem(this._oDrillBreadcrumbs,1);this._updateDrillBreadcrumbs();this._oChart.attachDrilledUp(function(e){this._updateDrillBreadcrumbs();}.bind(this));this._oChart.attachDrilledDown(function(e){this._updateDrillBreadcrumbs();}.bind(this));}};
G.prototype.getDrillStackFilters=function(){var a=this.getChart().getDrillStack();var b=[];var e=function(i){if(!i){return;}if(i&&i.sPath&&i.sOperator){b.push(i);}if(i.aFilters){i.aFilters.forEach(function(l){e(l);});}};a.forEach(function(i){e(i.filter);});return b;};
G.prototype._getDrillStackDimensions=function(){var a=this.getChart().getDrillStack();var b=[];a.forEach(function(e){e.dimension.forEach(function(i){if(i!=null&&i!=""&&b.indexOf(i)==-1){b.push(i);}});});return b;};
G.prototype._updateDrillBreadcrumbs=function(){var a=this._oChart.getDrillStack();if(this._oDrillBreadcrumbs&&this._oDrillBreadcrumbs.getLinks()){this._oDrillBreadcrumbs.removeAllLinks();}if(a){a.reverse();a.forEach(function(b,i,e){if(b.dimension.length>0&&typeof this._oChart.getDimensionByName(b.dimension[b.dimension.length-1])!='undefined'){var l=this._oChart.getDimensionByName(b.dimension[b.dimension.length-1]).getLabel();if(i==0){this._oDrillBreadcrumbs.setCurrentLocationText(l);}else{var n=new sap.m.Link({text:l,press:function(J){var L=this._oDrillBreadcrumbs.indexOfLink(J.getSource());this._oChart.drillUp(L+1);this._oChart.fireDeselectData(J);this._updateDrillBreadcrumbs();}.bind(this)});this._oDrillBreadcrumbs.insertLink(n);}}}.bind(this));}};
G.prototype._addDetailsButton=function(){this._oSelectionDetails=new y(this.getId()+"-selectionDetails",{visible:this.getShowDetailsButton()});this._oSelectionDetails.registerSelectionDetailsItemFactory([],function(a,b,e,l){var L=[];for(var i=0;i<a.length;i++){L.push(new A({label:a[i].label,value:a[i].value,unit:a[i].unit}));}return new z({enableNav:(function(){if(this._determineSemanticObjectsforDetailsPopover(b,e).length>0){return true;}else{return false;}}.bind(this)()),lines:L}).setBindingContext(e);}.bind(this));this._oSelectionDetails.attachNavigate(function(e){if(e.getParameter("direction")==="back"){e.getParameter("content").destroy();}else{this._navigateToSemanticObjectDetails(e);}}.bind(this));this._oSelectionDetails.attachActionPress(function(e){var i=[];e.getParameter("items").forEach(function(a){i.push(a.getBindingContext());});this.fireSelectionDetailsActionPress({id:e.getParameter("id"),action:e.getParameter("action"),itemContexts:i,level:e.getParameter("level")});}.bind(this));this._oSelectionDetails.attachSelectionHandler("_selectionDetails",this._oChart);this._oSelectionDetails.attachBeforeOpen(function(e){var a=this._oSelectionDetails.getItems();a.forEach(function(l){var b=this._getDetailsActionsClones();b.selectionDetailsItemActions.forEach(function(n){l.addAction(n);});}.bind(this));var b=this._getDetailsActionsClones().selectionDetailsActions;this._oSelectionDetails.removeAllActions();b.forEach(function(l){this._oSelectionDetails.addAction(l);}.bind(this));var i=this._getDetailsActionsClones().selectionDetailsActionGroups;this._oSelectionDetails.removeAllActionGroups();i.forEach(function(l){this._oSelectionDetails.addActionGroup(l);}.bind(this));}.bind(this));this._oSelectionDetails.attachBeforeClose(function(e){if(this._oNavigationContainer){this._oNavigationContainer.destroy();}}.bind(this));this._oToolbar.addContent(this._oSelectionDetails);this._addDrillDownTextButton();};
G.prototype._getDetailsActionsClones=function(){var a={selectionDetailsItemActions:[],selectionDetailsActions:[],selectionDetailsActionGroups:[]};this.getSelectionDetailsItemActions().forEach(function(i){a.selectionDetailsItemActions.push(i.clone());});this.getSelectionDetailsActions().forEach(function(i){a.selectionDetailsActions.push(i.clone());});this.getSelectionDetailsActionGroups().forEach(function(i){a.selectionDetailsActionGroups.push(i.clone());});return a;};
G.prototype._addDownloadButton=function(){if(!this._oDownloadButton){this._oDownloadButton=new f(this.getId()+"btnDownload",{type:"Transparent",text:this._oRb.getText("CHART_DOWNLOADBTN_TEXT"),tooltip:this._oRb.getText("CHART_DOWNLOADBTN_TOOLTIP"),icon:"sap-icon://download",visible:this.getShowDownloadButton(),press:function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob){var a=new window.Blob([this._getVizFrame().exportToSVGString()],{'type':"image/svg+xml"});window.navigator.msSaveOrOpenBlob(a);}else{this._downloadChartPNG();}}.bind(this)});this._oToolbar.addContent(this._oDownloadButton);}};
G.prototype._downloadChartSVG=function(){var a=this.getHeader();var b=document.createElement('a');b.setAttribute('href','data:image/svg+xml,'+encodeURIComponent(this._getVizFrame().exportToSVGString()));b.setAttribute('download',a?a:'Chart'+'.svg');b.click();};
G.prototype._downloadChartPNG=function(){var a=this.getHeader();var b=this._getVizFrame().exportToSVGString();var e=document.createElement('canvas');var i=e.getContext('2d');var l=new Image();l.width=e.width=document.getElementById(this._oChart.getId()).offsetWidth;l.height=e.height=document.getElementById(this._oChart.getId()).offsetHeight;l.onload=function(){i.drawImage(l,0,0);var n=document.createElement('a');n.setAttribute('href',e.toDataURL());n.setAttribute('download',a?a:'Chart'+'.png');n.click();};l.setAttribute('crossOrigin','anonymous');l.src='data:image/svg+xml,'+encodeURIComponent(b);};
G.prototype._addFullScreenButton=function(){var a;if(this.getShowFullScreenButton()){a=new f(this.getId()+"-btnFullScreen",{type:"Transparent",press:function(){this._toggleFullScreen(!this.bFullScreen);}.bind(this)});this.oFullScreenButton=a;this._renderFullScreenButton();this._oToolbar.addContent(a);}};
G.prototype._addZoomInOutButtons=function(){var a=this;this._oZoomInButton=new f(this.getId()+"-btnZoomIn",{type:"Transparent",text:this._oRb.getText("CHART_ZOOMINBTN_TEXT"),tooltip:this._oRb.getText("CHART_ZOOMINBTN_TOOLTIP"),icon:"sap-icon://zoom-in",press:function(){if(a._oChart){a._oChart.zoom({direction:"in"});}},visible:this.getShowZoomButtons()});this._oZoomOutButton=new f(this.getId()+"-btnZoomOut",{type:"Transparent",text:this._oRb.getText("CHART_ZOOMOUTBTN_TEXT"),tooltip:this._oRb.getText("CHART_ZOOMOUTBTN_TOOLTIP"),icon:"sap-icon://zoom-out",press:function(){if(a._oChart){a._oChart.zoom({direction:"out"});}},visible:this.getShowZoomButtons()});this._oToolbar.addContent(this._oZoomInButton);this._oToolbar.addContent(this._oZoomOutButton);};
G.prototype.setShowZoomButtons=function(b){this.setProperty("showZoomButtons",b);if(this._oZoomInButton){this._oZoomInButton.setVisible(b);}if(this._oZoomOutButton){this._oZoomOutButton.setVisible(b);}};
G.prototype.setShowFullScreenButton=function(b){this.setProperty("showFullScreenButton",b);if(this.oFullScreenButton){this.oFullScreenButton.setVisible(b);}};
G.prototype.setLegendVisible=function(b){this.setProperty("legendVisible",b);this._setLegendVisible(b);};
G.prototype._setLegendVisible=function(b){var a=this._getVizFrame();if(a){a.setLegendVisible(b);}};
G.prototype._getVizFrame=function(){var a=null;if(this._oChart){a=this._oChart.getAggregation("_vizFrame");}return a;};
G.prototype._addLegendButton=function(){var a=this;this._oLegendButton=new f(this.getId()+"-btnLegend",{type:"Transparent",text:this._oRb.getText("CHART_LEGENDBTN_TEXT"),tooltip:this._oRb.getText("CHART_LEGENDBTN_TOOLTIP"),icon:"sap-icon://legend",press:function(){a.setLegendVisible(!a.getLegendVisible());},visible:this.getShowLegendButton()});this._oToolbar.addContent(this._oLegendButton);};
G.prototype.setShowLegendButton=function(b){this.setProperty("showLegendButton",b);if(this._oLegendButton){this._oLegendButton.setVisible(b);}};
G.prototype.setShowSemanticNavigationButton=function(b){this.setProperty("showSemanticNavigationButton",b);if(this._oSemanticalNavButton){this._oSemanticalNavButton.setVisible(b);}else{if(b){this._addSemanticNavigationButton();}}};
G.prototype._addSemanticNavigationButton=function(){var a=this,b;if(!this._oSemanticalNavButton&&this.getShowSemanticNavigationButton()&&this._oToolbar){this._oSemanticalNavButton=new B(this.getId()+"-btnNavigation",{type:"Transparent",text:this._oRb.getText("CHART_SEMNAVBTN"),tooltip:this._oRb.getText("CHART_SEMNAVBTN_TOOLTIP"),visible:this.getShowSemanticNavigationButton(),enabled:false});q.sap.require("sap.ui.comp.navpopover.NavigationPopoverHandler");var n=new sap.ui.comp.navpopover.NavigationPopoverHandler({control:this._oSemanticalNavButton});var e=this.getSemanticObjectController();if(e){n.setSemanticObjectController(e);}this._oSemanticalNavButton.attachPress(function(l){if(b&&(b.length>0)){if(b.length===1){var J=v.getSemanticObjectsFromProperty(b[0]);if(J){n.setFieldName(b[0].name);n.setSemanticObject(J.defaultSemanticObject);n.setAdditionalSemanticObjects(J.additionalSemanticObjects);n.openPopover();}}else{a._semanticObjectList(b,n);}}});if(this._oChart){this._oChart.attachDeselectData(function(){b=a._setSelectionDataPointHandling(n);});this._oChart.attachSelectData(function(){b=a._setSelectionDataPointHandling(n);});}var i=this._indexOfSpacerOnToolbar();this._oToolbar.insertContent(this._oSemanticalNavButton,i+1);}};
G.prototype.setSelectionMode=function(a){this.setProperty("selectionMode",a);if(this._oChart){this._oChart.setSelectionMode(a);}};
G.prototype._setSelectionDataPointHandling=function(n){var a=this._setSelectionDataPoint(n);if(a&&a.length>0){this._oSemanticalNavButton.setEnabled(true);}else{this._oSemanticalNavButton.setEnabled(false);}return a;};
G.prototype._setSemanticObjectsContext=function(e){var a,b,i=null;a=e.getParameter("item").getBindingContext();if(a){b=a.getObject();if(b){i=this._determineSemanticObjectsforDetailsPopover(b,a);}}return i;};
G.prototype._setSelectionDataPoint=function(n){var a,b,e=null,l;var J=this._oChart.getSelectedDataPoints();if(!J||!J.dataPoints||(J.dataPoints.length===0)){return e;}if(J.dataPoints.length===1){a=J.dataPoints[0].context;if(a){b=a.getObject();if(b){e=this._determineSemanticObjects(b,a);if(e&&(e.length>0)){n.setBindingContext(a);}}}return e;}l=[];for(var i=0;i<J.dataPoints.length;i++){a=J.dataPoints[i].context;if(a){b=a.getObject();if(b){l.push(b);}}}if(l&&l.length>0){e=this._condensBasedOnSameValue(l);if(e&&e.length>0){n.setBindingContext(J.dataPoints[J.dataPoints.length-1].context);}}return e;};
G.prototype._condensBasedOnSameValue=function(a){var b=null,R,e,n;b=this._determineSemanticObjects(a[0]);if(b&&b.length>0){for(var i=0;i<b.length;i++){e=b[i];n=e.name;if(this._bAllValuesAreEqual(a,n)){if(!R){R=[];}R.push(e);}}b=R;}return b;};
G.prototype._bAllValuesAreEqual=function(a,b){var e,l;for(var i=0;i<a.length;i++){e=a[i];if(i===0){l=e[b];continue;}if(l!=e[b]){return false;}}return true;};
G.prototype._semanticObjectList=function(a,n){var b,l,L,e;if(this._oChart){l=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,selectionChange:function(J){if(J&&J.mParameters&&J.mParameters.listItem){var K=J.mParameters.listItem.data("semObj");if(K){n.setFieldName(J.mParameters.listItem.data("fieldName"));n.setSemanticObject(K.defaultSemanticObject);n.setAdditionalSemanticObjects(K.additionalSemanticObjects);n.openPopover();}}b.close();}});for(var i=0;i<a.length;i++){e=a[i];L=new sap.m.StandardListItem({title:e.fieldLabel,type:sap.m.ListType.Active});L.data("semObj",v.getSemanticObjectsFromProperty(e));L.data("fieldName",e.name);l.addItem(L);}b=new sap.m.ResponsivePopover({title:this._oRb.getText("CHART_SEMNAVBTN"),showHeader:false,contentWidth:"12rem",placement:sap.m.PlacementType.Left});b.addContent(l);b.openBy(this._oSemanticalNavButton);}};
G.prototype._semanticObjectListForDetails=function(a,b){var l,L,e;var n=this;if(this._oChart){l=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,rememberSelections:false,itemPress:function(i){if(i&&i.mParameters&&i.mParameters.listItem){var J=i.mParameters.listItem.data("semObj");if(J){var N=new sap.ui.comp.navpopover.NavigationPopoverHandler({fieldName:i.mParameters.listItem.data("fieldName"),control:i.mParameters.listItem,semanticObject:J.defaultSemanticObject,additionalSemanticObjects:J.additionalSemanticObjects});N._getNavigationContainer().then(function(K){n._oNavigationContainer=K;K.attachAvailableActionsPersonalizationPress(n._onAvailableActionsPersonalizationPress,n);this._oSelectionDetails.navTo("",K);}.bind(this),function(K){q.sap.log.error("NavigationContainer could not be determined");});}}}.bind(this)});sap.ui.comp.navpopover.SemanticObjectController.getDistinctSemanticObjects().then(function(J){for(var i=0;i<a.length;i++){e=a[i];if(sap.ui.comp.navpopover.SemanticObjectController.hasDistinctSemanticObject(e["com.sap.vocabularies.Common.v1.SemanticObject"].String,J)){L=new sap.m.StandardListItem({title:e.fieldLabel,type:sap.m.ListType.Navigation});L.setBindingContext(b);L.data("semObj",v.getSemanticObjectsFromProperty(e));L.data("fieldName",e.name);l.addItem(L);}}});return l;}};
G.prototype._onAvailableActionsPersonalizationPress=function(e){var n=e.getSource();this._oSelectionDetails.setPopoverModal(true);n.openSelectionDialog(false,true,undefined,true).then(function(){this._oSelectionDetails.setPopoverModal(false);}.bind(this));};
G.prototype._determineSemanticObjects=function(e,i){var n,l,J=[];if(e){for(n in e){if(n){l=this._getField(n);if(l&&l.isDimension&&l.isSemanticObject){J.push(l);}}}}if(J){J.sort(function(a,b){return a.fieldLabel.localeCompare(b.fieldLabel);});}return J;};
G.prototype._determineSemanticObjectsforDetailsPopover=function(e,i){var n,l,J=[];if(e){for(n in e){if(n){l=this._getField(n);if(l&&l.isDimension&&l.isSemanticObject){J.push(l);}}}}if(J){J.sort(function(a,b){return a.fieldLabel.localeCompare(b.fieldLabel);});}return J;};
G.prototype._addDrillUpDownButtons=function(){if(this.getShowDrillButtons()){var a=this;this._oDrillUpButton=new f(this.getId()+"-btnDrillUp",{type:"Transparent",tooltip:this._oRb.getText("CHART_DRILLUPBTN_TOOLTIP"),text:this._oRb.getText("CHART_DRILLUPBTN_TEXT"),icon:"sap-icon://drill-up",press:function(){if(a._oChart){a._oChart.drillUp();}},visible:!this.getShowDrillBreadcrumbs()});this._oDrillDownButton=new f(this.getId()+"-btnDrillDown",{type:"Transparent",tooltip:this._oRb.getText("CHART_DRILLDOWNBTN_TOOLTIP"),text:this._oRb.getText("CHART_DRILLDOWNBTN_TEXT"),icon:"sap-icon://drill-down",press:function(e){a._drillDown(e);},visible:!this.getShowDetailsButton()});this._oToolbar.addContent(this._oDrillUpButton);this._oToolbar.addContent(this._oDrillDownButton);}};
G.prototype._addDrillDownTextButton=function(){this._oDrillDownTextButton=new B(this.getId()+"-btnDrillDownText",{type:"Transparent",text:this._oRb.getText("CHART_DRILLDOWNBTN_TEXT"),tooltip:this._oRb.getText("CHART_DRILLDOWNBTN_TOOLTIP"),layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}),enabled:true,visible:this.getShowDetailsButton(),press:function(e){this._drillDown(e);}.bind(this)});this._oToolbar.addContent(this._oDrillDownTextButton);};
G.prototype.setShowDrillButtons=function(b){this.setProperty("showDrillButtons",b);if(this._oDrillUpButton){this._oDrillUpButton.setVisible(b);}if(this._oDrillDownButton){this._oDrillDownButton.setVisible(b);}};
G.prototype._triggerSearchInPopover=function(e,l){var a,i,b,n,J,K;if(!e||!l){return;}a=e.getParameters();if(!a){return;}J=a.newValue?a.newValue.toLowerCase():"";if(this._oChart){K=l.getItems();for(i=0;i<K.length;i++){n=K[i].getTooltip();b=K[i].getTitle();if((b&&(b.toLowerCase().indexOf(J)>-1))||(n&&(n.toLowerCase().indexOf(J)>-1))){K[i].setVisible(true);}else{K[i].setVisible(false);}}}};
G.prototype._drillDown=function(e){var a=this,b,l,n,J,L,K,N,Q,i,R;if(this._oChart){K=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,selectionChange:function(e){if(e&&e.mParameters&&e.mParameters.listItem){if(e.mParameters.listItem.getType()===sap.m.ListType.Inactive){return;}var J=e.mParameters.listItem.data("dim");if(J){a._oChart.drillDown(J);}}b.close();}});N=new sap.m.Bar();Q=new sap.m.SearchField({placeholder:this._oRb.getText("CHART_DRILLDOWN_SEARCH")});Q.attachLiveChange(function(e){a._triggerSearchInPopover(e,K);});N.addContentRight(Q);b=new sap.m.ResponsivePopover({title:this._oRb.getText("CHART_DRILLDOWN_TITLE"),contentWidth:"25rem",contentHeight:"20rem",placement:sap.m.PlacementType.Bottom,subHeader:N});b.addContent(K);l=this._getDrillStackDimensions();n=this._getSortedDimensions();if(n.length<7){N.setVisible(false);}for(i=0;i<n.length;i++){if(l.indexOf(n[i].getName())>-1){continue;}J=n[i];L=new sap.m.StandardListItem({title:J.getLabel(),type:sap.m.ListType.Active});L.data("dim",J);R=this._getFieldTooltip(J.name);if(R){L.setTooltip(R);}if(l.indexOf(n[i].getName())>-1){L.setType(sap.m.ListType.Inactive);}K.addItem(L);}b.openBy(e.getSource());}};
G.prototype._navigateToSemanticObjectDetails=function(e){var a=this._setSemanticObjectsContext(e);if(a&&(a.length>0)){if(a.length===1){var b=v.getSemanticObjectsFromProperty(a[0]);if(b){var n=new sap.ui.comp.navpopover.NavigationPopoverHandler({fieldName:a[0].name,control:e.getParameter("item"),semanticObject:b.defaultSemanticObject,additionalSemanticObjects:b.additionalSemanticObjects});n._getNavigationContainer().then(function(N){this._oNavigationContainer=N;N.attachAvailableActionsPersonalizationPress(this._onAvailableActionsPersonalizationPress,this);this._oSelectionDetails.navTo("",N);}.bind(this),function(J){q.sap.log.error("NavigationContainer could not be determined");});}}else{var i=e.getParameter("item").getBindingContext();var l=this._semanticObjectListForDetails(a,i);this._oSelectionDetails.navTo(this._oRb.getText("CHART_SEMNAVBTN"),l);}}};
G.prototype._addHeaderToToolbar=function(){if(this.getHeader()&&this._oToolbar){if(!this._headerText){this._headerText=new E({});this._headerText.addStyleClass("sapMH4Style");this._headerText.addStyleClass("sapUiCompSmartChartHeader");}this._refreshHeaderText();this._oToolbar.insertContent(this._headerText,0);}else if(this._headerText&&this._oToolbar){this._oToolbar.removeContent(this._headerText);}};
G.prototype._addSeparatorToToolbar=function(){if(this.getHeader()&&this.getUseVariantManagement()&&this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oSeparator=new g();this._oToolbar.insertContent(this._oSeparator,0);if(!this._oToolbar.getHeight()){this._oToolbar.setHeight("auto");}}else if(this._oSeparator){this._oToolbar.removeContent(this._oSeparator);}};
G.prototype._addVariantManagementToToolbar=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){if(this.getUseVariantManagement()){this._oToolbar.insertContent(this._oVariantManagement,0);}else if(this._oVariantManagement){this._oToolbar.removeContent(this._oVariantManagement);}}};
G.prototype._addSpacerToToolbar=function(){if(this._indexOfSpacerOnToolbar()===-1){this._oToolbar.addContent(new j());}};
G.prototype._indexOfSpacerOnToolbar=function(){var a=this._oToolbar.getContent(),i,l;if(a){l=a.length;i=0;for(i;i<l;i++){if(a[i]instanceof j){return i;}}}return-1;};
G.prototype._addPersonalisationToToolbar=function(){if(this.getUseChartPersonalisation()){if(!this._oChartPersonalisationButton){this._oChartPersonalisationButton=new f(this.getId()+"-btnPersonalisation",{type:"Transparent",icon:"sap-icon://action-settings",text:this._oRb.getText("CHART_PERSOBTN_TEXT"),tooltip:this._oRb.getText("CHART_PERSOBTN_TOOLTIP"),press:function(e){this._oPersController.openDialog({dimeasure:{visible:true,payload:{availableChartTypes:this._getAvailableChartTypes()}},sort:{visible:true},filter:{visible:true}});}.bind(this)});}this._oToolbar.addContent(this._oChartPersonalisationButton);}else if(this._oChartPersonalisationButton){this._oToolbar.removeContent(this._oChartPersonalisationButton);}};
G.prototype._addChartTypeToToolbar=function(){this._oChartTypeButton=this._createChartTypeButton();this._oToolbar.addContent(this._oChartTypeButton);};
G.prototype._createChartTypeButton=function(){var a=new f(this.getId()+"-btnChartType",{visible:this.getShowChartTypeSelectionButton(),type:"Transparent",layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}),press:function(e){this._displayChartTypes(e);}.bind(this)});this._enrichPassedButton(a,this._oChart.getChartType());return a;};
G.prototype._displayChartTypes=function(e){var a=this,b,l,i,n,J=false;if(this._bAvailableChartListIsOpen){return;}if(this._oChart&&e){var K=e.getSource();var L=new sap.m.StandardListItem({title:"{$smartChartTypes>text}",icon:"{$smartChartTypes>icon}",selected:"{$smartChartTypes>selected}"});l=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,items:{path:"$smartChartTypes>/items",template:L},selectionChange:function(e){if(e&&e.mParameters&&e.mParameters.listItem){var N=e.mParameters.listItem.getBinding("title");if(N){var Q=N.getContext();if(Q){var R=Q.getObject();if(R&&R.key){a._setChartType(R.key);a._enrichPassedButton(a._oChartTypeButton,a._oChart.getChartType());}}}}J=true;b.close();}});i=new sap.m.Bar();n=new sap.m.SearchField({placeholder:this._oRb.getText("CHART_TYPE_SEARCH")});n.attachLiveChange(function(e){a._triggerSearchInPopover(e,l);});i.addContentRight(n);b=new sap.m.ResponsivePopover({placement:sap.m.PlacementType.Bottom,subHeader:i,showHeader:false,contentWidth:"25rem"});b.attachAfterClose(function(e){if(!J){}a._bAvailableChartListIsOpen=false;});b.setModel(this.getModel("$smartChartTypes"),"$smartChartTypes");b.addContent(l);if(l.getItems().length<7){i.setVisible(false);}this._bAvailableChartListIsOpen=true;b.openBy(K);}};
var H={"bar":"sap-icon://horizontal-bar-chart","bullet":"sap-icon://horizontal-bullet-chart","bubble":"sap-icon://bubble-chart","column":"sap-icon://vertical-bar-chart","combination":"sap-icon://business-objects-experience","dual_bar":"sap-icon://horizontal-bar-chart","dual_column":"sap-icon://vertical-bar-chart","dual_combination":"sap-icon://business-objects-experience","dual_horizontal_combination":"sap-icon://business-objects-experience","dual_horizontal_stacked_combination":"sap-icon://business-objects-experience","dual_line":"sap-icon://line-chart","dual_stacked_bar":"sap-icon://full-stacked-chart","dual_stacked_column":"sap-icon://vertical-stacked-chart","dual_stacked_combination":"sap-icon://business-objects-experience","donut":"sap-icon://donut-chart","heatmap":"sap-icon://heatmap-chart","horizontal_stacked_combination":"sap-icon://business-objects-experience","line":"sap-icon://line-chart","pie":"sap-icon://pie-chart","scatter":"sap-icon://scatter-chart","stacked_bar":"sap-icon://full-stacked-chart","stacked_column":"sap-icon://vertical-stacked-chart","stacked_combination":"sap-icon://business-objects-experience","treemap":"sap-icon://Chart-Tree-Map","vertical_bullet":"sap-icon://vertical-bullet-chart","100_dual_stacked_bar":"sap-icon://full-stacked-chart","100_dual_stacked_column":"sap-icon://vertical-stacked-chart","100_stacked_bar":"sap-icon://full-stacked-chart","100_stacked_column":"sap-icon://full-stacked-column-chart","waterfall":"sap-icon://vertical-waterfall-chart","horizontal_waterfall":"sap-icon://horizontal-waterfall-chart"};
G.prototype._getMatchingIcon=function(a){var i=H[a];if(!i){i="";}return i;};
G.prototype._enrichPassedButton=function(b,K,a){if(!b){return;}if(a===undefined){a=K;var e=this._retrieveChartTypeDescription(K);if(e&&e.text){a=e.text;}}b.data("chartType",K);var i=this._getMatchingIcon(K);b.setIcon(i?i:"sap-icon://vertical-bar-chart");var l=(this._oChart.getChartType()===K)?"CHART_TYPE_TOOLTIP":"CHART_TYPE_UNSEL_TOOLTIP";b.setTooltip(this._oRb.getText(l,[a]));};
G.prototype._updateAvailableChartType=function(){var a=this,b,e,i=[];b=this.getModel("$smartChartTypes");if(!b){return;}e={items:i};var l=this._oChart.getChartType();this._getAvailableChartTypes().forEach(function(n){var J={key:n.key,text:n.text,icon:a._getMatchingIcon(n.key),selected:l===n.key};i.push(J);});b.setData(e);if(this._oSegmentedButton){this._updateVisibilityOfChartTypes(this._oSegmentedButton);}};
G.prototype._createPersonalizationController=function(){if(this._oPersController){return;}var a=this.data("p13nDialogSettings");if(typeof a==="string"){try{a=JSON.parse(a);}catch(e){a=null;}}a=this._setIgnoreFromPersonalisationToSettings(a);a=a||{};q.sap.require("sap.ui.comp.personalization.Controller");var b=P.createChartWrapper(this._oChart,this._oChart.data("p13nData"),this._aColumnKeysOrdered);if(this.$()&&this.$().closest(".sapUiSizeCompact").length>0){this._oChart.addStyleClass("sapUiSizeCompact");}this._oPersController=new sap.ui.comp.personalization.Controller({table:b,setting:a,resetToInitialTableState:!this.getUseVariantManagement(),afterP13nModelDataChange:this._personalisationModelDataChange.bind(this)});this._oPersController.attachDialogConfirmedReset(function(){if(this._oDrillBreadcrumbs){this._updateDrillBreadcrumbs();}var i=sap.ui.getCore().byId(this.getId()+"-btnChartType");if(i){this._enrichPassedButton(i,this._oChart.getChartType());}}.bind(this));};
G.prototype._setIgnoreFromPersonalisationToSettings=function(a){var i=P.createArrayFromString(this.getIgnoreFromPersonalisation());if(i.length){if(!a){a={};}var b=function(e){if(!a[e]){a[e]={};}a[e].ignoreColumnKeys=i;};b("dimeasure");b("filter");b("sort");}return a;};
G.prototype._personalisationModelDataChange=function(e){this._oCurrentVariant=e.getParameter("persistentData");var a=e.getParameter("changeType");var b=this._getChangeStatus(a);if(b===sap.ui.comp.personalization.ChangeType.Unchanged){return;}this._fireChartDataChanged(a);if(!this._bApplyingVariant){if(!this.getUseVariantManagement()){this._persistPersonalisation();}else if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(true);}}if(b===sap.ui.comp.personalization.ChangeType.TableChanged){if(this._oCurrentVariant.dimeasure&&this._oCurrentVariant.dimeasure.chartTypeKey){this._updateAvailableChartType();if(this._oChartTypeButton){this._enrichPassedButton(this._oChartTypeButton,this._oChart.getChartType());}}if(this._oSemanticalNavButton){this._oSemanticalNavButton.setEnabled(false);}}else if(b===sap.ui.comp.personalization.ChangeType.ModelChanged&&this._bIsChartBound){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindChart();}}if(this._oDrillBreadcrumbs){this._updateDrillBreadcrumbs();}};
G.prototype._fireChartDataChanged=function(a){var b={dimeasure:false,filter:false,sort:false};for(var e in a){if(a[e]!=="Unchanged"){b[e]=true;}}this.fireChartDataChanged({changeTypes:b});};
G.prototype._getChangeStatus=function(a){if(!a){return sap.ui.comp.personalization.ChangeType.ModelChanged;}if(a.sort===sap.ui.comp.personalization.ChangeType.ModelChanged||a.filter===sap.ui.comp.personalization.ChangeType.ModelChanged||a.dimeasure===sap.ui.comp.personalization.ChangeType.ModelChanged||a.group===sap.ui.comp.personalization.ChangeType.ModelChanged){return sap.ui.comp.personalization.ChangeType.ModelChanged;}if(a.sort===sap.ui.comp.personalization.ChangeType.TableChanged||a.filter===sap.ui.comp.personalization.ChangeType.TableChanged||a.dimeasure===sap.ui.comp.personalization.ChangeType.TableChanged||a.group===sap.ui.comp.personalization.ChangeType.TableChanged){return sap.ui.comp.personalization.ChangeType.TableChanged;}return sap.ui.comp.personalization.ChangeType.Unchanged;};
G.prototype.setEntitySet=function(e){this.setProperty("entitySet",e);this._initialiseMetadata();};
G.prototype.propagateProperties=function(){V.prototype.propagateProperties.apply(this,arguments);this._initialiseMetadata();};
G.prototype._initialiseMetadata=function(){if(!this.bIsInitialised){u.handleModelInit(this,this._onMetadataInitialised);}};
G.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this.bIsInitialised){this._createChartProvider();if(this._oChartProvider){this._oChartViewMetadata=this._oChartProvider.getChartViewMetadata();if(this._oChartViewMetadata){this.bIsInitialised=true;this._listenToSmartFilter();this._createVariantManagementControl();this._assignData();this._createContent();this._createToolbarContent();this._createPersonalizationController();this.fireInitialise();if(!this._oVariantManagement||(this._oVariantManagement&&this._bVariantInitialised)){this._checkAndTriggerBinding();}}}}};
G.prototype._checkAndTriggerBinding=function(){if(!this._bAutoBindingTriggered){this._bAutoBindingTriggered=true;if(this.getEnableAutoBinding()){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindChart();}}}};
G.prototype._createChartProvider=function(){var a,e;e=this.getEntitySet();a=this.getModel();if(a&&!this._bChartCreated){this._aAlwaysSelect=[];this._aInitialSorters=[];this._createToolbar();this._createChart();this._addDrillBreadcrumbs();this._bChartCreated=true;}if(a&&e){this._oChartProvider=new m({entitySet:e,ignoredFields:this.getIgnoredFields(),dateFormatSettings:this.data("dateFormatSettings"),defaultDropDownDisplayBehaviour:this.data("defaultDimensionDisplayBehaviour"),skipAnnotationParse:this.data("skipAnnotationParse"),chartQualifier:this.data("chartQualifier"),presentationVariantQualifier:this.data("presentationVariantQualifier"),model:a,chartLibrary:d});}};
G.prototype._listenToSmartFilter=function(){var a=null;a=this.getSmartFilterId();this._oSmartFilter=this._findControl(a);if(this._oSmartFilter){this._oSmartFilter.attachSearch(this._reBindChart,this);this._oSmartFilter.attachFilterChange(this._filterChangeEvent,this);}};
G.prototype._filterChangeEvent=function(){if(this._bIsChartBound&&this._oSmartFilter&&!this._oSmartFilter.getLiveMode()&&!this._oSmartFilter.isDialogOpen()){this._showOverlay(true);}};
G.prototype._renderOverlay=function(b){if(this._oChart){var $=this._oChart.$(),a=$.find(".sapUiCompSmartChartOverlay");if(b&&a.length===0){a=q("<div>").addClass("sapUiOverlay sapUiCompSmartChartOverlay").css("z-index","1");$.append(a);}else if(!b){a.remove();}}};
G.prototype.showOverlay=function(b){this._showOverlay(b);};
G.prototype._showOverlay=function(b){if(b){var a={show:true};this.fireShowOverlay({overlay:a});b=a.show;}this._hasOverlay=b;this._renderOverlay(b);};
G.prototype._findControl=function(i){var R,a;if(i){R=sap.ui.getCore().byId(i);if(!R){a=this._getView();if(a){R=a.byId(i);}}}return R;};
G.prototype._getView=function(){if(!this._oView){var a=this.getParent();while(a){if(a instanceof sap.ui.core.mvc.View){this._oView=a;break;}a=a.getParent();}}return this._oView;};
G.prototype._updateInResultDimensions=function(){var a=this._getInResultDimensionTotal();var b=function(n){var e=this.getChart().getInResultDimensions();if(e.length!=n.length){return false;}for(var i=0,l=e.length;i<l;i++){if(e[i]!=n[i]){return false;}}return true;}.bind(this);if(a.length>0&&!b(a)){this.getChart().setInResultDimensions(a);}};
G.prototype.rebindChart=function(){this._reBindChart();};
G.prototype._reBindChart=function(){var a,b,e=[],i,l,n,J={},K={preventChartBind:false};a=this._getChartPersonalisationData()||{};i=a.filters;l=a.excludeFilters;n=a.sorters;if(this._oSmartFilter){b=this._oSmartFilter.getFilters();J=this._oSmartFilter.getParameters()||{};}if(b&&b.length){if(l){e=[new sap.ui.model.Filter([b[0],l],true)];}else{e=b;}}else if(l){e=[l];}if(i){i=e.concat(i);}else{i=e;}this._updateInResultDimensions();J["entitySet"]=this.getEntitySet();if(!n){n=[];}K.filters=i;K.sorter=n;K.parameters=J;this.fireBeforeRebindChart({bindingParams:K});if(!K.preventChartBind){n=K.sorter;i=K.filters;J=K.parameters;this._oChart.setBusy(true);this._bDataLoadPending=true;var L={path:this.getChartBindingPath()||("/"+this.getEntitySet()),parameters:J,filters:i,sorter:n,events:{dataReceived:function(Q){if(Q&&Q.getParameter&&Q.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._onDataLoadComplete(Q,true);this.fireDataReceived(Q);}.bind(this),change:this._onDataLoadComplete.bind(this)}};if(K.length){L.length=Math.min(K.length,100);}else{var N=this._oChartProvider.getMaxItems();if(N>0){L.length=N;}}this._oChart.bindData(L);this._showOverlay(false);this._bIsChartBound=true;}};
G.prototype._onDataLoadComplete=function(e,b){if(this._oSemanticalNavButton){this._oSemanticalNavButton.setEnabled(false);}if(this._bDataLoadPending||b){this._bDataLoadPending=false;this._updateAvailableChartType();this._oChart.setBusy(false);}};
G.prototype._assignData=function(){if(this._oChartViewMetadata&&this._oChart){if(this._oChartViewMetadata.measureFields&&(this._oChartViewMetadata.measureFields.length>0)){this._oChart.setVisibleMeasures(this._oChartViewMetadata.measureFields);}if(this._oChartViewMetadata.dimensionFields&&(this._oChartViewMetadata.dimensionFields.length>0)){this._oChart.setVisibleDimensions(this._oChartViewMetadata.dimensionFields);}if(!this.getChartType()&&this._oChartViewMetadata.chartType){this._setChartType(this._oChartViewMetadata.chartType);}}};
G.prototype._createP13nObject=function(a){if(a.sortable&&a.sorted){var b={columnKey:a.name,operation:a.sortOrder};this._aInitialSorters.push(b);}return{columnKey:a.name,leadingProperty:a.name,additionalProperty:a.additionalProperty,sortProperty:a.sortable?a.name:undefined,filterProperty:a.filterable?a.name:undefined,type:a.filterType,maxLength:a.maxLength,precision:a.precision,scale:a.scale,isMeasure:a.isMeasure,isDimension:a.isDimension,aggregationRole:a.aggregationRole,label:a.fieldLabel,tooltip:a.quickInfo,sorted:a.sorted,sortOrder:a.sortOrder};};
G.prototype._createContent=function(){q.sap.require("sap.ui.comp.util.FormatUtil");var i,l=0,a,b,e,n=[],J,K=this;var L=[];this._aColumnKeysOrdered=[];q.extend(this._aColumnKeysOrdered,this._oChartViewMetadata.dimensionFields);this._aColumnKeysOrdered=this._aColumnKeysOrdered.concat(this._oChartViewMetadata.measureFields);l=this._oChartViewMetadata.fields.length;for(i=0;i<l;i++){b=null;a=this._oChartViewMetadata.fields[i];if(this._aColumnKeysOrdered.indexOf(a.name)===-1){this._aColumnKeysOrdered.push(a.name);}if(this.getChart().getDimensionByName(a.name)===undefined&&this.getChart().getMeasureByName(a.name)===undefined){J=this._createP13nObject(a);e={name:a.name,label:a.fieldLabel};}if(a.inResult){this._aAlwaysSelect.push(a.name);}if(a.isDimension){if(this.getChart().getDimensionByName(a.name)===undefined){b=new D(e);this._oChart.addDimension(b);if(a.description){b.setTextProperty(a.description);b.setTextFormatter(function(Q,R){var W=this.getIdentity();var X=K._getDisplayBehaviour(W);return sap.ui.comp.util.FormatUtil.getFormattedExpressionFromDisplayBehaviour(X,Q,R);});}else if(a.dateFormatter){b.setTextFormatter(a.dateFormatter);}}else{var N=this.getChart().getDimensionByName(a.name).data("p13nData");if(N){this.getChart().getDimensionByName(a.name).data("p13nData",typeof N==="string"?JSON.parse(N):N);}}}else if(a.isMeasure){if(this.getChart().getMeasureByName(a.name)===undefined){b=new M(e);this._oChart.addMeasure(b);if(a.dataPoint){L.push({dataPoint:a.dataPoint,measure:b});}if(a.unit){b.setUnitBinding(a.unit);}}else{var N=this.getChart().getMeasureByName(a.name).data("p13nData");if(N){this.getChart().getMeasureByName(a.name).data("p13nData",typeof N==="string"?JSON.parse(N):N);}}}else if(a.sortable||a.filterable){n.push(J);}if(b){if(a.role){b.setRole(a.role);}b.data("p13nData",J);}}if(this._oChart){this._oChart.data("p13nData",n);}if(L.length>0){this._enrichFromDataPoints(L);}};
G.prototype._getDisplayBehaviour=function(n){var a=this._getField(n);if(a){return a.displayBehaviour;}return"";};
G.prototype._getField=function(n){var a,i,l;if(n&&this._oChartViewMetadata&&this._oChartViewMetadata.fields){l=this._oChartViewMetadata.fields.length;for(i=0;i<l;i++){a=this._oChartViewMetadata.fields[i];if(a.name===n){return a;}}}return null;};
G.prototype._createChart=function(){var a=this.getItems(),l=a?a.length:0,b;while(l--){b=a[l];if(b instanceof C){break;}b=null;}if(b){this._oChart=b;}else{this._oChart=new C({uiConfig:{applicationSet:'fiori'},busyIndicatorDelay:0,vizProperties:{title:{text:''},plotArea:{dataLabel:{hideWhenOverlap:false}},general:{groupData:false},categoryAxis:{layout:{autoHeight:true,autoWidth:true}}},selectionMode:this.getSelectionMode(),width:"100%"});this._toggleChartTooltipVisibility(this.getShowChartTooltip());this._setBehaviorTypeForDataSelection();this.insertItem(this._oChart,2);}if(!this._oChart.getLayoutData()){var e={growFactor:1};var L=this.getLayoutData();var i=null;if(L&&L.getBaseSize){i=L.getBaseSize();}if(i){e.baseSize="100%";}this._oChart.setLayoutData(new sap.m.FlexItemData(e));}if(this.getChartType()){this._setChartType(this.getChartType());}this._oChart.attachRenderComplete(function(){if(this._hasOverlay){setTimeout(function(){this._showOverlay(true);}.bind(this),0);}}.bind(this));this._createTooltipOrPopover();};
G.prototype._toggleChartTooltipVisibility=function(b){if(this._oChart){if(b){if(!this._vizTooltip){this._vizTooltip=new x();}this._vizTooltip.connect(this.getChart().getVizUid());}else{if(this._vizTooltip){this._vizTooltip.destroy();}}}};
G.prototype._updateVizTooltipFormatter=function(){if(this._vizTooltip){if(this.getChart().getChartType().match(/100/)!==null){this._vizTooltip.setFormatString(sap.viz.ui5.format.ChartFormatter.DefaultPattern.PERCENT);}else{this._vizTooltip.setFormatString(sap.viz.ui5.format.ChartFormatter.DefaultPattern.STANDARDFLOAT);}}};
G.prototype.getChart=function(){return this._oChart;};
G.prototype._getChartTypes=function(){var a;try{a=sap.chart.api.getChartTypes();}catch(e){a={};q.sap.log.error("sap.chart.api..getChartTypes throws an exception.\n"+e.toString());}return a;};
G.prototype._getAvailableChartTypes=function(){var i,K,a=[],b,e={},l;if(this._oChart){l=P.createArrayFromString(this.getIgnoredChartTypes());e=this._getChartTypes();b=this._oChart.getAvailableChartTypes().available;if(b){for(i=0;i<b.length;i++){K=b[i].chart;if(l.indexOf(K)<0){a.push({key:K,text:e[K]});}}}}return a;};
G.prototype._getAllChartTypes=function(){var K,a=[],b,i;i=P.createArrayFromString(this.getIgnoredChartTypes());b=this._getChartTypes();for(K in b){if(K){if(i.indexOf(K)<0){a.push({key:K,text:b[K]});}}}return a;};
G.prototype._retrieveChartTypeDescription=function(a){var b=this._getChartTypes();return({key:a,text:b[a]});};
G.prototype._setChartType=function(a){if(this._oChart){var b=this._oChart.getHeight();this._oChart.setChartType(a);this._aDetailsEntries=[];this._updateVizTooltipFormatter();this._toggleMeasureUnitBinding(a,this._oChart.getMeasures());this._oChart.setHeight(b);}};
G.prototype._toggleMeasureUnitBinding=function(a,b){if(typeof b!='undefined'&&b instanceof Array){if(a.substring(0,4)==="100_"){b.forEach(function(i){i.setUnitBinding();});}else{if(this._oChartProvider){var e=this._oChartProvider._aODataFieldMetadata;b.forEach(function(l){for(var i=e.length-1;i>=0;i--){if(e[i].name==l.getName()){if(e[i]["Org.OData.Measures.V1.ISOCurrency"]&&e[i]["Org.OData.Measures.V1.ISOCurrency"].Path){l.setUnitBinding(e[i]["Org.OData.Measures.V1.ISOCurrency"].Path);}break;}}});}}}};
G.prototype._getDimensions=function(){var a=[];if(this._oChart){a=this._oChart.getDimensions();}return a;};
G.prototype._getVisibleDimensions=function(){var a=[];if(this._oChart){a=this._oChart.getVisibleDimensions();}return a;};
G.prototype._getMeasures=function(){var a=[];if(this._oChart){a=this._oChart.getMeasures();}return a;};
G.prototype._getVisibleMeasures=function(){var a=[];if(this._oChart){a=this._oChart.getVisibleMeasures();}return a;};
G.prototype._getSortedDimensions=function(){var e=[];if(this._oChart){e=this._oChart.getDimensions();if(e){e.sort(function(a,b){if(a.getLabel()&&b.getLabel()){return a.getLabel().localeCompare(b.getLabel());}});}}return e;};
G.prototype.fetchVariant=function(){if(this._oCurrentVariant==="STANDARD"||this._oCurrentVariant===null){return{};}return this._oCurrentVariant;};
G.prototype.applyVariant=function(a,b){this._oCurrentVariant=a;if(this._oCurrentVariant==="STANDARD"){this._oCurrentVariant=null;}if(b==="STANDARD"){this._oApplicationDefaultVariant=this._oCurrentVariant;}if(this._oApplicationDefaultVariant&&!b){this._oCurrentVariant=q.extend(true,{},this._oApplicationDefaultVariant,a);}this._bApplyingVariant=true;if(this._oPersController){if(this._oCurrentVariant===null||q.isEmptyObject(this._oCurrentVariant)){this._oPersController.resetPersonalization(sap.ui.comp.personalization.ResetType.ResetFull);}else{this._oPersController.setPersonalizationData(this._oCurrentVariant);}}this._bApplyingVariant=false;this.fireAfterVariantApply({currentVariantId:this.getCurrentVariantId()});};
G.prototype.variantsInitialized=function(){this._bVariantInitialised=true;this._checkAndTriggerBinding();};
G.prototype.getUiState=function(){var a=this._oPersController?this._oPersController.getDataSuiteFormatSnapshot():null;return new U({presentationVariant:{ContextUrl:"",MaxItems:this._oChartProvider.getMaxItems(),SortOrder:a?a.SortOrder:[],GroupBy:a?a.GroupBy:[],Total:a?a.Total:[],RequestAtLeast:this._getInResultDimensionTotal(),Visualizations:a?a.Visualizations:[]},selectionVariant:{SelectOptions:a?a.SelectOptions:[]},variantName:this.getCurrentVariantId()});};
G.prototype.setUiState=function(a){if(!a.getPresentationVariant()&&!a.getPresentationVariant().Visualizations.some(function(e){return e.Type==="Chart";})){q.sap.log.error("sap.ui.comp.smartchart.SmartChart.prototype.setDataSuiteFormatSnapshot: 'Visualizations' array should contain at least one 'Chart' entry");return;}if(this._oPersController){var b=(this._oVariantManagement&&a.getVariantName())?this._oVariantManagement.getVariantContent(this,a.getVariantName()):{};this._oPersController.setDataSuiteFormatSnapshot(q.extend(true,{},a.getPresentationVariant(),a.getSelectionVariant()),b);}if(a.getPresentationVariant()){this._oChart.setInResultDimensions(a.getPresentationVariant().RequestAtLeast);}};
G.prototype.setRequestAtLeastFields=function(R){this.setProperty("requestAtLeastFields",R);if(this._oChart){this._updateInResultDimensions();}};
G.prototype._getInResultDimensionTotal=function(){var i=[];if(this.getRequestAtLeastFields()){i=this.getRequestAtLeastFields().split(",");}i=i.concat(this._aAlwaysSelect);i=i.concat(this.getChart().getInResultDimensions());return i.filter(function(e,a,b){return a==b.indexOf(e);});};
G.prototype._getFieldTooltip=function(K){var a=this._getFieldByKey(K);if(a){return a.quickInfo;}return"";};
G.prototype._getFieldByKey=function(K){var i,a=null;if(this._oChartViewMetadata&&this._oChartViewMetadata.fields){for(i=0;i<this._oChartViewMetadata.fields.length;i++){a=this._oChartViewMetadata.fields[i];if(K===a.name){return a;}}return null;}};
G.prototype._getByKey=function(a,K){var i,l,b,e;if(a){l=a.length;for(i=0;i<l;i++){b=a[i];e=b.data("p13nData");if(e&&e.columnKey===K){return b;}}}return null;};
G.prototype._getDimensionByKey=function(K){if(this._oChart){return this._getByKey(this._oChart.getDimensions(),K);}return null;};
G.prototype._getMeasureByKey=function(K){if(this._oChart){return this._getByKey(this._oChart.getMeasures(),K);}return null;};
G.prototype._getChartObjByKey=function(K){var a=this._getDimensionByKey(K);if(!a){a=this._getMeasureByKey(K);}return a;};
G.prototype._getPathFromColumnKeyAndProperty=function(a,b){var e=null,i,l;i=this._getChartObjByKey(a);if(i){l=i.data("p13nData");if(l){e=l[b];}}return e;};
G.prototype._getChartPersonalisationData=function(){if(!this._oCurrentVariant){return null;}var a=[],b=[],e=[],i,l,n;if(this._oCurrentVariant.sort){l=this._oCurrentVariant.sort.sortItems;}else{l=this._aInitialSorters;}if(l){l.forEach(function(J){var K=J.operation==="Descending";n=J.columnKey;a.push(new sap.ui.model.Sorter(n,K));},this);}if(this._oCurrentVariant.filter){this._oCurrentVariant.filter.filterItems.forEach(function(J){var K=J.value1,L=J.value2;n=J.columnKey;if(K instanceof Date&&this._oChartProvider&&this._oChartProvider.getIsUTCDateHandlingEnabled()){K=o.getDateInUTCOffset(K);L=L?o.getDateInUTCOffset(L):L;}if(J.exclude){e.push(new r(n,s.NE,K));}else{b.push(new r(n,J.operation,K,L));}},this);if(e.length){i=new r(e,true);}}return{filters:b,excludeFilters:i,sorters:a};};
G.prototype._persistPersonalisation=function(){var a=this;if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.getVariantsInfo(function(b){var e=null;if(b&&b.length>0){e=b[0].key;}var i=e!==null;var l={name:"Personalisation",global:false,overwrite:i,key:e,def:true};a._oVariantManagement.fireSave(l);});}};
G.prototype.getCurrentVariantId=function(){var K="";if(this._oVariantManagement){K=this._oVariantManagement.getCurrentVariantId();}return K;};
G.prototype.setCurrentVariantId=function(a){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setCurrentVariantId(a);}else{q.sap.log.error("sap.ui.comp.smartchart.SmartChart.prototype.setCurrentVariantId: VariantManagement does not exist or is a page variant");}};
G.prototype._adjustHeight=function(){if(this._oChart&&!this.bFullScreen){var i=0,b=0;var a=this.getDomRef()?this.getDomRef().offsetHeight:0;if(a===0){return;}if(this._oToolbar&&this._oToolbar.getDomRef()){i=this._oToolbar.getDomRef().offsetHeight;}if(this._oDrillBreadcrumbs&&this._oDrillBreadcrumbs.getDomRef()){var e=this._oDrillBreadcrumbs.getDomRef().parentNode?this._oDrillBreadcrumbs.getDomRef().parentNode:this._oDrillBreadcrumbs.getDomRef();b=e.offsetHeight;}this._iChartHeight=a-i-b;this._oChart.setHeight(this._iChartHeight+"px");this._updateDrillBreadcrumbs();if(this._hasOverlay){setTimeout(function(){this._showOverlay(true);}.bind(this),0);}}};
G.prototype._toggleFullScreen=function(b,a){if(!this.oFullScreenButton||(b===this.bFullScreen&&!a)){return;}this.bFullScreen=b;if(!this._oFullScreenUtil){this._oFullScreenUtil=sap.ui.requireSync("sap/ui/comp/util/FullScreenUtil");}this._oFullScreenUtil.toggleFullScreen(this,this.bFullScreen,this.oFullScreenButton,this._toggleFullScreen.bind(this,false));this._renderFullScreenButton();this.fireFullScreenToggled({fullScreen:b});if(this._oChart){var e=this.bFullScreen?"100%":(this._iChartHeight+"px");this._oChart.setHeight(e);this._processResizeHandler(!this.bFullScreen);}};
G.prototype._renderFullScreenButton=function(){this.oFullScreenButton.setTooltip(this.bFullScreen?this._oRb.getText("CHART_MINIMIZEBTN_TOOLTIP"):this._oRb.getText("CHART_MAXIMIZEBTN_TOOLTIP"));this.oFullScreenButton.setText(this.bFullScreen?this._oRb.getText("CHART_MINIMIZEBTN_TEXT"):this._oRb.getText("CHART_MAXIMIZEBTN_TEXT"));this.oFullScreenButton.setIcon(this.bFullScreen?"sap-icon://exit-full-screen":"sap-icon://full-screen");};
G.prototype._enrichFromDataPoints=function(a){var l=a.length;var b=[];var e={};for(var i=0;i<l;i++){this._interpretDataPoint(a[i].dataPoint,a[i].measure,e,b);}if(b.length>0){this._oChart.setActiveColoring({coloring:sap.chart.ColoringType.Criticality,parameters:{measure:b}});this._oChart.setColorings({Criticality:{MeasureValues:e}});}};
G.prototype._interpretDataPoint=function(a,b,e,i){this._setSemanticPatterns(a,b);if(b.setBoundaryValues){this._setBoundaryValues(a,b);}if(a.Criticality||a.CriticalityCalculation){e[a.Value.Path]=this._oChartProvider.provideSemanticColoring(a);i.push(a.Value.Path);}};
G.prototype._setSemanticPatterns=function(a,b){var R=a.TargetValue?a.TargetValue.Path:null;var e=a.ForecastValue?a.ForecastValue.Path:null;b.setSemantics(sap.chart.data.MeasureSemantics.Actual);if(R!=null){var i=this._oChart.getMeasureByName(R);if(i){i.setSemantics(sap.chart.data.MeasureSemantics.Reference);}else{q.sap.log.error("sap.ui.comp.SmartChart: "+a.TargetValue.Path+" is not a valid measure");}}if(e){var l=this._oChart.getMeasureByName(e);if(l){l.setSemantics(sap.chart.data.MeasureSemantics.Projected);}else{q.sap.log.error("sap.ui.comp.SmartChart: "+a.ForecastValue.Path+" is not a valid measure");}}b.setSemanticallyRelatedMeasures({referenceValueMeasure:R,projectedValueMeasure:e});};
G.prototype._setBoundaryValues=function(a,b){var e={};if(a.MinimumValue){e.minimum=a.MinimumValue;}if(a.MaximumValue){e.maximum=a.MaximumValue;}if(e.minimum||e.maximum){b.setBoundaryValues(e);}};
G.prototype.isInitialised=function(){return!!this.bIsInitialised;};
G.prototype.exit=function(){this._oRb=null;if(this._oSmartFilter){this._oSmartFilter.detachSearch(this._reBindChart,this);this._oSmartFilter.detachFilterChange(this._filterChangeEvent,this);}if(this._oChartProvider&&this._oChartProvider.destroy){this._oChartProvider.destroy();}this._oChartProvider=null;if(this._oPersController&&this._oPersController.destroy){this._oPersController.destroy();}if(this._oSegmentedButton){this._oSegmentedButton.removeAllButtons();this._oButtonChart1.destroy();this._oButtonChart2.destroy();this._oButtonChart3.destroy();this._oButtonChart4.destroy();this._oButtonChart5.destroy();this._oButtonChart1=null;this._oButtonChart2=null;this._oButtonChart3=null;this._oButtonChart4=null;this._oButtonChart5=null;}this._oPersController=null;if(this._oVariantManagement){this._oVariantManagement.detachSave(this._variantSaved,this);this._oVariantManagement.detachAfterSave(this._variantAfterSave,this);if(!this._oVariantManagement.isPageVariant()&&this._oVariantManagement.destroy){this._oVariantManagement.destroy();}}this._oVariantManagement=null;this._destroyPopover();if(this._oFullScreenUtil){this._oFullScreenUtil.cleanUpFullScreen(this);this._oFullScreenUtil=null;}if(this._oDetailsPopover){this._oDetailsPopover.destroy();if(this._oRelatedAppsMasterList){this._oRelatedAppsMasterList.destroy();}}this._processResizeHandler(false);this._oCurrentVariant=null;this._oApplicationDefaultVariant=null;this._oChartViewMetadata=null;this._aAlwaysSelect=null;this._aInitialSorters=null;this._oSmartFilter=null;this._oToolbar=null;this._oChartPersonalisationButton=null;this._oView=null;this._oChart=null;};
G.prototype._processResizeHandler=function(a){if(a){this.sResizeListenerId=null;if(t.system.desktop){this.sResizeListenerId=sap.ui.core.ResizeHandler.register(this,this._adjustHeight.bind(this));}else{t.orientation.attachHandler(this._adjustHeight,this);t.resize.attachHandler(this._adjustHeight,this);}}else{if(t.system.desktop&&this.sResizeListenerId){sap.ui.core.ResizeHandler.deregister(this.sResizeListenerId);this.sResizeListenerId=null;}else{t.orientation.detachHandler(this._adjustHeight,this);t.resize.detachHandler(this._adjustHeight,this);}}};
return G;},true);
sap.ui.predefine('sap/ui/comp/smartfield/Configuration',["jquery.sap.global","sap/ui/comp/library","sap/ui/core/Element"],function(q,l,E){"use strict";
var C=E.extend("sap.ui.comp.smartfield.Configuration",{metadata:{library:"sap.ui.comp",properties:{controlType:{type:"sap.ui.comp.smartfield.ControlType",group:"Misc",defaultValue:null},displayBehaviour:{type:"sap.ui.comp.smartfield.DisplayBehaviour",group:"Misc",defaultValue:null},preventInitialDataFetchInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:true}}}});
return C;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ObjectStatus',["jquery.sap.global","sap/ui/comp/library","sap/ui/core/Element"],function(q,l,E){"use strict";
var O=E.extend("sap.ui.comp.smartfield.ObjectStatus",{metadata:{library:"sap.ui.comp",properties:{criticality:{type:"any",group:"Misc",defaultValue:null},criticalityRepresentationType:{type:"sap.ui.comp.smartfield.CriticalityRepresentationType",group:"Misc",defaultValue:sap.ui.comp.smartfield.CriticalityRepresentationType.WithIcon}}}});
return O;},true);
sap.ui.predefine('sap/ui/comp/smartfield/SmartField.designtime',['sap/ui/fl/Utils'],function(F){"use strict";return{annotations:{dataType:{namespace:"Edm",types:["String","Boolean","Byte","DateTimeOffset","Date","Time","Decimal","Double","Single","Int16","Int32","Int64","Guid"]},fieldControl:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControl",target:["Property","Record"],defaultValue:false,appliesTo:["fieldItem/#"],group:["Behavior"],since:"1.28.1"},fieldVisible:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControlType",target:["Property","Record"],whiteList:{values:["Hidden"]},defaultValue:false,appliesTo:["fieldItem/#/visible"],group:["Behavior"],since:"1.28.1"},fieldReadOnly:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControlType",target:["Property","Record"],whiteList:{values:["ReadOnly"]},defaultValue:false,appliesTo:["fieldItem/#/editable"],group:["Behavior"],since:"1.28.1"},fieldMandatory:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControlType",target:["Property","Record"],whiteList:{values:["Mandatory"]},defaultValue:false,appliesTo:["fieldItem/#/editable"],group:["Behavior"],since:"1.28.1"},fieldMasked:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Masked",target:["Property"],defaultValue:false,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.28.1"},fieldLabel:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Label",target:["Property","PropertyPath"],defaultValue:null,appliesTo:["fieldItem/#/label"],group:["Behavior"],since:"1.28.1"},fieldText:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Text",target:["Property"],defaultValue:null,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.28.1"},textArrangement:{namespace:"com.sap.vocabularies.UI.v1",annotation:"TextArrangement",target:["EntityType"],defaultValue:null,appliesTo:["fieldItem/#/value"],group:["Appearance","Behavior"],since:"1.32.1"},fieldCurrencyCode:{namespace:"Org.OData.Measures.V1",annotation:"ISOCurrency",target:["Property"],defaultValue:null,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.28.1"},fieldUnitOfMeasure:{namespace:"Org.OData.Measures.V1",annotation:"Unit",target:["Property"],defaultValue:null,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.28.1"},fieldScale:{namespace:"Org.OData.Measures.V1",annotation:"Scale",target:["Property"],defaultValue:null,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.28.1"},fieldQuickInfo:{namespace:"com.sap.vocabularies.Common.v1",annotation:"QuickInfo",target:["Property"],defaultValue:null,appliesTo:["fieldItem/#/tooltip"],group:["Behavior"],since:"1.28.1"},fieldMultiLineText:{namespace:"com.sap.vocabularies.UI.v1",annotation:"MultiLineText",target:["Property","PropertyPath"],defaultValue:true,appliesTo:["fieldItem/#/control"],group:["Appearance","Behavior"],since:"1.28.1"},fieldUpperCase:{namespace:"com.sap.vocabularies.Common.v1",annotation:"IsUpperCase",target:["Property","Parameter"],defaultValue:true,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.28.1"},fieldDigitSequence:{namespace:"com.sap.vocabularies.Common.v1",annotation:"IsDigitSequence",target:["Property"],defaultValue:true,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.46"},fieldEmailAddress:{namespace:"com.sap.vocabularies.Communication.v1",annotation:"IsEmailAddress",target:["Property"],defaultValue:true,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.46"},fieldPhoneNumber:{namespace:"com.sap.vocabularies.Communication.v1",annotation:"IsPhoneNumber",target:["Property"],defaultValue:true,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.46"},fieldUrl:{namespace:"Org.OData.Core.V1",annotation:"IsURL",target:["Property"],defaultValue:true,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.46"},fieldCreatable:{namespace:"Org.OData.Capabilities.V1",annotation:"InsertRestrictions/Insertable",target:["EntitySet"],defaultValue:false,appliesTo:["fieldItem/#/editable"],group:["Behavior"],since:"1.28.1"},fieldComputed:{namespace:"Org.OData.Core.V1",annotation:"Computed",target:["Property"],defaultValue:true,appliesTo:["fieldItem/#/editable"],group:["Behavior"],since:"1.28.1"},fieldUpdatableEntitySet:{namespace:"Org.OData.Capabilities.V1",annotation:"UpdateRestrictions/Updatable",target:["EntitySet"],defaultValue:false,appliesTo:["fieldItem/#editable"],group:["Behavior"],since:"1.28.1"},fieldImmutable:{namespace:"Org.OData.Core.V1",annotation:"Immutable",target:["Property"],defaultValue:true,appliesTo:["fieldItem/#/editable"],group:["Behavior"],since:"1.28.1"},fieldSideEffects:{namespace:"com.sap.vocabularies.Common.v1",annotation:"SideEffects",target:["EntitySet","EntityType","ComplexType"],defaultValue:null,appliesTo:["fieldItem/#/value"],group:["Behavior"],since:"1.32.1"},valueList:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueList",target:["Property","Parameter"],defaultValue:null,appliesTo:["field/#/fieldHelp"],group:["Behavior"],since:"1.28.1"},valueListWithFixedValues:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueListWithFixedValues",target:["Property","Parameter"],defaultValue:null,appliesTo:["field/#/fieldHelp"],group:["Behavior"],since:"1.48.1"}},properties:{value:{ignore:true},enabled:{ignore:true},entitySet:{ignore:true},editable:{ignore:true},contextEditable:{ignore:true},width:{ignore:true},textAlign:{ignore:true},placeholder:{ignore:true},name:{ignore:true},valueState:{ignore:true},valueStateText:{ignore:true},showValueStateMessage:{ignore:true},jsontype:{ignore:true},mandatory:{ignore:true},maxLength:{ignore:true},showSuggestion:{ignore:true},showValueHelp:{ignore:false},showLabel:{ignore:true},textLabel:{ignore:true},tooltipLabel:{ignore:true},uomVisible:{ignore:true},uomEditable:{ignore:true},uomEnabled:{ignore:true},url:{ignore:true},uomEditState:{ignore:true},controlContext:{ignore:true},proposedControl:{ignore:true},wrapping:{ignore:true},clientSideMandatoryCheck:{ignore:true},fetchValueListReadOnly:{ignore:true},expandNavigationProperties:{ignore:true}},aggregations:{_content:{ignore:function(s){var i=s.getAggregation("_content");if(i){return i.getMetadata().getName()!=="sap.ui.comp.navpopover.SmartLink";}else{return true;}}}},customData:{dateFormatSettings:{type:"string",defaultValue:"\{'UTC':'true'\}",group:["Appearance"],since:"1.28.1"},displayBehaviour:{type:"sap.ui.comp.smartfield.DisplayBehaviour",defaultValue:"auto",since:"1.28.1"},suppressUnit:{type:"boolean",defaultValue:false,group:["Appearance"],since:"1.28.1"},multiLineSettings:{type:"object",defaultValue:"{cols: 20, rows: 2}",group:["Appearance"],since:"1.28.1"}}};},false);
sap.ui.predefine('sap/ui/comp/smartfield/SmartField',["jquery.sap.global","sap/ui/comp/library","./JSONControlFactory","./ODataControlFactory","./BindingUtil","./SideEffectUtil","./ODataHelper","sap/ui/core/Control","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/json/JSONModel","sap/ui/core/ValueState"],function(q,l,J,O,B,S,a,C,P,V,b,c){"use strict";
var d=C.extend("sap.ui.comp.smartfield.SmartField",{
metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.comp",designTime:true,properties:{value:{type:"any",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},entitySet:{type:"string",group:"Misc",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},contextEditable:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:""},textAlign:{type:"sap.ui.core.TextAlign",group:"Misc",defaultValue:sap.ui.core.TextAlign.Initial},placeholder:{type:"string",group:"Misc",defaultValue:""},name:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:c.None},valueStateText:{type:"string",group:"Appearance",defaultValue:""},showValueStateMessage:{type:"boolean",group:"Appearance",defaultValue:true},jsontype:{type:"sap.ui.comp.smartfield.JSONType",group:"Misc",defaultValue:null},mandatory:{type:"boolean",group:"Misc",defaultValue:false},maxLength:{type:"int",group:"Misc",defaultValue:0},showSuggestion:{type:"boolean",group:"Misc",defaultValue:true},showValueHelp:{type:"boolean",group:"Misc",defaultValue:true},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},textLabel:{type:"string",group:"Misc",defaultValue:""},tooltipLabel:{type:"string",group:"Misc",defaultValue:""},uomVisible:{type:"boolean",group:"Misc",defaultValue:true},uomEditable:{type:"boolean",group:"Misc",defaultValue:true},uomEnabled:{type:"boolean",group:"Misc",defaultValue:true},url:{type:"string",group:"Misc",defaultValue:""},uomEditState:{type:"int",group:"Misc",defaultValue:-1},controlContext:{type:"sap.ui.comp.smartfield.ControlContextType",group:"Misc",defaultValue:sap.ui.comp.smartfield.ControlContextType.None},proposedControl:{type:"sap.ui.comp.smartfield.ControlProposalType",group:"Misc",defaultValue:sap.ui.comp.smartfield.ControlProposalType.None},wrapping:{type:"boolean",group:"Misc",defaultValue:true},clientSideMandatoryCheck:{type:"boolean",group:"Misc",defaultValue:true},fetchValueListReadOnly:{type:"boolean",group:"Misc",defaultValue:true},expandNavigationProperties:{type:"boolean",group:"Behavior",defaultValue:false}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},configuration:{type:"sap.ui.comp.smartfield.Configuration",multiple:false},controlProposal:{type:"sap.ui.comp.smartfield.ControlProposal",multiple:false},_ariaLabelInvisibleText:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{entitySetFound:{parameters:{entitySet:{type:"string"}}},change:{parameters:{value:{type:"string"},newValue:{type:"string"}}},initialise:{},visibleChanged:{parameters:{visible:{type:"boolean"}}},editableChanged:{parameters:{editable:{type:"boolean"}}},contextEditableChanged:{parameters:{editable:{type:"boolean"}}},innerControlsCreated:{},valueListChanged:{parameters:{changes:{type:"sap.ui.core.Control[]"}}},press:{}}},
renderer:function(r,o){r.write("<div ");r.writeControlData(o);r.addClass("sapUiCompSmartField");r.writeClasses();r.write(">");r.renderControl(o.getAggregation("_content"));if(o.getAggregation("_ariaLabelInvisibleText")){o.getAggregation("_ariaLabelInvisibleText").forEach(function(i){r.renderControl(i);});}r.write("</div>");}
});
d.prototype.init=function(){this._bInDestroy=false;this._oSideEffects=new S(this);this._oFactory=null;this._bValueHelpCreated=false;this._oControl={display:null,"display_uom":null,edit:null,current:null};this._oValue={display:null,edit:null,uom:null,uomset:null};this._oError={bComplex:false,bFirst:false,bSecond:false};this._sBindingContextPath="";this._oValueBind=null;this._oUtil=new B();this._bSuppressToggleControl=false;this.attachEvent("innerControlsCreated",d.prototype._setOnInnerControl,this);};
d.prototype.setVisible=function(v,s){var o=this.getVisible();C.prototype.setVisible.apply(this,arguments);v=this.getVisible();if(v!==o){this.fireVisibleChanged({visible:v});}return this;};
d.prototype.setEditable=function(e){var o=this.getEditable();this.setProperty("editable",e,true);e=this.getEditable();this._bPendingEditableState=false;this._toggleControl();if(e!==o){this.fireEditableChanged({editable:e});}return this;};
d.prototype.setContextEditable=function(e){var o=this.getContextEditable();this.setProperty("contextEditable",e,true);e=this.getContextEditable();this._bPendingEditableState=false;this._toggleControl();if(e!==o){this.fireContextEditableChanged({editable:e});}return this;};
d.prototype.setMandatory=function(m){this.setProperty("mandatory",m,false);this._setOnInnerControl();return this;};
d.prototype.setWidth=function(w){this.setProperty("width",w,true);this._setOnInnerControl();return this;};
d.prototype.setWrapping=function(w){this.setProperty("wrapping",w,true);this._setOnInnerControl();return this;};
d.prototype.setTextAlign=function(t){this.setProperty("textAlign",t,true);this._setOnInnerControl();return this;};
d.prototype.setPlaceholder=function(p){this.setProperty("placeholder",p,true);this._setOnInnerControl();return this;};
d.prototype.setName=function(n){this.setProperty("name",n,true);this._setOnInnerControl();return this;};
d.prototype.setMaxLength=function(m){this.setProperty("maxLength",m,true);this._setOnInnerControl();return this;};
d.prototype.setShowValueHelp=function(s){this.setProperty("showValueHelp",s,true);if(s&&this._oFactory){if(!this._bValueHelpCreated){this._oFactory._createValueHelp();this._bValueHelpCreated=true;}}var o=this.getAggregation("_content");if(o&&(typeof o.setShowValueHelp==="function")){o.setShowValueHelp(s);}return this;};
d.prototype.setShowSuggestion=function(s){this.setProperty("showSuggestion",s,true);if(s&&this._oFactory){if(!this._bValueHelpCreated){this._oFactory._createValueHelp();this._bValueHelpCreated=true;}}var o=this.getAggregation("_content");if(o&&(typeof o.setShowSuggestion==="function")){o.setShowSuggestion(s);}return this;};
d.prototype._setOnInnerControl=function(){var o=this.getAggregation("_content"),w;if(o){if(typeof o.setWidth==="function"){w=this.getWidth();if(w){o.setWidth(w);}}if(typeof o.setWrapping==="function"){o.setWrapping(this._getWrappingForInnerControl(o));}if(typeof o.setName==="function"){o.setName(this.getName());}if(typeof o.setPlaceholder==="function"){o.setPlaceholder(this.getPlaceholder());}if(typeof o.setTextAlign==="function"){o.setTextAlign(this.getTextAlign());}if((typeof o.setMaxLength==="function")&&this._oFactory&&this._oFactory._getMaxLength){o.setMaxLength(this._oFactory._getMaxLength());}if(typeof o.setRequired==="function"){o.setRequired(this.getMandatory());}}return this;};
d.prototype._getWrappingForInnerControl=function(o){var w=this.getWrapping(),p;o=o||this.getAggregation("_content");if(o){p=o.getMetadata().getProperty("wrapping");}if(p){switch(p.type){case"boolean":return w;case"sap.ui.core.Wrapping":var W=sap.ui.core.Wrapping;if(w){return W.Soft;}return W.None;}}return w;};
d.prototype.setUrl=function(v){this.setProperty("url",v,true);return this;};
d.prototype.setEntitySet=function(v){this.setProperty("entitySet",v,true);this.fireEntitySetFound({entitySet:v});return this;};
d.prototype._setPendingEditState=function(D){this.data("pendingEditableState",!D);};
d.prototype.applySettings=function(s){if(s&&s.customData){for(var i=0;i<s.customData.length;i++){var o=s.customData[i];if(o&&o.mProperties&&o.mProperties.key==="pendingEditableState"){this._bPendingEditableState=o.mProperties.value;}}}return C.prototype.applySettings.apply(this,arguments);};
d.prototype.setEnabled=function(v){this.setProperty("enabled",v,true);this._toggleControl();return this;};
d.prototype.getControlFactory=function(){return this._oFactory;};
d.prototype.getValue=function(){var p=this.getInnerValueFunction();if(p){return p();}return this.getProperty("value");};
d.prototype.getInnerValueFunction=function(){if(this._oValue&&(typeof this._oValue[this._getMode()]==="function")){return this._oValue[this._getMode()];}return null;};
d.prototype.getValueState=function(){var e=this.getInnerControls(),i=this._getMaxSeverity(e);if(i>-1){return e[i].getValueState();}return c.None;};
d.prototype.setValueState=function(v){var e=this.getInnerControls(),o,m="setSimpleClientError";if(e&&e.length){o=e[0];if(e.length>1){m="setComplexClientErrorFirstOperand";}}if(o&&o.setValueState){o.setValueState(v);this[m](v===c.Error);}return this;};
d.prototype.getValueStateText=function(){var e=this.getInnerControls(),i=this._getMaxSeverity(e);if(i>-1){return e[i].getValueStateText();}return this.getProperty("valueStateText");};
d.prototype.setValueStateText=function(t){var e=this.getInnerControls(),o;if(e&&e.length){o=e[0];}if(o&&o.setValueStateText){o.setValueStateText(t);}return this;};
d.prototype._getMaxSeverity=function(e){var s,o,i,f,g=0,I=-1,m={"Error":3,"Warning":2,"Success":1,"None":0};f=e.length;for(i=0;i<f;i++){o=e[i];if(o.getValueState){s=o.getValueState();if(s&&m[s]>g){g=m[s];I=i;}}}return I;};
d.prototype.getFocusDomRef=function(){var e=this.getInnerControls(),o,f=e.length;if(f>0){o=e[0];}if(o&&o.getFocusDomRef){return o.getFocusDomRef();}return C.prototype.getFocusDomRef.apply(this,arguments);};
d.prototype.getIdForLabel=function(){var e=this.getInnerControls(),o,f=e.length;if(f>0){o=e[0];}if(o&&o.getIdForLabel){return o.getIdForLabel();}return this.getId();};
d.prototype.updateBindingContext=function(s,m,u){if(this._bInDestroy){return;}this._init(m);if(this._oFactory){if(this.getBindingContext()){this._sBindingContextPath=this.getBindingContext().getPath();}if(this._oFactory.bind){this._oFactory.bind();this._checkFieldGroups();}else{this._toggleControl();}}C.prototype.updateBindingContext.apply(this,arguments);};
d.prototype._getMode=function(){var e=this.getEditable(),E=this.getEnabled(),f=this.getContextEditable();if(this.getControlContext()==="responsiveTable"&&this.data("suppressUnit")!=="true"){if(!e||!f||!E||(this.getUomEditState()===0)){return"display_uom";}}if(f&&this.data("configdata")&&this.data("configdata").configdata.isUOM&&this.data("configdata").configdata.isInnerControl&&this.data("configdata").configdata.getContextEditable){f=this.data("configdata").configdata.getContextEditable();}return e&&E&&f?"edit":"display";};
d.prototype._toggleControl=function(){var m,v,o,e=true;if(this._bPendingEditableState||this._bSuppressToggleControl){return;}if(!this._oFactory||this._oFactory.bPending){return;}m=this._getMode();if(m==="edit"||m==="display_uom"){this._createControl(m);}else{v=this.getProperty("value");o=this.data("configdata");if(o&&o.configdata&&!o.configdata.isUOM){if(v===null||v===""){e=false;}}if(e){this._createControl(m);}else{this.setAggregation("_content",null);this._oControl.current="display";}}this._setOnInnerControl();};
d.prototype.setValue=function(v){this.setProperty("value",v,true);if(this._oFactory&&!this._oFactory.bPending){this._toggleControl();}return this;};
d.prototype._createControl=function(m){var o;if(this._oFactory){if((m!==this._oControl.current)||!this._oControl[m]){if(!this._oControl[m]){o=this._oFactory.createControl();if(o){this._oControl[m]=o.control;this._placeCallBacks(o,m);}}this._oControl.current=m;this.setAggregation("_content",this._oControl[m]);this.fireInnerControlsCreated(this.getInnerControls());}else if(!this.getAggregation("_content")){this.setAggregation("_content",this._oControl[m]);}}};
d.prototype._placeCallBacks=function(o,m){if(o.params&&o.params.getValue){this._oValue[m]=o.params.getValue;}if(o.params&&o.params.uom){this._oValue.uom=o.params.uom;}if(o.params&&o.params.uomset){this._oValue.uomset=o.params.uomset;}};
d.prototype._init=function(m){var M,o,e;if(this._oFactory&&this._sBindingContextPath&&this.getBindingContext()&&(this._sBindingContextPath!==this.getBindingContext().getPath())){this._destroyFactory();}if(!this._oFactory){e=this.data("configdata");if(!e){M=this.getModel(m);}o=this._getBindingInfo(m,"value");if(o){if(e||M){this._oFactory=this._createFactory(m,M,o,e);}}else if(M&&!(M instanceof b)){if(this.getBindingInfo("url")||this.getUrl()){if(e||M){this._oFactory=this._createFactory(m,M,o,e);}}}}};
d.prototype._destroyFactory=function(){this._bSuppressToggleControl=true;this._bSideEffects=false;if(this._oFactory){this._oFactory.destroy();}this._oFactory=null;this._bSuppressToggleControl=false;if(this._oControl["display"]){this._oControl["display"].destroy();}if(this._oControl["display_uom"]){this._oControl["display_uom"].destroy();}if(this._oControl["edit"]){this._oControl["edit"].destroy();}this._oControl["display"]=null;this._oControl["display_uom"]=null;this._oControl["edit"]=null;this._oControl["current"]=null;this._oValue={display:null,edit:null,uom:null,uomset:null};this.destroyAggregation("_content");};
d.prototype._createFactory=function(m,M,o,e){var E,p;if(M&&M instanceof b){return new J(M,this,{model:m,path:o.path});}if(!e){E=this._getEntitySet(m);}if(E||e){if(e){p=e.configdata;}else{p={entitySet:E,model:m,path:(o&&o.path)?o.path:""};}return new O(M,this,p);}return null;};
d.prototype._getEntitySet=function(m){var e=this.getEntitySet();if(e&&!m){return e;}var o=this.getBindingContext(m);if(o){if(!o.sPath||(o.sPath==="/undefined")){return"";}e=this._oUtil.correctPath(o.sPath);this.fireEntitySetFound({entitySet:e});return e;}return"";};
d.prototype._getBindingInfo=function(m,n){if(!this._oValueBind){this._oValueBind=this.getBindingInfo(n);try{this._oValueBind=this._oValueBind.parts[0];}catch(e){}}if(this._oValueBind){if(!this._oValueBind.model&&!m){return this._oValueBind;}if(this._oValueBind.model===m){return this._oValueBind;}}return null;};
d.prototype.getDataType=function(){var p;if(this._oFactory){if(this._oFactory.getDataProperty){p=this._oFactory.getDataProperty();if(p){return p.property.type;}}return this.getJsonType();}return null;};
d.prototype.getDataProperty=function(){if(this._oFactory){if(this._oFactory.getDataProperty){return this._oFactory.getDataProperty();}return null;}return null;};
d.prototype.getUnitOfMeasure=function(){if(this._oValue.uom){return this._oValue.uom();}return null;};
d.prototype.setUnitOfMeasure=function(u){if(u&&this._oValue.uomset){this._oValue.uomset(u);}};
d.prototype.setSimpleClientError=function(e){this._oError.bFirst=e;};
d.prototype.setComplexClientErrorFirstOperand=function(e){this._oError.bComplex=true;this._oError.bFirst=e;};
d.prototype.setComplexClientErrorSecondOperand=function(e){this._oError.bComplex=true;this._oError.bSecond=e;};
d.prototype.setComplexClientErrorSecondOperandNested=function(e){var p=this.getParent().getParent();p.setComplexClientErrorSecondOperand(e);};
d.prototype._hasClientError=function(){if(this._oError.bComplex){return this._oError.bFirst||this._oError.bSecond;}return this._oError.bFirst;};
d.prototype.checkClientError=function(){var e,f;if(this._getMode()==="display"){return false;}if(this._hasClientError()){return true;}e=this.getInnerControls();f=e.length;for(var i=0;i<f;i++){this._checkClientError(e[i]);}return this._hasClientError();};
d.prototype._checkClientError=function(o){var v=null,t=null,p=null,e,m,s,f={"sap.m.Input":"value","sap.m.DatePicker":"value","sap.m.ComboBox":"selectedKey","sap.m.TextArea":"value"};if(o){s=f[o.getMetadata()._sClassName];}if(s){e=o.getBinding(s);}if(e){try{m="get"+s.substring(0,1).toUpperCase()+s.substring(1);v=o[m]();t=e.getType();if(e.sInternalType){p=t.parseValue(v,e.sInternalType);t.validateValue(p);}}catch(g){if(g instanceof P){o.fireParseError({exception:g});}if(g instanceof V){o.fireValidationError({exception:g});}}}};
d.prototype.isContextTable=function(){return(this.getControlContext()==="responsiveTable"||this.getControlContext()==="table");};
d.prototype.getInnerControls=function(){var o,f,m={"sap.m.HBox":function(e){var g,i,h=0;i=e.getItems();if(i){h=i.length;}if(h===0){return[];}if(h===1){return[i[0]];}g=i[1].getAggregation("_content");if(g){return[i[0],g];}return[i[0]];},"sap.ui.comp.navpopover.SmartLink":function(e){var i=e.getAggregation("innerControl");if(i){return[i];}return[e];}};o=this.getAggregation("_content");if(o){f=m[o.getMetadata()._sClassName];}if(f){return f(o);}if(o){return[o];}return[];};
d.prototype._getEmbeddedSmartField=function(){var e=this.getAggregation("_content");if(e){if(e instanceof sap.m.HBox){var h=e.getItems();if(h){for(var j=0;j<h.length;j++){if(h[j]instanceof d){return h[j];}}}}}return null;};
d.prototype.onAfterRendering=function(){if(C.prototype.onAfterRendering){C.prototype.onAfterRendering.apply(this);}this._checkFieldGroups();};
d.prototype.onBeforeRendering=function(){var f=this.getInnerControls();var t=this;if(this.getAriaLabelledBy().length>0){f.forEach(function(F){if(F.addAriaLabelledBy&&F.getAriaLabelledBy){if(F.getAriaLabelledBy().length===0){F.addAriaLabelledBy(t.getAriaLabelledBy()[0]);}}});}};
d.prototype._checkFieldGroups=function(){var v,m,M=this._getMode();if(this.getBindingContext()&&this._oFactory&&this._oFactory.getMetaData&&(M==="edit")&&!this._bSideEffects){m=this._oFactory.getMetaData();if(m&&!m.property||(m.property&&!m.property.property)){return;}v=this._getView();if(v&&m){this._setFieldGroup(m,v);}}};
d.prototype._setFieldGroup=function(m,v){var e,i=this._oSideEffects.getFieldGroupIDs(m,v);if(i){e=this.getInnerControls();if(e.length){this._bSideEffects=true;e[0].setFieldGroupIds(i);}}};
d.prototype._getView=function(){var o=this.getParent();while(o){if(o instanceof sap.ui.core.mvc.View){return o;}o=o.getParent();}return null;};
d.prototype.refreshDataState=function(n,D){var o,e;if(n==="value"){if(D.isLaundering()){if(this.getEditable()){o=this.getBindingContext();if(o&&o.getObject){e=o.getObject();if(e&&e.__metadata&&e.__metadata.created){this._checkCreated=true;return;}}}}if(this._checkCreated&&!D.isLaundering()&&!D.isDirty()){this._oFactory.rebindOnCreated();delete this._checkCreated;}}};
d.prototype.exit=function(){this._bInDestroy=true;var i=null;if(this._oSideEffects){this._oSideEffects.destroy();}if(this._oUtil){this._oUtil.destroy();}if(this._oFactory){this._oFactory.destroy();this._bValueHelpCreated=false;}var o=this._oControl;if(o){if(o.current==="edit"){i=o["display"]||o["display_uom"];}else{i=o["edit"];}if(o[o.current]&&!o[o.current].getParent()){o[o.current].destroy();}}if(i&&(typeof i.destroy==="function")){i.destroy();}this._oUtil=null;this._oError=null;this._oValue=null;this._oFactory=null;this._oControl=null;this._oValueBind=null;this._oSideEffects=null;this._sBindingContextPath="";this.detachEvent("innerControlsCreated",d.prototype._setOnInnerControl,this);};
d.getSupportedAnnotationPaths=function(m,e,v,n){var o,u,r=[],M;if(m&&e&&v){M={entitySet:e,entityType:m.getODataEntityType(e.entityType),path:v};o={helper:new a(null,null,m)};if(n){o.navigationPathOnly=n;}o.helper.getProperty(M);d._getFromEntitySet(r,M,o);d._getFromProperty(r,M,o);u=o.helper.getUnitOfMeasure2(M);if(u){d._getFromProperty(r,u,o);}o.helper.destroy();}return r;};
d._getFromEntitySet=function(r,m,o){var p;if(m.entitySet){p=o.helper.oAnnotation.getUpdateEntitySetPath(m.entitySet);d._push(p,r,m,o);}};
d._push=function(p,r,m,o){var e,s,f,g,R={};if(p){if(o.navigationPathOnly){e=p.split("/");f=e.length;R.entityType=m.entityType;while(f--){s=e.shift();if(s===""){continue;}R=o.helper.getNavigationProperty(R.entityType,s);if(!R.entitySet){break;}if(g){g=g+"/"+s;}else{g=s;}}}else{g=p;}}if(g){if(m.navigationPath){r.push(m.navigationPath+"/"+g);}else{r.push(g);}}};
d._getFromProperty=function(r,m,o){var p;if(m.property.property){p=o.helper.oAnnotation.getText(m.property.property);d._push(p,r,m,o);p=o.helper.oAnnotation.getUnit(m.property.property);d._push(p,r,m,o);p=o.helper.oAnnotation.getFieldControlPath(m.property.property);d._push(p,r,m,o);}};
d.prototype.addAssociation=function(A,i,s){if(A==="ariaLabelledBy"){this.getInnerControls().forEach(function(o){if(o.addAriaLabelledBy){o.addAriaLabelledBy(i);}});}return C.prototype.addAssociation.apply(this,arguments);};
d.prototype.removeAssociation=function(A,o,s){var i=C.prototype.removeAssociation.apply(this,arguments);if(A==="ariaLabelledBy"&&i){this.getInnerControls().forEach(function(e){if(e.removeAriaLabelledBy){e.removeAriaLabelledBy(i);}});}return i;};
d.prototype.getAccessibilityInfo=function(){var o=this.getAggregation("_content");return o&&o.getAccessibilityInfo?o.getAccessibilityInfo():null;};
d.prototype.enhanceAccessibilityState=function(e,A){var p=this.getParent();if(p&&p.enhanceAccessibilityState){p.enhanceAccessibilityState(this,A);}};
d.prototype.getRequired=function(){if(this.getContextEditable()&&this.getEditable()){return this.getMandatory();}else{return false;}};
return d;},true);
sap.ui.predefine('sap/ui/comp/smartfield/SmartLabel',["jquery.sap.global","sap/ui/core/Control","sap/m/Label","sap/m/LabelRenderer","sap/ui/comp/library","./BindingUtil","./AnnotationHelper","./SmartField"],function(q,C,L,a,l,B,A,S){"use strict";
var b=L.extend("sap.ui.comp.smartfield.SmartLabel",{
metadata:{library:"sap.ui.comp"},
renderer:a.render
});
b.prototype.init=function(){this._sSmartFieldId=null;this._bMetaDataApplied=false;this._fInnerControlsCreatedHandlers=null;};
b.prototype._bindProperties=function(){var s=this._getField();if(s){var o=new B();var i=null;this.setVisible(s.getVisible());if(!this._bTextSetExplicitly){i=s.getBindingInfo("textLabel");if(i){this.bindProperty("text",o.toBinding(i));}else if(!this.getBindingInfo("text")){this._setText(s.getTextLabel());}}i=s.getBindingInfo("tooltipLabel");if(i){this.bindProperty("tooltip",o.toBinding(i));}else{this.setTooltip(s.getTooltipLabel());}}};
b.prototype.onFieldVisibilityChange=function(c){this.setVisible(c.getSource().getVisible());};
b.prototype.getLabelInfo=function(){var m,o;var s=this._getField();if(s){this._bindProperties();m=s.getDataProperty();if(m){o=this._getLabelInfo(m);if(o){if(o.text&&!this._bTextSetExplicitly){this._setProperty(this,"text",o.text);}if(o.quickinfo){this._setProperty(this,"tooltip",o.quickinfo);}}}}};
b.prototype._setProperty=function(o,p,v){var P;if(o&&p){if(v.match(/{@i18n>.+}/gi)){o.bindProperty(p,v.substring(1,v.length-1));}else{P=p.substring(0,1).toUpperCase()+p.substring(1);if(!o.getBindingInfo(p)&&(!o["get"+P]())){o["set"+P](v);}}}};
b.prototype.setLabelFor=function(s){var c=sap.ui.getCore();var o=this._getField();var n="";if(s){if(typeof s==="string"){n=s;}else if(s.getId){n=s.getId();}}if(n.length>0&&n===this._sSmartFieldId){return this;}if(o){if(this._fChange){o.detachEvent("_change",this._fChange);this._fChange=null;}if(this._fInitialized){o.detachInitialise(this._fInitialized);this._fInitialized=null;}this.detachFieldVisibilityChange(o);this._bMetaDataApplied=false;}if(n.length>0){this._sSmartFieldId=n;this._setLabelFor();}else{this._sSmartFieldId=null;}L.prototype.setLabelFor.apply(this,arguments);var d=c.byId(this.getLabelFor())||null;if(d&&(typeof d.attachVisibleChanged==="function")){d.attachVisibleChanged(this.onFieldVisibilityChange,this);}return this;};
b.prototype._getField=function(){if(this._sSmartFieldId){return sap.ui.getCore().byId(this._sSmartFieldId);}return null;};
b.prototype._setLabelFor=function(){var d,s=this._getField();if(s&&!this._bMetaDataApplied){this._bMetaDataApplied=true;if(s.getDataProperty){d=s.getDataProperty();if(d){this.getLabelInfo();}else{if(!this._fInitialized){this._fInitialized=this.getLabelInfo.bind(this);s.attachInitialise(this._fInitialized);}if(!this._fChange){this._fChange=function(e){if(e.getParameter("name")==="textLabel"){this.getLabelInfo();}else if(e.getParameter("name")==="mandatory"){this.invalidate();}}.bind(this);s.attachEvent("_change",this._fChange);}}this._lateUpdateLabelFor(s);}}};
b.prototype.updateLabelFor=function(c){var i=c.slice(0);if(i&&i.length>0){this.invalidate();i.splice(0,1);this.updateAriaLabeledBy(i);}};
b.prototype.updateAriaLabeledBy=function(c){if(c){for(var i=0;i<c.length;i++){if(c[i].addAriaLabelledBy){c[i].addAriaLabelledBy(this);}}}};
b.prototype.setText=function(v){this.setProperty("text",v);this._bTextSetExplicitly=true;return this;};
b.prototype._setText=function(v){this.setProperty("text",v);};
b.prototype._getLabelInfo=function(p){var o=new A();if(p&&p.property){return{text:o.getLabel(p.property),quickinfo:o.getQuickInfo(p.property)};}};
b.prototype._delayUpdateLabelFor=function(s){var t=this;if(s.attachInnerControlsCreated&&!this._fInnerControlsCreatedHandlers){this._fInnerControlsCreatedHandlers=function(e){t.updateLabelFor(e.getParameters());};s.attachInnerControlsCreated(this._fInnerControlsCreatedHandlers);}};
b.prototype._lateUpdateLabelFor=function(s){var i;if(s&&(s instanceof S)){i=s.getInnerControls();if(i&&(i.length>0)){this.updateLabelFor(i);}else{this._delayUpdateLabelFor(s);}}};
b.prototype.onBeforeRendering=function(){if(this._sSmartFieldId){var s=this._getField();if(!this._bMetaDataApplied){this._setLabelFor();if(s.getId()===this.getLabelFor()){this._lateUpdateLabelFor(s);}}}};
b.prototype.detachFieldVisibilityChange=function(c){if(c&&(typeof c.detachVisibleChanged==="function")){c.detachVisibleChanged(this.onFieldVisibilityChange,this);}};
b.prototype.destroy=function(s){var o=this._getField();delete this._bTextSetExplicitly;if(o){if(this._fInnerControlsCreatedHandlers&&o.detachInnerControlsCreated){o.detachInnerControlsCreated(this._fInnerControlsCreatedHandlers);this._fInnerControlsCreatedHandlers=null;}if(this._fInitialized&&o.detachInitialise){o.detachInitialise(this._fInitialized);this._fInitialized=null;}if(this._fChange){o.detachEvent("_change",this._fChange);this._fChange=null;}}this._sSmartFieldId=null;return L.prototype.destroy.apply(this,arguments);};
b.prototype.exit=function(){L.prototype.exit.apply(this,arguments);this.detachFieldVisibilityChange(sap.ui.getCore().byId(this.getLabelFor()));};
return b;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/AdditionalConfigurationHelper',['jquery.sap.global'],function(q){"use strict";var A=function(c,g){this.controlConfiguration=[];this.groupConfiguration=[];this._initialize(c,g);};
A.prototype._initialize=function(c,g){var i,l,G,C,o,d,D,j,a,b;if(!c){c=[];}if(!g){g=[];}l=c.length;for(i=0;i<l;i++){C=c[i];o={};o.key=C.getKey();o.groupId=C.getGroupId();o.index=C.getIndex();o.label=C.getLabel();o.isVisible=C.getVisible();o.mandatory=C.getMandatory();o.width=C.getWidth();o.hasValueHelpDialog=C.getHasValueHelpDialog();o.hasTypeAhead=C.getHasTypeAhead();o.controlType=C.getControlType();o.filterType=C.getFilterType();o.customControl=C.getCustomControl();o.visibleInAdvancedArea=C.getVisibleInAdvancedArea();o.preventInitialDataFetchInValueHelpDialog=C.getPreventInitialDataFetchInValueHelpDialog();o.displayBehaviour=C.getDisplayBehaviour();o.defaultFilterValues=[];o.conditionType=C.getConditionType();d=C.getDefaultFilterValues();if(d&&d.length){a=d.length;for(j=0;j<a;j++){D=d[j];b={};b.sign=D.getSign();b.operator=D.getOperator();b.low=D.getLow();b.high=D.getHigh();o.defaultFilterValues.push(b);}}this.controlConfiguration.push(o);}l=g.length;for(i=0;i<l;i++){G=g[i];o={key:G.getKey(),index:G.getIndex(),label:G.getLabel()};this.groupConfiguration.push(o);}};
A.prototype.getControlConfigurationByKey=function(k){var i,l;l=this.controlConfiguration.length;for(i=0;i<l;i++){if(this.controlConfiguration[i].key===k){return this.controlConfiguration[i];}}return undefined;};
A.prototype.getControlConfiguration=function(){return this.controlConfiguration;};
A.prototype.getGroupConfiguration=function(){return this.groupConfiguration;};
A.prototype.getGroupConfigurationByKey=function(k){var i,l;l=this.groupConfiguration.length;for(i=0;i<l;i++){if(this.groupConfiguration[i].key===k){return this.groupConfiguration[i];}}return undefined;};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/ControlConfiguration',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element'],function(q,l,E){"use strict";
var C=E.extend("sap.ui.comp.smartfilterbar.ControlConfiguration",{metadata:{library:"sap.ui.comp",properties:{key:{type:"string",group:"Misc",defaultValue:null},groupId:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},hasValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:true},controlType:{type:"sap.ui.comp.smartfilterbar.ControlType",group:"Misc",defaultValue:'auto'},filterType:{type:"sap.ui.comp.smartfilterbar.FilterType",group:"Misc",defaultValue:'auto'},index:{type:"int",group:"Misc",defaultValue:-1},hasTypeAhead:{type:"boolean",group:"Misc",defaultValue:true},mandatory:{type:"sap.ui.comp.smartfilterbar.MandatoryType",group:"Misc",defaultValue:'auto'},width:{type:"string",group:"Misc",defaultValue:null},visibleInAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false},preventInitialDataFetchInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:true},displayBehaviour:{type:"sap.ui.comp.smartfilterbar.DisplayBehaviour",group:"Misc",defaultValue:'auto'},conditionType:{type:"any",group:"Misc",defaultValue:null}},aggregations:{defaultFilterValues:{type:"sap.ui.comp.smartfilterbar.SelectOption",multiple:true,singularName:"defaultFilterValue"},customControl:{type:"sap.ui.core.Control",multiple:false}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
C.prototype.setVisible=function(i){this.setProperty("visible",i);this.fireChange({propertyName:"visible"});};
C.prototype.setLabel=function(L){this.setProperty("label",L);this.fireChange({propertyName:"label"});};
C.prototype.setVisibleInAdvancedArea=function(v){this.setProperty("visibleInAdvancedArea",v);this.fireChange({propertyName:"visibleInAdvancedArea"});};
C.FILTERTYPE=sap.ui.comp.smartfilterbar.FilterType;C.CONTROLTYPE=sap.ui.comp.smartfilterbar.ControlType;C.MANDATORY=sap.ui.comp.smartfilterbar.MandatoryType;C.DISPLAYBEHAVIOUR=sap.ui.comp.smartfilterbar.DisplayBehaviour;return C;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/FilterProvider',['jquery.sap.global','sap/m/Select','sap/ui/core/Item','sap/m/ComboBox','sap/m/DatePicker','sap/m/DateRangeSelection','sap/m/TimePicker','sap/m/Input','sap/m/MultiComboBox','sap/m/MultiInput','sap/m/SearchField','sap/m/Token','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/providers/ValueHelpProvider','sap/ui/comp/providers/ValueListProvider','sap/ui/model/Filter','sap/ui/model/json/JSONModel','sap/ui/comp/odata/ODataType','sap/ui/comp/util/FormatUtil','sap/ui/base/EventProvider','sap/ui/comp/util/IdentifierUtil','sap/ui/comp/providers/TokenParser','sap/ui/core/format/DateFormat'],function(q,S,I,C,D,a,T,b,M,c,d,f,g,V,h,F,J,O,l,E,m,o,p){"use strict";var r=function(P){this._bInitialized=false;this._bPending=true;this._bConsiderAnalyticalParameters=false;if(P){this._oParentODataModel=P.model;this._sServiceURL=P.serviceUrl;this._sBasicSearchFieldName=P.basicSearchFieldName;this._isBasicSearchEnabled=P.enableBasicSearch;this._bUseContainsAsDefault=P.useContainsAsDefaultFilter==="true";this.sEntityType=P.entityType;this.sEntitySet=P.entitySet;this._isRunningInValueHelpDialog=P.isRunningInValueHelpDialog;this._oAdditionalConfiguration=P.additionalConfiguration;this.sDefaultDropDownDisplayBehaviour=P.defaultDropDownDisplayBehaviour;this.sDefaultTokenDisplayBehaviour=P.defaultTokenDisplayBehaviour;if(typeof P.dateFormatSettings==="string"){try{this._oDateFormatSettings=P.dateFormatSettings?JSON.parse(P.dateFormatSettings):undefined;}catch(e){}}else{this._oDateFormatSettings=P.dateFormatSettings;}if(!this._oDateFormatSettings){this._oDateFormatSettings={};}if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}this._oSmartFilter=P.smartFilter;this._bConsiderAnalyticalParameters=P.considerAnalyticalParameters;this._bUseDateRangeType=P.useDateRangeType;this._bConsiderSelectionVariants=P.considerSelectionVariants;this._aConsiderNavigations=P.considerNavigations;}this.sFilterModelName=r.FILTER_MODEL_NAME;this._sBasicFilterAreaID=r.BASIC_FILTER_AREA_ID;this._aAnalyticalParameters=[];this._aFilterBarViewMetadata=[];this._aFilterBarFieldNames=[];this._aFilterBarMultiValueFieldMetadata=[];this._aFilterBarDateFieldNames=[];this._aFilterBarTimeFieldNames=[];this._aFilterBarTimeIntervalFieldNames=[];this._aFilterBarDateTimeMultiValueFieldNames=[];this._aFilterBarStringFieldNames=[];this._aFieldGroupAnnotation=[];this._oMetadataAnalyser=new g(this._oParentODataModel||this._sServiceURL);this.oModel=new J();this._aValueListProvider=[];this._aValueHelpDialogProvider=[];this._mTokenHandler={};this._mConditionTypeFields={};this._aSelectionVariants=[];this._intialiseMetadata();this._bInitialized=true;};r.FILTER_MODEL_NAME="fi1t3rM0d31";r.BASIC_FILTER_AREA_ID="_BASIC";r.BASIC_SEARCH_FIELD_ID="_BASIC_SEARCH_FIELD";r.CUSTOM_FIELDS_MODEL_PROPERTY="_CUSTOM";r.FIELD_NAME_REGEX=/\./g;
r.prototype._intialiseMetadata=function(){var G,e,s,k,n,i,j,t,u,v,w,x;this._aFilterBarViewMetadata.push({groupName:this._sBasicFilterAreaID,index:0,fields:[]});if(!this.sEntitySet&&this.sEntityType){this.sEntitySet=this._oMetadataAnalyser.getEntitySetNameFromEntityTypeName(this.sEntityType);}this.sEntityType=this._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.sEntitySet);n=this._oMetadataAnalyser.getAllFilterableFieldsByEntitySetName(this.sEntitySet,this._bConsiderAnalyticalParameters,this._aConsiderNavigations);if(n){this._updateDisplayBehaviour();this._aFieldGroupAnnotation=this._oMetadataAnalyser.getFieldGroupsByFilterFacetsAnnotation(this.sEntityType);s=this._oMetadataAnalyser.getSelectionFieldsAnnotation(this.sEntityType);if(s&&s.selectionFields){this._aSelectionFields=s.selectionFields;}if(this._aFieldGroupAnnotation){G=this._aFieldGroupAnnotation.length;for(i=0;i<G;i++){k=this._aFieldGroupAnnotation[i];v=this._createGroupMetadata(k);v.index=this._aFilterBarViewMetadata.length;this._aFilterBarViewMetadata.push(v);}}G=n.length;for(i=0;i<G;i++){k=n[i];e=k.fields.length;v=this._createGroupMetadata(k);this._aFilterBarViewMetadata.push(v);for(j=0;j<e;j++){t=k.fields[j];if(t.type.indexOf("Edm.")===0){u=this._createFieldMetadata(t);v.fields.push(u);this._aFilterBarFieldNames.push(u.fieldName);}}}}x=this._getAdditionalConfigurationForCustomGroups(n);G=x.length;for(j=0;j<G;j++){v=this._createGroupMetadataForCustomGroup(x[j]);if(v){this._aFilterBarViewMetadata.push(v);}}w=this._getAdditionalConfigurationForCustomFilterFields();e=w.length;for(j=0;j<e;j++){u=this._createFieldMetadataForCustomFilterFields(w[j]);if(u){this._aFilterBarViewMetadata[0].fields.push(u);}}if(this._hasBasicSearch()){u=this._createBasicSearchFieldMetadata();this._aFilterBarViewMetadata[0].fields.push(u);}if(this._bConsiderAnalyticalParameters){this._createAnalyticalParameters();}if(this._bConsiderSelectionVariants){this._createSelectionVariants();}this._applyGroupId();this._applyIndexes();this._createInitialModel(true);this._initializeConditionTypeFields();this.setPending(this.isPending());};
r.prototype._createSelectionVariants=function(){this._aSelectionVariants=this._oMetadataAnalyser.getSelectionVariantAnnotation(this.sEntityType);};
r.prototype._createAnalyticalParameters=function(){var i;if(this._oMetadataAnalyser.isSemanticAggregation(this.sEntityType)){q.sap.require("sap.ui.model.analytics.odata4analytics");try{i=new sap.ui.model.analytics.odata4analytics.Model(new sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(this._oParentODataModel));}catch(e){throw"Failed to instantiate analytical extensions for given OData model: "+e.message;}var Q=i&&i.findQueryResultByName(this.sEntitySet);this._oParameterization=Q&&Q.getParameterization();this._createAnalyticParameters(this._oParameterization);}};
r.prototype.attachPendingChange=function(e){if(!this._oEventProvider){this._oEventProvider=new E();}this._oEventProvider.attachEvent("PendingChange",e);};
r.prototype.detachPendingChange=function(e){if(this._oEventProvider){this._oEventProvider.detachEvent("PendingChange",e);}};
r.prototype.setPending=function(v){var e=this._bPending!==v;this._bPending=v;if(e&&this._oEventProvider){var P={};P.pending=v;this._oEventProvider.fireEvent("PendingChange",P);}};
r.prototype.isPending=function(){if(!this._bInitialized){return true;}for(var n in this._mConditionTypeFields){if(this._mConditionTypeFields[n].conditionType.isPending()){return true;}}return false;};
r.prototype._updateDisplayBehaviour=function(){this._sTextArrangementDisplayBehaviour=this._oMetadataAnalyser.getTextArrangementValue(this.sEntityType);if(!this.sDefaultDropDownDisplayBehaviour){if(this._sTextArrangementDisplayBehaviour){this.sDefaultDropDownDisplayBehaviour=this._sTextArrangementDisplayBehaviour;}else{this.sDefaultDropDownDisplayBehaviour=sap.ui.comp.smartfilterbar.DisplayBehaviour.descriptionOnly;}}if(!this.sDefaultTokenDisplayBehaviour){if(this._sTextArrangementDisplayBehaviour){this.sDefaultTokenDisplayBehaviour=this._sTextArrangementDisplayBehaviour;}else{this.sDefaultTokenDisplayBehaviour=sap.ui.comp.smartfilterbar.DisplayBehaviour.descriptionAndId;}}};
r.prototype._hasBasicSearch=function(){return this._isBasicSearchEnabled;};
r.prototype._getAdditionalConfigurationForCustomFilterFields=function(){var e,j,i,R;if(!this._oAdditionalConfiguration){return[];}e=this._oAdditionalConfiguration.getControlConfiguration();if(!this._aFilterBarFieldNames||!this._aFilterBarFieldNames.length){return e;}R=[];j=e.length;for(i=0;i<j;i++){if(this._aFilterBarFieldNames.indexOf(e[i].key)<0){R.push(e[i]);}}return R;};
r.prototype._getAdditionalConfigurationForCustomGroups=function(e){var G,k,n,i,R,j,s,t;if(!this._oAdditionalConfiguration){return[];}G=this._oAdditionalConfiguration.getGroupConfiguration();if(!e||!e.length){return G;}R=[];n=e.length;k=G.length;for(i=0;i<k;i++){s=false;for(j=0;j<n;j++){t=e[j].groupName||e[j].groupEntityName;if(t===G[i].key){s=true;break;}}if(!s){R.push(G[i]);}}return R;};
r.prototype._createInitialModelForField=function(j,e,u){var i=false,k,n,H=false,s=false,L=null,t=null,v,w=null,x=[],R=[];if(!e||e.isCustomFilterField){return;}if(e.filterRestriction!==sap.ui.comp.smartfilterbar.FilterType.multiple){s=true;}if((e.filterType==="date")||(e.filterType==="time")){i=true;}if(u){k=e.defaultFilterValues;H=k&&k.length;if(!H&&e.defaultFilterValue||e.defaultPropertyValue){if(e.isParameter){k=[{low:e.defaultPropertyValue}];}else{k=[{low:e.defaultFilterValue,high:e.defaultFilterValue,operator:"EQ",sign:"I"}];}H=true;}}if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.single){if(H){n=k[0];L=i?this._createDateTimeValue(e,n.low):n.low;}j[e.fieldName]=L;}else if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval&&e.type!=="Edm.Time"){if(H){n=k[0];L=i?this._createDateTimeValue(e,n.low):n.low;t=i?this._createDateTimeValue(e,n.high):n.high;}j[e.fieldName]={low:L,high:t};}else{if(H){v=k.length;while(v--){n=k[v];if(s){w={"exclude":n.sign==="E","operation":n.operator==="CP"?"Contains":n.operator,"keyField":e.fieldName,"value1":i?this._createDateTimeValue(e,n.low):n.low,"value2":i?"":n.high};if((e.filterType==="time")&&n.high){w.value2=new Date(n.high);}}else{w={key:i?this._createDateTimeValue(e,n.low):n.low,text:i?"":n.low};}x.push(w);}}this._aFilterBarMultiValueFieldMetadata.push(e);j[e.fieldName]={value:null};if(s){R=x.slice(0);x=[];j[e.fieldName].ranges=R;}j[e.fieldName].items=x;this._updateMultiValueControl(e.control,x,R);}};
r.prototype._createDateTimeValue=function(e,v){if((e.type==="Edm.Time")&&(v.indexOf("PT")===0)){return this._getTime(v);}else{return new Date(v);}};
r.prototype._createInitialModel=function(u){var e,G,k,n,j,i;e={};this._bCreatingInitialModel=true;this._aFilterBarMultiValueFieldMetadata=[];if(this._aFilterBarViewMetadata){G=this._aFilterBarViewMetadata.length;for(i=0;i<G;i++){n=this._aFilterBarViewMetadata[i];k=n.fields.length;for(j=0;j<k;j++){this._createInitialModelForField(e,n.fields[j],u);}}}if(this._aAnalyticalParameters){k=this._aAnalyticalParameters.length;for(j=0;j<k;j++){this._createInitialModelForField(e,this._aAnalyticalParameters[j],u);}}this.oModel.setData(e);if(!u){this._clearConditionTypeFields();}this._updateConditionTypeFields();this._bCreatingInitialModel=false;};
r.prototype._updateMultiValueControl=function(e,j,R,k){var i=0,t=null,n=null,s=null,u=null,K=null,v,w,x;if(e&&j){i=j.length;if(e instanceof c){t=[];while(i--){u=j[i].text||j[i].key;t.push(new f({key:j[i].key,text:u,tooltip:u}));}if(R){i=R.length;while(i--){s=R[i];if(s.tokenText){u=s.tokenText;}else{v=s.value1;w=s.value2;if(k){if((k.filterType==="date")||(k.filterType==="datetime")||(k.filterType==="time")){if(v&&typeof v==="string"){v=new Date(v);}if(w&&typeof w==="string"){w=new Date(w);}}if((v instanceof Date)||(w instanceof Date)){x=this._getType(k);if(v){v=x.formatValue(v,"string");}if(w){w=x.formatValue(w,"string");}}}u=l.getFormattedRangeText(s.operation,v,w,s.exclude);}n=new f({text:u,tooltip:u});n.data("range",s);t.push(n);}}e.setTokens(t);}if(e instanceof M){K=[];while(i--){K.push(j[i].key);}e.setSelectedKeys(K);}}};
r.prototype._applyIndexes=function(){var e,i;if(!this._aFilterBarViewMetadata){return;}this._aFilterBarViewMetadata=this._sortByIndex(this._aFilterBarViewMetadata);e=this._aFilterBarViewMetadata.length;for(i=0;i<e;i++){if(this._aFilterBarViewMetadata[i].fields){this._aFilterBarViewMetadata[i].fields=this._sortByIndex(this._aFilterBarViewMetadata[i].fields);}}};
r.prototype._sortByIndex=function(A){var e,i,j,R,k,n;if(!A||!A.length){return A;}R=[];e=[];j=A.length;for(i=0;i<j;i++){n=A[i];k=n.index;if(k>=0){e.push(n);}else{R.push(n);}}j=e.length;if(j){e=e.sort(function(s,t){return s.index-t.index;});if(!R.length){R=e;}else{for(i=0;i<j;i++){n=e[i];if(n.index>=R.length){R.push(n);}else{R.splice(n.index,0,n);}}}}return R;};
r.prototype._applyGroupId=function(){var e,i,n,j,s,N,k;e=this._aFilterBarViewMetadata.length;for(i=0;i<e;i++){if(!this._aFilterBarViewMetadata[i].fields){continue;}n=this._aFilterBarViewMetadata[i].fields.length;for(j=0;j<n;j++){s=this._aFilterBarViewMetadata[i].fields[j];if(s&&s.groupId&&s.groupId!==this._aFilterBarViewMetadata[i].groupName){N=undefined;for(k=0;k<e;k++){if(this._aFilterBarViewMetadata[k].groupName===s.groupId){N=this._aFilterBarViewMetadata[k];break;}}if(N){this._aFilterBarViewMetadata[i].fields.splice(j,1);j--;n--;N.fields=N.fields||[];N.fields.push(s);}}}}};
r.prototype._createFilterControlId=function(e){var s=this._oSmartFilter.getId();var G=m.replace(e.groupId||"");var n=m.replace(e.fieldName);return s+"-filterItemControl"+G+"-"+n;};
r.prototype._createGroupMetadata=function(e){var G,i,s;s=e.groupName||e.groupEntityName;i=this._oAdditionalConfiguration.getGroupConfigurationByKey(s);G={};G.groupName=s;G.groupLabel=this._getGroupLabel(e,i);G.fields=[];G.index=this._getGroupIndex(i);return G;};
r.prototype._createGroupMetadataForCustomGroup=function(G){var e;e={};e.groupName=G.key;e.groupLabel=G.label;e.fields=[];e.index=this._getGroupIndex(G);return e;};
r.prototype._getTime=function(v){var e=p.getTimeInstance({pattern:"'PT'hh'H'mm'M'ss'S'"});return e.parse(v);};
r.prototype._checkMetadataDefaultValue=function(e){var t,s=e.defaultFilterValue||e.defaultPropertyValue;if(s){try{if((e.type==="Edm.Time")&&(s.indexOf("PT")===0)){this._getTime(s);}else{t=this._getType(e);t.parseValue(s,"string");}}catch(i){e.defaultPropertyValue=null;e.defaultFilterValue=null;q.sap.log.error("default value for "+e.fieldName+" could not be parsed.");}}};
r.prototype._getType=function(e){var t,i={},j={};if(e.precision||e.scale){j.precision=e.precision;j.scale=e.scale;}if(e.maxLength){j.maxLength=e.maxLength;}if(e.displayFormat){j.displayFormat=e.displayFormat;}if(e.fControlConstructor===a||e.fControlConstructor===D||e.type==="Edm.DateTimeOffset"){i=q.extend({},this._oDateFormatSettings,{UTC:false});}t=O.getType(e.type,i,j);return t;};
r.prototype._createControl=function(e){var i,t,j=false,k,n;if(e.customControl){return e.customControl;}t=this._getType(e);i=new e.fControlConstructor(this._createFilterControlId(e));if(e.fControlConstructor===a){i.bindProperty('dateValue',this.sFilterModelName+">/"+e.fieldName+"/low");i.bindProperty('secondDateValue',this.sFilterModelName+">/"+e.fieldName+"/high");}else if((e.fControlConstructor===C)||(e.fControlConstructor===S)){if(i.setForceSelection){i.setForceSelection(true);}if(e.fControlConstructor===S){i.addItem(new I({key:"",text:""}));i.addItem(new I({key:false,text:t.formatValue(false,"string")}));i.addItem(new I({key:true,text:t.formatValue(true,"string")}));}else{this._associateValueList(i,"items",e);i.attachSelectionChange(function(){if(this._bUpdatingFilterData||this._bCreatingInitialModel){return;}i.fireChange({filterChangeReason:e.fieldName,value:""});}.bind(this));}i.bindProperty('selectedKey',this.sFilterModelName+">/"+e.fieldName);}else if(e.fControlConstructor===M){this._associateValueList(i,"items",e);i.attachSelectionChange(function(u){if(this._bUpdatingFilterData||this._bCreatingInitialModel){return;}var v=u.getSource(),w=null,K=[],L;w=v.getSelectedItems();if(w){L=w.length;while(L--){K.push({key:w[L].getKey(),text:w[L].getText()});}}if(this.oModel){this.oModel.setProperty("/"+e.fieldName+"/items",K);}v.fireChange({filterChangeReason:e.fieldName,value:""});}.bind(this));i.bindProperty('value',this.sFilterModelName+">/"+e.fieldName+"/value");}else if(e.fControlConstructor===c){if(e.controlType===sap.ui.comp.smartfilterbar.ControlType.date||e.type==="Edm.Time"){i.setValueHelpOnly(true);if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval){this._associateValueHelpDialog(i,e,false,false);}else{this._associateValueHelpDialog(i,e,true,true);}}else{if(e.hasValueHelpDialog){this._associateValueHelpDialog(i,e,e.filterRestriction!==sap.ui.comp.smartfilterbar.FilterType.multiple,true);}else{i.setShowValueHelp(false);}i.bindProperty('value',{path:this.sFilterModelName+">/"+e.fieldName+"/value",type:t});}this._handleMultiInput(i,e,t);}else if(e.fControlConstructor===b){if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval){j=true;i.bindProperty('value',this.sFilterModelName+">/"+e.fieldName+"/low");if(!this.oResourceBundle){this.oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}if(!this.sIntervalPlaceholder){this.sIntervalPlaceholder=this.oResourceBundle.getText("INTERVAL_PLACEHOLDER_TEXT");}i.setPlaceholder(this.sIntervalPlaceholder);}else{i.bindProperty('value',{path:this.sFilterModelName+">/"+e.fieldName,type:t});}if(e.hasValueHelpDialog){i.setShowValueHelp(true);this._associateValueHelpDialog(i,e,false,false);}}else if(e.fControlConstructor===D||e.fControlConstructor===T){i.bindProperty('dateValue',this.sFilterModelName+">/"+e.fieldName);}if(i instanceof D){if(this._oDateFormatSettings&&this._oDateFormatSettings.style){i.setDisplayFormat(this._oDateFormatSettings.style);}i.attachChange(function(u){var v=u.getParameter("valid");i.data("__mandatoryEmpty",null);if(v){i.setValueState(sap.ui.core.ValueState.None);i.setValueStateText();}else{i.setValueState(sap.ui.core.ValueState.Error);if(t){try{t.parseValue("foo","string");}catch(w){i.setValueStateText(w.message);}}}});}if(e.hasTypeAhead){i.setShowSuggestion(true);i.setFilterSuggests(false);this._associateValueList(i,"suggestionRows",e,true);}if(e.displayFormat==="UpperCase"&&i.attachChange&&i.getValue&&i.setValue){i.attachChange(function(){var v=i.getValue();if(v){i.setValue(v.toUpperCase());}});if(this._mTokenHandler[i.getId()]&&this._mTokenHandler[i.getId()].parser){var s=this._mTokenHandler[i.getId()].parser;s.setDisplayFormat(e.displayFormat);}}if(i instanceof b){if(!e.hasValueListAnnotation&&!j&&e.maxLength){k=parseInt(e.maxLength,10);if(!isNaN(k)){if(this._mTokenHandler[i.getId()]&&this._mTokenHandler[i.getId()].parser){var s=this._mTokenHandler[i.getId()].parser;s.setMaxLength(k);}else{i.setMaxLength(k);}}}}n=function(u){var v=u.getParameter("exception");if(i){if(v){if(i.setValueStateText){i.setValueStateText(v.message);}}if(i.setValueState){i.setValueState(sap.ui.core.ValueState.Error);}i.data("__mandatoryEmpty",null);}};i.attachParseError(n);i.attachFormatError(n);i.attachValidationError(n);i.attachValidationSuccess(function(u){if(i){if(i.setValueState){i.setValueState(sap.ui.core.ValueState.None);}if(i.setValueStateText){i.setValueStateText();}i.data("__mandatoryEmpty",null);delete i.__sValidationText;}});return i;};
r.prototype._getControlConstructor=function(e,P){var i=b,j,k,s;s=P?P+e.fieldName:e.fieldName;if(e.isCustomFilterField){i=undefined;}else{j=(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.single);k=(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval);if(e.controlType===sap.ui.comp.smartfilterbar.ControlType.date){e.displayFormat="Date";if(j){i=D;}else{i=k?a:c;}this._aFilterBarDateFieldNames.push(s);if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.multiple){this._aFilterBarDateTimeMultiValueFieldNames.push(s);}}else if(e.controlType===sap.ui.comp.smartfilterbar.ControlType.dropDownList){if(j){i=this._isBooleanWithFixedValuedButWithoutValueListAnnotation(e)?S:C;}else{i=M;}if(!j){e.filterRestriction=sap.ui.comp.smartfilterbar.FilterType.multiple;}}else if(e.type==="Edm.Time"){if(j){i=T;}else{i=c;}this._aFilterBarTimeFieldNames.push(s);if(k){this._aFilterBarTimeIntervalFieldNames.push(s);}else if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.multiple){this._aFilterBarDateTimeMultiValueFieldNames.push(s);}}else if(!j&&!k){i=c;}}return i;};
r.prototype._handleMultiInput=function(e,i,t){e.setEnableMultiLineMode(true);e.attachTokenChange(function(n){if(this._bUpdatingFilterData||this._bCreatingInitialModel||(n.getParameter("type")!=="tokensChanged")&&(n.getParameter("type")!=="removed")){return;}var s=n.getSource().getTokens(),u=[],L,v=null,R=null,w=[];if(s){L=s.length;while(L--){v=s[L];R=v.data("range");if(R){R.tokenText=v.getText();w.push(R);}else{u.push({key:v.getKey(),text:v.getText()});}}}if(this.oModel){this.oModel.setProperty("/"+i.fieldName+"/items",u);this.oModel.setProperty("/"+i.fieldName+"/ranges",w);}e.fireChange({filterChangeReason:i.fieldName,value:""});}.bind(this));var j,k=((i.type==="Edm.DateTime"&&i.displayFormat==="Date"));if(i.hasValueListAnnotation||(i.type==="Edm.String")||k){e.attachEvent("_validateOnPaste",function(n){var s=n.getParameter("texts"),P,L,u,v,R;L=s?s.length:0;if(L>1){n.preventDefault();P=this.oModel.getProperty("/"+i.fieldName);R=P.ranges||[];e.setValue("");while(L--){u=s[L];if(u){v=null;if(k){j=this._getDateValue(u,t);if(isNaN(j.getDate())){continue;}else{v=u;u=j;}}R.push({"exclude":false,"operation":"EQ","keyField":i.fieldName,"value1":u,"value2":null,"tokenText":v});}}this.oModel.setProperty("/"+i.fieldName+"/ranges",R);this._updateMultiValueControl(e,P.items,R);}}.bind(this));}};
r.prototype._getDateValue=function(v,t){var e;try{e=t.parseValue(v,"string");if(e){return e;}}catch(i){}return new Date(v);};
r.prototype._associateValueHelpDialog=function(e,i,s,j){var v=new V({loadAnnotation:i.hasValueListAnnotation,fullyQualifiedFieldName:i.fullName,metadataAnalyser:this._oMetadataAnalyser,control:e,filterModel:this.oModel,filterProvider:this,model:this._oParentODataModel,preventInitialDataFetchInValueHelpDialog:i.preventInitialDataFetchInValueHelpDialog,dateFormatSettings:this._oDateFormatSettings,supportMultiSelect:j,supportRanges:s,isUnrestrictedFilter:i.filterRestriction!==sap.ui.comp.smartfilterbar.FilterType.multiple,isSingleIntervalRange:i.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval,fieldName:i.fieldName,type:i.filterType,scale:i.scale,precision:i.precision,maxLength:i.maxLength,displayFormat:i.displayFormat,displayBehaviour:i.displayBehaviour,fieldViewMetadata:i});v.attachValueListChanged(function(k){if(this._oSmartFilter){this._oSmartFilter.fireFilterChange(k);}}.bind(this));if(i.visibleInAdvancedArea||(i.groupId===r.BASIC_FILTER_AREA_ID)){v.loadAnnotation();}this._aValueHelpDialogProvider.push(v);if(s&&e.addValidator){var t=new o();t.addKeyField({key:i.fieldName,label:i.label,type:i.filterType});t.associateInput(e);this._mTokenHandler[e.getId()]={parser:t};}};
r.prototype._determineFieldLabel=function(e){var i,L=e.label;if(this._oSmartFilter&&this._oSmartFilter.determineFilterItemByName){i=this._oSmartFilter.determineFilterItemByName(e.name);if(i){L=i.getLabel();}}return L;};
r.prototype._associateValueList=function(e,A,i,H){var v;if(i.hasValueListAnnotation){v=new h({control:e,fieldName:i.fieldName,typeAheadEnabled:H,aggregation:A,displayFormat:i.displayFormat,displayBehaviour:i.displayBehaviour,dateFormatSettings:this._oDateFormatSettings,loadAnnotation:true,fullyQualifiedFieldName:i.fullName,metadataAnalyser:this._oMetadataAnalyser,filterModel:this.oModel,filterProvider:this,model:this._oParentODataModel,fieldViewMetadata:i});v.attachValueListChanged(function(j){if(this._oSmartFilter){this._oSmartFilter.fireFilterChange(j);}}.bind(this));if(i.visibleInAdvancedArea||(i.groupId===r.BASIC_FILTER_AREA_ID)){v.loadAnnotation();}this._aValueListProvider.push(v);}else if(this._mTokenHandler[e.getId()]&&this._mTokenHandler[e.getId()].parser){this._mTokenHandler[e.getId()].parser.setDefaultOperation("EQ");}};
r.prototype._createAnalyticParameters=function(P){var e,j,k,n,s;if(P){k=P.getAllParameterNames();j=P.getEntitySet();if(j){e=P.getEntitySet().getQName();s=this._oMetadataAnalyser.getFieldsByEntitySetName(e);for(var i=0;i<s.length;i++){if(k.indexOf(s[i].name)>=0){n=this._createAnalyticParameterMetadata(s[i]);if(n.visible){this._aAnalyticalParameters.push(n);}}}}}};
r.prototype._createAnalyticParameterMetadata=function(P){var s=sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX;P.filterRestriction="single-value";var e=this._createFieldMetadata(P,s);e.fieldName=s+P.name;e.isMandatory=true;e.isParameter=true;e.visibleInAdvancedArea=true;return e;};
r.prototype.getAnalyticParameters=function(){return this._aAnalyticalParameters;};
r.prototype.getSelectionVariants=function(){return this._aSelectionVariants;};
r.prototype.getAnalyticBindingPath=function(){var v,P=[],e=this.getAnalyticParameters();e.forEach(function(i){P.push(i.fieldName);});v=this.getFilledFilterData(P);return this._createAnalyticBindingPath(e,v);};
r.prototype._createAnalyticBindingPath=function(P,v){var s,e="",i;i=this._getParameterizationRequest(this._oParameterization);if(i){P.forEach(function(j){s=v[j.fieldName];if(!s){s="";}else if(j.type==="Edm.Time"&&s instanceof Date){s={__edmType:"Edm.Time",ms:(((s.getHours()*60)+s.getMinutes())*60+s.getSeconds())*1000+s.getMilliseconds()};}else if(this._oDateFormatSettings&&this._oDateFormatSettings.UTC&&s instanceof Date){s=r.getDateInUTCOffset(s);}i.setParameterValue(j.name,s);}.bind(this));e=i.getURIToParameterizationEntry()+'/'+this._oParameterization.getNavigationPropertyToQueryResult();}return e;};
r.prototype._getParameterizationRequest=function(){return this._oParameterization?new sap.ui.model.analytics.odata4analytics.ParameterizationRequest(this._oParameterization):null;};
r.prototype._createFieldMetadata=function(e,P){var i,j;e.fieldName=this._getFieldName(e);e.fieldNameOData=e.fieldName.replace(r.FIELD_NAME_REGEX,"/");j=this._oAdditionalConfiguration?this._oAdditionalConfiguration.getControlConfigurationByKey(e.fieldName):null;i=q.extend({},e);i.filterRestriction=this._getFilterRestriction(e,j);this._updateValueListMetadata(i,e);i.hasValueHelpDialog=this._hasValueHelpDialog(i,j);i.preventInitialDataFetchInValueHelpDialog=j?j.preventInitialDataFetchInValueHelpDialog:true;i.controlType=this._getControlType(i,j);if(j&&j.displayBehaviour&&j.displayBehaviour!=="auto"){i.displayBehaviour=j.displayBehaviour;}i.isCustomFilterField=!!(j&&j.customControl);i.visibleInAdvancedArea=!!(j&&j.visibleInAdvancedArea);i.label=this._getLabel(e,j);i.isMandatory=this._isMandatory(e,j);i.width=this._getWidth(j);i.isVisible=this._isVisible(j);i.groupId=this._getGroupID(e,j);i.index=this._getIndex(e,j);i.fControlConstructor=this._getControlConstructor(i,P);i.filterType=this._getFilterType(i);i.hasTypeAhead=this._hasTypeAhead(i,e,j);i.customControl=j?j.customControl:undefined;i.fCreateControl=function(u){var v,w;u.control=this._createControl(u);v=this.oModel.getData();w=v[u.fieldName];if(w){this._updateMultiValueControl(u.control,w.items,w.ranges);}}.bind(this);this._applyWidth(i);i.defaultFilterValues=j?j.defaultFilterValues:undefined;if(i.type==="Edm.String"){this._aFilterBarStringFieldNames.push(i.fieldName);}i.conditionType=null;var k=j?j.conditionType:null;if(!k&&this._bUseDateRangeType&&(i.fControlConstructor===a)){k="sap.ui.comp.config.condition.DateRangeType";}if(k){var s="";if(typeof k==="object"){s=k.module;delete k.module;}else{s=k;k=null;}try{q.sap.require(s);var n=q.sap.getObject(s);if(n){i.conditionType=new n(i.fieldName,this,i);this._mConditionTypeFields[i.fieldName]=i;}if(k&&!this._bUseDateRangeType){i.conditionType.applySettings(k);}}catch(t){q.sap.log.error("Module "+s+" could not be loaded");}}this._checkMetadataDefaultValue(i);return i;};
r.prototype._getFilterType=function(e){if(O.isNumeric(e.type)){return"numeric";}else if(e.type==="Edm.DateTime"&&e.displayFormat==="Date"){return"date";}else if(e.type==="Edm.String"){return"string";}else if(e.type==="Edm.Boolean"){return"boolean";}else if(e.type==="Edm.Time"){return"time";}return undefined;};
r.prototype._updateValueListMetadata=function(e,i){e.hasValueListAnnotation=i["sap:value-list"]!==undefined;if(e.hasValueListAnnotation){e.hasFixedValues=i["sap:value-list"]==="fixed-values";}else if(i["com.sap.vocabularies.Common.v1.ValueList"]){e.hasValueListAnnotation=true;e.hasFixedValues=this._oMetadataAnalyser.getValueListSemantics(i["com.sap.vocabularies.Common.v1.ValueList"])==="fixed-values";if(!e.hasFixedValues){e.hasFixedValues=g.isValueListWithFixedValues(i);}}};
r.prototype._createBasicSearchFieldMetadata=function(){var e;var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");e={};e.filterRestriction=sap.ui.comp.smartfilterbar.FilterType.single;e.name=r.BASIC_SEARCH_FIELD_ID;e.fieldName=r.BASIC_SEARCH_FIELD_ID;e.label=undefined;e.isMandatory=false;e.isVisible=true;e.groupId=r.BASIC_FILTER_AREA_ID;e.index=-1;e.control=new d(this._oSmartFilter.getId()+"-btnBasicSearch",{showSearchButton:true});if(!this._isRunningInValueHelpDialog){e.control.setPlaceholder(R.getText("FILTER_BAR_BSEARCH_PLACE_HOLDER"));}e.control.bindProperty('value',this.sFilterModelName+">/"+e.fieldName);return e;};
r.prototype._applyWidth=function(e){if(e&&e.width&&e.control&&e.control.setWidth&&(typeof e.control.setWidth==='function')){e.control.setWidth(e.width);}};
r.prototype._createFieldMetadataForCustomFilterFields=function(e){var i;if(!e||!e.customControl){return undefined;}i={};i.name=e.key;i.fieldName=e.key;i.label=e.label;i.visibleInAdvancedArea=!!(e&&e.visibleInAdvancedArea);i.isVisible=this._isVisible(e);i.groupId=e.groupId;i.isMandatory=this._isMandatory(undefined,e);i.index=e.index;i.width=this._getWidth(e);i.control=e.customControl;i.isCustomFilterField=true;this._applyWidth(i);return i;};
r.prototype._getFieldName=function(e){if(!e.parentPropertyName){return e.name;}else{return e.parentPropertyName+"."+e.name;}};
r.prototype._hasValueHelpDialog=function(e,i){var v=true;if(i){if(i.controlType===sap.ui.comp.smartfilterbar.ControlType.dropDownList){v=false;}else if(i.hasValueHelpDialog!==true){v=false;}}if(e&&!e.hasValueListAnnotation){if(e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.single||e.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.multiple){v=false;}}return v;};
r.prototype._isVisible=function(e){if(e&&e.isVisible===false){return false;}return true;};
r.prototype._getWidth=function(e){if(e&&e.width){return e.width;}return undefined;};
r.prototype._isMandatory=function(e,i){if(i&&i.mandatory!==sap.ui.comp.smartfilterbar.MandatoryType.auto){return i.mandatory===sap.ui.comp.smartfilterbar.MandatoryType.mandatory;}if(e){return e.requiredFilterField;}return false;};
r.prototype._getFilterRestriction=function(e,i){var s;if(i&&i.filterType&&i.filterType!==sap.ui.comp.smartfilterbar.FilterType.auto){s=i.filterType;}else if(e.filterRestriction==="single-value"){s=sap.ui.comp.smartfilterbar.FilterType.single;}else if(e.filterRestriction==="multi-value"){s=sap.ui.comp.smartfilterbar.FilterType.multiple;}else if(e.filterRestriction==="interval"){s=sap.ui.comp.smartfilterbar.FilterType.interval;}else{s=sap.ui.comp.smartfilterbar.FilterType.auto;}return s;};
r.prototype._getControlType=function(e,i){var s;if(i&&i.controlType&&i.controlType!==sap.ui.comp.smartfilterbar.ControlType.auto){s=i.controlType;}else if(e.type==="Edm.DateTime"&&e.displayFormat==="Date"){s=sap.ui.comp.smartfilterbar.ControlType.date;}else if(e.hasValueListAnnotation&&e.hasFixedValues){s=sap.ui.comp.smartfilterbar.ControlType.dropDownList;}else if(this._isBooleanWithFixedValuedButWithoutValueListAnnotation(e)){s=sap.ui.comp.smartfilterbar.ControlType.dropDownList;}else{s=sap.ui.comp.smartfilterbar.ControlType.input;}return s;};
r.prototype._isBooleanWithFixedValuedButWithoutValueListAnnotation=function(e){if(e.type==="Edm.Boolean"&&!e.hasFixedValues&&!e.hasValueListAnnotation&&(e.filterRestriction==="single")){return true;}return false;};
r.prototype._getGroupID=function(e,i){if(i&&i.groupId){return i.groupId;}else if(e&&(e.requiredFilterField||(this._aSelectionFields&&this._aSelectionFields.indexOf(e.fieldNameOData)>-1))){return this._sBasicFilterAreaID;}return this._getGroupIDFromFieldGroup(e);};
r.prototype._getGroupIDFromFieldGroup=function(e){var L=0,i=null,G;if(e&&this._aFieldGroupAnnotation&&this._aFieldGroupAnnotation.length){L=this._aFieldGroupAnnotation.length;while(L--){i=this._aFieldGroupAnnotation[L];if(i&&i.fields&&i.fields.indexOf(e.fieldNameOData)>-1){G=i.groupName;break;}}}return G;};
r.prototype._getLabel=function(e,i){if(i&&i.label){return i.label;}return this._getLabelFromFieldGroup(e)||e.fieldLabel||e.fieldName;};
r.prototype._getLabelFromFieldGroup=function(e){var L=0,i=null,s;if(e&&this._aFieldGroupAnnotation&&this._aFieldGroupAnnotation.length){L=this._aFieldGroupAnnotation.length;while(L--){i=this._aFieldGroupAnnotation[L];if(i&&i.fields&&i.fields.indexOf(e.fieldNameOData)>-1){s=i.labels[e.fieldNameOData];break;}}}return s;};
r.prototype._getIndex=function(e,i){if(i&&(i.index>=0)){return i.index;}else if(this._aSelectionFields&&this._aSelectionFields.indexOf(e.fieldNameOData)>-1){return this._aSelectionFields.indexOf(e.fieldNameOData);}return this._getIndexFromFieldGroup(e);};
r.prototype._getIndexFromFieldGroup=function(e){var L=0,i=null,j;if(e&&this._aFieldGroupAnnotation&&this._aFieldGroupAnnotation.length){L=this._aFieldGroupAnnotation.length;while(L--){i=this._aFieldGroupAnnotation[L];if(i&&i.fields){j=i.fields.indexOf(e.fieldNameOData);if(j>-1){break;}j=undefined;}}}return j;};
r.prototype._getGroupIndex=function(G){if(G&&(G.index||G.index===0)){return G.index;}};
r.prototype._getGroupLabel=function(e,G){if(G&&G.label){return G.label;}return e.groupLabel||e.groupName||e.groupEntityName;};
r.prototype._hasTypeAhead=function(e,i,j){var H;H=true;if(j){H=j.hasTypeAhead;}else if(i.type!=="Edm.String"){return false;}if(!(e.fControlConstructor===b||e.fControlConstructor===c)){return false;}return H;};
r.prototype.getModel=function(){return this.oModel;};
r.prototype.getFilterBarViewMetadata=function(){return this._aFilterBarViewMetadata;};
r.prototype.getAssociatedValueHelpProviders=function(){return this._aValueHelpDialogProvider;};
r.prototype.getAssociatedValueListProviders=function(){return this._aValueListProvider;};
r.prototype.getParameters=function(){var P,B=null;if(this.oModel){B=this.oModel.getProperty("/"+r.BASIC_SEARCH_FIELD_ID);}if(this._sBasicSearchFieldName||B){P={custom:{}};if(this._sBasicSearchFieldName){P.custom["search-focus"]=this._sBasicSearchFieldName;}P.custom["search"]=B||"";}return P;};
r.prototype.getFilters=function(e){var i=null;if(this.oModel){i=this.oModel.getData();}return r.generateFilters(e,i,{dateSettings:this._oDateFormatSettings,useContainsAsDefault:this._bUseContainsAsDefault,stringFields:this._aFilterBarStringFieldNames,timeFields:this._aFilterBarTimeFieldNames});};
r.prototype.getFilterData=function(){return this.oModel?this.oModel.getData():null;};
r.prototype.getFilterDataAsString=function(){return this.oModel?this.oModel.getJSON():null;};
r.prototype.getFilledFilterData=function(e){var i,j={},k,s,v;i=this.oModel?this.oModel.getData():null;if(i&&e){k=e.length;while(k--){s=e[k];if(s&&s!==r.BASIC_SEARCH_FIELD_ID){v=i[s];if(v&&v.hasOwnProperty("low")){if(v.low){j[s]=v;}}else if(v&&v.hasOwnProperty("items")){if(v.value&&typeof v.value==="string"){v.value=v.value.trim();}if(v.items.length||(v.ranges&&v.ranges.length)||v.value){j[s]=v;}}else if(v){if(typeof v==="string"){v=v.trim();}if(v){j[s]=v;}}}if(k===0){s=r.CUSTOM_FIELDS_MODEL_PROPERTY;v=i[s];if(v){j[s]=v;}}}}return q.extend(true,{},j);};
r.prototype.getFilledFilterDataAsString=function(e){return JSON.stringify(this.getFilledFilterData(e));};
r.prototype.setFilterData=function(j,R){var e=null,i=null,k=null;if(this.oModel&&j){this._bUpdatingFilterData=true;try{if(R){this._createInitialModel(false);}e=this._parseFilterData(j,R);if(e){this.oModel.setData(e,true);i=[];var s=arguments[2];if(s){i.push(s);}for(k in e){i.push(k);}this._handleFilterDataUpdate(i);}}finally{this._bUpdatingFilterData=false;}}};
r.prototype.setFilterDataAsString=function(j,R){if(j){this.setFilterData(JSON.parse(j),R);}};
r.prototype._parseFilterData=function(j,R){return r.parseFilterData(this.oModel.getData(),j,{dateFields:this._aFilterBarDateFieldNames,timeFields:this._aFilterBarTimeFieldNames,timeIntervalFields:this._aFilterBarTimeIntervalFieldNames,dateTimeMultiValueFields:this._aFilterBarDateTimeMultiValueFieldNames,conditionTypeFields:this._mConditionTypeFields},R);};
r.prototype._handleFilterDataUpdate=function(e){var i=0,j,k,n;if(this._aFilterBarMultiValueFieldMetadata){i=this._aFilterBarMultiValueFieldMetadata.length;while(i--){if(!k){k=this.oModel.getData();}if(k){j=this._aFilterBarMultiValueFieldMetadata[i];if(e.indexOf(j.fieldName)>-1){n=k[j.fieldName];if(n){this._updateMultiValueControl(j.control,n.items,n.ranges,j);}}}}this._updateConditionTypeFields();}};
r.prototype.clear=function(){this._createInitialModel(false);};
r.prototype.reset=function(){this._createInitialModel(true);};
r.prototype._initializeConditionTypeFields=function(){var e=function(i){this.setPending(this.isPending());}.bind(this);for(var n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.initialize(this.oModel.getData()[n]);if(this._mConditionTypeFields[n].conditionType.getAsync()){this._mConditionTypeFields[n].conditionType.attachPendingChange(e);}}};
r.prototype._updateConditionTypeFields=function(){var e=this._oldData;var i=this.oModel.getData();this._oldData=q.extend(true,{},i);if(e!==undefined){var u=[],n;for(n in i){var N=JSON.stringify(i[n]);var s=JSON.stringify(e[n]);if(N!==s){u.push(n);}}if(u.length>0){for(n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.providerDataUpdated(u,i);}}}};
r.prototype._clearConditionTypeFields=function(){var e=this.oModel.getData();for(var n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.initialize(e[n]);}};
r.prototype._validateConditionTypeFields=function(){var i=false;for(var n in this._mConditionTypeFields){var v=this._mConditionTypeFields[n].conditionType.validate();if(!v&&!i){i=true;}}return i;};
r.generateFilters=function(e,i,s){var j=[],A=null,k=null,n=null,t=null,u=r.FIELD_NAME_REGEX,v=null,w,x,y=null,L=0,z=0;var B,G,H,K,U,N;if(s){B=s.dateSettings;G=s.useContainsAsDefault;H=s.stringFields;K=s.timeFields;}if(e&&i){z=e.length;while(z--){N=false;t=e[z];if(t&&t!==r.BASIC_SEARCH_FIELD_ID){U=false;if(G&&H){if(H.indexOf(t)>-1){U=true;}}else if(K&&K.indexOf(t)>-1){N=true;}v=i[t];t=t.replace(u,"/");if(v&&v.hasOwnProperty("low")){if(v.low&&v.high){w=v.low;x=v.high;if(B&&B.UTC&&w instanceof Date&&x instanceof Date){w=r.getDateInUTCOffset(w);x=r.getDateInUTCOffset(x);}j.push(new F(t,sap.ui.model.FilterOperator.BT,w,x));}else if(v.low){if(v.low instanceof Date){w=v.low;if(B&&B.UTC){w=r.getDateInUTCOffset(w);}j.push(new F(t,sap.ui.model.FilterOperator.EQ,w));}else if(typeof v.low==="string"){y=l.parseFilterNumericIntervalData(v.low);if(y&&y.length===2){j.push(new F(t,sap.ui.model.FilterOperator.BT,y[0],y[1]));}else{j.push(new F(t,U?sap.ui.model.FilterOperator.Contains:sap.ui.model.FilterOperator.EQ,v.low));}}}}else if(v&&v.hasOwnProperty("items")){A=[];n=[];k=null;if(v&&v.hasOwnProperty("ranges")){y=v.ranges;L=y.length;while(L--){w=y[L].value1;x=y[L].value2;if(N){if(w instanceof Date){w=l.getEdmTimeFromDate(w);}if(x instanceof Date){x=l.getEdmTimeFromDate(x);}}else if(B&&B.UTC){if(w instanceof Date){w=r.getDateInUTCOffset(w);}if(x instanceof Date){x=r.getDateInUTCOffset(x);}}if(y[L].exclude){if(y[L].operation===sap.ui.model.FilterOperator.EQ){n.push(new F(t,sap.ui.model.FilterOperator.NE,w));}}else{A.push(new F(t,y[L].operation,w,x));}}if(n.length){k=new F(n,true);}}y=v.items;L=y.length;while(L--){A.push(new F(t,sap.ui.model.FilterOperator.EQ,y[L].key));}if(v.value||v.value===0||v.value===false){if(typeof v.value==="string"){v.value=v.value.trim();}if(v.value||v.value===0||v.value===false){A.push(new F(t,U?sap.ui.model.FilterOperator.Contains:sap.ui.model.FilterOperator.EQ,v.value));}}if(A.length){if(k){j.push(new F([new F(A,false),k],true));}else{j.push(new F(A,false));}}else if(k){j.push(k);}}else if(v||v===0||v===false){if(typeof v==="string"){v=v.trim();}if(v&&v instanceof Date){if(N){v=l.getEdmTimeFromDate(v);}else if(B&&B.UTC){v=r.getDateInUTCOffset(v);}}if(v||v===0||v===false){j.push(new F(t,U?sap.ui.model.FilterOperator.Contains:sap.ui.model.FilterOperator.EQ,v));}}}}}return(j.length>1)?[new F(j,true)]:j;};
r.parseFilterData=function(e,j,s,R){var k={},n=null,t=null,v=null,N,u,i,L,w,x,y,z,A,B;if(s){x=s.dateFields;y=s.timeFields;z=s.timeIntervalFields;A=s.dateTimeMultiValueFields;n=s.conditionTypeFields||{};}if(!x){x=[];}if(!y){y=[];}if(!z){z=[];}if(!A){A=[];}if(e&&j){u=q.extend({},j,true);for(t in u){if(e.hasOwnProperty(t)&&t!==r.CUSTOM_FIELDS_MODEL_PROPERTY){v=e[t];N=u[t];if(t in n){if("conditionTypeInfo"in N||(!("conditionTypeInfo"in N)&&N.ranges)){n[t].conditionType.initialize(N);}}else if(v&&v.hasOwnProperty("low")){k[t]=N;if(N){if(N.low&&N.high){if((x.indexOf(t)>-1)||(y.indexOf(t)>-1)){if(!(N.low instanceof Date)){k[t].low=new Date(N.low);}if(!(N.high instanceof Date)){k[t].high=new Date(N.high);}}else{k[t].low=N.low+'-'+N.high;k[t].high=null;}}else if((N.low||N.value)&&!N.high){if(!N.low&&N.value){N.low=N.value;}if((x.indexOf(t)>-1||y.indexOf(t)>-1)&&!(N.low instanceof Date)){k[t].low=new Date(N.low);}else{k[t].low=N.low;}k[t].high=null;}}}else if(v&&v.hasOwnProperty("items")){if(N&&(N.items||N.ranges)){if(N.ranges&&N.ranges.length){if(z.indexOf(t)>-1){L=N.ranges.length;for(i=0;i<L;i++){w=N.ranges[i];if(!w.exclude&&(w.operation==="EQ"||w.operation==="BT")){break;}w=null;}if(w){if(w.value1&&typeof w.value1==="string"){w.value1=new Date(w.value1);}if(w.value2&&typeof w.value2==="string"){w.value2=new Date(w.value2);}k[t]={ranges:[w],items:[],value:""};}continue;}else if(A.indexOf(t)>-1){L=N.ranges.length;B=[];for(i=0;i<L;i++){w=N.ranges[i];if(!w.exclude&&w.operation==="EQ"){if(w.value1&&typeof w.value1==="string"){w.value1=new Date(w.value1);}B.push(w);}}k[t]={ranges:B,items:[],value:""};continue;}else if(x.indexOf(t)>-1||y.indexOf(t)>-1){L=N.ranges.length;for(i=0;i<L;i++){w=N.ranges[i];if(w.value1&&typeof w.value1==="string"){w.value1=new Date(w.value1);}if(w.value2&&typeof w.value2==="string"){w.value2=new Date(w.value2);}}}else if((N.ranges.length===1)&&(N.ranges[0].operation==="EQ")&&!N.ranges[0].value1){continue;}}k[t]=N;if(!R&&k[t].ranges){for(i=0;i<k[t].ranges.length;i++){k[t].ranges[i].tokenText=null;}}}else if(typeof N==="string"||typeof N==="number"||N instanceof Date){if(N&&(x.indexOf(t)>-1||y.indexOf(t)>-1)){if(typeof N==="string"){N=new Date(N);}k[t]={ranges:[{"exclude":false,"operation":"EQ","keyField":t,"value1":N,"value2":null}],items:[],value:""};}else{k[t]={value:N,items:[]};}}}else{k[t]=null;if(typeof N==="string"||typeof N==="boolean"||typeof N==="number"||N instanceof Date){if(typeof N==="string"&&(x.indexOf(t)>-1||y.indexOf(t)>-1)){k[t]=new Date(N);}else{k[t]=N;}}else if(N&&(N.value||N.value===0||N.value===false)){k[t]=N.value;}else if(N&&N.items&&N.items.length){k[t]=N.items[0].key;}else if(N&&N.ranges&&N.ranges.length){L=N.ranges.length;for(i=0;i<L;i++){w=N.ranges[i];if(!w.exclude&&w.operation==="EQ"){break;}w=null;}if(w&&w.value1){if(typeof w.value1==="string"&&(x.indexOf(t)>-1||y.indexOf(t)>-1)){k[t]=new Date(w.value1);}else{k[t]=w.value1;}}}}}else if(R||t===r.CUSTOM_FIELDS_MODEL_PROPERTY){k[t]=u[t];}}}return k;};
r.getDateInUTCOffset=function(e){return new Date(e.valueOf()-e.getTimezoneOffset()*60*1000);};
r.prototype.destroy=function(){var e=function(A){var i;if(A){i=A.length;while(i--){A[i].destroy();}}};this._oParentODataModel=null;this._aAnalyticalParameters=null;this._aFilterBarViewMetadata=null;this._oParameterization=null;this._aFilterBarFieldNames=null;this._aFilterBarDateFieldNames=null;this._aFilterBarTimeFieldNames=null;this._aFilterBarTimeIntervalFieldNames=null;this._aFilterBarDateTimeMultiValueFieldNames=null;this._aFilterBarStringFieldNames=null;this._aFilterBarMultiValueFieldMetadata=null;this._aFieldGroupAnnotation=null;this._aSelectionFields=null;this._aSelectionVariants=null;if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;e(this._aValueHelpDialogProvider);this._aValueHelpDialogProvider=null;e(this._aValueListProvider);this._aValueListProvider=null;if(this._mTokenHandler){for(var H in this._mTokenHandler){var j=this._mTokenHandler[H];if(j.parser){j.parser.destroy();j.parser=null;}}delete this._mTokenHandler;}this.oResourceBundle=null;this.sIntervalPlaceholder=null;this.sDefaultDropDownDisplayBehaviour=null;this.sDefaultTokenDisplayBehaviour=null;this._oSmartFilter=null;if(this._oEventProvider){if(this._oEventProvider.destroy){this._oEventProvider.destroy();}this._oEventProvider=null;}for(var n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.destroy();}this._mConditionTypeFields=null;if(this.oModel){this.oModel.destroy();this.oModel=null;}this.bIsDestroyed=true;};
return r;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/SelectOption',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element','sap/ui/model/FilterOperator'],function(q,l,E,F){"use strict";
var S=E.extend("sap.ui.comp.smartfilterbar.SelectOption",{metadata:{library:"sap.ui.comp",properties:{sign:{type:"sap.ui.comp.smartfilterbar.SelectOptionSign",group:"Misc",defaultValue:'I'},operator:{type:"sap.ui.model.FilterOperator",group:"Misc",defaultValue:'EQ'},low:{type:"string",group:"Misc",defaultValue:null},high:{type:"string",group:"Misc",defaultValue:null}}}});
S.SIGN=sap.ui.comp.smartfilterbar.SelectOptionSign;S.OPERATOR=F;return S;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/SmartFilterBar.designtime',[],function(){"use strict";return{annotations:{filterRestrictions:{namespace:"Org.OData.Capabilities.V1",annotation:"FilterRestrictions",target:["EntitySet"],whiteList:{properties:["NonFilterableProperties","RequiredProperties"]},defaultValue:true,appliesTo:["filterItem/#/value"],group:["Behavior"],since:"1.28.1"},fieldGroup:{namespace:"com.sap.vocabularies.UI.v1",annotation:"FieldGroup",target:["EntityType"],defaultValue:null,appliesTo:["filterGroupItem"],group:["Behavior"],since:"1.28.1"},filterFacet:{namespace:"com.sap.vocabularies.UI.v1",annotation:"FilterFacets",target:["EntityType"],defaultValue:null,appliesTo:["filterGroupItem"],group:["Behavior"],since:"1.48"},textArrangement:{namespace:"com.sap.vocabularies.UI.v1",annotation:"TextArrangement",target:["EntityType"],defaultValue:null,appliesTo:["text"],group:["Appearance","Behavior"],since:"1.32.1"},filterVisible:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControlType",target:["Property"],whiteList:{values:["Hidden"]},defaultValue:false,appliesTo:["filterItem/#/visible"],group:["Behavior"],since:"1.32.1"},valueList:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueList",target:["Property","Parameter"],defaultValue:null,appliesTo:["filterItem/#/fieldHelp"],group:["Behavior"],since:"1.28.1"},valueListWithFixedValues:{namespace:"com.sap.vocabularies.Common.v1",annotation:"ValueListWithFixedValues",target:["Property","Parameter"],defaultValue:null,appliesTo:["field/#/fieldHelp"],group:["Behavior"],since:"1.48.1"},filterLabelOnProperty:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Label",target:["Property","PropertyPath"],defaultValue:null,appliesTo:["filterItem/label"],group:["Behavior"],since:"1.28.1"},filterLabelOnLineItem:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataFieldAbstract",target:["Property","Parameter"],whiteList:{properties:["Label"]},appliesTo:["filterItem/label"],group:["Behavior"],since:"1.28.1"},filterExpression:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FilterExpressionType",target:["EntitySet"],whiteList:{values:["MultiValue","SingleValue","SingleInterval"]},defaultValue:null,appliesTo:["filterItem/#/input"],group:["Behavior"],since:"1.28.1"},selectionFields:{namespace:"com.sap.vocabularies.UI.v1",annotation:"SelectionFields",target:["EntityType"],defaultValue:null,appliesTo:["filterItem/#/value"],group:["Behavior"],since:"1.40.1"},filterHidden:{namespace:"com.sap.vocabularies.UI.v1",annotation:"HiddenFilter",target:["Property"],appliesTo:["filterItem/hidden"],group:["Behavior"],since:"1.44.0"},selectionBVariant:{namespace:"com.sap.vocabularies.UI.v1",annotation:"SelectionVariant",target:["EntityType"],appliesTo:["SmartVariantManagement"],group:["Behavior"],since:"1.48.0"}},properties:{entitySet:{ignore:true},entityType:{ignore:true},resourceUri:{ignore:true},basicSearchFieldName:{ignore:true},enableBasicSearch:{ignore:true},considerAnalyticalParameters:{ignore:true},liveMode:{ignore:false},showMessages:{ignore:false},useDateRangeType:{ignore:true},suppressSelection:{ignore:false},considerSelectionVariants:{ignore:true},defaultSelectionVariantName:{ignore:true},useProvidedNavigationProperties:{ignore:true},navigationProperties:{ignore:true}},customData:{defaultDropDownDisplayBehaviour:{type:"sap.ui.comp.smartfilterbar.DisplayBehaviour",defaultValue:"",since:"1.28.1"},defaultTokenDisplayBehaviour:{type:"sap.ui.comp.smartfilterbar.DisplayBehaviour",defaultValue:"",since:"1.28.1"},dateFormatSettings:{type:"string",defaultValue:"\{'UTC':'true'\}",group:["Appearance"],since:"1.28.1"},useContainsAsDefaultFilter:{type:"boolean",defaultValue:false,since:"1.28.1"},executeStandardVariantOnSelect:{type:"boolean",defaultValue:false,since:"1.28.1"}},aggregations:{content:{propagateMetadata:function(e){return{actions:null};}}}};},false);
sap.ui.predefine('sap/ui/comp/smartfilterbar/SmartFilterBar',['jquery.sap.global','sap/m/MessageBox','sap/ui/comp/filterbar/FilterBar','sap/ui/comp/filterbar/FilterGroupItem','sap/ui/comp/filterbar/FilterItem','sap/ui/comp/library','./AdditionalConfigurationHelper','./ControlConfiguration','./FilterProvider','./GroupConfiguration','sap/ui/comp/smartvariants/PersonalizableInfo','sap/ui/comp/smartvariants/SmartVariantManagement','sap/ui/comp/odata/ODataModelUtil'],function(q,M,F,a,b,l,A,C,c,G,P,S,O){"use strict";
var d=F.extend("sap.ui.comp.smartfilterbar.SmartFilterBar",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{entityType:{type:"string",group:"Misc",defaultValue:null},entitySet:{type:"string",group:"Misc",defaultValue:null},resourceUri:{type:"string",group:"Misc",defaultValue:null},basicSearchFieldName:{type:"string",group:"Misc",defaultValue:null},enableBasicSearch:{type:"boolean",group:"Misc",defaultValue:false},liveMode:{type:"boolean",group:"Misc",defaultValue:false},showMessages:{type:"boolean",group:"Misc",defaultValue:true},considerAnalyticalParameters:{type:"boolean",group:"Misc",defaultValue:false},useDateRangeType:{type:"boolean",group:"Misc",defaultValue:null},suppressSelection:{type:"boolean",group:"Misc",defaultValue:false},considerSelectionVariants:{type:"boolean",group:"Misc",defaultValue:false},defaultSelectionVariantName:{type:"string",group:"Misc",defaultValue:null},useProvidedNavigationProperties:{type:"boolean",group:"Misc",defaultValue:false},navigationProperties:{type:"string",group:"Misc",defaultValue:""}},associations:{smartVariant:{type:"sap.ui.comp.smartvariants.SmartVariantManagement",multiple:false}},aggregations:{controlConfiguration:{type:"sap.ui.comp.smartfilterbar.ControlConfiguration",multiple:true,singularName:"controlConfiguration"},groupConfiguration:{type:"sap.ui.comp.smartfilterbar.GroupConfiguration",multiple:true,singularName:"groupConfiguration"}},events:{pendingChange:{pendingValue:{type:"boolean"}}}},
renderer:function(r,o){F.getMetadata().getRenderer().render(r,o);}
});
d.LIVE_MODE_INTERVAL=300;d.SELECTION_VARIANT_KEY_PREFIX="#";
d.prototype.init=function(){this._aFilterBarViewMetadata=null;this.isRunningInValueHelpDialog=false;F.prototype.init.apply(this);sap.ui.getCore().getMessageManager().registerObject(this,true);};
d.prototype._initializeMetadata=function(){if(!this.bIsInitialised){O.handleModelInit(this,this._onMetadataInitialised);}};
d.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this.bIsInitialised){this._createFilterProvider();if(this._oFilterProvider){this._aFilterBarViewMetadata=this._oFilterProvider.getFilterBarViewMetadata();if(this._aFilterBarViewMetadata){this._attachAdditionalConfigurationChanged();this.bIsInitialised=true;this.setModel(this._oFilterProvider.oModel,this._oFilterProvider.sFilterModelName);this.registerGetFiltersWithValues(this.getFiltersWithValues.bind(this));this.registerFetchData(this.getFilterDataAsString.bind(this,true));this.registerApplyData(function(j){this.setFilterDataAsString(j,true);}.bind(this));this._initializeVariantManagement();}}}};
d.prototype.getFilterBarViewMetadata=function(){return this._aFilterBarViewMetadata;};
d.prototype.getAnalyticalParameters=function(){return this._oFilterProvider?this._oFilterProvider.getAnalyticParameters():[];};
d.prototype.getSelectionVariants=function(){var s=null;if(this._oFilterProvider){s=this._oFilterProvider.getSelectionVariants();if(Object.keys(s).length<1){s=null;}}return s;};
d.prototype._createFilterProvider=function(){var r,m,e,E;m=this.getModel();r=this.getResourceUri();e=this.getEntityType();E=this.getEntitySet();if((m||r)&&(e||E)){this._oFilterProvider=new sap.ui.comp.smartfilterbar.FilterProvider({basicSearchFieldName:this.getBasicSearchFieldName(),enableBasicSearch:this.getEnableBasicSearch(),entityType:e,entitySet:E,serviceUrl:r,isRunningInValueHelpDialog:this.isRunningInValueHelpDialog,model:m,additionalConfiguration:this.getAdditionalConfiguration(),defaultDropDownDisplayBehaviour:this.data("defaultDropDownDisplayBehaviour"),defaultTokenDisplayBehaviour:this.data("defaultTokenDisplayBehaviour"),dateFormatSettings:this.data("dateFormatSettings"),useContainsAsDefaultFilter:this.data("useContainsAsDefaultFilter"),smartFilter:this,considerAnalyticalParameters:this.getConsiderAnalyticalParameters(),useDateRangeType:this.getUseDateRangeType(),considerSelectionVariants:this.getConsiderSelectionVariants(),considerNavigations:this.getUseProvidedNavigationProperties()?this._createArrayFromString(this.getNavigationProperties()):null});this._oFilterProvider.attachPendingChange(function(o){this.firePendingChange({pendingValue:o.getParameter("pending")});}.bind(this));}};
d.prototype._createArrayFromString=function(L){if(!L){return[];}var e=[];var r=L.split(",");r.forEach(function(f){if(f!==""){e.push(f.trim());}});return e;};
d.prototype._attachAdditionalConfigurationChanged=function(){var e,g,i,f;g=this.getGroupConfiguration();f=g.length;for(i=0;i<f;i++){g[i].attachChange(this._handleGroupConfigurationChanged.bind(this));}e=this.getControlConfiguration();f=e.length;for(i=0;i<f;i++){e[i].attachChange(this._handleControlConfigurationChanged.bind(this));}};
d.prototype._handleControlConfigurationChanged=function(e){var p,o,f,k,v;p=e.getParameter("propertyName");o=e.oSource;if(!o){return;}k=o.getKey();f=this._getFilterItemByName(k);if(!f){this._handleControlConfigurationChangedForDelayedFilterItems(k,o,p);return;}if(p==="visible"){v=o.getVisible();f.setVisible(v);}else if(p==="label"){v=o.getLabel();f.setLabel(v);}else if(p==="visibleInAdvancedArea"){v=o.getVisibleInAdvancedArea();if(f.setVisibleInAdvancedArea){f.setVisibleInAdvancedArea(v);}}};
d.prototype._handleControlConfigurationChangedForDelayedFilterItems=function(k,o,p){var v,f=null;if(this._aFilterBarViewMetadata){this._aFilterBarViewMetadata.some(function(g){g.fields.some(function(i){if(i.fieldName===k){f=i;}return f?true:false;});return f?true:false;});}if(f){if(p==="visible"){v=o.getVisible();f.isVisible=v;}else if(p==="label"){v=o.getLabel();f.label=v;}else if(p==="visibleInAdvancedArea"){v=o.getVisibleInAdvancedArea();f.visibleInAdvancedArea=v;}}};
d.prototype._handleGroupConfigurationChanged=function(e){var p,g;p=e.getParameter("propertyName");g=e.oSource;if(p==="label"){this._handleGroupConfigurationLabelChanged(g);}};
d.prototype._handleGroupConfigurationLabelChanged=function(g){var f,k,L;if(!g){return;}L=g.getLabel();k=g.getKey();f=this._getFilterGroupItemByGroupName(k);if(f){f.setGroupTitle(L);}else{this._handleGroupConfigurationLabelChangedForDelayedFilterItems(k,L);}};
d.prototype._handleGroupConfigurationLabelChangedForDelayedFilterItems=function(k,L){var g=null;if(this._aFilterBarViewMetadata){this._aFilterBarViewMetadata.some(function(i){if(i.groupName===k){g=i;}return g?true:false;});}if(g){g.groupLabel=L;}};
d.prototype._getFilterItemByName=function(n){var f,e,i;f=this.getFilterItems();f.push.apply(f,this.getFilterGroupItems());e=f.length;for(i=0;i<e;i++){if(f[i].getName()===n){return f[i];}}};
d.prototype._getFilterGroupItemByGroupName=function(n){var f,e,i;f=this.getFilterGroupItems();e=f.length;for(i=0;i<e;i++){if(f[i].getGroupName()===n){return f[i];}}};
d.prototype.getAdditionalConfiguration=function(){return new A(this.getControlConfiguration(),this.getGroupConfiguration());};
d.prototype.setEntityType=function(e){this.setProperty("entityType",e);this._initializeMetadata();return this;};
d.prototype.setResourceUri=function(r){this.setProperty("resourceUri",r);this._initializeMetadata();return this;};
d.prototype.propagateProperties=function(){F.prototype.propagateProperties.apply(this,arguments);this._initializeMetadata();};
d.prototype._getFilterInformation=function(){var f,i,j,L=0,e=0,g,h=[],o;if(this._aFilterBarViewMetadata){L=this._aFilterBarViewMetadata.length;for(i=0;i<L;i++){f=this._aFilterBarViewMetadata[i];g=f.fields;e=g.length;for(j=0;j<e;j++){o=g[j];if(o.name===c.BASIC_SEARCH_FIELD_ID){this.setBasicSearch(o.control);this._attachToBasicSearch(o.control);continue;}else if(f.groupName===c.BASIC_FILTER_AREA_ID){this._createFieldInAdvancedArea({groupName:F.INTERNAL_GROUP,groupLabel:""},o);}else{this._createFieldInAdvancedArea(f,o);}h.push(o);}}var p=this.getAnalyticalParameters();L=p.length;for(i=0;i<L;i++){o=p[i];this._createAnalyticParameter(o);h.push(o);}}return h;};
d.prototype._validateState=function(){var f=null,L,o,i=false;f=this.getAllFilterItems(true);if(f){L=f.length;while(L--){o=this.determineControlByFilterItem(f[L],true);if(o){if(o.__bValidatingToken){this.bIsSearchPending=true;i=true;break;}else if(o.getValueState&&o.getValueState()===sap.ui.core.ValueState.Error&&!o.data("__mandatoryEmpty")){i=true;break;}}}}if(this._oFilterProvider){return!i&&!this._oFilterProvider._validateConditionTypeFields();}else{return!i;}};
d.prototype._isDateRangeTypeFilter=function(f){if(this._oFilterProvider&&this._oFilterProvider._mConditionTypeFields[f]){return true;}return false;};
d.prototype._specialControls=function(o,f){if(o.setValue){if(this._isDateRangeTypeFilter(f)){return true;}else{q.sap.require("sap.m.DatePicker");if(o instanceof sap.m.DatePicker){return true;}}}return false;};
d.prototype._clearErroneusControlValues=function(){var f=null,L,o,v;f=this.getAllFilterItems(true);if(f){L=f.length;while(L--){o=this.determineControlByFilterItem(f[L],true);if(o){if(o.getValueState&&o.getValueState()===sap.ui.core.ValueState.Error){v=o.getBinding("value");if(v&&!this._specialControls(o,f[L].getName())){v.checkUpdate(true);}else if(o.setValue){o.setValue("");o.setValueState(sap.ui.core.ValueState.None);}}}}}};
d.prototype._attachToBasicSearch=function(B){if(B){B.attachSearch(function(){if(!this.isDialogOpen()){this.search();}}.bind(this));B.attachLiveChange(this._onChange.bind(this));}};
d.prototype._onChange=function(e){var o=e.getSource();if(o.data("__mandatoryEmpty")){o.data("__mandatoryEmpty",null);o.setValueState(sap.ui.core.ValueState.None);}if(o.data("__validationError")&&!o.getValue()){o.data("__validationError",null);o.setValueState(sap.ui.core.ValueState.None);}if(this._oFilterProvider._bUpdatingFilterData||this._oFilterProvider._bCreatingInitialModel){return;}if(!o||(o&&!o.__bValidatingToken)){this.fireFilterChange(e);this._oFilterProvider._updateConditionTypeFields(e.getParameter("filterChangeReason"));}else{this._filterSetInErrorState(o);}if(this.isLiveMode()){this.search();}};
d.prototype._handleChange=function(o){if(o){if(o.attachChange){o.attachChange(this._onChange.bind(this));}}};
d.prototype._handleEnter=function(o){if(this.isLiveMode()){return;}o.attachBrowserEvent("keydown",function(e){if(e.which===13){o.__bSuggestInProgress=(o._oSuggestionPopup&&o._oSuggestionPopup.isOpen());}});o.attachBrowserEvent("keyup",function(e){if(e.which===13&&!o.__bSuggestInProgress){this.search();}}.bind(this));};
d.prototype._createFilterFieldControl=function(f){if(f.conditionType){f.control=f.conditionType.initializeFilterItem();}else if(!f.control&&f.fCreateControl){f.fCreateControl(f);delete f.fCreateControl;}this._handleEnter(f.control);this._handleChange(f.control);};
d.prototype._createAnalyticParameter=function(p){p.factory=function(){this._createFilterFieldControl(p);if(!p.control){return;}var o=new a({labelTooltip:p.quickInfo,name:p.fieldName,mandatory:p.isMandatory,visible:p.isVisible,control:p.control,hiddenFilter:false});this._setLabel(o,p.label);this._addParameter(o);}.bind(this);p.groupName=F.INTERNAL_GROUP;return p;};
d.prototype._createFieldInAdvancedArea=function(f,o){o.factory=function(){this._createFilterFieldControl(o);var e=new a({labelTooltip:o.quickInfo,name:o.fieldName,groupName:f.groupName,groupTitle:f.groupLabel,mandatory:o.isMandatory,visible:o.isVisible,visibleInAdvancedArea:o.visibleInAdvancedArea||(f.groupName===F.INTERNAL_GROUP),control:o.control,hiddenFilter:o.hiddenFilter});if(o.isCustomFilterField){e.data("isCustomField",true);}this._setLabel(e,o.label);this.addFilterGroupItem(e);}.bind(this);o.groupName=f.groupName;o.groupTitle=f.groupLabel;return o;};
d.prototype._setLabel=function(f,L){if(L.match(/{@i18n>.+}/gi)){f.bindProperty("label",L.substring(1,L.length-1));}else{f.setLabel(L);}};
d.prototype.ensureLoadedValueHelp=function(f){if(this._oFilterProvider){this._oFilterProvider.getAssociatedValueHelpProviders().some(function(v){if(v.sFieldName===f){if(!v.bInitialised){v.loadAnnotation();}return true;}});}};
d.prototype.ensureLoadedValueList=function(f){if(this._oFilterProvider){this._oFilterProvider.getAssociatedValueListProviders().some(function(v){if(v.sFieldName===f){if(!v.bInitialised){v.loadAnnotation();}return true;}});}};
d.prototype.ensureLoadedValueHelpList=function(f){this.ensureLoadedValueHelp(f);this.ensureLoadedValueList(f);};
d.prototype.getFilters=function(f){if(!f||!f.length){f=this._getVisibleFieldNames(true);}return this._oFilterProvider?this._oFilterProvider.getFilters(f):[];};
d.prototype.getParameters=function(){return this._oFilterProvider?this._oFilterProvider.getParameters():{};};
d.prototype.getAnalyticBindingPath=function(){var B="";if(this._oFilterProvider&&this.getConsiderAnalyticalParameters()){B=this._oFilterProvider.getAnalyticBindingPath();}return B;};
d.prototype.getControlByKey=function(k){return this.determineControlByName(k);};
d.prototype._getVisibleFieldNames=function(i){var f=[],v=this.getAllFilterItems(true),L=v.length,I;L=v.length;while(L--){I=v[L];if(I){if(i&&I._isParameter()){continue;}f.push(I.getName());}}return f;};
d.prototype.getFilterData=function(e){var D=null;if(this._oFilterProvider){if(e){D=this._oFilterProvider.getFilterData();}else{D=this._oFilterProvider.getFilledFilterData(this._getVisibleFieldNames());}}return D;};
d.prototype._checkHasValueData=function(o){if(o){if(typeof o==="boolean"){return o;}else if(typeof o==="string"){if(o.toLowerCase()==="true"){return true;}}}return false;};
d.prototype._checkForValues=function(D,f,o){var v=null;if(D&&f&&o){if(!f.data("isCustomField")){v=D[f.getName()];}else{var e=o.data("hasValue");if((e!==undefined)&&(e!=null)){return this._checkHasValueData(e);}else{if(o.getValue){v=o.getValue();}else if(o.getSelectedKey){v=o.getSelectedKey();}}}}return v?true:false;};
d.prototype.getFiltersWithValues=function(){var f=[];var e=this.getAllFilterItems(true),o,D=this.getFilterData(),L=0,g;if(e&&D){L=e.length;while(L--){o=e[L];g=this.determineControlByFilterItem(o,true);if(this._checkForValues(D,o,g)){f.push(o);}}}return f.reverse();};
d.prototype.getFilterDataAsString=function(e){var D=null;if(this._oFilterProvider){if(e){D=this._oFilterProvider.getFilterDataAsString();}else{D=this._oFilterProvider.getFilledFilterDataAsString(this._getVisibleFieldNames());}}return D;};
d.prototype.setFilterData=function(j,r){if(this._oFilterProvider){this._oFilterProvider.setFilterData(j,r);}if(j&&(Object.keys(j).length===1)&&j._CUSTOM){return;}this.fireFilterChange({afterFilterDataUpdate:true});};
d.prototype.setFilterDataAsString=function(j,r){if(j){this.setFilterData(JSON.parse(j),r);}};
d.prototype.fireClear=function(){this._clearFilterFields();this.fireEvent("clear",arguments);};
d.prototype._clearFilterFields=function(){if(this._oFilterProvider){this._oFilterProvider.clear();this._clearErroneusControlValues();}this.fireFilterChange({afterFilterDataUpdate:true});};
d.prototype.fireReset=function(){this._resetFilterFields();this.fireEvent("reset",arguments);};
d.prototype._resetFilterFields=function(){if(this._oFilterProvider){this._oFilterProvider.reset();this._clearErroneusControlValues();}this.fireFilterChange({afterFilterDataUpdate:true});};
d.prototype.triggerSearch=function(D){if(this.getSuppressSelection()){return;}this._clearDelayedSearch();this._iDelayedSearchId=q.sap.delayedCall(D||0,this,"_search");};
d.prototype.search=function(s){if(this.getSuppressSelection()){return undefined;}var L=this.isLiveMode();if(s&&!L){return this._search();}else{this.triggerSearch(L?d.LIVE_MODE_INTERVAL:0);}return true;};
d.prototype._search=function(){var p=[],o={},e=true,i=false,E;var I=this.verifySearchAllowed();if(I.hasOwnProperty("pending")){return undefined;}else if(I.hasOwnProperty("error")){e=false;i=true;}else if(I.hasOwnProperty("mandatory")){e=false;}if(this.isPending()&&!this._bIsPendingChangeAttached){var h=function(f){if(f.getParameter("pendingValue")===false){this.detachPendingChange(h);this._bIsPendingChangeAttached=false;this._search();}}.bind(this);this._bIsPendingChangeAttached=true;this.attachPendingChange(h);return undefined;}this._clearDelayedSearch();if(e){o.selectionSet=this._retrieveCurrentSelectionSet(false,true);p.push(o);this.fireSearch(p);}else{if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}if(!i){if(!this._sMandatoryErrorMessage){this._sMandatoryErrorMessage=this._oResourceBundle.getText("EMPTY_MANDATORY_MESSAGE");}E=this._sMandatoryErrorMessage;}else{if(!this._sValidationErrorMessage){this._sValidationErrorMessage=this._oResourceBundle.getText("VALIDATION_ERROR_MESSAGE");}E=this._sValidationErrorMessage;}if(this.getShowMessages()&&!this.getLiveMode()){try{this._activateMainContent();M.error(E,{styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":"",onClose:this._setFocusOnFirstErroneousField.bind(this)});}catch(x){return undefined;}}else{this._setFocusOnFirstErroneousField();q.sap.log.warning("search was not triggered. "+E);}if(this._bExpandAdvancedFilterArea&&this.rerenderFilters){this.rerenderFilters(true);}}return e;};
d.prototype.validateMandatoryFields=function(){return this._validateMandatoryFields();};
d.prototype.verifySearchAllowed=function(){delete this.bIsSearchPending;if(this._validateState()){if(this.validateMandatoryFields()){return{};}return{mandatory:true};}if(this.bIsSearchPending){return{pending:true};}return{error:true};};
d.prototype._setFocusOnFirstErroneousField=function(){var f=null,L,o,i;f=this.getAllFilterItems(true);if(f){L=f.length;for(i=0;i<L;i++){o=this.determineControlByFilterItem(f[i],true);if(o&&o.getValueState&&o.getValueState()===sap.ui.core.ValueState.Error){q.sap.delayedCall(0,o,"focus");break;}}}};
d.prototype.setLiveMode=function(f){if(!this._isPhone()){if(f){this.hideGoButton();}else{this.restoreGoButton();}}if(this._oSmartVariantManagement){if(f){if(this._bShowShareState===undefined){this._bShowShareState=this._oSmartVariantManagement.getShowExecuteOnSelection();}this._oSmartVariantManagement.setShowExecuteOnSelection(false);}else if(this._bShowShareState!==undefined){this._oSmartVariantManagement.setShowExecuteOnSelection(this._bShowShareState);}}this.setProperty("liveMode",f);return this;};
d.prototype.isLiveMode=function(){if(this._isPhone()){return false;}return this.getLiveMode();};
d.prototype._clearDelayedSearch=function(){if(this._iDelayedSearchId){q.sap.clearDelayedCall(this._iDelayedSearchId);this._iDelayedSearchId=null;}};
d.prototype.isPending=function(){if(!this._oFilterProvider){return false;}return this._oFilterProvider.isPending();};
d.prototype._validateMandatoryFields=function(){var f=true,e=this.determineMandatoryFilterItems(),o,D=this.getFilterData(),L=0,g;this._bExpandAdvancedFilterArea=false;if(e&&D){L=e.length;while(L--){o=e[L];g=this.determineControlByFilterItem(o,true);if(g&&g.setValueState){if(this._checkForValues(D,o,g)){if(g.data("__mandatoryEmpty")){g.data("__mandatoryEmpty",null);g.setValueState(sap.ui.core.ValueState.None);}}else{f=false;g.setValueState(sap.ui.core.ValueState.Error);g.data("__mandatoryEmpty",true);if(o.getGroupName){this._bExpandAdvancedFilterArea=true;}}}}}return f;};
d.prototype._setSmartVariant=function(s){if(s){var o=sap.ui.getCore().byId(s);if(o){if(o instanceof S){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._replaceVariantManagement(o);this._oSmartVariantManagement=o;}}else{q.sap.log.error("Control with the id="+s+" not of expected type");}}else{q.sap.log.error("Control with the id="+s+" not found");}}};
d.prototype.setSmartVariant=function(s){if(this.getAdvancedMode()){q.sap.log.error("not supported for the advanced mode");return this;}this.setAssociation("smartVariant",s);this._setSmartVariant(s);return this;};
d.prototype.getSmartVariant=function(){if(this.getAdvancedMode()){q.sap.log.error("not supported for the advanced mode");return null;}var s=this.getAssociation("smartVariant");if(s){return sap.ui.getCore().byId(s);}return this._oSmartVariantManagement;};
d.prototype._createVariantManagement=function(){this._oSmartVariantManagement=null;if(this.getAdvancedMode()){return F.prototype._createVariantManagement.apply(this);}var s=this.getSmartVariant();this._setSmartVariant(s);if(!this._oSmartVariantManagement){this._oSmartVariantManagement=new S(this.getId()+"-variant",{showExecuteOnSelection:true,showShare:true});}return this._oSmartVariantManagement;};
d.prototype._initializeVariantManagement=function(){if(!this.isRunningInValueHelpDialog&&this._oSmartVariantManagement&&this.getPersistencyKey()){var p=new P({type:"filterBar",keyName:"persistencyKey",dataSource:this.getEntitySet()||this.getEntityType()});p.setControl(this);this._oSmartVariantManagement.addPersonalizableControl(p);var v=this._checkHasValueData(this.data("executeStandardVariantOnSelect"));if(v){this._oSmartVariantManagement._executeOnSelectForStandardVariantByXML(v);}F.prototype._initializeVariantManagement.apply(this,arguments);}else{this.fireInitialise();this.fireInitialized();}};
d.prototype.setConsiderSelectionvariants=function(v){this.setProperty("considerSelectionVariants",v);};
d.prototype.fireInitialized=function(){if(!this.isRunningInValueHelpDialog&&this.getPersistencyKey()&&this.getConsiderSelectionVariants()&&this._oSmartVariantManagement&&this._oSmartVariantManagement.getEnabled()){try{if(!this._oSmartVariantManagement.isPageVariant()){this._prepareSelectionVariants();}}finally{}}F.prototype.fireInitialized.apply(this,arguments);};
d.prototype._prepareSelectionVariants=function(){var s,v,D,k=d.SELECTION_VARIANT_KEY_PREFIX,n=false,V=[];s=this.getSelectionVariants();if(s){this._oSmartVariantManagement.registerSelectionVariantHandler({callback:this.getSelectionVariant,handler:this},k);sap.ui.require("sap.ui.comp.variants.VariantItem");s.forEach(function(o){var e=k+o.qualifier;if(o.qualifier){v=new sap.ui.comp.variants.VariantItem({key:e,text:o.annotation.Text.String,global:true,executeOnSelection:false,lifecycleTransportId:"",lifecyclePackage:"",namespace:"",readOnly:true,labelReadOnly:true,author:""});this._oSmartVariantManagement.insertVariantItem(v,0);V.push(e);}else{n=this._defaultSelectionVariantHandling(o);}}.bind(this));if(!this._oSmartVariantManagement._getDefaultVariantKey()){if(this.getDefaultSelectionVariantName()){D=k+this.getDefaultSelectionVariantName();this._oSmartVariantManagement.setInitialSelectionKey(D);this._oSmartVariantManagement.fireSelect({key:D});}else if(n){this._oSmartVariantManagement.fireSelect({key:this._oSmartVariantManagement.STANDARDVARIANTKEY});}}this._oSmartVariantManagement.applyDefaultFavorites(V,true);}};
d.prototype._defaultSelectionVariantHandling=function(s){var v=null;if(!this._oSmartVariantManagement){return false;}if(this._oSmartVariantManagement._sAppStandardVariantKey){return false;}if(s&&s.annotation){v=this.convertSelectionVariantToInternalVariant(s.annotation);if(v){if(!this._oSmartVariantManagement.isPageVariant()){v.version="V1";var f=JSON.parse(v.filterBarVariant);if(this._oSmartVariantManagement._oStandardVariant){var o=JSON.parse(this._oSmartVariantManagement._oStandardVariant.filterBarVariant);if(o._CUSTOM){f._CUSTOM=o._CUSTOM;v.filterBarVariant=JSON.stringify(f);}}this._oSmartVariantManagement._oStandardVariant=v;return true;}}}return false;};
d.prototype._adaptFilterVisibilityProperties=function(f){var e,E=null,g=[];if(this._oSmartVariantManagement&&this._oSmartVariantManagement._oStandardVariant&&this._oSmartVariantManagement._oStandardVariant.filterbar){q.extend(true,g,this._oSmartVariantManagement._oStandardVariant.filterbar);}for(E in f){e=false;g.some(function(o){if(o.name===E){e=true;o.partOfCurrentVariant=true;}return e;});if(!e){g.push({group:this._determineGroupNameByName(E),name:E,partOfCurrentVariant:true,visibleInFilterBar:false,visible:true});}}return g;};
d.prototype.getSelectionVariant=function(k,s){var v=null,o=null,K=k.substring(d.SELECTION_VARIANT_KEY_PREFIX.length);this.getSelectionVariants().some(function(i){if(i.qualifier===K){o=i;return true;}return false;});if(o){if(o.variantContent){v=o.variantContent;}else{v=this.convertSelectionVariantToInternalVariant(o.annotation);o.variantContent=v;}}return v;};
d.prototype.convertSelectionVariantToInternalVariant=function(s){sap.ui.require("sap.ui.model.odata.AnnotationHelper");sap.ui.require("sap.ui.model.Context");sap.ui.require("sap.ui.comp.filterbar.VariantConverterFrom");var e=JSON.stringify(s),o=JSON.parse(e),v={},p={};var D=new sap.ui.model.Context(null,"/"),f=o.SelectOptions,g=o.Parameters,h;if(f){f.forEach(function(i){i.PropertyName=i.PropertyName.PropertyPath;i.Ranges.forEach(function(r){r.Sign=r.Sign.EnumMember.split("/")[1];r.Option=r.Option.EnumMember.split("/")[1];r.Low=r.Low&&sap.ui.model.odata.AnnotationHelper.format(D,r.Low)||null;r.High=r.High&&sap.ui.model.odata.AnnotationHelper.format(D,r.High)||null;});});}if(g){g.forEach(function(i){i.PropertyName=i.PropertyName.PropertyPath.split("/")[1]||i.PropertyName.PropertyPath;i.PropertyValue=sap.ui.model.odata.AnnotationHelper.format(D,i.PropertyValue)||null;});}h=new sap.ui.comp.filterbar.VariantConverterFrom();v=h.convert(JSON.stringify(o),this);p=JSON.parse(v.payload);if(this._oSmartVariantManagement.isPageVariant()){v[this.getPersistencyKey()]={"version":"V2","filterbar":this._adaptFilterVisibilityProperties(p),"filterBarVariant":JSON.stringify(p)};}else{v={"version":"V2","filterbar":this._adaptFilterVisibilityProperties(p),"filterBarVariant":JSON.stringify(p)};}return v;};
d.prototype.getBasicSearchControl=function(){return sap.ui.getCore().byId(this.getBasicSearch());};
d.prototype.addFieldToAdvancedArea=function(k){var f;f=this._getFilterItemByName(k);if(f&&f.setVisibleInAdvancedArea){f.setVisibleInAdvancedArea(true);}};
d.prototype.getConditionTypeByKey=function(k){if(this._oFilterProvider._mConditionTypeFields[k]){return this._oFilterProvider._mConditionTypeFields[k].conditionType;}};
d.prototype.isInitialised=function(){return!!this.bIsInitialised;};
d.prototype.destroy=function(){this._clearDelayedSearch();if(this._oSmartVariantManagement&&this.getConsiderSelectionVariants()){this._oSmartVariantManagement.unregisterSelectionVariantHandler(this);}F.prototype.destroy.apply(this,arguments);sap.ui.getCore().getMessageManager().unregisterObject(this);if(this._oFilterProvider&&this._oFilterProvider.destroy){this._oFilterProvider.destroy();}this._oFilterProvider=null;this._aFilterBarViewMetadata=null;this._bExpandAdvancedFilterArea=null;this._oResourceBundle=null;this._sMandatoryErrorMessage=null;this._sValidationErrorMessage=null;this._oSmartVariantManagement=null;};
return d;},true);
sap.ui.predefine('sap/ui/comp/smartform/Group.designtime',["sap/ui/comp/smartform/GroupElement.designtime"],function(G){"use strict";return{name:{singular:"GROUP_CONTROL_NAME",plural:"GROUP_CONTROL_NAME_PLURAL"},aggregations:{title:{ignore:true},groupElements:{ignore:true},formElements:{domRef:":sap-domref",childNames:{singular:"FIELD_CONTROL_NAME",plural:"FIELD_CONTROL_NAME_PLURAL"},actions:{move:{changeType:"moveControls"},addODataProperty:{changeType:"addFields",filter:function(r,o){var i=r.getMetadata().getName()==="sap.ui.comp.smartform.SmartForm"?r.getIgnoredFields():"";return i.indexOf(o.name)===-1;},getLabel:function(g){return g.getParent().getLabelText();}}}}},actions:{rename:{changeType:"renameGroup",isEnabled:function(g){return!g.getExpandable();},domRef:function(c){var t=c.getTitle&&c.getTitle();if(t&&t.getDomRef){return t.getDomRef();}else{return jQuery.sap.domById(c.getId()+"--title");}}},remove:{changeType:"hideControl",getConfirmationText:function(g){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var m=[];g.getGroupElements().forEach(function(o){if(o.getVisible()&&G.functions.hasMandatoryFields(o)){var s=o.getLabelText()||o.getId();m.push(s);}});if(m.length){var f="\n\u2003\u2003\u2022\u2004 ";var M="";m.forEach(function(o){M+=f+o;});return t.getText("GROUP_DESIGN_TIME_REMOVE_GROUP_WITH_MANDATORY_FIELDS_MESSAGE",M);}}}},properties:{useHorizontalLayout:{ignore:true},horizontalLayoutGroupElementMinWidth:{ignore:true},label:{ignore:false}}};},true);
sap.ui.predefine('sap/ui/comp/smartform/Group',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element','sap/ui/layout/ResponsiveFlowLayoutData','sap/ui/layout/form/FormContainer','./GroupElement'],function(q,l,E,R,F,G){"use strict";
var a=F.extend("sap.ui.comp.smartform.Group",{metadata:{library:"sap.ui.comp",designTime:true,properties:{useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"groupElements",aggregations:{groupElements:{type:"sap.ui.comp.smartform.GroupElement",multiple:true,singularName:"groupElement"},layout:{type:"sap.ui.layout.GridData",multiple:false}},_visibilityDerived:false}});
a.prototype.setUseHorizontalLayout=function(v){var o=this.getUseHorizontalLayout();if(o==v){return this;}this.setProperty("useHorizontalLayout",v);var g=this.getGroupElements();for(var i=0;i<g.length;i++){g[i].setUseHorizontalLayout(v);}this._updateLayoutData();return this;};
a.prototype._updateLayoutData=function(){if(this.getUseHorizontalLayout()){var s=this.getParent();while(s&&!s.addGroup&&s.getParent){s=s.getParent();}if(!s||!s.getLayout()||!s.getLayout().getGridDataSpan()){if(!this.getLayoutData()){if(!this._oResponsiveLayout){this._oResponsiveLayout=new R({"linebreak":true,"linebreakable":true});this._oResponsiveLayout._bCreatedByGroup=true;}this.setLayoutData(this._oResponsiveLayout);}}else{this._updateLineBreaks();}}else if(this._oResponsiveLayout&&this.getLayoutData()==this._oResponsiveLayout){this.setLayoutData();this._oResponsiveLayout.setParent(this);}};
a.prototype.setHorizontalLayoutGroupElementMinWidth=function(n){var d=this.getHorizontalLayoutGroupElementMinWidth();if(d==n){return this;}q.sap.log.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);this.setProperty("horizontalLayoutGroupElementMinWidth",n);var g=this.getGroupElements();for(var i=0;i<g.length;i++){g[i].setHorizontalLayoutGroupElementMinWidth(n);}return this;};
a.prototype.setEditMode=function(e){var g=this.getGroupElements();for(var i=0;i<g.length;i++){g[i].setEditMode(e);}return this;};
a.prototype._delegateEditModeFromParent=function(g){var p=null;var e=false;if(g){p=this.getParent();if(p&&p.getEditable){e=p.getEditable();g.setEditMode(e);}}};
a.prototype._updateLineBreaks=function(){if(!this.getUseHorizontalLayout()){return;}var s=this.getParent();if(!s){return;}while(s&&!s._getGridDataSpanNumbers&&s.getParent){s=s.getParent();}if(!s._getGridDataSpanNumbers){return;}var S=s._getGridDataSpanNumbers();if(!S){return;}var e=this.getGroupElements();e=e.filter(function(o){return o.getVisible();});var C=0;var d=0;var f=0;var g=0;var L=false;var h=false;var j=false;var k=false;for(var i=0;i<e.length;i++){var o=e[i];C++;d++;f++;g++;if(S.XL*C>12){L=true;C=1;}else{L=false;}if(S.L*d>12){h=true;d=1;}else{h=false;}if(S.M*f>12){j=true;f=1;}else{j=false;}if(S.S*g>12){k=true;g=1;}else{k=false;}o._setLinebreak(L,h,j,k);}};
a.prototype._updateGridDataSpan=function(){if(!this.getUseHorizontalLayout()){return;}var g=this.getGroupElements();for(var i=0;i<g.length;i++){g[i]._updateGridDataSpan();}};
a.prototype._updateFormContainerVisibility=function(){var A=this.getVisible();if(A===false&&this._visibilityDerived===false){return;}var g=this.getGroupElements();var v=false;v=g.some(function(o){return o.getVisible();});if(A!==v){this._visibilityDerived=true;F.prototype.setVisible.apply(this,[v]);this.fireEvent("_visibleChanged");}};
a.prototype.setLabel=function(L){this.setProperty("label",L);var t=this.getTitle();if(t&&(typeof t!=="string")){q.sap.log.error("Title already set, Label can not be set",this);}else{this.setTitle(L);}return this;};
a.prototype.setVisible=function(v){F.prototype.setVisible.apply(this,arguments);this._visibilityDerived=false;this.fireEvent("_visibleChanged");return this;};
a.prototype.addGroupElement=function(g){return this.addFormElement(g);};
a.prototype.insertGroupElement=function(g,i){return this.insertFormElement(g,i);};
a.prototype.getGroupElements=function(){return this.getFormElements();};
a.prototype.indexOfGroupElement=function(g){return this.indexOfFormElement(g);};
a.prototype.removeGroupElement=function(g){return this.removeFormElement(g);};
a.prototype.removeAllGroupElements=function(){return this.removeAllFormElements();};
a.prototype.destroyGroupElements=function(){return this.destroyFormElements();};
a.prototype.addFormElement=function(g){if(!g){return this;}g=this.validateAggregation("groupElements",g,true);g.setUseHorizontalLayout(this.getUseHorizontalLayout());g.setHorizontalLayoutGroupElementMinWidth(this.getHorizontalLayoutGroupElementMinWidth());g.attachVisibleChanged(this._updateFormContainerVisibility,this);_.call(this,g);F.prototype.addFormElement.apply(this,arguments);this._delegateEditModeFromParent(g);this._updateFormContainerVisibility();if(this.getUseHorizontalLayout()){g._updateGridDataSpan();this._updateLineBreaks();}return this;};
a.prototype.insertFormElement=function(g,i){if(!g){return this;}g=this.validateAggregation("groupElements",g,true);g.setUseHorizontalLayout(this.getUseHorizontalLayout());g.setHorizontalLayoutGroupElementMinWidth(this.getHorizontalLayoutGroupElementMinWidth());g.attachVisibleChanged(this._updateFormContainerVisibility,this);_.call(this,g);F.prototype.insertFormElement.apply(this,arguments);this._delegateEditModeFromParent(g);this._updateFormContainerVisibility();if(this.getUseHorizontalLayout()){g._updateGridDataSpan();this._updateLineBreaks();}return this;};
a.prototype.removeFormElement=function(g){var o=F.prototype.removeFormElement.apply(this,arguments);if(o){o.detachVisibleChanged(this._updateFormContainerVisibility,this);c.call(this,o);if(this.getGroupElements().length>0){this._updateFormContainerVisibility();this._updateLineBreaks();}}return o;};
a.prototype.removeAllFormElements=function(){var g=F.prototype.removeAllFormElements.apply(this,arguments);for(var i=0;i<g.length;i++){var o=g[i];o.detachVisibleChanged(this._updateFormContainerVisibility,this);c.call(this,o);}return g;};
a.prototype.setLayout=function(L){L=this.validateAggregation("layout",L,false);return this.setLayoutData(L);};
a.prototype.getLayout=function(){return this.getLayoutData();};
a.prototype.destroyLayout=function(L){return this.destroyLayoutData();};
a.prototype.addCustomData=function(C){if(!C){return this;}F.prototype.addCustomData.apply(this,arguments);var g=this.getGroupElements();for(var i=0;i<g.length;i++){b.call(this,g[i],C);}return this;};
a.prototype.insertCustomData=function(C,I){if(!C){return this;}F.prototype.insertCustomData.apply(this,arguments);var g=this.getGroupElements();for(var i=0;i<g.length;i++){b.call(this,g[i],C);}return this;};
a.prototype.removeCustomData=function(C){var o=F.prototype.removeCustomData.apply(this,arguments);if(o){var g=this.getGroupElements();for(var i=0;i<g.length;i++){c.call(this,g[i],o.getId());}}return o;};
a.prototype.removeAllCustomData=function(){var C=F.prototype.removeAllCustomData.apply(this,arguments);if(C.length>0){var g=this.getGroupElements();for(var i=0;i<g.length;i++){c.call(this,g[i]);}}return C;};
a.prototype.destroyCustomData=function(){F.prototype.destroyCustomData.apply(this,arguments);var g=this.getGroupElements();for(var i=0;i<g.length;i++){c.call(this,g[i]);}return this;};
function _(g){var C=this.getCustomData();for(var i=0;i<C.length;i++){b.call(this,g,C[i]);}}
function b(g,C){if(sap.ui.comp.smartform.inheritCostomDataToFields(C)){var n=C.clone();n._bFromGroup=true;n._sOriginalId=C.getId();g.addCustomData(n);}}
function c(g,o){var C=g.getCustomData();for(var i=0;i<C.length;i++){var d=C[i];if(d._bFromGroup&&(!o||o==d._sOriginalId)){g.removeCustomData(d);}}}
a.prototype.clone=function(I,L){var g=this.removeAllGroupElements();var C=F.prototype.clone.apply(this,arguments);for(var i=0;i<g.length;i++){var o=g[i];var d=o.clone(I,L);this.addGroupElement(o);C.addGroupElement(d);}return C;};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartform/GroupElement.designtime',["sap/ui/comp/smartform/SmartForm"],function(S){"use strict";var h=function(G){var E=G.getElements();if(E.length===0){return false;}for(var j=0;j<E.length;j++){var o=E[j];if(o.getMandatory&&o.getMandatory()){return true;}}return false;};var g=function(s){if(s.getElements&&s.getElements()){return s.getElements().length;}return 0;};var e=function(c){var C=0;c.forEach(function(o){C+=g(o);});if(C<2||C>3){return false;}return true;};return{name:{singular:"FIELD_CONTROL_NAME",plural:"FIELD_CONTROL_NAME_PLURAL"},aggregations:{label:{ignore:true},elements:{ignore:false,propagateMetadata:function(E){if(E.getMetadata().getName()!=="sap.ui.comp.navpopover.SmartLink"&&!(E.getMetadata().getName()==="sap.ui.comp.navpopover.SmartField"&&E.getSemanticObjectController&&E.getSemanticObjectController())){return{actions:null};}}}},actions:{remove:{changeType:"hideControl",getConfirmationText:function(G){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");if(h(G)){var s=G.getLabelText()||G.getId();return t.getText("GROUP_ELEMENT_DESIGN_TIME_REMOVE_MANDATORY_FIELD_MESSAGE",s);}}},reveal:{changeType:"unhideControl"},rename:{changeType:"renameField",isEnabled:function(c){if(c._getLabel()){return true;}return false;},domRef:function(c){return c._getLabel().getDomRef();}},combine:{changeType:"combineFields",changeOnRelevantContainer:true,isEnabled:function(c){return e(c);},getState:function(c,C,p){var m=p.modifier;var a=p.appComponent;var G,P;var s={elementState:[]};var b=C.content.combineFieldSelectors;b.forEach(function(d){G=m.bySelector(d,a);P=G.getParent();var E=G.getElements();var f=[];for(var i=0;i<E.length;i++){var o=E[i];var l="";if(o.getTextLabel){l=o.getTextLabel();}f.push(l);}s.elementState.push({groupElement:G,parent:P,groupElementIndex:P.getGroupElements().indexOf(G),content:E,label:G.getLabel(),elementsLabels:f});});return s;},restoreState:function(c,s){s.elementState.forEach(function(E){if(E.parent.getGroupElements().indexOf(E.groupElement)===-1){E.groupElement.getParent().removeDependent(E.groupElement);E.parent.insertGroupElement(E.groupElement,E.groupElementIndex);}else{E.groupElement.removeAllElements();}});s.elementState.forEach(function(E){E.content.forEach(function(f,i){E.groupElement.insertElement(f,i);if(f.setTextLabel){f.setTextLabel(E.elementsLabels[i]);}});E.groupElement.setLabel(E.label);});}},split:{changeType:"splitField",changeOnRelevantContainer:true,getControlsCount:function(G){return g(G);}}},functions:{hasMandatoryFields:h},properties:{useHorizontalLayout:{ignore:true},horizontalLayoutGroupElementMinWidth:{ignore:true},elementForLabel:{ignore:true}}};},true);
sap.ui.predefine('sap/ui/comp/smartform/GroupElement',['jquery.sap.global','sap/m/Label',"sap/m/VBox","sap/m/HBox",'sap/ui/comp/library','sap/ui/core/Element','sap/ui/layout/form/FormElement','sap/ui/comp/smartfield/SmartLabel','sap/ui/comp/smartfield/SmartField','sap/m/FlexItemData','sap/ui/core/VariantLayoutData','sap/ui/layout/GridData'],function(q,L,V,H,l,E,F,S,a,b,c,G){"use strict";var C=l.smartfield.ControlContextType;
var d=F.extend("sap.ui.comp.smartform.GroupElement",{
metadata:{library:"sap.ui.comp",properties:{useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},elementForLabel:{type:"int",group:"Misc",defaultValue:0}},defaultAggregation:"elements",aggregations:{elements:{type:"sap.ui.core.Control",multiple:true,singularName:"element"}},events:{visibleChanged:{}},designTime:true},
_visibilityDerived:false,
_bHorizontalLayoutUsed:false
});
d._myVBox=undefined;
d.prototype._getFieldRelevantForLabel=function(){var i=this.getElements();var I=this.getElementForLabel();if(i.length>I&&(i[I]instanceof a)){return i[I];}return null;};
d.prototype._extractFields=function(i,B){var D=[];i.forEach(function(I){if(I.getItems){D=D.concat(I.getItems());}else{D.push(I);}});if(D.some(function(I){return I.getItems;})){D=this._extractFields(D);}if(B){D=D.filter(function(I){return!(I instanceof sap.m.Label);});}return D;};
d.prototype.setTooltip=function(T){F.prototype.setTooltip.apply(this,[T]);var R=this._getFieldRelevantForLabel();var i=this._getLabel();_.call(this,i,R);return this;};
function _(i,R){if(i==this._oSetLabel){return;}var T;if(this._oSetLabel&&this._oSetLabel instanceof sap.ui.core.Control){T=A.call(this._oSetLabel);}if(!T){T=A.call(this);}if(T){if(i instanceof S){if(R&&R.setTooltipLabel){R.setTooltipLabel(T);}}else{i.setTooltip(T);}}}
d.prototype.setLabel=function(i){if(!i&&this._bMoveLabelToVBox){return this.setAggregation("label",i);}if(this._oSetLabel&&(typeof this._oSetLabel!=="string")){this._oSetLabel.detachEvent("_change",e,this);}var O;var B;var D;if(typeof i==="string"){O=this._getLabel();if(O){B=O.getText();}}else if(!i&&this._oSetLabel){B=this.getLabelText();}F.prototype.setLabel.apply(this,[i]);this._oSetLabel=i;f.call(this);if(typeof i==="string"){if(this._oLabel instanceof S&&i!=B&&(i.length>0||B.length>0)){D=this._getFieldRelevantForLabel();if(D&&i!=null){if(D.getTextLabel){if(!D._oTextLabelSetByGroupElement){D._oTextLabelSetByGroupElement={oldText:D.getTextLabel()};}D.setTextLabel(i);}}}if(!this._bHorizontalLayoutUsed){this.setAggregation("_label",this._oLabel,true);}this._oLabel.isRequired=g;}else{if(i){if(i.isRequired){i.isRequired=g;}i.attachEvent("_change",e,this);}else{D=this._getFieldRelevantForLabel();if(D){y.call(this,D,B);}}this.updateLabelOfFormElement();}return this;};
d.prototype.destroyLabel=function(){var O=this.getLabelText();F.prototype.destroyLabel.apply(this);delete this._oSetLabel;f.call(this);var i=this._getFieldRelevantForLabel();if(i){y.call(this,i,O);}this.updateLabelOfFormElement();return this;};
function e(i){if(i.getParameter("name")=="text"){var B=i.oSource;var T=B.getText();if(this._oLabel){this._oLabel.setText(T);}var D=this._getFieldRelevantForLabel();if(D&&D.getTextLabel){if(!D._oTextLabelSetByGroupElement){D._oTextLabelSetByGroupElement={oldText:D.getTextLabel()};}D.setTextLabel(T);}}}
function f(){if(!this._bHorizontalLayoutUsed){return;}var i=this.getFields();var O;if(i.length>0){var B=this.getFields()[0];if(B instanceof V){var I=B.getItems();var N=this._getLabel();if(I.length>0&&I[0]instanceof L){O=I[0];}this._bMoveLabelToVBox=true;if(O&&O!=N){B.removeItem(0);if(O._bCreatedByGroupElement){this.setAggregation("_label",O,true);}else{this.setAggregation("label",O);}}if(N&&O!=N){B.insertItem(N,0);}this._bMoveLabelToVBox=false;h.call(this);}}}
function g(){if(this.getRequired&&this.getRequired()){return true;}var B=this.getParent();if(B instanceof sap.m.VBox){B=B.getParent();}var D=B.getElements();for(var i=0;i<D.length;i++){var I=D[i];if(I.getRequired&&I.getRequired()===true&&(!I.getEditable||I.getEditable())&&(!I.getContextEditable||I.getContextEditable())){return true;}}return false;}
function h(){var i=this._getFieldRelevantForLabel();if(i){if(this._oLabel){this._oLabel.setLabelFor(i);}return;}var B=this.getFields();i=B.length>0?B[0]:null;if(i instanceof V){var I=i.getItems();if(I[1]instanceof H){i=I[1].getItems()[0];}else{i=I[1];}}var D=this._oLabel;if(D){D.setLabelFor(i);}else{D=this.getLabel();if(D instanceof sap.ui.core.Control){D.setAlternativeLabelFor(i);}}}
d.prototype.getLabel=function(){return this._oSetLabel;};
d.prototype._getLabel=function(){if(this._oLabel){return this._oLabel;}else{return this._oSetLabel;}};
d.prototype.getLabelControl=function(){if(this._bHorizontalLayoutUsed){return null;}else{return this._getLabel();}};
d.prototype.getLabelText=function(){var i="";var B=this._getLabel();if(B){i=B.getText();}return i;};
d.prototype.setElementForLabel=function(i){this.setProperty("elementForLabel",i);this.updateLabelOfFormElement();return this;};
d.prototype._createLabel=function(i){var B=null;var D=this._getFieldRelevantForLabel();if(D){if(D.getShowLabel&&D.getShowLabel()){B=new S(D.getId()+'-label');if(i){if(!D._oTextLabelSetByGroupElement){D._oTextLabelSetByGroupElement={oldText:D.getTextLabel()};}D.setTextLabel(i);B.setText(i);}B.setLabelFor(D);}}else{B=new L();B.setText(i);}if(B){B._bCreatedByGroupElement=true;B.isRequired=g;this._oLabel=B;if(!this.getUseHorizontalLayout()){this.setAggregation("_label",B,true);}if(this._oSetLabel&&typeof this._oSetLabel!=="string"){this._oSetLabel.setAlternativeLabelFor(null);}}return B;};
d.prototype.updateLabelOfFormElement=function(){var i=false,O=null;var B=this.getElements();var R=this._getFieldRelevantForLabel();var D=this._getLabel();var I=false;if(D&&D._bCreatedByGroupElement){if(D instanceof S){if(!R||(D._sSmartFieldId&&D._sSmartFieldId!=R.getId())){I=true;}}else if(R){I=true;}if(I){D.destroy();delete this._oLabel;D=null;if(this._oSetLabel&&!R){if(typeof this._oSetLabel==="string"){F.prototype.setLabel.apply(this,[this._oSetLabel]);D=this._oLabel;this._oLabel.isRequired=g;}else{D=this._oSetLabel;}f.call(this);}}}else if(D&&R){if(D==this._oLabel){D.destroy();delete this._oLabel;}D=null;}if(!D){if(this._oSetLabel){if(typeof this._oSetLabel==="string"){O=this._oSetLabel;}else{O=this._oSetLabel.getText();}}else{O="";}}if(!D&&B.length>0){D=this._createLabel(O);i=true;}if(D){if(D instanceof S){if(R&&R.setTextLabel&&R.getTextLabel()){D.setText(R.getTextLabel());}}_.call(this,D,R);}if(i){f.call(this);if(D&&D.setLabelFor&&!(D instanceof S)&&!R&&(B.length>0)){D.setLabelFor(B[0]);}}};
d.prototype.setEditMode=function(i){var B=this.getElements();B.forEach(function(D){if(D instanceof a){if(!(D.data("editable")===false)){D.setContextEditable(i);}}});return this;};
d.prototype._getVisibilityOfFields=function(B,I){var R=false;var i=0,D=0,J=null;if(B&&B.length){D=B.length;for(i=0;i<D;i++){J=B[i];if(J){if(I&&J instanceof S){continue;}if(J instanceof V){R=this._getVisibilityOfFields(this._extractFields([J]),true);}else{R=J.getVisible();}}if(R){break;}}}return R;};
d.prototype._updateFormElementVisibility=function(){var i=this.getVisible();var B=false,D=null;if(i===false&&this._visibilityDerived===false){return;}D=this.getElements();if(D&&D.length){B=this._getVisibilityOfFields(D);}if(i!==B){this._visibilityDerived=true;F.prototype.setVisible.apply(this,[B]);this.fireVisibleChanged({visible:B});if(this.getParent()){this.getParent()._updateLineBreaks();}}};
d.prototype._updateLayout=function(){var i=null;var B=null;var D=[];var I=[];var J=null;var U=this.getUseHorizontalLayout();var K;var M=0;var N;if(U==this._bHorizontalLayoutUsed){return;}if(this._bHorizontalLayoutUsed){I=this.getFields();D=this._extractFields(I,true);}else{D=this.getFields();}var O=this._getLabel();if(U){if(D.length>0&&D[0].getLayoutData()){J=D[0].getLayoutData();}this.removeAllFields();if(D.length>0){if(D.length>1){for(M=0;M<D.length;M++){N=D[M];if(M>0){j.call(this,N);}}B=n.call(this,D.slice(0));}if(B){K=[B];}else{K=D.slice(0);}i=m.call(this,K,O,J);this.addField(i);if(O){h.call(this);}}}else{if(I[0]instanceof V){i=I[0];K=i.getItems();if(D.length>1&&K.length>0){if(O){if(K.length>1&&K[1]instanceof H){B=K[1];}}else if(K[0]instanceof H){B=K[0];}if(B){B.removeAllItems();B.destroy();}}i.removeAllItems();i.destroy();}this.removeAllFields();for(M=0;M<D.length;M++){N=D[M];k.call(this,N);this.addField(N);}if(O){if(O==this._oLabel){this.setAggregation("_label",O,true);}else{this.setAggregation("label",O);}}}this._bHorizontalLayoutUsed=U;};
function j(i){var B=i.getLayoutData();if(B){if(B.getStyleClass&&!B.getStyleClass()){B.setStyleClass("sapUiCompGroupElementHBoxPadding");}}else{B=new sap.m.FlexItemData({styleClass:"sapUiCompGroupElementHBoxPadding"});B._bCreatedByGroupElement=true;i.setLayoutData(B);}}
function k(i){var B=i.getLayoutData();if(B){if(B._bCreatedByGroupElement){B.destroy();}else if(B.getStyleClass&&B.getStyleClass()=="sapUiCompGroupElementHBoxPadding"){B.setStyleClass();}}}
function m(i,B,D){if(!d._myVBox){d._myVBox=V.extend("SmartFormVBox",{metadata:{interfaces:["sap.ui.core.IFormContent"]},enhanceAccessibilityState:o,renderer:"sap.m.VBoxRenderer"});}this._bMoveLabelToVBox=true;var I=i.slice(0);if(B){I.splice(0,0,B);}var J=new d._myVBox(this.getId()+"--VBox",{"items":I});this._bMoveLabelToVBox=false;J.addStyleClass("sapUiCompGroupElementVBox");J._oGroupElement=this;if(D&&(D instanceof G||D instanceof c||D.getMetadata().getName()=="sap.ui.layout.ResponsiveFlowLayoutData")){J.setLayoutData(D.clone());}p.call(this,J);return J;}
function n(i){var B=new H(this.getId()+"--HBox",{"items":i});B._oGroupElement=this;B.enhanceAccessibilityState=o;return B;}
function o(i,B){var D=this._oGroupElement._getLabel();if(D&&D!=i&&!(i instanceof H)){var I=B["labelledby"];if(!I){I=D.getId();}else{var J=I.split(" ");if(q.inArray(D.getId(),J)<0){J.splice(0,0,D.getId());I=J.join(" ");}}B["labelledby"]=I;}return B;}
d.prototype._updateGridDataSpan=function(){if(!this.getUseHorizontalLayout()){return;}var i=this.getFields();if(i.length>0){var B=i[0];if(B instanceof V){p.call(this,B);}}};
function p(B){var D=this.getParent();if(!D||!D.addGroupElement){return;}var I=D.getParent();while(I&&!I.addGroup&&I.getParent){I=I.getParent();}if(!I){return;}var J="";var K=I.getLayout();if(K){J=K.getGridDataSpan();}var M=B.getLayoutData();var N;if(M){if(!(M instanceof G)&&!(M instanceof c)&&J){N=new G({span:J});N._bFromGroupElement=true;var O=new c({multipleLayoutData:[M,N]});O._bFromGroupElement=true;B.setLayoutData(O);}else if(M instanceof G){if(M._bFromGroupElement){if(!J){M.destroy();}else{M.setSpan(J);}}}else if(M instanceof c){var P=false;M.getMultipleLayoutData().forEach(function(M){if(M instanceof G){P=true;if(M._bFromGroupElement){if(!J){M.destroy();}else{M.setSpan(J);}}}});if(!P&&J){N=new G({span:J});N._bFromGroupElement=true;M.addMultipleLayoutData(N);}if(M._bFromGroupElement&&M.getMultipleLayoutData().length==1){N=M.getMultipleLayoutData()[0];B.setLayoutData(N);M.destroy();}}}else if(J){N=new G({span:J});N._bFromGroupElement=true;B.setLayoutData(N);}var Q=this.getElements();for(var i=0;i<Q.length;i++){var R=Q[i];if(R&&R.setControlContext){if(J){R.setControlContext(C.SmartFormGrid);}else{R.setControlContext(C.Form);}}}}
d.prototype._setLinebreak=function(B,D,I,J){if(!this.getUseHorizontalLayout()){return;}var K=this.getFields();if(K.length>0){var M=K[0];if(!(M instanceof V)){return;}var N=M.getLayoutData();if(N){if(N instanceof c){var O=N.getMultipleLayoutData();for(var i=0;i<O.length;i++){N=O[i];if(N instanceof G){N.setLinebreakXL(B);N.setLinebreakL(D);N.setLinebreakM(I);N.setLinebreakS(J);}}}else{N.setLinebreakXL(B);N.setLinebreakL(D);N.setLinebreakM(I);N.setLinebreakS(J);}}}};
d.prototype.setVisible=function(i){var B,D=this.getVisible();this._visibilityDerived=false;F.prototype.setVisible.apply(this,arguments);if(i){this._updateFormElementVisibility();}B=this.getVisible();if(!i||B){if(D!=B){this.fireVisibleChanged({visible:B});}}return this;};
d.prototype.setUseHorizontalLayout=function(i){var O=this.getUseHorizontalLayout();if(O==i){return this;}this.setProperty("useHorizontalLayout",i);this._updateLayout();return this;};
d.prototype.setHorizontalLayoutGroupElementMinWidth=function(i){var B=this.getHorizontalLayoutGroupElementMinWidth();if(B==i){return this;}q.sap.log.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);this.setProperty("horizontalLayoutGroupElementMinWidth",i);this._updateLayout();return this;};
d.prototype.getFormElement=function(){return this;};
d.prototype.addElement=function(i){if(!i){return this;}i=this.validateAggregation("elements",i,true);s.call(this,i);var B;if(this._oLabel&&this._oLabel._bCreatedByGroupElement&&this._oLabel._sSmartFieldId){B=this._oLabel._sSmartFieldId;}if(this.getUseHorizontalLayout()){r.call(this,i,undefined,true);}else{this.addField(i);}if(B&&B!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(B);}this.updateLabelOfFormElement();return this;};
d.prototype.insertElement=function(i,I){if(!i){return this;}i=this.validateAggregation("elements",i,true);s.call(this,i);var B;if(this._oLabel&&this._oLabel._bCreatedByGroupElement&&this._oLabel._sSmartFieldId){B=this._oLabel._sSmartFieldId;}if(this.getUseHorizontalLayout()){r.call(this,i,I,false);}else{this.insertField(i,I);}if(B&&B!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(B);}this.updateLabelOfFormElement();return this;};
d.prototype.getElements=function(){var i;var B;if(this.getUseHorizontalLayout()){i=this.getFields();B=this._extractFields(i,true);}else{B=this.getFields();}return B;};
d.prototype.indexOfElement=function(B){var I=-1;if(this.getUseHorizontalLayout()){var D=this.getElements();for(var i=0;i<D.length;i++){if(B==D[i]){I=i;break;}}}else{I=this.indexOfField(B);}return I;};
d.prototype.removeElement=function(i){var R;var B;if(this._oLabel&&this._oLabel._bCreatedByGroupElement&&this._oLabel._sSmartFieldId){B=this._oLabel._sSmartFieldId;}if(this.getUseHorizontalLayout()){R=w.call(this,i,false);}else{R=this.removeField(i);}if(R){x.call(this,R);}if(B&&B!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(B);}this.updateLabelOfFormElement();return R;};
d.prototype.removeAllElements=function(){var R;if(this.getUseHorizontalLayout()){R=w.call(this,undefined,true);}else{R=this.removeAllFields();}if(R&&Array.isArray(R)){for(var i=0;i<R.length;i++){x.call(this,R[i]);}}this.updateLabelOfFormElement();return R;};
d.prototype.destroyElements=function(){if(this.getUseHorizontalLayout()){var i=this.getFields();if(i.length>0){var B=this._getLabel();if(B){i[0].removeItem(B);if(B==this._oLabel){this.setAggregation("_label",B,true);}else{this.setAggregation("label",B);}}this.destroyFields();}}else{this.destroyFields();}this.updateLabelOfFormElement();return this;};
function r(i,I,B){var D=this._getLabel();var J=this.getFields();var K;var M;var N;if(J.length>0){K=J[0];}else{N=[i];var O=i.getLayoutData();K=m.call(this,N,D,O);this.addField(K);if(D){h.call(this);}return;}if(!(K instanceof V)){return;}N=K.getItems();if(D){if(N.length>1){M=N[1];}}else if(N.length>0){M=N[0];}if(M instanceof H){N=M.getItems();if((B||I>0)&&N.length>0){j.call(this,i);}if(B){M.addItem(i);}else{if(I==0&&N.length>0){j.call(this,N[0]);}M.insertItem(i,I);}}else{var P=M;N=[];if(P){K.removeItem(P);if(B||I>0){N.push(P);N.push(i);j.call(this,i);}else{N.push(i);N.push(P);j.call(this,P);}M=n.call(this,N);K.addItem(M);}else{K.addItem(i);}if(D){h.call(this);}}}
function s(i){if(i.getEditable){if(!i.getEditable()){i.data("editable",false);}}if(i.attachVisibleChanged){i.attachVisibleChanged(this._updateFormElementVisibility,this);}if(i.attachInnerControlsCreated){i.attachInnerControlsCreated(this._updateFormElementLabel,this);}if(i.setControlContext){i.setControlContext(C.Form);}if(i.getMetadata().getProperty("mandatory")){i.attachEvent("_change",v,this);}t.call(this,i);}
function t(B){if(B instanceof a){var D=this.getCustomData();for(var i=0;i<D.length;i++){u.call(this,B,D[i]);}}}
function u(i,B){if(i instanceof a&&sap.ui.comp.smartform.inheritCostomDataToFields(B)){var N=B.clone();N._bFromGroupElement=true;N._sOriginalId=B.getId();i.addCustomData(N);}}
function v(i){if(i.getParameter("name")=="mandatory"){var B=this._getLabel();if(B){B.invalidate();}}}
function w(B,D){var I=this._getLabel();var J=this.getFields();var K;var M;var N;var R;var O=false;var P;if(J.length>0){K=J[0];}if(!(K instanceof V)){return null;}N=K.getItems();if(I){if(N.length>1){M=N[1];}}else if(N.length>0){M=N[0];}if(M instanceof H){if(D){R=M.removeAllItems();O=true;}else{R=M.removeItem(B);N=M.getItems();if(N.length>0){k.call(this,N[0]);if(N.length==1){P=N[0];M.removeAllItems();K.removeItem(M);M.destroy();K.addItem(P);}}}}else{if(D){R=K.removeAllItems();}else{R=K.removeItem(B);}if(R){O=true;}}if(O){if(I){K.removeItem(I);if(I==this._oLabel){this.setAggregation("_label",I,true);}else{this.setAggregation("label",I);}}this.removeField(K);K.destroy();}if(R){if(Array.isArray(R)){for(var i=0;i<R.length;i++){P=R[i];k.call(this,P);}}else{k.call(this,R);}}return R;}
function x(i){if(i.detachVisibleChanged){i.detachVisibleChanged(this._updateFormElementVisibility,this);}if(i.detachInnerControlsCreated){i.detachInnerControlsCreated(this._updateFormElementLabel,this);}if(i.setControlContext){i.setControlContext(C.None);}if(i.getMetadata().getProperty("mandatory")){i.detachEvent("_change",v,this);}z.call(this,i);y.call(this,i,this.getLabelText());}
function y(i,B){if(i._oTextLabelSetByGroupElement){if(i.getTextLabel()==B){i.setTextLabel(i._oTextLabelSetByGroupElement.oldText);}delete i._oTextLabelSetByGroupElement;}}
function z(B,O){if(B instanceof a){var D=B.getCustomData();for(var i=0;i<D.length;i++){var I=D[i];if(I._bFromGroupElement&&(!O||O==I._sOriginalId)){B.removeCustomData(I);I.destroy();}}}}
d.prototype._updateFormElementLabel=function(i){var R=this._getFieldRelevantForLabel();var B=this._getLabel();var D=i.oSource;var I=i.getParameters();if(B instanceof S&&D&&I&&D===R){B.updateLabelFor(I);}};
d.prototype.addCustomData=function(B){if(!B){return this;}F.prototype.addCustomData.apply(this,arguments);var D=this.getElements();for(var i=0;i<D.length;i++){u.call(this,D[i],B);}return this;};
d.prototype.insertCustomData=function(B,I){if(!B){return this;}F.prototype.insertCustomData.apply(this,arguments);var D=this.getElements();for(var i=0;i<D.length;i++){u.call(this,D[i],B);}return this;};
d.prototype.removeCustomData=function(B){var D=F.prototype.removeCustomData.apply(this,arguments);if(D){var I=this.getElements();for(var i=0;i<I.length;i++){z.call(this,I[i],D.getId());}}return D;};
d.prototype.removeAllCustomData=function(){var B=F.prototype.removeAllCustomData.apply(this,arguments);if(B.length>0){var D=this.getElements();for(var i=0;i<D.length;i++){z.call(this,D[i]);}}return B;};
d.prototype.destroyCustomData=function(){F.prototype.destroyCustomData.apply(this,arguments);var B=this.getElements();for(var i=0;i<B.length;i++){z.call(this,B[i]);}return this;};
d.prototype.getVisibleBasedOnElements=function(){var i=true;var B=this.getElements();if(B&&B.length>0){i=B.some(function(D){return D.getVisible();});}return i;};
function A(){var T=this.getTooltip();if(!T||typeof T==="string"||T instanceof String){return T;}else{return T.getText();}}
d.prototype.clone=function(I,B){var D=this.removeAllElements();var J=F.prototype.clone.apply(this,arguments);for(var i=0;i<D.length;i++){var K=D[i];var M=K.clone(I,B);this.addElement(K);J.addElement(M);}return J;};
return d;},true);
sap.ui.predefine('sap/ui/comp/smartform/Layout',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element'],function(q,l,E){"use strict";
var L=E.extend("sap.ui.comp.smartform.Layout",{
metadata:{library:"sap.ui.comp",properties:{labelSpanXL:{type:"int",group:"Misc",defaultValue:null},labelSpanL:{type:"int",group:"Misc",defaultValue:null},labelSpanM:{type:"int",group:"Misc",defaultValue:null},labelSpanS:{type:"int",group:"Misc",defaultValue:null},emptySpanXL:{type:"int",group:"Misc",defaultValue:null},emptySpanL:{type:"int",group:"Misc",defaultValue:null},emptySpanM:{type:"int",group:"Misc",defaultValue:null},emptySpanS:{type:"int",group:"Misc",defaultValue:null},columnsXL:{type:"int",group:"Misc",defaultValue:null},columnsL:{type:"int",group:"Misc",defaultValue:null},columnsM:{type:"int",group:"Misc",defaultValue:null},singleGroupFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:null},breakpointL:{type:"int",group:"Misc",defaultValue:null},breakpointM:{type:"int",group:"Misc",defaultValue:null},gridDataSpan:{type:"sap.ui.layout.GridSpan",group:"Misc",defaultValue:""}}},
_oSpan:{XL:0,L:0,M:0,S:0}
});
L.prototype.setGridDataSpan=function(g){var r=[];var P=/XL([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.XL=parseInt(r[1],10);}else{this._oSpan.XL=0;}P=/\bL([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.L=parseInt(r[1],10);if(!this._oSpan.XL){this._oSpan.XL=this._oSpan.L;}}P=/M([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.M=parseInt(r[1],10);}P=/S([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.S=parseInt(r[1],10);}this.setProperty("gridDataSpan",g);return this;};
L.prototype._getGridDataSpanNumbers=function(){return this._oSpan;};
return L;},true);
sap.ui.predefine('sap/ui/comp/smartform/SmartForm.designtime',[],function(){"use strict";return{aggregations:{groups:{propagateRelevantContainer:true,childNames:{singular:"GROUP_CONTROL_NAME",plural:"GROUP_CONTROL_NAME_PLURAL"},actions:{move:"moveGroups",createContainer:{changeType:"addGroup",isEnabled:true,getCreatedContainerId:function(n){return n;}}}}},name:"{name}",description:"{description}",properties:{title:{ignore:false},useHorizontalLayout:{ignore:false},horizontalLayoutGroupElementMinWidth:{ignore:true},checkButton:{ignore:false},entityType:{ignore:true},expandable:{ignore:false},expanded:{ignore:false},editTogglable:{ignore:false},editable:{ignore:false},ignoredFields:{ignore:true},flexEnabled:{ignore:true}}};},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RemoveGroup',['jquery.sap.global','sap/ui/fl/changeHandler/Base'],function(q,B){"use strict";var R={};
R.applyChange=function(c,g,p){var m=p.modifier;var v=p.view;var f=m.getParent(g);if(m.getControlType(f)==="sap.ui.layout.form.Form"){m.removeAggregation(f,"formContainers",g,v);}else{m.removeAggregation(f,"groups",g,v);}return true;};
R.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartlist/SmartList',['jquery.sap.global','sap/ui/comp/library','sap/m/VBox','sap/m/VBoxRenderer','sap/m/List','sap/m/Tree','sap/m/Title','sap/m/OverflowToolbar','sap/m/ToolbarDesign','sap/m/OverflowToolbarButton','sap/ui/comp/odata/ODataModelUtil','sap/ui/core/format/NumberFormat'],function(q,l,V,a,L,T,b,O,c,d,e,N){"use strict";
var S=V.extend("sap.ui.comp.smartlist.SmartList",{
metadata:{library:"sap.ui.comp",properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},selectFields:{type:"string",group:"Misc",defaultValue:null},expandFields:{type:"string",group:"Misc",defaultValue:null},showRowCount:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},listBindingPath:{type:"string",group:"Misc",defaultValue:null},listType:{type:"sap.ui.comp.smartlist.ListType",group:"Misc",defaultValue:null},showFullScreenButton:{type:"boolean",group:"Misc",defaultValue:false}},associations:{smartFilter:{type:"sap.ui.core.Control"}},aggregations:{listItemTemplate:{type:"sap.m.ListItemBase",multiple:false,bindable:false}},events:{initialise:{},beforeRebindList:{},dataReceived:{}}},
renderer:a.render,
constructor:function(){V.apply(this,arguments);this.addStyleClass("sapUiCompSmartList");this._createToolbar();this._createList();this.attachModelContextChange(this._initialiseMetadata,this);}
});
S.prototype._sAggregation="items";
S.prototype.setHeader=function(t){this.setProperty("header",t,true);this._refreshHeaderText();return this;};
S.prototype.setShowRowCount=function(s){this.setProperty("showRowCount",s,true);this._refreshHeaderText();return this;};
S.prototype.setShowFullScreenButton=function(s){this.setProperty("showFullScreenButton",s,true);if(this._oFullScreenButton){this._oFullScreenButton.setVisible(this.getShowFullScreenButton());}return this;};
S.prototype.setEntitySet=function(E){this.setProperty("entitySet",E);this._initialiseMetadata();return this;};
S.prototype._refreshHeaderText=function(){if(!this._headerText){return;}var t=this.getHeader();var f=!!t;this._headerText.setVisible(f);if(f&&this.getShowRowCount()){var r=parseInt(this._getRowCount(),10);if(!this._oNumberFormatter){this._oNumberFormatter=N.getFloatInstance();}var v=this._oNumberFormatter.format(r);t+=" ("+v+")";}this._headerText.setText(t);};
S.prototype._addFullScreenButton=function(){if(this._oFullScreenButton){this._oToolbar.removeContent(this._oFullScreenButton);}if(this.getShowFullScreenButton()){if(!this._oFullScreenButton){this._oFullScreenButton=new d(this.getId()+"-btnFullScreen",{press:function(){this._toggleFullScreen(!this.bFullScreen);}.bind(this)});}this._toggleFullScreen(this.bFullScreen,true);this._oToolbar.addContent(this._oFullScreenButton);}};
S.prototype._createToolbar=function(){var C,i,t;if(!this._oToolbar){C=this.getItems();i=C?C.length:0;while(i--){t=C[i];if(t instanceof sap.m.Toolbar){break;}t=null;}if(t){this._oToolbar=t;}else{this._oToolbar=new O(this.getId()+"-toolbar",{design:c.Transparent});this.insertItem(this._oToolbar,0);}if(!this._oToolbar.getLayoutData()){this._oToolbar.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));}}};
S.prototype._toggleFullScreen=function(v,f){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp"),t;if(!this._oFullScreenButton||(v===this.bFullScreen&&!f)){return;}this.bFullScreen=v;if(!this._oFullScreenUtil){this._oFullScreenUtil=sap.ui.requireSync("sap/ui/comp/util/FullScreenUtil");}this._oFullScreenUtil.toggleFullScreen(this,this.bFullScreen,this._oFullScreenButton);t=this.bFullScreen?r.getText("CHART_MINIMIZEBTN_TOOLTIP"):r.getText("CHART_MAXIMIZEBTN_TOOLTIP");this._oFullScreenButton.setTooltip(t);this._oFullScreenButton.setText(t);this._oFullScreenButton.setIcon(this.bFullScreen?"sap-icon://exit-full-screen":"sap-icon://full-screen");};
S.prototype._createToolbarContent=function(){if(!this._oToolbar){this._createToolbar();}this._addHeaderToToolbar();this._addSpacerToToolbar();this._addFullScreenButton();};
S.prototype._addHeaderToToolbar=function(){if(this._headerText){this._oToolbar.removeContent(this._headerText);}if(!this._headerText){this._headerText=new b(this.getId()+"-header");this._headerText.addStyleClass("sapMH4Style");this._headerText.addStyleClass("sapUiCompSmartTableHeader");}this._refreshHeaderText();this._oToolbar.insertContent(this._headerText,0);};
S.prototype._addSpacerToToolbar=function(){var f=false,I=this._oToolbar.getContent(),i,g;if(I){g=I.length;i=0;for(i;i<g;i++){if(I[i]instanceof sap.m.ToolbarSpacer){f=true;break;}}}if(!f){this._oToolbar.addContent(new sap.m.ToolbarSpacer(this.getId()+"-toolbarSpacer"));}};
S.prototype._getRowCount=function(){var r=this._getRowBinding();if(!r){return 0;}var R=0;if(r.getTotalSize){R=r.getTotalSize();}else{R=r.getLength();}if(R<0||R==="0"){R=0;}return R;};
S.prototype._getRowBinding=function(){if(this._oList){return this._oList.getBinding(this._sAggregation);}};
S.prototype._initialiseMetadata=function(){if(!this.bIsInitialised){e.handleModelInit(this,this._onMetadataInitialised);}};
S.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this.bIsInitialised){this.detachModelContextChange(this._initialiseMetadata,this);this.bIsInitialised=true;this._listenToSmartFilter();this._createToolbarContent();this._createContent();this.fireInitialise();this._checkAndTriggerBinding();}};
S.prototype._checkAndTriggerBinding=function(){if(!this._bAutoBindingTriggered){this._bAutoBindingTriggered=true;if(this.getEnableAutoBinding()){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindList();}}}};
S.prototype._listenToSmartFilter=function(){var s=null;s=this.getSmartFilter();if(typeof s==="string"){this._oSmartFilter=sap.ui.getCore().byId(s);}else{this._oSmartFilter=s;}if(this._oSmartFilter){this._oSmartFilter.attachSearch(this._reBindList,this);this._oSmartFilter.attachFilterChange(this._filterChangeEvent,this);this._oSmartFilter.attachCancel(this._cancelEvent,this);this._setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_DATA"));}};
S.prototype._filterChangeEvent=function(){if(this._isListBound()&&this._oSmartFilter&&!this._oSmartFilter.getLiveMode()){this._showOverlay(true);}};
S.prototype._cancelEvent=function(){if(this._oSmartFilter&&!this._oSmartFilter.getLiveMode()){this._showOverlay(false);}};
S.prototype._showOverlay=function(s){};
S.prototype.rebindList=function(f){this._reBindList(null,f);};
S.prototype._reBindList=function(E,f){var o,s,g,F,h,p={},B={preventListBind:false};if(this._oSmartFilter){g=this._oSmartFilter.getFilters();p=this._oSmartFilter.getParameters()||{};}F=g;if(!h){h=[];}p["select"]=this.getSelectFields();p["expand"]=this.getExpandFields();p["useBatchRequests"]=true;B.filters=F;B.sorter=h;B.parameters=p;B.length=undefined;B.startIndex=undefined;this.fireBeforeRebindList({bindingParams:B});if(!B.preventListBind){h=B.sorter;F=B.filters;p=B.parameters;s=this.getListBindingPath()||("/"+this.getEntitySet());this._bDataLoadPending=true;this._bIgnoreChange=false;if(!f){o=this._oList.getBinding(this._sAggregation);if(o&&o.mParameters){f=!(q.sap.equal(p,o.mParameters,true)&&q.sap.equal(p.custom,o.mParameters.custom)&&!B.length&&!B.startIndex&&s===o.getPath());}}if(!o||!this._bIsListBound||f){this._oList.bindItems({path:s,filters:F,sorter:h,parameters:p,length:B.length,startIndex:B.startIndex,template:this._oTemplate,events:{dataRequested:function(){this._bIgnoreChange=true;}.bind(this),dataReceived:function(E){this._bIgnoreChange=false;this._onDataLoadComplete(E,true);this.fireDataReceived(E);}.bind(this),change:function(E){if(this._bIgnoreChange){return;}var r,i=false;r=(E&&E.getParameter)?E.getParameter("reason"):undefined;if(!r||r==="filter"||r==="context"){i=true;}if(r==="change"||i){this._onDataLoadComplete(E,i);}}.bind(this)}});this._bIsListBound=true;}else{o.sort(h);o.filter(F,"Application");}this._showOverlay(false);}};
S.prototype._onDataLoadComplete=function(E,f){if(this._bDataLoadPending||f){this._bDataLoadPending=false;if(!this._bNoDataUpdated&&!this._getRowCount()){this._bNoDataUpdated=true;this._setNoDataText();}this._refreshHeaderText();}};
S.prototype._isListBound=function(){if(this._bIsListBound){return true;}if(this._oList){return this._oList.isBound(this._sAggregation);}return false;};
S.prototype._setNoDataText=function(o){if(this._oList){if(!o){o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_RESULTS");}this._oList.setNoDataText(o);}};
S.prototype._createContent=function(){if(!this._oTemplate){this._oTemplate=this.getListItemTemplate();}};
S.prototype._createList=function(){var C=this.getItems(),i=C?C.length:0,o,I;while(i--){o=C[i];if(o instanceof L||o instanceof T){break;}o=null;}if(o){this._oList=o;if(o instanceof T){this._isTree=true;}else{this._isList=true;}this._oTemplate=(o.getItems()&&o.getItems().length>0)?o.getItems()[0]:this.getListItemTemplate();o.removeAllItems();}else{I=this.getId()+"-ui5list";if(this.getListType()==="Tree"){this._oList=new T(I);this._isTree=true;}else{this._oList=new L(I,{growing:true,growingScrollToLoad:true});this._isList=true;}this.insertItem(this._oList,2);}if(!this._oList.getLayoutData()){this._oList.setLayoutData(new sap.m.FlexItemData({growFactor:1,baseSize:"auto"}));}this._oList.addAriaLabelledBy(this.getId()+"-header");};
S.prototype.getList=function(){return this._oList;};
S.prototype.isInitialised=function(){return!!this.bIsInitialised;};
S.prototype.exit=function(){if(this._oSmartFilter){this._oSmartFilter.detachSearch(this._reBindList,this);this._oSmartFilter.detachFilterChange(this._filterChangeEvent,this);this._oSmartFilter.detachCancel(this._cancelEvent,this);this._oSmartFilter=null;}if(this._oFullScreenUtil){this._oFullScreenUtil.cleanUpFullScreen(this);this._oFullScreenUtil=null;}if(!this._bIsListBound&&this._oTemplate){this._oTemplate.destroy();}this._oTemplate=null;this._oToolbar=null;this._headerText=null;this._oFullScreenButton=null;this._oNumberFormatter=null;this._oList=null;};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartAreaMicroChart.designtime',[],function(){"use strict";return{annotations:{chart:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Chart",target:["EntityType"],defaultValue:null,since:"1.38.0"},chartDefinitionType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartDefinitionType",target:["EntityType"],whiteList:{properties:["Title","Description","ChartType","Measures","MeasureAttributes","Dimensions"]},defaultValue:null,since:"1.38.0"},chartType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartType",target:["Property"],whiteList:{values:["Area","Line"]},defaultValue:null,since:"1.38.0"},dataPoint:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPoint",target:["EntityType"],defaultValue:null,since:"1.38.0"},dataPointType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPointType",target:["EntityType"],whiteList:{properties:["Value","TargetValue","CriticalityCalculation"]},defaultValue:null,since:"1.38.0"},criticalityCalculationType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"CriticalityCalculationType",target:["Property"],whiteList:{properties:["ImprovementDirection","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"]},defaultValue:null,since:"1.38.0"},currency:{namespace:"Org.OData.Measures.V1",annotation:"ISOCurrency",target:["Property"],defaultValue:null,since:"1.38.0"},unit:{namespace:"Org.OData.Measures.V1",annotation:"Unit",target:["Property"],defaultValue:null,since:"1.38.0"},isCalendarYear:{namespace:"com.sap.vocabularies.Common.v1",annotation:"IsCalendarYear",target:["Property"],defaultValue:null,since:"1.44.0"},isCalendarYearMonth:{namespace:"com.sap.vocabularies.Common.v1",annotation:"IsCalendarYearMonth",target:["Property"],defaultValue:null,since:"1.44.0"},isCalendarDate:{namespace:"com.sap.vocabularies.Common.v1",annotation:"IsCalendarDate",target:["Property"],defaultValue:null,since:"1.44.0"}},customData:{chartQualifier:{type:"string",defaultValue:null,group:["Appearance"],since:"1.42.0"}}};},false);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartAreaMicroChart',['jquery.sap.global','sap/ui/comp/library','sap/suite/ui/microchart/library','sap/ui/core/Control','sap/m/ValueColor','sap/ui/model/odata/CountMode','sap/ui/comp/smartmicrochart/SmartMicroChartCommons','sap/ui/core/format/DateFormat'],function(q,C,M,a,V,b,S,D){"use strict";
var c=a.extend("sap.ui.comp.smartmicrochart.SmartAreaMicroChart",{metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},chartType:{type:"string",group:"Misc",defaultValue:null},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:true},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"164px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"74px"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_chart:{type:"sap.suite.ui.microchart.AreaMicroChart",multiple:false,visibility:"hidden"},_chartTexts:{type:"sap.m.ListBase",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false}},events:{initialize:{}}}});
c._CHART_TYPE=["Area","Line"];
c.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Area",true);this.setAggregation("_chart",new M.AreaMicroChart(),true);};
c.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setProperty("width",this.getWidth(),true);o.setProperty("height",this.getHeight(),true);o.setProperty("isResponsive",this.getIsResponsive(),true);M._passParentContextToChild(this,o);};
c.prototype.destroy=function(){S._cleanup.call(this);a.prototype.destroy.apply(this,arguments);};
c.prototype.setEntitySet=function(e){if(this.getProperty("entitySet")!==e){this.setProperty("entitySet",e,true);S._initializeMetadata.call(this);}return this;};
c.prototype.setShowLabel=function(s){if(this.getShowLabel()!==s){this.setProperty("showLabel",s,true);this.getAggregation("_chart").setProperty("showLabel",s,true);this.invalidate();}return this;};
c.prototype.setEnableAutoBinding=function(){return this.setProperty("enableAutoBinding",true,true);};
c.prototype.setChartType=function(){return this;};
c.prototype.propagateProperties=function(){if(a.prototype.propagateProperties){a.prototype.propagateProperties.apply(this,arguments);}S._initializeMetadata.call(this);};
c.prototype._getBindingPath=function(){if(this.getChartBindingPath()){return this.getChartBindingPath();}else if(this.getEntitySet()){return'/'+this.getEntitySet();}else{return"";}};
c.prototype.bindElement=function(){return this;};
c.prototype._createAndBindInnerChart=function(){this._createChartLabels();this._createChartItem("chart",this._oDataPointAnnotations.Value.Path);this._createChartItem("target",this._oDataPointAnnotations.TargetValue.Path);this._buildThreshold();};
c.prototype._buildThreshold=function(){var o=this._oDataPointAnnotations.CriticalityCalculation;if(S._hasMember(o,"ImprovementDirection.EnumMember")){switch(o.ImprovementDirection.EnumMember){case S._MINIMIZE:this._createChartItem("minThreshold",o.ToleranceRangeHighValue.Path,V.Good);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);break;case S._MAXIMIZE:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.ToleranceRangeLowValue.Path,V.Good);break;case S._TARGET:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);this._createChartItem("innerMinThreshold",o.ToleranceRangeLowValue.Path,V.Good);this._createChartItem("innerMaxThreshold",o.ToleranceRangeHighValue.Path,V.Good);break;default:break;}}};
c.prototype._createChartLabels=function(){var l,m=this._getLabelsMap();for(var k in m){l=new M.AreaMicroChartLabel();this.getAggregation("_chart").setAggregation(m[k],l,true);}};
c.prototype._formatDimension=function(v){if(typeof v==="string"){var A=S._getPropertyAnnotation.call(this,this._oChartViewMetadata.dimensionFields[0]),p=S._getSemanticsPattern.call(this,A);if(p){v=D.getInstance({pattern:p}).parse(v);}}if(v instanceof Date){return parseFloat(v.getTime());}else if(!isNaN(v)){return parseFloat(v);}else{this.getAggregation("_chart").enableXIndexing(true);return 0;}};
c.prototype._createChartItem=function(d,p,e){var P,i;P=new M.AreaMicroChartPoint({x:{path:this._oChartViewMetadata.dimensionFields[0],formatter:this._formatDimension.bind(this)},y:{path:p,type:"sap.ui.model.odata.type.Decimal"}});i=new M.AreaMicroChartItem({points:{path:this._getBindingPath(),template:P,parameters:{countMode:b.None},events:{change:this._onBindingDataChange.bind(this)}},color:e});this.getAggregation("_chart").setAggregation(d,i,true);};
c.prototype._onBindingDataChange=function(){var p=this.getAggregation("_chart").getAggregation("chart").getBinding("points");this._updateAssociations(p);this._updateChartLabels(p);};
c.prototype._updateAssociations=function(p){var o=p.getContexts(0,1)[0],d=o&&o.getObject();S._updateAssociations.call(this,d);};
c.prototype._updateChartLabels=function(p){var o,l,f,L,F,d;o=p.getContexts();l=o.length;if(l>0){f=o[0];L=o[l-1];F=f&&f.getObject();d=L&&L.getObject();S._updateChartLabels.call(this,F,"first");S._updateChartLabels.call(this,d,"last");}};
c.prototype._getSupportedChartTypes=function(){return c._CHART_TYPE;};
c.prototype._getLabelsMap=function(){return{"leftTop":"firstYLabel","rightTop":"lastYLabel","leftBottom":"firstXLabel","rightBottom":"lastXLabel"};};
return c;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartBulletMicroChart.designtime',[],function(){"use strict";return{annotations:{chart:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Chart",target:["EntityType"],defaultValue:null,since:"1.38.0"},chartDefinitionType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartDefinitionType",target:["EntityType"],whiteList:{properties:["Title","Description","ChartType","Measures","MeasureAttributes"]},defaultValue:null,since:"1.38.0"},chartType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartType",target:["Property"],whiteList:{values:["Bullet"]},defaultValue:null,since:"1.38.0"},dataPoint:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPoint",target:["EntityType"],defaultValue:null,since:"1.38.0"},dataPointType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPointType",target:["EntityType"],whiteList:{properties:["Title","Value","TargetValue","ForecastValue","MinimumValue","MaximumValue","Criticality","CriticalityCalculation"]},defaultValue:null,since:"1.38.0"},criticalityCalculationType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"CriticalityCalculationType",target:["Property"],whiteList:{properties:["ImprovementDirection","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"]},defaultValue:null,since:"1.38.0"},currency:{namespace:"Org.OData.Measures.V1",annotation:"ISOCurrency",target:["Property"],defaultValue:null,since:"1.38.0"},unit:{namespace:"Org.OData.Measures.V1",annotation:"Unit",target:["Property"],defaultValue:null,since:"1.38.0"}},customData:{chartQualifier:{type:"string",defaultValue:null,group:["Appearance"],since:"1.42.0"}}};},false);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartBulletMicroChart',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Control','sap/suite/ui/microchart/library','sap/m/ValueColor','sap/ui/comp/smartmicrochart/SmartMicroChartCommons'],function(q,l,C,M,V,S){"use strict";
var a=C.extend("sap.ui.comp.smartmicrochart.SmartBulletMicroChart",{metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},chartType:{type:"string",group:"Misc",defaultValue:"Bullet"},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"164px"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_criticalityThresholds:{type:"sap.ui.core.CustomData",multiple:true,visibility:"hidden"},_chart:{type:"sap.suite.ui.microchart.BulletMicroChart",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false}},events:{initialize:{}}}});
a._CRITICAL_COLOR=V.Critical;a._ERROR_COLOR=V.Error;a._CHART_TYPE=["Bullet"];
a.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this._bBarColorSet=false;this.setProperty("chartType","Bullet",true);this.setAggregation("_chart",new M.BulletMicroChart({"showValueMarker":true}),true);};
a.prototype.setChartType=function(){return this;};
a.prototype.setEntitySet=function(e){if(this.getProperty("entitySet")!==e){this.setProperty("entitySet",e,true);S._initializeMetadata.call(this);}return this;};
a.prototype.setShowLabel=function(s){if(this.getShowLabel()!==s){this.setProperty("showLabel",s,true);var c=this.getAggregation("_chart");c.setProperty("showActualValue",s,true);c.setProperty("showTargetValue",s,true);c.setProperty("showDeltaValue",s,true);c.setProperty("showValueMarker",s,true);this.invalidate();}return this;};
a.prototype.propagateProperties=function(){if(C.prototype.propagateProperties){C.prototype.propagateProperties.apply(this,arguments);}S._initializeMetadata.call(this);};
a.prototype.onBeforeRendering=function(){var c=this.getAggregation("_chart");c.setProperty("width",this.getWidth(),true);c.setProperty("isResponsive",this.getIsResponsive(),true);M._passParentContextToChild(this,c);};
a.prototype.destroy=function(){S._cleanup.call(this);C.prototype.destroy.apply(this,arguments);};
a.prototype._createAndBindInnerChart=function(){this._bindValueProperties();this._bindActualValue();this._bindChartThresholds();S._updateAssociations.call(this);};
a.prototype._bindValueProperties=function(){var m,f,i=this.getAggregation("_chart");if(S._hasMember(this,"_oDataPointAnnotations.TargetValue.Path")){i.bindProperty("targetValue",{path:this._oDataPointAnnotations.TargetValue.Path,type:"sap.ui.model.odata.type.Decimal"});var F=S._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.TargetValue.Path);i.bindProperty("targetValueLabel",{path:this._oDataPointAnnotations.TargetValue.Path,formatter:F.format.bind(F)});}if(S._hasMember(this,"_oDataPointAnnotations.ForecastValue.Path")){i.bindProperty("forecastValue",{path:this._oDataPointAnnotations.ForecastValue.Path,type:"sap.ui.model.odata.type.Decimal"});}if(this._oDataPointAnnotations.MaximumValue){if(this._oDataPointAnnotations.MaximumValue.hasOwnProperty("Path")){i.bindProperty("maxValue",{path:this._oDataPointAnnotations.MaximumValue.Path,type:"sap.ui.model.odata.type.Decimal"});}else if(this._oDataPointAnnotations.MaximumValue.hasOwnProperty("Decimal")){m=parseFloat(this._oDataPointAnnotations.MaximumValue.Decimal);i.setMaxValue(m,true);}}if(this._oDataPointAnnotations.MinimumValue){if(this._oDataPointAnnotations.MinimumValue.hasOwnProperty("Path")){i.bindProperty("minValue",{path:this._oDataPointAnnotations.MinimumValue.Path,type:"sap.ui.model.odata.type.Decimal"});}else if(this._oDataPointAnnotations.MinimumValue.hasOwnProperty("Decimal")){f=parseFloat(this._oDataPointAnnotations.MinimumValue.Decimal);i.setMinValue(f,true);}}};
a.prototype._bindActualValue=function(){var i=this.getAggregation("_chart"),f=S._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.Value.Path);var c=new M.BulletMicroChartData({value:{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"},color:{parts:[this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path||"",this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path||""],formatter:S._getValueColor.bind(this)}});i.setAggregation("actual",c,true);i.bindProperty("actualValueLabel",{path:this._oDataPointAnnotations.Value.Path,formatter:f.format.bind(f)});};
a.prototype._bindChartThresholds=function(){var d,c;if(S._hasMember(this._oDataPointAnnotations,"CriticalityCalculation.ImprovementDirection.EnumMember")){c=this._oDataPointAnnotations.CriticalityCalculation;d=c.ImprovementDirection.EnumMember;if(d!==S._MINIMIZE&&c.DeviationRangeLowValue&&c.DeviationRangeLowValue.Path){this._bindThresholdAggregation(c.DeviationRangeLowValue.Path,a._ERROR_COLOR);}if(d!==S._MINIMIZE&&c.ToleranceRangeLowValue&&c.ToleranceRangeLowValue.Path){this._bindThresholdAggregation(c.ToleranceRangeLowValue.Path,a._CRITICAL_COLOR);}if(d!==S._MAXIMIZE&&c.ToleranceRangeHighValue&&c.ToleranceRangeHighValue.Path){this._bindThresholdAggregation(c.ToleranceRangeHighValue.Path,a._CRITICAL_COLOR);}if(d!==S._MAXIMIZE&&c.DeviationRangeHighValue&&c.DeviationRangeHighValue.Path){this._bindThresholdAggregation(c.DeviationRangeHighValue.Path,a._ERROR_COLOR);}}};
a.prototype._bindThresholdAggregation=function(p,c){var t=new M.BulletMicroChartData({value:{path:p,type:"sap.ui.model.odata.type.Decimal"},color:c});this.getAggregation("_chart").addAggregation("thresholds",t,true);};
a.prototype.setAssociation=function(A,i,s){if(C.prototype.setAssociation){C.prototype.setAssociation.apply(this,arguments);}S._updateAssociation.call(this,A);return this;};
a.prototype._getSupportedChartTypes=function(){return a._CHART_TYPE;};
return a;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChart.designtime',[],function(){"use strict";return{annotations:{chart:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Chart",target:["EntityType"],defaultValue:null,since:"1.38.0"},chartDefinitionType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartDefinitionType",target:["EntityType"],whiteList:{properties:["chartType"]},defaultValue:null,since:"1.38.0"},chartType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartType",target:["Property"],whiteList:{values:["Area","Bullet","Donut","Line"]},defaultValue:null,since:"1.38.0"}},customData:{chartQualifier:{type:"string",defaultValue:null,group:["Appearance"],since:"1.42.0"}}};},false);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChart',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Control','sap/ui/comp/providers/ChartProvider','sap/suite/ui/microchart/library','sap/ui/core/CustomData'],function(q,C,a,b,M,c){"use strict";
var S=a.extend("sap.ui.comp.smartmicrochart.SmartMicroChart",{metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"164px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"74px"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_chart:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false},freeText:{type:"sap.m.Label",group:"Misc",multiple:false}},events:{initialize:{}}}});
S.prototype.init=function(){this._bIsinitialized=false;this._bMetaModelLoadAttached=false;};
S.prototype.setChartType=function(){return this;};
S.prototype.getChartType=function(){return this.getAggregation("_chart").getChartType();};
S.prototype.propagateProperties=function(){if(a.prototype.propagateProperties){a.prototype.propagateProperties.apply(this,arguments);}this._initializeMetadata();};
S.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");if(o){if(o.getMetadata().hasProperty("height")){o.setProperty("height",this.getHeight(),true);}if(o.getMetadata().hasProperty("width")){o.setProperty("width",this.getWidth(),true);}if(o.getMetadata().hasProperty("isResponsive")){o.setProperty("isResponsive",this.getIsResponsive(),true);M._passParentContextToChild(this,o);}if(o.getMetadata().hasProperty("showLabel")){o.setProperty("showLabel",this.getShowLabel(),true);}if(o.getMetadata().hasAssociation("chartTitle")){o.setAssociation("chartTitle",this.getChartTitle(),true);}if(o.getMetadata().hasAssociation("chartDescription")){o.setAssociation("chartDescription",this.getChartDescription(),true);}if(o.getMetadata().hasAssociation("unitOfMeasure")){o.setAssociation("unitOfMeasure",this.getUnitOfMeasure(),true);}if(o.getMetadata().hasAssociation("freeText")){o.setAssociation("freeText",this.getFreeText(),true);}}};
S.prototype._initializeMetadata=function(){if(!this._bIsinitialized){var m=this.getModel();if(m&&(m.getMetadata().getName()==="sap.ui.model.odata.v2.ODataModel"||m.getMetadata().getName()==="sap.ui.model.odata.ODataModel")){if(!this._bMetaModelLoadAttached){m.getMetaModel().loaded().then(this._onMetadataInitialized.bind(this));this._bMetaModelLoadAttached=true;}}else if(m){this._onMetadataInitialized();}}};
S.prototype._createChartProvider=function(){var e=this.getEntitySet(),m=this.getModel();if(m&&e){this._oChartProvider=new b({entitySet:e,model:m,chartQualifier:this.data("chartQualifier")});}};
S.prototype._onMetadataInitialized=function(){this._bMetaModelLoadAttached=false;if(!this._bIsinitialized){this._createChartProvider();if(this._oChartProvider){this._oChartViewMetadata=this._oChartProvider.getChartViewMetadata();if(this._oChartViewMetadata){this._bIsinitialized=true;this._createInnerChart();this.invalidate();}}}};
S.prototype._createInnerChart=function(){if(!this._checkChartMetadata()){q.sap.log.error("Created annotations not valid. Please review the annotations and metadata.");return;}var s=this._oChartViewMetadata.chartType;switch(s){case"line":case"area":var t=this._oChartViewMetadata.annotation.ChartType.EnumMember.split("/").pop().toLowerCase();if(t==="area"||t==="line"){this._buildSmartAreaMicroChart();}else{q.sap.log.error("Not supported chart type used.");}break;case"bullet":this._buildSmartBulletMicroChart();break;case"donut":this._buildSmartRadialMicroChart();break;default:q.sap.log.error("Not supported chart type used.");break;}};
S.prototype._buildSmartAreaMicroChart=function(){this.setAggregation("_chart",new C.smartmicrochart.SmartAreaMicroChart({entitySet:this.getEntitySet(),chartBindingPath:this.getChartBindingPath(),enableAutoBinding:this.getEnableAutoBinding(),showLabel:this.getShowLabel(),initialize:[this._onChartInitialized,this],customData:[new c({key:"chartQualifier",value:this.data("chartQualifier")})]}),true);};
S.prototype._buildSmartBulletMicroChart=function(){this.setAggregation("_chart",new C.smartmicrochart.SmartBulletMicroChart({entitySet:this.getEntitySet(),chartBindingPath:this.getChartBindingPath(),enableAutoBinding:this.getEnableAutoBinding(),showLabel:this.getShowLabel(),initialize:[this._onChartInitialized,this],customData:[new c({key:"chartQualifier",value:this.data("chartQualifier")})]}),true);};
S.prototype._buildSmartRadialMicroChart=function(){this.setAggregation("_chart",new C.smartmicrochart.SmartRadialMicroChart({entitySet:this.getEntitySet(),chartBindingPath:this.getChartBindingPath(),enableAutoBinding:this.getEnableAutoBinding(),initialize:[this._onChartInitialized,this],customData:[new c({key:"chartQualifier",value:this.data("chartQualifier")})]}),true);};
S.prototype._onChartInitialized=function(){this.fireInitialize();};
S.prototype._checkChartMetadata=function(){if(this._oChartViewMetadata.chartType&&this._oChartViewMetadata.annotation&&this._oChartViewMetadata.annotation.ChartType&&this._oChartViewMetadata.annotation.ChartType.EnumMember&&this._oChartViewMetadata.annotation.ChartType.EnumMember.length>0){return true;}else{return false;}};
return S;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChartCommons',['jquery.sap.global','sap/ui/comp/library','sap/ui/comp/providers/ChartProvider','sap/m/ValueColor','sap/ui/core/format/NumberFormat','sap/ui/core/format/DateFormat','sap/ui/model/type/Date'],function(q,l,C,V,N,D,a){"use strict";var b={};b._MINIMIZE="com.sap.vocabularies.UI.v1.ImprovementDirectionType/Minimize";b._MAXIMIZE="com.sap.vocabularies.UI.v1.ImprovementDirectionType/Maximize";b._TARGET="com.sap.vocabularies.UI.v1.ImprovementDirectionType/Target";
b._initializeMetadata=function(){if(!this._bIsInitialized){var m=this.getModel();if(m&&(m.getMetadata().getName()==="sap.ui.model.odata.v2.ODataModel"||m.getMetadata().getName()==="sap.ui.model.odata.ODataModel")){if(!this._bMetaModelLoadAttached){m.getMetaModel().loaded().then(b._onMetadataInitialized.bind(this));this._bMetaModelLoadAttached=true;}}else if(m){b._onMetadataInitialized.call(this);}}};
b._onMetadataInitialized=function(){this._bMetaModelLoadAttached=false;if(this._bIsInitialized){return;}b._createChartProvider.call(this);this._oChartViewMetadata=this._oChartProvider.getChartViewMetadata();this._oDataPointMetadata=this._oChartProvider.getChartDataPointMetadata();this._bIsInitialized=true;this.fireInitialize();if(this.getEnableAutoBinding()){if(this.getChartBindingPath()){this.bindElement(this.getChartBindingPath());}else{q.sap.log.error("The property chartBindingPath needs to be set in order for property enableAutoBinding to be applied.");}}if(b._checkChartMetadata.call(this)){var Q=b._getDataPointQualifier.call(this);if(Q){this._oDataPointAnnotations=this._oDataPointMetadata.additionalAnnotations[Q];}else{this._oDataPointAnnotations=this._oDataPointMetadata.primaryAnnotation;}if(b._checkDataPointAnnotation(this._oDataPointAnnotations)){this._createAndBindInnerChart();}}else{q.sap.log.error("Created annotations not valid. Please review the annotations and metadata.");}};
b._cleanup=function(){if(this._oDateType){this._oDateType.destroy();this._oDateType=null;}};
b._createChartProvider=function(){var m,e;e=this.getEntitySet();m=this.getModel();if(m&&e){this._oChartProvider=new C({entitySet:e,model:m,chartQualifier:this.data("chartQualifier")});}else{q.sap.log.error("Property entitySet is not set or no model has been attached to the control.");}};
b._checkChartMetadata=function(){if(q.isEmptyObject(this._oChartViewMetadata)&&q.isEmptyObject(this._oDataPointMetadata)){q.sap.log.error("The Chart or DataPoint annotation is empty.");return false;}if(!this._oChartViewMetadata.fields||this._oChartViewMetadata.fields.length===0){q.sap.log.error("No fields exist in the metadata.");return false;}if(b._hasMember(this,"_oChartViewMetadata.annotation.ChartType")){return b._checkChartType.call(this);}else{q.sap.log.error("The Chart annotation is invalid.");return false;}};
b._checkChartType=function(){var t=this._getSupportedChartTypes();for(var i=0;i<t.length;i++){if(this._oChartViewMetadata.annotation.ChartType.EnumMember==="com.sap.vocabularies.UI.v1.ChartType/"+t[i]){return true;}}q.sap.log.error("The ChartType property in the Chart annotation is not part of the list of valid types: \""+t.toString()+"\".");return false;};
b._getDataPointQualifier=function(){var m;if(!b._hasMember(this,"_oChartViewMetadata.annotation.MeasureAttributes.length")||!this._oChartViewMetadata.annotation.MeasureAttributes.length){return"";}m=this._oChartViewMetadata.annotation.MeasureAttributes[0];if(b._hasMember(m,"DataPoint.AnnotationPath")){return(m.DataPoint.AnnotationPath.match(/\#([^\#]*)$/)||[])[1]||"";}};
b._checkDataPointAnnotation=function(d){if(q.isEmptyObject(d)){q.sap.log.error("The DataPoint annotation is empty. Please check it!");return false;}if(b._hasMember(d,"Value.Path")){if(q.isEmptyObject(d.Criticality)){b._checkCriticalityMetadata(d.CriticalityCalculation);}return true;}else{q.sap.log.error("The Value property does not exist in the DataPoint annotation. This property is essential for creating the smart chart.");return false;}};
b._checkCriticalityMetadata=function(c){if(q.isEmptyObject(c)){q.sap.log.warning("The CriticalityCalculation property in DataPoint annotation is not provided.");return false;}if(b._hasMember(c,"ImprovementDirection.EnumMember")){var i=c.ImprovementDirection.EnumMember;switch(i){case b._MINIMIZE:return b._checkCriticalityMetadataForMinimize(c);case b._MAXIMIZE:return b._checkCriticalityMetadataForMaximize(c);case b._TARGET:return b._checkCriticalityMetadataForTarget(c);default:q.sap.log.warning("The improvement direction in DataPoint annotation must be either Minimize, Maximize or Target.");}}else{q.sap.log.warning("The ImprovementDirection property in DataPoint annotation is not provided.");}return false;};
b._checkCriticalityMetadataForMinimize=function(c){if(!b._hasMember(c,"ToleranceRangeHighValue.Path")){q.sap.log.warning("The ToleranceRangeHighValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}if(!b._hasMember(c,"DeviationRangeHighValue.Path")){q.sap.log.warning("The DeviationRangeHighValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}return true;};
b._checkCriticalityMetadataForMaximize=function(c){if(!b._hasMember(c,"ToleranceRangeLowValue.Path")){q.sap.log.warning("The ToleranceRangeLowValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}if(!b._hasMember(c,"DeviationRangeLowValue.Path")){q.sap.log.warning("The DeviationRangeLowValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}return true;};
b._checkCriticalityMetadataForTarget=function(c){if(!b._hasMember(c,"ToleranceRangeLowValue.Path")){q.sap.log.warning("The DeviationRangeLowValue property in DataPoint annotation is missing for Target improvement direction.");return false;}if(!b._hasMember(c,"ToleranceRangeHighValue.Path")){q.sap.log.warning("The ToleranceRangeHighValue property in DataPoint annotation is missing for Target improvement direction.");return false;}if(!b._hasMember(c,"DeviationRangeLowValue.Path")){q.sap.log.warning("The ToleranceRangeLowValue property in DataPoint annotation is missing for Target improvement direction.");return false;}if(!b._hasMember(c,"DeviationRangeHighValue.Path")){q.sap.log.warning("The DeviationRangeHighValue property in DataPoint annotation is missing for Target improvement direction.");return false;}return true;};
b._mapCriticalityTypeWithColor=function(t){var T;if(!t){return V.Neutral;}else{T=t.toString();}T=(T.match(/(?:CriticalityType\/)?([^\/]*)$/)||[])[1]||"";switch(T){case'Negative':case'1':return V.Error;case'Critical':case'2':return V.Critical;case'Positive':case'3':return V.Good;default:return V.Neutral;}};
b._getThresholdValues=function(c){var t={},o=this.getBindingContext();for(var k in c){if(c.hasOwnProperty(k)&&k!=="ImprovementDirection"){t[k]=c[k].Path&&o&&o.getProperty(c[k].Path)||c[k].Decimal||0;}}return t;};
b._getValueColorForMinimize=function(v,t,d){if(v<=t){return b._mapCriticalityTypeWithColor("Positive");}else if(v>t&&v<=d){return b._mapCriticalityTypeWithColor("Critical");}else if(v>d){return b._mapCriticalityTypeWithColor("Negative");}};
b._getValueColorForMaximize=function(v,t,d){if(v>=t){return b._mapCriticalityTypeWithColor("Positive");}else if(v<t&&v>=d){return b._mapCriticalityTypeWithColor("Critical");}else if(v<d){return b._mapCriticalityTypeWithColor("Negative");}};
b._getValueColorForTarget=function(v,t,d,T,i){if(v>=t&&v<=T){return b._mapCriticalityTypeWithColor("Positive");}else if((v>=d&&v<t)||(v>T&&v<=i)){return b._mapCriticalityTypeWithColor("Critical");}else if(v<d||v>i){return b._mapCriticalityTypeWithColor("Negative");}};
b._getValueColor=function(v,c){var o=this._oDataPointAnnotations.CriticalityCalculation,t,s;v=parseFloat(v)||0;if(typeof c==="string"){s=b._mapCriticalityTypeWithColor(c);}else if(o&&typeof v!=="undefined"&&v!==null){t=b._getThresholdValues.call(this,o);s=b._criticalityCalculation(v,o.ImprovementDirection.EnumMember,t);}return s||b._mapCriticalityTypeWithColor();};
b._getTopLabelColor=function(v,d){var c=this._oDataPointAnnotations.CriticalityCalculation,i=parseFloat(v)||0,t={},s;for(var k in c){if(c.hasOwnProperty(k)&&k!=="ImprovementDirection"){t[k]=d[c[k].Path];}}if(c&&typeof i!=="undefined"&&i!==null){s=b._criticalityCalculation(i,c.ImprovementDirection.EnumMember,t);}return s;};
b._criticalityCalculation=function(v,i,t){var c;switch(i){case b._MINIMIZE:c=b._getValueColorForMinimize(v,t.ToleranceRangeHighValue,t.DeviationRangeHighValue);break;case b._MAXIMIZE:c=b._getValueColorForMaximize(v,t.ToleranceRangeLowValue,t.DeviationRangeLowValue);break;case b._TARGET:c=b._getValueColorForTarget(v,t.ToleranceRangeLowValue,t.DeviationRangeLowValue,t.ToleranceRangeHighValue,t.DeviationRangeHighValue);break;default:q.sap.log.warning("The improvement direction in DataPoint annotation must be either Minimize, Maximize or Target.");}return c;};
b._ASSOCIATIONS=["chartTitle","chartDescription","unitOfMeasure","freeText"];b._ASSOCIATIONS_ANNOTATIONS_MAP={"chartDescription":"Description","chartTitle":"Title","unitOfMeasure":{propertyAnnotationPath:"Value",propertyAnnotationProperties:["ISOCurrency","Unit"]},"freeText":{propertyAnnotationPath:"Value",propertyAnnotationProperties:["Label"]}};
b._getAnnotation=function(c){var A=b._ASSOCIATIONS_ANNOTATIONS_MAP[c];if(!A){q.sap.log.warning("No annotation connected to association \""+c+"\".");return{};}if(!q.isEmptyObject(this._oChartViewMetadata)&&typeof A==="string"){return this._oChartViewMetadata.annotation[A];}if(!q.isEmptyObject(this._oDataPointAnnotations)&&b._hasMember(A,"propertyAnnotationPath")&&b._hasMember(A,"propertyAnnotationProperties")){var p;if(b._hasMember(this._oDataPointAnnotations,A.propertyAnnotationPath+".Path")){p=b._getPropertyAnnotation.call(this,this._oDataPointAnnotations[A.propertyAnnotationPath].Path);}if(p){return b._getValueFromPropertyAnnotation(p,A.propertyAnnotationProperties);}}return{};};
b._getValueFromPropertyAnnotation=function(p,P){for(var s in p){for(var i=0;i<P.length;i++){if(s.indexOf(P[i])>-1){return p[s];}}}return{};};
b._updateAssociation=function(c,d){var A,o;if(this.getMetadata().hasAssociation(c)){A=sap.ui.getCore().byId(this.getAssociation(c));if(A&&A.getMetadata().hasProperty("text")){o=b._getAnnotation.call(this,c);b._setAssociationText(A,o,d);}}};
b._updateAssociations=function(d){var n=b._ASSOCIATIONS.length;for(var i=0;i<n;i++){b._updateAssociation.call(this,b._ASSOCIATIONS[i],d);}};
b._updateChartLabels=function(d,p){switch(p){case"first":b._updateTopLabel.call(this,this._getLabelsMap()["leftTop"],d);b._updateBottomLabel.call(this,this._getLabelsMap()["leftBottom"],d);break;case"last":b._updateTopLabel.call(this,this._getLabelsMap()["rightTop"],d);b._updateBottomLabel.call(this,this._getLabelsMap()["rightBottom"],d);break;}};
b._updateTopLabel=function(c,d){var L=this.getAggregation("_chart").getAggregation(c),v=d[this._oDataPointAnnotations.Value.Path],s=b._getTopLabelColor.call(this,v,d),f=b._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.Value.Path),F;F=f.format(v);L.setProperty("label",F,true);L.setProperty("color",s,true);};
b._updateBottomLabel=function(c,d){var A,o,L,v,f;A=this._oChartViewMetadata.dimensionFields[0];if(A){v=d[A];L=this.getAggregation("_chart").getAggregation(c);o=b._getPropertyAnnotation.call(this,this._oChartViewMetadata.dimensionFields[0]);if(o.hasOwnProperty("sap:text")||o.hasOwnProperty("com.sap.vocabularies.Common.v1.Text")){var p=o["sap:text"]||o["com.sap.vocabularies.Common.v1.Text"].Path;f=d[p];}else{f=b._formatBottomLabel.call(this,v,o);}if(f){L.setProperty("label",f,true);}}};
b._formatBottomLabel=function(v,c){var p=b._getSemanticsPattern.call(this,c);if(p){return b._formatSemanticsValue.call(this,v,p);}p=b._getCalendarPattern.call(this,c);if(p){return b._formatSemanticsValue.call(this,v,p);}return b._formatDateAndNumberValue.call(this,v);};
b._formatSemanticsValue=function(v,p){if(p){if(this._oDateType){this._oDateType.setFormatOptions({style:"short",source:{pattern:p}});}else{this._oDateType=new a({style:"short",source:{pattern:p}});}return this._oDateType.formatValue(v,"string");}return null;};
b._formatDateAndNumberValue=function(v){if(v instanceof Date){return b._getLabelDateFormatter.call(this).format(v);}else if(!isNaN(v)){return b._getLabelNumberFormatter.call(this,this._oChartViewMetadata.dimensionFields[0]).format(v);}else{return null;}};
b._getSemanticsPattern=function(c){if(c.hasOwnProperty("sap:semantics")){switch(c['sap:semantics']){case"yearmonthday":return"yyyyMMdd";case"yearmonth":return"yyyyMM";case"year":return"yyyy";default:return null;}}return null;};
b._CALENDAR_TERMS_PATTERNS={"com.sap.vocabularies.Common.v1.IsCalendarYear":"yyyy","com.sap.vocabularies.Common.v1.IsCalendarQuarter":"Q","com.sap.vocabularies.Common.v1.IsCalendarMonth":"MM","com.sap.vocabularies.Common.v1.IsCalendarWeek":"ww","com.sap.vocabularies.Common.v1.IsCalendarDate":"yyyyMMdd","com.sap.vocabularies.Common.v1.IsCalendarYearMonth":"yyyyMM"};
b._getCalendarPattern=function(c){for(var s in b._CALENDAR_TERMS_PATTERNS){if(c.hasOwnProperty(s)){return b._CALENDAR_TERMS_PATTERNS[s];}}return null;};
b._getLabelNumberFormatter=function(p){var P=b._getPropertyAnnotation.call(this,p).precision||null;return N.getInstance({style:"short",showScale:true,precision:P});};
b._getLabelDateFormatter=function(){return D.getInstance({style:"short"});};
b._setAssociationText=function(c,d,e){if(!d){return;}if(d.Path&&e){c.setProperty("text",e[d.Path],false);}else if(d.Path){c.bindProperty("text",{path:d.Path});c.invalidate();}else if(d.String){if(d.String.indexOf("{")===0){var p=d.String.split(">");c.bindProperty("text",{path:p[1].substr(0,p[1].length-1),model:p[0].substr(1)});c.invalidate();}else{c.setProperty("text",d.String,false);}}};
b._getPropertyAnnotation=function(p){var m,e,E,P;m=this.getModel().getMetaModel();e=this._oChartProvider._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.getEntitySet());E=m.getODataEntityType(e);P=m.getODataProperty(E,p);return P;};
b._hasMember=function(o,p){var d=".",P=p.split(d),m=P.shift();return!!o&&((P.length>0)?b._hasMember(o[m],P.join(d)):o.hasOwnProperty(m));};
return b;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartRadialMicroChart.designtime',[],function(){"use strict";return{annotations:{chart:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Chart",target:["EntityType"],defaultValue:null,since:"1.42.0"},chartDefinitionType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartDefinitionType",target:["EntityType"],whiteList:{properties:["Title","Description","ChartType","Measures","MeasureAttributes"]},defaultValue:null,since:"1.42.0"},chartType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"ChartType",target:["Property"],whiteList:{values:["Donut"]},defaultValue:null,since:"1.42.0"},dataPoint:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPoint",target:["EntityType"],defaultValue:null,since:"1.42.0"},dataPointType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataPointType",target:["EntityType"],whiteList:{properties:["Value","TargetValue","Criticality","CriticalityCalculation"]},defaultValue:null,since:"1.42.0"},criticalityCalculationType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"CriticalityCalculationType",target:["Property"],whiteList:{properties:["ImprovementDirection","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"]},defaultValue:null,since:"1.42.0"},currency:{namespace:"Org.OData.Measures.V1",annotation:"ISOCurrency",target:["Property"],defaultValue:null,since:"1.42.0"},unit:{namespace:"Org.OData.Measures.V1",annotation:"Unit",target:["Property"],defaultValue:null,since:"1.42.0"},label:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Label",target:["Property"],defaultValue:null,since:"1.42.0"}},customData:{chartQualifier:{type:"string",defaultValue:null,group:["Appearance"],since:"1.42.0"}}};},false);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartRadialMicroChart',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Control','sap/suite/ui/microchart/library','sap/ui/comp/smartmicrochart/SmartMicroChartCommons','sap/m/library'],function(q,l,C,M,S,a){"use strict";
var b=C.extend("sap.ui.comp.smartmicrochart.SmartRadialMicroChart",{metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:"Donut"},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_chart:{type:"sap.suite.ui.microchart.RadialMicroChart",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false},freeText:{type:"sap.m.Label",group:"Misc",multiple:false}},events:{initialize:{}}}});
b._CHART_TYPE=["Donut"];
b.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setAggregation("_chart",new M.RadialMicroChart(),true);};
b.prototype.onBeforeRendering=function(){var c=this.getAggregation("_chart");if(this.getIsResponsive()){c.setProperty("size",a.Size.Responsive,true);}else{c.setProperty("size",a.Size.Auto,true);}M._passParentContextToChild(this,c);};
b.prototype.destroy=function(){S._cleanup.call(this);C.prototype.destroy.apply(this,arguments);};
b.prototype.setChartType=function(){return this;};
b.prototype.setEntitySet=function(e){if(this.getProperty("entitySet")!==e){this.setProperty("entitySet",e,true);S._initializeMetadata.call(this);}return this;};
b.prototype.propagateProperties=function(){if(C.prototype.propagateProperties){C.prototype.propagateProperties.apply(this,arguments);}S._initializeMetadata.call(this);};
b.prototype._createAndBindInnerChart=function(){this._bindProperties();S._updateAssociations.call(this);};
b.prototype._bindProperties=function(){var i=this.getAggregation("_chart");if(this._oDataPointAnnotations.Value&&!this._oDataPointAnnotations.TargetValue){if(S._hasMember(this._oDataPointAnnotations.Value,"Path")){i.bindProperty("percentage",{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"});}}else if(S._hasMember(this,"_oDataPointAnnotations.TargetValue.Path")&&S._hasMember(this,"_oDataPointAnnotations.Value.Path")){i.bindProperty("total",{path:this._oDataPointAnnotations.TargetValue.Path,type:"sap.ui.model.odata.type.Decimal"});i.bindProperty("fraction",{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"});}i.bindProperty("valueColor",{parts:[this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path||"",this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path||""],formatter:S._getValueColor.bind(this)});};
b.prototype.setAssociation=function(A,i,s){if(C.prototype.setAssociation){C.prototype.setAssociation.apply(this,arguments);}S._updateAssociation.call(this,A);return this;};
b.prototype._getSupportedChartTypes=function(){return b._CHART_TYPE;};
return b;});
sap.ui.predefine('sap/ui/comp/smarttable/SmartTable.designtime',[],function(){"use strict";return{aggregations:{customToolbar:{ignore:true},semanticObjectController:{ignore:true},noData:{ignore:true}},annotations:{sortable:{namespace:"Org.OData.Capabilities.V1",annotation:"SortRestrictions",target:["EntitySet"],whiteList:{properties:["NonSortableProperties"]},defaultValue:true,interpretation:"exclude",appliesTo:["columns/#"],group:["Behavior"],since:"1.28.1"},filterable:{namespace:"Org.OData.Capabilities.V1",annotation:"FilterRestrictions",target:["EntitySet"],whiteList:{properties:["NonFilterableProperties"]},defaultValue:true,interpretation:"exclude",appliesTo:["columns/#"],group:["Behavior"],since:"1.28.1"},columnLabelOnProperty:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Label",target:["Property","PropertyPath"],defaultValue:null,appliesTo:["columns/#/label"],group:["Appearance","Behavior"],since:"1.28.1"},columnVisible:{namespace:"com.sap.vocabularies.Common.v1",annotation:"FieldControlType",target:["Property"],whiteList:{values:["Hidden"]},defaultValue:false,appliesTo:["columns/#/visible"],group:["Behavior"],since:"1.28.1"},columnCurrencyCode:{namespace:"Org.OData.Measures.V1",annotation:"ISOCurrency",target:["Property"],defaultValue:null,appliesTo:["columns/#/cellContent"],group:["Behavior"],since:"1.28.1"},columnUnitOfMeasure:{namespace:"Org.OData.Measures.V1",annotation:"Unit",target:["Property"],defaultValue:null,appliesTo:["columns/#/cellContent"],group:["Behavior"],since:"1.28.1"},columnUpperCase:{namespace:"com.sap.vocabularies.Common.v1",annotation:"IsUpperCase",target:["Property","Parameter"],defaultValue:true,appliesTo:["columns/#","columns/#/cellContent"],group:["Behavior"],since:"1.28.1"},lineItem:{namespace:"com.sap.vocabularies.UI.v1",annotation:"LineItem",target:["EntityType"],whiteList:{types:["DataFieldWithUrl","DataField"]},defaultValue:null,appliesTo:["columns"],group:["Behavior"],since:"1.28.1"},presentationVariant:{namespace:"com.sap.vocabularies.UI.v1",annotation:"PresentationVariant",target:["EntitySet","EntityType"],defaultValue:null,appliesTo:["columns"],group:["Behavior"],since:"1.28.1"},columnImportance:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Importance",target:["Record","Annotation"],defaultValue:null,appliesTo:["columns/#/visible"],group:["Behavior"],since:"1.28.1"},columnDataField:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataField",target:["LineItem/Record"],whiteList:{properties:["Criticality","CriticalityRepresentation","Label","Value"]},defaultValue:null,appliesTo:["columns/cellContent"],group:["Behavior"],since:"1.28.1"},columnDataFieldWithUrl:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataFieldWithUrl",target:["LineItem/Record"],whiteList:{properties:["Label","Url","Value"]},defaultValue:null,appliesTo:["columns/cellContent"],group:["Behavior"],since:"1.38.1"},columnCriticality:{namespace:"com.sap.vocabularies.UI.v1",annotation:"CriticalityType",target:["PropertyPath"],defaultValue:null,appliesTo:["columns/criticality"],group:["Behavior"],since:"1.38.1"},columnCriticalityRepresentationType:{namespace:"com.sap.vocabularies.UI.v1",annotation:"CriticalityRepresentationType",target:["Property"],whiteList:{values:["WithoutIcon"]},interpretation:"excludeIcon",defaultValue:null,appliesTo:["columns/criticalityIcon"],group:["Behavior"],since:"1.38.1"},semanticKey:{namespace:"com.sap.vocabularies.Common.v1",annotation:"SemanticKey",target:["EntityType"],defaultValue:null,appliesTo:["columns/cellContent"],group:["Behavior"],since:"1.38.1"},semanticObject:{namespace:"com.sap.vocabularies.Common.v1",annotation:"SemanticObject",target:["Property"],defaultValue:null,appliesTo:["columns/cellContent"],group:["Behavior"],since:"1.28.1"},columnIsImageURL:{namespace:"com.sap.vocabularies.UI.v1",annotation:"IsImageURL",target:["Property"],defaultValue:true,appliesTo:["columns/image"],group:["Behavior"],since:"1.38.1"},columnText:{namespace:"com.sap.vocabularies.Common.v1",annotation:"Text",target:["Property"],defaultValue:null,appliesTo:["column/cellContent"],group:["Behavior"],since:"1.28.1"},textArrangement:{namespace:"com.sap.vocabularies.UI.v1",annotation:"TextArrangement",target:["EntityType","com.sap.vocabularies.Common.v1.Text"],defaultValue:null,appliesTo:["column/cellContent"],group:["Appearance","Behavior"],since:"1.38"}},customData:{useSmartField:{type:"boolean",defaultValue:false,group:["Appearance","Behavior"],since:"1.28.1"},dateFormatSettings:{type:"string",defaultValue:"{ UTC : true }",group:["Appearance"],since:"1.28.1"},currencyFormatSettings:{type:"string",defaultValue:null,appliesTo:["cellContent"],since:"1.28.1"},columnKey:{type:"string",defaultValue:null,group:["Behavior"],since:"1.28.1"},sortProperty:{type:"string",defaultValue:null,group:["Behavior"],since:"1.28.1"},filterProperty:{type:"string",defaultValue:null,group:["Behavior"],since:"1.28.1"},type:{type:"string",defaultValue:null,group:["Behavior"],since:"1.28.1"},maxLength:{type:"string",defaultValue:null,group:["Appearance"],since:"1.28.1"},precision:{type:"string",defaultValue:null,group:["Appearance"],since:"1.28.1"},scale:{type:"string",defaultValue:null,group:["Appearance"],since:"1.28.1"}},properties:{entitySet:{ignore:true},smartFilterId:{ignore:true},ignoredFields:{ignore:true},initiallyVisibleFields:{ignore:true},requestAtLeastFields:{ignore:true},ignoreFromPersonalisation:{ignore:true},tableType:{ignore:true},useVariantManagement:{ignore:true},showVariantManagement:{ignore:false},useExportToExcel:{ignore:false},exportType:{ignore:false},useTablePersonalisation:{ignore:true},showTablePersonalisation:{ignore:false},showRowCount:{ignore:false},header:{ignore:false},toolbarStyleClass:{ignore:true},enableCustomFilter:{ignore:true},persistencyKey:{ignore:true},useOnlyOneSolidToolbar:{ignore:true},currentVariantId:{ignore:true},editable:{ignore:false},enableAutoBinding:{ignore:false},tableBindingPath:{ignore:false},editTogglable:{ignore:true},demandPopin:{ignore:false},showFullScreenButton:{ignore:true}}};},false);
sap.ui.predefine('sap/ui/comp/smarttable/SmartTable',['jquery.sap.global','sap/m/VBoxRenderer','sap/m/Column','sap/m/Label','sap/m/MessageBox','sap/m/Table','sap/m/Text','sap/m/Title','sap/m/OverflowToolbar','sap/m/ToolbarDesign','sap/m/OverflowToolbarButton','sap/m/ToolbarSeparator','sap/m/VBox','sap/ui/comp/library','sap/ui/comp/providers/TableProvider','sap/ui/comp/smartfilterbar/FilterProvider','sap/ui/comp/smartvariants/SmartVariantManagement','sap/ui/model/FilterOperator','sap/ui/model/json/JSONModel','sap/ui/table/AnalyticalColumn','sap/ui/table/AnalyticalTable','sap/ui/table/Column','sap/ui/table/Table','sap/ui/table/TreeTable','sap/ui/comp/personalization/Util','sap/ui/comp/util/FormatUtil','sap/ui/comp/odata/ODataModelUtil','sap/ui/comp/odata/ODataType'],function(q,V,C,L,M,R,T,a,O,b,c,d,f,l,g,F,S,h,J,A,j,k,m,n,P,o,p,r){"use strict";
var s=f.extend("sap.ui.comp.smarttable.SmartTable",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},smartFilterId:{type:"string",group:"Misc",defaultValue:null},ignoredFields:{type:"string",group:"Misc",defaultValue:null},initiallyVisibleFields:{type:"string",group:"Misc",defaultValue:null},requestAtLeastFields:{type:"string",group:"Misc",defaultValue:null},ignoreFromPersonalisation:{type:"string",group:"Misc",defaultValue:null},tableType:{type:"sap.ui.comp.smarttable.TableType",group:"Misc",defaultValue:null},useVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},showVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},useExportToExcel:{type:"boolean",group:"Misc",defaultValue:true},exportType:{type:"sap.ui.comp.smarttable.ExportType",group:"Misc",defaultValue:"GW"},useTablePersonalisation:{type:"boolean",group:"Misc",defaultValue:true},showTablePersonalisation:{type:"boolean",group:"Misc",defaultValue:true},showRowCount:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},toolbarStyleClass:{type:"string",group:"Misc",defaultValue:null},enableCustomFilter:{type:"boolean",group:"Misc",defaultValue:true},persistencyKey:{type:"string",group:"Misc",defaultValue:null},useOnlyOneSolidToolbar:{type:"boolean",group:"Misc",defaultValue:false},currentVariantId:{type:"string",group:"Misc",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:false},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},tableBindingPath:{type:"string",group:"Misc",defaultValue:null},editTogglable:{type:"boolean",group:"Misc",defaultValue:false},demandPopin:{type:"boolean",group:"Misc",defaultValue:false},showFullScreenButton:{type:"boolean",group:"Misc",defaultValue:false}},associations:{smartVariant:{type:"sap.ui.core.Control",multiple:false}},aggregations:{customToolbar:{type:"sap.m.Toolbar",multiple:false},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},semanticKeyAdditionalControl:{type:"sap.ui.core.Control",multiple:false}},events:{initialise:{},beforeRebindTable:{},editToggled:{},dataReceived:{},afterVariantInitialise:{},afterVariantSave:{parameters:{currentVariantId:{type:"string"}}},afterVariantApply:{parameters:{currentVariantId:{type:"string"}}},showOverlay:{},fieldChange:{},fullScreenToggled:{parameters:{fullScreen:{type:"boolean"}}},beforeExport:{parameters:{exportSettings:{type:"object"}}}}},
renderer:V.render,
constructor:function(){f.apply(this,arguments);this._aExistingColumns=[];this._aAlwaysSelect=[];this._oTemplate=null;this._createToolbar();this._oP13nDialogSettings=this.data("p13nDialogSettings");if(typeof this._oP13nDialogSettings==="string"){try{this._oP13nDialogSettings=JSON.parse(this._oP13nDialogSettings);}catch(e){this._oP13nDialogSettings=null;}}this._bIsFilterPanelEnabled=(this._oP13nDialogSettings&&this._oP13nDialogSettings.filter)?this._oP13nDialogSettings.filter.visible!==false:true;this._createTable();}
});
s.prototype.init=function(){sap.m.FlexBox.prototype.init.call(this);this.addStyleClass("sapUiCompSmartTable");this.setFitContainer(true);this._aColumnKeys=[];this._mLazyColumnMap={};};
s.prototype._getVariantManagementControl=function(e){var i=null;if(e){if(typeof e==='string'){i=sap.ui.getCore().byId(e);}else{i=e;}if(i){if(!(i instanceof S)){q.sap.log.error("Control with the id="+e.getId?e.getId():e+" not of expected type");return null;}}}return i;};
s.prototype._createVariantManagementControl=function(){if(this._oVariantManagement||(!this.getUseVariantManagement()&&!this.getUseTablePersonalisation())||!this.getPersistencyKey()){return;}var e=new sap.ui.comp.smartvariants.PersonalizableInfo({type:"table",keyName:"persistencyKey",dataSource:"TODO"});e.setControl(this);var i=this.getSmartVariant();if(i){this._oVariantManagement=this._getVariantManagementControl(i);}else if(this._oSmartFilter&&this._oSmartFilter.data("pageVariantPersistencyKey")){i=this._oSmartFilter.getSmartVariant();if(i){this._oVariantManagement=this._getVariantManagementControl(i);}}else{this._oVariantManagement=new S(this.getId()+"-variant",{showShare:true});}if(this._oVariantManagement){this._oVariantManagement.addPersonalizableControl(e);this._oVariantManagement.attachSave(this._variantSaved,this);this._oVariantManagement.attachAfterSave(this._variantAfterSave,this);this._oVariantManagement.initialise(this._variantInitialised,this);}};
s.prototype._variantInitialised=function(){if(!this._oCurrentVariant){this._oCurrentVariant="STANDARD";}this.fireAfterVariantInitialise();if(this._oVariantManagement&&!this._oVariantManagement.getEnabled()){this._checkAndTriggerBinding();}};
s.prototype._variantSaved=function(){if(this._oPersController){this._oPersController.setPersonalizationData(this._oCurrentVariant);}};
s.prototype._variantAfterSave=function(){this.fireAfterVariantSave({currentVariantId:this.getCurrentVariantId()});};
s.prototype.setUseExportToExcel=function(u){if(u===this.getUseExportToExcel()){return;}this.setProperty("useExportToExcel",u,true);if(this.bIsInitialised&&this._oToolbar){this._createToolbarContent();}};
s.prototype.setExportType=function(e){if(e===this.getExportType()){return;}this.setProperty("exportType",e,true);if(this.bIsInitialised&&this._oToolbar){this._createToolbarContent();}};
s.prototype.setUseTablePersonalisation=function(u){this.setProperty("useTablePersonalisation",u,true);};
s.prototype.setShowTablePersonalisation=function(e){this.setProperty("showTablePersonalisation",e,true);if(this._oTablePersonalisationButton){this._oTablePersonalisationButton.setVisible(e);}};
s.prototype.setUseVariantManagement=function(u){this.setProperty("useVariantManagement",u,true);if(this._oPersController){this._oPersController.setResetToInitialTableState(!u);}};
s.prototype.setShowVariantManagement=function(e){this.setProperty("showVariantManagement",e,true);if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(e);if(this._oSeparator){this._oSeparator.setVisible(e);}}};
s.prototype.setToolbarStyleClass=function(e){this.setProperty("toolbarStyleClass",e,true);};
s.prototype.setCustomToolbar=function(e){if(this._oCustomToolbar){this.removeItem(this._oCustomToolbar);}this._oCustomToolbar=e;};
s.prototype.getCustomToolbar=function(){return this._oCustomToolbar;};
s.prototype.setHeader=function(t){var e=this.getProperty("header"),i;this.setProperty("header",t,true);if(this.bIsInitialised&&this._oToolbar){i=(!e===!t);if(!i){this._createToolbarContent();}else{this._refreshHeaderText();}}};
s.prototype.setShowRowCount=function(e){this.setProperty("showRowCount",e,true);this._refreshHeaderText();};
s.prototype.setShowFullScreenButton=function(e){this.setProperty("showFullScreenButton",e,true);if(this._oFullScreenButton){this._oFullScreenButton.setVisible(e);}};
s.prototype.setEditTogglable=function(e){this.setProperty("editTogglable",e,true);if(this._oEditButton){this._oEditButton.setVisible(e);}};
s.prototype.setEditable=function(e){this.setProperty("editable",e,true);if(this._oEditModel){this._oEditModel.setProperty("/editable",e);}if(this._oEditButton){this._oEditButton.setIcon(e?"sap-icon://display":"sap-icon://edit");}if(this._isMobileTable&&this._oTable.setKeyboardMode){this._oTable.setKeyboardMode(e?"Edit":"Navigation");}};
s.prototype.setDemandPopin=function(D){var e=this.getDemandPopin();if(e===D){return;}this.setProperty("demandPopin",D,true);if(this.bIsInitialised){if(D){this._updateColumnsPopinFeature();}else{this._deactivateColumnsPopinFeature();}}};
s.prototype._refreshHeaderText=function(){if(!this._headerText){return;}var t=this.getHeader();this._headerText.setVisible(!!t);if(this.getShowRowCount()){var i=parseInt(this._getRowCount(true),10);q.sap.require("sap.ui.core.format.NumberFormat");var v=sap.ui.core.format.NumberFormat.getFloatInstance().format(i);t+=" ("+v+")";}this._headerText.setText(t);};
s.prototype._addFullScreenButton=function(){if(this._oFullScreenButton){this._oToolbar.removeContent(this._oFullScreenButton);}if(this.getShowFullScreenButton()){if(!this._oFullScreenButton){this._oFullScreenButton=new c(this.getId()+"-btnFullScreen",{press:function(){this._toggleFullScreen(!this.bFullScreen);}.bind(this)});}this._renderFullScreenButton();this._oToolbar.addContent(this._oFullScreenButton);}};
s.prototype._createToolbar=function(){var e=null;if(!this._oToolbar){e=this.getCustomToolbar();if(e){this._oToolbar=e;}else{this._oToolbar=new O({design:sap.m.ToolbarDesign.Transparent});this._oToolbar.addStyleClass("sapUiCompSmartTableToolbar");if(this.getToolbarStyleClass()){this._oToolbar.addStyleClass(this.getToolbarStyleClass());}}this._oToolbar.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));}};
s.prototype._toggleFullScreen=function(v,e){if(!this._oFullScreenButton||(v===this.bFullScreen&&!e)){return;}this.bFullScreen=v;if(!this._oFullScreenUtil){this._oFullScreenUtil=sap.ui.requireSync("sap/ui/comp/util/FullScreenUtil");}this._oFullScreenUtil.toggleFullScreen(this,this.bFullScreen,this._oFullScreenButton,this._toggleFullScreen.bind(this,false));this._renderFullScreenButton();this.fireFullScreenToggled({fullScreen:v});};
s.prototype._renderFullScreenButton=function(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp"),t;t=this.bFullScreen?e.getText("CHART_MINIMIZEBTN_TOOLTIP"):e.getText("CHART_MAXIMIZEBTN_TOOLTIP");this._oFullScreenButton.setTooltip(t);this._oFullScreenButton.setText(t);this._oFullScreenButton.setIcon(this.bFullScreen?"sap-icon://exit-full-screen":"sap-icon://full-screen");};
s.prototype._createToolbarContent=function(){if(!this._oToolbar){this._createToolbar();}this._addVariantManagementToToolbar();this._addSeparatorToToolbar();this._addHeaderToToolbar();this._addSpacerToToolbar();this._addEditTogglableToToolbar();this._addTablePersonalisationToToolbar();this._addExportToExcelToToolbar();this._addFullScreenButton();this._bToolbarInsertedIntoItems=true;this.insertItem(this._oToolbar,0);};
s.prototype._addEditTogglableToToolbar=function(){var B;if(this._oEditButton){this._oToolbar.removeContent(this._oEditButton);}if(this.getEditTogglable()){if(!this._oEditButton){B=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("TABLE_EDITTOGGLE_TOOLTIP");this._oEditButton=new sap.m.OverflowToolbarButton(this.getId()+"-btnEditToggle",{icon:this.getEditable()?"sap-icon://display":"sap-icon://edit",text:B,tooltip:B,press:function(){var e=this.getEditable();e=!e;this.setEditable(e,true);this.fireEditToggled({editable:e});}.bind(this)});}this._oToolbar.addContent(this._oEditButton);}};
s.prototype._addHeaderToToolbar=function(){if(this._headerText){this._oToolbar.removeContent(this._headerText);}if(!this._headerText){this._headerText=new a(this.getId()+"-header");this._headerText.addStyleClass("sapMH4Style");this._headerText.addStyleClass("sapUiCompSmartTableHeader");}this._refreshHeaderText();this._oToolbar.insertContent(this._headerText,0);};
s.prototype._addSeparatorToToolbar=function(){if(this._oSeparator){this._oToolbar.removeContent(this._oSeparator);}if(this.getHeader()&&this.getUseVariantManagement()&&this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){if(!this._oSeparator){this._oSeparator=new d(this.getId()+"-toolbarSeperator");if(!this.getShowVariantManagement()){this._oSeparator.setVisible(false);}}this._oToolbar.insertContent(this._oSeparator,0);if(!this._oToolbar.getHeight()){this._oToolbar.addStyleClass("sapUiCompSmartTableToolbarHeight");}}};
s.prototype._addVariantManagementToToolbar=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oToolbar.removeContent(this._oVariantManagement);if(this.getUseVariantManagement()){this._oToolbar.insertContent(this._oVariantManagement,0);if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(this.getShowVariantManagement());}}}};
s.prototype._addSpacerToToolbar=function(){var e=false,I=this._oToolbar.getContent(),i,t;if(I){t=I.length;i=0;for(i;i<t;i++){if(I[i]instanceof sap.m.ToolbarSpacer){e=true;break;}}}if(!e){this._oToolbar.addContent(new sap.m.ToolbarSpacer(this.getId()+"-toolbarSpacer"));}};
s.prototype._addTablePersonalisationToToolbar=function(){var B;if(this._oTablePersonalisationButton){this._oToolbar.removeContent(this._oTablePersonalisationButton);}if(this.getUseTablePersonalisation()){if(!this._oTablePersonalisationButton){B=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("TABLE_PERSOBTN_TOOLTIP");this._oTablePersonalisationButton=new sap.m.OverflowToolbarButton(this.getId()+"-btnPersonalisation",{icon:"sap-icon://action-settings",text:B,tooltip:B,press:function(e){this._oPersController.openDialog();}.bind(this)});this._oTablePersonalisationButton.setVisible(this.getShowTablePersonalisation());}this._oToolbar.addContent(this._oTablePersonalisationButton);}};
s.prototype._addExportToExcelToToolbar=function(){if(this._oUseExportToExcel){this._oToolbar.removeContent(this._oUseExportToExcel);}if(this.getUseExportToExcel()&&(this._bTableSupportsExcelExport||this.getExportType()==="UI5Client")){var B;if(!this._oUseExportToExcel){B=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("TABLE_EXPORT_TEXT");this._oUseExportToExcel=new sap.m.OverflowToolbarButton(this.getId()+"-btnExcelExport",{icon:"sap-icon://excel-attachment",text:B,tooltip:B,press:function(e){if(this.getExportType()==="UI5Client"){this._triggerUI5ClientExport();return;}var D=function(){var t=this._getRowBinding();var u=t.getDownloadUrl("xlsx");u=this._removeExpandParameter(u);if(u&&u.length>2048&&sap.ui.Device.browser.msie){M.error(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("DOWNLOAD_TOO_COMPLEX_TEXT"));return;}var E={url:u};this.fireBeforeExport({exportSettings:E});window.open(E.url);}.bind(this);var i=this._getRowCount();if(i>10000){M.confirm(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("DOWNLOAD_CONFIRMATION_TEXT",i),{actions:[M.Action.YES,M.Action.NO],onClose:function(t){if(t===M.Action.YES){D();}}});}else{D();}}.bind(this)});this._setExcelExportEnableState();}this._oToolbar.addContent(this._oUseExportToExcel);}};
s.prototype._triggerUI5ClientExport=function(){var e=sap.ui.getCore().loadLibrary("sap.ui.export",true);e.then(function(){var t=this._oTable.getColumns(),i,u=t.length,v,w,x,y,z,B,D=[];if(this._isMobileTable&&t.length){t=t.sort(function(N,Q){return N.getOrder()-Q.getOrder();});}for(i=0;i<u;i++){y=null;v=t[i];if(v.getVisible()){if(v.getLeadingProperty){y=v.getLeadingProperty();}w=v.data("p13nData");if(w){if(!y){y=w["leadingProperty"];}}if(y){if(v.getLabel){x=v.getLabel();}else if(v.getHeader){x=v.getHeader();}z=v.getWidth().toLowerCase()||w.width||"";if(z.indexOf("em")>0){z=Math.round(parseFloat(z));}else if(z.indexOf("px")>0){z=Math.round(parseInt(z,10)/16);}B=w.type==="numeric"?"number":w.type;if(w.isCurrency){B="currency";}else if(B!="date"&&r.isDateOrTime(w.edmType)){B=r.getDefaultValueTypeName(w.edmType);if(B==="DateTimeOffset"){B="DateTime";}}D.push({columnId:v.getId(),property:y,width:z,label:(x&&x.getText)?x.getText():y,textAlign:v.getHAlign(),type:B,unitProperty:B==="currency"?w.unit:null,displayUnit:B==="currency",precision:w.precision,scale:w.scale});}}}var E=this._getRowBinding();var G=this.getModel();var H=this.getHeader();var I=this._getRowCount();var K={workbook:{columns:D},dataSource:{type:"odata",dataUrl:E.getDownloadUrl&&E.getDownloadUrl("json"),serviceUrl:G.sServiceUrl,headers:G.getHeaders(),count:I,useBatch:G.bUseBatch},fileName:H};this.fireBeforeExport({exportSettings:K});sap.ui.require(["sap/ui/export/Spreadsheet"],function(N){new N(K).build();});}.bind(this));};
s.prototype._removeExpandParameter=function(u){var e=u.replace(new RegExp("([\\?&]\\$expand=[^&]+)(&?)"),function(i,t,v){return v?t.substring(0,1):"";});return e;};
s.prototype._getRowCount=function(e){var i=this._getRowBinding();if(!i){return 0;}var t=0;if(e&&i.getTotalSize){t=i.getTotalSize();}else{t=i.getLength();}if(t<0||t==="0"){t=0;}return t;};
s.prototype._setExcelExportEnableState=function(){if(this._oUseExportToExcel){var i=this._getRowCount();this._oUseExportToExcel.setEnabled(i>0);}};
s.prototype._createPersonalizationController=function(){if(this._oPersController||!this.getUseTablePersonalisation()){return;}var e=this._oP13nDialogSettings;e=this._setIgnoreFromPersonalisationToSettings(e);q.sap.require("sap.ui.comp.personalization.Controller");this._oPersController=new sap.ui.comp.personalization.Controller({table:this._oTable,columnKeys:this._aColumnKeys,setting:e,resetToInitialTableState:!this.getUseVariantManagement(),beforePotentialTableChange:this._beforePersonalisationModelDataChange.bind(this),afterPotentialTableChange:this._afterPersonalisationModelDataChange.bind(this),afterP13nModelDataChange:this._personalisationModelDataChange.bind(this),requestColumns:this._personalisationRequestColumns.bind(this)});};
s.prototype._setIgnoreFromPersonalisationToSettings=function(e){var i=P.createArrayFromString(this.getIgnoreFromPersonalisation());if(i.length){if(!e){e={};}var t=function(u){if(!e[u]){e[u]={};}e[u].ignoreColumnKeys=i;};t("filter");t("sort");t("group");t("columns");}return e;};
s.prototype._getRowBinding=function(){if(this._oTable){return this._oTable.getBinding(this._sAggregation);}};
s.prototype.setEntitySet=function(e){this.setProperty("entitySet",e);this._initialiseMetadata();};
s.prototype.propagateProperties=function(){f.prototype.propagateProperties.apply(this,arguments);this._initialiseMetadata();};
s.prototype._initialiseMetadata=function(){if(!this.bIsInitialised){p.handleModelInit(this,this._onMetadataInitialised);}};
s.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this.bIsInitialised){this._createTableProvider();if(this._oTableProvider){this._aTableViewMetadata=this._oTableProvider.getTableViewMetadata();if(this._aTableViewMetadata){if(!this._isMobileTable&&this.getDemandPopin()){this.setDemandPopin(false);q.sap.log.error("use SmartTable property 'demandPopin' only  with responsive table, property has been set to false");}this.bIsInitialised=true;this._bTableSupportsExcelExport=this._oTableProvider.getSupportsExcelExport();this._listenToSmartFilter();this._createVariantManagementControl();this._createToolbarContent();this._aAlwaysSelect=this._oTableProvider.getRequestAtLeastFields();this._createContent();this._createPersonalizationController();this._oEditModel=new J({editable:this.getEditable()});this.setModel(this._oEditModel,"sm4rtM0d3l");this.fireInitialise();if(!this._oVariantManagement||(this._oVariantManagement&&this._bVariantInitialised)){this._checkAndTriggerBinding();}}}}};
s.prototype._checkAndTriggerBinding=function(){if(!this._bAutoBindingTriggered){this._bAutoBindingTriggered=true;if(this.getEnableAutoBinding()){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindTable();}}}};
s.prototype._createTableProvider=function(){var e,E,i;E=this.getEntitySet();i=this.getIgnoredFields();e=this.getModel();if(e&&E){if(this._aExistingColumns.length){if(i){i+=","+this._aExistingColumns.toString();}else{i=this._aExistingColumns.toString();}}this._oTableProvider=new g({entitySet:E,ignoredFields:i,initiallyVisibleFields:this.getInitiallyVisibleFields(),isEditableTable:this.getEditable(),smartTableId:this.getId(),isAnalyticalTable:!!this._isAnalyticalTable,isMobileTable:!!this._isMobileTable,dateFormatSettings:this.data("dateFormatSettings"),currencyFormatSettings:this.data("currencyFormatSettings"),defaultDropDownDisplayBehaviour:this.data("defaultDropDownDisplayBehaviour"),useSmartField:this.data("useSmartField"),useSmartToggle:this.data("useSmartToggle"),skipAnnotationParse:this.data("skipAnnotationParse"),lineItemQualifier:this.data("lineItemQualifier"),presentationVariantQualifier:this.data("presentationVariantQualifier"),enableInResultForLineItem:this.data("enableInResultForLineItem"),_semanticKeyAdditionalControl:this.getAggregation("semanticKeyAdditionalControl"),model:e,semanticObjectController:this.getSemanticObjectController()});}};
s.prototype._listenToSmartFilter=function(){var e=null;e=this.getSmartFilterId();this._oSmartFilter=this._findControl(e);if(this._oSmartFilter){this._oSmartFilter.attachSearch(this._reBindTable,this);this._oSmartFilter.attachFilterChange(this._filterChangeEvent,this);this._setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_DATA"));}};
s.prototype._filterChangeEvent=function(){if(this._isTableBound()&&this._oSmartFilter&&!this._oSmartFilter.getLiveMode()&&!this._oSmartFilter.isDialogOpen()){this._showOverlay(true);}};
s.prototype._showOverlay=function(e){if(e){var i={show:true};this.fireShowOverlay({overlay:i});e=i.show;}this._oTable.setShowOverlay(e);};
s.prototype._findControl=function(i){var e,v;if(i){e=sap.ui.getCore().byId(i);if(!e){v=this._getView();if(v){e=v.byId(i);}}}return e;};
s.prototype._getView=function(){if(!this._oView){var e=this.getParent();while(e){if(e instanceof sap.ui.core.mvc.View){this._oView=e;break;}e=e.getParent();}}return this._oView;};
s.prototype.rebindTable=function(e){this._reBindTable(null,e);};
s.prototype._reBindTable=function(e,t){var u,v,w,i,x,y,z=[],B,E,D,G,H,I,K,N,Q={},U={preventTableBind:false};w=this._getTablePersonalisationData()||{};B=w.filters;E=w.excludeFilters;N=w.sorters;if(this._oSmartFilter){y=this._oSmartFilter.getFilters();Q=this._oSmartFilter.getParameters()||{};}if(y&&y.length){if(E){z=[new sap.ui.model.Filter([y[0],E],true)];}else{z=y;}}else if(E){z=[E];}if(B){B=z.concat(B);}else{B=z;}D=this.getRequestAtLeastFields();if(D){G=D.split(",");}else{G=[];}G=G.concat(this._aAlwaysSelect);I=this._getVisibleColumnPaths();H=I["select"];if(!H||!H.length){H=G;}else{x=G.length;for(i=0;i<x;i++){if(H.indexOf(G[i])<0){H.push(G[i]);}}}if(this._sSelectForGroup&&H.indexOf(this._sSelectForGroup)<0){H.push(this._sSelectForGroup);}if(H.length){Q["select"]=H.toString();K=I["expand"];if(K.length){Q["expand"]=K.join(",");}}Q["useBatchRequests"]=true;if(!N){N=[];}U.filters=B;U.sorter=N;U.parameters=Q;U.length=undefined;U.startIndex=undefined;this.fireBeforeRebindTable({bindingParams:U});if(!U.preventTableBind){N=U.sorter;B=U.filters;Q=U.parameters;H=U.parameters["select"];if(!H||!H.length){M.error(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_COLS"),{styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":""});return;}v=this.getTableBindingPath()||("/"+this.getEntitySet());if(this._oTable.resumeUpdateAnalyticalInfo){this._oTable.resumeUpdateAnalyticalInfo(true,false);}this._bDataLoadPending=true;this._bIgnoreChange=false;if(this._bForceTableUpdate){t=true;this._bForceTableUpdate=false;}if(!t){u=this._oTable.getBinding(this._sAggregation);if(u&&u.mParameters){t=!(q.sap.equal(Q,u.mParameters,true)&&q.sap.equal(Q.custom,u.mParameters.custom)&&!U.length&&!U.startIndex&&v===u.getPath());}}if(!this._bNoDataUpdated){this._bNoDataUpdated=true;this._setNoDataText();}if(!u||!this._bIsTableBound||t){this._oTable.bindRows({path:v,filters:B,sorter:N,parameters:Q,length:U.length,startIndex:U.startIndex,template:this._oTemplate,events:{dataRequested:function(){this._bIgnoreChange=true;}.bind(this),dataReceived:function(e){if(e&&e.getParameter&&e.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._bIgnoreChange=false;this._onDataLoadComplete(e,true);this.fireDataReceived(e);}.bind(this),change:function(e){if(this._bIgnoreChange){return;}var W,X=false;W=(e&&e.getParameter)?e.getParameter("reason"):undefined;if(!W||W==="filter"||W==="context"){X=true;}if(W==="change"||X){this._onDataLoadComplete(e,X);}}.bind(this)}});this._bIsTableBound=true;}else{u.sort(N);u.filter(B,"Application");}this._showOverlay(false);}};
s.prototype._onDataLoadComplete=function(e,i){if(this._bDataLoadPending||i){this._bDataLoadPending=false;this.updateTableHeaderState();}};
s.prototype._isTableBound=function(){if(this._bIsTableBound){return true;}if(this._oTable){return this._oTable.isBound(this._sAggregation);}return false;};
s.prototype.setNoData=function(N){this._oNoData=N;};
s.prototype.getNoData=function(){return this._oNoData;};
s.prototype._setNoDataText=function(e){var i=this._oTable.setNoData;if(!i){i=this._oTable.setNoDataText;}if(!i){return;}var N=e;if(!N){N=this.getNoData();}if(!N){N=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_RESULTS");}i.call(this._oTable,N,true);};
s.prototype.updateTableHeaderState=function(){this._refreshHeaderText();this._setExcelExportEnableState();};
s.prototype._createContent=function(){var i,e=0,t,I,u,v=[];if(this._aExistingColumns&&this._aExistingColumns.length){this._aColumnKeys=[].concat(this._aExistingColumns.reverse());}I=this._parseIndexedColumns();e=this._aTableViewMetadata.length;for(i=0;i<e;i++){t=this._aTableViewMetadata[i];if(t.isInitiallyVisible){this._aColumnKeys.push(t.name);}else{v.push(t.name);}if(!(t.isInitiallyVisible||t.inResult)){this._mLazyColumnMap[t.name]=t;}else{u=this._createColumnForField(t);this._oTable.addColumn(u);}}this._insertIndexedColumns(I);this._aColumnKeys=this._aColumnKeys.concat(v);this._updateColumnsPopinFeature();this._storeInitialColumnSettings();};
s.prototype._createColumnForField=function(e){var i,I;I=this.getId()+"-"+e.name.replace(/[^A-Za-z0-9_.:-]+/g,"_");i=this._createColumn(e,I);e.isColumnCreated=true;i.data("p13nData",{columnKey:e.name,leadingProperty:e.name,additionalProperty:e.additionalProperty,navigationProperty:e.navigationProperty,sortProperty:e.sortable?e.name:undefined,filterProperty:e.filterable?e.name:undefined,fullName:e.hasValueListAnnotation?e.fullName:null,type:e.filterType,maxLength:e.maxLength,precision:e.precision,scale:e.scale,align:e.align,edmType:e.type,isCurrency:e.isCurrencyField,unit:e.unit,width:e.width,aggregationRole:e.aggregationRole});if(e.filterable&&i.setFilterProperty){i.setFilterProperty(e.name);}if(e.sortable&&i.setSortProperty){i.setSortProperty(e.name);}this._registerContentTemplateEvents(e.template);return i;};
s.prototype._parseIndexedColumns=function(){var i,e,t,I,u,v,w,x,y;var z=this._oTable.getColumns();var B=null;if(this._oTemplate&&this._oTemplate.getCells){B=this._oTemplate.getCells();}if(!z){return null;}I=[];e=z.length;for(i=0;i<e;i++){t=z[i];u=t.data("p13nData");v=null;w=null;if(u){v=u.columnIndex;w=u.columnKey;}x=-1;if(v!==null&&v!==undefined){x=parseInt(v,10);}if(!isNaN(x)&&x>-1){if(B){y=B[i];this._oTemplate.removeCell(y);}else{y=null;}this._aColumnKeys.splice(i-I.length,1);I.push({index:x,columnKey:w,column:t,template:y});this._oTable.removeColumn(t);}}I.sort(function(D,E){return D.index-E.index;});return I;};
s.prototype._insertIndexedColumns=function(I){var i,e,t;if(!I){return;}e=I.length;for(i=0;i<e;i++){t=I[i];this._aColumnKeys.splice(t.index,0,t.columnKey);this._oTable.insertColumn(t.column,t.index);if(t.template){this._oTemplate.insertCell(t.template,t.index);}}};
s.prototype._updateColumnsPopinFeature=function(){if(!this._isMobileTable||!this.getDemandPopin()){return;}var e=this._oTable.getColumns();if(!e){return;}e=e.filter(function(v){return v.getVisible();});e.sort(function(v,w){return v.getOrder()-w.getOrder();});var t,u=e.length;for(var i=0;i<u;i++){t=e[i];if(i<2){t.setDemandPopin(false);t.setMinScreenWidth("1px");}else{t.setDemandPopin(true);if(t.getPopinDisplay()!="WithoutHeader"){t.setPopinDisplay(sap.m.PopinDisplay.Inline);}t.setMinScreenWidth((i+1)*10+"rem");}}};
s.prototype._storeInitialColumnSettings=function(){this._aInitialSorters=[];P.createSort2Json(this._oTable,this._aInitialSorters,P.createArrayFromString(this.getIgnoreFromPersonalisation()));};
s.prototype._deactivateColumnsPopinFeature=function(){if(!this._isMobileTable){return;}var e=this._oTable.getColumns();if(!e){return;}var t,u=e.length;for(var i=0;i<u;i++){t=e[i];t.setDemandPopin(false);t.setMinScreenWidth("1px");}};
s.prototype._registerContentTemplateEvents=function(t){if(t&&t.attachChange){t.attachChange(function(e){this.fireFieldChange({changeEvent:e});}.bind(this));}};
s.prototype._updateInitialColumns=function(){var i=this._oTable.getColumns(),t=i?i.length:0,u,v,w;while(t--){w=null;u=i[t];if(u){v=u.data("p13nData");if(typeof v==="string"){try{v=JSON.parse(v);}catch(e){}if(v){u.data("p13nData",v);}}if(v){w=v["columnKey"];}if(w){this._aExistingColumns.push(w);}}}};
s.prototype._getVisibleColumnPaths=function(){var e={},t=[],E=[],u=this._oTable.getColumns(),i,v=u?u.length:0,w,x,y,z,B;var D=function(y,G){var H,I;if(y){I=y.split(",");H=I.length;while(H--){y=I[H];if(y&&G.indexOf(y)<0){G.push(y);}}}};for(i=0;i<v;i++){w=u[i];y=null;if(w.getVisible()){if(w.getLeadingProperty){y=w.getLeadingProperty();}x=w.data("p13nData");if(x){if(!y){y=x["leadingProperty"];}z=x["additionalProperty"];B=x["navigationProperty"];}if(y&&t.indexOf(y)<0){t.push(y);}D(z,t);D(B,E);}}e["select"]=t;e["expand"]=E;return e;};
s.prototype._createTable=function(){var e=this.getItems(),i=e?e.length:0,t,I;this._sAggregation="rows";while(i--){t=e[i];if(t instanceof m||t instanceof R){break;}t=null;}if(t){this._oTable=t;if(t instanceof j){this._isAnalyticalTable=true;}else if(t instanceof R){this._isMobileTable=true;this._oTemplate=(t.getItems()&&t.getItems().length>0)?t.getItems()[0]:new sap.m.ColumnListItem();t.removeAllItems();}else if(t instanceof n){this._isTreeTable=true;}this._updateInitialColumns();}else{I=this.getId()+"-ui5table";if(this.getTableType()==="AnalyticalTable"){this._isAnalyticalTable=true;this._oTable=new j(I,{enableCustomFilter:true});}else if(this.getTableType()==="ResponsiveTable"){this._isMobileTable=true;this._oTable=new R(I,{growing:true});this._oTemplate=new sap.m.ColumnListItem();}else if(this.getTableType()==="TreeTable"){this._isTreeTable=true;this._oTable=new n(I,{selectionMode:sap.ui.table.SelectionMode.MultiToggle});}else{this._oTable=new m(I,{selectionMode:sap.ui.table.SelectionMode.MultiToggle});}if(this._oTable.setVisibleRowCountMode){this._oTable.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);}this.insertItem(this._oTable,2);}if(!this._oTable.getLayoutData()){if(this._oTable instanceof sap.m.Table||(this._oTable.getVisibleRowCountMode&&this._oTable.getVisibleRowCountMode()!==sap.ui.table.VisibleRowCountMode.Auto)){this._oTable.setLayoutData(new sap.m.FlexItemData({growFactor:1,baseSize:"auto"}));}else{this._oTable.setLayoutData(new sap.m.FlexItemData({growFactor:1,baseSize:"0%"}));}}if(this._oTable.addAriaLabelledBy){this._oTable.addAriaLabelledBy(this.getId()+"-header");}this._oTable.addStyleClass("sapUiCompSmartTableInnerTable");this._oTable.setEnableBusyIndicator(true);this._oTable.setBusyIndicatorDelay(100);if(this._oTable.setEnableCustomFilter){this._oTable.setEnableCustomFilter(this.getEnableCustomFilter());}if(this._oTable.setShowColumnVisibilityMenu){this._oTable.setShowColumnVisibilityMenu(false);}if(this._oTable.getEnableCustomFilter&&this._oTable.getEnableCustomFilter()&&this._bIsFilterPanelEnabled){if(this._oTable.setEnableCellFilter){this._oTable.setEnableCellFilter(false);}if(this._oTable.attachCustomFilter){this._oTable.attachCustomFilter(this._showTableFilterDialog.bind(this));}}if(this._isAnalyticalTable){this._createColumn=this._createAnalyticalColumn;}else if(this._isMobileTable){this._sAggregation="items";this._createColumn=this._createMobileColumn;this._oTable.bindRows=this._oTable.bindItems;}if(!this._isMobileTable){this._oTable.attachEvent("_rowsUpdated",function(){this._setExcelExportEnableState();},this);}if(this._oTable._setLargeDataScrolling){this._oTable._setLargeDataScrolling(true);}};
s.prototype.getTable=function(){return this._oTable;};
s.prototype._showTableFilterDialog=function(e){if(this._oPersController){this._oPersController.openDialog({filter:{visible:true,payload:{column:e.getParameter("column")}}});}};
s.prototype._createColumn=function(e,i){var t;t=new k(i,{autoResizable:true,hAlign:e.align,width:e.width,visible:e.isInitiallyVisible,label:new L(i+"-header",{textAlign:e.align,text:e.label}),sorted:e.sorted,sortOrder:e.sortOrder,tooltip:e.quickInfo,showSortMenuEntry:e.sortable,showFilterMenuEntry:e.filterable&&this._bIsFilterPanelEnabled,name:e.fieldName,template:e.template});return t;};
s.prototype._createAnalyticalColumn=function(e,i){var t;if(e.isCurrencyField&&e.template.addStyleClass){e.template.addStyleClass("sapUiCompCurrencyBold");}t=new A(i,{autoResizable:true,hAlign:e.align,width:e.width,visible:e.isInitiallyVisible,inResult:e.inResult,label:new L(i+"-header",{textAlign:e.align,text:e.label}),tooltip:e.quickInfo,sorted:e.sorted,sortOrder:e.sortOrder,grouped:e.grouped,showIfGrouped:e.grouped,showSortMenuEntry:e.sortable,showFilterMenuEntry:e.filterable&&this._bIsFilterPanelEnabled,summed:e.summed,leadingProperty:e.name,template:e.template});return t;};
s.prototype._createMobileColumn=function(e,i){var t;t=new C(i,{hAlign:e.align,visible:e.isInitiallyVisible,header:new T(i+"-header",{textAlign:e.align,text:e.label,tooltip:e.quickInfo}),tooltip:e.quickInfo,width:e.isImageURL?"3em":undefined});if(this._oTemplate){this._oTemplate.addCell(e.template);}return t;};
s.prototype.fetchVariant=function(){if(this._oCurrentVariant==="STANDARD"||this._oCurrentVariant===null){return{};}return this._oCurrentVariant;};
s.prototype.applyVariant=function(v,e){this._oCurrentVariant=v;if(this._oCurrentVariant==="STANDARD"){this._oCurrentVariant=null;}P.recoverPersonalisationDateData(this._oCurrentVariant,this._oTable);if(e==="STANDARD"){this._oApplicationDefaultVariant=this._oCurrentVariant;}if(this._oApplicationDefaultVariant&&!e){this._oCurrentVariant=q.extend(true,{},this._oApplicationDefaultVariant,v);}this._bApplyingVariant=true;if(this._oTable._setSuppressRefresh){this._oTable._setSuppressRefresh(true);}if(this._oPersController){if(this._oCurrentVariant===null||q.isEmptyObject(this._oCurrentVariant)){this._oPersController.resetPersonalization(sap.ui.comp.personalization.ResetType.ResetFull);}else{this._oPersController.setPersonalizationData(this._oCurrentVariant);}}this._bApplyingVariant=false;this.fireAfterVariantApply({currentVariantId:this.getCurrentVariantId()});};
s.prototype.variantsInitialized=function(){this._bVariantInitialised=true;this._checkAndTriggerBinding();};
s.prototype._personalisationRequestColumns=function(e){var t=e.getParameter("columnKeys"),u,i,v,w,x,y={};v=t.length;for(i=0;i<v;i++){u=t[i];w=this._mLazyColumnMap[u];if(w){x=this._createColumnForField(w);if(this._isMobileTable){this._oTable.addColumn(x);}y[w.name]=x;}}this._oPersController.addColumns(y);};
s.prototype._beforePersonalisationModelDataChange=function(e){if(this._oTable.suspendUpdateAnalyticalInfo){this._oTable.suspendUpdateAnalyticalInfo();}};
s.prototype._afterPersonalisationModelDataChange=function(e){this._updateColumnsPopinFeature();};
s.prototype._personalisationModelDataChange=function(e){this._oCurrentVariant=e.getParameter("persistentData");var i=e.getParameter("changeType");var t=this._getChangeStatus(i);if(t===sap.ui.comp.personalization.ChangeType.Unchanged){return;}if(!this._bApplyingVariant){if(!this.getUseVariantManagement()){this._persistPersonalisation();}else if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(true);}}if(t===sap.ui.comp.personalization.ChangeType.ModelChanged&&this._isTableBound()){if(i&&i.columns===sap.ui.comp.personalization.ChangeType.ModelChanged){this._bForceTableUpdate=true;}if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindTable(null);}}};
s.prototype._getChangeStatus=function(e){if(!e){return sap.ui.comp.personalization.ChangeType.ModelChanged;}if(e.sort===sap.ui.comp.personalization.ChangeType.ModelChanged||e.filter===sap.ui.comp.personalization.ChangeType.ModelChanged||e.columns===sap.ui.comp.personalization.ChangeType.ModelChanged||e.group===sap.ui.comp.personalization.ChangeType.ModelChanged){return sap.ui.comp.personalization.ChangeType.ModelChanged;}if(e.sort===sap.ui.comp.personalization.ChangeType.TableChanged||e.filter===sap.ui.comp.personalization.ChangeType.TableChanged||e.columns===sap.ui.comp.personalization.ChangeType.TableChanged||e.group===sap.ui.comp.personalization.ChangeType.TableChanged){return sap.ui.comp.personalization.ChangeType.TableChanged;}return sap.ui.comp.personalization.ChangeType.Unchanged;};
s.prototype._getTablePersonalisationData=function(){if(!this._oCurrentVariant){return null;}var e=[],i=[],E=[],t,G,u,v,w,x,y,z,B="",I;this._sSelectForGroup=null;if(this._isMobileTable&&this._oCurrentVariant.group&&this._oCurrentVariant.group.groupItems){G=this._oCurrentVariant.group.groupItems[0];w=this._getColumnByKey(G.columnKey);if(w){B=w.getHeader().getText();}z=this._getPathFromColumnKeyAndProperty(G.columnKey,"sortProperty");if(z){y=z;u=new sap.ui.model.Sorter(y,G.operation==="GroupDescending",function(D){var K=D.getProperty(y);return{key:K,text:B?B+" : "+K:K};});this._sSelectForGroup=y;e.push(u);}}if(this._oCurrentVariant.sort){v=this._oCurrentVariant.sort.sortItems;}else{v=this._aInitialSorters;}if(v){v.forEach(function(D){var H=D.operation==="Descending";z=this._getPathFromColumnKeyAndProperty(D.columnKey,"sortProperty");if(z){if(u&&u.sPath===z){u.bDescending=H;}else{e.push(new sap.ui.model.Sorter(z,H));}}},this);}if(this._oCurrentVariant.filter){this._oCurrentVariant.filter.filterItems.forEach(function(D){var H=D.value1,K=D.value2;z=null;I=false;w=this._getColumnByKey(D.columnKey);if(w){if(w.getFilterProperty){z=w.getFilterProperty();}x=w.data("p13nData");if(x){I=x.type==="time";if(!z){z=x["filterProperty"];}}}if(z){if(I){if(H instanceof Date){H=o.getEdmTimeFromDate(H);}if(K instanceof Date){K=o.getEdmTimeFromDate(K);}}else if(H instanceof Date&&this._oTableProvider&&this._oTableProvider.getIsUTCDateHandlingEnabled()){H=F.getDateInUTCOffset(H);K=K?F.getDateInUTCOffset(K):K;}if(D.exclude){E.push(new sap.ui.model.Filter(z,h.NE,H));}else{i.push(new sap.ui.model.Filter(z,D.operation,H,K));}}},this);if(E.length){t=new sap.ui.model.Filter(E,true);}}return{filters:i,excludeFilters:t,sorters:e};};
s.prototype._getColumnByKey=function(e){var t,u,v,i,w;if(this._oTable){t=this._oTable.getColumns();v=t.length;for(i=0;i<v;i++){u=t[i];w=u.data("p13nData");if(w&&w.columnKey===e){return u;}}}return null;};
s.prototype._getPathFromColumnKeyAndProperty=function(e,i){var t=null,u,v;u=this._getColumnByKey(e);if(u){if(i=="sortProperty"&&u.getSortProperty){t=u.getSortProperty();}else if(i=="filterProperty"&&u.getFilterProperty){t=u.getFilterProperty();}else if(i=="leadingProperty"&&u.getLeadingProperty){t=u.getLeadingProperty();}if(!t){v=u.data("p13nData");if(v){t=v[i];}}}return t;};
s.prototype._persistPersonalisation=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.getVariantsInfo(function(v){var e,i=null;if(v&&v.length>0){i=v[0].key;}e=i!==null;this._oVariantManagement.fireSave({name:"Personalisation",global:false,overwrite:e,key:i,def:true});}.bind(this));}};
s.prototype.getCurrentVariantId=function(){return this._oVariantManagement?this._oVariantManagement.getCurrentVariantId():"";};
s.prototype.setCurrentVariantId=function(v){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setCurrentVariantId(v);}else{q.sap.log.error("sap.ui.comp.smarttable.SmartTable.prototype.setCurrentVariantId: VariantManagement does not exist, or is a page variant");}};
s.prototype.isInitialised=function(){return!!this.bIsInitialised;};
s.prototype._aAvailablePanels=["Columns","Sort","Filter","Group"];
s.prototype.openPersonalisationDialog=function(e){if(!e||this._aAvailablePanels.indexOf(e)<0){q.sap.log.warning("sap.ui.comp.smarttable.SmartTable.prototype.openPersonalisationDialog: "+e+" is not a valid panel!");return;}if(this._oPersController){var i={};i[e.toLowerCase()]={visible:true};this._oPersController.openDialog(i);}};
s.prototype.exit=function(){var i,e;if(this._oSmartFilter){this._oSmartFilter.detachSearch(this._reBindTable,this);this._oSmartFilter.detachFilterChange(this._filterChangeEvent,this);this._oSmartFilter=null;}if(this._oTableProvider&&this._oTableProvider.destroy){this._oTableProvider.destroy();}this._oTableProvider=null;if(this._oPersController&&this._oPersController.destroy){this._oPersController.destroy();}this._oPersController=null;if(this._oVariantManagement){this._oVariantManagement.detachSave(this._variantSaved,this);this._oVariantManagement.detachAfterSave(this._variantAfterSave,this);if(!this._oVariantManagement.isPageVariant()&&this._oVariantManagement.destroy){this._oVariantManagement.destroy();}}if(this._oFullScreenUtil){this._oFullScreenUtil.cleanUpFullScreen(this);this._oFullScreenUtil=null;}if(this._oEditModel){this._oEditModel.destroy();}if(this._oNoData&&this._oNoData.destroy){this._oNoData.destroy();}this.oNoData=null;if(this._aTableViewMetadata){i=this._aTableViewMetadata.length;while(i--){e=this._aTableViewMetadata[i];if(e&&!e.isColumnCreated&&e.template){e.template.destroy();}}}this._aTableViewMetadata=null;this._oEditModel=null;this._oVariantManagement=null;this._oCurrentVariant=null;this._oApplicationDefaultVariant=null;this._aExistingColumns=null;this._mLazyColumnMap=null;this._aColumnKeys=null;this._aAlwaysSelect=null;this._oCustomToolbar=null;if(this._oToolbar&&!this._bToolbarInsertedIntoItems){this._oToolbar.destroy();}this._oToolbar=null;if(this._oUseExportToExcel&&!this.getUseExportToExcel()){this._oUseExportToExcel.destroy();}this._oUseExportToExcel=null;this._oTablePersonalisationButton=null;this._oP13nDialogSettings=null;if(this._oTemplate){this._oTemplate.destroy();}this._oTemplate=null;this._oView=null;this._oTable=null;};
return s;},true);
sap.ui.predefine('sap/ui/comp/smartvariants/PersonalizableInfo',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element'],function(q,l,E){"use strict";
var P=E.extend("sap.ui.comp.smartvariants.PersonalizableInfo",{metadata:{library:"sap.ui.comp",properties:{type:{type:"string",group:"Misc",defaultValue:null},dataSource:{type:"string",group:"Misc",defaultValue:null},keyName:{type:"string",group:"Misc",defaultValue:null}},associations:{control:{type:"sap.ui.core.Control",multiple:false}}}});
return P;},true);
sap.ui.predefine('sap/ui/comp/smartvariants/SmartVariantManagement.designtime',[],function(){"use strict";return{annotations:{},properties:{persistencyKey:{ignore:true}},customData:{}};},false);
sap.ui.predefine('sap/ui/comp/smartvariants/SmartVariantManagementUi2',['jquery.sap.global','sap/ui/comp/library','./PersonalizableInfo','sap/ui/comp/variants/VariantItem','sap/ui/comp/variants/VariantManagement'],function(q,l,P,V,a){"use strict";
var S=a.extend("sap.ui.comp.smartvariants.SmartVariantManagementUi2",{
metadata:{library:"sap.ui.comp",aggregations:{personalizableControl:{type:"sap.ui.comp.smartvariants.PersonalizableInfo",multiple:false}},events:{initialise:{},afterSave:{}}},
renderer:function(r,c){a.getMetadata().getRenderer().render(r,c);}
});
S.prototype.init=function(){a.prototype.init.apply(this);this._oStandardVariant=null;this._oPersController=null;this._sKeyName=null;this._oContainer=null;this._oVariantSet=null;if(this.setLifecycleSupport){this.setLifecycleSupport(false);}this._setBackwardCompatibility(false);};
S.prototype.isPageVariant=function(){return false;};
S.prototype.getVariantContent=function(c,k){var C=null;if(k===this.STANDARDVARIANTKEY){C=this._getStandardVariant();}else{if(this._oVariantSet){var v=this._oVariantSet.getVariant(k);if(v){C=this._getContent(v);}}}return C;};
S.prototype.getCurrentVariantId=function(){var k="";var i=this._getSelectedItem();if(i){k=i.getKey();if(k===this.STANDARDVARIANTKEY){k="";}}return k;};
S.prototype.setCurrentVariantId=function(v,d){var c;var i=v;if(!i){i=this.STANDARDVARIANTKEY;}else{if(!this.getItemByKey(i)){i=this.STANDARDVARIANTKEY;}}if(this._oVariantSet){c=this.getVariantContent(this._oPersController,i);if(c){this._setSelectionByKey(i);if(d!==true){this._applyVariantContent(c);}}}};
S.prototype.addPersonalizableControl=function(c){this.setAggregation("personalizableControl",c,true);if(c.getControl()){this._oPersController=sap.ui.getCore().byId(c.getControl());}this._sKeyName=c.getKeyName();return this;};
S.prototype.initialise=function(){var c=this._getPersistencyKey();if(!c){q.sap.log.warning("PersistencyKey not set");this.fireEvent("initialise");return;}if(sap.ushell&&sap.ushell.Container){var t=this;sap.ushell.Container.getService("Personalization").getContainer(c,{validity:Infinity}).fail(function(){q.sap.log.error("Loading personalization container failed");t._setErrorValueState(t.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"));t.fireEvent("initialise");}).done(function(C){t._readPersonalization(C);t.fireEvent("initialise");t._setStandardVariant();t._setSelectedVariant();});return;}q.sap.log.error("Could not obtain the personalization container");this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"));this.fireEvent("initialise");};
S.prototype._setSelectedVariant=function(){var v=null;if(this._oVariantSet){var k=this.getSelectionKey();if(k){v=this._oVariantSet.getVariant(k);if(v){this._applyVariant(v);}}}};
S.prototype._reCreateVariantEntries=function(){var n=null;var v=null;var o,b;this.removeAllItems();if(this._oVariantSet){var m=this._oVariantSet.getVariantNamesAndKeys();if(m){for(n in m){if(n){b=new V({text:n,key:m[n]});this.addVariantItem(b);}}v=this._oVariantSet.getCurrentVariantKey();o=this._oVariantSet.getVariant(v);if(o){this.setDefaultVariantKey(v);this.setInitialSelectionKey(v);}}}};
S.prototype._getVariantSetAdapter=function(){var v=null;if(this._oContainer){v=new sap.ushell.services.Personalization.VariantSetAdapter(this._oContainer);}return v;};
S.prototype._createVariantEntries=function(){var v=this._getVariantSetAdapter();if(v){this._oVariantSet=v.getVariantSet("filterBarVariantSet");if(this._oVariantSet){this._reCreateVariantEntries();}else{this._oVariantSet=v.addVariantSet("filterBarVariantSet");}}};
S.prototype._readPersonalization=function(c){this._oContainer=c;if(this._oContainer){this._createVariantEntries();}};
S.prototype._savePersonalizationContainer=function(){var t=this;if(this._oContainer){this._oContainer.save().fail(function(){q.sap.log.error("Saving personalization data failed");t._setErrorValueState(t.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE_FAILED"));}).done(function(){q.sap.log.info("Saving personalization data succeeded");t.fireEvent("afterSave");});}};
S.prototype.fireSave=function(v){var o=null,n=null;var s;if(!this._oVariantSet){return;}if(v){if(v.overwrite){if(v.key){o=this._oVariantSet.getVariant(v.key);}}else{if(v.name){o=this._oVariantSet.addVariant(v.name);n=o;s=n.getVariantKey();this.replaceKey(v.key,s);this.setInitialSelectionKey(s);}}if(o){this.fireEvent("save",v);var b=this._fetchVariant();if(b){o.setItemValue("filterBarVariant",b.filterBarVariant);o.setItemValue("filterbar",b.filterbar);o.setItemValue("basicSearch","");if(b.basicSearch){o.setItemValue("basicSearch",b.basicSearch);}s=o.getVariantKey();if(v.def){if(s){this._oVariantSet.setCurrentVariantKey(s);}}else{var d=this._oVariantSet.getCurrentVariantKey();if(s===d){this._oVariantSet.setCurrentVariantKey(null);}}}this._savePersonalizationContainer();}}};
S.prototype._setStandardVariant=function(){if(this._oPersController&&this._oPersController.fireBeforeVariantSave){this._oPersController.fireBeforeVariantSave(a.STANDARD_NAME);}this._oStandardVariant=this._fetchVariant();};
S.prototype._getStandardVariant=function(){return this._oStandardVariant;};
S.prototype.getStandardVariant=function(){return this._getStandardVariant();};
S.prototype._setVariantName=function(v,s,n){var k;var f,F;if(this._oVariantSet){var N=this._oVariantSet.addVariant(n);f=v.getItemValue("filterBarVariant");N.setItemValue("filterBarVariant",f);F=v.getItemValue("filterbar");N.setItemValue("filterbar",F);k=this._oVariantSet.getCurrentVariantKey();if(k===s){this._oVariantSet.setCurrentVariantKey(N.getVariantKey());}this._oVariantSet.delVariant(s);k=N.getVariantKey();this.replaceKey(s,k);this.setInitialSelectionKey(k);}};
S.prototype.fireManage=function(v){var i;var r=null,d=null;var o;if(!this._oVariantSet){return;}if(v){r=v.renamed;d=v.deleted;if(r){for(i=0;i<r.length;i++){o=this._oVariantSet.getVariant(r[i].key);if(o){if(o.setVariantName){o.setVariantName(r[i].name);}else{this._setVariantName(o,r[i].key,r[i].name);}}}}if(d){var s=this._oVariantSet.getCurrentVariantKey();for(i=0;i<d.length;i++){o=this._oVariantSet.getVariant(d[i]);if(o){if(s&&s===o.getVariantKey()){this._oVariantSet.setCurrentVariantKey(null);}this._oVariantSet.delVariant(d[i]);}}}if(v.def){o=this._oVariantSet.getVariant(v.def);if(o||(v.def===this.STANDARDVARIANTKEY)){this._oVariantSet.setCurrentVariantKey(v.def);}}if((d&&d.length>0)||(r&&r.length>0)||(v.def)){this._savePersonalizationContainer();}}};
S.prototype.fireSelect=function(v){var o=null;if(v&&v.key){if(this._oVariantSet){if(v.key===this.STANDARDVARIANTKEY){o=this._getStandardVariant();}else{o=this._oVariantSet.getVariant(v.key);}}}if(o){this._applyVariant(o);}};
S.prototype._getContent=function(v){var c=null;if(v){if(v.getItemValue){c={filterbar:v.getItemValue("filterbar"),filterBarVariant:v.getItemValue("filterBarVariant")};var b=v.getItemValue("basicSearch");if(b){c.basicSearch=b;}}else{c=v;}}return c;};
S.prototype._applyVariant=function(v){var c=this._getContent(v);this._applyVariantContent(c);};
S.prototype._applyVariantContent=function(c){if(c&&this._oPersController&&this._oPersController.applyVariant){this._oPersController.applyVariant(c);}};
S.prototype._fetchVariant=function(){if(this._oPersController&&this._oPersController.fetchVariant){return this._oPersController.fetchVariant();}return null;};
S.prototype._getPersistencyKey=function(){if(this._oPersController&&this._sKeyName){return this._oPersController.getProperty(this._sKeyName);}return null;};
S.prototype._setErrorValueState=function(t){this.setEnabled(false);};
S.prototype.exit=function(){a.prototype.exit.apply(this,arguments);this._oStandardVariant=null;this._oPersController=null;this._sKeyName=null;this._oContainer=null;this._oVariantSet=null;};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartvariants/flexibility/changes/AddFavorite',['jquery.sap.global','sap/ui/fl/Utils'],function(q,U){"use strict";var A={};
A.applyChange=function(c,v,p){var C=c.getContent();if(q.isEmptyObject(C)){U.log.error("Change does not contain sufficient information to be applied");return false;}v.getItems().some(function(i){if(i.getKey()===C.key){i.setFavorite(C.visible);return true;}else if(i.getKey()===sap.ui.comp.STANDARD_VARIANT_NAME){v.setStandardFavorite(C.visible);return true;}});return true;};
A.completeChangeContent=function(c,s,p){if(q.isEmptyObject(s.content)){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.key){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(s.content.visible!==true){throw new Error("In oSpecificChangeInfo.content.select attribute should be 'true'");}c.setContent(s.content);};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartvariants/flexibility/changes/RemoveFavorite',['jquery.sap.global','sap/ui/fl/Utils'],function(q,U){"use strict";var R={};
R.applyChange=function(c,v,p){var C=c.getContent();if(q.isEmptyObject(C)){U.log.error("Change does not contain sufficient information to be applied");return false;}v.getItems().some(function(i){if(i.getKey()===C.key){i.setFavorite(C.visible);return true;}else if(i.getKey()===sap.ui.comp.STANDARD_VARIANT_NAME){v.setStandardFavorite(C.visible);return true;}});return true;};
R.completeChangeContent=function(c,s,p){if(q.isEmptyObject(s.content)){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.key){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(s.content.visible!==false){throw new Error("In oSpecificChangeInfo.content.select attribute should be 'false'");}c.setContent(s.content);};
return R;},true);
sap.ui.predefine('sap/ui/comp/state/UIState',["sap/ui/base/ManagedObject"],function(M){"use strict";
var U=M.extend("sap.ui.comp.state.UIState",{metadata:{library:"sap.ui.comp",properties:{presentationVariant:{type:"object"},selectionVariant:{type:"object"},variantName:{type:"string"}}}});
return U;});
sap.ui.predefine('sap/ui/comp/util/FormatUtil',["jquery.sap.global","sap/ui/model/FilterOperator","sap/ui/core/format/NumberFormat"],function(q,F,N){"use strict";var a={getFormattedExpressionFromDisplayBehaviour:function(d,i,D){var t=this.getTextsFromDisplayBehaviour(d,i,D);return t.secondText?t.firstText+" ("+t.secondText+")":t.firstText;},getTextsFromDisplayBehaviour:function(d,i,D){switch(d){case"descriptionAndId":return{firstText:D?D:i,secondText:D?i:undefined};case"idAndDescription":return{firstText:i,secondText:D?D:undefined};case"descriptionOnly":return{firstText:D?D:i,secondText:undefined};default:return{firstText:i,secondText:undefined};}},getFormattedBindingExpressionFromDisplayBehaviour:function(d,i,D){return a.getFormattedExpressionFromDisplayBehaviour(d,"{"+i+"}","{"+D+"}");},getFormattedRangeText:function(o,v,V,e){var t;if(v){switch(o){case F.EQ:t="="+v;break;case F.GT:t=">"+v;break;case F.GE:t=">="+v;break;case F.LT:t="<"+v;break;case F.LE:t="<="+v;break;case F.Contains:t="*"+v+"*";break;case F.StartsWith:t=v+"*";break;case F.EndsWith:t="*"+v;break;case F.BT:if(V){t=v+"..."+V;}break;default:t="";break;}}if(e&&t){t="!("+t+")";}return t;},_initialiseCurrencyFormatter:function(){if(!a._oCurrencyFormatter){a._oCurrencyFormatter=N.getCurrencyInstance({showMeasure:false});}if(!a._MAX_CURRENCY_DIGITS){a._MAX_CURRENCY_DIGITS=3;}a._initialiseSpaceChars();},_initialiseSpaceChars:function(){if(!a._FIGURE_SPACE||!a._PUNCTUATION_SPACE){a._FIGURE_SPACE='\u2007';a._PUNCTUATION_SPACE='\u2008';}},getAmountCurrencyFormatter:function(){a._initialiseCurrencyFormatter();if(!a._fAmountCurrencyFormatter){a._fAmountCurrencyFormatter=function(A,c){var v,C,p;if(A===undefined||A===null||c==="*"){return"";}v=a._oCurrencyFormatter.format(A,c);C=a._oCurrencyFormatter.oLocaleData.getCurrencyDigits(c);if(C===0){v+=a._PUNCTUATION_SPACE;}p=a._MAX_CURRENCY_DIGITS-C;if(p){v=q.sap.padRight(v,a._FIGURE_SPACE,v.length+p);}return v;};}return a._fAmountCurrencyFormatter;},getCurrencySymbolFormatter:function(){a._initialiseCurrencyFormatter();if(!a._fCurrencySymbolFormatter){a._fCurrencySymbolFormatter=function(c){if(!c||c==="*"){return"";}return a._oCurrencyFormatter.oLocaleData.getCurrencySymbol(c);};}return a._fCurrencySymbolFormatter;},getMeasureUnitFormatter:function(){a._initialiseSpaceChars();if(!a._fMeasureFormatter){a._fMeasureFormatter=function(v,u){if(v===undefined||v===null||u==="*"){return"";}return v+a._FIGURE_SPACE;};}return a._fMeasureFormatter;},getInlineMeasureUnitFormatter:function(){a._initialiseSpaceChars();if(!a._fInlineMeasureFormatter){a._fInlineMeasureFormatter=function(v,u){if(v===undefined||v===null||u==="*"){return"";}if(!u){return v;}return v+a._FIGURE_SPACE+u;};}return a._fInlineMeasureFormatter;},getInlineAmountFormatter:function(){a._initialiseCurrencyFormatter();if(!a._fInlineAmountFormatter){a._fInlineAmountFormatter=function(A,c){var v;if(A===undefined||A===null||c==="*"){return"";}v=a._oCurrencyFormatter.format(A,c);return v+a._FIGURE_SPACE+c;};}return a._fInlineAmountFormatter;},getEdmTimeFromDate:function(d){if(!a._oTimeFormat){q.sap.require("sap.ui.core.format.DateFormat");a._oTimeFormat=sap.ui.core.format.DateFormat.getTimeInstance({pattern:"'PT'HH'H'mm'M'ss'S'"});}return a._oTimeFormat.format(d);},getWidth:function(f,m,M){var w=f.maxLength||f.precision,W;if(!m){m=30;}if(!M){M=3;}if(f.type==="Edm.DateTime"&&f.displayFormat==="Date"){w="9em";}else if(w){if(w==="Max"){w=m+"";}W=parseInt(w,10);if(!isNaN(W)){W+=0.75;if(W>m){W=m;}else if(W<M){W=M;}w=W+"em";}else{w=null;}}if(!w){if(f.type==="Edm.Boolean"){w=M+"em";}else{w=m+"em";}}return w;},parseFilterNumericIntervalData:function(v){var r=[],R=v.match(RegExp("^(-?[^-]*)-(-?[^-]*)$"));if(R&&R.length>=2){r.push(R[1]);r.push(R[2]);}return r;}};return a;},true);
sap.ui.predefine('sap/ui/comp/util/FullScreenUtil',["jquery.sap.global","sap/m/Dialog","sap/ui/core/HTML"],function(q,D,H){"use strict";var F={toggleFullScreen:function(c,e,f,E){var $;if(e){$=c.$();$.css("height","100%");if($){if(!c._oHTML){c._oHTML=new H({preferDOM:false,afterRendering:function(){if(c&&c._oHTML){var a=c._oHTML.$(),C;if(a){C=a.children();C.remove();a.css("height","100%");a.append(c.getDomRef());}}}});}if(!c._oFullScreenDialog){c._oFullScreenDialog=new D({showHeader:false,stretch:true,escapeHandler:function(p){p.reject();},beforeClose:function(){if(c&&c._$placeHolder&&E){E();}},content:[c._oHTML]});if(f){c._oFullScreenDialog.attachAfterOpen(function(){f.focus();});c._oFullScreenDialog.attachAfterClose(function(){f.focus();});}c._oFullScreenDialog.addStyleClass($.closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"");c._oFullScreenDialog.addStyleClass("sapUiCompSmartFullScreenDialog");if(c._oFullScreenDialog.oPopup){c._oFullScreenDialog.oPopup.onsapescape=null;}}c._$placeHolder=q(document.createElement("div"));$.before(c._$placeHolder);c._oHTML.setContent("<div/>");}c._oFullScreenDialog.open();}else if(c._$placeHolder&&c._oHTML){$=c._oHTML.$();c._$placeHolder.replaceWith($.children());c._$placeHolder=null;$=null;if(c._oFullScreenDialog){c._oFullScreenDialog.close();}}},cleanUpFullScreen:function(c){if(c._oFullScreenDialog){c._oFullScreenDialog.destroy();c._oFullScreenDialog=null;}c._$placeHolder=null;c._oHTML=null;}};return F;},true);
sap.ui.predefine('sap/ui/comp/util/IdentifierUtil',["jquery.sap.global",'sap/ui/base/DataType'],function(q,D){"use strict";var I={replace:function(n){var t=D.getType("sap.ui.core.ID");if(!t.isValid(n)){n=n.replace(/[^A-Za-z0-9_.:]+/g,"_");if(!t.isValid(n)){n="A_"+n;}}return n;}};return I;},true);
sap.ui.predefine('sap/ui/comp/util/MultiCurrencyUtil',["jquery.sap.global"],function(q){"use strict";var M={isMultiCurrency:function(c){return c==="*";},openMultiCurrencyPopover:function(e,a){var s=sap.ui.getCore().byId(a.smartTableId);var A=s.getTable();var b=A.getBinding("rows");var c=a.currency;var C=a.unit;var o=a.template;var d,D;if(!b||!c||!C){return;}var l=e.getSource();var L=l.getParent();if(a.additionalParent){L=L.getParent();}var f=A.getAnalyticalInfoOfRow(A.getRowForCell(L));if(!f){return;}var i,F=[],S=[c,C],t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_TOTAL_TITLE")||"Total";if(b.aApplicationFilter){F=[].concat(b.aApplicationFilter);}if(f.groupTotal||f.group){var g=f.groupedColumns;for(i=0;i<g.length;i++){D=sap.ui.getCore().byId(g[i]).getLeadingProperty();if(!D){continue;}d=b.getAnalyticalInfoForColumn(D);if(d){D=d.dimensionPropertyName;}if(D){F.push(new sap.ui.model.Filter(D,sap.ui.model.FilterOperator.EQ,f.context.getProperty(D)));}}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}else if(!f.grandTotal){var p=Object.getOwnPropertyNames(b.getDimensionDetails());for(i=0;i<p.length;i++){F.push(new sap.ui.model.Filter(p[i],sap.ui.model.FilterOperator.EQ,f.context.getProperty(p[i])));}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}var h=o.clone();h.unbindProperty("visible");var P=a.smartTableId+"-multiUnitPopover",j,k;j=sap.ui.getCore().byId(P);if(!j){k=new sap.m.List(P+"-detailsList",{showSeparators:"None",ariaLabelledBy:P+"-title"});k.addStyleClass("sapUiContentPadding sapUiCompMultiCurrency");j=new sap.m.ResponsivePopover(P,{content:k});q.sap.syncStyleClass("sapUiSizeCompact",A,j);A.addDependent(j);}if(!k){k=sap.ui.getCore().byId(P+"-detailsList");}j.setTitle(t);j.setPlacement(f.grandTotal?"PreferredTopOrFlip":"PreferredBottomOrFlip");k.bindItems({path:b.getPath(),filters:F,parameters:{select:S.join(",")},templateShareable:false,template:new sap.m.CustomListItem({content:[h]})});j.openBy(l);}};return M;},true);
sap.ui.predefine('sap/ui/comp/valuehelpdialog/ItemsCollection',['jquery.sap.global','sap/ui/comp/util/FormatUtil'],function(q,F){"use strict";var I=function(){this.items={};};
I.prototype.add=function(k,o){this.items[k]=o;};
I.prototype.remove=function(k){delete this.items[k];};
I.prototype.removeAll=function(){this.items={};};
I.prototype.getItem=function(k){return this.items[k];};
I.prototype.getItems=function(){var k=[];for(var i in this.items){k.push(i);}return k;};
I.prototype.getSelectedItemsTokenArray=function(k,d,D){var t=[];for(var i in this.items){var o=this.items[i];var T,s;if(typeof o==="string"){s=i;T=o;}else{s=o[k];T=o[d];if(T===undefined){T=this.items[i];}else{if(!D){D="descriptionAndId";}T=F.getFormattedExpressionFromDisplayBehaviour(D,s,T);}}var a=new sap.m.Token({key:s,text:T,tooltip:T});if(typeof o!=="string"){a.data("row",o);a.data("longKey",i);}t.push(a);}return t;};
I.prototype.getModelData=function(){var m=[];for(var i in this.items){var a=this.items[i];if(typeof a==="string"){a={missing:i};}m.push(a);}return m;};
return I;},true);
sap.ui.predefine('sap/ui/comp/valuehelpdialog/ValueHelpDialog',['jquery.sap.global','sap/m/Dialog','sap/m/MessageBox','sap/m/MultiInput','sap/m/Token','sap/ui/comp/library','./ItemsCollection','sap/ui/core/Control','sap/ui/core/format/DateFormat','sap/ui/core/format/NumberFormat','sap/m/VBox','sap/m/HBox','sap/m/ButtonType','sap/ui/comp/util/FormatUtil','sap/m/DialogRenderer'],function(q,D,M,a,T,l,I,C,b,N,V,H,B,F,c){"use strict";
var d=D.extend("sap.ui.comp.valuehelpdialog.ValueHelpDialog",{
metadata:{library:"sap.ui.comp",properties:{basicSearchText:{type:"string",group:"Misc",defaultValue:""},supportMultiselect:{type:"boolean",group:"Misc",defaultValue:true},supportRanges:{type:"boolean",group:"Misc",defaultValue:false},supportRangesOnly:{type:"boolean",group:"Misc",defaultValue:false},key:{type:"string",group:"Misc",defaultValue:""},keys:{type:"string[]",group:"Misc",defaultValue:null},descriptionKey:{type:"string",group:"Misc",defaultValue:""},maxIncludeRanges:{type:"string",group:"Misc",defaultValue:'-1'},maxExcludeRanges:{type:"string",group:"Misc",defaultValue:'-1'},displayFormat:{type:"string",group:"Misc",defaultValue:""},tokenDisplayBehaviour:{type:"string",group:"Misc",defaultValue:""},filterMode:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{filterBar:{type:"sap.ui.comp.filterbar.FilterBar",multiple:false}},events:{ok:{parameters:{tokens:{type:"sap.m.Token[]"}}},cancel:{},selectionChange:{parameters:{tableSelectionParams:{type:"object"},updateTokens:{type:"object[]"},useDefault:{type:"boolean",defaultValue:false}}},tokenRemove:{parameters:{tokenKeys:{type:"string[]"},useDefault:{type:"boolean",defaultValue:false}}},updateSelection:{parameters:{tokenKeys:{type:"string[]"},useDefault:{type:"boolean",defaultValue:false}}}}},
renderer:c.render
});
d.prototype.setSupportMultiselect=function(e){this.setProperty("supportMultiselect",e);this._updatePropertySupportMultiselect(e);this._oTokenizerGrid.setVisible(e);this._oButtonOk.setVisible(e);return this;};
d.prototype._updatePropertySupportMultiselect=function(e){if(!this._oTable){return undefined;}if(!this._isPhone()){if(this._oTable.setSelectionMode){this._oTable.setSelectionMode(e?sap.ui.table.SelectionMode.MultiToggle:sap.ui.table.SelectionMode.Single);}}else if(this._oTable.setMode){this._oTable.setMode(e?sap.m.ListMode.MultiSelect:sap.m.ListMode.SingleSelectLeft);}return this;};
d.prototype.setSupportRanges=function(e){this.setProperty("supportRanges",e);this._updateNavigationControl();return this;};
d.prototype.setSupportRangesOnly=function(e){this.setProperty("supportRangesOnly",e);this._updateNavigationControl();return this;};
d.prototype.setTitle=function(t){this.setProperty("title",t);this._updateDlgTitle();return this;};
d.prototype.setFilterBar=function(o){this.setAggregation("filterBar",o);if(this._oMainLayout&&o){if(this._isPhone()){if(this._oFilterBar){this._oVBox.removeItem(this._oFilterBar);this._oFilterBar.detachInitialise(this._handleFilterBarInitialize);}}else if(this._oFilterBar){this._oMainLayout.removeItem(this._oFilterBar);this._oFilterBar.detachInitialise(this._handleFilterBarInitialize);}this._oFilterBar=o;this._oFilterBar.attachInitialise(this._handleFilterBarInitialize,this);if(this._oFilterBar){this._oFilterBar.addStyleClass("compVHSearch");if(this._isPhone()){var s=sap.ui.getCore().byId(this._oFilterBar.getBasicSearch());if(s instanceof sap.m.SearchField){s.setShowSearchButton(true);s.attachSearch(function(E){if(E.mParameters.refreshButtonPressed!==undefined){this.getFilterBar().search();}}.bind(this));}this._oFilterBar.setShowGoOnFB(false);this._oColSearchBox.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));this._oVBox.insertItem(this._oColSearchBox,0);this._oFilterBar.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));this._oVBox.insertItem(this._oFilterBar,1);this._oFilterBar.attachSearch(function(E){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW);}.bind(this));if(this._currentViewMode===sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW){this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(false);this._handleFilterBarInitialize();}}else{this._oFilterBar._setCollectiveSearch(this._oColSearchBox);this._oMainLayout.insertItem(this._oFilterBar,0);}}if(this._oFilterBar._oBasicSearchField){var e=this._oFilterBar._oBasicSearchField;e.setValue(this.getBasicSearchText());this.setInitialFocus(e);}}return this;};
d.prototype._handleFilterBarInitialize=function(){if(this._currentViewMode===sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW){this._oFilterBar._handleVisibilityOfToolbar();var s=this._oFilterBar&&this._oFilterBar.getFilterGroupItems()&&this._oFilterBar.getFilterGroupItems().length>0;this._oAdvancedSearchLink.setVisible(s);this._oFilterBar.setShowGoButton(!(this._oFilterBar&&this._oFilterBar.getBasicSearch()));}};
d.prototype.getFilterBar=function(){return this._oFilterBar;};
d.prototype.setBasicSearchText=function(t){this.setProperty("basicSearchText",t);if(this._oFilterBar&&this._oFilterBar._oBasicSearchField){this._oFilterBar._oBasicSearchField.setValue(t);}return this;};
d.prototype.setTokens=function(t){if(t.length){var n=0,k;for(var i=0;i<t.length;i++){var e=t[i];if(e.data("range")){var r=e.data("range");k=e.getKey();if(!k){do{k="range_"+n;n++;}while(this._oSelectedRanges[k]);}var f=this._getFormatedRangeTokenText(r.operation,r.value1,r.value2,r.exclude,r.keyField);this._addToken2Tokenizer(k,f,r.exclude?this._oExcludedTokens:this._oSelectedTokens);this._oSelectedRanges[k]=r;}else{k=e.getKey();var s=e.getText();var L=e.data("longKey");var R=e.data("row");if(!L){L=k;}this._oSelectedItems.add(L,R?R:e.getText());this._oSelectedTokens.addToken(new T({key:L,text:s,tooltip:s}));}}}else{this._oSelectedItems.removeAll();this._oSelectedRanges={};}};
d.prototype.open=function(){this.bCollectiveSearchActive=this.oSelectionTitle.getVisible()&&this.oSelectionButton.getVisible();if(this._oColSearchBox){this._oColSearchBox.setVisible(this.bCollectiveSearchActive);}if(!this._isPhone()){if(this.getSupportRangesOnly()||this.getFilterMode()){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW);}else if(!this._oTable){this._createDefaultTable();}this.setContentWidth(this._getDefaultContentWidth());}else{if(!this._oTable){this._createDefaultTable();}this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_MAIN_VIEW);}D.prototype.open.apply(this);return this;};
d.prototype.getTable=function(){if(!this._oTable){this._createDefaultTable();}return this._oTable;};
d.prototype.setTable=function(t){if(this._oTable){this._oMainLayout.removeItem(this._oTable);}this._bTableCreatedInternal=(arguments.length>1)&&(arguments[1]==true);if(t instanceof sap.ui.comp.smarttable.SmartTable){this._oTable=t.getTable();}else{this._oTable=t;}this._oTable.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0,growFactor:1}));this.theTable=this._oTable;this._initializeTable();this._oMainLayout.addItem(t);};
d.prototype._getDefaultContentWidth=function(){var n=0;if(this._oTable){n=this._oTable.getColumns().length;}var e=Math.max(1080,n*130);return e+"px";};
d.prototype.resetTableState=function(){if(this._oTable){if(this._oTable.unbindRows){this._oTable.unbindRows();}this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_PRESSSEARCH"));}};
d.prototype.TableStateSearchData=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_PRESSSEARCH"));};
d.prototype._updateNoDataText=function(n){if(this._oTable){if(this._oTable.setNoData){this._oTable.setNoData(n);}else if(this._oTable.setNoDataText){this._oTable.setNoDataText(n);}}};
d.prototype.TableStateDataFilled=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_NODATA"));};
d.prototype.TableStateDataSearching=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_SEARCHING"));};
d.prototype.init=function(){D.prototype.init.apply(this);this._bTableCreatedInternal=false;this._aIncludeRangeOperations={};this._aExcludeRangeOperations={};this.setStretch(this._isPhone());this.setResizable(!this._isPhone());this.setDraggable(!this._isPhone());this.bCollectiveSearchActive=false;this.addStyleClass("compValueHelpDialog");this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this._sTableTitle1=this._oRb.getText("VALUEHELPDLG_TABLETITLE1");this._sTableTitle2=this._oRb.getText("VALUEHELPDLG_TABLETITLE2");this._sTableTitleNoCount=this._oRb.getText("VALUEHELPDLG_TABLETITLENOCOUNT");this._currentViewMode=null;this._oSelectedItems=new I();this._oSelectedRanges={};this._createHeaderBar();this._createCollectiveSearch();this._createTokenizer();this._updateTokenizer();this._oVBox=new V({fitContainer:true});this.addContent(this._oVBox);this._oMainLayout=new V({fitContainer:true,items:[this._oFilterBar],layoutData:new sap.m.FlexItemData({growFactor:1,shrinkFactor:0})});this._createNavigationControl();this._updateNavigationControl();this._oVBox.addItem(this._oMainLayout);if(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode()){this._oVBox.addItem(this._oTokenizerGrid);}this._createFooterControls();this.setVerticalScrolling(false);this.setHorizontalScrolling(false);if(!sap.ui.Device.system.desktop){this._oVBox.attachBrowserEvent("touchmove",function(e){e.setMarked();});}if(!this._isPhone()){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_LIST_VIEW);}};
d.prototype._updateView=function(n){if(this._currentViewMode===n){return;}switch(n){case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_LIST_VIEW:this._validateRanges(function(){this._oTokenizerGrid.setVisible(this.getSupportMultiselect());this._oMainLayout.removeAllItems();if(this._oTabBar&&this._oTabBar.getSelectedKey()!==sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_LIST_VIEW){this._oTabBar.setSelectedKey(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_LIST_VIEW);}this._oMainLayout.addItem(this._oFilterBar);this._oMainLayout.addItem(this._oTable);this._updateDlgTitle();}.bind(this),function(){this._oTabBar.setSelectedKey(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW);this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW);}.bind(this));break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW:if(this.getSupportRanges()){this.bCollectiveSearchActive=this.oSelectionTitle.getVisible()&&this.oSelectionButton.getVisible();this._oMainLayout.removeAllItems();if(this._oTabBar&&this._oTabBar.getSelectedKey()!==sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW){this._oTabBar.setSelectedKey(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW);}this._oMainLayout.addItem(this._getRanges());this._oButtonOk.setVisible(this.getSupportRangesOnly()||this.getSupportMultiselect());this._oTokenizerGrid.setVisible(this.getSupportMultiselect());if(!(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode())){this._oTokenizerGrid.setVisible(false);}}break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_MAIN_VIEW:this.setVerticalScrolling(false);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(true);this._updateNavigationControl();this._oAdvancedSearchLink.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(false);this._oFilterBar.setFilterBarExpanded(false);}this._oTable.setVisible(false);this._oTokenizerGrid.setVisible(this.getSupportMultiselect());if(!(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode())){this._oTokenizerGrid.setVisible(false);}if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(true);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(false);this._bNoneMainView=false;if(!this._oTokenizerGrid.getVisible()&&!(this._oSelectItemLI.getVisible()&&this._oDefineConditionsLI.getVisible())){this._bNoneMainView=true;if(this._oSelectItemLI.getVisible()){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW);}if(this._oDefineConditionsLI.getVisible()){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_CONDITIONS_VIEW);}return;}break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(this.bCollectiveSearchActive);this._oMainListMenu.setVisible(false);if(this._oFilterBar){var s=this._oFilterBar&&this._oFilterBar.getFilterGroupItems()&&this._oFilterBar.getFilterGroupItems().length>0;this._oAdvancedSearchLink.setVisible(s);this._oFilterBar.setShowGoButton(!(this._oFilterBar&&this._oFilterBar.getBasicSearch()));this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(false);}this._oTable.setVisible(true);this._oTokenizerGrid.setVisible(false);if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(this.getSupportMultiselect());this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(!this._bNoneMainView);break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_SEARCH_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(true);}this._oAdvancedSearchLink.setVisible(false);this._oTable.setVisible(false);this._oTokenizerGrid.setVisible(false);if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(true);this._oButtonClear.setVisible(true);this._oButtonOk.setVisible(false);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(true);break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_CONDITIONS_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(false);}this._oAdvancedSearchLink.setVisible(false);this._oTable.setVisible(false);this._oTokenizerGrid.setVisible(false);if(!this._oRanges){this._oMainLayout.addItem(this._getRanges());}this._oRanges.setVisible(true);this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(true);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(!this._bNoneMainView);break;default:break;}if(this._oMainListMenu&&this._oVBox){if(this._oFilterBar){this._oFilterBar._handleVisibilityOfToolbar();}this._oVBox.rerender();}this._currentViewMode=n;this._updateDlgTitle();};
d.prototype._changeTableRowSelectionForKey=function(k,s){var i;var t=this._oTable;this._bIgnoreSelectionChange=true;if(sap.ui.table.Table&&t instanceof sap.ui.table.Table){var r=t.getBinding("rows");if(r){if(r.aKeys){for(i=0;i<r.aKeys.length;i++){if(decodeURIComponent(r.aKeys[i])===k){if(s){t.addSelectionInterval(i,i);}else{t.removeSelectionInterval(i,i);}break;}}}else{this.oRows=t.getBinding("rows");if(this.oRows.aIndices){for(i=0;i<this.oRows.aIndices.length;i++){var o=t.getContextByIndex(this.oRows.aIndices[i]);if(o){var R=o.getObject();if(R[this.getKey()]===k){if(s){t.addSelectionInterval(i,i);}else{t.removeSelectionInterval(i,i);}break;}}}}}}}else{for(i=0;i<t.getItems().length;i++){var e=t.getItems()[i];var f=e.getBindingContext().getObject();if(f[this.getKey()]===k){t.setSelectedItem(e,s);break;}}}this._bIgnoreSelectionChange=false;};
d.prototype.update=function(){var i,j,r,o;var k;var e=this._oSelectedItems.getItems();var f={tokenKeys:e,useDefault:false};this._bIgnoreSelectionChange=true;if(this._hasListeners("updateSelection")){this.fireUpdateSelection(f);}else{f.useDefault=true;}if(f.useDefault){if(sap.ui.table.Table&&this._oTable instanceof sap.ui.table.Table){this.oRows=this._oTable.getBinding("rows");this._oTable.clearSelection();if(this.oRows.aKeys){var K=this.getKeys();var R=K&&K.length>1?this.getKey()+"=":"";for(j=0;j<e.length;j++){k=e[j];var s=R+"'"+k+"'";for(i=0;i<this.oRows.aKeys.length;i++){var g=decodeURIComponent(this.oRows.aKeys[i]);var h=g===k;if(h||g.indexOf(s)>=0){if(!h){this._oSelectedItems.remove(k);var t=this._getTokenByKey(k,this._oSelectedTokens);if(t){t.setKey(g);}}o=this._oTable.getContextByIndex(i);if(o){r=o.getObject();this._oSelectedItems.add(g,r);}this._oTable.addSelectionInterval(i,i);break;}}}}else if(this.oRows.aIndices){this._oTable.clearSelection();for(j=0;j<e.length;j++){var m=e[j];for(i=0;i<this.oRows.aIndices.length;i++){o=this._oTable.getContextByIndex(this.oRows.aIndices[i]);if(o){r=o.getObject();if(r[this.getKey()]===m){this._oSelectedItems.add(r[this.getKey()],r);this._oTable.addSelectionInterval(i,i);break;}}}}}}else{var n=this._oTable;for(j=0;j<e.length;j++){k=e[j];for(i=0;i<n.getItems().length;i++){var p=n.getItems()[i];var u=p.getBindingContext().getObject();if(u[this.getKey()]===k){n.setSelectedItem(p,true);break;}}}}}this._bIgnoreSelectionChange=false;this._updateTitles();};
d.prototype._createHeaderBar=function(){this._oTitle=new sap.m.Title();var o=null;if(this._isPhone()){o=new sap.m.Button({visible:false,type:B.Back,press:function(e){if(this._currentViewMode===sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_SEARCH_VIEW){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW);}else{this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_MAIN_VIEW);}}.bind(this)});this._oBackButton=o;}this.setCustomHeader(new sap.m.Bar({contentLeft:o,contentMiddle:this._oTitle}));};
d.prototype._createCollectiveSearch=function(){this.oSelectionTitle=new sap.m.Text({visible:false,wrapping:false}).addStyleClass("compVHColSearchText");this.oSelectionButton=new sap.m.Button({icon:"sap-icon://arrow-down",tooltip:this._oRb.getText("VALUEHELPVALDLG_SEARCHTEMPLATES_TOOLTIP"),type:sap.m.ButtonType.Transparent,visible:false,ariaLabelledBy:this.oSelectionTitle}).addStyleClass("compVHColSearchBtn");this._oColSearchBox=new H({fitContainer:true,visible:this.oSelectionButton.getVisible(),items:[this.oSelectionTitle,this.oSelectionButton]});};
d.prototype._createFooterControls=function(){this._oButtonOk=new sap.m.Button({text:this._oRb.getText("VALUEHELPDLG_OK"),press:this._onCloseAndTakeOverValues.bind(this),visible:this.getSupportMultiselect(),layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow})});this._oButtonCancel=new sap.m.Button({text:this._oRb.getText("VALUEHELPDLG_CANCEL"),press:this._onCancel.bind(this),layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow})});if(this._isPhone()){this._oButtonGo=new sap.m.Button({text:this._oRb.getText("VALUEHELPDLG_GO"),type:sap.m.ButtonType.Emphasized,press:this._onGo.bind(this),visible:false,layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow})});this._oButtonClear=new sap.m.Button({text:this._oRb.getText("VALUEHELPDLG_CLEAR"),press:this._onClear.bind(this),visible:false,layoutData:new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow})});this.addButton(this._oButtonGo);this.addButton(this._oButtonClear);}this.addButton(this._oButtonOk);this.addButton(this._oButtonCancel);};
d.prototype._createTokenizer=function(){if(this._oTokenizerGrid){return this._oTokenizerGrid;}this._oSelectedTokenTitle=new sap.ui.core.InvisibleText();this._oSelectedTokens=new sap.m.Tokenizer({tokenUpdate:function(e){if(this._ignoreRemoveToken){return;}if(e.getParameter("type")===sap.m.Tokenizer.TokenChangeType.Removed){var r=e.getParameter("removedTokens");var t=[];var R=[];for(var j=0;j<r.length;j++){var f=r[j];var k=f.getKey();if(this._oSelectedRanges&&this._oSelectedRanges[k]){R.push(k);}else{t.push(k);this._oSelectedItems.remove(k);this._removeTokenFromTokenizer(k,this._oSelectedTokens);}}this._removeRangeByKey(R,false);this._updateTitles();var g={tokenKeys:t,useDefault:false};if(this._hasListeners("tokenRemove")){this._bIgnoreSelectionChange=true;this.fireTokenRemove(g);this._bIgnoreSelectionChange=false;}else{g.useDefault=true;}if(g.useDefault){t.forEach(function(s){this._changeTableRowSelectionForKey(s,false);}.bind(this));}if(r.length===1){setTimeout(function(){if(this._oSelectedTokens.getTokens()){var i=this._oSelectedTokens.getTokens().length-1;if(i>=0){this._oSelectedTokens.getTokens()[i].focus();}}}.bind(this));}this._updateTitles();}}.bind(this),ariaLabelledBy:this._oSelectedTokenTitle}).addStyleClass("compVHTokensDiv");this._oRemoveAllSelectedItemsBtn=new sap.m.Button({type:sap.m.ButtonType.Transparent,icon:sap.ui.core.IconPool.getIconURI("sys-cancel"),tooltip:this._oRb.getText("VALUEHELPVALDLG_REMOVETOKENS_TOOLTIP"),press:function(){this._oSelectedTokens.destroyTokens();this._removeRangeByKey(Object.keys(this._oSelectedRanges),false);this._oSelectedItems.removeAll();this._bIgnoreSelectionChange=true;if(this._oTable&&this._oTable.clearSelection){this._oTable.clearSelection();}if(this._oTable&&this._oTable.removeSelections){this._oTable.removeSelections();}this._bIgnoreSelectionChange=false;this._updateTitles();}.bind(this),ariaLabelledBy:this._oSelectedTokenTitle}).addStyleClass("compVHRemoveAllBtn");var h=new sap.ui.layout.HorizontalLayout({content:[this._oSelectedTokens,this._oRemoveAllSelectedItemsBtn]}).addStyleClass("compVHTokenizerHLayout");this._oIncludeTokenGrid=new sap.ui.layout.Grid({width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:[this._oSelectedTokenTitle,h]});this._oExcludedTokenTitle=new sap.m.Text().addStyleClass("compVHSelectedItemsText");this._oExcludedTokens=new sap.m.Tokenizer({tokenChange:function(e){if(this._ignoreRemoveToken){return;}if(e.getParameter("type")===sap.m.Tokenizer.TokenChangeType.Removed||e.getParameter("type")===sap.m.Tokenizer.TokenChangeType.RemovedAll){var r=e.getParameter("removedTokens");var t=[];if(!r||r.length==0){r=[e.getParameter("token")];}if(!r||r.length==0){r=[e.getParameter("tokens")];}for(var j=0;j<r.length;j++){var f=r[j];var k=f.getKey();if(this._oSelectedRanges&&this._oSelectedRanges[k]){t.push(k);}}this._removeRangeByKey(t,true);this._updateTitles();}}.bind(this),ariaLabelledBy:this._oExcludedTokenTitle}).addStyleClass("compVHTokensDiv");this._oRemoveAllExcludeItemsBtn=new sap.m.Button({type:sap.m.ButtonType.Transparent,icon:sap.ui.core.IconPool.getIconURI("sys-cancel"),tooltip:this._oRb.getText("VALUEHELPVALDLG_REMOVETOKENS_TOOLTIP"),press:function(){this._oExcludedTokens.destroyTokens();this._removeRangeByKey(Object.keys(this._oSelectedRanges),true);this._updateTitles();}.bind(this),ariaLabelledBy:this._oExcludedTokenTitle}).addStyleClass("compVHRemoveAllBtn");var o=new sap.ui.layout.HorizontalLayout({content:[this._oExcludedTokens,this._oRemoveAllExcludeItemsBtn]}).addStyleClass("compVHTokenizerHLayout");this._oExcludeTokenGrid=new sap.ui.layout.Grid({width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:[this._oExcludedTokenTitle,o]});this._oTokenizerPanel=new sap.m.Panel({expanded:sap.ui.Device.system.desktop,expandable:true,expandAnimation:true,headerText:"",width:"auto",content:[this._oIncludeTokenGrid,this._oExcludeTokenGrid],expand:function(e){this._updateTokenizer();if(e.mParameters.expand&&!(this._oTable instanceof sap.m.Table)){var s=q.sap.domById(this.getId()+"-scrollCont");if(s&&s.scrollTop){s.stop().animate({scrollTop:"1000"},1000);}}}.bind(this)}).addStyleClass("compVHBackgroundTransparent").addStyleClass("compVHTokensPanel").addStyleClass("compValueHelpDialogTokens");if(this._isPhone()){this._oSelectedTokens.addStyleClass("sapMTokenizerMultiLine");this._oExcludedTokens.addStyleClass("sapMTokenizerMultiLine");}this._oTokenizerGrid=new sap.ui.layout.Grid({width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:this._oTokenizerPanel}).addStyleClass("compVHDarkBackground");return this._oTokenizerGrid;};
d.prototype._addToken2Tokenizer=function(k,t,o){var e=this._getTokenByKey(k,o);var s=(typeof t==="string")?t:"";if(e){e.setText(t);e.setTooltip(s);}else{o.addToken(new T({key:k,text:t,tooltip:s}));this._updateTokenizer();}};
d.prototype._getTokenByKey=function(k,t){var e=t.getTokens();for(var i=0;i<e.length;i++){var f=e[i];if(f.getKey()===k){return f;}}return null;};
d.prototype._removeToken=function(k){if(!this._removeTokenFromTokenizer(k,this._oSelectedTokens)){this._removeTokenFromTokenizer(k,this._oExcludedTokens);}};
d.prototype._removeTokenFromTokenizer=function(k,t){var e=this._getTokenByKey(k,t);if(e){this._ignoreRemoveToken=true;t.removeToken(e);this._ignoreRemoveToken=false;this._updateTokenizer();return true;}return false;};
d.prototype._updateTokenizer=function(){var e=false;if(this._oTokenizerPanel){e=this._oTokenizerPanel.getExpanded();}var n=this._oSelectedTokens.getTokens().length;var f=this._oExcludedTokens.getTokens().length;var s=this._oRb.getText("VALUEHELPDLG_SELECTEDITEMS");var g=this._oRb.getText("VALUEHELPDLG_NONESELECTEDITEMS");var S=s.replace("{0}",n.toString());var E=this._oRb.getText("VALUEHELPDLG_EXCLUDEDITEMS",f.toString());var t=n===0?g:S;if(this._oTokenizerPanel){if(!e){if(this._isPhone()){S=this._oRb.getText("VALUEHELPDLG_SELECTEDITEMS_SHORT",n.toString());E=this._oRb.getText("VALUEHELPDLG_EXCLUDEDITEMS_SHORT",f.toString());}t="";if(n!==0){t=S;}if(f!==0){t+=(n!==0?" / ":"")+E;}if(t===""){t=g;}}else if(n===0&&f!==0){t=E;E="";}this._oTokenizerPanel.setHeaderText(t);this._oSelectedTokenTitle.setText(t);}else{this._oSelectedTokenTitle.setText(t);}this._oRemoveAllSelectedItemsBtn.setEnabled(n!==0);this._oExcludedTokenTitle.setText(E);if(n===0&&f!==0){this._oIncludeTokenGrid.addStyleClass("displayNone");if(!this._isPhone()){this._oExcludedTokenTitle.addStyleClass("displayNone");}}else{this._oIncludeTokenGrid.removeStyleClass("displayNone");this._oExcludedTokenTitle.removeStyleClass("displayNone");}if(f===0){this._oExcludeTokenGrid.addStyleClass("displayNone");}else{this._oExcludeTokenGrid.removeStyleClass("displayNone");}};
d.prototype._createNavigationControl=function(){if(!this._isPhone()){this._oTabBar=new sap.m.IconTabBar({upperCase:true,expandable:false,items:[new sap.m.IconTabFilter({visible:true,text:this._oRb.getText("VALUEHELPDLG_ITEMSTABLE"),key:sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_LIST_VIEW}),new sap.m.IconTabFilter({visible:true,text:this._oRb.getText("VALUEHELPDLG_RANGES"),key:sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW})],select:function(o){this._updateView(o.getParameters().key);}.bind(this)});this._oTabBar.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));this._oVBox.addItem(this._oTabBar);}else{this._oSelectItemLI=new sap.m.StandardListItem({type:sap.m.ListType.Navigation,title:this._oRb.getText("VALUEHELPDLG_ITEMSTABLE")}).data("key",sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW);this._oDefineConditionsLI=new sap.m.StandardListItem({type:sap.m.ListType.Navigation,title:this._oRb.getText("VALUEHELPDLG_RANGES")}).data("key",sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_CONDITIONS_VIEW);this._oMainListMenu=new sap.m.List({mode:sap.m.ListMode.None,items:[this._oSelectItemLI,this._oDefineConditionsLI],itemPress:function(e){if(e){this._updateView(e.mParameters.listItem.data("key"));}}.bind(this)});this._oMainListMenu.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));this._oVBox.addItem(this._oMainListMenu);this._oAdvancedSearchLink=new sap.m.Link({text:this._oRb.getText("VALUEHELPDLG_ADVANCEDSEARCH"),press:function(){this._updateView(sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_SEARCH_VIEW);}.bind(this)}).addStyleClass("compVHAdvancedSearchLink");this._oAdvancedSearchLink.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));this._oVBox.addItem(this._oAdvancedSearchLink);}};
d.prototype._updateNavigationControl=function(){var L=!this.getSupportRangesOnly();var r=this.getSupportRangesOnly()||this.getSupportRanges();if(this._oTabBar){var t=this._oTabBar.getItems();t[0].setVisible(L);t[1].setVisible(r);this._oTabBar.setVisible(L&&r);this._updateDlgTitle();}if(this._oMainListMenu){this._oSelectItemLI.setVisible(L);this._oDefineConditionsLI.setVisible(r);}};
d.prototype._removeRangeByKey=function(k,i){var K=k;if(typeof K==="string"){K=[K];}K.forEach(function(k,e,K){var r=this._oSelectedRanges[k];if(r.exclude===i){if(!r._oGrid){delete this._oSelectedRanges[k];if(this._oFilterPanel){var o=r.exclude?this._oFilterPanel._oExcludeFilterPanel:this._oFilterPanel._oIncludeFilterPanel;if(K.length==1){o.removeCondition(k);}else{o._removeConditionFromMap(k);}}}}},this);if(K.length>1&&this._oFilterPanel){var o=i?this._oFilterPanel._oExcludeFilterPanel:this._oFilterPanel._oIncludeFilterPanel;o._clearConditions();o._fillConditions();}};
d.prototype._getRanges=function(){if(!this._oRanges){this._oRanges=this._createRanges();}return this._oRanges;};
d.prototype._createRanges=function(){q.sap.require("sap.m.P13nConditionPanel");q.sap.require("sap.m.P13nFilterPanel");this._oFilterPanel=new sap.m.P13nFilterPanel({maxIncludes:this.getMaxIncludeRanges(),maxExcludes:this.getMaxExcludeRanges(),containerQuery:true,addFilterItem:function(E){var p=E.mParameters;var o={exclude:p.filterItemData.getExclude(),keyField:p.filterItemData.getColumnKey(),operation:p.filterItemData.getOperation(),value1:p.filterItemData.getValue1(),value2:p.filterItemData.getValue2()};this._oSelectedRanges[p.key]=o;var f=this._getKeyFieldByKey(o.keyField);o.value1=this._convertValue2Object(o.value1,f.type);o.value2=this._convertValue2Object(o.value2,f.type);this._oFilterPanel.addFilterItem(p.filterItemData);var s=this._getFormatedRangeTokenText(o.operation,o.value1,o.value2,o.exclude,o.keyField);this._addToken2Tokenizer(p.key,s,o.exclude?this._oExcludedTokens:this._oSelectedTokens);this._updateTokenizer();}.bind(this),removeFilterItem:function(E){var p=E.mParameters;delete this._oSelectedRanges[p.key];this._removeToken(p.key);this._updateTokenizer();}.bind(this),updateFilterItem:function(E){var p=E.mParameters;var o=this._oSelectedRanges[p.key];o.exclude=p.filterItemData.getExclude();o.keyField=p.filterItemData.getColumnKey();o.operation=p.filterItemData.getOperation();o.value1=p.filterItemData.getValue1();o.value2=p.filterItemData.getValue2();var f=this._getKeyFieldByKey(o.keyField);o.value1=this._convertValue2Object(o.value1,f.type);o.value2=this._convertValue2Object(o.value2,f.type);var s=this._getFormatedRangeTokenText(o.operation,o.value1,o.value2,o.exclude,o.keyField);this._addToken2Tokenizer(p.key,s,o.exclude?this._oExcludedTokens:this._oSelectedTokens);this._updateTokenizer();}.bind(this)});this._oFilterPanel._oIncludeFilterPanel.setDisplayFormat(this.getDisplayFormat());this._oFilterPanel._oExcludeFilterPanel.setDisplayFormat(this.getDisplayFormat());this._oFilterPanel._oIncludeFilterPanel._fSuggestCallback=this._fSuggestCallback;this._oFilterPanel._oExcludeFilterPanel._fSuggestCallback=this._fSuggestCallback;this._oFilterPanel._oIncludeFilterPanel._sAddRemoveIconTooltipKey="CONDITION";this._oFilterPanel._oExcludeFilterPanel._sAddRemoveIconTooltipKey="CONDITION";var t;if(this._aIncludeRangeOperations){for(t in this._aIncludeRangeOperations){this._oFilterPanel.setIncludeOperations(this._aIncludeRangeOperations[t],t);}}if(this._aExcludeRangeOperations){for(t in this._aExcludeRangeOperations){this._oFilterPanel.setExcludeOperations(this._aExcludeRangeOperations[t],t);}}if(this._aRangeKeyFields){this._aRangeKeyFields.forEach(function(i){this._oFilterPanel.addItem(new sap.m.P13nItem({columnKey:i.key,text:i.label,type:i.type,maxLength:i.maxLength,scale:i.scale,precision:i.precision,isDefault:i.isDefault,values:i.type==="boolean"?this._getBooleanValues():null}));},this);}if(this._oSelectedRanges){for(var r in this._oSelectedRanges){var e=this._oSelectedRanges[r];this._oFilterPanel.addFilterItem(new sap.m.P13nFilterItem({key:r,exclude:e.exclude,columnKey:e.keyField,operation:e.operation,value1:e.value1,value2:e.value2}));}}var R=new sap.ui.layout.Grid({width:"100%",defaultSpan:"L12 M12 S12",vSpacing:0,hSpacing:0,content:[this._oFilterPanel]});this._sValidationDialogTitle=this._oRb.getText("VALUEHELPVALDLG_TITLE");this._sValidationDialogMessage=this._oRb.getText("VALUEHELPVALDLG_MESSAGE");this._sValidationDialogFieldMessage=this._oRb.getText("VALUEHELPVALDLG_FIELDMESSAGE");return R;};
d.prototype.suggest=function(s){this._fSuggestCallback=s;if(this._oFilterPanel){if(this._oFilterPanel._oIncludeFilterPanel){this._oFilterPanel._oIncludeFilterPanel._fSuggestCallback=this._fSuggestCallback;}if(this._oFilterPanel._oExcludeFilterPanel){this._oFilterPanel._oExcludeFilterPanel._fSuggestCallback=this._fSuggestCallback;}}};
d.prototype._getBooleanValues=function(){q.sap.require("sap.ui.model.odata.type.Boolean");var o=new sap.ui.model.odata.type.Boolean();var e=null;if(o){e=["",o.formatValue(false,"string"),o.formatValue(true,"string")];}return e;};
d.prototype._convertValue2Object=function(v,t){if(!v){return v;}var e=v;if(t==="date"){e=new Date(v);}if(t==="time"){e=new Date(v);}if(t==="numeric"){e=parseFloat(v);}if(t==="boolean"){if(v===""){e=null;}else{e=v=='true';}}return e;};
d.prototype._getKeyFieldByKey=function(k){var o;if(this._aRangeKeyFields){this._aRangeKeyFields.some(function(e){if(typeof e!=="string"){if(e.key===k){o=e;return true;}}return false;});}return o;};
d.prototype._validateRanges=function(f,e){if(this._oRanges){if(!this._oRanges.getParent()){f();return;}var i=this._oFilterPanel.validateConditions();if(!i){M.show(this._sValidationDialogMessage,{icon:M.Icon.WARNING,title:this._sValidationDialogTitle,actions:[M.Action.OK,M.Action.CANCEL],styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"",onClose:function(r){if(r===M.Action.OK&&f){f();}if(r===M.Action.CANCEL&&e){e();}}});return;}}f();};
d.prototype.setUpdateSingleRowCallback=function(s){this.fSingleRowCallback=s;this._updateNavigationControl();};
d.prototype._createDefaultTable=function(){if(!this._isPhone()){sap.ui.getCore().loadLibrary("sap.ui.table");q.sap.require("sap.ui.table.Table");this.setTable(new sap.ui.table.Table(),true);}else{this.setTable(new sap.m.Table(),true);this.TableStateSearchData();}};
d.prototype._initializeTable=function(){if(sap.ui.table.Table&&this._oTable instanceof sap.ui.table.Table){this._oTable.setTitle(sap.ui.Device.system.desktop?this._sTableTitleNoCount:null);if(this._bTableCreatedInternal){this._oTable.setSelectionBehavior(sap.ui.table.SelectionBehavior.Row);}this._oTable.setSelectionMode(this.getSupportMultiselect()?sap.ui.table.SelectionMode.MultiToggle:sap.ui.table.SelectionMode.Single);this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_PRESSSEARCH"));this._oTable.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Fixed);this._oTable.setMinAutoRowCount(sap.ui.Device.system.desktop?5:4);this._oTable.attachRowSelectionChange(function(o){if(this._bIgnoreSelectionChange||!o.getParameter("userInteraction")){return;}var e={tableSelectionParams:o.mParameters,updateTokens:[],useDefault:false};if(this._hasListeners("selectionChange")){this._bIgnoreSelectionChange=true;this.fireSelectionChange(e);this._bIgnoreSelectionChange=false;e.updateTokens.forEach(function(j){this._addRemoveTokenByKey(j.sKey,j.oRow,j.bSelected);}.bind(this));}else{e.useDefault=true;}if(e.useDefault){var t=o.getSource();var f=o.getParameter("rowIndices");var i,n=f.length;var g;var h;var r;for(i=0;i<n;i++){g=f[i];h=t.getContextByIndex(g);r=h?h.getObject():null;if(!r){M.show(this._oRb.getText("VALUEHELPDLG_SELECTIONFAILED"),{icon:M.Icon.ERROR,title:this._oRb.getText("VALUEHELPDLG_SELECTIONFAILEDTITLE"),actions:[M.Action.OK],styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""});return;}}var u=false;if(t.getBinding("rows").aKeys){u=true;}for(i=0;i<n;i++){g=f[i];h=t.getContextByIndex(g);r=h?h.getObject():null;if(r){var k;if(u){k=h.sPath.substring(1);}else{k=r[this.getKey()];}this._addRemoveTokenByKey(k,r,t.isIndexSelected(g));}}}this._updateTitles();if(!this.getSupportMultiselect()){this._bIgnoreSelectionChange=true;this._onCloseAndTakeOverValues();}}.bind(this));this._oTable.addStyleClass("compVHMainTable");if(!(this._oTable.getParent()instanceof sap.ui.comp.smarttable.SmartTable)){this._oTable.bindAggregation("columns","columns>/cols",function(i,o){var e,t;if(o.getProperty("type")==="string"){t={path:o.getProperty("template")};}if(o.getProperty("type")==="boolean"){e=new sap.m.CheckBox({enabled:false,selected:{path:o.getProperty("template")}});}else{e=new sap.m.Text({wrapping:false,text:{path:o.getProperty("template"),type:o.getProperty("oType")},tooltip:t});}if(this._oTable instanceof sap.ui.table.AnalyticalTable){return new sap.ui.table.AnalyticalColumn(i,{label:"{columns>label}",tooltip:"{columns>tooltip}",template:e,width:"{columns>width}",hAlign:e instanceof sap.m.CheckBox?sap.ui.core.HorizontalAlign.Center:sap.ui.core.HorizontalAlign.Begin,filterProperty:o.getProperty("filter")});}else{return new sap.ui.table.Column(i,{label:"{columns>label}",tooltip:"{columns>tooltip}",template:e,width:"{columns>width}",hAlign:e instanceof sap.m.CheckBox?sap.ui.core.HorizontalAlign.Center:sap.ui.core.HorizontalAlign.Begin,sortProperty:o.getProperty("sort"),sorted:o.getProperty("sorted"),sortOrder:o.getProperty("sortOrder"),filterProperty:o.getProperty("filter")});}}.bind(this));}}else{this._oTable.setMode(this.getSupportMultiselect()?sap.m.ListMode.MultiSelect:sap.m.ListMode.SingleSelectLeft);this._oTable.setGrowing(true);this._oTable.attachSelectionChange(function(o){if(this._bIgnoreSelectionChange){return;}var e=o.mParameters;var f={tableSelectionParams:o.mParameters,updateTokens:[],useDefault:false};if(this._hasListeners("selectionChange")){this._bIgnoreSelectionChange=true;this.fireSelectionChange(f);this._bIgnoreSelectionChange=false;f.updateTokens.forEach(function(j){this._addRemoveTokenByKey(j.sKey,j.oRow,j.bSelected);}.bind(this));}else{f.useDefault=true;}if(f.useDefault){var s=e.selected;var i,n=e.listItems.length;for(i=0;i<n;i++){var g=e.listItems[i];var h=g.getBindingContext();var r=h?h.getObject():null;if(r){var k=r[this.getKey()];this._addRemoveTokenByKey(k,r,s);}}}if(!this.getSupportMultiselect()){this._onCloseAndTakeOverValues();}}.bind(this));if(!(this._oTable.getParent()instanceof sap.ui.comp.smarttable.SmartTable)){this._oTable.bindAggregation("columns","columns>/cols",function(i,o){var e=o.getProperty("label");var f=this._oTable.getColumns().length>=2;return new sap.m.Column({header:new sap.m.Label({text:e}),demandPopin:f,minScreenWidth:f?(this._oTable.getColumns().length+1)*10+"rem":"1px"});}.bind(this));}}};
d.prototype._addRemoveTokenByKey=function(k,r,A){k=decodeURIComponent(k);if(A){this._oSelectedItems.add(k,r);this._addToken2Tokenizer(k,this._getFormatedTokenText(k),this._oSelectedTokens);}else{this._oSelectedItems.remove(k);this._removeTokenFromTokenizer(k,this._oSelectedTokens);}};
d.prototype._onCloseAndTakeOverValues=function(){var t=this;var f=function(){var r;var e=t._oSelectedItems.getSelectedItemsTokenArray(t.getKey(),t.getDescriptionKey(),t.getTokenDisplayBehaviour());if(t._oSelectedRanges){var i=0;for(var g in t._oSelectedRanges){r=t._oSelectedRanges[g];var s=r.tokenValue;if(!s){s=t._getFormatedRangeTokenText(r.operation,r.value1,r.value2,r.exclude,r.keyField);}if(!r._oGrid||r._oGrid.select.getSelected()){e.push(new T({key:"range_"+i,text:s,tooltip:typeof s==="string"?s:null}).data("range",{"exclude":r.exclude,"operation":r.operation,"keyField":r.keyField,"value1":r.value1,"value2":r.value2}));i++;}}}t.fireOk({"tokens":e});};this._validateRanges(f);};
d.prototype._onCancel=function(){this.fireCancel();};
d.prototype._onGo=function(){this._oFilterBar.search();};
d.prototype._onClear=function(){this._oFilterBar.clear();};
d.prototype._updateTitles=function(){this._updateTableTitle();this._updateTokenizer();};
d.prototype._updateDlgTitle=function(){var m="";var s;if(this._oTitle){if(this._oTabBar&&!this._oTabBar.getVisible()&&!this.getFilterMode()){if(this._oTabBar.getSelectedKey()===sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_LIST_VIEW){m="VALUEHELPDLG_TITLE";}else if(this._oTabBar.getSelectedKey()===sap.ui.comp.valuehelpdialog._ValueHelpViewMode.DESKTOP_CONDITIONS_VIEW){if(this.getMaxIncludeRanges()==="1"&&this.getMaxExcludeRanges()==="0"){m="VALUEHELPDLG_SINGLECONDITION_TITLE";}else{m="VALUEHELPDLG_RANGESTITLE";}}}else if(this._isPhone()&&!this.getFilterMode()){switch(this._currentViewMode){case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_MAIN_VIEW:m="";break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_LIST_VIEW:m="VALUEHELPDLG_ITEMSTABLE";break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_SEARCH_VIEW:m="VALUEHELPDLG_ADVANCEDSEARCH";break;case sap.ui.comp.valuehelpdialog._ValueHelpViewMode.PHONE_CONDITIONS_VIEW:if(this.getMaxIncludeRanges()==="1"&&this.getMaxExcludeRanges()==="0"){m="VALUEHELPDLG_SINGLECONDITION_TITLE";}else{m="VALUEHELPDLG_RANGES";}break;default:break;}}if(!s){s=this.getTitle();}if(m){s=this._oRb.getText(m,s);}if(s){this._oTitle.setText(s);}}};
d.prototype._updateTableTitle=function(){if(!this._oTable){return;}var e=0;this.oRows=this._oTable.getBinding("rows");var s=false;if(s&&this.getModel()&&this.getModel().isCountSupported){s=this.getModel().isCountSupported();}if(s){if(this.oRows){e=this.oRows.getLength();}this._setTableTitle(this._sTableTitle1.replace("{0}",e));}else{this._setTableTitle(this._sTableTitleNoCount);}};
d.prototype._setTableTitle=function(t){if(sap.ui.Device.system.desktop&&!(this._oTable instanceof sap.m.Table)){if(this._oTable.getTitle()){this._oTable.getTitle().setText(t);}else{this._oTable.setTitle(t);}}};
d.prototype.onAfterRendering=function(){D.prototype.onAfterRendering.apply(this);if(this._oTable){this._updateTitles();}if(!this._isPhone()&&this.getContentHeight()===""){if(this.getSupportRangesOnly()&&(this.getMaxExcludeRanges()==="-1"||this.getMaxIncludeRanges()==="-1")){this.setContentHeight("70%");}else{var r=this.getDomRef("scroll");var _=r.clientHeight;this.setContentHeight(_+"px");}if(sap.ui.table.Table&&this._oTable&&this._oTable instanceof sap.ui.table.Table){this._oTable.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);}}};
d.prototype._getDialogOffset=function(w){var W=w||this._$Window.width();var s={small:600,large:1024};var r=function(e){var R=parseInt(window.getComputedStyle(document.body).fontSize,10);return(e*R)*2;};var e=1;if(W>s.small&&W<s.large){e=2;}else if(W>=s.large){e=2;}return{top:r(e),left:r(e)};};
d.prototype.exit=function(){var e=function(o){if(o&&o.destroy){o.destroy();}return null;};this._oTokenizerGrid=e(this._oTokenizerGrid);this._oRanges=e(this._oRanges);this._oFilterPanel=e(this._oFilterPanel);if(this._bTableCreatedInternal){this._oTable=e(this._oTable);}this._oTable=null;this.theTable=null;this._oTabBar=e(this._oTabBar);this._oMainListMenu=e(this._oMainListMenu);this._oVBox=e(this._oVBox);this._oVarManagment=e(this._oVarManagment);this._aRangeKeyFields=e(this._aRangeKeyFields);this._aIncludeRangeOperations=e(this._aIncludeRangeOperations);this._aExcludeRangeOperations=e(this._aExcludeRangeOperations);if(this._oFilterBar){this._oFilterBar.detachInitialise(this._handleFilterBarInitialize);this._oFilterBar=e(this._oFilterBar);}this._oRb=e(this._oRb);this._sTableTitle1=e(this._sTableTitle1);this._sTableTitle2=e(this._sTableTitle2);this._sTableTitleNoCount=e(this._sTableTitleNoCount);this._sValidationDialogTitle=e(this._sValidationDialogTitle);this._sValidationDialogMessage=e(this._sValidationDialogMessage);this._sValidationDialogFieldMessage=e(this._sValidationDialogFieldMessage);this._oSelectedItems=e(this._oSelectedItems);this._oSelectedRanges=e(this._oSelectedRanges);this._oButtonOk=e(this._oButtonOk);this._oButtonCancel=e(this._oButtonCancel);if(this._oButtonGo){this._oButtonGo=e(this._oButtonGo);}if(this._oButtonClear){this._oButtonClear=e(this._oButtonClear);}if(this._oColSearchBox){this._oColSearchBox=e(this._oColSearchBox);}};
d.prototype.setRangeKeyFields=function(r){this._aRangeKeyFields=r;};
d.prototype.getRangeKeyFields=function(){return this._aRangeKeyFields;};
d.prototype.setIncludeRangeOperations=function(o,t){t=t||"default";this._aIncludeRangeOperations[t]=o;if(this._oFilterPanel){this._oFilterPanel.setIncludeOperations(this._aIncludeRangeOperations[t],t);}};
d.prototype.setExcludeRangeOperations=function(o,t){t=t||"default";this._aExcludeRangeOperations[t]=o;if(this._oFilterPanel){this._oFilterPanel.setExcludeOperations(this._aExcludeRangeOperations[t],t);}};
d.prototype._getFormatedTokenText=function(k){var i=this._oSelectedItems.getItem(k);var t=i[this.getDescriptionKey()];var s=i[this.getKey()];if(t===undefined){if(typeof i==="string"){t=i;}else{t=k;}}else{t=F.getFormattedExpressionFromDisplayBehaviour(this.getTokenDisplayBehaviour()?this.getTokenDisplayBehaviour():sap.ui.comp.smartfilterbar.DisplayBehaviour.descriptionAndId,s,t);}return t;};
d.prototype._getFormatedRangeTokenText=function(o,v,s,e,k){var t="";var f;var g=this._getKeyFieldByKey(k);if(g){switch(g.type){case"numeric":var h;if(g.precision||g.scale){h={};if(g.precision){h["maxIntegerDigits"]=parseInt(g.precision,10);}if(g.scale){h["maxFractionDigits"]=parseInt(g.scale,10);}}f=N.getFloatInstance(h);break;case"date":f=b.getDateInstance();v=new Date(v);s=new Date(s);break;case"time":f=b.getTimeInstance();v=new Date(v);s=new Date(s);break;case"boolean":var i=this._getBooleanValues();v=i[v?2:1];s=i[s?2:1];break;default:break;}if(f){if(v){v=f.format(v);}if(s){s=f.format(s);}}}if(v!==""){switch(o){case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.Initial:t="=''";break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ:t="="+v;break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.GT:t=">"+v;break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.GE:t=">="+v;break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.LT:t="<"+v;break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.LE:t="<="+v;break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.Contains:t="*"+v+"*";break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.StartsWith:t=v+"*";break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EndsWith:t="*"+v;break;case sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT:if(s!==""){t=v+"..."+s;break;}break;default:break;}}if(e&&t!==""){t="!("+t+")";}if(this._aRangeKeyFields&&this._aRangeKeyFields.length>1&&g&&g.label&&t!==""){t=g.label+": "+t;}return t;};
d.prototype._isPhone=function(){return sap.ui.Device.system.phone;};
d.prototype._hasListeners=function(e){if(this._bTableCreatedInternal){return false;}return this.hasListeners(e);};
d.prototype._rotateSelectionButtonIcon=function(f){if(!sap.ui.Device.system.phone){var o=sap.ui.getCore().byId(this.oSelectionButton.$("img")[0].id);if(f){o.addStyleClass("sapUiVHImageExpand");}else{o.removeStyleClass("sapUiVHImageExpand");}}};
sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation={BT:"BT",EQ:"EQ",Contains:"Contains",StartsWith:"StartsWith",EndsWith:"EndsWith",LT:"LT",LE:"LE",GT:"GT",GE:"GE",Initial:"Initial"};sap.ui.comp.valuehelpdialog._ValueHelpViewMode={DESKTOP_LIST_VIEW:"DESKTOP_LIST_VIEW",DESKTOP_CONDITIONS_VIEW:"DESKTOP_CONDITIONS_VIEW",PHONE_MAIN_VIEW:"PHONE_MAIN_VIEW",PHONE_SEARCH_VIEW:"PHONE_SEARCH_VIEW",PHONE_LIST_VIEW:"PHONE_LIST_VIEW",PHONE_CONDITIONS_VIEW:"PHONE_CONDITIONS_VIEW"};return d;},true);
sap.ui.predefine('sap/ui/comp/variants/EditableVariantItem',['jquery.sap.global','sap/m/ColumnListItem','sap/m/ColumnListItemRenderer','sap/ui/comp/library'],function(q,C,a,l){"use strict";
var E=C.extend("sap.ui.comp.variants.EditableVariantItem",{
metadata:{library:"sap.ui.comp",properties:{key:{type:"string",group:"Misc",defaultValue:null},global:{type:"boolean",group:"Misc",defaultValue:null},lifecyclePackage:{type:"string",group:"Misc",defaultValue:null},lifecycleTransportId:{type:"string",group:"Misc",defaultValue:null},namespace:{type:"string",group:"Misc",defaultValue:null},readOnly:{type:"boolean",group:"Misc",defaultValue:false},accessOptions:{type:"string",group:"Misc",defaultValue:null,deprecated:true},labelReadOnly:{type:"boolean",group:"Misc",defaultValue:false},author:{type:"string",group:"Misc",defaultValue:null},favorite:{type:"boolean",group:"Misc",defaultValue:false}}},
renderer:a.render
});
return E;},true);
sap.ui.predefine('sap/ui/comp/variants/VariantItem',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Item'],function(q,l,I){"use strict";
var V=I.extend("sap.ui.comp.variants.VariantItem",{metadata:{library:"sap.ui.comp",properties:{executeOnSelection:{type:"boolean",group:"Misc",defaultValue:false},readOnly:{type:"boolean",group:"Misc",defaultValue:false},lifecycleTransportId:{type:"string",group:"Misc",defaultValue:null},global:{type:"boolean",group:"Misc",defaultValue:null},lifecyclePackage:{type:"string",group:"Misc",defaultValue:null},namespace:{type:"string",group:"Misc",defaultValue:null},accessOptions:{type:"string",group:"Misc",defaultValue:null,deprecated:true},labelReadOnly:{type:"boolean",group:"Misc",defaultValue:false},author:{type:"string",group:"Misc",defaultValue:null},favorite:{type:"boolean",group:"Misc",defaultValue:false}}}});
return V;},true);
sap.ui.predefine('sap/ui/comp/variants/VariantManagement.designtime',[],function(){"use strict";return{annotations:{},properties:{initialSelectionKey:{ignore:true},enabled:{ignore:false},defaultVariantKey:{ignore:false},selectionKey:{ignore:true},showCreateTile:{ignore:true},showExecuteOnSelection:{ignore:false},showShare:{ignore:false},showSetAsDefault:{ignore:false},lifecycleSupport:{ignore:true},standardItemText:{ignore:false},industrySolutionMode:{ignore:true},useFavorites:{ignore:false}},customData:{}};},false);
sap.ui.predefine('sap/ui/comp/variants/VariantManagement',['jquery.sap.global','sap/ui/Device','sap/ui/model/json/JSONModel','sap/m/SearchField','sap/m/RadioButton','sap/ui/core/TextAlign','sap/m/ScreenSize','sap/m/PopinDisplay','sap/m/Column','sap/m/Text','sap/m/Bar','sap/m/Table','sap/m/Page','sap/m/PlacementType','sap/m/ButtonType','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/m/ActionSheet','sap/m/Button','sap/m/CheckBox','sap/m/Dialog','sap/m/Input','sap/m/Label','sap/m/ResponsivePopover','sap/m/SelectList','sap/m/ObjectIdentifier','sap/ui/comp/library','./EditableVariantItem','./VariantItem','sap/ui/core/InvisibleText','sap/ui/core/Control','sap/ui/core/Item','sap/ui/core/ValueState','sap/ui/core/VerticalAlign','sap/ui/layout/HorizontalLayout','sap/ui/layout/Grid'],function(q,D,J,S,R,T,a,P,C,b,B,c,d,f,g,h,j,A,k,l,m,I,L,n,o,O,p,E,V,r,s,t,u,v,H,G){"use strict";
var w=s.extend("sap.ui.comp.variants.VariantManagement",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{initialSelectionKey:{type:"string",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},defaultVariantKey:{type:"string",group:"Misc",defaultValue:null},selectionKey:{type:"string",group:"Misc",defaultValue:null},showCreateTile:{type:"boolean",group:"Misc",defaultValue:false},showExecuteOnSelection:{type:"boolean",group:"Misc",defaultValue:false},showShare:{type:"boolean",group:"Misc",defaultValue:false},showSetAsDefault:{type:"boolean",group:"Misc",defaultValue:true},lifecycleSupport:{type:"boolean",group:"Misc",defaultValue:false},standardItemText:{type:"string",group:"Misc",defaultValue:null},industrySolutionMode:{type:"boolean",group:"Misc",defaultValue:false},useFavorites:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.core.Item",multiple:true,singularName:"item",deprecated:true},variantItems:{type:"sap.ui.comp.variants.VariantItem",multiple:true,singularName:"variantItem"}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},exe:{type:"boolean"},def:{type:"boolean"},global:{type:"boolean"},lifecyclePackage:{type:"string"},lifecycleTransportId:{type:"string"}}},manage:{parameters:{renamed:{type:"string[]"},deleted:{type:"string[]"},exe:{type:"object[]"},def:{type:"boolean"}}},select:{parameters:{key:{type:"string"}}}}},
renderer:function(e,i){e.write("<div ");e.writeControlData(i);e.addClass("sapUiCompVarMngmt");e.writeClasses();e.write(">");e.renderControl(i.oVariantLayout);e.write("</div>");}
});
w.STANDARD_NAME=sap.ui.comp.STANDARD_VARIANT_NAME;w.MAX_NAME_LEN=100;w.FAV_COLUMN=0;w.NAME_COLUMN=1;w.SHARE_COLUMN=2;w.DEF_COLUMN=3;w.EXEC_COLUMN=4;w.AUTHOR_COLUMN=5;
w.prototype.init=function(){var e=this;this.STANDARDVARIANTKEY="*standard*";this.setStandardVariantKey(this.STANDARDVARIANTKEY);this.aRemovedVariants=[];this.aRenamedVariants=[];this.aRemovedVariantTransports=[];this.aExeVariants=[];this.oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.lastSelectedVariantKey=this._sStandardVariantKey;this.bVariantItemMode=false;this.oSelectedItem=null;this.sNewDefaultKey="";this.bManagementTableInitialized=false;this.sTransport=null;this.sPackage=null;this.aEvents=[];this.bEventRunning=false;this.oVariantSelectionPage=null;this.oActions=null;this.oActionSheet=null;this.oActionSheetManage=null;this.oActionSheetSave=null;this.oActionSheetSaveAs=null;this.bManualVariantKey=false;this.bFireSelect=false;this.bExecuteOnSelectForStandardViaXML=false;this.bExecuteOnSelectForStandardByUser=null;this.bSupportExecuteOnSelectOnSandardVariant=false;this._bInnerControlsCreated=false;this._isVendorLayer=false;this.oModel=new J({enabled:false,selectedVariant:""});this.setModel(this.oModel,"save_enablement");this.oVariantInvisbletext=new r({text:{parts:[{path:'save_enablement>/selectedVariant'},{path:'save_enablement>/enabled'}],formatter:function(i,x){if(x){i=e.oResourceBundle.getText("VARIANT_MANAGEMENT_MODIFIED",[i]);}return i;}}});this.oVariantText=new L(this.getId()+"-text",{text:"{save_enablement>/selectedVariant}"});this._setStandardText();this.oVariantText.addStyleClass("sapUICompVarMngmtText");this.oVariantText.addStyleClass("sapMH4Style");if(D.system.phone){this.oVariantText.addStyleClass("sapUICompVarMngmtTextMaxWidth");}this.oVariantModifiedText=new L(this.getId()+"-modified",{visible:"{save_enablement>/enabled}"});this.oVariantModifiedText.setText("*");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtText");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtModified");this.oVariantModifiedText.addStyleClass("sapMH4Style");this.oVariantPopoverTrigger=new k(this.getId()+"-trigger",{type:g.Transparent,icon:"sap-icon://arrow-down",press:function(){e._openVariantSelection();},tooltip:this.oResourceBundle.getText("VARIANT_MANAGEMENT_TRIGGER_TT")});this.oVariantPopoverTrigger.addStyleClass("sapUICompVarMngmtTriggerBtn");this.oVariantPopoverTrigger.addAriaLabelledBy(this.oVariantInvisbletext);this.oVariantLayout=new H({content:[this.oVariantText,this.oVariantModifiedText,this.oVariantPopoverTrigger,this.oVariantInvisbletext]});this.oVariantLayout.addStyleClass("sapUICompVarMngmtLayout");this.addDependent(this.oVariantLayout);};
w.prototype._columnVisibilityManagementTable=function(e,F){if(!this.bManagementTableInitialized){return;}if(this.oManagementTable){var i=this.oManagementTable.getColumns();if(i&&i.length>=e){i[e].setVisible(F);}}};
w.prototype.setUseFavorites=function(F){this.setProperty("useFavorites",F);this._columnVisibilityManagementTable(w.FAV_COLUMN,F);};
w.prototype.setShowShare=function(F){this.setProperty("showShare",F);this._columnVisibilityManagementTable(w.SHARE_COLUMN,F);};
w.prototype.setShowSetAsDefault=function(F){this.setProperty("showSetAsDefault",F);this._columnVisibilityManagementTable(w.DEF_COLUMN,F);};
w.prototype.setShowExecuteOnSelection=function(F){this.setProperty("showExecuteOnSelection",F);this._columnVisibilityManagementTable(w.EXEC_COLUMN,F);};
w.prototype.setStandardItemText=function(N){this.setProperty("standardItemText",N);var i=this._getSelectedItem();if(!i||(i.getKey()===this.getStandardVariantKey())){this.oModel.setProperty("/selectedVariant",N);}};
w.prototype._setTriggerButtonIcon=function(F){var i;if(!D.system.phone){i=sap.ui.getCore().byId(this.oVariantPopoverTrigger.$("img")[0].id);if(i){i.toggleStyleClass("sapUiCompVarMngmtImageExpand");}}};
w.prototype._triggerSave=function(){var e=this._createEvent("variantSaveAs",this._handleVariantSaveAs);this._addEvent(e);};
w.prototype._checkVariantNameConstraints=function(i,e,M){if(!i){return;}var x=i.getValue();x=x.trim();if(!this._checkIsDuplicate(i,x,this.oManagementTable)){if(x===""){i.setValueState(u.Error);i.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}else if(x.length>w.MAX_NAME_LEN){i.setValueState(u.Error);i.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_MAX_LEN",[w.MAX_NAME_LEN]));}else{i.setValueState(u.None);i.setValueStateText(null);}}if(e){if(i.getValueState()!==u.Error){this._checkIsDuplicate(i,x,M);}if((i.getValueState()===u.Error)||this._anyInErrorState(M)){e.setEnabled(false);}else{e.setEnabled(true);}}};
w.prototype._anyInErrorState=function(M,e){var x,y,i;if(M){x=M.getItems();if(x){for(i=0;i<x.length;i++){y=x[i].getCells()[w.NAME_COLUMN];if(e&&(e===y)){continue;}if(y&&y.getValueState&&(y.getValueState()===u.Error)){if(this._checkIsDuplicate(y,y.getValue(),M)){return true;}}}}}return false;};
w.prototype._checkIsDuplicate=function(i,e,M){var F=this._isDuplicate(i,e,M);if(F){i.setValueState(u.Error);i.setValueStateText(this.oResourceBundle.getText(e?"VARIANT_MANAGEMENT_ERROR_DUPLICATE":"VARIANT_MANAGEMENT_ERROR_EMPTY"));}else{i.setValueState(u.None);i.setValueStateText(null);}return F;};
w.prototype._isDuplicate=function(i,e,M){if(M){return this._isDuplicateManaged(i,e,M);}else{return this._isDuplicateSaveAs(e);}};
w.prototype._isDuplicateManaged=function(e,x,M){var y,z,i;if(M){y=M.getItems();if(y&&(y.length>0)){for(i=0;i<y.length;i++){z=y[i].getCells()[w.NAME_COLUMN];if(z===e){continue;}if(z){if(z.getValue&&(x===z.getValue().trim())){return true;}else if(z.getText&&(x===z.getText().trim())){return true;}}}}else{if(this._isIndustrySolutionModeAndVendorLayer()&&this.bManualVariantKey){return false;}}}return false;};
w.prototype._isDuplicateSaveAs=function(e){var i=e.trim();if(!i){return true;}var x=this._determineStandardVariantName();if(x===i){if(this._isIndustrySolutionModeAndVendorLayer()&&this.bManualVariantKey){return false;}return true;}var y=this._getItems();for(var z=0;z<y.length;z++){x=y[z].getText().trim();if(x===i){return true;}}return false;};
w.prototype._createActionSheet=function(){if(!this.oActionSheet){this.oActionSheet=new A(this.getId()+"-actionsheet",{showCancelButton:true,buttons:[this.oActionSheetManage,this.oActionSheetSave,this.oActionSheetSaveAs],placement:f.Top});}};
w.prototype._createSaveDialog=function(){var e=this;var i=this.oInputName?this.oInputName.getValue():"";this.oSaveSave.setEnabled(!this._isDuplicate(this.oInputName,i));if(!this.oSaveDialog){this.oSaveDialog=new m(this.getId()+"-savedialog",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),beginButton:this.oSaveSave,endButton:new k(this.getId()+"-variantcancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){e._bSaveCanceled=true;e.oSaveDialog.close();}}),content:[this.oLabelName,this.oInputName,this.oLabelKey,this.oInputKey,this.oSaveDialogOptionsGrid],stretch:D.system.phone,afterOpen:function(){e._setTriggerButtonIcon(false);},afterClose:function(){e._setTriggerButtonIcon(true);}});this.oSaveDialog.setParent(this);this.oSaveDialog.addStyleClass("sapUiPopupWithPadding");this.oSaveDialog.addStyleClass("sapUiCompVarMngmtSaveDialog");}};
w.prototype._createManagementDialog=function(){var e=this;if(!this.oManagementDialog){this.oManagementDialog=new m(this.getId()+"-managementdialog",{beginButton:this.oManagementSave,endButton:new k(this.getId()+"-managementcancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){e.aRemovedVariants=[];e.oManagementDialog.close();}}),content:[this.oManagementTable],stretch:D.system.phone,afterOpen:function(){e._setTriggerButtonIcon(false);},afterClose:function(){if(e.bFireSelect==true){e.bFireSelect=false;setTimeout(function(){e._fireSelectAsync();},0);}e._setTriggerButtonIcon(true);}});this.oManagementDialog.setParent(this);this.oManagementDialog.setTitle(this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGEDIALOG"));var i=new B();this.oManageDialogSearchField=new S();this.oManageDialogSearchField.attachLiveChange(function(x){this._triggerSearchInManageDialog(x);}.bind(this));i.addContentRight(this.oManageDialogSearchField);this.oManagementDialog.setSubHeader(i);}};
w.prototype._handleArrowUpDown=function(i,x){var y=null;var z=this;i.attachBrowserEvent("keydown",function(e){if(e.which===38){if(z.oVariantSelectionPage.getShowSubHeader()){y=document.activeElement.id;}}});i.attachBrowserEvent("keyup",function(e){if(e.which===38){if(y&&(y===document.activeElement.id)){var F=i.getItems();if(F&&F.length>0){var K=sap.ui.getCore().byId(y);if(K===F[0]){x.focus();}}}y=null;}});x.attachBrowserEvent("keyup",function(e){if(e.which===40){var F=i.getItems();if(F&&F.length>0){F[0].focus();}}});};
w.prototype._triggerSearch=function(e){if(!e){return;}var i=e.getParameters();if(!i){return;}this._restoreCompleteList();var x=i.newValue?i.newValue:"";this._triggerSearchByValue(x.toLowerCase());};
w.prototype._triggerSearchByValue=function(e){var i,K,x;this.oSelectedVariantItemKey=null;x=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(x&&(x.getText().toLowerCase().indexOf(e)<0)){if(this.getSelectionKey()===K){this.oSelectedVariantItemKey=K;}this.oVariantList.removeItem(x);x.destroy();}var y=this._getItems();for(var z=0;z<y.length;z++){i=y[z].getText();if(i.toLowerCase().indexOf(e)<0){K=y[z].getKey();x=this.oVariantList.getItemByKey(K);if(x){if(this.getSelectionKey()===K){this.oSelectedVariantItemKey=K;}this.oVariantList.removeItem(x);x.destroy();}}}};
w.prototype._triggerSearchInManageDialog=function(e){var i,N,x="",y,z;if(!e){return;}var F=e.getParameters();if(!F){return;}i=F.newValue?F.newValue.toLowerCase():"";if(this.oManagementTable){var K=this.oManagementTable.getItems();K.forEach(function(M){N=true;x="";z=M.getCells();if(z&&z[w.NAME_COLUMN]){y=z[w.NAME_COLUMN];if(y.getTitle){x=y.getTitle();}else if(y.getValue){x=y.getValue();}if(x.toLowerCase().indexOf(i)>=0){N=false;}}if(N&&z&&z[w.AUTHOR_COLUMN]){y=z[w.AUTHOR_COLUMN];if(y.getText){x=y.getText();if(x.toLowerCase().indexOf(i)>=0){N=false;}}}M.setVisible(!N);});}};
w.prototype._considerItem=function(i,e){if(this.getUseFavorites()&&!i){if(this._isIndustrySolutionModeAndVendorLayer()){return true;}if(e.getFavorite&&e.getFavorite()){return true;}return false;}return true;};
w.prototype._restoreCompleteList=function(i){var e,x,y,z;this.oVariantList.destroyItems();z=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(!z){z=this._createStandardVariantListItem();if(z){if(this._considerItem(i,z)){this.oVariantList.insertItem(z,0);}else{z.destroy();}}}if(z){if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===z.getKey()){this.oVariantList.setSelectedItem(z);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==z.getKey()||this.getSelectionKey()===null){this.oVariantList.setSelectedItem(z);}}}y=this._getItems();y.sort(this._compareItems);for(e=0;e<y.length;e++){x=y[e];if(!this._considerItem(i,x)){continue;}if(x.getKey()===this.getStandardVariantKey()){continue;}z=this.oVariantList.getItemByKey(x.getKey());if(!z){z=this._createVariantListItem(x,e);this.oVariantList.addItem(z);}if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===z.getKey()){this.oVariantList.setSelectedItem(z);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==z.getKey()){this.oVariantList.setSelectedItem(z);}}}};
w.prototype._determineStandardVariantName=function(){var e=this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD");if(this.bVariantItemMode===false){e=this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT");}if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){if(this.getStandardItemText()!==null&&this.getStandardItemText()!=""){e=this.getStandardItemText();}}return e;};
w.prototype._createStandardVariantListItem=function(){var i,e=null;var x=this._determineStandardVariantName();if((this.bVariantItemMode===true)||(this.bVariantItemMode===false&&(this.getSelectionKey()===this.getStandardVariantKey()||this.getSelectionKey()===null))){e=new V(this.oVariantPopoverTrigger.getId()+"-item-standard",{key:this.getStandardVariantKey(),readOnly:true,executeOnSelection:this.getExecuteOnSelectForStandardVariant()});e.setText(x);if(this._isIndustrySolutionModeAndVendorLayer()&&this.bVariantItemMode){e.setGlobal(true);e.setReadOnly(false);}if(this.getStandardVariantKey()!==this.STANDARDVARIANTKEY){i=this.getItemByKey(this.getStandardVariantKey());if(i){this._setVariantListItemProperties(i,e);}}else{e.setAuthor("SAP");e.setFavorite(this.getStandardFavorite());}}return e;};
w.prototype._createVariantListItem=function(i,e){var x=new V(this.oVariantPopoverTrigger.getId()+"-item-"+e,{key:i.getKey(),text:i.getText()});this._setVariantListItemProperties(i,x);return x;};
w.prototype._setVariantListItemProperties=function(i,e){if(i.getReadOnly){e.setReadOnly(i.getReadOnly());}if(i.getExecuteOnSelection){e.setExecuteOnSelection(i.getExecuteOnSelection());}if(i.getGlobal){e.setGlobal(i.getGlobal());}if(i.getLifecyclePackage){e.setLifecyclePackage(i.getLifecyclePackage());}if(i.getLifecycleTransportId){e.setLifecycleTransportId(i.getLifecycleTransportId());}if(i.getNamespace){e.setNamespace(i.getNamespace());}if(i.getAccessOptions){e.setAccessOptions(i.getAccessOptions());}if(i.getLabelReadOnly){e.setLabelReadOnly(i.getLabelReadOnly());}if(i.getAuthor){e.setAuthor(i.getAuthor());}if(i.getFavorite){e.setFavorite(i.getFavorite());}};
w.prototype.exit=function(){if(this.oSearchField){this.oSearchField.destroy();this.oSearchField=undefined;}if(this.oManageDialogSearchField){this.oManageDialogSearchField.destroy();this.oManageDialogSearchField=undefined;}if(this.oVariantManage){this.oVariantManage.destroy();this.oVariantManage=undefined;}if(this.oVariantSave){this.oVariantSave.destroy();this.oVariantSave=undefined;}if(this.oVariantList){this.oVariantList.destroy();this.oVariantList=undefined;}if(this.oInputName){this.oInputName.destroy();this.oInputName=undefined;}if(this.oLabelName){this.oLabelName.destroy();this.oLabelName=undefined;}if(this.oDefault){this.oDefault.destroy();this.oDefault=undefined;}if(this.oSaveSave){this.oSaveSave.destroy();this.oSaveSave=undefined;}if(this.oSaveDialog){this.oSaveDialog.destroy();this.oSaveDialog=undefined;}if(this.oManagementTable){this.oManagementTable.destroy();this.oManagementTable=undefined;}if(this.oManagementSave){this.oManagementSave.destroy();this.oManagementSave=undefined;}if(this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined;}if(this.oVariantText){this.oVariantText.destroy();this.oVariantText=undefined;}if(this.oVariantPopoverTrigger){this.oVariantPopoverTrigger.destroy();this.oVariantPopoverTrigger=undefined;}if(this.oVariantLayout){this.oVariantLayout.destroy();this.oVariantLayout=undefined;}if(this.oVariantPopOver){this.oVariantPopOver.destroy();this.oVariantPopOver=undefined;}if(this.oVariantSaveAs){this.oVariantSaveAs.destroy();this.oVariantSaveAs=undefined;}if(this.oShare){this.oShare.destroy();this.oShare=undefined;}if(this.oExecuteOnSelect){this.oExecuteOnSelect.destroy();this.oExecuteOnSelect=undefined;}if(this.oCreateTile){this.oCreateTile.destroy();this.oCreateTile=undefined;}if(this.oSaveDialogOptionsGrid){this.oSaveDialogOptionsGrid.destroy();this.oSaveDialogOptionsGrid=undefined;}if(this.oVariantSelectionPage){this.oVariantSelectionPage.destroy();this.oVariantSelectionPage=undefined;}if(this.oActions){this.oActions.destroy();this.oActions=undefined;}if(this.oActionSheet){this.oActionSheet.destroy();this.oActionSheet=undefined;}if(this.oActionSheetManage&&!this.oActionSheetManage._bIsBeingDestroyed){this.oActionSheetManage.destroy();this.oActionSheetManage=undefined;}if(this.oActionSheetSave&&!this.oActionSheetSave._bIsBeingDestroyed){this.oActionSheetSave.destroy();}this.oActionSheetSave=undefined;if(this.oActionSheetSaveAs&&!this.oActionSheetSaveAs._bIsBeingDestroyed){this.oActionSheetSaveAs.destroy();}this.oActionSheetSaveAs=undefined;if(this.oInputKey){this.oInputKey.destroy();this.oInputKey=undefined;}if(this.oLabelKey){this.oLabelKey.destroy();this.oLabelKey=undefined;}if(this.oModel){this.oModel.destroy();this.oModel=undefined;}};
w.prototype.addItem=function(i){i=this.validateAggregation("items",i,true);this.bVariantItemMode=false;this.addAggregation("items",i,false);var _=this.getInitialSelectionKey();this._setSelection(i,_);this._manageButtonState();this._setStandardText();return this;};
w.prototype.insertItem=function(i,e){var _=e;i=this.validateAggregation("items",i,true);this.bVariantItemMode=false;this.insertAggregation("items",i,_);var x=this.getInitialSelectionKey();this._setSelection(i,x);this._manageButtonState();this._setStandardText();return this;};
w.prototype.removeItem=function(i){i=this.removeAggregation("items",i);this._manageButtonState();return i;};
w.prototype.removeAllItems=function(){var e=this.removeAllAggregation("items");this._manageButtonState();this._setSelectedItem(null);return e;};
w.prototype.destroyItems=function(){this.destroyAggregation("items");this._manageButtonState();this._setSelectedItem(null);return this;};
w.prototype._getItems=function(){if(this.bVariantItemMode){return this.getVariantItems();}else{return this.getItems();}};
w.prototype._removeItem=function(i){if(this.bVariantItemMode){return this.removeVariantItem(i);}else{return this.removeItem(i);}};
w.prototype.getItemByKey=function(K){var i=this._getItems();for(var e=0;e<i.length;e++){if(K==i[e].getKey()){return i[e];}}return null;};
w.prototype.addVariantItem=function(e){e=this.validateAggregation("variantItems",e,true);this.bVariantItemMode=true;this.addAggregation("variantItems",e,false);var _=this.getInitialSelectionKey();this._setSelection(e,_);this._manageButtonState();this._setStandardText();return this;};
w.prototype.insertVariantItem=function(e,i){var _=i;e=this.validateAggregation("variantItems",e,true);this.bVariantItemMode=true;this.insertAggregation("variantItems",e,_);var x=this.getInitialSelectionKey();this._setSelection(e,x);this._manageButtonState();this._setStandardText();return this;};
w.prototype._setSelectedItem=function(i){this.oSelectedItem=i;if(i!=null&&i.getKey()!=this.getStandardVariantKey()){this._setVariantText(i.getText());}else{this._setStandardText();}};
w.prototype._getSelectedItem=function(){return this.oSelectedItem;};
w.prototype.setInitialSelectionKey=function(K){this.setProperty("initialSelectionKey",K,true);this._setSelectionByKey(K);return this;};
w.prototype.setEnabled=function(e){this.setProperty("enabled",e,false);if(this.oVariantPopoverTrigger){this.oVariantPopoverTrigger.setEnabled(e);}if(!e){this.oVariantText.addStyleClass("sapUICompVarMngmtDisabled");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtDisabled");}else{this.oVariantText.removeStyleClass("sapUICompVarMngmtDisabled");this.oVariantModifiedText.removeStyleClass("sapUICompVarMngmtDisabled");}return this;};
w.prototype.getFocusDomRef=function(){if(this.oVariantPopoverTrigger&&this.getEnabled()){return this.oVariantPopoverTrigger.getFocusDomRef();}return sap.ui.core.Element.prototype.getFocusDomRef.apply(this,[]);};
w.prototype._setSelection=function(i,K){if(i.getKey()===K){this._setSelectedItem(i);this.fireSelect({key:K});}};
w.prototype.addStyleClass=function(e){if(s.prototype.addStyleClass){s.prototype.addStyleClass.apply(this,arguments);}if(this.oVariantPopOver){this.oVariantPopOver.addStyleClass(e);}if(this.oSaveDialog){this.oSaveDialog.addStyleClass(e);}if(this.oManagementDialog){this.oManagementDialog.addStyleClass(e);}};
w.prototype.removeStyleClass=function(e){if(s.prototype.addStyleClass){s.prototype.removeStyleClass.apply(this,arguments);}if(this.oVariantPopOver){this.oVariantPopOver.removeStyleClass(e);}if(this.oSaveDialog){this.oSaveDialog.removeStyleClass(e);}if(this.oManagementDialog){this.oManagementDialog.removeStyleClass(e);}};
w.prototype.clearVariantSelection=function(){this.setInitialSelectionKey(this.getStandardVariantKey());this._setSelectedItem(null);};
w.prototype._setDialogCompactStyle=function(e,i){if(this._checkDialogCompactStyle(e)){i.addStyleClass("sapUiSizeCompact");}else{i.removeStyleClass("sapUiSizeCompact");}};
w.prototype._checkDialogCompactStyle=function(e){if(e.$().closest(".sapUiSizeCompact").length>0){return true;}else{return false;}};
w.prototype._manageButtonState=function(){if(this.oActionSheetManage){this.oActionSheetManage.setEnabled(true);}};
w.prototype.getSelectionKey=function(){var K=null;var i=this._getSelectedItem();if(i!==null){K=i.getKey();}else if(this.bVariantItemMode){K=this.getStandardVariantKey();}else{K=null;}return K;};
w.prototype._setSelectionByKey=function(K){var i=this._getItems();var F=false;if(i.length>0){for(var e=0;e<i.length;e++){if(i[e].getKey()===K){this._setSelectedItem(i[e]);F=true;break;}}}if(!F){this._setSelectedItem(null);}};
w.prototype.replaceKey=function(e,N){var i=this._getItems();if(i.length>0){for(var x=0;x<i.length;x++){if(i[x].getKey()===e){i[x].setKey(N);if(this.getDefaultVariantKey()==e){this.setDefaultVariantKey(N);}if(this._getSelectedItem()===i[x]){this._setSelectedItem(null);}break;}}}};
w.prototype._assignUser=function(K,U){var i=this._getItems();if(i.length>0){for(var e=0;e<i.length;e++){if(i[e].getKey()===K){if(i[e].setAuthor&&i[e].getAuthor&&!i[e].getAuthor()){i[e].setAuthor(U);}break;}}}};
w.prototype.currentVariantSetModified=function(F){this.oModel.setProperty("/enabled",F);};
w.prototype.currentVariantGetModified=function(){return this.oModel.getProperty("/enabled");};
w.prototype._delayedControlCreation=function(){var e=this;if(this._bInnerControlsCreated){return;}this._bInnerControlsCreated=true;this.oVariantManage=new k(this.getId()+"-manage",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:true,press:function(){e._openVariantManagementDialog();}});this.oVariantManage.addStyleClass("sapUiHideOnPhone");this.oVariantSave=new k(this.getId()+"-mainsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){var i=e._createEvent("variantSavePressed",e._variantSavePressed);e._addEvent(i);},enabled:false});this.oVariantSave.setModel(this.oModel);this.oVariantSave.addStyleClass("sapUiHideOnPhone");this.oVariantSaveAs=new k(this.getId()+"-saveas",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){e._openSaveAsDialog();}});this.oVariantSaveAs.addStyleClass("sapUiHideOnPhone");this.oVariantList=new o(this.getId()+"-list",{itemPress:function(i){var x=null;if(i&&i.getParameters()){var y=i.getParameters().item;if(y){x=y.getKey();}}if(x){e.lastSelectedVariantKey=x;e._setSelectionByKey(x);e.oVariantPopOver.close();e.oModel.setProperty("/enabled",false);e.bFireSelect=true;}}});this.oVariantList.setNoDataText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_NODATA"));this.oActionSheetManage=new k({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:false,press:function(i){e._openVariantManagementDialog();}});this.oActionSheetSave=new k({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),enabled:false,press:function(i){var x=e._createEvent("variantSavePressed",e._variantSavePressed);e._addEvent(x);}});this.oActionSheetSaveAs=new k({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(i){e._openSaveAsDialog();}});this.oActions=new k(this.getId()+"-actions",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ACTIONS"),press:function(){e._createActionSheet();e.oActionSheet.openBy(this);}});this.oActions.addStyleClass("sapUiVisibleOnlyOnPhone");this.oSearchField=new S();this.oSearchField.attachLiveChange(function(i){e._triggerSearch(i);});this._handleArrowUpDown(this.oVariantList,this.oSearchField);this.oVariantSelectionPage=new d(this.getId()+"selpage",{subHeader:new h({content:[this.oSearchField]}),content:[this.oVariantList],footer:new h({content:[new j(this.getId()+"-spacer"),this.oVariantManage,this.oVariantSave,this.oVariantSaveAs,this.oActions]}),showSubHeader:false,showNavButton:false,showHeader:false});this.oVariantPopOver=new n(this.getId()+"-popover",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTS"),contentWidth:"400px",placement:f.Bottom,content:[this.oVariantSelectionPage],afterOpen:function(){e._markSharedVariants();e._setTriggerButtonIcon(false);},afterClose:function(){if(e.bFireSelect==true){e.bFireSelect=false;setTimeout(function(){e._fireSelectAsync();},0);}e._setTriggerButtonIcon(true);},contentHeight:"300px"});this.oVariantPopOver.setParent(this);this.oVariantPopOver.addStyleClass("sapUICompVarMngmtPopover");this.oInputName=new I(this.getId()+"-name",{liveChange:function(i){e._checkVariantNameConstraints(this,e.oSaveSave);}});this.oLabelName=new L(this.getId()+"-namelabel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_NAME"),required:true});this.oLabelName.setLabelFor(this.oInputName);this.oDefault=new l(this.getId()+"-default",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),enabled:true,visible:true,width:"100%"});this.oExecuteOnSelect=new l(this.getId()+"-execute",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),enabled:true,visible:false,width:"100%"});this.oCreateTile=new l(this.getId()+"-tile",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CREATETILE"),enabled:true,visible:false,width:"100%"});this.oShare=new l(this.getId()+"-share",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARE"),enabled:true,visible:false,select:function(i){var x=e._createEvent("inputfieldChange",e._handleShareSelected);x.args.push(i);e._addEvent(x);},width:"100%"});this.oInputKey=new I(this.getId()+"-key",{liveChange:function(i){e._checkVariantNameConstraints(this);}});this.oLabelKey=new L(this.getId()+"-keylabel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_KEY"),required:true});this.oLabelKey.setLabelFor(this.oInputKey);this.oSaveSave=new k(this.getId()+"-variantsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_OK"),press:function(){e._bSaveCanceled=false;e._triggerSave();},enabled:true});this.oSaveDialogOptionsGrid=new G({defaultSpan:"L6 M6 S12"});this.oManagementTable=new c(this.getId()+"-managementTable");this.oManagementSave=new k(this.getId()+"-managementsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_OK"),enabled:true,press:function(){var i=e._createEvent("managementSave",e._handleManageSavePressed);e._addEvent(i);}});this._manageButtonState();};
w.prototype._openVariantSelection=function(){var i=null;this._delayedControlCreation();if(this.oVariantPopOver&&this.oVariantPopOver.isOpen()){this.oVariantPopOver.close();return;}this.oVariantSave.setEnabled(false);this.oActionSheetSave.setEnabled(false);if(this.bVariantItemMode===false&&this.getSelectionKey()!==null){this.oVariantSave.setEnabled(true);this.oActionSheetSave.setEnabled(true);}i=this._getItems();if(i.length<9){this.oVariantSelectionPage.setShowSubHeader(false);}else{this.oVariantSelectionPage.setShowSubHeader(true);this.oSearchField.setValue("");}this._restoreCompleteList();if(this.currentVariantGetModified()){var e=this.oVariantList.getItemByKey(this.getSelectionKey());if(e){if(!e.getReadOnly()||(this._isIndustrySolutionModeAndVendorLayer()&&(this.getStandardVariantKey()===e.getKey()))){this.oVariantSave.setEnabled(true);this.oActionSheetSave.setEnabled(true);}}}this.oVariantSaveAs.setEnabled(true);if(this._isIndustrySolutionModeAndVendorLayer()&&this.bManualVariantKey&&(this.getStandardVariantKey()===this.STANDARDVARIANTKEY)){this.oVariantSave.setEnabled(false);this.oVariantSaveAs.setEnabled(true);}this._setDialogCompactStyle(this,this.oVariantPopOver);this._manageButtonState();var e=this.oVariantList.getSelectedItem();if(e){this.oVariantPopOver.setInitialFocus(e.getId());}this.oVariantPopOver.openBy(this.oVariantPopoverTrigger);};
w.prototype._initalizeManagementTableColumns=function(){if(this.bManagementTableInitialized){return;}var e=new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ADD_FAV")}),width:"4rem",visible:this.getUseFavorites()&&!this._isIndustrySolutionModeAndVendorLayer()});this.oManagementTable.addColumn(e);var i=e.getHeader();if(i){i.setTooltip(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ADD_FAV_TOOLTIP"));}this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_NAME")}),width:"14rem"}));this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTTYPE")}),width:"8rem",demandPopin:true,popinDisplay:P.Inline,minScreenWidth:a.Tablet,visible:this.getShowShare()}));this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT")}),width:"4rem",demandPopin:true,popinDisplay:P.Inline,minScreenWidth:a.Tablet,visible:this.getShowSetAsDefault()}));this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT")}),width:"5rem",hAlign:T.Center,demandPopin:true,popinDisplay:P.Inline,minScreenWidth:"800px",visible:this.getShowExecuteOnSelection()}));this.oManagementTable.addColumn(new C({header:new b({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_AUTHOR")}),width:"8rem",demandPopin:true,popinDisplay:P.Inline,minScreenWidth:"900px"}));this.oManagementTable.addColumn(new C({width:"2rem",hAlign:T.Center}));this.bManagementTableInitialized=true;};
w.prototype._initalizeSaveAsDialog=function(){this.oSaveDialogOptionsGrid.removeAllContent();this.oDefault.setVisible(this.getShowSetAsDefault());this.oShare.setVisible(this.getShowShare());this.oExecuteOnSelect.setVisible(this.getShowExecuteOnSelection());this.oCreateTile.setVisible(this.getShowCreateTile());if(this.getShowSetAsDefault()){this.oSaveDialogOptionsGrid.addContent(this.oDefault);}if(this.getShowShare()){this.oSaveDialogOptionsGrid.addContent(this.oShare);}if(this.getShowExecuteOnSelection()){this.oSaveDialogOptionsGrid.addContent(this.oExecuteOnSelect);}if(this.getShowCreateTile()){this.oSaveDialogOptionsGrid.addContent(this.oCreateTile);}};
w.prototype.onBeforeRendering=function(){var e=function(x){var M,N=0;for(var i=0;i<x.length;i++){M=x[i].$().width();if(M>N){N=M;}}return N;};if(this.oSaveDialogOptionsGrid&&this.oSaveDialog&&this.oSaveDialog.getVisible()){var x=this.oSaveDialogOptionsGrid.getContent();if(x&&x.length>0){var y=this.oSaveDialogOptionsGrid.$().width();var z=e(x);var F=32;var K=12;if(!this._checkDialogCompactStyle(this.oSaveDialog)){F=48;K=18;}if((F+z+K)>y/2){this.oSaveDialogOptionsGrid.setDefaultSpan("L12 M12 S12");}}}};
w.prototype._markSharedVariants=function(){var e,x,y=this._getItems();for(var i=0;i<y.length;i++){x=y[i];if(x.getGlobal&&x.getGlobal()){e=this.oVariantList.getItemByKey(x.getKey());if(e){var z=e.$();if(z){z.addClass("sapUiCompVarMngmtSharedVariant");}}}}};
w.prototype._variantSavePressed=function(){var i=this._getSelectedItem();if(!i){if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){i=new V({key:this.STANDARDVARIANTKEY,global:this._isIndustrySolutionModeAndVendorLayer()});i.setText(this._determineStandardVariantName());}else{i=this.getItemByKey(this.getStandardVariantKey());}}var e=false;if(this.getDefaultVariantKey()===i.getKey()){e=true;}if(i.getLifecyclePackage&&i.getGlobal()==true){var x=this;var y=function(F,K){x.oVariantPopOver.close();x.sPackage=F;x.sTransport=K;x.fireSave({name:i.getText(),overwrite:true,key:i.getKey(),def:e,global:(x._isIndustrySolutionModeAndVendorLayer()&&(x.getStandardVariantKey()===x.getStandardVariantKey())),lifecyclePackage:x.sPackage,lifecycleTransportId:x.sTransport});i.setLifecycleTransportId(x.sTransport);x.oModel.setProperty("/enabled",false);x._eventDone();};var z=function(F){x.sTransport=null;x.sPackage=null;x._cancelAllEvents();};this._assignTransport(i,y,z,this.oVariantText);}else{this.oVariantPopOver.close();this.fireSave({name:i.getText(),overwrite:true,key:i.getKey(),def:e});this.oModel.setProperty("/enabled",false);this._eventDone();}};
w.prototype._assignTransport=function(e,i,x,y){var z={type:"variant",name:"",namespace:""};z["package"]="";if(e!==null){z["package"]=e.getLifecyclePackage();z["name"]=e.getKey();z["namespace"]=e.getNamespace();}var _=function(N){var Q;var K;K=N.getParameters().selectedTransport;Q=N.getParameters().selectedPackage;i(Q,K);};var F=function(N){x(N);};if(this.getLifecycleSupport()){var K=null;if(e){K=e.getLifecycleTransportId();}if(K!=null&&K.trim().length>0){i(z["package"],K);}else{var M=this._getTransportSelection();M.selectTransport(z,_,F,this._checkDialogCompactStyle(y),y);}}else{i(z["package"],"");}};
w.prototype._getTransportSelection=function(){if(this.getTransportSelection){return this.getTransportSelection();}else{return this._getFlTransportSelection();}};
w.prototype._getFlTransportSelection=function(){if(!sap.ui.fl){sap.ui.getCore().loadLibrary('sap.ui.fl');}q.sap.require("sap.ui.fl.transport.TransportSelection");return new sap.ui.fl.transport.TransportSelection();};
w.prototype.getDefaultVariantKey=function(){var e=this.getProperty("defaultVariantKey");if(e===""){if(this.bVariantItemMode){e=this.getStandardVariantKey();}}return e;};
w.prototype._compareItems=function(e,i){var F=e.getText();var x=i.getText();var y=F.toUpperCase();var z=x.toUpperCase();if(y==z){if(F==x){return 0;}if(F<x){return-1;}if(F>x){return 1;}}if(y<z){return-1;}if(y>z){return 1;}};
w.prototype._accessOptionsText=function(e){var M=null;switch(e){case"R":M=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");break;case"RD":M=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");break;default:M=null;}return M;};
w.prototype._openSaveAsDialog=function(){this._initalizeSaveAsDialog();if(this._getSelectedItem()){this.oInputName.setValue(this._getSelectedItem().getText());}else{this.oInputName.setValue("");}this.oInputName.setEnabled(true);this.oInputName.setValueState(u.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oShare.setSelected(false);this.oCreateTile.setSelected(false);this.oExecuteOnSelect.setSelected(false);if(this._isIndustrySolutionModeAndVendorLayer()){this.oInputName.setValue(this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"));}this._createSaveDialog();this._setDialogCompactStyle(this,this.oSaveDialog);this.oVariantPopOver.close();this.sTransport=null;this.sPackage=null;if(this.bManualVariantKey){this.oInputKey.setVisible(true);this.oInputKey.setEnabled(true);this.oInputKey.setValueState(u.None);this.oInputKey.setValueStateText(null);this.oLabelKey.setVisible(true);}else{this.oInputKey.setVisible(false);this.oLabelKey.setVisible(false);}this.oSaveDialog.open();};
w.prototype._checkManageItemNameChange=function(M){var e="";var i=null;var x=this;i=M.getCells()[w.NAME_COLUMN];e=i.getValue();e=e.trim();var y=M;var K=y.getKey();this._checkVariantNameConstraints(i,this.oManagementSave,this.oManagementTable);if(i.getValueState()===u.Error){this._eventDone();return;}if(this.oVariantList.getItemByKey(K).getText().trim()===e){this._eventDone();return;}if(y.getGlobal()){var z=function(N,Q){y.setLifecyclePackage(N);y.setLifecycleTransportId(Q);x._eventDone();};var F=function(N){var Q=x.oVariantList.getItemByKey(K);i.setValue(Q.getText());x._cancelAllEvents();};this._createManagementDialog();this._assignTransport(y,z,F,this.oManagementDialog);}else{this._eventDone();}};
w.prototype._handleManageSavePressed=function(){var N=this.oManagementTable.getItems();var i,e;var x=false;var y="";var z=null;var F=0;var K=[];for(var M=0;M<N.length;M++){i=this.oVariantList.getItemByKey(N[M].getKey());e=N[M].getCells()[w.NAME_COLUMN];if(e&&e.getValue){y=e.getValue();}else if(e&&e.getTitle){y=e.getTitle();}y=y.trim();if(i.getText()!==y){this.aRenamedVariants.push({key:i.getKey(),name:y});z=this.getItemByKey(N[M].getKey());z.setText(y);if(z.setLifecyclePackage){z.setLifecyclePackage(N[M].getLifecyclePackage());z.setLifecycleTransportId(N[M].getLifecycleTransportId());}if(this.lastSelectedVariantKey===i.getKey()){this._setVariantText(y);}}if(this.getUseFavorites()&&!this._isIndustrySolutionModeAndVendorLayer()){var Q=N[M].getKey();if(this._mFavoriteChanges&&this._mFavoriteChanges[Q]!==undefined){var U=this._mFavoriteChanges[Q];if(Q===this.STANDARDVARIANTKEY){if(this.getStandardFavorite()!==U){K.push({key:Q,visible:U});this.setStandardFavorite(U);}}else{z=this.getItemByKey(N[M].getKey());if(z&&i.getFavorite&&(i.getFavorite()!==U)){K.push({key:Q,visible:U});z.setFavorite(U);}}}}if(this.getShowExecuteOnSelection()&&i.getExecuteOnSelection&&i.getExecuteOnSelection()!=N[M].getCells()[w.EXEC_COLUMN].getSelected()){var W=N[M].getCells()[w.EXEC_COLUMN].getSelected();var X=this.getItemByKey(N[M].getKey());if(!X&&(this.getSupportExecuteOnSelectOnSandardVariant()&(N[M].getKey()===this.getStandardVariantKey()))){X=new V();}if(X&&X.setExecuteOnSelection){X.setExecuteOnSelection(W);if(this.getSupportExecuteOnSelectOnSandardVariant()&(N[M].getKey()===this.getStandardVariantKey())){this._executeOnSelectForStandardVariantByUser(W);}this.aExeVariants.push({key:i.getKey(),exe:W});if(X.setLifecyclePackage){X.setLifecyclePackage(N[M].getLifecyclePackage());X.setLifecycleTransportId(N[M].getLifecycleTransportId());}}}}if(this.oManagementDialog){this.oManagementDialog.close();}this._manageButtonState();if(this.bVariantItemMode===false){if(this.getDefaultVariantKey()!=this.sNewDefaultKey){var Y=null;if(this.sNewDefaultKey==this.getStandardVariantKey()){Y=this.getItemByKey(this.getDefaultVariantKey());this.fireSave({name:Y.getText(),overwrite:true,key:Y.getKey(),def:false});}else{Y=this.getItemByKey(this.sNewDefaultKey);this.fireSave({name:Y.getText(),overwrite:true,key:Y.getKey(),def:true});}}}if(this.sNewDefaultKey!=this.getDefaultVariantKey()){this.setDefaultVariantKey(this.sNewDefaultKey);}for(F=0;F<this.aRemovedVariants.length;F++){i=this.getItemByKey(this.aRemovedVariants[F]);for(var Z=0;Z<this.aRemovedVariantTransports.length;Z++){if(this.aRemovedVariants[F]===this.aRemovedVariantTransports[Z].key){var $=this.aRemovedVariantTransports[Z];if(i.setLifecyclePackage){i.setLifecycleTransportId($.transport);}break;}}}this.fireManage({renamed:this.aRenamedVariants,deleted:this.aRemovedVariants,exe:this.aExeVariants,def:this.getDefaultVariantKey(),fav:K});for(F=0;F<this.aRemovedVariants.length;F++){i=this.getItemByKey(this.aRemovedVariants[F]);if(i){this._removeItem(i);i.destroy();}if(this.lastSelectedVariantKey===this.aRemovedVariants[F]){x=true;this._setSelectedItem(null);this.oModel.setProperty("/enabled",false);}}if(x){this.bFireSelect=true;}this._eventDone();};
w.prototype._createEvent=function(N,e){var i={name:N,fFunc:e,args:[]};return i;};
w.prototype._handleNextEvent=function(){if(this.aEvents.length>0){if(!this.bEventRunning){this.bEventRunning=true;var e=this.aEvents.pop();e.fFunc.apply(this,e.args);}}};
w.prototype._addEvent=function(e){this.aEvents.push(e);this._handleNextEvent();};
w.prototype._cancelAllEvents=function(){this.aEvents=[];this.bEventRunning=false;};
w.prototype._eventDone=function(){this.bEventRunning=false;this._handleNextEvent();};
w.prototype._handleManageExecuteOnSelectionChanged=function(e){var i=this;var M=e.getParent();if(M.getGlobal()){var x=function(z,F){M.setLifecyclePackage(z);M.setLifecycleTransportId(F);i._eventDone();};var y=function(z){e.setSelected(!e.getSelected());i._cancelAllEvents();};this._createManagementDialog();this._assignTransport(M,x,y,this.oManagementDialog);}else{this._eventDone();}};
w.prototype._handleManageDeletePressed=function(e){var i=this,x;var y=function(){var x=null,N=i.oManagementTable.getItems();N.some(function(Q){if(Q.getKey()===i.getStandardVariantKey()){x=Q;return true;}});return x;};if(!this._anyInErrorState(this.oManagementTable,e.getParent().getCells()[w.NAME_COLUMN])){this.oManagementSave.setEnabled(true);}x=y();var z=e.getParent();if(z.getGlobal()){var F=function(N,Q){var U=z.getKey();i.aRemovedVariants.push(U);i.oManagementTable.removeItem(z);if(i.getShowSetAsDefault()){if((z.getKey()===i.sNewDefaultKey)){if(x){x.getCells()[w.DEF_COLUMN].setSelected(true);x.getCells()[w.DEF_COLUMN].fireSelect({selected:true});}else{i.setStandardVariantKey(i.STANDARDVARIANTKEY);}i.sNewDefaultKey=i.getStandardVariantKey();}}z.destroy();var W={key:U,transport:Q};i.aRemovedVariantTransports.push(W);i._eventDone();};var K=function(N){i._cancelAllEvents();};this._createManagementDialog();this._assignTransport(z,F,K,this.oManagementDialog);}else{this.aRemovedVariants.push(z.getKey());this.oManagementTable.removeItem(z);if(this.getShowSetAsDefault()){if(z.getKey()===this.sNewDefaultKey){if(x){x.getCells()[w.DEF_COLUMN].setSelected(true);x.getCells()[w.DEF_COLUMN].fireSelect({selected:true});}this.sNewDefaultKey=this.getStandardVariantKey();}}z.destroy();this._eventDone();}var M=sap.ui.getCore().byId(this.getId()+"-managementcancel");if(M){M.focus();}};
w.prototype._handleShareSelected=function(e){var i=this;if(e.getParameters().selected){var x=function(z,F){i.sTransport=F;i.sPackage=z;i._eventDone();};var y=function(z){i.oShare.setSelected(false);i.sTransport=null;i.sPackage=null;i._cancelAllEvents();};this._createSaveDialog();this._assignTransport(null,x,y,this.oSaveDialog);}else{this.sTransport=null;this.sPackage=null;this._eventDone();}};
w.prototype._handleVariantSaveAs=function(){var K="SV"+new Date().getTime();var N=this.oInputName.getValue();var M=this.oInputKey.getValue();var e="";var i="";var x=false;var y=false;var z=null;N=N.trim();if(N==""){this.oInputName.setValueState(u.Error);this.oInputName.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));this._cancelAllEvents();return;}M=M.trim();if(this.bManualVariantKey&&M==""){this.oInputKey.setValueState(u.Error);this.oInputKey.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));this._cancelAllEvents();return;}if(this.bManualVariantKey){K=M;}if(this.oSaveDialog){this.oSaveDialog.close();}if(this.oExecuteOnSelect!==null){x=this.oExecuteOnSelect.getSelected();}if(this.oCreateTile!==null){y=this.oCreateTile.getSelected();}if(this.bVariantItemMode){z=new V({key:K,readOnly:false,executeOnSelection:x,global:this.oShare.getSelected(),lifecycleTransportId:this.sTransport,lifecyclePackage:this.sPackage});z.setText(N);this.addVariantItem(z);this._setSelectedItem(z);}else{z=new t({key:K});z.setText(N);this.addItem(z);this._setSelectedItem(z);}if(this.oDefault.getSelected()){this.setDefaultVariantKey(K);}if(this.oShare.getSelected()){i=this.sPackage;e=this.sTransport;}this._manageButtonState();this.fireSave({name:N,overwrite:false,def:this.oDefault.getSelected(),key:K,exe:this.oExecuteOnSelect.getSelected(),tile:y,global:this.oShare.getSelected(),lifecyclePackage:i,lifecycleTransportId:e});this.oModel.setProperty("/enabled",false);this._eventDone();};
w.prototype.setBackwardCompatibility=function(F){this._setBackwardCompatibility(F);};
w.prototype._setBackwardCompatibility=function(F){if(this.getItems().length===0&&this.getVariantItems().length===0){this.bVariantItemMode=!F;}this._setStandardText();};
w.prototype._setStandardText=function(){var K=this.getSelectionKey();if(K===null||K===this.getStandardVariantKey()){if(this.bVariantItemMode==false){this._setVariantText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"));}else{this._setVariantText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"));}if(this.getStandardItemText()!==null&&this.getStandardItemText()!=""){this._setVariantText(this.getStandardItemText());}}};
w.prototype._setVariantText=function(e){var M,i,x=e;if(this.extractBindingInfo){i=this.extractBindingInfo(e);}if((typeof i==="object")&&i.model&&i.path){M=this.getModel(i.model);if(M){x=M.getProperty(i.path);}}this.oModel.setProperty("/selectedVariant",x);};
w.prototype._getVariantText=function(e){return this.oModel.getProperty("/selectedVariant");};
w.prototype._updateVariantInvisibletext=function(e,i){if(i){e=this.oResourceBundle.getText("VARIANT_MANAGEMENT_MODIFIED",[e]);}return e;};
w.prototype._openVariantManagementDialog=function(){var i;var e=null;var x=0;var M;var N;var y;var z;var F;var K;var Q;var U;var W,X,Y,Z,$,_;var a1=this;this._mFavoriteChanges={};this.oManagementSave.setEnabled(true);this.oManagementTable.destroyItems();W=function(b1){a1._checkVariantNameConstraints(this,a1.oManagementSave,a1.oManagementTable);};X=function(b1){var d1=a1._createEvent("inputfieldChange",a1._checkManageItemNameChange);d1.args.push(this.getParent());a1._addEvent(d1);};$=function(b1){var d1=(b1.getParameters().selected===true),i=this.getParent();if(i){a1._mFavoriteChanges[i.getKey()]=d1;}};Y=function(b1){var d1=(b1.getParameters().selected===true),i=this.getParent();if(i){if(d1){a1.sNewDefaultKey=i.getKey();a1._mFavoriteChanges[i.getKey()]=d1;}else{if(i.getFavorite&&a1._mFavoriteChanges.hasOwnProperty(i.getKey())&&a1._mFavoriteChanges[i.getKey()]!==i.getFavorite()){delete a1._mFavoriteChanges[i.getKey()];}}var e1=i.getCells()[w.FAV_COLUMN];if(e1&&i.getFavorite){if(d1){e1.setSelected(true);}else{if(a1._mFavoriteChanges[i.getKey()]!==undefined){e1.setSelected(a1._mFavoriteChanges[i.getKey()]);}else{e1.setSelected(i.getFavorite()===true);}}e1.setEditable(!d1);}}};Z=function(b1){var d1=a1._createEvent("executeOnSelectionChange",a1._handleManageExecuteOnSelectionChanged);d1.args.push(this);a1._addEvent(d1);};_=function(b1){var d1=a1._createEvent("manageDeletePressed",a1._handleManageDeletePressed);d1.args.push(this);a1._addEvent(d1);};if(this.oManageDialogSearchField){this.oManageDialogSearchField.setValue("");}this._initalizeManagementTableColumns();this.sNewDefaultKey=this.getDefaultVariantKey();this._restoreCompleteList(true);if(this.oVariantList.getItems()[0].getKey()!==this.getStandardVariantKey()&&this.bVariantItemMode==false){i=new V(this.oVariantManage.getId()+"-item-standard",{key:this.getStandardVariantKey(),text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"),readOnly:true,executeOnSelection:false});this.oVariantList.insertItem(i,0);}if(this.getUseFavorites()){i=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(i){this.oVariantList.removeItem(i);}}e=this.oVariantList.getItems();if(this.getUseFavorites()){e.sort(this._compareItems);if(i){this.oVariantList.insertItem(i);e.splice(0,0,i);}}for(var iH=0;iH<e.length;iH++){if(e[iH].getReadOnly()||e[iH].getLabelReadOnly()){var c1=e[iH].getAccessOptions();U=this._accessOptionsText(c1);}else{U=null;}if(e[iH].getReadOnly()){U=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");}else if(e[iH].getLabelReadOnly()===true){U=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");}if(e[iH].getKey()===this.getStandardVariantKey()){U=null;}M=new E(this.oVariantManage.getId()+"-edit-"+x,{key:e[iH].getKey(),global:e[iH].getGlobal(),lifecyclePackage:e[iH].getLifecyclePackage(),lifecycleTransportId:e[iH].getLifecycleTransportId(),namespace:e[iH].getNamespace(),labelReadOnly:e[iH].getLabelReadOnly(),author:e[iH].getAuthor(),favorite:e[iH].getFavorite(),vAlign:v.Middle});N=new l(this.oVariantManage.getId()+"-fav-"+x,{select:$});if(e[iH].getFavorite){N.setSelected(e[iH].getFavorite()===true);}M.addCell(N);if(e[iH].getKey()===this.getStandardVariantKey()||e[iH].getReadOnly()===true||e[iH].getLabelReadOnly()===true){N=new O(this.oVariantManage.getId()+"-text-"+x,{});N.setTitle(e[iH].getText());if(U){N.setTooltip(U);}}else{N=new I(this.oVariantManage.getId()+"-input-"+x,{liveChange:W,change:X});N.setValue(e[iH].getText());}M.addCell(N);if(e[iH].getGlobal()){Q=this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARED");}else{Q=this.oResourceBundle.getText("VARIANT_MANAGEMENT_PRIVATE");}y=new b(this.oVariantManage.getId()+"-type-"+x,{text:Q,wrapping:false});y.addStyleClass("sapUICompVarMngmtType");M.addCell(y);z=new R(this.oVariantManage.getId()+"-def-"+x,{groupName:this.oVariantManage.getId(),select:Y});if(this.sNewDefaultKey===e[iH].getKey()||e[iH].getKey()===this.getStandardVariantKey()&&this.sNewDefaultKey===""){z.setSelected(true);if(e[iH].getFavorite){M.getCells()[0].setSelected(true);M.getCells()[0].setEditable(false);}}M.addCell(z);F=new l(this.oVariantManage.getId()+"-exe-"+x,{selected:false,enabled:false,select:Z});if(e[iH].getExecuteOnSelection){if((e[iH].getKey()===this.getStandardVariantKey()&&this.getSupportExecuteOnSelectOnSandardVariant())){F.setEnabled(true);}else{F.setEnabled(!e[iH].getReadOnly());}F.setSelected(e[iH].getExecuteOnSelection());if(U){F.setTooltip(U);}}M.addCell(F);y=new b(this.oVariantManage.getId()+"-author-"+x,{text:e[iH].getAuthor(),textAlign:"Begin"});M.addCell(y);K=new k(this.oVariantManage.getId()+"-del-"+x,{icon:"sap-icon://sys-cancel",enabled:true,type:g.Transparent,press:_,tooltip:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DELETE")});this._assignColumnInfoForDeleteButton(K);if(e[iH].getReadOnly&&e[iH].getReadOnly()){K.setEnabled(false);K.setVisible(false);}M.addCell(K);this.oManagementTable.addItem(M);x++;}this.aRemovedVariants=[];this.aRemovedVariantTransports=[];this.aRenamedVariants=[];this.aExeVariants=[];this._createManagementDialog();this._setDialogCompactStyle(this,this.oManagementDialog);i=this.oVariantList.getSelectedItem();if(i){this.lastSelectedVariantKey=i.getKey();}this.oVariantPopOver.close();this.oManagementDialog.open();};
w.prototype._assignColumnInfoForDeleteButton=function(e){if(!this._oInvisibleDeleteColumnName){this._oInvisibleDeleteColumnName=new r({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ACTION_COLUMN")});this._createManagementDialog();this.oManagementDialog.addContent(this._oInvisibleDeleteColumnName);}if(this._oInvisibleDeleteColumnName){e.addAriaLabelledBy(this._oInvisibleDeleteColumnName);}};
w.prototype._enableManualVariantKey=function(e){this.bManualVariantKey=e;};
w.prototype._fireSelectAsync=function(K){var e;if(K===undefined||K===null){var i=this._getSelectedItem();if(i===null){e=this.getStandardVariantKey();}else{e=i.getKey();}}this.fireSelect({key:e});};
w.prototype.setSupportExecuteOnSelectOnSandardVariant=function(F){this.bSupportExecuteOnSelectOnSandardVariant=F;};
w.prototype.getSupportExecuteOnSelectOnSandardVariant=function(){return this.bSupportExecuteOnSelectOnSandardVariant;};
w.prototype._executeOnSelectForStandardVariantByXML=function(e){this.bExecuteOnSelectForStandardViaXML=e;};
w.prototype._executeOnSelectForStandardVariantByUser=function(e){this.bExecuteOnSelectForStandardByUser=e;};
w.prototype.getExecuteOnSelectForStandardVariant=function(){if(this.getSupportExecuteOnSelectOnSandardVariant()){if(this.bExecuteOnSelectForStandardByUser!==null){return this.bExecuteOnSelectForStandardByUser;}}return this.bExecuteOnSelectForStandardViaXML;};
w.prototype.getStandardVariantKey=function(){return this._sStandardVariantKey;};
w.prototype.setStandardVariantKey=function(e){this._sStandardVariantKey=e;};
w.prototype._setVendorLayer=function(e){this._isVendorLayer=e;};
w.prototype.setStandardFavorite=function(F){this._isFavorite=F;};
w.prototype.getStandardFavorite=function(){return this._isFavorite;};
w.prototype._isIndustrySolutionModeAndVendorLayer=function(){if(this.getIndustrySolutionMode()&&this._isVendorLayer){return true;}return false;};
return w;},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/comp/odata/FieldSelector',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Control','./FieldSelectorController'],function(q,l,C,F){"use strict";
var a=C.extend("sap.ui.comp.odata.FieldSelector",{metadata:{library:"sap.ui.comp",properties:{showSearchBar:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}},events:{fieldSelectionChanged:{}}}});
a._tooltipBinding={parts:[{path:"com.sap.vocabularies.Common.v1.QuickInfo"},{path:"com.sap.vocabularies.Common.v1.Label"}],formatter:function tooltipFormatter(Q,L){if(Q&&Q.String){return Q.String;}if(L&&L.String){return L.String;}return'';}};
a.prototype.init=function(){q.sap.require("sap.m.HBox");q.sap.require("sap.m.VBox");q.sap.require("sap.m.FlexItemData");q.sap.require("sap.m.FlexDirection");q.sap.require("sap.m.FlexAlignSelf");q.sap.require("sap.m.FlexAlignItems");q.sap.require("sap.ui.core.ResizeHandler");q.sap.require("sap.ui.comp.odata.FieldSelectorModelConverter");q.sap.require("sap.m.Label");q.sap.require("sap.ui.fl.fieldExt.Access");this._fieldNameText=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("ODATA_FIELD_SEL_NAME");this._fieldTypeText=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("ODATA_FIELD_SEL_TYPE");this._fieldLabelText=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("ODATA_FIELD_SEL_LABEL");this._entityTypeText=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("ODATA_FIELD_SEL_HEADER");this._createNewFieldText=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("ODATA_CREATE_NEW_FIELD");this._oFieldController=new F();this._sSelectedKey=undefined;this._oTable=undefined;this._oSearchField=undefined;this._oConverter=undefined;this._oCreateButton=undefined;this._bDisplayFieldExtButton=undefined;this._oCurrentFieldExtInfo=undefined;this._oScrollView=new sap.m.ScrollContainer();this._oTable=new sap.m.Table();this._oHeaderLayout=undefined;var s=sap.ui.getCore().byId("smartFormPersDialog");if(s){this._oResizeDialogHandlerId=sap.ui.core.ResizeHandler.register(s,this._handleResizeDialog.bind(this));}if(this._oScrollView){this._oResizeScrollViewHandlerId=sap.ui.core.ResizeHandler.register(this._oScrollView,this._handleResizeTable.bind(this));}};
a.prototype._handleResizeDialog=function(){if(this._oScrollView){var h=q("#smartFormPersDialog-cont").height();var b=q("#smartFormPersDialogFieldSelectorHeader").height();var c=q("#sapUiCompFieldSelectorHeaderSearch").height();var t=q("#sapUiCompFieldSelectorTable-tblHeader").height();this._oScrollView.setHeight(h-b-c-t+"px");}};
a.prototype._handleResizeTable=function(){if(this._oScrollView){var w=this._oScrollView.$("scroll").innerWidth();this._oTable.setWidth(w+"px");}};
a.prototype.setModel=function(m,e,s,i,b,I){this._bDisplayFieldExtButton=s;if(!m){q.sap.log.error("oModel has to be set otherwise nothing will be displayed");}if(!e){q.sap.log.error("sEntityTypes has to be set otherwise nothing will be displayed");}this._oFieldController.init(m,e,i,b,I);this._constructLayout();this._updateCreateButtonState();};
a.prototype.getSelectedField=function(){var r={entityType:this._sSelectedKey};var s=this._oTable.getSelectedItem();if(s){var S=s.getBindingContext();if(S){var R=S.getProperty();if(R){r.field=R.fieldLabel;r.name=R.name;r.entityName=R.entityName;r.entitySet=this._oFieldController.getMetaDataAnalyzer().getEntitySetNameFromEntityTypeName(r.entityType);r.path=R.name;r.isBoundToODataService=R.id===undefined;if(!r.isBoundToODataService){r.id=R.id;}else{if(r.entityType!==R.entityName){var p=this._oFieldController.getMetaDataAnalyzer()._getNameOfPropertyUsingComplexType(r.entityType,R.entityName);if(p){r.path=p+"/"+R.name;}else{q.sap.log.error("FieldSelector: Property of complex type "+R.name+" not found on entityType "+r.entityType);}}}}}}return r;};
a.prototype.updateFieldLabel=function(f){var t=this;var o=this._oFieldController.getFields();var i=f.isBoundToODataService;var n=f.label;if(i===true){var b=f.bindingPaths;q.each(b,function(c,B){var s=B.path;var d=s.indexOf('/');var r=s.slice(0,d);var R=s.slice(d+1);var e=o[r];q.each(e,function(E,g){if(g.name&&g.name===R){g.fieldLabel=n;t._oFieldController.sortFieldsForEntity(r);t._updateTableData();return;}});});}else if(i===false){q.each(o,function(s,e){q.each(e,function(E,c){if(c.id&&c.id===f.id){c.fieldLabel=n;t._oFieldController.sortFieldsForEntity(s);}});});this._updateTableData();}};
a.prototype._constructLayout=function(){var t=this;var L=new sap.m.VBox({direction:sap.m.FlexDirection.Column});this._oHeaderLayout=new sap.m.HBox("smartFormPersDialogFieldSelectorHeader",{direction:sap.m.FlexDirection.Row});this._oHeaderLayout.addStyleClass("sapUiCompFieldSelectorHeader");this._oHeaderLayoutSearch=new sap.m.HBox({direction:sap.m.FlexDirection.Row});this._oHeaderLayoutSearch.addStyleClass("sapUiCompFieldSelectorHeaderSearch");this._oResizeHeaderHandlerId=sap.ui.core.ResizeHandler.register(this._oHeaderLayout,this._handleResizeDialog.bind(this));var e=new sap.m.HBox({direction:sap.m.FlexDirection.Row,alignItems:sap.m.FlexAlignItems.Start,layoutData:new sap.m.FlexItemData({growFactor:2})});e.addStyleClass("sapUiCompFieldSelectorHeaderEntitySelection");var h=new sap.m.Label({text:this._entityTypeText,layoutData:new sap.m.FlexItemData({order:1,growFactor:1})});var d=this._getEntityTypesRow();d.setLayoutData(new sap.m.FlexItemData({order:2,growFactor:1}));d.addStyleClass("sapUiCompFieldSelectorComboBox");h.setLabelFor(d);h.setVisible(d.getVisible());e.addItem(h);e.addItem(d);this._oHeaderLayout.addItem(e);var s=this._getSearchRow();s.setLayoutData(new sap.m.FlexItemData({growFactor:1}));s.addStyleClass("sapUiCompFieldSelectorHeader");this._oHeaderLayoutSearch.addItem(s);this._oCreateButton=new sap.m.Button({text:this._createNewFieldText,press:function(E){if(t._oCurrentFieldExtInfo){var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");var H=(c&&c.hrefForExternal({target:{semanticObject:"CustomField",action:"develop"},params:{businessContexts:t._oCurrentFieldExtInfo.BusinessContexts,serviceName:t._oCurrentFieldExtInfo.ServiceName,serviceVersion:t._oCurrentFieldExtInfo.ServiceVersion}}));window.open(H,"_blank");}}});this._oCreateButton.addStyleClass("sapUiCompFieldSelectorCreateButton");this._oHeaderLayout.addItem(this._oCreateButton);L.addItem(this._oHeaderLayout);L.addItem(this._oHeaderLayoutSearch);L.addItem(this._getFieldsRow());this.setContent(L);};
a.prototype._getEntityTypesRow=function(){var t=this;var d=new sap.m.ComboBox({selectionChange:function(E){t._oSearchField.setValue("");t._sSelectedKey=E.mParameters.selectedItem.getKey();t._updateTableData();t._updateCreateButtonState();},layoutData:new sap.m.FlexItemData({growFactor:1})});var e=this._oFieldController.getEntityTypes();for(var i=0;i<e.length;i++){d.addItem(new sap.ui.core.Item({text:e[i].label,key:e[i].key}));}if(e.length>0){this._sSelectedKey=e[0].key;d.setSelectedKey(this._sSelectedKey);}if(e.length===1){d.setVisible(false);}return d;};
a.prototype._getSearchRow=function(){var L=0;var t=this;var v;this._oSearchField=new sap.m.SearchField({visible:this.getShowSearchBar(),liveChange:function(e){v=e.getSource().getValue();var d=(v?300:0);clearTimeout(L);if(d){L=setTimeout(function(){t._executeSearch(v);},d);}else{t._executeSearch(v);}},search:function(e){v=e.getSource().getValue();t._executeSearch(v);},layoutData:new sap.m.FlexItemData({growFactor:2})});return this._oSearchField;};
a.prototype._executeSearch=function(v){var f=[];var o=new sap.ui.model.Filter("fieldLabel",sap.ui.model.FilterOperator.Contains,v);var Q=new sap.ui.model.Filter("quickInfo",sap.ui.model.FilterOperator.Contains,v);var b=new sap.ui.model.Filter([o,Q],false);f.push(b);var i=this._oTable.getBinding("items");i.filter(f,"Application");};
a.prototype._getFieldsRow=function(){this._oScrollView.setVertical(true);this._oScrollView.addStyleClass("sapUiCompFieldSelectorScrollContainer");var c=[new sap.m.Column({header:new sap.m.Label({text:this._fieldLabelText})})];this._oTable=new sap.m.Table("sapUiCompFieldSelectorTable",{mode:"SingleSelectMaster",columns:c,selectionChange:function(e){var s=this.getSelectedField();this.fireFieldSelectionChanged(s);}.bind(this)});this._oTable.setFixedLayout(false);this._updateTableData();this._oScrollView.addContent(this._oTable);this._handleResizeDialog();return this._oScrollView;};
a.prototype._updateTableData=function(){var m=new sap.ui.model.json.JSONModel();m.setData({modelData:this._oFieldController.getFields()});var t=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{fieldLabel}",tooltip:a._tooltipBinding,wrapping:false})],visible:{path:"fieldLabel",formatter:function(f){return!!f;}}});this._oTable.setModel(m);this._oTable.getModel().setSizeLimit(this._oFieldController.getMaxEntitySetSize()+5);this._oTable.bindItems("/modelData/"+this._sSelectedKey,t);};
a.prototype._updateCreateButtonState=function(){if(!this._bDisplayFieldExtButton){this._oCreateButton.setVisible(false);}else{var t=this;var m=this._oFieldController.getMetaDataAnalyzer();t._oCreateButton.setEnabled(false);try{var p=sap.ui.fl.fieldExt.Access.getBusinessContexts(m.oModel.sServiceUrl,this._sSelectedKey);p.done(function(r){if(r){if(r.BusinessContexts){if(r.BusinessContexts.length>0){t._oCurrentFieldExtInfo=r;t._oCreateButton.setEnabled(true);}}}});p.fail(function(e){t._oCreateButton.setEnabled(false);if(e){if(q.isArray(e.errorMessages)){for(var i=0;i<e.errorMessages.length;i++){q.sap.log.error(e.errorMessages[i].text);}}}});}catch(e){t._oCreateButton.setEnabled(false);q.sap.log.error("exception occured in sap.ui.fl.fieldExt.Access.getBusinessContexts");}}};
a.prototype.exit=function(){if(this._oResizeDialogHandlerId){sap.ui.core.ResizeHandler.deregister(this._oResizeDialogHandlerId);}if(this._oResizeHeaderHandlerId){sap.ui.core.ResizeHandler.deregister(this._oResizeHeaderHandlerId);}if(this._oResizeScrollViewHandlerId){sap.ui.core.ResizeHandler.deregister(this._oResizeScrollViewHandlerId);}this.destroyAggregation("content");this._oFieldController.destroy();this._sSelectedKey=null;this._oTable=null;this._oScrollView=null;this._oSearchField=null;this._oHeaderLayout=null;if(this._oConverter&&this._oConverter.destroy){this._oConverter.destroy();}this._oConverter=null;if(this._oCreateButton){if(this._oCreateButton.destroy){this._oCreateButton.destroy();}}this._oCreateButton=null;this._oCurrentFieldExtInfo=null;};
return a;},true);
sap.ui.predefine('sap/ui/comp/odata/FieldSelectorController',["jquery.sap.global","./FieldSelectorModelConverter"],function(q,M){"use strict";var F=function(){this._oModelConverter=null;this._oFields={};this._aIgnoredFields=[];};
F.prototype.init=function(o,e,i,b,I){if(!o){q.sap.log.error("oModel has to be set otherwise nothing will be displayed");}this._oModelConverter=new M(o);if(!e){e=this._oModelConverter.getAllEntityTypeNames();}if(!i){i=[];}var c=this._oModelConverter.getConvertedModel(e,i);if(b&&I){var f=this._updateFieldLabelsAndDetermineFieldsNotBoundToODataService(c,b,I);this._addFieldsNotBoundToODataService(c,f);}this._sortFields(c);};
F.prototype._updateFieldLabelsAndDetermineFieldsNotBoundToODataService=function(c,b,i){var t=this;q.each(c,function(k,d){q.each(d,function(a,D){if(D.entityName&&D.name){if(k!==D.entityName){var m=t.getMetaDataAnalyzer();var p=m._getNameOfPropertyUsingComplexType(k,D.entityName);if(p){var o=b[k+"/"+p+"/"+D.name];if(o){o.isBoundToODataService=true;var s=o.label;if(s&&(s!==D.fieldLabel)){D.fieldLabel=s;}if(i){delete i[o.id];}}}else{q.sap.log.error("FieldSelector: Property of complex type "+D.name+" not found on entityType "+k);}}else{var o=b[D.entityName+'/'+D.name];if(o){o.isBoundToODataService=true;var s=o.label;if(s&&(s!==D.fieldLabel)){D.fieldLabel=s;}if(i){delete i[o.id];}}}}});});this._removeFieldsFromList(i,b,this._oModelConverter.invisibleFields);var f=[];q.each(i,function(k,o){f.push(o);});return f;};
F.prototype._removeFieldsFromList=function(f,b,m){var t=this;if(!f||!m){return;}q.each(m,function(k,o){q.each(o,function(i,a){if(a.entityName&&a.name){if(k!==a.entityName){var c=t.getMetaDataAnalyzer();var p=c._getNameOfPropertyUsingComplexType(k,a.entityName);if(p){var d=b[k+"/"+p+"/"+a.name];if(d){delete f[a.id];}}else{q.sap.log.error("FieldSelector: Property of complex type "+a.name+" not found on entityType "+k);}}else{var d=b[a.entityName+'/'+a.name];if(d){delete f[a.id];}}}});});};
F.prototype._addFieldsNotBoundToODataService=function(c,f){var e=function(C,E){if(!c[E.key]){c[E.key]=[];}c[E.key].push(C);};var a=function(o){o.isBoundToODataService=false;var C={id:o.id,fieldLabel:o.label};var E=this._oModelConverter.getEntityTypes();E.forEach(e.bind(null,C));};f.forEach(a.bind(this));};
F.prototype._sortFields=function(c){var t=this;q.each(c,function(k,v){t._oFields[k]=v;t.sortFieldsForEntity.call(t,k);});};
F.prototype.sortFieldsForEntity=function(e){this._oFields[e]=this._oFields[e].sort(function(a,b){if(a.fieldLabel>b.fieldLabel){return 1;}if(a.fieldLabel<b.fieldLabel){return-1;}return 0;});};
F.prototype.getFields=function(){return this._oFields;};
F.prototype.getEntityTypes=function(){return this._oModelConverter.getEntityTypes();};
F.prototype.getMetaDataAnalyzer=function(){return this._oModelConverter.getMetaDataAnalyzer();};
F.prototype.getMaxEntitySetSize=function(){var m=0;if(this._oFields){q.each(this._oFields,function(k,v){if(v&&v.length){if(v.length>m){m=v.length;}}});}return m;};
F.prototype.destroy=function(){if(this._oModelConverter){this._oModelConverter.destroy();}this._oModelConverter=null;this._oFields=null;};
return F;},true);
sap.ui.predefine('sap/ui/comp/odata/FieldSelectorModelConverter',['jquery.sap.global','./MetadataAnalyser'],function(q,M){"use strict";var F=function(d){this._oMetadataAnalyzer=new M(d);this._aEntityTypes=[];this.invisibleFields={};};
F.prototype.getMetaDataAnalyzer=function(){return this._oMetadataAnalyzer;};
F.prototype.getConvertedModel=function(E,i){var c={};this._aEntityTypes=this._getEntityTypes(E);for(var e=0;e<this._aEntityTypes.length;e++){var f=this._oMetadataAnalyzer.getFieldsByEntityTypeName(this._aEntityTypes[e].key);if(f){c[this._aEntityTypes[e].key]=this._updateAndFilterFields(f,i,false,this._aEntityTypes[e].key);}}return c;};
F.prototype.getEntityTypes=function(){return this._aEntityTypes;};
F.prototype.getAllEntityTypeNames=function(){if(this._oMetadataAnalyzer){return this._oMetadataAnalyzer.getAllEntityTypeNames();}return null;};
F.prototype._updateAndFilterFields=function(a,i,I,k){var v=[];for(var f=0;f<a.length;f++){var c=a[f];if(c.visible===false){this.invisibleFields[k]=this.invisibleFields[k]||[];if(this.invisibleFields[k].indexOf(c)===-1){c.isComplexType=I;this.invisibleFields[k].push(c);}continue;}var b=this._isFieldOnIgnoreList(c,i,I);var d=this._isFieldBlacklisted(c);if(!b&&!d){if(this._isComplexType(c)===true){var V=this._resolveComplexTypeToFlatFieldList(c,i);if(V){v=v.concat(V);}}else{v.push(c);}}}return v;};
F.prototype._isComplexType=function(f){if(f&&f.type){if(f.type.toLowerCase().indexOf("edm")!==0){return true;}}return false;};
F.prototype._resolveComplexTypeToFlatFieldList=function(c,I){var r=[];var s=this._oMetadataAnalyzer.getSchemaDefinition();if(c&&c.type&&s){var t=this._getComplexTypeName(c);if(t){var C=s.complexType;var i=0;for(i=0;i<C.length;i++){var o=C[i];if(o.name===t){r=this._getFieldsFromComplexType(o,I);break;}}}}return r;};
F.prototype._getFieldsFromComplexType=function(c,i){var f=this._oMetadataAnalyzer.getFieldsByComplexTypeName(c.name);if(f){return this._updateAndFilterFields(f,i,true,c.name);}return[];};
F.prototype._getComplexTypeName=function(c){var t=c.type.split(".");if(t.length===2){return t[1];}return null;};
F.prototype._isFieldOnIgnoreList=function(c,i,I){if(i){var n=this._aEntityTypes.length;var Q=c.entityName+"."+c.name;if(n===1&&!I){if(i.indexOf(c.name)!==-1||i.indexOf(Q)!==-1){return true;}}else if(i.indexOf(Q)!==-1){return true;}}return false;};
F.prototype._isFieldBlacklisted=function(c){if(c){if(c.name.toLowerCase().indexOf("uxfc")===0){return true;}else if(c.type.toLowerCase()==="edm.time"){return true;}}return false;};
F.prototype._getEntityTypes=function(E,a){var b=[];var l;var c;if(!this._oMetadataAnalyzer||!this._oMetadataAnalyzer._oSchemaDefinition){return[];}var A=this._oMetadataAnalyzer._oSchemaDefinition.entityType;if(!E){c=[];for(var t=0;t<A.length;t++){c.push(A[t].name);}}if(!c){c=this._convertEntityTypesToArray(E);}for(var e=0;e<c.length;e++){l=this._oMetadataAnalyzer.getEntityLabelByEntityTypeName(c[e]);b.push({key:c[e],label:l||c[e]});}return b;};
F.prototype._convertEntityTypesToArray=function(e){if(typeof(e)==="string"){var r=e.replace(/ /g,'');return r.split(',');}if(q.isArray(e)){return e;}return undefined;};
F.prototype.destroy=function(){if(this._oMetadataAnalyzer&&this._oMetadataAnalyzer.destroy){this._oMetadataAnalyzer.destroy();}this._oMetadataAnalyzer=null;this._aEntityTypes=null;};
return F;},true);
sap.ui.predefine('sap/ui/comp/odata/FieldSelectorRenderer',['jquery.sap.global'],function(q){"use strict";var F={};
F.render=function(r,c){r.write("<span");r.writeControlData(c);r.writeClasses();r.write(">");var C=c.getContent();r.renderControl(C);r.write("</span>");};
return F;},true);
sap.ui.predefine('sap/ui/comp/odata/SideEffects',["jquery.sap.global"],function(q){"use strict";var S=function(){};
S.prototype.getSideEffects=function(p,t,m){var r={};if(m){if(p){if(m.entitySet){r.entitySet=this._getForPath(m.entitySet,p);}if(m.entityType){r.entityType=this._getForPath(m.entityType,p);}}if(t&&m.complexType){r.complexType=this._getForPath(m.complexType,t);}}return r;};
S.prototype._getForPath=function(e,p){var n,s,r={};for(n in e){if(n.indexOf&&n.indexOf("com.sap.vocabularies.Common.v1.SideEffects")===0){s=e[n];if(this._checkSourceProperties(s,p)){r[n]=s;}if(this._checkSourceEntities(s,p)){r[n]=s;}}}return r;};
S.prototype._checkSourceProperties=function(s,p){var i,l;if(s.SourceProperties){l=s.SourceProperties.length;for(i=0;i<l;i++){if(s.SourceProperties[i].PropertyPath===p){return true;}}}return false;};
S.prototype._checkSourceEntities=function(s,p){var i,l;if(s.SourceEntities&&s.SourceEntities.Collection){l=s.SourceEntities.Collection.length;for(i=0;i<l;i++){if(s.SourceEntities.Collection[i].NavigationPropertyPath===p){return true;}}}return false;};
S.prototype.destroy=function(){};
return S;},true);
sap.ui.predefine('sap/ui/comp/providers/TokenParser',["jquery.sap.global","sap/ui/base/ManagedObject"],function(q,M){"use strict";var T=function(d){this._sDefaultOperation=d;this._aKeyFields=[];this._mTypeOperations={"default":["Contains","EQ","BT","StartsWith","EndsWith","LT","LE","GT","GE","NE"],"string":["Contains","EQ","BT","StartsWith","EndsWith","LT","LE","GT","GE","NE"],"date":["EQ","BT","LT","LE","GT","GE","NE"],"time":["EQ","BT","LT","LE","GT","GE","NE"],"numeric":["EQ","BT","LT","LE","GT","GE","NE"],"boolean":["EQ"]};this._init();};
T.prototype._init=function(){this.createOperation("BT","foo...bar","...",/^.+\.\.\..+$/,"$0...$1",function(t){var s=t.slice(0,t.indexOf(this.operation));var a=t.slice(t.indexOf(this.operation)+this.operation.length);return[s,a];});this.createOperation("EQ","=foo","=",/^\=.+$/,"=$0");this.createOperation("Contains","*foo*","**",/^\*.+\*$/,"*$0*",function(t){return[t.slice(1,t.length-1).trim()];});this.createOperation("StartsWith","foo*","*",/^([^\*].*)\*$/,"$0*",function(t){return[t.slice(0,t.length-1).trim()];});this.createOperation("EndsWith","*foo","*",/^\*(.*[^\*])$/,"*$0");this.createOperation("LT","< foo","<",/^\<([^\=].*)$/,"<$0");this.createOperation("LE","<=foo","<=",/^\<\=(.+)$/,"<=$0");this.createOperation("GT","> foo",">",/^\>([^\=].*)$/,">$0");this.createOperation("GE",">=foo",">=",/^\>\=(.+)$/,">=$0");this.createOperation("NE","!=foo","!=",/^\!\=(.+)$/,"!(=$0)").exclude=true;};
T.prototype.destroy=function(){this._oInput.removeValidator(this._validator);this._oInput=null;this._aOrgValidators=null;this._aKeyFields=null;this._mTypeOperations=null;};
T.prototype.setDefaultOperation=function(o){this._sDefaultOperation=o;};
T.prototype.getDefaultOperation=function(){return this._sDefaultOperation;};
T.prototype.setMaxLength=function(m){this._iMaxLength=m;};
T.prototype.getMaxLength=function(){return this._iMaxLength;};
T.prototype.setDisplayFormat=function(d){this._sDisplayFormat=d;};
T.prototype.getDisplayFormat=function(){return this._sDisplayFormat;};
T.prototype.getOperations=function(){return this._mOperations;};
T.prototype.getOperation=function(o){return this._mOperations&&this._mOperations[o];};
T.prototype._getKeyFieldByLabel=function(l){var k;this._aKeyFields.some(function(K){if(K.label.toUpperCase()===l.toUpperCase()){k=K;}},this);return k;};
T.prototype.addKeyField=function(k){this._aKeyFields.push(k);};
T.prototype.addTypeOperations=function(t,o){this._mTypeOperations[t]=o;};
T.prototype.removeTypeOperations=function(t){delete this._mTypeOperations[t];};
T.prototype.getTypeOperations=function(t){return this._mTypeOperations[t];};
T.prototype.createOperation=function(o,e,O,r,t,p){if(!this._mOperations){this._mOperations={};}this._mOperations[o]={key:o,example:e,operation:O,re:r,template:t,exclude:false,parser:this,match:function(s){return this.re.exec(s);},parse:p||function(s){return[s.slice(this.operation.length).trim()];},getFilledTemplate:function(s){var v=this.parse(s);var a=this.template;for(var i=0;i<v.length;i++){a=a.replace("$"+i,this.format(v[i]));}return a;},getConditionData:function(s){var a={};a.exclude=this.exclude;a.operation=this.exclude?"EQ":this.key;var v=this.parse(s);for(var i=0;i<v.length;i++){a["value"+(i+1)]=this.format(v[i]);}return a;},format:function(v){if(this.parser.getMaxLength()>=0){v=v.substring(0,this.parser.getMaxLength());}if(this.parser._sDisplayFormat==="UpperCase"){v=v.toUpperCase();}return v;}};return this._mOperations[o];};
T.prototype.removeOperation=function(o){delete this._mOperations[o];};
T.prototype.removeAllOperations=function(){var o=Object.keys(this._mOperations);o.forEach(function(a){delete this._mOperations[a];},this);};
T.prototype.getTranslatedText=function(t,o,r){var s=o.key;t=t!=="default"?"_"+t.toUpperCase()+"_":"";if(t==="_STRING_"||t==="_BOOLEAN_"){t="";}if(t==="_TIME_"){t="_DATE_";}if(!r){r="sap.m";}s="CONDITIONPANEL_OPTION"+t+s;var a=sap.ui.getCore().getLibraryResourceBundle(r).getText(s)||s;if(q.sap.startsWith(a,"CONDITIONPANEL_OPTION")){s="CONDITIONPANEL_OPTION"+o.key;a=sap.ui.getCore().getLibraryResourceBundle(r).getText(s);}return a;};
T.prototype.associateInput=function(i){this._oInput=i;this._aOrgValidators=this._oInput._tokenizer?this._oInput._tokenizer._aTokenValidators.slice():[];this._oInput.removeAllValidators();this._oInput.addValidator(this._validator.bind(this));};
T.prototype._validator=function(a){if(this._aOrgValidators){var t;this._aOrgValidators.some(function(v){t=v(a);return t;},this);if(t){return t;}}if(a.suggestionObject&&a.suggestionObject.getKey){var k=a.suggestionObject.getKey();var b=a.suggestionObject.getText();var c=a.suggestionObject.getAdditionalText();if(c){return this._onValidate(c);}else{return new sap.m.Token({key:k,text:b+" ("+k+")",tooltip:b});}}if(a.suggestedToken){var s=a.suggestedToken.getText();var K=a.suggestedToken.getKey();a.suggestedToken.setText(s+" ("+K+")");a.suggestedToken.setTooltip(a.suggestedToken.getText());return a.suggestedToken;}if(a.text){return this._onValidate(a.text);}return null;};
T.prototype._onValidate=function(t){var k=this._aKeyFields.length>0?this._aKeyFields[0]:null;if(this._oInput._getIsSuggestionPopupOpen&&this._oInput._getIsSuggestionPopupOpen()&&this._oInput._oSuggestionTable&&this._oInput._oSuggestionTable.getSelectedItem()){return null;}if(k){var a=/^\w+\:\s/.exec(t);if(a){var K=a[0];k=this._getKeyFieldByLabel(K.slice(0,K.indexOf(":")));t=t.slice(a[0].length).trim();}}var b=k&&k.type||"default";var c=this._mTypeOperations[b];var C=function(o,t){if(o.match(t)){var r=o.getConditionData(t);r.keyField=k?k.key:null;var s=(k&&k.label&&this._aKeyFields.length>1?k.label+": ":"")+o.getFilledTemplate(t);s=M.bindingParser.escape(s);return new sap.m.Token({text:s,tooltip:s}).data("range",r);}return null;}.bind(this);var d;if(c.some(function(o){d=C(this._mOperations[o],t);return d;},this)){return d;}if(this._sDefaultOperation&&this._mOperations[this._sDefaultOperation]){t=this._mOperations[this._sDefaultOperation].template.replace("$0",t);return C(this._mOperations[this._sDefaultOperation],t);}return null;};
return T;},true);
sap.ui.predefine('sap/ui/comp/smartfield/AnnotationHelper',[],function(){"use strict";var A=function(){};
A.prototype.getText=function(p){return p["sap:text"]||this._getObject("com.sap.vocabularies.Common.v1.Text/Path",p);};
A.prototype.getTextArrangement=function(p,e){var E=null,P=null;P=this._getObject("com.sap.vocabularies.Common.v1.Text",p);if(P){E=P["com.sap.vocabularies.UI.v1.TextArrangement"];}if(!E){E=this._getObject("com.sap.vocabularies.UI.v1.TextArrangement",e);}if(E&&E.EnumMember){if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"){return"descriptionAndId";}if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"idAndDescription";}if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return"idOnly";}if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"descriptionOnly";}}return null;};
A.prototype.getUnit=function(p){return p["sap:unit"]||this._getObject("Org.OData.Measures.V1.ISOCurrency/Path",p)||this._getObject("Org.OData.Measures.V1.Unit/Path",p);};
A.prototype.getLabel=function(p){var l=this._getObject("com.sap.vocabularies.UI.v1.DataFieldWithUrl/Label/String",p);return l||p["sap:label"]||this._getObject("com.sap.vocabularies.Common.v1.Label/String",p);};
A.prototype.isCurrency=function(p){return(p["sap:semantics"]==="currency-code")||!!this._getObject("Org.OData.Measures.V1.ISOCurrency/Path",p);};
A.prototype.getQuickInfo=function(p){return p["sap:quickinfo"]||this._getObject("com.sap.vocabularies.Common.v1.QuickInfo/String",p);};
A.prototype.isMasked=function(p){return(!!this._getObject("com.sap.vocabularies.Common.v1.Masked",p));};
A.prototype.isMultiLineText=function(p){return(!!this._getObject("com.sap.vocabularies.UI.v1.MultiLineText",p));};
A.prototype.isStaticMandatory=function(p){var f=this._getObject("com.sap.vocabularies.Common.v1.FieldControl",p);if(f&&f.EnumMember){return(f.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory");}return false;};
A.prototype.isNullable=function(p){var n=this._getObject("nullable",p);if(n){return(n==="true");}return true;};
A.prototype.isUpperCase=function(p){return(p["sap:display-format"]==="UpperCase")||(this._getObject("com.sap.vocabularies.Common.v1.IsUpperCase/Bool",p)==="true");};
A.prototype.canCreateEntitySet=function(e){var n=(e["sap:creatable"]==="false")||(this._getObject("Org.OData.Capabilities.V1.InsertRestrictions/Insertable/Bool",e)==="false");return!n;};
A.prototype.canCreateProperty=function(p){if(this._getObject("Org.OData.Core.V1.Computed/Bool",p)==="true"){return false;}if(p["sap:creatable"]==="false"){return false;}return true;};
A.prototype.canUpdateEntitySet=function(e){var n=(e["sap:updatable"]==="false")||(this._getObject("Org.OData.Capabilities.V1.UpdateRestrictions/Updatable/Bool",e)==="false");return!n;};
A.prototype.getUpdateEntitySetPath=function(e){return e["sap:updatable"]||this._getObject("Org.OData.Capabilities.V1.UpdateRestrictions/Updatable/Path",e);};
A.prototype.canUpdateProperty=function(p){var n=(p["sap:updatable"]==="false")||(this._getObject("Org.OData.Core.V1.Immutable/Bool",p)==="true")||(this._getObject("com.sap.vocabularies.Common.v1.FieldControl/EnumMember",p)==="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly");return!n;};
A.prototype.getFieldControlPath=function(p){return p["sap:field-control"]||this._getObject("com.sap.vocabularies.Common.v1.FieldControl/Path",p);};
A.prototype.getVisible=function(p){if(p["sap:visible"]){return p["sap:visible"];}var v=this._getObject("com.sap.vocabularies.Common.v1.FieldControl/EnumMember",p);if(v==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"){return"false";}return"true";};
A.prototype._getObject=function(p,o){var n=o,P=p.split("/"),i=0;while(n&&P[i]){n=n[P[i]];i++;}return n;};
A.prototype.destroy=function(){};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartfield/BindingUtil',["sap/ui/model/odata/AnnotationHelper","sap/ui/base/BindingParser"],function(A,B){"use strict";var a=function(){};
a.prototype.correctPath=function(p){var e,r=/\((.+)\)*/,m=r.exec(p);if(m){e=p.replace(m[0],"");}else{e=p;}return e.replace("/","");};
a.prototype.getNavigationProperties=function(c){var o,b,r={};b=c.getBindingContext();if(b&&b.sPath){r.paths=b.sPath.split("/");}o=c.getObjectBinding();if(o&&o.sPath){r.objectBinding=o.sPath;if(r.paths){r.paths.push(o.sPath);}else{r.paths=[o.sPath];}}if(!r.paths){r.paths=[];}return r;};
a.prototype.getBindingParts=function(b,p,I){var l=0,i,P,o;if(b&&b.parts){l=b.parts.length;}for(i=0;i<l;i++){o="";P=b.parts[i];if(P.model){o=o+P.model+">";}o=o+P.path;p.push(o);I.length++;}};
a.prototype.toBinding=function(I){var o={},n,p,i,l,N={model:true,formatter:true,mode:true,path:true};if(I){if(I.parts&&I.parts.length){l=I.parts.length;o.parts=[];}for(i=0;i<l;i++){p=I.parts[i];o.parts.push(p);}for(n in N){if(I[n]){o[n]=I[n];}}return o;}return null;};
a.prototype.toBindingPath=function(I){var o,O="",p,i,l;o=this.toBinding(I);if(o){if(o.model){O=o.model+">";}if(o.path){O=O+o.path;}else if(o.parts&&o.parts.length>0){l=o.parts.length;for(i=0;i<l;i++){p=o.parts[i];if(p.model){O=O+p.model+">";}O=O+p.path;}}}return O;};
a.prototype.fromFormatter=function(m,f,p){var i,l,P,b={model:m,formatter:f.formatter};P=f.path();l=P.length;if(l>0){b.parts=P;if(p){for(i=0;i<l;i++){p.push(P[i]);}}}else{b.path="";}return b;};
a.prototype.executeODataBindingExpression=function(b,o){var i,v,V,p,h,H="";if(b&&o){h=A.format(o,b);H=h;p=B.complexParser(h,o);V=[];if(p){if(p.formatter){for(i=0;i<p.parts.length;i++){v=o.getProperty(p.parts[i].path,"value");V.push(v);}H=p.formatter.apply(null,V);}else{H=o.getProperty(p.path,"value");}}}return H;};
a.prototype.destroy=function(){};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ControlFactoryBase',["jquery.sap.global","sap/ui/base/Object","sap/ui/comp/util/FormatUtil","sap/ui/comp/providers/ValueHelpProvider","sap/ui/comp/providers/ValueListProvider","sap/ui/comp/smartfield/BindingUtil","sap/m/HBox"],function(q,B,F,V,a,b,H){"use strict";
var C=B.extend("sap.ui.comp.smartfield.ControlFactoryBase",{constructor:function(m,p){B.apply(this,arguments);this.sName="ControlFactoryBase";this._oModel=m;this._oParent=p;this._oBinding=new b();this._aProviders=[];this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}});
C.prototype.createControl=function(c){var m,o;m=this._getCreator(c);if(m){o=this[m]();this._addAriaLabelledBy(o);if(o&&o.onCreate){this[o.onCreate](o.control,o.params);}}return o;};
C.prototype._addAriaLabelledBy=function(c){var t;if((this._oParent.getControlContext()===sap.ui.comp.smartfield.ControlContextType.None)||(this._oParent.getControlContext()===sap.ui.comp.smartfield.ControlContextType.Form)||(this._oParent.getControlContext()===sap.ui.comp.smartfield.ControlContextType.SmartFormGrid)){if(c){t=c.control;if(t instanceof H){if(t.getItems().length>0){t=t.getItems()[0];}}}if(t&&t.addAriaLabelledBy&&this._oParent.getAriaLabelledBy().length>0){t.removeAllAriaLabelledBy();this._oParent.getAriaLabelledBy().forEach(function(A){t.addAriaLabelledBy(A);});}}};
C.prototype.addValidations=function(c,m){var s,e,t=this;s=function(S,E){var M,o,d=E.getSource();if(d){if(d.setValueState){d.setValueState(S);}o=E.getParameter("exception");if(o){M=o.message;}if(!M){M=E.getParameter("message");}if(d.setValueStateText){d.setValueStateText(M);}}if(m){t._oParent[m](S===sap.ui.core.ValueState.Error);}};e=function(E){s(sap.ui.core.ValueState.Error,E);};c.attachFormatError(e);c.attachParseError(e);c.attachValidationError(e);c.attachValidationSuccess(function(E){s(sap.ui.core.ValueState.None,E);});};
C.prototype._getDisplayBehaviourConfiguration=function(d){var D=null;var c=this._oParent.getConfiguration();if(c){D=c.getDisplayBehaviour();}if(!D&&this._oMetaData&&this._oMetaData.entityType){D=this._oHelper.oAnnotation.getTextArrangement(this._oMetaData.property.property,this._oMetaData.entityType);}if(!D){D=this._oParent.data(d);}return D;};
C.prototype._getPreventInitialDataFetchInVHDialog=function(){var c=this._oParent.getConfiguration();return c?c.getPreventInitialDataFetchInValueHelpDialog():true;};
C.prototype._formatDisplayBehaviour=function(d,k,D){var s=this._getDisplayBehaviourConfiguration(d);if(d==="defaultCheckBoxDisplayBehaviour"){return this._getFormattedExpressionFromDisplayBehaviour(s,k);}if(d==="defaultComboBoxReadOnlyDisplayBehaviour"&&!s){s="descriptionAndId";}return F.getFormattedExpressionFromDisplayBehaviour(s||"idOnly",k,D);};
C.prototype._getFormattedExpressionFromDisplayBehaviour=function(d,v){var k="";switch(d){case"OnOff":k=v?"SMARTFIELD_CB_ON":"SMARTFIELD_CB_OFF";break;case"TrueFalse":k=v?"SMARTFIELD_CB_TRUE":"SMARTFIELD_CB_FALSE";break;default:k=v?"SMARTFIELD_CB_YES":"SMARTFIELD_CB_NO";break;}return this._oRb.getText(k);};
C.prototype.createValueHelp=function(c,p,v,m,o){var d,e;if(v.annotation&&(p["sap:value-list"]||p["com.sap.vocabularies.Common.v1.ValueList"])){var D=this._getDisplayBehaviourConfiguration("defaultDropDownDisplayBehaviour"),f=this._oParent.data("dateFormatSettings"),P=this._getPreventInitialDataFetchInVHDialog();if(typeof f==="string"){try{f=JSON.parse(f);}catch(g){}}var A,s;if(typeof v.annotation==="string"){s=v.annotation;}else if(v&&typeof v.annotation==="object"){A=v.analyser.getValueListAnnotationForFunctionImport({"":v.annotation},p.name).primaryValueListAnnotation;}if(!v.noDialog){if(c.setFilterSuggests){c.setFilterSuggests(false);}d=new V({loadAnnotation:true,fullyQualifiedFieldName:s,annotation:A,metadataAnalyser:v.analyser,control:c,model:m,preventInitialDataFetchInValueHelpDialog:P,dateFormatSettings:f,takeOverInputValue:false,supportMultiSelect:false,supportRanges:false,fieldName:p.name,title:v.dialogtitle,displayBehaviour:D});if(o){d.attachValueListChanged(o);}this._aProviders.push(d);if(c.setShowValueHelp){c.setShowValueHelp(true);}}e=new a({control:c,typeAheadEnabled:!v.noTypeAhead,aggregation:v.aggregation,loadAnnotation:true,fullyQualifiedFieldName:s,annotation:A,metadataAnalyser:v.analyser,model:m,dateFormatSettings:f,displayBehaviour:D});if(!v.noTypeAhead){if(c.setShowSuggestion){c.setShowSuggestion(true);}}if(o){e.attachValueListChanged(o);}this._aProviders.push(e);}};
C.prototype.getAttribute=function(n){var i=this._oParent.getBindingInfo(n);if(i){return this._oBinding.toBindingPath(i);}return this._oParent["get"+n.substring(0,1).toUpperCase()+n.substring(1)]();};
C.prototype.createAttributes=function(A,t,N,e){var c=this,n,i,m={};for(n in N){i=this._oParent.getBindingInfo(n);if(i){m[n]=this._oBinding.toBinding(i);}else{m[n]=this._oParent["get"+n.substring(0,1).toUpperCase()+n.substring(1)]();}}if(A){m[A]={model:this._oMetaData.model,path:this._oMetaData.path,type:t?this._oTypes.getType(t):null};}if(e){m[e.event]=function(p){try{c._oParent.fireChange({value:p.mParameters[e.parameter],newValue:p.mParameters[e.parameter]});}catch(d){q.sap.log.warning(d);}};}this.addObjectBinding(m);return m;};
C.prototype.mapBindings=function(A,N){var n,i;for(n in N){i=this._oParent.getBindingInfo(n);if(i){A[N[n]]=this._oBinding.toBinding(i);}else{A[N[n]]=this._oParent["get"+n.substring(0,1).toUpperCase()+n.substring(1)]();}}};
C.prototype.addObjectBinding=function(A,o){if(!o){o=this._oParent.getObjectBinding(this._oMetaData.model);}if(A&&o){A.objectBindings={};A.objectBindings[this._oMetaData.model]=o.sPath;}};
C.prototype.getFormatSettings=function(f){var m=null,c,o,l;if(f){m=this._oParent.data(f);if(!m){c=this._oParent.getCustomData();if(c){l=c.length;while(l--){o=c[l];if(o.getKey()===f){m=o.getValue();break;}}}}if(m&&typeof(m)==="string"){try{m=JSON.parse(m);}catch(e){return null;}}}return m;};
C.prototype.destroy=function(){var l=this._aProviders.length;while(l--){this._aProviders[l].destroy();}if(this._oBinding){this._oBinding.destroy();}this._oBinding=null;this._oParent=null;this._oModel=null;this._aProviders=[];this._oRb=null;};
return C;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ControlProposal',["jquery.sap.global","sap/ui/comp/library","sap/ui/core/Element"],function(q,l,E){"use strict";
var C=E.extend("sap.ui.comp.smartfield.ControlProposal",{metadata:{library:"sap.ui.comp",properties:{controlType:{type:"sap.ui.comp.smartfield.ControlProposalType",group:"Misc",defaultValue:sap.ui.comp.smartfield.ControlProposalType.None}},aggregations:{objectStatus:{type:"sap.ui.comp.smartfield.ObjectStatus",multiple:false}}}});
return C;},true);
sap.ui.predefine('sap/ui/comp/smartfield/FieldControl',["jquery.sap.global","sap/ui/comp/smartfield/BindingUtil","sap/ui/model/ParseException"],function(q,B,P){"use strict";var F=function(p,h){this._bIsDestroyed=false;this._oBinding=new B();this._oStoredProperties={};this._bVisibleSet=false;this._bEditableSet=false;this._bMandatorySet=false;this._bUomEditableSet=false;this._oStoredBindings={};this._oParent=p;this._oHelper=h;this._oAnnotation=h.oAnnotation;};
F.prototype.getBindableAttributes=function(n){var c=this._oParent.data("configdata");if(c&&(c.configdata&&!c.configdata.isUOM||!c.configdata)){if(c.configdata&&c.configdata.property&&c.configdata.property.property&&this._oAnnotation.getFieldControlPath(c.configdata.property.property)){return["editable","visible"];}else{return["editable"];}}if(n){return["editable","visible"];}return["editable","visible","mandatory"];};
F.prototype.getControlProperties=function(m,b){var M,l,n,r={};if(m&&b){l=b.length;while(l--){n=b[l];M="_get"+n.substring(0,1).toUpperCase()+n.substring(1);if(this[M]){r[n]=this[M](m,this._oParent.getBindingInfo(n));}}}return r;};
F.prototype._getEditable=function(m,b,p){var a,i=-1,e=-1,c=-1,t=this,o={length:0};if(p==="uomEditable"){this._bUomEditableSet=true;}else{this._bEditableSet=true;}if(!b){if(p){a=this._oParent["get"+p.substring(0,1).toUpperCase()+p.substring(1)]();this._oStoredProperties[p]=a;}else{a=this._oParent.getEditable();this._oStoredProperties["editable"]=a;}this._oStoredBindings.editable=null;}else if(this._oStoredBindings.editable===undefined){this._oStoredBindings.editable=b;}return{path:function(){var d=[],s,l=0;if(!m.property||!m.property.property){return[""];}s=t._oAnnotation.getFieldControlPath(m.property.property);if(s){d.push(t._toPath(m,s));i=l;l++;}if(m.entitySet["sap:updatable-path"]){d.push(m.entitySet["sap:updatable-path"]);e=l;l++;}if(b){c=l;t._oBinding.getBindingParts(b,d,o);l=l+o.length;}if(l>0){return d;}return[""];},formatter:function(v,d,f,g){var A=[],h,O;if(t._bIsDestroyed){return false;}if(!t._oAnnotation){return false;}h=t._oParent.getBindingContext();if(!h){return v;}if(h.getObject&&m&&m.property&&m.property.property){O=h.getObject();if(O&&O.__metadata&&O.__metadata.created){if(!t._getCreatableStatic(m)){return false;}}else if(!t._getUpdatableStatic(m)){return false;}}if(i>-1){A.push(arguments[i]!==1);}if(e>-1&&(!O||!O.__metadata||!O.__metadata.created)){A.push(!!arguments[e]);}if(c>-1){if(b.formatter){A.push(t._execFormatter(b.formatter,arguments,c,o.length));}else{A.push(!!arguments[c]);}}else{A.push(a);}return t._compare(A,false,true);}};};
F.prototype._execFormatter=function(f,a,s,l){var A=[],i;if(s>-1&&l>-1){for(i=0;i<l;i++){A.push(a[s+i]);}}return f.apply(null,A);};
F.prototype._getCreatableStatic=function(m){return(this._oAnnotation.canCreateEntitySet(m.entitySet)&&this._oAnnotation.canCreateProperty(m.property.property));};
F.prototype._getUpdatableStatic=function(m){return(this._oAnnotation.canUpdateEntitySet(m.entitySet)&&this._oAnnotation.canUpdateProperty(m.property.property));};
F.prototype._compare=function(a,p,d){var i,l=a.length;for(i=0;i<l;i++){if(a[i]===p){return p;}}return d;};
F.prototype._getVisible=function(m,b){var p,i=-1,a=-1,t=this,o={length:0};this._bVisibleSet=true;if(!b){p=this._oParent.getVisible();this._oStoredProperties.visible=p;this._oStoredBindings.visible=null;}else if(this._oStoredBindings.visible===undefined){this._oStoredBindings.visible=b;}return{path:function(){var c=[],s,l=0;if(!m.property||!m.property.property){return[""];}s=t._oAnnotation.getFieldControlPath(m.property.property);if(s){c.push(t._toPath(m,s));a=l;l++;}if(b){i=l;t._oBinding.getBindingParts(b,c,o);l=l+o.length;}if(l>0){return c;}return[""];},formatter:function(c,d){var A=[];if(t._bIsDestroyed){return false;}if(!t._oAnnotation){return false;}if(m.property&&m.property.property&&t._oAnnotation.getVisible(m.property.property)==="false"){return false;}if(a>-1){A.push(arguments[a]!==0);}if(i>-1){if(b.formatter){A.push(t._execFormatter(b.formatter,arguments,i,o.length));}else{A.push(!!arguments[i]);}}else{A.push(p);}return t._compare(A,false,true);}};};
F.prototype._getMandatory=function(m,b){var p,i=-1,a=-1,t=this,o={length:0};this._bMandatorySet=true;if(!b){p=this._oParent.getMandatory();this._oStoredProperties.mandatory=p;this._oStoredBindings.mandatory=null;}else if(this._oStoredBindings.mandatory===undefined){this._oStoredBindings.mandatory=b;}return{path:function(){var c=[],s,l=0;if(!m.property||!m.property.property){return[""];}s=t._oAnnotation.getFieldControlPath(m.property.property);if(s){c.push(t._toPath(m,s));a=l;l++;}if(b){i=l;t._oBinding.getBindingParts(b,c,o);l=l+o.length;}if(l>0){return c;}return[""];},formatter:function(c,d){var A=[];if(t._bIsDestroyed){return true;}if(m.property&&m.property.property){if(m.property.property.nullable==="false"||(t._oAnnotation&&t._oAnnotation.isStaticMandatory(m.property.property))){A.push(true);}else if(m.property.property.nullable){A.push(false);}}if(a>-1){A.push(arguments[a]===7);}if(i>-1){if(b.formatter){A.push(t._execFormatter(b.formatter,arguments,i,o.length));}else{A.push(!!arguments[i]);}}else{A.push(p);}return t._compare(A,true,false);}};};
F.prototype._toPath=function(m,p){if(m.property.complex){return m.path.replace(m.property.property.name,p);}if(m.navigationPath){return m.navigationPath+"/"+p;}return p;};
F.prototype.getMandatoryCheck=function(p){var r,t=this;if(p){switch(p.property.type){case"Edm.DateTimeOffset":case"Edm.DateTime":case"Edm.Time":case"Edm.String":r=function(v){if(t._oParent&&t._oParent.getMandatory()&&t._oParent.getClientSideMandatoryCheck()&&(!t._oAnnotation||!t._oAnnotation.isStaticMandatory(p.property)||!t._oAnnotation.isNullable(p.property))&&!v){throw new P(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("VALUEHELPVALDLG_FIELDMESSAGE"));}};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Float":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":case"Edm.Byte":case"Edm.SByte":r=function(v){if(t._oParent&&t._oParent.getMandatory()&&t._oParent.getClientSideMandatoryCheck()&&(!t._oAnnotation||!t._oAnnotation.isStaticMandatory(p.property)||!t._oAnnotation.isNullable(p.property))&&(v===null||v===undefined||v==="")){throw new P(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("VALUEHELPVALDLG_FIELDMESSAGE"));}};break;default:break;}}return r;};
F.prototype.getUOMEditState=function(m){var n,u,U,l=0,b;b=this._oParent.getBindingInfo("editable");n=this._getEditable(m,b);U={model:m.model,path:this._oHelper.getUOMPath(m),entitySet:m.entitySet,entityType:m.entityType,property:{property:m.annotations.uom.property,complex:m.property.complex,typePath:this._oHelper.getUOMTypePath(m)}};u=this._getEditable(U,this._oParent.getBindingInfo("uomEditable"),"uomEditable");return{path:function(){var N=n.path(),a=u.path();if(N[0]===""&&a===""){return[""];}l=N.length;return N.concat(a);},formatter:function(v,p,a,c){var A=[],i,N,d,e=arguments.length;for(i=0;i<l;i++){A.push(arguments[i]);}N=n.formatter.apply(null,A);A=[];for(i=0;i<e;i++){A.push(arguments[i]);}for(i=0;i<l;i++){A.shift();}d=u.formatter.apply(null,A);if(!d&&!N){return 0;}return 1;}};};
F.prototype.hasUomEditState=function(m){var p;if(m&&m.annotations&&m.annotations.uom){p=this._oParent.getControlProposal();if(p){if(p.getControlType()==="ObjectNumber"){return true;}if(p.getObjectStatus()){return true;}}return this._oParent.getProposedControl()==="ObjectNumber";}return false;};
F.prototype.destroy=function(){if(this._oBinding){this._oBinding.destroy();}this._oAnnotation=null;this._oBinding=null;if(this._oParent&&!this._oParent._bInDestroy){for(var p in this._oStoredProperties){this._oParent.unbindProperty(p,true);if(this._oParent["set"+p.substring(0,1).toUpperCase()+p.substring(1)]){this._oParent["set"+p.substring(0,1).toUpperCase()+p.substring(1)](this._oStoredProperties[p]);}}if(this._oStoredProperties){if(!this._oStoredProperties.editable&&this._bEditableSet){this._oParent.unbindProperty("editable");}if(!this._oStoredProperties.visible&&this._bVisibleSet){this._oParent.unbindProperty("visible");}if(!this._oStoredProperties.mandatory&&this._bMandatorySet){this._oParent.unbindProperty("mandatory");}if(!this._oStoredProperties.uomEditable&&this._bUomEditableSet){this._oParent.unbindProperty("uomEditable");}}if(this._oStoredBindings){if(this._oStoredBindings.editable){if(this._oParent.isBound("editable")){this._oParent.unbindProperty("editable");}this._oParent.bindProperty("editable",this._oStoredBindings.editable);}if(this._oStoredBindings.visible){if(this._oParent.isBound("visible")){this._oParent.unbindProperty("visible");}this._oParent.bindProperty("visible",this._oStoredBindings.visible);}if(this._oStoredBindings.mandatory){if(this._oParent.isBound("mandatory")){this._oParent.unbindProperty("mandatory");}this._oParent.bindProperty("mandatory",this._oStoredBindings.mandatory);}if(this._oStoredBindings.uomEditable){if(this._oParent.isBound("uomEditable")){this._oParent.unbindProperty("uomEditable");}this._oParent.bindProperty("uomEditable",this._oStoredBindings.uomEditable);}}}this._oStoredProperties=null;this._oStoredBindings=null;this._oParent=null;this._oHelper=null;this._bIsDestroyed=true;this._bEditableSet=false;this._bMandatorySet=false;this._bVisibleSet=false;this._bUomEditableSet=false;};
return F;},true);
sap.ui.predefine('sap/ui/comp/smartfield/JSONControlFactory',["jquery.sap.global","sap/m/CheckBox","sap/m/ComboBox","sap/m/DatePicker","sap/m/Input","sap/m/Text","sap/ui/comp/smartfield/ControlFactoryBase","sap/ui/comp/smartfield/JSONTypes"],function(q,C,a,D,I,T,b,J){"use strict";
var c=b.extend("sap.ui.comp.smartfield.JSONControlFactory",{constructor:function(m,p,M){b.apply(this,[m,p]);this.sName="JSONControlFactory";this._oMetaData=M;this._oTypes=new J();}});
c.prototype._getCreator=function(){var m={"Boolean":"_createBoolean","Date":"_createDate","DateTime":"_createString","Float":"_createString","Integer":"_createString","String":"_createString"};if(!this._oParent.getEditable()||!this._oParent.getEnabled()){if(this._oParent.getJsontype()==="Boolean"){return"_createBoolean";}return"_createDisplay";}return m[this._oParent.getJsontype()]||"_createString";};
c.prototype._createString=function(){var n,N,m={width:true,textAlign:true,placeholder:true,name:true,maxLength:true};n=!this._oParent.getShowValueHelp();N=!this._oParent.getShowSuggestion();if(n){if(((this._oParent.data("controlType")==="dropDownList"))){return this._createComboBox({annotation:null,noDialog:n,noTypeAhead:true});}}return{control:new I(this.createAttributes("value",this._oParent.getJsontype(),m,{event:"change",parameter:"value"})),onCreate:"_onCreate",noDialog:n,noTypeAhead:N,params:{getValue:"getValue"}};};
c.prototype._createComboBox=function(v){var n={width:true,textAlign:true,placeholder:true,name:true};return{control:new a(this.createAttributes("value",this._oParent.getJsontype(),n,{event:"selectionChange",parameter:"selectedItem"})),onCreate:"_onCreate",params:{valuehelp:v,getValue:"getValue"}};};
c.prototype._createBoolean=function(){var A=this.createAttributes("selected",this._oParent.getJsontype(),{},{event:"select",parameter:"selected"});A.enabled=this._oParent.getEditable()&&this._oParent.getEnabled();return{control:new C(A),onCreate:"_onCreate",params:{getValue:"getSelected"}};};
c.prototype._createDate=function(){var n={width:true,textAlign:true,placeholder:true,name:true};return{control:new D(this.createAttributes("value",this._oParent.getJsontype(),n,{event:"change",parameter:"value"})),onCreate:"_onCreate",params:{getValue:"getValue"}};};
c.prototype._createDisplay=function(){var n={width:true,textAlign:true};return{control:new T(this.createAttributes("text",this._oParent.getJsontype(),n))};};
c.prototype._onCreate=function(o,p){var g;this.addValidations(o,"setSimpleClientError");if(p.getValue){g=p.getValue;p.getValue=function(){return o[g]();};}};
c.prototype.destroy=function(){this._oTypes.destroy();this._oTypes=null;this._oMetaData=null;b.prototype.destroy.apply(this,[]);};
return c;},true);
sap.ui.predefine('sap/ui/comp/smartfield/JSONTypes',["jquery.sap.global","sap/ui/model/type/Boolean","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/type/String"],function(q,B,D,F,I,S){"use strict";var J=function(){};
J.prototype.getType=function(t){if(t){switch(t){case"Boolean":return new B();case"Date":return new D();case"Float":return new F();case"Integer":return new I();default:return new S();}}return null;};
J.prototype.destroy=function(){};
return J;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataControlFactory',["jquery.sap.global","sap/m/TextArea","sap/m/Link","sap/m/CheckBox","sap/m/ComboBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/FlexItemData","sap/m/FlexJustifyContent","sap/m/HBox","sap/m/Input","sap/m/InputType","sap/m/Select","sap/m/Text","sap/ui/core/Renderer","sap/ui/core/TextAlign","sap/ui/comp/navpopover/SmartLink","./ControlFactoryBase","./FieldControl","./ODataControlSelector","./ODataHelper","./ODataTypes","sap/m/ObjectNumber","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/ui/core/ValueState","sap/m/TimePicker","sap/ui/comp/navpopover/SemanticObjectController","sap/ui/comp/util/FormatUtil","sap/ui/comp/odata/MetadataAnalyser"],function(q,T,L,C,a,D,b,F,c,H,I,d,S,e,R,f,g,h,i,O,j,k,l,m,o,V,p,r,s,M){"use strict";
var t=h.extend("sap.ui.comp.smartfield.ODataControlFactory",{constructor:function(n,P,u){h.apply(this,[n,P]);this.sName="ODataControlFactory";this._oMetaData={annotations:{}};this._oMeta=u;this._oHelper=new j(n,this._oBinding);this._oFieldControl=new i(P,this._oHelper);this._oTypes=new k(P);this._oSelector=new O(this._oMetaData,P,this._oTypes);this._bInitialized=false;this.bPending=false;}});
t.prototype._init=function(n){this._oMetaData.model=n.model;this._oMetaData.path=n.path;this._oMetaData.entitySet=n.entitySetObject||this._oHelper.oMeta.getODataEntitySet(n.entitySet);this._oMetaData.entityType=n.entityType||this._oHelper.oMeta.getODataEntityType(this._oMetaData.entitySet.entityType);this._oMetaData.navigationPath=n.navigationPath||null;if(this._oModel){this._oHelper.checkNavigationProperty(this._oMetaData,this._oParent);this._oHelper.getProperty(this._oMetaData);var u=this.getEdmProperty();if(u){if(this._oParent&&this._oParent.getExpandNavigationProperties()){var v=this._oParent.getBindingContext();var w=v.getObject().__metadata.created;if(!w){var A=this._oHelper.getAutoExpandProperties(u);if(A.length>0){this._oParent.bindElement({path:"",parameters:{expand:A,select:A}});}}}this._oMetaData.annotations.text=this._oHelper.getTextProperty2(this._oMetaData);this._oMetaData.annotations.uom=this._oHelper.getUnitOfMeasure2(this._oMetaData);this._oHelper.getValueListData(this._oMetaData);this._oMetaData.annotations.lineitem=this._oHelper.getAnalyzer().getLineItemAnnotation(this._oMetaData.entitySet.entityType);this._oHelper.getUOMValueListAnnotationPath(this._oMetaData);this._oMetaData.annotations.semantic=M.getSemanticObjectsFromProperty(u);this._oMetaData.annotations.semanticKeys=this._oHelper.getAnalyzer().getSemanticKeyAnnotation(this._oMetaData.entitySet.entityType);if(this._oMetaData.annotations.uom){this._oMetaData.annotations.uom.annotations={};this._oHelper.getValueListData(this._oMetaData.annotations.uom);}this._oHelper.getUOMTextAnnotation(this._oMetaData);}else{q.sap.log.warning("SmartField: Property "+n.path+" does not exist","SmartField: Property "+n.path+" does not exist","sap.ui.comp.smartfield.ODataControlFactory");}}else{this._oMetaData.modelObject=n.modelObject;this._oMetaData.property=n.property;this._oMetaData.annotations.text=n.annotations.text;this._oMetaData.annotations.uom=n.annotations.uom;if(this._oMetaData.annotations.uom&&!this._oMetaData.annotations.uom.annotations){this._oMetaData.annotations.uom.annotations={};}this._oMetaData.annotations.valuelist=n.annotations.valuelist;this._oMetaData.annotations.valuelistType=n.annotations.valuelistType;this._oMetaData.annotations.lineitem=n.annotations.lineitem;this._oMetaData.annotations.semantic=n.annotations.semantic;this._oMetaData.annotations.valuelistuom=n.annotations.valuelistuom;}};
t.prototype._createEdmDisplay=function(){var n,u,A,v,w,x,y,z,B=this,N={width:true,textAlign:true},E=this.getEdmProperty();if(E){z=this._oHelper.oAnnotation.getText(E);}n=this._oParent.data("configdata");var G=((n&&(n.isInnerControl!==true))||this._oParent.isContextTable());var J=this._oSelector.checkComboBox(G);if(J&&J.combobox&&(this._oParent.getFetchValueListReadOnly()||!z)){return this._createComboBox({annotation:J.annotation,noDialog:true,noTypeAhead:true},true);}if(this._checkLink()&&!this._oSelector.useObjectIdentifier()){return this._createLink();}A=this.createAttributes(null,this._oMetaData.property,N);x=this._oSelector.checkDatePicker();if(x){v=this.getFormatSettings("dateFormatSettings");A.text={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,v,{displayFormat:"Date"})};}else{A.text={model:this._oMetaData.model,path:this._oHelper.getEdmDisplayPath(this._oMetaData),type:this._oTypes.getType(this._oMetaData.property)};}if(E){w=this._oHelper.oAnnotation.isMasked(E);if(w){A.text.formatter=function(Q){if(Q){return Q.replace(new RegExp(".","igm"),"*");}return Q;};}if(z){y=this._oSelector.useObjectIdentifier(x,w);if(y){delete A.width;delete A.textAlign;A.text={path:this._oMetaData.path};A.title={path:this._oHelper.getEdmDisplayPath(this._oMetaData)};if(this._oParent.hasListeners("press")){A.titleActive=true;A.titlePress=function(Q){B._oParent.firePress(Q);};}else if(this._oMetaData.annotations.semantic&&this._oMetaData.annotations.semantic.defaultSemanticObject){var K;var P;r.getDistinctSemanticObjects().then(function(Q){K=r.hasDistinctSemanticObject(B._oMetaData.annotations.semantic.defaultSemanticObject,Q);if(K){var U=B._oParent.getBindingInfo("value");var W=U.parts[0].path;var X=B._oMetaData.property.property["sap:label"];if(B._oMetaData.annotations.lineitem&&B._oMetaData.annotations.lineitem.labels&&B._oMetaData.annotations.lineitem.labels[W]){X=B._oMetaData.annotations.lineitem.labels[W];}q.sap.require("sap.ui.comp.navpopover.NavigationPopoverHandler");P=new sap.ui.comp.navpopover.NavigationPopoverHandler({semanticObject:B._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:B._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:X,fieldName:W,navigationTargetsObtained:function(Y){var Z=sap.ui.getCore().byId(Y.getSource().getControl());var $=Y.getParameters().mainNavigation;if($){$.setDescription(Z.getText());}Y.getParameters().show(Z.getTitle(),$,undefined,undefined);}});}});A.titleActive={path:"$sapuicompsmartfield_distinctSO>/distinctSemanticObjects/"+this._oMetaData.annotations.semantic.defaultSemanticObject,formatter:function(Q){return!!Q;}};A.titlePress=function(Q){if(K&&P){P.setControl(Q.getSource(Q.getParameter("domRef")));P.openPopover();}};}}else if(!(n&&(n.isInnerControl===true))){A.text={};A.text.parts=[];A.text.parts.push(this._oMetaData.path);A.text.parts.push(this._oHelper.getEdmDisplayPath(this._oMetaData));A.text.formatter=function(Q,U){if(J&&J.combobox){return B._formatDisplayBehaviour("defaultComboBoxReadOnlyDisplayBehaviour",Q,U);}else{return B._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",Q,U);}};}}else if(this._oSelector.checkCheckBox()){A.text.formatter=function(Q){return B._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",Q);};}}if(y){u=new m(this._oParent.getId()+"-objIdentifier",A);if(this._oMetaData.annotations.semantic){u.setModel(r.getJSONModel(),"$sapuicompsmartfield_distinctSO");}}else{if(A.text.type&&(A.text.type instanceof sap.ui.comp.smartfield.type.DateTime)&&A.text.type.oConstraints&&A.text.type.oConstraints.isDateOnly){A.wrapping=false;}if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){A.textDirection="LTR";}u=new e(this._oParent.getId()+"-text",A);}if(!y&&n&&n.configdata&&n.configdata.onText){n.configdata.onText(u);}return{control:u,onCreate:"_onCreate",params:{noValidations:true}};};
t.prototype._createEdmTime=function(){var A,n,N={placeholder:true,valueState:true,valueStateText:true};A=this.createAttributes("value",this._oMetaData.property,N,{event:"change"});A.valueFormat="HH:mm:ss";n=new p(this._oParent.getId()+"-timePicker",A);return{control:n,onCreate:"_onCreate",params:{getValue:"getValue",type:{type:A.value.type,property:this._oMetaData.property}}};};
t.prototype._createObjectStatus=function(){var A,n,u;A=this.createAttributes(null,this._oMetaData.property,null);n=this._oHelper.oAnnotation.getText(this.getEdmProperty());if(n){A.text={parts:[]};A.text.parts.push(this._oHelper.getEdmDisplayPath(this._oMetaData));}else{A.text={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}this._addObjectStatusAttributes(A);u=new o(this._oParent.getId()+"-objStatus",A);return{control:u,onCreate:"_onCreate",params:{getValue:"getText",noValidation:true}};};
t.prototype._addObjectStatusAttributes=function(A){var n,P=this._oParent.getControlProposal(),u=P.getObjectStatus();if(u){n=u.getBindingInfo("criticality");}var v=function(x){var y={0:V.None,1:V.Error,2:V.Warning,3:V.Success};var z={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":V.Neutral,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":V.Warning,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":V.Error,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":V.Success};return z[x]||y[x]||V.None;};var w=function(){var x,y={"Error":"sap-icon://status-negative","Warning":"sap-icon://status-critical","Success":"sap-icon://status-positive","None":"sap-icon://status-inactive"};if(n){if(n.formatter){x=n.formatter.apply(null,arguments);}else{x=arguments[0];}}else{x=u.getCriticality();}if((x===undefined)||(x===null)){return null;}return y[v(x)];};if(n){A.state={formatter:function(){var x;if(n.formatter){x=n.formatter.apply(null,arguments);}else{x=arguments[0];}return v(x);},parts:n.parts};if(u.getCriticalityRepresentationType()!==sap.ui.comp.smartfield.CriticalityRepresentationType.WithoutIcon){A.icon={formatter:w,parts:n.parts};}}else{if(u){A.state=v(u.getCriticality());if(u.getCriticalityRepresentationType()!==sap.ui.comp.smartfield.CriticalityRepresentationType.WithoutIcon){A.icon=w();}}else{A.icon=w();}}};
t.prototype._createEdmString=function(){var n,u,v,A,w,x,N={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true,valueStateText:true};if(this._oSelector.checkCheckBox()){return this._createCheckBox();}w=this._oSelector.checkSelection();if(w.selection){return this._createSelect({annotation:w.annotation,noDialog:true,noTypeAhead:true});}w=this._oSelector.checkComboBox();if(w.combobox){return this._createComboBox({annotation:w.annotation,noDialog:true,noTypeAhead:true});}var y=this.getEdmProperty();if(y){u=this._oHelper.oAnnotation.isMultiLineText(y);if(u){delete N["width"];return this._createMultiLineText(N);}}A=this.createAttributes("value",this._oMetaData.property,N);this._addMaxLength(A,w.annotation);x=new I(this._oParent.getId()+"-input",A);if(y){n=this._oHelper.oAnnotation.isMasked(y);if(n){x.setType(d.Password);}this._handleEventingForEdmString(x,this._oMetaData.property);}v=this._oParent.data("configdata");if(v&&v.configdata&&v.configdata.onInput){v.configdata.onInput(x);}return{control:x,onCreate:"_onCreate",params:{valuehelp:{annotation:w.annotation,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"},getValue:"getValue",type:{type:A.value.type,property:this._oMetaData.property}}};};
t.prototype._addMaxLength=function(A,n){var u;u=this._getMaxLength();if(u>0){if(!n||!this._oParent.getShowSuggestion()){A.maxLength=u;}}};
t.prototype._getMaxLength=function(){var B;B=this._oParent.getBindingInfo("value");return this._oTypes.getMaxLength(this._oMetaData.property,B);};
t.prototype._addAriaLabelledBy=function(n){var u,v,w;if((this._oParent.getControlContext()===sap.ui.comp.smartfield.ControlContextType.None)||(this._oParent.getControlContext()===sap.ui.comp.smartfield.ControlContextType.Form)||(this._oParent.getControlContext()===sap.ui.comp.smartfield.ControlContextType.SmartFormGrid)){h.prototype._addAriaLabelledBy.apply(this,arguments);w=this._oParent.data("configdata");if(w&&w.configdata.isInnerControl&&w.configdata.isUOM){if(n){v=n.control;if(v instanceof H){if(v.getItems().length>0){v=v.getItems()[0];}}}if(v&&v.getAriaLabelledBy&&v.getAriaLabelledBy().length===0){var E=this.getEdmProperty();if(this._oHelper.oAnnotation.getLabel(E)){q.sap.require("sap.ui.core.InvisibleText");u=new sap.ui.core.InvisibleText({text:this._oHelper.oAnnotation.getLabel(E)});v.addAriaLabelledBy(u);this._oParent.addAggregation("_ariaLabelInvisibleText",u);}}}}};
t.prototype._handleEventingForEdmString=function(n,P){var u,v=this;if(n){u=this._oHelper.oAnnotation.isUpperCase(P.property);n.attachChange(function(E){var N={};if(E&&E.mParameters){var w=E.mParameters.value;if(u&&w){w=w.toUpperCase();n.setValue(w);}N.value=w;N.newValue=w;if(E.mParameters.validated){N.validated=E.mParameters.validated;}if(n._oSuggestionPopup&&n._oSuggestionPopup.isOpen()){if(!E.mParameters.validated){if(n._iPopupListSelectedIndex>=0){return;}}}try{v._oParent.fireChange(N);}catch(x){q.sap.log.warning(x);}}});}};
t.prototype._createComboBox=function(v,n){var u=null,w,A,N={width:true,textAlign:true,placeholder:true,tooltip:true,name:true};w=this._oParent.data("configdata");A=this.createAttributes("selectedKey",this._oMetaData.property,N);A.selectionChange=this._oHelper.getSelectionChangeHandler(this._oParent);A.change=function(E){if(E.getParameter("itemPressed")){return;}var x=E.getSource().getSelectedKey();this._oParent.fireChange({value:x,newValue:x});}.bind(this);if(A.width===""){A.width="100%";}if(n){u=this._createDisplayedComboBox(A);}else{u=new a(this._oParent.getId()+"-comboBoxEdit",A);}if(w&&w.configdata&&w.configdata.onText){w.configdata.onText(u);}return{control:u,onCreate:"_onCreate",params:{valuehelp:{annotation:v.annotation,aggregation:"items",noDialog:v.noDialog,noTypeAhead:v.noTypeAhead},getValue:"getSelectedKey",type:{type:A.selectedKey.type,property:this._oMetaData.property}}};};
t.prototype._createDisplayedComboBox=function(A){var n=a.extend("sap.ui.comp.smartfield.DisplayComboBox",{metadata:{library:"sap.ui.comp"},renderer:function(u,v){var w=v.getWidth(),x=v.getValue(),y=v.getTextDirection(),z=v.getTextAlign();x.replace(/\r\n/g,"\n");u.write("<span");u.writeControlData(v);u.addClass("sapMText");u.addClass("sapUiSelectable");if(w){u.addStyle("width",w);}else{u.addClass("sapMTextMaxWidth");}if(y!==sap.ui.core.TextDirection.Inherit){u.writeAttribute("dir",y.toLowerCase());}if(z){z=R.getTextAlign(z,y);if(z){u.addStyle("text-align",z);}}u.writeClasses();u.writeStyles();u.write(">");u.writeEscaped(x);u.write("</span>");},updateDomValue:function(v){if(!this.isActive()){return this;}v=this._getInputValue(v);if(this.$().text()!==v){this.$().text(v);this._bCheckDomValue=true;}return this;},getValue:function(){return this.getProperty("value");},getFocusDomRef:function(){return this.getDomRef();},getEditable:function(){return false;}});return new n(this._oParent.getId()+"-comboBoxDisp",A);};
t.prototype._createSelect=function(v){var n={width:true,name:true},A=this.createAttributes("selectedKey",this._oMetaData.property,n);A.change=this._oHelper.getSelectionChangeHandler(this._oParent);A.forceSelection=false;if(A.width===""){A.width="100%";}return{control:new S(this._oParent.getId()+"-select",A),onCreate:"_onCreate",params:{valuehelp:{annotation:v.annotation,aggregation:"items",noDialog:v.noDialog,noTypeAhead:v.noTypeAhead},getValue:"getSelectedKey",type:{type:A.selectedKey.type,property:this._oMetaData.property}}};};
t.prototype._createCheckBox=function(){var A=this.createAttributes("selected",null,{},{event:"select",parameter:"selected"});A.editable=(this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable());A.selected.type=this._oTypes.getAbapBoolean();return{control:new C(this._oParent.getId()+"-cBox",A),onCreate:"_onCreate",params:{getValue:"getSelected"}};};
t.prototype._createEdmDateTime=function(){var n={width:true,textAlign:true,placeholder:true,name:true},A=this.createAttributes(null,this._oMetaData.property,n,{event:"change",parameter:"value"}),u=this.getFormatSettings("dateFormatSettings");if(this._oSelector.checkDatePicker()){A.value={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,u,{displayFormat:"Date"}),model:this._oMetaData.model};if(u&&u.style){A.displayFormat=u.style;}return{control:new D(this._oParent.getId()+"-datePicker",A),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:A.value.type,property:this._oMetaData.property}}};}A.value={path:this._oMetaData.path,model:this._oMetaData.model,type:this._oTypes.getType(this._oMetaData.property,u)};return{control:new b(this._oParent.getId()+"-input",A),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:A.value.type,property:this._oMetaData.property}}};};
t.prototype._createEdmDateTimeOffset=function(){var n=this.getFormatSettings("dateFormatSettings");if(n){n.UTC=false;}var N={width:true,textAlign:true,placeholder:true,name:true};var A=this.createAttributes(null,this._oMetaData.property,N,{event:"change",parameter:"value"});A.value={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,n)};return{control:new b(this._oParent.getId()+"-input",A),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:A.value.type,property:this._oMetaData.property}}};};
t.prototype._createEdmNumeric=function(){var n={width:true,textAlign:true,placeholder:true,name:true},A=this.createAttributes("value",this._oMetaData.property,n,{event:"change",parameter:"value"});if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){A.textDirection="LTR";}return{control:new I(this._oParent.getId()+"-input",A),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:A.value.type,property:this._oMetaData.property}}};};
t.prototype._createEdmUOM=function(){var P,n,u,A=this._createEdmUOMAttributes(),v=this._oParent.getObjectBinding(this._oMetaData.model),w,B,x,y=this;this.addObjectBinding(A,v);var z=false;if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){z=true;}if(z){A.textDirection="LTR";}n=new I(this._oParent.getId()+"-input",A);if(this._oParent.data("suppressUnit")==="true"){w={getValue:"getValue"};if(!this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)){w.type={type:A.value.type,property:this._oMetaData.property};}return{control:n,onCreate:"_onCreate",params:w};}if(!this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)){x={type:A.value.type,property:this._oMetaData.property};}P=this._oHelper.getUOMPath(this._oMetaData);A={value:{model:this._oMetaData.model,path:P},change:this._oHelper.getUOMChangeHandler(this._oParent,true),textAlign:this._getEdmUOMTextAlignment()};this.addObjectBinding(A,v);this.mapBindings(A,{"uomEditable":"editable","uomEnabled":"enabled","uomVisible":"visible","mandatory":"mandatory","contextEditable":"contextEditable"});if(this._oParent.getConfiguration()){A.configuration=new sap.ui.comp.smartfield.Configuration({preventInitialDataFetchInValueHelpDialog:this._getPreventInitialDataFetchInVHDialog()});}u=new sap.ui.comp.smartfield.SmartField(this._oParent.getId()+"-sfEdit",A);u.data("configdata",{"configdata":{isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:P,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,valuelistType:this._oMetaData.annotations.uom.annotations.valuelistType,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(E){n.setLayoutData(new F({growFactor:1}));u.setLayoutData(new F({shrinkFactor:0}));if(E){if(z&&E.setTextDirection){E.setTextDirection("LTR");}if((y._oParent.getControlContext()!=="table")&&(y._oParent.getControlContext()!=="responsiveTable")){E.addStyleClass("sapUiCompSmartFieldUnit");}}},onInput:function(E){n.setLayoutData(new F({growFactor:1}));u.setLayoutData(new F({growFactor:0}));if(E){if(z&&E.setTextDirection){E.setTextDirection("LTR");}if(y._oParent&&(y._oParent.getControlContext()!=="table")&&(y._oParent.getControlContext()!=="responsiveTable")){E.addStyleClass("sapUiCompSmartFieldUnit");}}}}});u.data("errorCheck","setComplexClientErrorSecondOperandNested");n.addAriaLabelledBy(u);n.addStyleClass("smartFieldPaddingRight");n.addStyleClass("sapUiCompSmartFieldValue");B=new H({justifyContent:c.End,items:[n,u],fitContainer:true,width:this._oParent.getWidth()});B.addStyleClass("sapUiCompUOM");if(this._oParent.isContextTable()){if(z){B.addStyleClass("sapUiCompDirectionLTR");}B.addStyleClass("sapUiCompUOMInTable");}return{control:B,onCreate:"_onCreateUOM",params:{getValue:true,valuehelp:true,type:x}};};
t.prototype._createEdmUOMAttributes=function(){var A={textAlign:this._getEdmUOMTextAlignment(),placeholder:this.getAttribute("placeholder"),name:this.getAttribute("name"),change:this._oHelper.getUOMChangeHandler(this._oParent)};if(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)){A.value={parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)}],model:this._oMetaData.model,type:this._oTypes.getCurrencyType(this._oMetaData.property)};}else{A.value={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}return A;};
t.prototype._getEdmUOMTextAlignment=function(){var A=this.getAttribute("textAlign");if(!A){A=f.Initial;}if(A===f.Initial){if(this._oParent.isContextTable()){return f.End;}else{return f.Begin;}}return A;};
t.prototype._createEdmUOMDisplay=function(){var v,P=this._oHelper.getUOMPath(this._oMetaData),n,A,u=this._getEdmUOMTextAlignment(),B,w=null,E=this.getEdmProperty(),x=this,y=false;if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){y=true;}A={text:{parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:P}],model:this._oMetaData.model,formatter:this._oTypes.getDisplayFormatter(E,this._oHelper.oAnnotation.isCurrency(E)),useRawValues:true},textAlign:u};if(y){A.textDirection="LTR";}n=this._oParent.getObjectBinding(this._oMetaData.model);this.addObjectBinding(A,n);v=new e(this._oParent.getId()+"-text",A);P=this._oHelper.getUOMPath(this._oMetaData);A={value:{model:this._oMetaData.model,path:P},change:this._oHelper.getUOMChangeHandler(this._oParent,true),textAlign:this._getEdmUOMTextAlignment()};this.addObjectBinding(A,n);this.mapBindings(A,{"uomEditable":"editable","uomEnabled":"enabled","uomVisible":"visible","mandatory":"mandatory","contextEditable":"contextEditable"});v.addStyleClass("smartFieldPaddingRight");v.addStyleClass("sapUiCompSmartFieldValue");if(!this._checkSuppressUnit()){w=new sap.ui.comp.smartfield.SmartField(this._oParent.getId()+"-sfDisp",A);w.data("configdata",{"configdata":{isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:P,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(z){if(z){if(z.setWrapping){z.setWrapping(false);}if(y&&z.setTextDirection){z.setTextDirection("LTR");}if(x._oParent&&(x._oParent.getControlContext()!=="table")&&(x._oParent.getControlContext()!=="responsiveTable")){z.addStyleClass("sapUiCompSmartFieldUnit");}}},onInput:function(z){v.setLayoutData(new F({growFactor:0}));w.setLayoutData(new F({growFactor:0}));if(z){if(y&&z.setTextDirection){z.setTextDirection("LTR");}if((x._oParent.getControlContext()!=="table")&&(x._oParent.getControlContext()!=="responsiveTable")){z.addStyleClass("sapUiCompSmartFieldUnit");}}},getContextEditable:function(){return x._oParent.getContextEditable();}}});w.data("errorCheck","setComplexClientErrorSecondOperandNested");B=new H({items:[v,w],fitContainer:true,width:this._oParent.getWidth()});if(this._oParent.isContextTable()){B.setJustifyContent("End");this._oParent.addStyleClass("sapUiCompUOMInTable");if(y){B.addStyleClass("sapUiCompDirectionLTR");}B.addStyleClass("sapUiCompUOMInTable");}return{control:B};}return{control:v};};
t.prototype._checkSuppressUnit=function(){if(this._oParent.data("suppressUnit")==="true"){return true;}var n=this._oParent.getBindingInfo("uomVisible");return(!n&&!this._oParent.getUomVisible());};
t.prototype._createEdmUOMObjectStatus=function(){var n,u,E=this.getEdmProperty(),v=this._oTypes.getDisplayFormatter(E,this._oHelper.oAnnotation.isCurrency(E)),P=this._oHelper.getUOMPath(this._oMetaData),A={text:{parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:P}],formatter:function(){var w=v.apply(this,arguments);return w+arguments[1];},useRawValues:true}};this._addObjectStatusAttributes(A);n=this._oParent.getObjectBinding(this._oMetaData.model);this.addObjectBinding(A,n);u=new o(this._oParent.getId()+"-objStatus",A);u.addStyleClass("sapUiCompUOM");return{control:u};};
t.prototype._createEdmUOMObjectNumber=function(){var A,n,u,v=this._getEdmUOMTextAlignment();if(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)){A={number:{parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)}],type:this._oTypes.getCurrencyType(this._oMetaData.property)},unit:{path:this._oHelper.getUOMPath(this._oMetaData)},model:this._oMetaData.model,textAlign:v};}else{A={model:this._oMetaData.model,number:{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},unit:{path:this._oHelper.getUOMPath(this._oMetaData)},textAlign:v};}n=this._oParent.getObjectBinding(this._oMetaData.model);this.addObjectBinding(A,n);u=new l(this._oParent.getId()+"-objNumber",A);u.addStyleClass("sapUiCompUOM");return{control:u};};
t.prototype._createEdmSemantic=function(){var A,n,u,v=this,w=this._oParent.getBindingInfo("value"),P=w.parts[0].path,E=this.getEdmProperty(),x=E["sap:label"];if(this._oMetaData.annotations.lineitem&&this._oMetaData.annotations.lineitem.labels&&this._oMetaData.annotations.lineitem.labels[P]){x=this._oMetaData.annotations.lineitem.labels[P];}A={semanticObject:this._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:this._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:x,fieldName:P,width:this.getAttribute("width"),createControlCallback:function(){var y=this.createControl(true);if(y){return y.control;}return null;}.bind(this)};n=this._oHelper.oAnnotation.getText(E);if(n){A.text={parts:[this._oMetaData.path,this._oHelper.getEdmDisplayPath(this._oMetaData)],model:this._oMetaData.model,formatter:function(y,z){if(y&&z){return v._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",y,z);}return y?y:"";}};A.navigationTargetsObtained=function(y){var B=this.getBinding("text");if(!q.isArray(B.getValue())){y.getParameters().show();return;}var z=B.getValue();var G=v._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour")||"idOnly";var J=s.getTextsFromDisplayBehaviour(G,z[0],z[1]);var K=y.getParameters().mainNavigation;if(K){K.setDescription(J.secondText);}y.getParameters().show(J.firstText,K,undefined,undefined);};}else{u=this._oHelper.getUOMPath(this._oMetaData);if(u){A.text={parts:[{path:P},{path:u}],model:this._oMetaData.model,formatter:this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)?s.getAmountCurrencyFormatter():s.getMeasureUnitFormatter(),useRawValues:true};A.uom={path:u};}else{A.text={path:P,model:this._oMetaData.model};}}return{control:new g(this._oParent.getId()+"-sl",A),onCreate:"_onCreate",params:{getValue:"getInnerControlValue"}};};
t.prototype._createMultiLineText=function(n){var A=this.createAttributes("value",this._oMetaData.property,n);var u=this.getFormatSettings("multiLineSettings");A=q.extend(true,A,u);if(this._oParent.isContextTable()){A.width="100%";}var v=new T(this._oParent.getId()+"-textArea",A);this._handleEventingForEdmString(v,this._oMetaData.property);return{control:v,onCreate:"_onCreate",params:{type:{type:A.value.type,property:this._oMetaData.property},getValue:"getValue"}};};
t.prototype.getEdmProperty=function(){var n=this._oHelper;if(n){return n.getEdmProperty(this._oMetaData);}return null;};
t.prototype._checkLink=function(){var n=this._oParent.getBindingInfo("url"),P=this.getEdmProperty();if(n||this._oParent.getUrl()||t.isSpecialLink(P)){return true;}return this._oParent.hasListeners("press");};
t.prototype._createLink=function(){var n=this;var A={text:"",href:""},P=this._oParent,B=P.getBindingInfo("url");if(B){A.href=this._oBinding.toBinding(B);}else{A.href=P.getUrl();}if(P.hasListeners("press")){A.press=function(E){E.preventDefault();P.firePress(E);};}B=P.getBindingInfo("value");if(B){var u=this._oMetaData,v=u.path,w=u.property.property;if(u.annotations.text&&(w.type==="Edm.String")){A.text={parts:[u.path,this._oHelper.getEdmDisplayPath(u)],formatter:this._formatText.bind(n)};}else if(t.isSpecialLink(w)){var x=t[t._getLinkFormatterFunctionName(w)];A.text={path:v};A.href={path:v,formatter:null};if(typeof x==="function"){A.href.formatter=x;}}else{A.text=this._oBinding.toBinding(B);}}else{A.text=P.getValue();}return{control:new L(P.getId()+"-link",A),onCreate:"_onCreate",params:{noValidation:true}};};
t.isSpecialLink=function(P){return M.isEmailAddress(P)||M.isPhoneNumber(P)||M.isURL(P);};
t._getLinkFormatterFunctionName=function(P){return"_format"+M.getLinkDisplayFormat(P);};
t._formatEmailAddress=function(E){return"mailto:"+E;};
t._formatPhoneNumber=function(P){return"tel:"+P;};
t._formatURL=function(u){return q.sap.validateUrl(u)?u:"";};
t.prototype._formatText=function(n,u){if(n&&u){return this._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",n,u);}return n||"";};
t.prototype._createEdmBoolean=function(){var A,n,u,v=this,w=null,E=false;E=this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable();n=this._oSelector.checkComboBox();if(n.combobox){return this._createComboBox({annotation:n.annotation,noDialog:true,noTypeAhead:true},!E);}if(E){A=this.createAttributes("selected",this._oMetaData.property,{},{event:"select",parameter:"selected"});u=new C(this._oParent.getId()+"-cBoxBool",A);w={getValue:"getSelected"};}else{A=this.createAttributes("text",this._oMetaData.property,{width:true,textAlign:true});A.text={model:this._oMetaData.model,path:this._oMetaData.path};A.text.formatter=function(x){return v._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",x);};u=new e(this._oParent.getId()+"-text",A);}return{control:u,onCreate:"_onCreate",params:w};};
t.prototype._getCreator=function(B){return this._oSelector.getCreator(B);};
t.prototype._onCreate=function(n,P){var G,u,v=true,w=this;if(P){if(P.noValidation){v=false;}if(P.valuehelp){this._getValueHelpDialogTitle(P.valuehelp);P.valuehelp["analyser"]=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp(n,this.getEdmProperty(),P.valuehelp,this._oModel||this._oMetaData.modelObject,function(E){w._oParent.fireValueListChanged({"changes":E.mParameters.changes});});}if(P.getValue){G=P.getValue;P.getValue=function(){return n[G]();};}if(P.type){u=this._oFieldControl.getMandatoryCheck(P.type.property);if(u){P.type.type.oFieldControl=u;}}}if(v){this.addValidations(n,this._oParent.data("errorCheck")||"setSimpleClientError");if(this._oParent._getMode()!=="display"){n.attachValidationSuccess(function(E){if(!w._oParent.getValue()){if(w._oMetaData.property&&w._oMetaData.property.property&&w._oHelper.oAnnotation.isStaticMandatory(w._oMetaData.property.property)){if(n.setValueStateText){n.setValueStateText(w._oRb.getText("VALUEHELPVALDLG_FIELDMESSAGE"));n.setValueState(sap.ui.core.ValueState.Error);w._oParent.setSimpleClientError(true);}}}});}}if(!this._checkUOM()){n.addStyleClass("sapUiCompSmartFieldValue");}};
t.prototype._createValueHelp=function(){var n=this._oParent.getAggregation("_content");if(!n){return;}var v={annotation:this._oMetaData.annotations.valuelist,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"};this._getValueHelpDialogTitle(v);v["analyser"]=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp(n,this.getEdmProperty(),v,this._oModel||this._oMetaData.modelObject,function(E){this._oParent.fireValueListChanged({"changes":E.mParameters.changes});}.bind(this));};
t.prototype._checkUOM=function(){var n=this._oParent.data("configdata");if(n&&n.configdata){if(n.configdata.onInput||n.configdata.onText){return true;}}return false;};
t.prototype._getValueHelpDialogTitle=function(v){v.dialogtitle=this._oParent.getTextLabel();if(!v.dialogtitle){var E=this.getEdmProperty();v.dialogtitle=this._oHelper.oAnnotation.getLabel(E)||E.name;}};
t.prototype._onCreateUOM=function(n,P){var u=n.getItems(),v,w=this;this.addValidations(u[0],"setComplexClientErrorFirstOperand");if(this._oParent._getMode()!=="display"){u[0].attachValidationSuccess(function(E){if(!w._oParent.getValue()){if(w._oMetaData.property&&w._oMetaData.property.property&&w._oHelper.oAnnotation.isStaticMandatory(w._oMetaData.property.property)){if(u[0].setValueStateText){u[0].setValueStateText(w._oRb.getText("VALUEHELPVALDLG_FIELDMESSAGE"));u[0].setValueState(sap.ui.core.ValueState.Error);w._oParent.setComplexClientErrorFirstOperand(true);}}}});}if(P&&P.getValue){P.getValue=function(){return u[0].getValue();};}P.uom=function(){return u[1].getValue();};P.uomset=function(x){u[1].setValue(x);};if(P.type){v=this._oFieldControl.getMandatoryCheck(P.type.property);if(v){P.type.type.oFieldControl=v;}}};
t.prototype.bind=function(){var n=this,N,u,v=function(w,P){try{n._init(w);n._setUOMEditState();n._bind(P);}catch(x){q.sap.log.warning(x,null,"sap.ui.comp.smartfield.ODataControlFactory.bind.fInit");}};if(!this._bInitialized&&!this.bPending){this._bInitialized=true;N=this._oFieldControl.getBindableAttributes();u=this._oParent.data("configdata");if(u&&u.configdata){v(this._oMeta,N);}else if(this._oModel){this.bPending=true;this._oModel.getMetaModel().loaded().then(function(){n.bPending=false;v(n._oMeta,N);});}}};
t.prototype._bind=function(B){var u,v=this._oFieldControl.getControlProperties(this._oMetaData,B);for(var n in v){u=this._oBinding.fromFormatter(this._oMetaData.model,v[n]);this._oParent.bindProperty(n,u);}this._oParent.fireInitialise();};
t.prototype.rebindOnCreated=function(){var B,u=this._oFieldControl.getControlProperties(this._oMetaData,["editable"]);for(var n in u){B=this._oBinding.fromFormatter(this._oMetaData.model,u[n]);this._oParent.bindProperty(n,B);}};
t.prototype._setUOMEditState=function(){if(this._oFieldControl.hasUomEditState(this._oMetaData)){var n=this._oFieldControl.getUOMEditState(this._oMetaData);if(n){var B=this._oBinding.fromFormatter(this._oMetaData.model,n);this._oParent.bindProperty("uomEditState",B);}}};
t.prototype.getDataProperty=function(){return this._oMetaData.property;};
t.prototype.getMetaData=function(){return this._oMetaData;};
t.prototype.destroy=function(){if(this._oFieldControl){this._oFieldControl.destroy();}if(this._oSelector){this._oSelector.destroy();}if(this._oTypes){this._oTypes.destroy();}if(this._oHelper){this._oHelper.destroy();}this._oHelper=null;this._oFieldControl=null;this._oTypes=null;this._oSelector=null;this._oMetaData=null;h.prototype.destroy.apply(this,arguments);};
return t;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataControlSelector',["jquery.sap.global"],function(q){"use strict";var O=function(m,p,t){this._oMetaData=m;this._oParent=p;this._oTypes=t;};
O.prototype.checkComboBox=function(c){var r={};if(this._oMetaData.annotations.valuelist){r.valuelistType=this._oMetaData.annotations.valuelistType;r.annotation=this._oMetaData.annotations.valuelist;}if(!r.annotation){return r;}if((r.valuelistType==="fixed-values")&&!c){r.combobox=true;}if(!r.combobox){r.annotation=this._oMetaData.annotations.valuelist;r.combobox=this._checkConfig("dropDownList");}return r;};
O.prototype.checkSelection=function(){var r={};if(this._oMetaData.annotations.valuelist){r.annotation=this._oMetaData.annotations.valuelist;r.selection=this._checkConfig("selection");}return r;};
O.prototype.checkCheckBox=function(){var b,m;if(this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property.type==="Edm.String"){b=this._oParent.getBindingInfo("value");m=this._oTypes.getMaxLength(this._oMetaData.property,b);if(m===1){if(this._checkConfig("checkBox")){return true;}}}return false;};
O.prototype.checkDatePicker=function(){if(this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property["sap:display-format"]==="Date"){return true;}return this._checkConfig("datePicker");};
O.prototype._checkConfig=function(t){var c=this._oParent.getConfiguration();if(c){return c.getControlType()===t;}return false;};
O.prototype.getCreator=function(b){var c=true,C;var m={"Edm.Decimal":"_createEdmNumeric","Edm.Double":"_createEdmNumeric","Edm.Float":"_createEdmNumeric","Edm.Single":"_createEdmNumeric","Edm.Int16":"_createEdmNumeric","Edm.Int32":"_createEdmNumeric","Edm.Int64":"_createEdmNumeric","Edm.Byte":"_createEdmNumeric","Edm.DateTimeOffset":"_createEdmDateTimeOffset","Edm.DateTime":"_createEdmDateTime","Edm.Boolean":"_createEdmBoolean","Edm.String":"_createEdmString","Edm.Time":"_createEdmTime"};if(this._isUOMDisplayObjectStatus()){return"_createEdmUOMObjectStatus";}if(this._isUOMDisplay()){return"_createEdmUOMObjectNumber";}C=this._oParent.data("configdata");if(C&&C.configdata&&C.configdata.isUOM){if(C.configdata.getContextEditable){c=C.configdata.getContextEditable();}}if(!this._oParent.getEditable()||!this._oParent.getEnabled()||!this._oParent.getContextEditable()||!c){if(this._oMetaData.annotations){if(this.useObjectIdentifier(this.checkDatePicker())&&this._oMetaData.annotations.text&&this._oMetaData.annotations.semanticKeys&&this._oMetaData.annotations.semanticKeys.semanticKeyFields&&this._oMetaData.annotations.semanticKeys.semanticKeyFields.indexOf(this._oMetaData.path)>-1){return"_createEdmDisplay";}if(this._oMetaData.annotations.semantic&&!b){return"_createEdmSemantic";}if(this._oMetaData.annotations.uom){return"_createEdmUOMDisplay";}if(this._isObjectStatusProposed()){return"_createObjectStatus";}return(this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property.type==="Edm.Boolean")?"_createEdmBoolean":"_createEdmDisplay";}}if(this._oMetaData.annotations&&this._oMetaData.annotations.uom){return"_createEdmUOM";}if(this._oMetaData.property&&this._oMetaData.property.property){return m[this._oMetaData.property.property.type]||"_createEdmString";}return null;};
O.prototype._isUOMDisplay=function(){if(this._oMetaData.annotations.uom){if(this._isObjectNumberProposed()){if(!this._oParent.getContextEditable()||(!this._oParent.getEditable()&&!this._oParent.getUomEditable())||(!this._oParent.getEnabled()&&!this._oParent.getUomEnabled())){return true;}if(this._oParent.getUomEditState()===0){return true;}}}return false;};
O.prototype._isUOMDisplayObjectStatus=function(){if(this._oMetaData.annotations.uom){if(this._isObjectStatusProposed()){if(!this._oParent.getContextEditable()||(!this._oParent.getEditable()&&!this._oParent.getUomEditable())||(!this._oParent.getEnabled()&&!this._oParent.getUomEnabled())){return true;}if(this._oParent.getUomEditState()===0){return true;}}}return false;};
O.prototype._isObjectStatusProposed=function(){var p=this._oParent.getControlProposal(),s;if(p){s=p.getObjectStatus();if(s){return true;}}return false;};
O.prototype._isObjectNumberProposed=function(){var p;if(this._oParent.data("suppressUnit")!=="true"){p=this._oParent.getControlProposal();if(p&&p.getControlType()==="ObjectNumber"){return true;}if(this._oParent.getProposedControl()==="ObjectNumber"){return true;}}return false;};
O.prototype.useObjectIdentifier=function(d,m){var p;if(this._oMetaData&&this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property.type==="Edm.String"){if(!d&&!m){p=this._oParent.getControlProposal();if(p&&p.getControlType()==="ObjectIdentifier"){return true;}if(this._oParent.getProposedControl()==="ObjectIdentifier"){return true;}}}return false;};
O.prototype.destroy=function(){this._oParent=null;this._oMetaData=null;this._oTypes=null;};
return O;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataHelper',["jquery.sap.global","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/smartfield/AnnotationHelper"],function(q,M,A){"use strict";var O=function(m,u,o){if(m){this.oMeta=m.getMetaModel();}if(o){this.oMeta=o;}this._oModel=m;this._oUtil=u;this.oAnnotation=new A();};
O.prototype.getAnalyzer=function(m){if(!this._oAnalyzer){this._oAnalyzer=new M(this._oModel||m);}return this._oAnalyzer;};
O.prototype.checkNavigationProperty=function(m,c){var p,P,l,r;if(c&&m){p=this._oUtil.getNavigationProperties(c);l=p.paths.length;while(l--){P=p.paths.shift();P=this._oUtil.correctPath(P);if(P===""||P===m.entitySet.name){continue;}r=this.getNavigationProperty(m.entityType,P);if(r.entitySet){m.entitySet=r.entitySet;m.entityType=r.entityType;}}}};
O.prototype.getNavigationProperty=function(e,p){var n,t,r={};n=this._getNamedProperty(p,"navigationProperty",e);if(n){t=this.oMeta.getODataAssociationSetEnd(e,n.name);r.entitySet=this.oMeta.getODataEntitySet(t.entitySet);r.entityType=this.oMeta.getODataEntityType(r.entitySet.entityType);}return r;};
O.prototype.startWithNavigationProperty=function(p,m){var P=p.split("/"),o;if(P&&P.length>1){o=this._getNamedProperty(P.shift(),"navigationProperty",m.entityType);}if(o){return o.name;}return null;};
O.prototype.getProperty=function(m){var n=[],l,p,P,s,a,r={entityType:m.entityType,entitySet:m.entitySet};if(m){p=m.path.split("/");l=p.length;if(l>1){while(r.entityType){s=p[0];r=this.getNavigationProperty(r.entityType,s);if(r.entityType){m.entityType=r.entityType;m.entitySet=r.entitySet;n.push(p.shift());l--;}}}m.navigationPath=n.join("/");if(l>1){P=this.oMeta.getODataProperty(m.entityType,p[0]);if(P){m.property=this._getComplex(P,p,l);}return;}if(m.navigationPath){a=m.path.replace(m.navigationPath+"/","");}else{a=m.path;}P=this.oMeta.getODataProperty(m.entityType,a);m.property={property:P,typePath:m.path};}};
O.prototype._getComplex=function(p,P,l){var o=p,t,c=[];while(l--){if(o){if(l===0){t=o.name;o=this._getNamedProperty(P[0],"property",o);return{typePath:t+"/"+P[0],property:o,complex:true,parents:c};}o=this.oMeta.getODataComplexType(o.type);if(o){c.push(o);}}P.shift();}};
O.prototype._getNamedProperty=function(n,a,p){var r;if(p[a]){for(var i=0;i<p[a].length;i++){if(p[a][i].name===n){r=p[a][i];break;}}}return r;};
O.prototype.getTextProperty2=function(m){var a,o;a=this.oAnnotation.getText(m.property.property);if(a){o=this._preprocAnnotation(a,m);this.getProperty(o);this._postprocAnnotation(o,m);}return o;};
O.prototype.getUnitOfMeasure2=function(m){var a,o;a=this.oAnnotation.getUnit(m.property.property);if(a){o=this._preprocAnnotation(a,m);this.getProperty(o);this._postprocAnnotation(o,m);}return o;};
O.prototype._preprocAnnotation=function(a,m){var p,o;o=this.traverseNavigationProperties(a,m.entityType);if(!o.navigationPath){o.entitySet=m.entitySet;}if(m.navigationPath){o.path=m.path.replace(m.navigationPath+"/","");}else{o.path=m.path;}if(o.navigationPath){p=a.replace(o.navigationPath+"/","");}else{p=a;}o.path=o.path.replace(m.property.property.name,p);if(o.navigationPath){o.navigationPathHelp=o.navigationPath;}return o;};
O.prototype._postprocAnnotation=function(m,o){var p;if(m.navigationPathHelp){m.navigationPath=m.navigationPathHelp;}if(m.navigationPath){p=m.navigationPath;}else{p="";}if(o.navigationPath){if(p){p=o.navigationPath+"/"+p;}else{p=o.navigationPath;}}m.navigationPath=p;if(m.navigationPath){m.path=m.navigationPath+"/"+m.path;}};
O.prototype.traverseNavigationProperties=function(p,e){var r={},R={},P,s,l;P=p.split("/");l=P.length;r.entityType=e;R.entityType=e;while(l--){s=P.shift();if(s===""){continue;}R=this.getNavigationProperty(r.entityType,s);if(!R.entitySet){break;}r.entityType=R.entityType;r.entitySet=R.entitySet;if(r.navigationPath){r.navigationPath=r.navigationPath+"/"+s;}else{r.navigationPath=s;}}return r;};
O.prototype.getValueListAnnotationPath=function(m){var p,l;if(m.property.complex){l=m.property.parents.length-1;p=m.property.parents[l].namespace;p=p+"."+m.property.typePath;}else{p=m.entitySet.entityType+"/"+m.property.property.name;}return p;};
O.prototype.getUOMValueListAnnotationPath=function(m){var p;if(m.annotations.uom){p=this.getValueListAnnotationPath(m.annotations.uom);}if(p){m.annotations.valuelistuom=p;}};
O.prototype.getUOMTextAnnotation=function(m){if(m&&m.annotations&&m.annotations.uom){m.annotations.textuom=this.getTextProperty2(m.annotations.uom);}};
O.prototype.geValueListEntitySet=function(m){if(m&&m.annotations&&m.annotations.valuelist){if(m.annotations.valuelist.primaryValueListAnnotation&&m.annotations.valuelist.primaryValueListAnnotation.valueListEntitySetName){m.annotations.valuelistentityset=this.oMeta.getODataEntitySet(m.annotations.valuelist.primaryValueListAnnotation.valueListEntitySetName);}}};
O.prototype.getEdmProperty=function(m){var o=m.property;return(o&&o.property)||null;};
O.prototype.getValueListData=function(m){var o=this.getEdmProperty(m),a=m.annotations;if(M.isValueList(o)){a.valuelist=this.getValueListAnnotationPath(m);var v=M.getValueListMode(o);if(v){a.valuelistType=v;}else{a.valuelistType=this.getAnalyzer().getValueListSemantics(o["com.sap.vocabularies.Common.v1.ValueList"]);}}};
O.prototype.getEdmDisplayPath=function(m){if(m.annotations.text){return m.annotations.text.path;}return m.path;};
O.prototype.getUOMPath=function(m){if(m&&m.annotations&&m.annotations.uom){return m.annotations.uom.path;}return null;};
O.prototype.getUOMTypePath=function(m){if(m.property.complex){return m.property.typePath.replace(m.property.property.name,m.annotations.uom.property.name);}return m.annotations.uom.property.name;};
O.prototype.getUOMChangeHandler=function(c,u){return function(p){try{c.fireChange({value:p.mParameters.value,newValue:p.mParameters.value,unitChanged:u,validated:p.mParameters["validated"]});}catch(e){q.sap.log.warning(e);}};};
O.prototype.getSelectionChangeHandler=function(c){return function(p){var k="";try{var i=p.getParameter("selectedItem");if(i){k=i.getKey();}c.fireChange({value:k,newValue:k,selectionChange:true});}catch(e){q.sap.log.warning(e);}};};
O.prototype.destroy=function(){if(this._oAnalyzer){this._oAnalyzer.destroy();}if(this.oAnnotation){this.oAnnotation.destroy();}this._oUtil=null;this.oMeta=null;this.oAnalyzer=null;this.oAnnotation=null;};
O.prototype.getAutoExpandProperties=function(m){var n=[],a=[];for(var s in m){switch(s){case"sap:unit":case"sap:field-control":case"sap:text":a=m[s].split("/");break;case"com.sap.vocabularies.Common.v1.Text":case"Org.OData.Measures.V1.Unit":case"Org.OData.Measures.V1.ISOCurrency":case"com.sap.vocabularies.Common.v1.FieldControl":if(m[s].Path){a=m[s].Path.split("/");}break;}if(a.length>1&&n.indexOf(a[0])<0){n.push(a[0]);}}return n.join(",");};
return O;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataTypes',["jquery.sap.global","sap/ui/core/format/NumberFormat","sap/ui/model/odata/type/Boolean","sap/ui/comp/smartfield/type/DateTime","sap/ui/comp/smartfield/type/DateTimeOffset","sap/ui/comp/smartfield/type/Decimal","sap/ui/comp/smartfield/type/Int16","sap/ui/comp/smartfield/type/Int32","sap/ui/comp/smartfield/type/Int64","sap/ui/comp/smartfield/type/SByte","sap/ui/comp/smartfield/type/String","sap/ui/comp/smartfield/type/AbapBool","sap/ui/model/type/Currency","sap/ui/comp/smartfield/type/Time","sap/ui/model/odata/type/Guid","sap/ui/comp/odata/MetadataAnalyser"],function(q,N,B,D,a,b,I,c,d,S,e,A,C,T,G,M){"use strict";var O=function(p){this._oParent=p;};
O.prototype.getType=function(p,f,m){var o,i;i=this._oParent.getBindingInfo("value");if(i&&i.type){return i.type;}if(p&&p.property&&p.property.type){switch(p.property.type){case"Edm.Boolean":return new B();case"Edm.Decimal":case"Edm.Double":case"Edm.Float":case"Edm.Single":o=this._getDecimalConstraints(p);return new b(f,o);case"Edm.Int16":return new I();case"Edm.Int32":return new c();case"Edm.Int64":return new d();case"Edm.Byte":case"Edm.SByte":return new S();case"Edm.DateTimeOffset":return new a(f,o);case"Edm.DateTime":o=this._getDateTimeConstraints(p,m);return new D(f,o);case"Edm.String":o=this._getStringConstraints(p);return new e(f,o);case"Edm.Time":return new T(f,m);case"Edm.Guid":return new G(f,m);default:return null;}}return null;};
O.prototype._getDateTimeConstraints=function(p,m){var o={},n;if(p.property["sap:display-format"]==="Date"){o={displayFormat:"Date"};}for(n in m){o[n]=m[n];}return o;};
O.prototype.getMaxLength=function(p,o){var P,v=[],l,V,f,r=0;if(o&&o.constraints){if(o.constraints.maxLength&&o.constraints.maxLength>-1){v.push(o.constraints.maxLength);}}if(o&&o.type&&o.type.oConstraints){if(o.type.oConstraints.maxLength&&o.type.oConstraints.maxLength>-1){v.push(o.type.oConstraints.maxLength);}}if(p&&p.property&&p.property.maxLength){P=parseInt(p.property.maxLength,10);if(P>-1){v.push(P);}}f=this._oParent.getMaxLength();if(f>0){v.push(f);}l=v.length;while(l--){V=v[l];if(V>0){if(r>0){if(V<r){r=V;}}else{r=V;}}}return r;};
O.prototype._getDecimalConstraints=function(p){var m=null;if(p.property.precision){m={};m.precision=parseInt(p.property.precision,10);}if(p.property.scale){if(!m){m={};}m.scale=parseInt(p.property.scale,10);}return m;};
O.prototype._getStringConstraints=function(p){var o=this._oParent.getBindingInfo("value"),m=this.getMaxLength(p,o),E,f={nullable:M.isNullable(p.property)};if(o&&o.type&&o.type.oConstraints){if(o.type.oConstraints.equals){E=o.type.oConstraints.equals;}}if(m>0||E){if(m>0){f.maxLength=m;}if(E){f.equals=E;}}if(M.isDigitSequence(p.property)){f.isDigitSequence=true;}return f;};
O.prototype.getDisplayFormatter=function(p,f){if(f){return this.getCurrencyDisplayFormatter(true);}else{return this.getUOMDisplayFormatter(p);}};
O.prototype.getCurrencyDisplayFormatter=function(f){var F=N.getCurrencyInstance({showMeasure:false});return function(o,s){var v,i,p;if(!o||!s||s==="*"){return"";}if(!f){v=o+="\u2008";return v;}i=F.oLocaleData.getCurrencyDigits(s);v=F.format(o,s);if(i===0){v+="\u2008";}p=3-i;if(p){v=q.sap.padRight(v,"\u2007",v.length+p);}return v;};};
O.prototype.getUOMDisplayFormatter=function(p){var f={};if(p.scale){f.decimals=parseInt(p.scale,10);}if(p.precision){f.precision=parseInt(p.precision,10);}var F=N.getFloatInstance(f);return function(m,u){var v;if(!m||!u||u==="*"){return"";}if(isNaN(parseFloat(m))){return m.toString()+"\u2008";}v=F.format(m,u);v+="\u2008";return v;};};
O.prototype.getCurrencyType=function(p){var o,f={showMeasure:false,parseAsString:true,emptyString:0};if(p){o=this._getDecimalConstraints(p);if(o){if(o.precision){f.maxIntegerDigits=o.precision;if(o.scale){f.maxIntegerDigits-=o.scale;}}if(o.precision&&o.scale){o.maximum=Math.pow(10,f.maxIntegerDigits)-(1/Math.pow(10,o.scale));o.minimum=-1*o.maximum;}}return new C(f,o);}return null;};
O.prototype.getAbapBoolean=function(){return new A();};
O.prototype.destroy=function(){this._oParent=null;};
return O;},true);
sap.ui.predefine('sap/ui/comp/smartfield/SideEffectUtil',["jquery.sap.global","sap/ui/comp/odata/SideEffects"],function(q,S){"use strict";var a=function(p){this._oParent=p;this._oSideEffects=new S();};
a.prototype.getFieldGroupIDs=function(m,v){var M,c,t,s;if(m.property&&m.property.complex){c=m.property.parents[0];t=this._toTypePath(m.path,c);}M={entitySet:m.entitySet,entityType:m.entityType,complexType:c};s=this._oSideEffects.getSideEffects(m.path,t,M);return this._calcFieldGroups(s,m,v);};
a.prototype._calcFieldGroups=function(s,m,v){var c,b,i,l,g=[];b=this._getSideEffects(s,m,v);l=b.length;c=this._oParent.getBindingContext().getPath();for(i=0;i<l;i++){this._calcFieldGroups2(b[i],g,v,c);}return g.length>0?g:null;};
a.prototype._calcFieldGroups2=function(s,g,v,c){var u,i,I,t=this;s.sideEffects.forEach(function(o){I={name:o.name,originType:o.originType,originName:s.origin.name,originNamespace:s.origin.namespace,context:c};i=JSON.stringify(I);i=i.substring(1,i.length-2);u=v.data(i);if(!u){u=t.createUUID();v.data(u,I);v.data(i,u);}g.push(u);});};
a.prototype._getSideEffects=function(s,m){var r=[];var R={};R.sideEffects=this._getSideEffectsFromEntity("entitySet",s);if(R.sideEffects&&R.sideEffects.length){R.origin=m.entitySet;r.push(R);}R={};R.sideEffects=this._getSideEffectsFromEntity("entityType",s);if(R.sideEffects&&R.sideEffects.length){R.origin=m.entityType;r.push(R);}R={};R.sideEffects=this._getSideEffectsFromEntity("complexType",s);if(R.sideEffects&&R.sideEffects.length){R.origin=m.property.parents[0];r.push(R);}return r;};
a.prototype._getSideEffectsFromEntity=function(N,s){var n,b=[];if(s[N]){for(n in s[N]){b.push({name:n,originType:N,sideEffect:s[N][n]});}}return b;};
a.prototype._toTypePath=function(p,c){var P=p.split("/");return p.replace(P[0],c.name);};
a.prototype.createUUID=function(){var d=new Date().getTime();var u="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==="x"?r:(r&0x7|0x8)).toString(16);});return u;};
a.prototype.destroy=function(){if(this._oSideEffects){this._oSideEffects.destroy();}this._oSideEffects=null;};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartfield/flexibility/SmartField.flexibility',["sap/ui/fl/changeHandler/ChangeHandlerMediator"],function(C){"use strict";var c=function(m,p){return m.createControl("sap.ui.comp.smartfield.SmartField",p.appComponent,p.view,p.fieldSelector,{value:"{"+p.bindingPath+"}"});};var f=function(m,p){var s=c.apply(null,arguments);var n=m.getId(s);var S=m.createControl("sap.ui.comp.smartfield.SmartLabel",p.appComponent,p.view,n+"-label",{labelFor:n});return{"label":S,"control":s};};C.addChangeHandlerSettings({"scenario":"addODataFieldWithLabel","oDataServiceVersion":"2.0"},{"createFunction":f});C.addChangeHandlerSettings({"scenario":"addODataFieldWithLabel","oDataServiceVersion":"1.0"},{"createFunction":f});C.addChangeHandlerSettings({"scenario":"addODataField","oDataServiceVersion":"2.0"},{"createFunction":c});C.addChangeHandlerSettings({"scenario":"addODataField","oDataServiceVersion":"1.0"},{"createFunction":c});return{};},true);
sap.ui.predefine('sap/ui/comp/smartfield/type/AbapBool',["jquery.sap.global","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/SimpleType"],function(q,F,P,S){"use strict";
var A=S.extend("sap.ui.comp.smartfield.type.AbapBool",{constructor:function(){S.apply(this,arguments);this.sName="sap.ui.comp.smartfield.type.AbapBool";}});
A.prototype.formatValue=function(v,t){if(v===undefined||v===null){return null;}switch(t){case"boolean":case"any":return v==="X";default:throw new F("Don't know how to format Boolean to "+t);}};
A.prototype.parseValue=function(v,s){switch(s){case"boolean":return(v===true)?"X":"";default:throw new P("Don't know how to parse Boolean from "+s);}};
A.prototype.validateValue=function(v){if(v!==null&&v!==undefined){if(v!=="X"&&v!==""){throw new P("Invalid Boolean "+v);}}};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartfield/type/DateTime',["sap/ui/model/odata/type/DateTime"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.DateTime",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=D.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.DateTime";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/DateTimeOffset',["sap/ui/model/odata/type/DateTimeOffset"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.DateTimeOffset",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=D.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.DateTimeOffset";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Decimal',["sap/ui/model/odata/type/Decimal"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.Decimal",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=D.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Decimal";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Int16',["sap/ui/model/odata/type/Int16"],function(I){"use strict";
var a=I.extend("sap.ui.comp.smartfield.type.Int16",{constructor:function(f,c){I.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=I.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Int16";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Int32',["sap/ui/model/odata/type/Int32"],function(I){"use strict";
var a=I.extend("sap.ui.comp.smartfield.type.Int32",{constructor:function(f,c){I.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=I.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Int32";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Int64',["sap/ui/model/odata/type/Int64"],function(I){"use strict";
var a=I.extend("sap.ui.comp.smartfield.type.Int64",{constructor:function(f,c){I.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=I.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Int64";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/SByte',["sap/ui/model/odata/type/SByte"],function(S){"use strict";
var a=S.extend("sap.ui.comp.smartfield.type.SByte",{constructor:function(f,c){S.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=S.prototype.parseValue.apply(this,[v,s]);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.SByte";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/String',["sap/ui/model/odata/type/String"],function(S){"use strict";
var a=S.extend("sap.ui.comp.smartfield.type.String",{constructor:function(f,c){S.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=S.prototype.parseValue.apply(this,arguments);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.String";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Time',["sap/ui/model/odata/type/Time"],function(T){"use strict";
var a=T.extend("sap.ui.comp.smartfield.type.Time",{constructor:function(f,c){T.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=T.prototype.parseValue.apply(this,arguments);this.oFieldControl(v,s);return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Time";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/GroupConfiguration',['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Element'],function(q,l,E){"use strict";
var G=E.extend("sap.ui.comp.smartfilterbar.GroupConfiguration",{metadata:{library:"sap.ui.comp",properties:{key:{type:"string",group:"Misc",defaultValue:null},index:{type:"any",group:"Misc",defaultValue:undefined},label:{type:"any",group:"Misc",defaultValue:undefined}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
G.prototype.setLabel=function(L){this.setProperty("label",L);this.fireChange({propertyName:"label"});};
return G;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/AddField',["jquery.sap.global","sap/ui/fl/Utils","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/JsControlTreeModifier"],function(q,U,B,J){"use strict";var A={};
A.applyChange=function(c,g,p){var C=c.getDefinition();var f=function(C){var M=C.texts&&C.texts.fieldLabel&&C.texts.fieldLabel.value;var b=C.content;var d=false;if(b){d=C.content.field&&(C.content.field.selector||C.content.field.id)&&C.content.field.jsType&&C.content.field.value&&C.content.field.valueProperty;}return M&&b&&d;};var m=p.modifier;var v=p.view;if(f(C)){var o=C.content;var F=o.field.selector;var s=o.field.id;var l=C.texts.fieldLabel.value;var j=o.field.jsType;var P=o.field.valueProperty;var a=o.field.value;var e=o.field.entitySet;var i=o.field.index;var G=m.createControl("sap.ui.comp.smartform.GroupElement",p.appComponent,v,F||s);m.setProperty(G,"label",undefined);m.setProperty(G,"label",l);m.insertAggregation(g,"groupElements",G,i,v);this.addElementIntoGroupElement(m,v,G,l,j,P,a,e,i,p.appComponent);return true;}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};
A.addElementIntoGroupElement=function(m,v,g,l,j,p,P,e,i,a){var V=m.createControl(j,a,v);m.bindProperty(V,p,P);m.insertAggregation(g,"elements",V,i,v,true);if(e){m.setProperty(V,"entitySet",e);}};
A.completeChangeContent=function(c,s,p){var a=p.appComponent;var C=c.getDefinition();if(s.fieldLabel){B.setTextInChange(C,"fieldLabel",s.fieldLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.fieldLabel attribute required");}if(!C.content){C.content={};}if(!C.content.field){C.content.field={};}if(s.fieldValue){C.content.field.value=s.fieldValue;}else{throw new Error("oSpecificChangeInfo.fieldValue attribute required");}if(s.valueProperty){C.content.field.valueProperty=s.valueProperty;}else{throw new Error("oSpecificChangeInfo.valueProperty attribute required");}if(s.newControlId){C.content.field.selector=J.getSelector(s.newControlId,a,{index:s.index});}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsType){C.content.field.jsType=s.jsType;}else{throw new Error("oSpecificChangeInfo.jsType attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.field.index=s.index;}if(s.entitySet){C.content.field.entitySet=s.entitySet;}};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/AddFields',["jquery.sap.global","sap/ui/fl/Utils","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/JsControlTreeModifier"],function(q,U,B,J){"use strict";var A={};
A.applyChange=function(c,g,p){var C=c.getDefinition();var f=function(C){var b=C.content;var M=false;if(b){M=C.content.field&&(C.content.field.selector||C.content.field.id)&&C.content.field.jsTypes&&C.content.field.value&&C.content.field.valueProperty;}return b&&M;};var m=p.modifier;var v=p.view;if(f(C)){var F=C.content.field.selector;var s=C.content.field.id;var a=C.content.field.index;var G=m.createControl("sap.ui.comp.smartform.GroupElement",p.appComponent,v,F||s);for(var i=0;i<C.content.field.jsTypes.length;i++){var j=C.content.field.jsTypes[i];var P=C.content.field.valueProperty[i];var o=C.content.field.value[i];var e=C.content.field.entitySet;this.addElementIntoGroupElement(m,v,G,j,P,o,e,i,p.appComponent);}m.insertAggregation(g,"groupElements",G,a);return true;}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};
A.addElementIntoGroupElement=function(m,v,g,j,p,P,e,i,a){var V=m.createControl(j,a,v);m.bindProperty(V,p,P);m.setProperty(V,"expandNavigationProperties",true);m.insertAggregation(g,"elements",V,i,v,true);if(e){m.setProperty(V,"entitySet",e);}};
A.completeChangeContent=function(c,s,p){var a=p.appComponent;var C=c.getDefinition();if(!C.content){C.content={};}if(!C.content.field){C.content.field={};}if(s.fieldValues){C.content.field.value=s.fieldValues;}else if(s.bindingPath){C.content.field.value=[s.bindingPath];}else{throw new Error("oSpecificChangeInfo.fieldValue or bindingPath attribute required");}if(s.valueProperty){C.content.field.valueProperty=s.valueProperty;}else if(s.bindingPath){C.content.field.valueProperty=["value"];}else{throw new Error("oSpecificChangeInfo.valueProperty or bindingPath attribute required");}if(s.newControlId){C.content.field.selector=J.getSelector(s.newControlId,a);}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsTypes){C.content.field.jsTypes=s.jsTypes;}else if(s.bindingPath){C.content.field.jsTypes=["sap.ui.comp.smartfield.SmartField"];}else{throw new Error("oSpecificChangeInfo.jsTypes or bindingPath attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.field.index=s.index;}if(s.entitySet){C.content.field.entitySet=s.entitySet;}};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/AddGroup',["sap/ui/fl/Utils","jquery.sap.global","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/JsControlTreeModifier"],function(U,q,B,J){"use strict";var A={};
A.applyChange=function(c,f,p){var m=p.modifier;var a=p.appComponent;var v=p.view;var C=c.getDefinition();if(C.texts&&C.texts.groupLabel&&C.texts.groupLabel.value&&C.content&&C.content.group&&(C.content.group.selector||C.content.group.id)){var l=C.texts.groupLabel.value;var i=C.content.group.index;var g=m.createControl("sap.ui.comp.smartform.Group",a,v,C.content.group.selector||C.content.group.id);m.setProperty(g,"label",l);m.insertAggregation(f,"groups",g,i,v);}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};
A.completeChangeContent=function(c,s,p){var C=c.getDefinition();var a=p.appComponent;if(s.newLabel){B.setTextInChange(C,"groupLabel",s.newLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.groupLabel attribute required");}if(!C.content){C.content={};}if(!C.content.group){C.content.group={};}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.group.index=s.index;}if(s.newControlId){C.content.group.selector=J.getSelector(s.newControlId,a);}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/CombineFields',["jquery.sap.global","sap/ui/fl/Utils","sap/ui/fl/changeHandler/Base"],function(q,F,B){"use strict";var C={};
C._evaluteElementForIndex=function(m,g){var M=-1;var s=[];var b=g.some(function(G){s=m.getAggregation(G,"elements");return s.some(function(S){M++;return m.getProperty(S,"mandatory");});});if(b){return M;}return-1;};
C.applyChange=function(c,o,p){var a=c.getDefinition();var M=p.modifier;var A=p.appComponent;var v=p.view;var s=M.bySelector(a.content.sourceSelector,A,v);var l=[];var L;var P;var t;var b;var S=[];var g=a.content.combineFieldSelectors.map(function(e){return M.bySelector(e,A,v);});var d=this._evaluteElementForIndex(M,g);if(d>0){M.setProperty(s,"elementForLabel",d);}var I=sap.ui.getCore().getConfiguration().getRTL();for(var i=0;i<g.length;i++){L="fieldLabel"+i.toString();t=a.texts[L];if(t&&t.value!==P&&t.value.length>0){I?l.unshift(t.value):l.push(t.value);P=t.value;}S=M.getAggregation(g[i],"elements");if(g[i]!==s){for(var k=0,m=S.length;k<m;k++){M.removeAggregation(g[i],"elements",S[k]);M.insertAggregation(s,"elements",S[k],i+k,v);}b=M.getParent(g[i]);M.removeAggregation(b,"groupElements",g[i]);M.insertAggregation(b,"dependents",g[i],0,v);}}if(l.length>0){M.setProperty(s,"label",l.join("/"));}return true;};
C.completeChangeContent=function(c,s,p){var m=p.modifier;var a=p.appComponent;var o=c.getDefinition();var b=s.combineFieldIds;if(b&&b.length>=2){o.content.combineFieldSelectors=b.map(function(d){return m.getSelector(d,a);});c.addDependentControl(b,"combinedFields",p);}else{throw new Error("oSpecificChangeInfo.combineFieldIds attribute required");}if(s.sourceControlId){o.content.sourceSelector=m.getSelector(s.sourceControlId,a);c.addDependentControl(s.sourceControlId,"sourceControl",p);}else{throw new Error("oSpecificChangeInfo.sourceControlId attribute required");}var t;var f;var g;for(var i=0;i<b.length;i++){g=m.byId(b[i]);t=g.getLabelText();if(t){f="fieldLabel"+i;B.setTextInChange(o,f,t,"XFLD");}}};
return C;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/MoveFields',["jquery.sap.global","sap/ui/fl/changeHandler/Base","sap/ui/fl/Utils","sap/ui/fl/changeHandler/JsControlTreeModifier"],function(q,B,F,J){"use strict";var M={};
M._checkCompleteChangeContentConditions=function(s){if(!s.movedElements){throw new Error("oSpecificChangeInfo.movedElements attribute required");}if(s.movedElements.length===0){throw new Error("MovedElements array is empty");}s.movedElements.forEach(function(m){if(!m.id){throw new Error("MovedElements element has no id attribute");}if(typeof(m.targetIndex)!=="number"){throw new Error("Index attribute at MovedElements element is no number");}});};
M._buildStableChangeInfo=function(m){var s=m.source.id;var t=m.target.id;var c={changeType:m.changeType,selector:{id:s},targetId:t!==s?t:null};c[m.changeType]=[];m.movedElements.forEach(function(a){c[m.changeType].push({id:a.id,index:a.targetIndex});});return c;};
M.applyChange=function(c,g,p){function a(c,m){if(!c){throw new Error("No change instance");}var C=c.getContent();if(!m.getAggregation(g,"groupElements")){F.log.error("Object has no group elements aggregation",m.getId(g));}if(!C||!C.moveFields||C.moveFields.length===0){throw new Error("Change format invalid");}}function b(o,m,A,v){if(!o.selector&&!o.id){throw new Error("Change format invalid - moveFields element has no id attribute");}if(typeof(o.index)!=="number"){throw new Error("Change format invalid - moveFields element index attribute is no number");}return m.bySelector(o.selector||o.id,A,v);}var m=p.modifier;var v=p.view;var A=p.appComponent;a(c,m);var C=c.getContent();var t=g;if(C.targetSelector||C.targetId){t=m.bySelector(C.targetSelector||C.targetId,A,v);}C.moveFields.forEach(function(o){var f=b(o,m,A,v);if(!f){F.log.warning("Field to move not found");return;}m.removeAggregation(g,"groupElements",f,v);m.insertAggregation(t,"groupElements",f,o.index);});return true;};
M.completeChangeContent=function(c,s,p){this._checkCompleteChangeContentConditions(s);s=this._buildStableChangeInfo(s);var C=c.getDefinition();var a=p.appComponent;if(!C.content){C.content={};}if(!C.content.moveFields){C.content.moveFields=[];}s.moveFields.forEach(function(f){var o=J.bySelector(f.id,a);var S=J.getSelector(o,a);C.content.moveFields.push({selector:S,index:f.index});});if(s.targetId){var t=J.bySelector(s.targetId,a);C.content.targetSelector=J.getSelector(t,a);}};
return M;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/MoveGroups',["jquery.sap.global","sap/ui/fl/changeHandler/Base","sap/ui/fl/Utils","sap/ui/fl/changeHandler/JsControlTreeModifier"],function(q,B,F,J){"use strict";var M={};
M._checkCompleteChangeContentConditions=function(s){if(!s.movedElements){throw new Error("oSpecificChangeInfo.movedElements attribute required");}if(s.movedElements.length===0){throw new Error("MovedElements array is empty");}s.movedElements.forEach(function(m){if(!m.id){throw new Error("MovedElements element has no id attribute");}if(typeof(m.targetIndex)!=="number"){throw new Error("Index attribute at MovedElements element is no number");}});};
M._buildStableChangeInfo=function(m){var s=m.source.id;var t=m.target.id;var c={changeType:m.changeType,selector:{id:s},targetId:t!==s?t:null};c[m.changeType]=[];m.movedElements.forEach(function(a){c[m.changeType].push({id:a.id,index:a.targetIndex});});return c;};
M.applyChange=function(c,s,p){function a(c,m){if(!c){throw new Error("No change instance");}var C=c.getContent();if(!m.getAggregation(s,"groups")){F.log.error("Object has no smartform elements aggregation",m.getId(s));}if(!C||!C.moveGroups||C.moveGroups.length===0){throw new Error("Change format invalid");}}function g(o,m,A,v){if(!o.selector&&!o.id){throw new Error("Change format invalid - moveGroups element has no id attribute");}if(typeof(o.index)!=="number"){throw new Error("Change format invalid - moveGroups element index attribute is no number");}return m.bySelector(o.selector||o.id,A,v);}var m=p.modifier;var v=p.view;var A=p.appComponent;a(c,m);var C=c.getContent();C.moveGroups.forEach(function(o){var G=g(o,m,A,v);if(!G){F.log.warning("Group to move not found");return;}m.removeAggregation(s,"groups",G,v);m.insertAggregation(s,"groups",G,o.index);});return true;};
M.completeChangeContent=function(c,s,p){this._checkCompleteChangeContentConditions(s);s=this._buildStableChangeInfo(s);var C=c.getDefinition();if(!C.content){C.content={};}if(!C.content.moveGroups){C.content.moveGroups=[];}var m=s.moveGroups.map(function(g){var G=sap.ui.getCore().byId(g.id);var S=J.getSelector(G,p.appComponent);C.content.moveGroups.push({selector:S,index:g.index});return G;});c.addDependentControl(m,"movedGroups",p);};
return M;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RemoveField',['jquery.sap.global','sap/ui/fl/changeHandler/Base'],function(q,B){"use strict";var R={};
R.applyChange=function(c,f,p){var m=p.modifier;var v=p.view;var g=m.getParent(f);if(g){m.removeAggregation(g,"groupElements",f,v);}return true;};
R.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RenameField',['jquery.sap.global','sap/ui/fl/changeHandler/BaseRename',"sap/ui/fl/Utils"],function(q,B,U){"use strict";var P="label";var C="fieldLabel";var T="XFLD";var R=B.createRenameChangeHandler({changePropertyName:C,translationTextType:T});
R.applyChange=function(c,o,p){var m=p.modifier;var a=c.getDefinition();var t=a.texts[C];var v=t.value;if(a.texts&&t&&typeof(v)==="string"){var l=m.getProperty(o,"label");if(U.isBinding(v)){if(l&&(typeof l!=="string")){m.setPropertyBinding(l,"text",v);}else{m.setPropertyBinding(o,P,v);}}else{if(l&&(typeof l!=="string")){m.setProperty(l,"text",v);}else{m.setProperty(o,P,v);}}return true;}else{U.log.error("Change does not contain sufficient information to be applied: ["+a.layer+"]"+a.namespace+"/"+a.fileName+"."+a.fileType);}};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RenameGroup',['jquery.sap.global','sap/ui/fl/changeHandler/BaseRename'],function(q,B){"use strict";var R=B.createRenameChangeHandler({propertyName:"label",changePropertyName:"groupLabel",translationTextType:"XFLD"});return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RenameTitle',['jquery.sap.global','sap/ui/fl/changeHandler/BaseRename'],function(q,B){"use strict";var R=B.createRenameChangeHandler({propertyName:"title",changePropertyName:"fieldLabel",translationTextType:"XFLD"});return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/SplitField',["jquery.sap.global","sap/ui/fl/Utils","sap/ui/fl/changeHandler/Base"],function(q,F,B){"use strict";var S={};
S.applyChange=function(c,C,p){var o=c.getDefinition();var m=p.modifier;var a=p.appComponent;var v=p.view;var s=m.bySelector(o.content.sourceSelector,a,v);var l;var N;var b;var L;var P=m.bySelector(o.content.parentSelector,a,v);var d=o.content.newElementIds.slice();var f=m.getAggregation(s,"elements");var e=m.getProperty(s,"elementForLabel");var g=m.getAggregation(P,"groupElements");var h=g.indexOf(s);L=m.getProperty(s,"label");if(L&&(typeof L!=="string")){l=m.getProperty(L,"text");}else{l=L;}for(var i=0,n=f.length;i<n;i++){if(i!==e){N=d.pop();b=m.createControl("sap.ui.comp.smartform.GroupElement",p.appComponent,v,N);m.removeAggregation(s,"elements",f[i]);m.insertAggregation(b,"elements",f[i],0,v);m.insertAggregation(P,"groupElements",b,h+i,v);if(m.getControlType(f[i])!=="sap.ui.comp.smartfield.SmartField"){L=m.getProperty(b,"label");if(L&&(typeof L!=="string")){m.setProperty(L,"text",l);}else{m.setProperty(b,"label",l);}}}else{if(e!==0){m.setProperty(s,"elementForLabel",0);}m.removeAggregation(s,"elements",f[i]);m.insertAggregation(s,"elements",f[i],0,v);if(m.getControlType(f[i])!=="sap.ui.comp.smartfield.SmartField"){L=m.getProperty(s,"label");if(L&&(typeof L!=="string")){m.setProperty(L,"text",l);}else{m.setProperty(s,"label",l);}}}}return true;};
S.completeChangeContent=function(c,s,p){var m=p.modifier;var a=p.appComponent;var C=c.getDefinition();if(s.newElementIds){C.content.newElementIds=s.newElementIds;}else{throw new Error("oSpecificChangeInfo.newElementIds attribute required");}if(s.sourceControlId){C.content.sourceSelector=m.getSelector(s.sourceControlId,a);c.addDependentControl(s.sourceControlId,"sourceControl",p);}else{throw new Error("oSpecificChangeInfo.sourceControlId attribute required");}if(s.parentId){C.content.parentSelector=m.getSelector(s.parentId,a);c.addDependentControl(s.parentId,"parent",p);}else{throw new Error("oSpecificChangeInfo.parentId attribute required");}};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/UnhideControl',[],function(){"use strict";var U={};
U.applyChange=function(c,g,p){var m=p.modifier;var f=m.getAggregation(g,"elements");var P=f.some(function(F){return m.getVisible(F);});if(!P){f.forEach(function(F){m.setVisible(F,true);});}var l=m.getAggregation(g,"label");if(l&&(typeof l!=="string")){m.setVisible(l,true);}m.setVisible(g,true);return true;};
U.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};
return U;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartAreaMicroChartRenderer',['jquery.sap.global'],function(q){"use strict";var S={};
S.render=function(r,c){if(c._bIsInitialized){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(c.getAggregation("_chart"));r.write("</div>");}};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartBulletMicroChartRenderer',['jquery.sap.global'],function(q){"use strict";var S={};
S.render=function(r,c){if(c._bIsInitialized){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(c.getAggregation("_chart"));r.write("</div>");}};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChartRenderer',['jquery.sap.global'],function(q){"use strict";var S={};
S.render=function(r,c){if(c._bIsinitialized){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(c.getAggregation("_chart"));r.write("</div>");}};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartRadialMicroChartRenderer',['jquery.sap.global'],function(q){"use strict";var S={};
S.render=function(r,c){if(c._bIsInitialized){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(c.getAggregation("_chart"));r.write("</div>");}};
return S;},true);
sap.ui.predefine('sap/ui/comp/transport/TransportDialog',["sap/ui/fl/transport/TransportDialog"],function(F){"use strict";
var T=F.extend("sap.ui.comp.transport.TransportDialog");
return T;},true);
jQuery.sap.registerPreloadedModules({
"name":"sap/ui/comp/library-preload",
"version":"2.0",
"modules":{
	"sap/ui/comp/manifest.json":'{\n  "_version": "1.2.0",\n  "sap.app": {\n    "_version": "1.2.0",\n    "id": "sap.ui.comp",\n    "type": "library",\n    "embeds": [],\n    "applicationVersion": {\n      "version": "1.50.6"\n    },\n    "title": "SAPUI5 library with smart controls.",\n    "description": "SAPUI5 library with smart controls.",\n    "ach": "CA-UI5-CMP",\n    "resources": "resources.json",\n    "offline": true\n  },\n  "sap.ui": {\n    "_version": "1.1.0",\n    "technology": "UI5",\n    "supportedThemes": [\n      "base",\n      "sap_belize",\n      "sap_belize_hcb",\n      "sap_belize_hcw",\n      "sap_belize_plus",\n      "sap_bluecrystal",\n      "sap_hcb"\n    ]\n  },\n  "sap.ui5": {\n    "_version": "1.1.0",\n    "dependencies": {\n      "minUI5Version": "1.50",\n      "libs": {\n        "sap.ui.core": {\n          "minVersion": "1.50.6"\n        },\n        "sap.m": {\n          "minVersion": "1.50.6"\n        },\n        "sap.ui.fl": {\n          "minVersion": "1.50.6",\n          "lazy": true\n        },\n        "sap.ui.table": {\n          "minVersion": "1.50.6",\n          "lazy": true\n        },\n        "sap.ui.rta": {\n          "minVersion": "1.50.6",\n          "lazy": true\n        },\n        "sap.suite.ui.microchart": {\n          "minVersion": "1.50.6",\n          "lazy": true\n        }\n      }\n    }\n  }\n}',
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
	"sap/ui/comp/navpopover/FlexConnector.js":function(){sap.ui.getCore().loadLibrary('sap.ui.fl');sap.ui.define(['sap/ui/comp/library','sap/ui/comp/navpopover/flexibility/changes/AddLink','sap/ui/comp/navpopover/flexibility/changes/RemoveLink','sap/ui/fl/Utils','sap/ui/fl/FlexControllerFactory','sap/ui/fl/ChangePersistenceFactory'],function(C,A,R,F,a,b){"use strict";var c={getAppComponentForControl:function(o){return F.getAppComponentForControl(o);},isVendorLayer:function(){return F.isVendorLayer();},createAndSaveChangesForControl:function(m,M,o){if(!m.length&&!M.length){return Promise.resolve();}this.createChangesForControl(M,o,sap.ui.comp.navpopover.ChangeHandlerType.removeLink);this.createChangesForControl(m,o,sap.ui.comp.navpopover.ChangeHandlerType.addLink);return this.saveChangesForControl(o);},createChangesForControl:function(m,o,s){if(!m.length){return;}if(!s){throw new Error("sChangeType should be filled");}var f=a.createForControl(o);m.forEach(function(M){f.createAndApplyChange({changeType:s,content:M,isUserDependent:true},o);});},saveChangesForControl:function(o){return a.createForControl(o).saveAll();},readChangesForControl:function(s,o){var d=this.getAppComponentForControl(o);var e=F.getFlexReference(d.getManifestObject());var m=b.getChangePersistenceForComponent(e).getChangesMapForComponent();return m.mChanges[s]?m.mChanges[s]:[];},discardChangesForControl:function(o,d){return a.createForControl(o).discardChangesForId(o.getId(),d).then(function(){if(d){A.discardChangesOfLayer("USER",o);R.discardChangesOfLayer("USER",o);}});},activateApplyChangeStatistics:function(){var t=this;this.aStatistics=[];var w=function(o,n){if(t.aStatistics.findIndex(function(s){return s.stableId===n.getId()&&s.changeId===o.getId();})<0){var h=n.getAvailableActions().find(function(i){return i.getKey()===o.getContent().key;});t.aStatistics.push({stableId:n.getId(),changeId:o.getId(),layer:o.getLayer(),key:o.getContent().key,text:h?h.getText():'',changeType:o.getChangeType()});}};var d=function(l){t.aStatistics=t.aStatistics.filter(function(s){return s.layer!==l;});};var f=A.applyChange.bind(A);A.applyChange=function(o,n,p){w(o,n);f(o,n,p);};var r=R.applyChange.bind(R);R.applyChange=function(o,n,p){w(o,n);r(o,n,p);};var e=A.discardChangesOfLayer.bind(A);A.discardChangesOfLayer=function(l,n){d(l);e(l,n);};var g=R.discardChangesOfLayer.bind(R);R.discardChangesOfLayer=function(l,n){d(l);g(l,n);};},_formatStatistic:function(s){var l=s.layer;switch(s.layer){case"VENDOR":l=""+l;break;case"CUSTOMER":l="        "+l;break;case"USER":l="                "+l;break;default:l=""+l;}var v;switch(s.changeType){case sap.ui.comp.navpopover.ChangeHandlerType.addLink:v="On";break;case sap.ui.comp.navpopover.ChangeHandlerType.removeLink:v="Off";break;default:v="";}return{formattedLayer:l,formattedValue:v};},printStatisticAll:function(){if(!this.aStatistics){jQuery.sap.log.info("Please activate with sap.ui.comp.navpopover.FlexConnector.activateApplyChangeStatistics()");return;}var t=this;jQuery.sap.log.info("idx - VENDOR ------------ CUSTOMER ----------- USER --------------------------------------");this.aStatistics.forEach(function(s,i){var f=t._formatStatistic(s);jQuery.sap.log.info(i+" "+s.stableId+" "+f.formattedLayer+" '"+s.text+"' "+f.formattedValue);});}};return c;},true);
},
	"sap/ui/comp/smartform/SmartForm.js":function(){sap.ui.getCore().loadLibrary('sap.ui.fl');sap.ui.define(['jquery.sap.global','sap/ui/comp/library','sap/m/MessageBox','sap/ui/core/Control','sap/ui/layout/form/Form','sap/ui/layout/form/ResponsiveLayout','sap/ui/layout/form/ResponsiveGridLayout','sap/ui/fl/Utils','sap/ui/fl/registry/Settings','sap/m/Title','sap/m/Button','sap/m/ButtonType','sap/m/Panel','sap/m/OverflowToolbar','sap/m/ToolbarSpacer','sap/m/ToolbarSeparator'],function(q,l,M,C,F,R,a,U,S,T,B,b,P,O,c,d){"use strict";
var e=C.extend("sap.ui.comp.smartform.SmartForm",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{title:{type:"string",group:"Misc",defaultValue:null},useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},checkButton:{type:"boolean",group:"Misc",defaultValue:false},entityType:{type:"string",group:"Misc",defaultValue:null},expandable:{type:"boolean",group:"Misc",defaultValue:false},expanded:{type:"boolean",group:"Misc",defaultValue:null},editTogglable:{type:"boolean",group:"Misc",defaultValue:false},editable:{type:"boolean",group:"Misc",defaultValue:false},ignoredFields:{type:"string",group:"Misc",defaultValue:null},flexEnabled:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"groups",aggregations:{groups:{type:"sap.ui.comp.smartform.Group",multiple:true,singularName:"group"},content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},layout:{type:"sap.ui.comp.smartform.Layout",multiple:false},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false},customToolbar:{type:"sap.m.Toolbar",multiple:false},toolbar:{type:"sap.m.Toolbar",multiple:false,visibility:"hidden"}},events:{editToggled:{parameters:{editable:{type:"boolean"}}},checked:{parameters:{erroneousFields:{type:"sap.ui.comp.smartfield.SmartField[]"}}}}},
renderer:function(i,j){i.write("<div");i.writeControlData(j);i.addClass("sapUiCompSmartForm");i.writeClasses();i.write(">");var k=j.getAggregation("content");i.renderControl(k);i.write("</div>");}
});
e.prototype.init=function(){var i=A.call(this);this._oForm=new F(this.getId()+"--Form",{layout:i});this._oForm.getToolbar=function(){var j=this.getParent();if(j&&!j.getExpandable()){return j._getToolbar();}};this.setAggregation("content",this._oForm);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");};
e.prototype.onBeforeRendering=function(){this._addChangeModeToToolbar();D.call(this);};
e.prototype.addGroup=function(i){if(!i){return this;}i=this.validateAggregation("groups",i,true);f.call(this,i);this._delegateEditMode(i);this._oForm.addFormContainer(i);i.attachEvent("_visibleChanged",G,this);i.setHorizontalLayoutGroupElementMinWidth(this.getHorizontalLayoutGroupElementMinWidth());i.setUseHorizontalLayout(this.getUseHorizontalLayout());if(this.getUseHorizontalLayout()){i._updateGridDataSpan();i._updateLineBreaks();}else{G.call(this);}return this;};
e.prototype.getGroups=function(){return this._oForm.getFormContainers();};
e.prototype.indexOfGroup=function(i){return this._oForm.indexOfFormContainer(i);};
e.prototype.insertGroup=function(i,j){if(!i){return this;}i=this.validateAggregation("groups",i,true);f.call(this,i);this._delegateEditMode(i);this._oForm.insertFormContainer(i,j);i.attachEvent("_visibleChanged",G,this);i.setHorizontalLayoutGroupElementMinWidth(this.getHorizontalLayoutGroupElementMinWidth());i.setUseHorizontalLayout(this.getUseHorizontalLayout());if(this.getUseHorizontalLayout()){i._updateGridDataSpan();i._updateLineBreaks();}else{G.call(this);}return this;};
e.prototype.removeGroup=function(i){var j=this._oForm.removeFormContainer(i);if(j){j.detachEvent("_visibleChanged",G,this);h.call(this,j);G.call(this);}return j;};
e.prototype.removeAllGroups=function(){var j=this._oForm.removeAllFormContainers();for(var i=0;i<j.length;i++){j[i].detachEvent("_visibleChanged",G,this);h.call(this,j[i]);}G.call(this);return j;};
e.prototype.destroyGroups=function(){var j=this.getGroups();for(var i=0;i<j.length;i++){j[i].detachEvent("_visibleChanged",G,this);}this._oForm.destroyFormContainers();G.call(this);return this;};
e.prototype._getToolbar=function(){var i=this.getCustomToolbar();return i||this.getAggregation("toolbar");};
e.prototype.propagateGridDataSpan=function(){var j=this.getGroups();for(var i=0;i<j.length;i++){var k=j[i];k._updateGridDataSpan();k._updateLineBreaks();}return this;};
e.prototype._getGridDataSpanNumbers=function(){var L=this.getLayout();var i;if(L&&L._getGridDataSpanNumbers){i=L._getGridDataSpanNumbers();}return i;};
e.prototype._toggleEditMode=function(){var i=this.getEditable();this.setEditable(!i);};
e.prototype._addChangeModeToToolbar=function(){if(!S.isFlexChangeMode()){x.call(this);return Promise.resolve();}var i=!!this._getContainingDialog(this);if(i||S.isFlexibilityAdaptationButtonAllowed()){return this._getAddChangeModelToToolbarPromise();}};
e.prototype._getAddChangeModelToToolbarPromise=function(){var i=this;var j=this.getFlexEnabled();if(j){var k=U.getComponentClassName(this);var J=U.getAppDescriptor(this);var K=U.getAppVersionFromManifest(J);var L={appDescriptor:J,siteId:U.getSiteId(this)};return S.getInstance(k,K,L).then(function(N){if(N.isKeyUser()&&U.checkControlId(i)){w.call(i);}});}else{x.call(this);return Promise.resolve();}};
e.prototype._handleAdaptationButtonPress=function(i){var j=i.getSource();j.setEnabled(false);q.sap.require("sap.ui.rta.RuntimeAuthoring");var k=new sap.ui.rta.RuntimeAuthoring({triggeredFromDialog:true,rootControl:this._getContainingDialog(this)});k.attachStop(function(j){j.setEnabled(true);}.bind(this,j));k.start();};
e.prototype._getContainingDialog=function(i){if(!i){return undefined;}if(i.getMetadata&&i.getMetadata().getName()==="sap.m.Dialog"){return i;}return this._getContainingDialog(i.getParent());};
e.prototype.check=function(i){if(i===undefined){i=true;}var j=this._checkClientError(i);return j;};
e.prototype._checkClientError=function(i){if(i===undefined){i=true;}var j=this.getSmartFields(i,i);var k=[];var J=null;j.forEach(function(K){if(K.checkClientError()){if(i&&K.getVisible){if(!K.getVisible()){return;}}J=K.getParent();while(J.getParent){J=J.getParent();if(J instanceof sap.ui.comp.smartform.Group){if(!J.getExpanded()){J.setExpanded(true);}break;}}k.push(K.getId());}});return k;};
e.prototype._displayError=function(i){var j=this._oRb.getText("FORM_CLIENT_CHECK_ERROR_TITLE");var k=this._oRb.getText("FORM_CLIENT_CHECK_ERROR");M.show(k,{icon:M.Icon.ERROR,title:j,styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":""});};
e.prototype.setEditable=function(i){var j=this.getEditable();if(j===i){return this;}if(!i&&this.hasListeners("editToggled")){var k=this.check(true);if(k&&k.length>0){this._displayError(k);return this;}}this.setProperty("editable",i);if(this._oForm){this._oForm.setEditable(i);}this.fireEditToggled({editable:i});if(this._oEditToggleButton){this._oEditToggleButton.setIcon(i?"sap-icon://display":"sap-icon://edit");var J=this._oRb.getText(i?"FORM_TOOLTIP_DISPLAY":"FORM_TOOLTIP_EDIT");this._oEditToggleButton.setTooltip(J);}var K=this.getGroups();K.forEach(function(L){L.setEditMode(i);});if(this.getCheckButton()&&i){t.call(this);}else{u.call(this);}return this;};
e.prototype.setEditTogglable=function(i){this.setProperty("editTogglable",i,true);if(i){r.call(this);}else{s.call(this);}return this;};
e.prototype.setTitle=function(i){this.setProperty("title",i,true);if(i){if(!this._oTitle){this._oTitle=new T(this.getId()+"-title-sfmain").addStyleClass("title");}this._oTitle.setText(i);this._oForm.addAriaLabelledBy(this._oTitle);o.call(this);}else if(this._oTitle){p.call(this);this._oForm.removeAriaLabelledBy(this._oTitle);this._oTitle.destroy();this._oTitle=null;}return this;};
e.prototype.setCheckButton=function(i){this.setProperty("checkButton",i,true);if(i){t.call(this);}else{u.call(this);}return this;};
e.prototype.setUseHorizontalLayout=function(i){var j=this.getUseHorizontalLayout();if(j!==i){this.setProperty("useHorizontalLayout",i);if(i){this.addStyleClass("sapUiCompSmartFormHorizontalLayout");}else{this.removeStyleClass("sapUiCompSmartFormHorizontalLayout");}var k=this.getGroups();if(k){k.forEach(function(J){J.setUseHorizontalLayout(i);});}var L=this.getLayout();if(i){E.call(this,L);}else{D.call(this);E.call(this,L);}}return this;};
e.prototype.setLayout=function(L){var i=this.getLayout();if(i==L){return this;}if(i){i.detachEvent("_change",I,this);}this.setAggregation("layout",L);if(L){L.attachEvent("_change",I,this);}this.propagateGridDataSpan();D.call(this);E.call(this,L);return this;};
e.prototype.destroyLayout=function(){var i=this.getLayout();if(!i){return this;}this.destroyAggregation("layout");this.propagateGridDataSpan();D.call(this);E.call(this,null);return this;};
e.prototype.setHorizontalLayoutGroupElementMinWidth=function(i){var j=this.getHorizontalLayoutGroupElementMinWidth();if(j==i){return this;}q.sap.log.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);this.setProperty("horizontalLayoutGroupElementMinWidth",i);var k=this.getGroups();if(k){k.forEach(function(J){J.setHorizontalLayoutGroupElementMinWidth(i);});}return this;};
e.prototype.getVisibleProperties=function(){var i=[];var j=this.getGroups();if(j){j.forEach(function(k){var J=k.getGroupElements();if(J.length>0){J.forEach(function(K){var L=K.getElements();if(L.length>0){L.forEach(function(N){if(N.getVisible()){var Q=N.getBindingPath("value");if(Q){i.push(Q);}}});}});}});}return i;};
e.prototype.setCustomToolbar=function(i){var j=this.getCustomToolbar();if(j==i){return this;}p.call(this);s.call(this);u.call(this);x.call(this);this.setAggregation("customToolbar",i);if(this.getTitle()){o.call(this);}if(this.getEditTogglable()){r.call(this);}if(this.getCheckButton()){t.call(this);}return this;};
e.prototype.destroyCustomToolbar=function(){var i=this.getCustomToolbar();if(i){p.call(this);s.call(this);u.call(this);}this.destroyAggregation("customToolbar");if(this.getTitle()){o.call(this);}if(this.getEditTogglable()){r.call(this);}if(this.getCheckButton()){t.call(this);}return this;};
e.prototype.setExpandable=function(i){this.setProperty("expandable",i);if(i){if(!this._oPanel){this._oPanel=new P(this.getId()+"--Panel",{expanded:this.getExpanded(),expandable:true,headerText:this.getTitle(),expandAnimation:false});this._oPanel.getHeaderToolbar=function(){var j=this.getParent();if(j){return j._getToolbar();}};this._oPanel.attachExpand(_,this);}this.setAggregation("content",this._oPanel);this._oPanel.addContent(this._oForm);}else if(this._oPanel){this.setAggregation("content",this._oForm);this._oPanel.destroy();this._oPanel=null;}return this;};
function _(i){this.setProperty("expanded",i.getParameter("expand"),true);}
e.prototype.setExpanded=function(i){this.setProperty("expanded",i);if(this._oPanel){this._oPanel.setExpanded(i);}return this;};
e.prototype.addCustomData=function(j){if(!j){return this;}C.prototype.addCustomData.apply(this,arguments);var k=this.getGroups();for(var i=0;i<k.length;i++){g.call(this,k[i],j);}return this;};
e.prototype.insertCustomData=function(j,k){if(!j){return this;}C.prototype.insertCustomData.apply(this,arguments);var J=this.getGroups();for(var i=0;i<J.length;i++){g.call(this,J[i],j);}return this;};
e.prototype.removeCustomData=function(j){var k=C.prototype.removeCustomData.apply(this,arguments);if(k){var J=this.getGroups();for(var i=0;i<J.length;i++){h.call(this,J[i],k.getId());}}return k;};
e.prototype.removeAllCustomData=function(){var j=C.prototype.removeAllCustomData.apply(this,arguments);if(j.length>0){var k=this.getGroups();for(var i=0;i<k.length;i++){h.call(this,k[i]);}}return j;};
e.prototype.destroyCustomData=function(){C.prototype.destroyCustomData.apply(this,arguments);var j=this.getGroups();for(var i=0;i<j.length;i++){h.call(this,j[i]);}return this;};
function f(j){var k=this.getCustomData();for(var i=0;i<k.length;i++){g.call(this,j,k[i]);}}
function g(i,j){if(sap.ui.comp.smartform.inheritCostomDataToFields(j)){var N=j.clone();N._bFromSmartForm=true;N._sOriginalId=j.getId();i.addCustomData(N);}}
function h(j,k){var J=j.getCustomData();for(var i=0;i<J.length;i++){var K=J[i];if(K._bFromSmartForm&&(!k||k==K._sOriginalId)){j.removeCustomData(K);}}}
e.prototype._delegateEditMode=function(i){if(i){i.setEditMode(this.getEditable());}};
e.prototype.getSmartFields=function(J,K){var L=[];var N=[];var Q=[];var V=[];if(J===undefined){J=true;}L=this.getGroups();for(var i=0;i<L.length;i++){var W=L[i];if(!J||(J&&W.getVisible())){N=W.getGroupElements();for(var j=0;j<N.length;j++){var X=N[j];if(!K||(K&&X.getVisible())){Q=X.getElements();for(var k=0;k<Q.length;k++){var Y=Q[k];if(Y instanceof sap.ui.comp.smartfield.SmartField){V.push(Y);}}}}}}return V;};
e.prototype.setFocusOnEditableControl=function(){var i=[];this.getGroups().forEach(function(j){if(j.getVisible()){j.getGroupElements().forEach(function(k){if(k.getVisible()){i=i.concat(k.getElements());}});}});i.some(function(j){if(j.getEditable&&j.getEditable()&&j.focus&&j.getVisible()){if(j instanceof sap.ui.comp.smartfield.SmartField){j.attachEventOnce("innerControlsCreated",function(k){q.sap.delayedCall(0,k.oSource._oControl[k.oSource._oControl.current],"focus");});}else{j.focus();}return true;}});};
e.prototype.clone=function(j,L){this.setAggregation("content",null);var k=this.getLayout();var J=this.getAggregation("toolbar");var K=this.getCustomToolbar();var N=this.getCustomData();var Q=this.getGroups();var i=0;if(k){k.detachEvent("_change",I,this);}if(K){p.call(this);s.call(this);u.call(this);x.call(this);}else if(J){this.setAggregation("toolbar",null);}if(N.length>0){for(i=0;i<Q.length;i++){h.call(this,Q[i]);}}var V=C.prototype.clone.apply(this,arguments);for(i=0;i<Q.length;i++){var W=Q[i].clone(j,L);V.addGroup(W);}if(this.getExpandable()){this.setAggregation("content",this._oPanel);}else{this.setAggregation("content",this._oForm);}if(k){k.attachEvent("_change",I,this);}if(K){if(this.getTitle()){o.call(this);}if(this.getEditTogglable()){r.call(this);}if(this.getCheckButton()){t.call(this);}}else if(J){this.setAggregation("toolbar",J);}if(N.length>0){for(i=0;i<Q.length;i++){f.call(this,Q[i]);}}return V;};
e.prototype.exit=function(){if(this._oForm){this._oForm.destroy();}if(this._oPanel){this._oPanel.destroy();}if(this._oTitle){this._oTitle.destroy();}if(this._oEditToggleButton){this._oEditToggleButton.destroy();}this._oForm=null;this._oPanel=null;this._oTitle=null;this._oRb=null;this._oEditToggleButton=null;};
function m(){var i=this.getAggregation("toolbar");if(!i){i=new O(this.getId()+"-toolbar-sfmain",{"height":"3rem","design":sap.m.ToolbarDesign.Transparent});i._bCreatedBySmartForm=true;this.setAggregation("toolbar",i);}return i;}
function n(i){var j=this.getAggregation("toolbar");if(j){if(i){var k=j.getContent();if(k.length>0){return;}}this.destroyAggregation("toolbar");}}
function o(){if(!this._oTitle){return;}var i=this._getToolbar();if(!i){i=m.call(this);}i.insertContent(this._oTitle,0);}
function p(){if(!this._oTitle){return;}var i=this._getToolbar();i.removeContent(this._oTitle);n.call(this,true);}
function r(){if(!this.getEditTogglable()){return;}var i=this._getToolbar();if(!i){i=m.call(this);}if(!this._oCheckButton&&!this._oFlexButton){y.call(this,i);}if(!this._oEditToggleButton){var j=this.getEditable()?"sap-icon://display":"sap-icon://edit";var k=this._oRb.getText(this.getEditable()?"FORM_TOOLTIP_DISPLAY":"FORM_TOOLTIP_EDIT");this._oEditToggleButton=new B(i.getId()+"-button-sfmain-editToggle",{type:b.Default,icon:j,tooltip:k});this._oEditToggleButton.attachPress(this._toggleEditMode,this);}var J=i.getContent().length;if(this._oCheckButton){J--;}if(this._oFlexButton){J--;}i.insertContent(this._oEditToggleButton,J);}
function s(){if(!this._oEditToggleButton){return;}var i=this._getToolbar();i.removeContent(this._oEditToggleButton);this._oEditToggleButton.destroy();this._oEditToggleButton=null;z.call(this,i);n.call(this,true);}
function t(){if(!this.getCheckButton()||!this.getEditable()){return;}var i=this._getToolbar();if(!i){i=m.call(this);}if(!this._oEditToggleButton&&!this._oFlexButton){y.call(this,i);}if(!this._oCheckButton){this._oCheckButton=new B(this.getId()+"-"+i.getId()+"-button-sfmain-check",{type:b.Default,text:this._oRb.getText("SMART_FORM_CHECK")});this._oCheckButton.attachPress(v,this);}var j=i.getContent().length;if(this._oFlexButton){j--;}i.insertContent(this._oCheckButton,j);}
function u(){if(!this._oCheckButton){return;}var i=this._getToolbar();i.removeContent(this._oCheckButton);this._oCheckButton.destroy();this._oCheckButton=null;z.call(this,i);n.call(this,true);}
function v(i){var j=[];j=this.check();this.fireChecked({erroneousFields:j});}
function w(){var i=this._getToolbar();if(!i){i=m.call(this);i.addStyleClass("titleBar");}if(!this._oEditToggleButton&&!this._oFlexButton){y.call(this,i);}if(!this._oFlexButton){this._oFlexButton=new B(this.getId()+"-"+i.getId()+"-AdaptationButton",{type:b.Default,icon:"sap-icon://wrench",tooltip:this._oRb.getText("FORM_TOOLTIP_SETTINGS")});this._oFlexButton.attachPress(this._handleAdaptationButtonPress,this);}var j=i.getContent().length;i.insertContent(this._oFlexButton,j);}
function x(){if(!this._oFlexButton){return;}var i=this._getToolbar();i.removeContent(this._oFlexButton);this._oFlexButton.destroy();this._oFlexButton=null;z.call(this,i);n.call(this,true);}
function y(j){var k;if(!j._bCreatedBySmartForm){var J=j.getContent();var K=false;for(var i=0;i<J.length;i++){if(J[i]instanceof c){K=true;break;}}if(!K){k=new c();k._bCreatedBySmartForm=true;j.addContent(k);}if(!(J[J.length-1]instanceof d)){var L=new d();L._bCreatedBySmartForm=true;j.addContent(L);}}else{k=new c();k._bCreatedBySmartForm=true;j.addContent(k);}}
function z(i){var j=i.getContent();var L;if(!i._bCreatedBySmartForm){L=j[j.length-1];if(L instanceof d&&L._bCreatedBySmartForm){L.destroy();}j=i.getContent();}L=j[j.length-1];if(L instanceof c&&L._bCreatedBySmartForm){L.destroy();}}
function A(){this._oFormLayoutNotInitial=true;var i=new a();H.call(this,i);return i;}
function D(){var L=this.getLayout();var j=this._oForm.getLayout();var k=false;if(this.getUseHorizontalLayout()&&(!L||!L.getGridDataSpan())){if(!(j instanceof sap.ui.layout.form.ResponsiveLayout)){j.destroy();j=new sap.ui.layout.form.ResponsiveLayout();this._oForm.setLayout(j);k=true;}}else if(!(j instanceof sap.ui.layout.form.ResponsiveGridLayout)){j.destroy();j=A.call(this);this._oForm.setLayout(j);E.call(this,L);k=true;}if(k){var J=this.getGroups();for(var i=0;i<J.length;i++){var K=J[i];K._updateLayoutData();}}}
function E(L){var i=this._oForm.getLayout();if(!(i instanceof sap.ui.layout.form.ResponsiveGridLayout)){return;}if(this.getUseHorizontalLayout()){if(L&&L.getGridDataSpan()){H.call(this,i);i.setColumnsL(1);i.setColumnsM(1);if(L.getBreakpointM()>0){i.setBreakpointM(L.getBreakpointM());}if(L.getBreakpointL()>0){i.setBreakpointL(L.getBreakpointL());}if(L.getBreakpointXL()>0){i.setBreakpointXL(L.getBreakpointXL());}this._oFormLayoutNotInitial=true;}}else{if(L){i.setLabelSpanXL(L.getLabelSpanXL()?L.getLabelSpanXL():-1);i.setLabelSpanL(L.getLabelSpanL()?L.getLabelSpanL():4);i.setLabelSpanM(L.getLabelSpanM()?L.getLabelSpanM():4);i.setLabelSpanS(L.getLabelSpanS()?L.getLabelSpanS():12);i.setEmptySpanXL(L.getEmptySpanXL()?L.getEmptySpanXL():-1);i.setEmptySpanL(L.getEmptySpanL()?L.getEmptySpanL():0);i.setEmptySpanM(L.getEmptySpanM()?L.getEmptySpanM():0);i.setColumnsXL(L.getColumnsXL()?L.getColumnsXL():-1);i.setColumnsL(L.getColumnsL()?L.getColumnsL():3);i.setColumnsM(L.getColumnsM()?L.getColumnsM():2);i.setSingleContainerFullSize(L.getSingleGroupFullSize());i.setBreakpointXL(L.getBreakpointXL()?L.getBreakpointXL():1440);i.setBreakpointL(L.getBreakpointL()?L.getBreakpointL():1024);i.setBreakpointM(L.getBreakpointM()?L.getBreakpointM():600);this._oFormLayoutNotInitial=true;}else{H.call(this,i);}G.call(this,L,i);}}
function G(L,j){if(this.getUseHorizontalLayout()){return;}if(!j){j=this._oForm.getLayout();L=this.getLayout();}var k=this.getGroups();var J=-1;var K=3;var N=true;var V=0;for(var i=0;i<k.length;i++){if(k[i].getVisible()){V++;}}if(L){K=L.getColumnsL()?L.getColumnsL():3;J=(L.getColumnsXL()>0)?L.getColumnsXL():-1;N=L.getSingleGroupFullSize();}if(k&&V>0&&V<J&&N){j.setColumnsXL(V);}else if(j.getColumnsXL()!=J){j.setColumnsXL(J);}if(k&&V>0&&V<K&&N){j.setColumnsL(V);}else if(j.getColumnsL()!=K){j.setColumnsL(K);}}
function H(i){if(this._oFormLayoutNotInitial){i.setLabelSpanXL(-1);i.setLabelSpanL(4);i.setLabelSpanM(4);i.setLabelSpanS(12);i.setEmptySpanXL(-1);i.setEmptySpanL(0);i.setEmptySpanM(0);i.setColumnsXL(-1);i.setColumnsL(3);i.setColumnsM(2);i.setSingleContainerFullSize(true);i.setBreakpointXL(1440);i.setBreakpointL(1024);i.setBreakpointM(600);this._oFormLayoutNotInitial=false;}}
function I(i){var L=i.oSource;E.call(this,L);if(i.getParameter("name")=="gridDataSpan"){this.propagateGridDataSpan();}}
return e;},true);
},
	"sap/ui/comp/smartvariants/SmartVariantManagement.js":function(){sap.ui.getCore().loadLibrary('sap.ui.fl');sap.ui.define(['jquery.sap.global','sap/ui/comp/library','./PersonalizableInfo','sap/ui/comp/variants/VariantItem','sap/ui/comp/variants/VariantManagement','sap/ui/fl/Change','sap/ui/fl/Persistence','sap/ui/fl/Utils','sap/ui/fl/transport/TransportSelection'],function(q,l,P,V,a,C,b,F,T){"use strict";
var S=a.extend("sap.ui.comp.smartvariants.SmartVariantManagement",{
metadata:{library:"sap.ui.comp",designTime:true,properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:null}},aggregations:{personalizableControls:{type:"sap.ui.comp.smartvariants.PersonalizableInfo",multiple:true,singularName:"personalizableControl"}},events:{initialise:{},afterSave:{parameters:{tile:{type:"boolean"}}}}},
renderer:function(r,c){a.getMetadata().getRenderer().render(r,c);}
});
S.prototype.init=function(){a.prototype.init.apply(this);this._bIsInitialized=false;this._oStandardVariant=null;this._oControlPersistence=null;this._oControlPromise=null;this._oPersoControl=null;this._sAppStandardVariantKey=null;this._oSelectionVariantHandler={};this._oAppStdContent=null;this._aPersonalizableControls=[];if(this.setLifecycleSupport){this.setLifecycleSupport(true);}this._setBackwardCompatibility(false);this.setSupportExecuteOnSelectOnSandardVariant(true);};
S.prototype.applySettings=function(){this.setUseFavorites(true);a.prototype.applySettings.apply(this,arguments);};
S.prototype._createControlWrapper=function(c){var o=null;var d=sap.ui.getCore().byId(c.getControl());if(d){o={control:d,type:c.getType(),dataSource:c.getDataSource(),keyName:c.getKeyName(),loaded:q.Deferred()};}return o;};
S.prototype._getControlWrapper=function(c){var d=this._getAllPersonalizableControls();if(d&&d.length){for(var i=0;i<d.length;i++){if(d[i].control===c){return d[i];}}}return null;};
S.prototype.addPersonalizableControl=function(c){var o,d=null,s=c.getControl();d=sap.ui.getCore().byId(s);if(!d){q.sap.log.error("couldn't obtain the control with the id="+s);return this;}this.addAggregation("personalizableControls",c,true);o=this._createControlWrapper(c);if(o){this._aPersonalizableControls.push(o);}if(this.isPageVariant()){return this;}this._setPersControler(d);return this;};
S.prototype.getTransportSelection=function(){return new T();};
S.prototype._setPersControler=function(c){if(!this._oPersoControl&&F.getComponentClassName(c)){this._oPersoControl=c;this._addPersistenceController(c);}};
S.prototype.setPersistencyKey=function(k){this.setProperty("persistencyKey",k);this._setPersControler(this);return this;};
S.prototype._addPersistenceController=function(c){if(c){this._oControlPersistence=new b(c,"persistencyKey");this._handleGetChanges(c);}};
S.prototype.isPageVariant=function(){if(this.getPersistencyKey()){return true;}return false;};
S.prototype._handleGetChanges=function(c){var t=this;if(c&&this._oControlPersistence){this._oControlPromise={};this._oControlPromise=new Promise(function(r,d){t._oControlPersistence.getChanges().then(function(v){r(v);},function(e){d(e);});});}};
S.prototype.getVariantContent=function(c,k){var p,o=this._getChangeContent(k);if(o&&this.isPageVariant()){p=this._getControlPersKey(c);if(p){o=this._retrieveContent(o,p);}}return o;};
S.prototype._getChangeContent=function(k){var c=null;if(k===this.STANDARDVARIANTKEY){c=this.getStandardVariant();}else{c=this._getChange(k);if(c){c=c.getContent();if(c){c=q.extend(true,{},c);}}}return c;};
S.prototype._getChange=function(i){var c=null;if(this._oControlPersistence){c=this._oControlPersistence.getChange(i);}return c;};
S.prototype._getAllPersonalizableControls=function(){return this._aPersonalizableControls;};
S.prototype.removeAllPersonalizableControls=function(){this.removeAllAggregation("personalizableControls");this._aPersonalizableControls=[];};
S.prototype.removePersonalizableControl=function(c){var p=this.removeAggregation("personalizableControls",c);if(p){this._aPersonalizableControls.some(function(o,i){if(o.control.getId()===p.getControl()){this._aPersonalizableControls.splice(i,1);return true;}return false;}.bind(this));}return p;};
S.prototype.removePersonalizableControlById=function(c){var p=this.getAggregation("personalizableControls");if(p){p.some(function(o,i){if(o.getControl()===c.getId()){this.removePersonalizableControl(o);return true;}return false;}.bind(this));}};
S.prototype._createVariantEntries=function(v){var n=null;var s,c=null;var o,d;var e=[];var f=[];this.removeAllItems();if(v){for(n in v){if(n){o=v[n];if(o.isVariant()){d=new V({key:o.getId(),global:!o.isUserDependent(),executeOnSelection:this._getExecuteOnSelection(o),lifecycleTransportId:o.getRequest(),lifecyclePackage:o.getPackage(),namespace:o.getNamespace(),readOnly:this._isReadOnly(o),labelReadOnly:o.isLabelReadOnly(),author:this._getLRepUser(o)});d.setText(o.getText("variantName"));if(this._hasStoredStandardVariant(o)){c=o.getId();}this.addVariantItem(d);e.push(o.getId());}else{if((o.getChangeType()===sap.ui.comp.smartvariants.ChangeHandlerType.addFavorite)||(o.getChangeType()===sap.ui.comp.smartvariants.ChangeHandlerType.removeFavorite)){f.push(o);}}}}}if(this._oPersoControl){s=this._getDefaultVariantKey();if(s){this.setInitialSelectionKey(s);}var g=this._isApplicationVariant(this._oPersoControl);if(g){this.setIndustrySolutionMode(g);g=F.isVendorLayer();this._setVendorLayer(g);}if(this.getIndustrySolutionMode()){if(c){this._sAppStandardVariantKey=c;this.setStandardVariantKey(c);}}if(this._oControlPersistence&&this._oControlPersistence.isVariantDownport()){this._enableManualVariantKey(true);}}this._aFavoriteChanges=f;this.applyDefaultFavorites(e);return e;};
S.prototype.applyDefaultFavorites=function(v,s){if(this._aFavoriteChanges&&(this._aFavoriteChanges.length>0)){this._applyFavorites(this._aFavoriteChanges);}else{if(!s){this._applyDefaultFavorites(v);}else{this._applyDefaultFavoritesForSelectionVariants(v);}}};
S.prototype._applyDefaultFavoritesForSelectionVariants=function(v){v.forEach(function(s){var o=this.getItemByKey(s);if(o){this._setFavorite(s);}}.bind(this));};
S.prototype._applyDefaultFavorites=function(v){if(!this._sAppStandardVariantKey){this.setStandardFavorite(true);this._setFavorite(this.STANDARDVARIANTKEY);}v.forEach(function(s){var c=this._getChange(s);var o=this.getItemByKey(s);if(c&&o){if(!this._isReadOnly(c)){this._setFavorite(s);}else if(c.getLayer()==="VENDOR"){this._setFavorite(s);}}}.bind(this));};
S.prototype._applyFavorites=function(f){f.forEach(function(c){var v,o=c.getContent();if(o&&o.key){if(o.key===this.STANDARDVARIANTKEY){this.setStandardFavorite(o.visible);}else{v=this.getItemByKey(o.key);if(v){v.setFavorite(o.visible);}}}}.bind(this));};
S.prototype._addFavorites=function(c){var A=c.filter(function(f){return f.visible===true;});var r=c.filter(function(f){return f.visible===false;});this._createFavoriteTypeChanges(A,r);};
S.prototype._createFavoriteTypeChanges=function(A,r){if(!A.length&&!r.length){return;}this._createFavoriteChanges(A,sap.ui.comp.smartvariants.ChangeHandlerType.addFavorite);this._createFavoriteChanges(r,sap.ui.comp.smartvariants.ChangeHandlerType.removeFavorite);};
S.prototype._createFavoriteChanges=function(f,c){var o=this._oControlPersistence;if(!o||!f.length){return;}if(!c){throw new Error("sChangeType should be filled");}f.forEach(function(d){o.addChange({type:c,content:d,isUserDependent:true});});};
S.prototype._isReadOnly=function(c){var r=c.isReadOnly();if(r){var u=this._getUser();if(u){return!(u.getId()===c.getOwnerId());}}return r;};
S.prototype._getUser=function(){var u=null;if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getUser){u=sap.ushell.Container.getUser();}return u;};
S.prototype.getVariantsInfo=function(c){if(!c){q.sap.log.error("'getVariantsInfo' failed. Expecting callBack not passed.");return;}var n=null;var v;var d=[];var t=this;try{if(this._oControlPersistence){this._oControlPersistence.getChanges().then(function(m){if(m){for(n in m){if(n){v=m[n];if(v.isVariant()){d.push({key:v.getId(),text:v.getText("variantName")});}}}}c(d);},function(f){var E="'getChanges' failed:";if(f&&f[0]&&f[0].messages&&f[0].messages[0]){E+=(' '+f[0].messages[0]);}t._setErrorValueState(t.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"),E);c(d);});}}catch(e){this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"),"'getChanges' throws an exception");}};
S.prototype.getCurrentVariantId=function(){var k=this._getCurrentVariantId();if(k===this.STANDARDVARIANTKEY){k="";}return k;};
S.prototype._getCurrentVariantId=function(){var k=this.getSelectionKey();return k;};
a.prototype.setCurrentVariantId=function(v,d){var i=this._determineVariantId(v);if(this._oPersoControl){if(!this._oStandardVariant){this._setSelectionByKey(i);}else{this._applyCurrentVariantId(i,d);}}};
S.prototype._applyCurrentVariantId=function(v,d){var c;if(this._oPersoControl){c=this._getChangeContent(v);if(c){this._setSelectionByKey(v);if(!d){if(this.isPageVariant()){this._applyVariants(c,"SET_VM_ID");}else{this._applyVariant(this._oPersoControl,c,"SET_VM_ID");}}}}};
S.prototype._determineVariantId=function(v){var i=v;if(!i){i=this.getStandardVariantKey();}else{if(!this.getItemByKey(i)){i=this.getStandardVariantKey();}}return i;};
S.prototype.initialise=function(c,p){var o=null,d,t=this,k,f,e={variantKeys:[]};try{if(p&&c){o=this._getControlWrapper(p);if(!o){q.sap.log.error("initialise on an unknown control.");return;}if(o.bInitialized){q.sap.log.error("initialise on "+p.getId()+" already executed");return;}o.fInitCallback=c;}else if(!this.isPageVariant()){o=this._getControlWrapper(this._oPersoControl);}if(this._oControlPromise&&this._oPersoControl&&o){this._oControlPromise.then(function(v){if(t._bIsBeingDestroyed){return;}if(!t._bIsInitialized){t._bIsInitialized=true;e.variantKeys=t._createVariantEntries(v);f=t._getExecuteOnSelectOnStandardVariant();if(f!==null){t._executeOnSelectForStandardVariantByUser(f);}k=t._getDefaultVariantKey();if(k){d=t._getChangeContent(k);if(d){t.setDefaultVariantKey(k);t.setInitialSelectionKey(k);}}if(t._sAppStandardVariantKey){t._oAppStdContent=t._getChangeContent(t._sAppStandardVariantKey);}}t._initialize(e,o);},function(h){var E="'getChanges' failed:";if(h&&h.message){E+=(' '+h.messages);}t._errorHandling(E,c,p);});}else{this._errorHandling("'initialise' no personalizable component available",c,p);}}catch(g){this._errorHandling("'getChanges' throws an exception",c,p);}};
S.prototype._errorHandling=function(e,c,p){var d={variantKeys:[]};this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"),e);if(c&&p){c.call(p);}else{this.fireEvent("initialise",d);}if(p.variantsInitialized){p.variantsInitialized();}};
S.prototype._initialize=function(p,c){var k,o=null,i=this.isPageVariant();if(this._oAppStdContent){if((c.type==="table")||(c.type==="chart")){if(i){this._applyControlVariant(c.control,this._oAppStdContent,"STANDARD",true);}else{this._applyVariant(c.control,this._oAppStdContent,"STANDARD",true);}}}if(c.fInitCallback){c.fInitCallback.call(c.control);delete c.fInitCallback;c.bInitialized=true;}else{this.fireEvent("initialise",p);}c.loaded.resolve();k=this.getSelectionKey();if(k&&(k!==this.getStandardVariantKey())){o=this._getChangeContent(k);}else if(this._oAppStdContent){o=this._oAppStdContent;if((c.type==="table")||(c.type==="chart")){o=null;}}if(this._sAppStandardVariantKey){this._updateStandardVariant(c,this._oAppStdContent);}else{this._setStandardVariant(c);}if(o){if(i){this._applyControlVariant(c.control,o,"INIT",true);}else{this._applyVariant(c.control,o,"INIT",true);}}if(c.control.variantsInitialized){c.control.variantsInitialized();}if((this._getCurrentVariantId()===this.getStandardVariantKey())&&this.getExecuteOnSelectForStandardVariant()){if(c.control.search){c.control.search();}}};
S.prototype.setInitialState=function(){var k=this._getDefaultVariantKey()||this.getStandardVariantKey();if(k){this.setInitialSelectionKey(k);this._triggerSelectVariant(k,"INIT_STATE");}};
S.prototype._updateVariant=function(v){if(this._isIndustrySolutionModeAndVendorLayer()||(v.key!==this.getStandardVariantKey())){if(v){var c=this._getChange(v.key);if(c){try{if((v.lifecycleTransportId!==null)&&(v.lifecycleTransportId!==undefined)){c.setRequest(v.lifecycleTransportId);}var o=this._fetchContent();if(o){var i=this.getItemByKey(v.key);if(i){o.executeOnSelection=i.getExecuteOnSelection();}if(o.standardvariant!==undefined){delete o.standardvariant;}if(this._isIndustrySolutionModeAndVendorLayer()&&(v.key===this.getStandardVariantKey())){o.standardvariant=true;}c.setContent(o);}}catch(e){q.sap.log.error("'_updateVariant' throws an exception");}}}}};
S.prototype._createChangeHeader=function(){if(this.isPageVariant()){return{type:"page",dataService:"n/a"};}var c=this._getAllPersonalizableControls();if(c&&c.length>0){return{type:c[0].type,dataService:c[0].dataSource};}};
S.prototype._newVariant=function(v){var i,c,o,I=false;if(v&&this._oControlPersistence){var t=this._createChangeHeader();var u=!v.global;var p="";if((v.lifecyclePackage!==null)&&(v.lifecyclePackage!==undefined)){p=v.lifecyclePackage;}var s="";if((v.lifecycleTransportId!==null)&&(v.lifecycleTransportId!==undefined)){s=v.lifecycleTransportId;}i=this._isVariantDownport()?v.key:null;if(this._isIndustrySolutionModeAndVendorLayer()&&(this.getStandardVariantKey()===this.STANDARDVARIANTKEY)){if(s&&(v.name===this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"))){this.setStandardVariantKey(i);I=true;}}c=this._fetchContent();if(c){if(v.exe){c.executeOnSelection=v.exe;}if(v.tile){c.tile=v.tile;}if(c.standardvariant!==undefined){delete c.standardvariant;}if(I){c.standardvariant=true;}}var m={type:t.type,ODataService:t.dataSource,texts:{variantName:v.name},content:c,isVariant:true,packageName:p,isUserDependent:u,id:i};i=this._oControlPersistence.addChange(m);this.replaceKey(v.key,i);this.setInitialSelectionKey(i);if(this._isIndustrySolutionModeAndVendorLayer()&&((v.key===this.STANDARDVARIANTKEY)||this._isVariantDownport())){this.setStandardVariantKey(i);}o=this._getChange(i);if(o){o.setRequest(s);var d=this.getItemByKey(i);if(d){d.setNamespace(o.getNamespace());}}if(v.def===true){this._setDefaultVariantKey(i);}this._setFavorite(i);}};
S.prototype._setFavorite=function(i){var I=this.getItemByKey(i);if(I){I.setFavorite(true);}this._addFavorites([{key:i,visible:true}]);};
S.prototype._fetchContent=function(){var c,p,o,d={};var e=this._getAllPersonalizableControls();for(var i=0;i<e.length;i++){c=e[i];if(c&&c.control&&c.control.fetchVariant){o=c.control.fetchVariant();if(o){if(o){o=q.extend(true,{},o);}if(this.isPageVariant()){p=this._getControlPersKey(c);if(p){d=this._assignContent(d,o,p);}else{q.sap.log.error("no persistancy key retrieved");}}else{d=o;break;}}}}return d;};
S.prototype._getControlPersKey=function(c){var p=null;if(c.keyName){if(c.keyName==="id"){p=c.control.getId();}else{p=c.control.getProperty(c.keyName);}}else{var o=this._getControlWrapper(c);if(o&&o.keyName){if(o.keyName==="id"){p=o.control.getId();}else{p=o.control.getProperty(o.keyName);}}}return p;};
S.prototype._newVariantContent=function(c){var o=null,d,s,p;if(c&&c.control&&c.control.fetchVariant){d=c.control.fetchVariant();if(d){s=JSON.stringify(d);d=JSON.parse(s);if(this.isPageVariant()){p=this._getControlPersKey(c);if(p){o={};o=this._assignContent(o,d,p);}else{q.sap.log.error("no persistancy key retrieved");}}else{o=d;}}}return o;};
S.prototype._appendLifecycleInformation=function(v,i){var t;var I=this.getItemByKey(i);if(I){t=I.getLifecycleTransportId();if(t===null||t===undefined){t="";}if(v){v.setRequest(t);}}};
S.prototype._renameVariant=function(v){if(v.key!==this.getStandardVariantKey()){if(v){var c=this._getChange(v.key);if(c){c.setText("variantName",v.name);this._appendLifecycleInformation(c,v.key);}}}};
S.prototype._deleteVariants=function(v){var i;if(v&&v.length){var s=this._getDefaultVariantKey();for(i=0;i<v.length;i++){if(v[i]===this.getStandardVariantKey()){if(!this._isIndustrySolutionModeAndVendorLayer()){continue;}else{this.setStandardVariantKey(this.STANDARDVARIANTKEY);}}var c=this._getChange(v[i]);if(c){c.markForDeletion();if(s&&s===v[i]){this._setDefaultVariantKey("");}this._appendLifecycleInformation(c,v[i]);}}}};
S.prototype._getDefaultVariantKey=function(){var d="";if(this._oControlPersistence){d=this._oControlPersistence.getDefaultVariantIdSync();}return d;};
S.prototype._setDefaultVariantKey=function(v){if(this._oControlPersistence){this._oControlPersistence.setDefaultVariantIdSync(v);}};
S.prototype._getExecuteOnSelectOnStandardVariant=function(){var e=null;if(this._oControlPersistence){e=this._oControlPersistence.getExecuteOnSelectSync();}return e;};
S.prototype._setExecuteOnSelectOnStandardVariant=function(f){if(this._oControlPersistence){this._oControlPersistence.setExecuteOnSelectSync(f);}};
S.prototype._isVariantDownport=function(){var d=false;if(this._oControlPersistence){d=this._oControlPersistence.isVariantDownport();}return d;};
S.prototype._getExecuteOnSelection=function(v){var c;if(v){c=v.getContent();if(c&&(c.executeOnSelection!==undefined)){return c.executeOnSelection;}}return false;};
S.prototype._hasStoredStandardVariant=function(v){var c;if(v){c=v.getContent();if(c&&c.standardvariant){return c.standardvariant;}}return false;};
S.prototype._isComponentTemplate=function(c){var i=false;var o=F.getComponentForControl(c);if(o&&o.getAppComponent){o=o.getAppComponent();if(o){i=true;}}return i;};
S.prototype._isApplicationVariant=function(c){if(F.isApplicationVariant(c)){return true;}if(this._isComponentTemplate(c)){return true;}return false;};
S.prototype._setExecuteOnSelections=function(v){var i;if(v&&v.length){for(i=0;i<v.length;i++){if(v[i].key===this.STANDARDVARIANTKEY){this._setExecuteOnSelectOnStandardVariant(v[i].exe);continue;}var c=this._getChange(v[i].key);if(c){var j=c.getContent();if(j){j.executeOnSelection=v[i].exe;c.setContent(j);}this._appendLifecycleInformation(c,v[i].key);}}}};
S.prototype._save=function(n,i){var t=this;if(this._oControlPersistence){try{this._oControlPersistence.saveAll().then(function(){if(!i){if(n){t._updateUser();}t.fireEvent("afterSave");}},function(c){var E="'_save' failed:";if(c&&c.message){E+=(' '+c.messages);}t._setErrorValueState(t.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE_FAILED"),E);});}catch(e){this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE_FAILED"),"'_save' throws an exception");}}};
S.prototype._updateUser=function(){var i=this.getInitialSelectionKey();var u=this._getLRepUser(this._getChange(i));if(u){this._assignUser(i,u);}};
S.prototype._getLRepUser=function(c){var u=null;if(c&&c.getDefinition()&&c.getDefinition().support){u=c.getDefinition().support.user?c.getDefinition().support.user:"";}return u;};
S.prototype.fireSave=function(v){var s=false,n=true;var e={};if(v){if(v.hasOwnProperty("tile")){e.tile=v.tile;}if(v.overwrite){if(this._isIndustrySolutionModeAndVendorLayer()||(v.key!==this.getStandardVariantKey())){this.fireEvent("save",e);if(v.key===this.STANDARDVARIANTKEY){this._newVariant(v);}else{this._updateVariant(v);n=false;}s=true;}}else{this.fireEvent("save",e);this._newVariant(v);s=true;}if(s){this._save(n);}}};
S.prototype.fireManage=function(v){var i;if(v){if(v.renamed){for(i=0;i<v.renamed.length;i++){this._renameVariant(v.renamed[i]);}}if(v.deleted){this._deleteVariants(v.deleted);}if(v.exe){this._setExecuteOnSelections(v.exe);}if(v.def){var d=this._getDefaultVariantKey();if(d!==v.def){this._setDefaultVariantKey(v.def);}}if(v.fav&&(v.fav.length>0)){this._addFavorites(v.fav);}if((v.deleted&&v.deleted.length>0)||(v.renamed&&v.renamed.length>0)||(v.exe&&v.exe.length>0)||v.def){this._save();}else if(v.fav&&(v.fav.length>0)){this._save(false,true);}this.fireEvent("manage",v);}};
S.prototype.fireSelect=function(v,c){if(this._oPersoControl&&v&&v.key){this._triggerSelectVariant(v.key,c);this.fireEvent("select",v);}};
S.prototype._selectVariant=function(v,c){this.fireSelect({key:v},c);};
S.prototype._checkForSelectionHandler=function(v){var h=null,H=Object.keys(this._oSelectionVariantHandler);if(H.length>-1){H.some(function(k){if(v.indexOf(k)===0){h=this._oSelectionVariantHandler[k];return true;}return false;}.bind(this));}return h;};
S.prototype._triggerSelectVariant=function(v,c){var o,h=this._checkForSelectionHandler(v);if(h){o=this._triggerSpecialSelectVariant(v,c,h);}else{o=this._triggerGeneralSelectVariant(v,c);}if(o){if(this.isPageVariant()){this._applyVariants(o,c);}else{this._applyVariant(this._oPersoControl,o,c);}}};
S.prototype._triggerSpecialSelectVariant=function(v,c,h){return h.callback.call(h.handler,v,c);};
S.prototype._triggerGeneralSelectVariant=function(v,c){var o=this._getChangeContent(v);if(o){var s=JSON.stringify(o);o=JSON.parse(s);if((v===this.STANDARDVARIANTKEY)&&this.getExecuteOnSelectForStandardVariant()){o.executeOnSelection=this.getExecuteOnSelectForStandardVariant();}}return o;};
S.prototype._applyControlWrapperVariants=function(c,o,s){var t=this;if(c){c.loaded.then(function(){t._applyControlVariant(c.control,o,s);});}};
S.prototype._applyVariants=function(c,s){var i,d=this._getAllPersonalizableControls();for(i=0;i<d.length;i++){if(d[i]&&d[i].control&&d[i].loaded){this._applyControlWrapperVariants(d[i],c,s);}}};
S.prototype._setStandardVariant=function(c){var o=c.control;if(o){if(o.fireBeforeVariantSave){o.fireBeforeVariantSave(a.STANDARD_NAME);}this._assignStandardVariant(c);}};
S.prototype._retrieveContent=function(c,p){var r=c;if(this.isPageVariant()&&c){r=c[p];if(!r&&(p===this.getPersistencyKey())&&this._aPersonalizableControls&&this._aPersonalizableControls.length===1){r=c;}}return r;};
S.prototype._assignContent=function(t,c,p){if(this.isPageVariant()){if(!((p===this.getPersistencyKey())&&this._aPersonalizableControls&&this._aPersonalizableControls.length===1)){t[p]=c;}else{t=c;}}else{t=c;}return t;};
S.prototype._updateStandardVariant=function(c,o){if(c.control){var d=o;if(this.isPageVariant()){var p=this._getControlPersKey(c);if(p){d=this._retrieveContent(o,p);}}this._assignStandardVariantForControl(c,d);}};
S.prototype._assignStandardVariant=function(c){var s=null;if(c.control){if(c.control.fetchVariant){s=c.control.fetchVariant();}this._assignStandardVariantForControl(c,s);}};
S.prototype._assignStandardVariantForControl=function(c,s){var o=s;if(c){if(this.isPageVariant()){var p=this._getControlPersKey(c.control);if(p){if(!this._oStandardVariant){this._oStandardVariant={};}this._oStandardVariant=this._assignContent(this._oStandardVariant,o,p);}}else{this._oStandardVariant=o;}}};
S.prototype.getStandardVariant=function(c){var p,o,d=null;if(this._oStandardVariant){if(!c){d=this._oStandardVariant;}else{if(this.isPageVariant()){o=this._getControlWrapper(c);if(o){p=this._getControlPersKey(c);if(p){d=this._retrieveContent(this._oStandardVariant,p);}}}else{if((c===this._oPersoControl)){d=this._oStandardVariant;}}}}return d;};
S.prototype._applyVariant=function(c,o,s,i){if(c&&c.applyVariant){c.applyVariant(o,s,i);}};
S.prototype._applyControlVariant=function(c,o,s,i){var d,p;p=this._getControlPersKey(c);if(p){d=this._retrieveContent(o,p);if(d){d.executeOnSelection=o.executeOnSelection;this._applyVariant(c,d,s,i);}}};
S.prototype.registerSelectionVariantHandler=function(h,k){this._oSelectionVariantHandler[k]=h;};
S.prototype.unregisterSelectionVariantHandler=function(h){var e=null;if(!this._oSelectionVariantHandler){return;}if(typeof h==='string'){e=h;}else{Object.keys(this._oSelectionVariantHandler).some(function(k){if(this._oSelectionVariantHandler[k].handler===h){e=k;return true;}return false;}.bind(this));}if(e){delete this._oSelectionVariantHandler[e];}};
S.prototype._setErrorValueState=function(t,L){this.setEnabled(false);if(L){q.sap.log.error(L);}};
S.prototype.exit=function(){a.prototype.exit.apply(this,arguments);this._aPersonalizableControls=null;this._oControlPersistence=null;this._oControlPromise=null;this._oPersoControl=null;this._oAppStdContent=null;this._sAppStandardVariantKey=null;this._oSelectionVariantHandler=null;this._aFavoriteChanges=null;};
return S;},true);
}
}});
//# sourceMappingURL=library-preload.js.map
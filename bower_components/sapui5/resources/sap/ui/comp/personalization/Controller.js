/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/base/ManagedObject','./ColumnsController','./FilterController','./GroupController','./SortController','./DimeasureController','./SelectionController','./Util','sap/ui/comp/library','./ChartWrapper','./SelectionWrapper','./ColumnHelper','sap/ui/core/MessageType','sap/m/P13nDialog','./Validator'],function(q,M,C,F,G,S,D,a,U,b,c,d,e,f,P,V){"use strict";var g=M.extend("sap.ui.comp.personalization.Controller",{constructor:function(i,s){M.apply(this,arguments);},metadata:{publicMethods:["setPersonalizationData"],properties:{setting:{type:"object",defaultValue:{}},resetToInitialTableState:{type:"boolean",defaultValue:true},columnKeys:{type:"string[]",defaultValue:[]}},associations:{table:{type:"object",multiple:false}},events:{beforePotentialTableChange:{},afterPotentialTableChange:{},afterP13nModelDataChange:{parameters:{changeReason:{type:"sap.ui.comp.personalization.ResetType"},persistentData:{type:"object"},changeData:{type:"object"},changeType:{type:"sap.ui.comp.personalization.ChangeType"},changeTypeVariant:{type:"sap.ui.comp.personalization.ChangeType"},changeTypeRestore:{type:"sap.ui.comp.personalization.ChangeType"}}},requestColumns:{parameters:{columnKeys:{type:"string"}}},dialogAfterClose:{},dialogConfirmedReset:{}},library:"sap.ui.comp"}});g.prototype.setTable=function(t){if(this._bInitCalled){throw"The table instance should be passed only into constructor.";}this.setAssociation("table",t);return this;};g.prototype.setSetting=function(s){if(this._bInitCalled){throw"The setting instance should be passed only into constructor.";}s=this.validateProperty("setting",s);this.setProperty("setting",s,true);return this;};g.prototype.setColumnKeys=function(h){if(this._bInitCalled){throw"The columnKeys array should be passed only into constructor.";}h=this.validateProperty("columnKeys",h);this.setProperty("columnKeys",h,true);return this;};g.prototype.setResetToInitialTableState=function(r){if(this._bInitCalled){throw"The resetToInitialTableState property should be passed only into constructor.";}r=this.validateProperty("resetToInitialTableState",r);this.setProperty("resetToInitialTableState",r,true);return this;};g.prototype._mergeSettingCurrentBy=function(s){if(U.getTableType(this.getTable())===sap.ui.comp.personalization.TableType.ChartWrapper){this._oSettingCurrent=U.copy(this._oSettingOriginalChart);}else if(U.getTableType(this.getTable())===sap.ui.comp.personalization.TableType.SelectionWrapper){this._oSettingCurrent=U.copy(this._oSettingOriginalSelection);}else{this._oSettingCurrent=U.copy(this._oSettingOriginalTable);}for(var t in s){if(s[t].visible===false){delete this._oSettingCurrent[t];continue;}if(this._oSettingCurrent[t]&&this._oSettingCurrent[t].visible===true){this._oSettingCurrent[t].controller=s[t].controller?s[t].controller:this._oSettingCurrent[t].controller;this._oSettingCurrent[t].payload=s[t].payload?s[t].payload:undefined;this._oSettingCurrent[t].ignoreColumnKeys=s[t].ignoreColumnKeys?s[t].ignoreColumnKeys:[];this._oSettingCurrent[t].triggerModelChangeOnColumnInvisible=s[t].triggerModelChangeOnColumnInvisible?s[t].triggerModelChangeOnColumnInvisible:undefined;}else{this._oSettingCurrent[t]={visible:s[t].visible,controller:s[t].controller?s[t].controller:undefined,payload:s[t].payload?s[t].payload:undefined,ignoreColumnKeys:s[t].ignoreColumnKeys?s[t].ignoreColumnKeys:[],triggerModelChangeOnColumnInvisible:s[t].triggerModelChangeOnColumnInvisible?s[t].triggerModelChangeOnColumnInvisible:undefined};}}this._removeUnsupportedNamespaces();};g.prototype._mixSetting=function(s,o){if(!o){return s;}for(var t in o){if(o[t].visible&&s[t]&&s[t].visible){o[t].controller=s[t].controller;o[t].payload=o[t].payload?o[t].payload:s[t].payload;}}return o;};g.prototype.getTable=function(){var t=this.getAssociation("table");if(typeof t==="string"){t=sap.ui.getCore().byId(t);}return t;};g.prototype.getModel=function(){return this._oModel;};g.prototype.addColumns=function(o){this._oColumnHelper.addColumnMap(o);};g.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this._initialize();};g.prototype._initialize=function(){var t=this.getTable();if(!t){throw"The table instance should be passed into constructor.";}var h=t.getColumns();if(!U.isConsistent(h)){throw"The table instance provided contains some inconsistences (it could be a columnKey which is not provided or a duplicate columnKey).";}this._mergeSettingCurrentBy(this.getSetting());this._oColumnHelper.addColumnsToMap(h);var i=this.getProperty("columnKeys");if(!i.length){i=this._oColumnHelper.getColumnKeysOfMap();}this.setColumnKeys(i);this._checkIgnoredColumnKeys(t,this._oColumnHelper.getVisibleColumnKeys());this._masterSync(g.SyncReason.Initialize,null,null);this._bInitCalled=true;};g.prototype.init=function(){var t=this;this._oDialog=null;this._oPayload=null;this._oPersistentDataRestore=null;this._oPersistentDataCurrentVariant=null;this._oPersistentDataAlreadyKnown=null;this._oPersistentDataBeforeOpen=null;this._oModel=null;this._aColumnKeysOfDateType=[];this._aColumnKeysOfBooleanType=[];this._aColumnKeysOfTimeType=[];this._bIsDirty=false;this._bInitCalled=false;this._bSuspend=false;this._bUnconfirmedResetPressed=false;this._oColumnHelper=new e({callbackOnSetVisible:this._onSetVisible.bind(this),callbackOnSetSummed:this._onSetSummed.bind(this)});this._oSettingOriginalTable={columns:{controller:new C({columnHelper:this._oColumnHelper,afterColumnsModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},sort:{controller:new S({columnHelper:this._oColumnHelper,afterSortModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},filter:{controller:new F({columnHelper:this._oColumnHelper,afterFilterModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},group:{controller:new G({columnHelper:this._oColumnHelper,afterGroupModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true}};this._oSettingOriginalChart={dimeasure:{controller:new D({columnHelper:this._oColumnHelper,afterDimeasureModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},sort:{controller:new S({columnHelper:this._oColumnHelper,afterSortModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true},filter:{controller:new F({columnHelper:this._oColumnHelper,afterFilterModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true}};this._oSettingOriginalSelection={selection:{controller:new a({columnHelper:this._oColumnHelper,afterSelectionModelDataChange:function(){t._fireChangeEvent();},beforePotentialTableChange:function(){t.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){t.fireAfterPotentialTableChange();}}),visible:true}};};g.prototype.openDialog=function(s){this._suspendTable();var m=this._determineMissingColumns(this.getColumnKeys());if(m.length){this.fireRequestColumns({columnKeys:m});this._masterSync(g.SyncReason.NewModelData,this._getPersistentDataCopy(),null);}this._masterSync(g.SyncReason.NewTableBinding,null,null);this._oDialog=new P({stretch:sap.ui.Device.system.phone,showReset:(s&&s.showReset!==undefined)?s.showReset:true,showResetEnabled:this._bIsDirty,initialVisiblePanelType:this._oInitialVisiblePanelType,validationExecutor:this._handleDialogValidate.bind(this)});if(s&&s.contentWidth){this._oDialog.setContentWidth(s.contentWidth);}if(s&&s.contentHeight){this._oDialog.setContentHeight(s.contentHeight);}this._oDialog.toggleStyleClass("sapUiSizeCompact",!!q(this.getTable().getDomRef()).closest(".sapUiSizeCompact").length);var o=this._mixSetting(this._oSettingCurrent,s);var p=this._callControllers(o,"getPanel");for(var t in o){if(p[t]){this._oDialog.addPanel(p[t]);}}this._oPersistentDataBeforeOpen=this._getPersistentDataCopy();this._oDialog.attachOk(this._handleDialogOk,this);this._oDialog.attachCancel(this._handleDialogCancel,this);this._oDialog.attachReset(this._handleDialogReset,this);this._oDialog.attachAfterClose(this._handleDialogAfterClose,this);this._oDialog.open();};g.prototype._determineNeededColumnKeys=function(p){var n=this._callControllers(this._oSettingCurrent,"determineNeededColumnKeys",p);return U.getUnionOfColumnKeys(n);};g.prototype._determineMissingColumns=function(n){if(!n.length){return[];}var m=[];var t=this._oColumnHelper.getColumnKeysOfMap();n.forEach(function(s){if(t.indexOf(s)<0){m.push(s);}});return m;};g.prototype._getSettingOfPanels=function(){if(!this._oDialog||!this._oDialog.getPanels()){return{};}var s={};this._oDialog.getPanels().forEach(function(p){var t=p.getType();s[t]={controller:this._oSettingCurrent[t].controller,visible:this._oSettingCurrent[t].visible,payload:this._oSettingCurrent[t].payload};},this);return s;};g.prototype._getPersistentDataCopy=function(){var p={};if(this.getModel()&&this.getModel().getData().persistentData){p=U.copy(this.getModel().getData().persistentData);}return p;};g.prototype.getDataSuiteFormatSnapshot=function(){var o={};this._callControllers(this._oSettingCurrent,"getDataSuiteFormatSnapshot",o);return o;};g.prototype.setDataSuiteFormatSnapshot=function(o,p){if(!this._sanityCheck(p)){return;}var h=this._callControllers(this._oSettingCurrent,"_getDataSuiteFormat2Json",o);var m=this._determineNeededColumnKeys(h);var i=this._determineNeededColumnKeys(p);var j=q.extend(true,{},m,i);j=U.getUnionOfColumnKeys(j);var k=this._determineMissingColumns(j);if(k.length){this.fireRequestColumns({columnKeys:k});}this._suspendTable();this._masterSync(g.SyncReason.NewModelDataMixedWithVariant,h,p);this._fireChangeEvent();this._resumeTable(true);};g.prototype.setPersonalizationData=function(n){if(!this._sanityCheck(n)){return;}var m=this._determineMissingColumns(this._determineNeededColumnKeys(n));if(m.length){this.fireRequestColumns({columnKeys:m});}this._suspendTable();this._masterSync(g.SyncReason.NewModelDataVariant,n,null);this._resumeTable(true);this._fireChangeEvent();};g.prototype.resetPersonalization=function(r){this._suspendTable();var R=this.getResetToInitialTableState();if(r===sap.ui.comp.personalization.ResetType.ResetFull||r===sap.ui.comp.personalization.ResetType.ResetPartial){R=(r===sap.ui.comp.personalization.ResetType.ResetFull);}if(R){this._masterSync(g.SyncReason.ResetModelData,null,null);this._fireChangeEvent(sap.ui.comp.personalization.ResetType.ResetFull);}else{this._masterSync(g.SyncReason.ResetModelDataVariant,null,null);this._fireChangeEvent(sap.ui.comp.personalization.ResetType.ResetPartial);}this._resumeTable(true);};g.prototype._handleDialogReset=function(E){this._suspendTable();this._bUnconfirmedResetPressed=true;if(this.getResetToInitialTableState()){this._masterSync(g.SyncReason.ResetModelData,null,null);}else{this._masterSync(g.SyncReason.ResetModelDataVariant,null,null);}var r=this._getSettingOfPanels();this._callControllers(r,"onAfterReset",E.getParameter("payload"));this._resumeTable(true);};g.prototype._handleDialogCancel=function(E){this._oDialog.detachCancel(this._handleDialogCancel,this);this._oDialog.close();};g.prototype._handleDialogOk=function(E){this._oDialog.detachOk(this._handleDialogOk,this);if(this._bUnconfirmedResetPressed){this.fireDialogConfirmedReset();}this._oPayload={trigger:"ok",payload:E.getParameter("payload")};this._oDialog.close();};g.prototype._handleDialogAfterClose=function(){var t=this;var _=this._oPayload;this._oInitialVisiblePanelType=this._oDialog.getVisiblePanel()?this._oDialog.getVisiblePanel().getType():this._getInitialVisiblePanelType();this._bUnconfirmedResetPressed=false;if(_&&_.trigger==="ok"){setTimeout(function(){var s=t._getSettingOfPanels();if(t._oDialog){t._oDialog.destroy();t._oDialog=null;}t._callControllers(s,"onAfterSubmit",t._oPayload.payload);t._oPayload=null;t._fireChangeEvent();t._oPersistentDataBeforeOpen=null;t._resumeTable(true);t.fireDialogAfterClose();},0);}else{setTimeout(function(){if(t._oDialog){t._oDialog.destroy();t._oDialog=null;}t._masterSync(g.SyncReason.NewModelData,t._oPersistentDataBeforeOpen,null);t._oPersistentDataBeforeOpen=null;t._resumeTable(false);t.fireDialogAfterClose();},0);}};g.prototype._handleDialogValidate=function(p){var r=[];var t=this.getTable();var s=this._getSettingOfPanels();var o=this._oColumnHelper.getColumnMap();var h=this._callControllers(s,"getUnionData",U.copy(this._oPersistentDataRestore),this._getPersistentDataCopy());return V.checkGroupAndColumns(U.getTableType(t),s,p,o,h,r).then(function(R){return V.checkSaveChanges(U.getTableType(t),s,p,R).then(function(R){return R;});});};g.prototype._getInitialVisiblePanelType=function(){for(var t in this._oSettingCurrent){return t;}};g.prototype._suspendTable=function(){if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table){this._bSuspend=true;}};g.prototype._resumeTable=function(i){i=(i===undefined)?true:i;var t=this.getTable();if(this._bSuspend){if(t){if(i){t.invalidate();}}this._bSuspend=false;}};g.prototype._masterSync=function(u,n,N){var t;var j;var p;var o;switch(u){case g.SyncReason.NewTableBinding:this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");break;case g.SyncReason.Initialize:this.initializeModel();this._callControllers(this._oSettingCurrent,"setTable",this.getTable());this._setSizeLimit(this.getTable());this._callControllers(this._oSettingCurrent,"setIgnoreColumnKeys");this._callControllers(this._oSettingCurrent,"setTriggerModelChangeOnColumnInvisible");this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"createTableRestoreJson",this.getColumnKeys());this._callControllers(this._oSettingCurrent,"syncTable2PersistentModel");j=this._callControllers(this._oSettingCurrent,"getTableRestoreJson");this._oPersistentDataRestore=U.copy(j);this._oPersistentDataCurrentVariant={};this._aColumnKeysOfDateType=[];this._aColumnKeysOfTimeType=[];this._aColumnKeysOfBooleanType=[];this._oPersistentDataAlreadyKnown=U.copy(this._oPersistentDataRestore);for(t in this._oPersistentDataRestore){if(!this._oSettingCurrent[t]){delete this._oPersistentDataRestore[t];}}for(t in this._oPersistentDataAlreadyKnown){if(!this._oSettingCurrent[t]){delete this._oPersistentDataAlreadyKnown[t];}}for(t in this._oPersistentDataCurrentVariant){if(!this._oSettingCurrent[t]){delete this._oPersistentDataCurrentVariant[t];}}break;case g.SyncReason.NewModelDataVariant:if(n===null){n={};}p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(n));this.initializeModel(p);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",p);this._callControllers(this._oSettingCurrent,"reducePersistentModel");this._oPersistentDataCurrentVariant=U.copy(n);break;case g.SyncReason.NewModelData:if(n===null){n={};}p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(n));this.initializeModel(p);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",p);this._callControllers(this._oSettingCurrent,"reducePersistentModel");break;case g.SyncReason.NewModelDataMixedWithVariant:if(n===null){n={};}if(N===null){N={};}p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(n));this.initializeModel(p);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",p);this._callControllers(this._oSettingCurrent,"reducePersistentModel");this._oPersistentDataCurrentVariant=U.copy(N);break;case g.SyncReason.ResetModelData:o=this._projectRestoreData2PersistentModel4Panels(this._oPersistentDataRestore);this.initializeModel(o);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",U.copy(o));this._callControllers(this._oSettingCurrent,"reducePersistentModel");break;case g.SyncReason.ResetModelDataVariant:o=this._projectRestoreData2PersistentModel4Panels(this._oPersistentDataCurrentVariant);var h=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(o));this.initializeModel(h);this._callControllers(this._oSettingCurrent,"syncTable2TransientModel");this._callControllers(this._oSettingCurrent,"syncJsonModel2Table",h);this._callControllers(this._oSettingCurrent,"reducePersistentModel");break;default:}this.getModel().refresh();};g.prototype.initializeModel=function(n){if(!this.getModel()){this._oModel=new sap.ui.model.json.JSONModel();this._oModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);}var N=null;if(n){N=U.copy(n);}var o=N||((this.getModel().getData()&&this.getModel().getData().persistentData)?this.getModel().getData().persistentData:{});for(var t in o){if(!this._oSettingCurrent[t]){delete o[t];}}this.getModel().setData({transientData:{},persistentData:o});this._callControllers(this._oSettingCurrent,"initializeModel",this.getModel());};g.prototype._fireChangeEvent=function(r){var o={};var p=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),this._getPersistentDataCopy());var h=U.copy(this._oPersistentDataAlreadyKnown);o.changeType=this._callControllers(this._oSettingCurrent,"getChangeType",p,h);if(this.getResetToInitialTableState()){var i=U.copy(this._oPersistentDataRestore);o.changeTypeRestore=this._callControllers(this._oSettingCurrent,"getChangeType",p,i);this._bIsDirty=U.hasChangedType(o.changeTypeRestore);}else{var j=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataRestore),U.copy(this._oPersistentDataCurrentVariant));o.changeTypeVariant=this._callControllers(this._oSettingCurrent,"getChangeType",p,j);o.changeTypeRestore=o.changeTypeVariant;this._bIsDirty=U.hasChangedType(o.changeTypeRestore);}if(!U.hasChangedType(o.changeType)){return;}this._aColumnKeysOfDateType=this._oColumnHelper.getColumnKeysOfType("date");this._aColumnKeysOfTimeType=this._oColumnHelper.getColumnKeysOfType("time");this._aColumnKeysOfBooleanType=this._oColumnHelper.getColumnKeysOfType("boolean");if(r===sap.ui.comp.personalization.ResetType.ResetFull||r===sap.ui.comp.personalization.ResetType.ResetPartial){o.changeReason=r;}var k=this._callControllers(this._oSettingCurrent,"getChangeData",p,h);o.changeData=U.removeEmptyProperty(U.copy(k));U.recoverPersonalisationDateData(o.changeData,this._aColumnKeysOfDateType);U.recoverPersonalisationTimeData(o.changeData,this._aColumnKeysOfTimeType);U.recoverPersonalisationBooleanData(o.changeData,this._aColumnKeysOfBooleanType);var l=U.copy(this._oPersistentDataRestore);var m=this._callControllers(this._oSettingCurrent,"getChangeData",p,l);o.persistentData=U.removeEmptyProperty(m);U.recoverPersonalisationDateData(o.persistentData,this._aColumnKeysOfDateType);U.recoverPersonalisationTimeData(o.persistentData,this._aColumnKeysOfTimeType);U.recoverPersonalisationBooleanData(o.persistentData,this._aColumnKeysOfBooleanType);this.fireAfterP13nModelDataChange(o);this._oPersistentDataAlreadyKnown=this._callControllers(this._oSettingCurrent,"getUnionData",U.copy(this._oPersistentDataAlreadyKnown),k);};g.prototype._projectRestoreData2PersistentModel4Panels=function(p){if(!this._oDialog||q.isEmptyObject(p)){return p;}var o=this._getPersistentDataCopy();var h=this._oDialog.getPanels();h.forEach(function(i){if(p[i.getType()]){o[i.getType()]=U.copy(p[i.getType()]);}else{delete o[i.getType()];}});return o;};g.prototype._checkIgnoredColumnKeys=function(t,v){if(U.getTableType(t)===sap.ui.comp.personalization.TableType.ChartWrapper){return;}var i=U.getUnionOfAttribute(this._oSettingCurrent,"ignoreColumnKeys");i.some(function(s){if(v.indexOf(s)>-1){throw"The provided 'ignoreColumnKeys' are inconsistent. No columns specified as ignored is allowed to be visible.";}});};g.prototype._onSetVisible=function(v,s){if(v){var i=U.getUnionOfAttribute(this._oSettingCurrent,"ignoreColumnKeys");if(i.indexOf(s)>-1){throw"The provided 'ignoreColumnKeys' are inconsistent. No column specified as ignored is allowed to be visible. "+this;}}};g.prototype._onSetSummed=function(i,o){this._oSettingCurrent.columns.controller._onColumnTotal({column:o,isSummed:i});};g.prototype._removeUnsupportedNamespaces=function(){if(U.getTableBaseType(this.getTable())===sap.ui.comp.personalization.TableType.Table&&U.getTableType(this.getTable())!==sap.ui.comp.personalization.TableType.AnalyticalTable){delete this._oSettingCurrent.group;}};g.prototype._getArgumentsByType=function(A,t){var r=[],o=null;if(A&&A.length&&t){A.forEach(function(h){if(h&&h[t]&&typeof h[t]!=="function"){o={};o[t]=h[t];r.push(o);}else{r.push(h);}});}return r;};g.prototype._callControllers=function(s,m){var t=null,o=null,h=null,A=null;var r={},i=Array.prototype.slice.call(arguments,2);for(t in s){o=h=A=null;o=s[t];h=o.controller;if(!h||!o.visible||!h[m]){continue;}A=this._getArgumentsByType(i,t);if(m==="getPanel"){A.push(o.payload);}else if(m==="setIgnoreColumnKeys"){A.push(o.ignoreColumnKeys);}else if(m==="setTriggerModelChangeOnColumnInvisible"){A.push(o.triggerModelChangeOnColumnInvisible);}var R=h[m].apply(h,A);if(R!==null&&R!==undefined&&R[t]!==undefined){r[t]=R[t];}else{r[t]=R;}}return r;};g.prototype._setSizeLimit=function(t){this.getModel().setSizeLimit(this.getTable().getColumns().length+1000);};g.prototype._sanityCheck=function(n){return true;};g.prototype.exit=function(){var t;this._resumeTable(false);if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}this._callControllers(this._oSettingCurrent,"destroy");for(t in this._oSettingCurrent){this._oSettingCurrent[t]=null;}this._oSettingCurrent=null;for(t in this._oSettingOriginalTable){this._oSettingOriginalTable[t]=null;}this._oSettingOriginalTable=null;this._oSettingCurrent=null;for(t in this._oSettingOriginalChart){this._oSettingOriginalChart[t]=null;}this._oSettingOriginalChart=null;if(this.getModel()){this.getModel().destroy();this._oModel=null;}this._oPersistentDataRestore=null;this._oPersistentDataCurrentVariant=null;this._oPersistentDataAlreadyKnown=null;this._oPersistentDataBeforeOpen=null;this._oPayload=null;this._oColumnHelper=null;};g.SyncReason={NewTable:0,NewSetting:1,NewTableBinding:5,NewModelData:6,NewModelDataVariant:2,NewModelDataMixedWithVariant:7,ResetModelData:3,ResetModelDataVariant:4};return g;},true);

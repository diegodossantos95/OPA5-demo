/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/ui/fl/Utils","sap/ui/fl/changeHandler/Base","sap/ui/fl/changeHandler/JsControlTreeModifier"],function(q,U,B,J){"use strict";var A={};A.applyChange=function(c,g,p){var C=c.getDefinition();var f=function(C){var M=C.texts&&C.texts.fieldLabel&&C.texts.fieldLabel.value;var b=C.content;var d=false;if(b){d=C.content.field&&(C.content.field.selector||C.content.field.id)&&C.content.field.jsType&&C.content.field.value&&C.content.field.valueProperty;}return M&&b&&d;};var m=p.modifier;var v=p.view;if(f(C)){var o=C.content;var F=o.field.selector;var s=o.field.id;var l=C.texts.fieldLabel.value;var j=o.field.jsType;var P=o.field.valueProperty;var a=o.field.value;var e=o.field.entitySet;var i=o.field.index;var G=m.createControl("sap.ui.comp.smartform.GroupElement",p.appComponent,v,F||s);m.setProperty(G,"label",undefined);m.setProperty(G,"label",l);m.insertAggregation(g,"groupElements",G,i,v);this.addElementIntoGroupElement(m,v,G,l,j,P,a,e,i,p.appComponent);return true;}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};A.addElementIntoGroupElement=function(m,v,g,l,j,p,P,e,i,a){var V=m.createControl(j,a,v);m.bindProperty(V,p,P);m.insertAggregation(g,"elements",V,i,v,true);if(e){m.setProperty(V,"entitySet",e);}};A.completeChangeContent=function(c,s,p){var a=p.appComponent;var C=c.getDefinition();if(s.fieldLabel){B.setTextInChange(C,"fieldLabel",s.fieldLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.fieldLabel attribute required");}if(!C.content){C.content={};}if(!C.content.field){C.content.field={};}if(s.fieldValue){C.content.field.value=s.fieldValue;}else{throw new Error("oSpecificChangeInfo.fieldValue attribute required");}if(s.valueProperty){C.content.field.valueProperty=s.valueProperty;}else{throw new Error("oSpecificChangeInfo.valueProperty attribute required");}if(s.newControlId){C.content.field.selector=J.getSelector(s.newControlId,a,{index:s.index});}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsType){C.content.field.jsType=s.jsType;}else{throw new Error("oSpecificChangeInfo.jsType attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.field.index=s.index;}if(s.entitySet){C.content.field.entitySet=s.entitySet;}};return A;},true);

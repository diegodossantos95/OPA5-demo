/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/comp/library','sap/ui/core/Control','sap/suite/ui/microchart/library','sap/ui/comp/smartmicrochart/SmartMicroChartCommons','sap/m/library'],function(q,l,C,M,S,a){"use strict";var b=C.extend("sap.ui.comp.smartmicrochart.SmartRadialMicroChart",{metadata:{library:"sap.ui.comp",designTime:true,properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:"Donut"},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_chart:{type:"sap.suite.ui.microchart.RadialMicroChart",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false},freeText:{type:"sap.m.Label",group:"Misc",multiple:false}},events:{initialize:{}}}});b._CHART_TYPE=["Donut"];b.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setAggregation("_chart",new M.RadialMicroChart(),true);};b.prototype.onBeforeRendering=function(){var c=this.getAggregation("_chart");if(this.getIsResponsive()){c.setProperty("size",a.Size.Responsive,true);}else{c.setProperty("size",a.Size.Auto,true);}M._passParentContextToChild(this,c);};b.prototype.destroy=function(){S._cleanup.call(this);C.prototype.destroy.apply(this,arguments);};b.prototype.setChartType=function(){return this;};b.prototype.setEntitySet=function(e){if(this.getProperty("entitySet")!==e){this.setProperty("entitySet",e,true);S._initializeMetadata.call(this);}return this;};b.prototype.propagateProperties=function(){if(C.prototype.propagateProperties){C.prototype.propagateProperties.apply(this,arguments);}S._initializeMetadata.call(this);};b.prototype._createAndBindInnerChart=function(){this._bindProperties();S._updateAssociations.call(this);};b.prototype._bindProperties=function(){var i=this.getAggregation("_chart");if(this._oDataPointAnnotations.Value&&!this._oDataPointAnnotations.TargetValue){if(S._hasMember(this._oDataPointAnnotations.Value,"Path")){i.bindProperty("percentage",{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"});}}else if(S._hasMember(this,"_oDataPointAnnotations.TargetValue.Path")&&S._hasMember(this,"_oDataPointAnnotations.Value.Path")){i.bindProperty("total",{path:this._oDataPointAnnotations.TargetValue.Path,type:"sap.ui.model.odata.type.Decimal"});i.bindProperty("fraction",{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"});}i.bindProperty("valueColor",{parts:[this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path||"",this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path||""],formatter:S._getValueColor.bind(this)});};b.prototype.setAssociation=function(A,i,s){if(C.prototype.setAssociation){C.prototype.setAssociation.apply(this,arguments);}S._updateAssociation.call(this,A);return this;};b.prototype._getSupportedChartTypes=function(){return b._CHART_TYPE;};return b;});

sap.ui.define(["jquery.sap.global","./library","sap/ui/core/Control","./DockContainer"],function(q,l,C,D){"use strict";var a=C.extend("sap.ui.vk.DockPane",{metadata:{library:"sap.ui.vk",publicMethods:["getDomElement","setMinimumWidth","getMinimumWidth","setMinimumHeight","getMinimumHeight","setMinimumSize","close","resize","update","addTab","removeTab","bringTabToFront"],properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"auto"},height:{type:"sap.ui.core.CSSSize",defaultValue:"auto"}},events:{size:{parameters:{newSize:{type:"object"}}},close:{}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false,singularName:"content"}}},constructor:function(d,x,y,w,h,t,f){C.apply(this);if(typeof a._counter=="undefined"){a._counter=0;}this._id="DockPane_"+a._counter;a._counter++;var e=document.createElement("div");e.setAttribute("id",this._id);e.style.position="absolute";e.style.left=x+"px";e.style.top=y+"px";e.style.width=w+"px";e.style.height=h+"px";e.style.backgroundColor="darkgrey";e.style.zIndex=50;e.style.overflow="hidden";this._elem=e;this._manager=d;this._parent=null;this._movable=(f===undefined||f==false)?true:false;this._minWidth=64;this._minHeight=64;this._width=w;this._height=h;this._resizable=true;this._text=(t!=null)?t:(""+this._id);this._tabs=[];this._activeTab=this;this._tabParent=null;this._telem=[];this._tcontent=[];this._hasBorder=false;this._hasTabs=false;if(this._movable){t=document.createElement("div");t.setAttribute("id",this._id+"_title");t.style.position="absolute";t.style.left=0;t.style.top=0;t.style.width="100%";t.style.height="25px";t.style.boxSizing="border-box";t.style.padding="3px 4px";t.style.backgroundColor="black";t.style.color="white";t.style.cursor="default";t.style.userSelect="none";t.style.overflow="hidden";t.innerHTML=this._text;e.appendChild(t);this._title=t;var b=document.createElement("div");b.setAttribute("id",this._id+"_close");b.style.position="absolute";b.style.right="4px";b.style.top="4px";b.style.width="18px";b.style.height="18px";b.style.backgroundColor="red";b.style.opacity=0.5;b.style.textAlign="center";b.innerHTML="X";this._title.appendChild(b);this._btnClose=b;var c=document.createElement("div");c.setAttribute("id",this._id+"_border");c.style.position="absolute";c.style.left=0;c.style.top=0;c.style.width="100%";c.style.height="100%";c.style.boxSizing="border-box";c.style.zIndex=10;c.style.pointerEvents="none";this._border=c;var r=document.createElement("div");r.style.position="absolute";r.style.left="8px";r.style.top=0;r.style.right="8px";r.style.height="8px";r.style.cursor="ns-resize";c.appendChild(r);var g=document.createElement("div");g.style.position="absolute";g.style.left="8px";g.style.bottom=0;g.style.right="8px";g.style.height="8px";g.style.cursor="ns-resize";c.appendChild(g);var i=document.createElement("div");i.style.position="absolute";i.style.left=0;i.style.top="8px";i.style.width="8px";i.style.bottom="8px";i.style.cursor="ew-resize";c.appendChild(i);var j=document.createElement("div");j.style.position="absolute";j.style.right=0;j.style.top="8px";j.style.width="8px";j.style.bottom="8px";j.style.cursor="ew-resize";c.appendChild(j);var k=document.createElement("div");k.style.position="absolute";k.style.left=0;k.style.top=0;k.style.width="8px";k.style.height="8px";k.style.cursor="nwse-resize";c.appendChild(k);var m=document.createElement("div");m.style.position="absolute";m.style.right=0;m.style.top=0;m.style.width="8px";m.style.height="8px";m.style.cursor="nesw-resize";c.appendChild(m);var n=document.createElement("div");n.style.position="absolute";n.style.left=0;n.style.bottom=0;n.style.width="8px";n.style.height="8px";n.style.cursor="nesw-resize";c.appendChild(n);var o=document.createElement("div");o.style.position="absolute";o.style.right=0;o.style.bottom=0;o.style.width="8px";o.style.height="8px";o.style.cursor="nwse-resize";c.appendChild(o);}var p=document.createElement("div");p.setAttribute("id",this._id+"_tabbox");p.style.position="absolute";p.style.left=0;p.style.right=0;p.style.bottom=0;p.style.height="24px";p.style.overflow="hidden";this._tabBox=p;var s=document.createElement("div");s.setAttribute("id",this._id+"_content");s.style.position="absolute";s.style.left=0;s.style.top=this._movable?"25px":"0";s.style.right=0;s.style.bottom=0;s.style.boxSizing="border-box";s.style.backgroundColor=this._movable?"lightgrey":"grey";s.style.border="1px solid darkgrey";s.style.overflow="hidden";e.appendChild(s);this._content=s;this.update();d.addDockPane(this);}});a.prototype.setContent=function(c){this.setAggregation("content",c);this.renderContent();};a.prototype.renderContent=function(){if(this._manager.isRendered()){var c=this.getAggregation("content");if(c!=null){sap.ui.getCore().getRenderManager().render(c,this._content);}}};a.prototype.destroy=function(){this._manager.removeDockPane(this);};a.prototype.getDomElement=function(){return this._elem;};a.prototype.setMinimumWidth=function(w){this._minWidth=w;if(this._parent!=null){this._parent.update();}else{this.update();}};a.prototype.getMinimumWidth=function(){return this._minWidth;};a.prototype.setMinimumHeight=function(h){this._minHeight=h;if(this._parent!=null){this._parent.update();}else{this.update();}};a.prototype.getMinimumHeight=function(){return this._minHeight;};a.prototype.setMinimumSize=function(w,h){this._minWidth=w;this._minHeight=h;if(this._parent!=null){this._parent.update();}else{this.update();}};a.prototype.close=function(){if(this._parent!=null){this._manager.undock(this);}this._manager.removeDockPane(this);};a.prototype._saveSize=function(){this._floatW=this._elem.offsetWidth;this._floatH=this._elem.offsetHeight;};a.prototype._restoreSize=function(){this.resize(this._floatW,this._floatH);};a.prototype.resize=function(w,h){this._elem.style.width=w+"px";this._elem.style.height=h+"px";this._updateTabs(w);};a.prototype.update=function(){if(this._parent==null){this._elem.style.boxShadow="2px 6px 20px 3px rgba(0,0,0,0.5)";this._elem.style.borderTopLeftRadius="6px";this._elem.style.borderTopRightRadius="6px";if(this._border!=null&&!this._hasBorder){this._elem.appendChild(this._border);this._hasBorder=true;}}else{this._elem.style.boxShadow="";this._elem.style.borderRadius="0";if(this._border!=null&&this._hasBorder){this._elem.removeChild(this._border);this._hasBorder=false;}}if(this._tcontent.length>0){this._content.style.bottom="24px";this._content.style.borderBottom="0";for(var i=0;i<this._tcontent.length;i++){var t=this._tcontent[i];t.style.bottom="24px";t.style.borderBottom="0";}}else{this._content.style.bottom=0;this._content.style.borderBottom="1px solid darkgrey";}this._updateTabs();};a.prototype._updateTabs=function(_){if(this._tabs.length>0){if(!this._hasTabs){this._hasTabs=true;this._elem.appendChild(this._tabBox);}var c=this._telem.length;var w=0;if(_==undefined){_=this._tabBox.offsetWidth;}var t=(_-2)/c;for(var i=0;i<c;i++){var e=this._telem[i];var b=((i==0&&this._activeTab==this)||(i>0&&this._activeTab==this._tabs[i-1]));e.style.position="absolute";e.style.left=w+"px";e.style.top=0;if(i==c-1){t=this._tabBox.offsetWidth-w;}e.style.width=t+"px";e.style.height="24px";e.style.boxSizing="border-box";e.style.overflow="hidden";e.style.padding="0 4px";e.style.backgroundColor=b?"lightgrey":"darkgrey";e.style.border="1px solid grey";e.style.fontWeight=b?"bold":"normal";if(b){e.style.borderTop="0";}var d=(i==0)?this._content:this._tcontent[i-1];d.style.visibility=(b)?"visible":"hidden";if(b){this._title.innerHTML=e.innerHTML;}w+=t;}}else if(this._movable){if(this._hasTabs){this._hasTabs=false;this._elem.removeChild(this._tabBox);}this._content.style.visibility="visible";this._title.innerHTML=this._text;}};a.prototype.addTab=function(c){if(this._tabs.length==0){var t=document.createElement("div");t.innerHTML=this._text;this._tabBox.appendChild(t);this._telem.push(t);}else if(this._tabs.indexOf(c)>=0){return;}this._tabs.push(c);var b=document.createElement("div");b.innerHTML=c._text;this._tabBox.appendChild(b);this._telem.push(b);this._tcontent.push(c._content);this._activeTab=c;c._tabParent=this;c._elem.removeChild(c._content);this._elem.appendChild(c._content);c._saveSize();c._elem.style.display="none";var d=c._tabs.length;if(d>0){for(var i=0;i<d;i++){this._tabs.push(c._tabs[i]);c._tabBox.removeChild(c._telem[i+1]);this._tabBox.appendChild(c._telem[i+1]);this._telem.push(c._telem[i+1]);this._tcontent.push(c._tabs[i]._content);c._tabs[i]._tabParent=this;c._elem.removeChild(c._tabs[i]._content);this._elem.appendChild(c._tabs[i]._content);}c._tabs=[];c._tcontent=[];c._telem=[];}this.update();};a.prototype._removeSelfMigrate=function(){var c=this._tabs.length;if(c>0){var p=this._parent;var b=this._elem.offsetWidth,d=this._elem.offsetHeight;var n=this._tabs[0];n._elem.style.top=this._elem.offsetTop+"px";n._elem.style.left=this._elem.offsetLeft+"px";this.removeTab(n);for(var i=1;i<c;i++){var t=this._tabs[0];this.removeTab(t);n.addTab(t);}if(p!=null){if(p._left==this){p._left=n;}else if(p._right==this){p._right=n;}p._elem.removeChild(this._elem);this._manager._elem.appendChild(this._elem);this._parent=null;this._manager._elem.removeChild(n._elem);p._elem.appendChild(n._elem);n._parent=p;n._elem.style.width=b+"px";n._elem.style.height=d+"px";this._restoreSize();p.update();n.update();this.update();}}};a.prototype.removeTab=function(c){if(c==this){this._removeSelfMigrate();return;}var i=this._tabs.indexOf(c);if(i>=0){this._tabBox.removeChild(this._telem[i+1]);this._tabs.splice(i,1);this._telem.splice(i+1,1);var t=this._tcontent[i];t.style.bottom=0;t.style.borderBottom="1px solid darkgrey";c._elem.appendChild(t);c._tabParent=null;this._tcontent.splice(i,1);c._elem.style.display="inherit";c._restoreSize();if(this._tabs.length==0){this._activeTab=this;this._tabBox.removeChild(this._telem[0]);this._telem=[];}else if(i==0){this._activeTab=this;}else{this._activeTab=this._tabs[i-1];}this.update();}};a.prototype.bringTabToFront=function(c){if(c==this||this._tabs.indexOf(c)>=0){this._activeTab=c;this.update();}};return a;},true);

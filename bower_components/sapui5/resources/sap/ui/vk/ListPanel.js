/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/m/library"],function(l,C,m){"use strict";var L=C.extend("sap.ui.vk.ListPanel",{metadata:{library:"sap.ui.vk",properties:{"headerText":{type:"string",group:"Misc"},"headerIcon":{type:"sap.ui.core.URI",group:"Misc"},"expanded":{type:"boolean",group:"Misc",defaultValue:true},"expandAnimation":{type:"boolean",group:"Misc",defaultValue:true},"selectionMode":{type:"sap.m.ListMode",group:"Misc",defaultValue:sap.m.ListMode.MultiSelect}},aggregations:{"items":{type:"sap.m.ListItemBase",multiple:true,singularName:"item"},"panel":{type:"sap.m.Panel",multiple:false,visibility:"hidden"}},events:{headerIconPress:{},expand:{},selectionChange:{parameters:{listItem:{type:"sap.m.ListItemBase"},listItems:{type:"sap.m.ListItemBase[]"},selected:{type:"boolean"}}},itemPress:{parameters:{listItem:{type:"sap.m.ListItemBase"},srcControl:{type:"sap.ui.core.Control"}}}}}});L.prototype.getSelectedItem=function(){return this._oList.getSelectedItem();};L.prototype.setSelectedItem=function(o,s,f){this._oList.setSelectedItem(o,s,f);};L.prototype.getSelectedItems=function(){return this._oList.getSelectedItems();};L.prototype.init=function(){this._oList=new sap.m.ListBase({mode:this.getSelectionMode(),itemPress:this.fireItemPress.bind(this),selectionChange:this.fireSelectionChange.bind(this)});this._oPanel=new sap.m.Panel({expandable:true,expanded:true,expandAnimation:true,headerToolbar:new sap.m.Toolbar({active:true,press:this._onHeaderToolbarPress.bind(this)}),content:[this._oList],expand:this.fireExpand.bind(this)});this._oPanel.getHeaderToolbar().addStyleClass("sapUiVkLPTb");this.setAggregation("panel",this._oPanel,true);this._oHeaderIcon=null;this._oHeaderText=null;this._bHeaderToolbarChanged=true;};L.prototype.exit=function(){this._destroyControl(this._oList);this._destroyControl(this._oPanel);this._destroyControl(this._oHeaderIcon);this._destroyControl(this._oHeaderText);};L.prototype.getItems=function(){return this._oList.getItems();};L.prototype.addItem=function(o){return this._oList.addItem(o);};L.prototype.insertItem=function(o,i){return this._oList.insertItem(o,i);};L.prototype.removeItem=function(o){return this._oList.removeItem(o);};L.prototype.removeAllItems=function(){return this._oList.removeAllItems();};L.prototype.setHeaderText=function(v){if(!this._oHeaderText){this._oHeaderText=new sap.m.Title();}this._oHeaderText.setText(v);this._bHeaderToolbarChanged=true;return this.setProperty("headerText",v);};L.prototype.getExpanded=function(){return this._oPanel.getExpanded();};L.prototype.setExpanded=function(v){return this._oPanel.setExpanded(v);};L.prototype.getExpandAnimation=function(){return this._oPanel.getExpandAnimation();};L.prototype.setExpandAnimation=function(v){return this._oPanel.setExpandAnimation(v);};L.prototype.setHeaderIcon=function(v){if(!this._oHeaderIcon){this._oHeaderIcon=new sap.m.Button({press:this.fireHeaderIconPress.bind(this),type:sap.m.ButtonType.Transparent});}this._oHeaderIcon.setIcon(v);this._bHeaderToolbarChanged=true;return this.setProperty("headerIcon",v);};L.prototype.setSelectionMode=function(v){this._oList.setMode(v);return this.setProperty("selectionMode",v);};L.prototype.onBeforeRendering=function(){if(this._bHeaderToolbarChanged){var t=this._oPanel.getHeaderToolbar();t.removeAllContent();if(this._oHeaderIcon){t.addContent(this._oHeaderIcon);}if(this._oHeaderText){t.addContent(this._oHeaderText);}this._bHeaderToolbarChanged=false;}};L.prototype._destroyControl=function(c){if(c){c.destroy();c=undefined;}};L.prototype._onHeaderToolbarPress=function(e){this._oPanel.setExpanded(!this._oPanel.getExpanded());};return L;});

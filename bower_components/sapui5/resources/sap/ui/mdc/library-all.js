jQuery.sap.declare('sap.ui.mdc.library-all');if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterFieldRenderer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.FilterFieldRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.ui.core.IconPool');sap.ui.define("sap/ui/mdc/FilterFieldRenderer",['jquery.sap.global','sap/ui/core/Renderer','sap/ui/core/IconPool'],function(q,R,I){"use strict";I.insertFontFaceStyle();var F=R.extend("sap.ui.mdc.FilterFieldRenderer");F.render=function(r,c){var a={content:c.getContent(),editable:c.getEditable()};r.write("<div");r.writeControlData(c);r.addClass("sapUiMdcFilterField");r.writeClasses();r.addStyle("display","inline-block");r.addStyle("width",c.getWidth());r.writeStyles();r.write(">");if(a.content){r.renderControl(a.content);}r.write("</div>");};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterOperatorConfig')){jQuery.sap.declare('sap.ui.mdc.FilterOperatorConfig');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.FilterOperator');jQuery.sap.require('sap.ui.model.Filter');sap.ui.define("sap/ui/mdc/FilterOperatorConfig",["sap/ui/base/Object","sap/ui/model/FilterOperator","sap/ui/model/Filter"],function(B,M,F){"use strict";var a=B.extend("sap.ui.mdc.FilterOperatorConfig",{constructor:function(){B.apply(this);this.mOperators=jQuery.extend(true,{},a._mOperators);this.mTypes=jQuery.extend(true,{},a._mTypes);this.mOpsForType=jQuery.extend(true,{},a._mOpsForType);}});sap.ui.model.type.String.extend("sap.ui.model.type.Key",{});a._mTypes={"base":undefined,"string":"base","numeric":"base","date":"base","time":"base","boolean":"base","int":"numeric","float":"numeric","sap.ui.model.type.Boolean":"boolean","sap.ui.model.type.Date":"date","sap.ui.model.type.FileSize":"string","sap.ui.model.type.Float":"float","sap.ui.model.type.Integer":"int","sap.ui.model.type.String":"string","sap.ui.model.type.Time":"time","sap.ui.model.odata.type.Boolean":"boolean","sap.ui.model.odata.type.Byte":"int","sap.ui.model.odata.type.Date":"date","sap.ui.model.odata.type.DateTime":"datetime","sap.ui.model.odata.type.DateTimeOffset":"datetime","sap.ui.model.odata.type.Decimal":"float","sap.ui.model.odata.type.Double":"float","sap.ui.model.odata.type.Float":"float","sap.ui.model.odata.type.Guid":"string","sap.ui.model.odata.type.Int":"int","sap.ui.model.odata.type.Int16":"int","sap.ui.model.odata.type.Int32":"int","sap.ui.model.odata.type.Int64":"int","sap.ui.model.odata.type.Raw":"string","sap.ui.model.odata.type.SByte":"int","sap.ui.model.odata.type.Single":"int","sap.ui.model.odata.type.String":"string","sap.ui.model.odata.type.Time":"time","sap.ui.model.odata.type.TimeOfDay":"time","Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};Object.freeze(a._mTypes);a._mOpsForType={"base":{operators:["Contains","EQ","BT","StartsWith","EndsWith","LE","LT","GE","GT","NE"],defaultOperator:"EQ"},"string":{operators:["EEQ","Contains","EQ","BT","StartsWith","EndsWith","LE","LT","GE","GT","NE"],defaultOperator:"StartsWith"},"date":{operators:["EQ","BT","LE","LT","GE","GT","NE"]},"numeric":{operators:["EQ","BT","LE","LT","GE","GT","NE"]},"time":{operators:["EQ","BT","LE","LT","GE","GT"]},"boolean":{operators:["EQ","NE"]}};Object.freeze(a._mOpsForType);a._mOperators={};var m=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){m=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");});function g(k,T){var h=k+(T?"."+T:""),i;if(m.hasText(h)){i=m.getText(h);}else if(T){i=m.getText(k);}else{i=h;}return i;}a._mInstances={};a._mClasses={undefined:a};a.getFor=function(o){var k=o&&o.getId();var h=a._mInstances[k];if(!h){var i=o&&o.getMetadata();var C=a._mClasses[i&&i.getName()];while(!C){i=i.getParent();C=a._mClasses[i&&i.getName()];}h=new C();a._mInstances[k]=h;}return h;};a.registerFor=function(h,o){a._mClasses[h]=o;};a.prototype._getConfig=function(T,C){var o=this.mOpsForType[T];if(o){return o[C];}};a.prototype._findConfig=function(T,C){if(typeof T==="object"){T=T.getMetadata().getName();}var o;while(T&&!(o=this._getConfig(T,C))){T=this.getParentType(T);}return o;};a.prototype.getOperatorsForType=function(T){return this._findConfig(T,"operators");};a.prototype.getDefaultOperator=function(T){return this._findConfig(T,"defaultOperator");};a.prototype.getMatchingOperators=function(T,v){var o=this.getOperatorsForType(T);return this._getMatchingOperators(o,v);};a.prototype._getMatchingOperators=function(o,v){var r=[],O;o.some(function(h){O=this.getOperator(h);if(O&&O.test(v)){r.push(O);}}.bind(this));return r;};a.prototype.addType=function(T,h){if(this.mTypes[T]){throw new Error("Type already exists: "+T);}else{this.mTypes[T]=h;}};a.prototype.getParentType=function(T){return this.mTypes[T];};a.prototype.addOperatorsToType=function(T,o){var h=T;if(typeof h==="object"){h=h.getMetadata().getName();}var O=this.getOperatorsForType(T);if(!O){O=[];}if(!(typeof o==="string")){O=O.concat(o);}else{O.push(o);}this.mOpsForType[h]=this.mOpsForType[h]||{};this.mOpsForType[h].operators=O;};a.prototype.addOperator=function(o){a._addOperatorTo(o,this.mOperators);};a._addOperatorTo=function(o,O){var C=O;if(!o.name){jQuery.sap.log.warning("Operator configuration expects a name property");}if(!o.filterOperator&&!o.getModelFilter){jQuery.sap.log.error("Operator configuration for "+o.name+" needs a default filter operator from sap.ui.model.FilterOperator or the function getModelFilter");return;}if(!D){if(C[o.name]&&!C[o.name].custom){jQuery.sap.log.warning("Duplicate Type Configuration: "+o.name+". A default type cannot be extended or overwritten.");return;}o.custom=true;}else{jQuery.sap.log.debug("Operator Configuration for "+o.name+" defined as default configuration");}o=e(o);if(D){}O[o.name]=o;};function e(o){var i;var T=o.textKey||"operators."+o.name;o.longText=o.longText||g(T+".longText")||"";o.tokenText=o.tokenText||g(T+".tokenText")||"";if(o.tokenParse){if(o.tokenText){o.tokenParse=o.tokenParse.replace(/#tokenText#/g,o.tokenText);var C=o.valueTypes.length;for(i=0;i<C;i++){var r=o.paramTypes?o.paramTypes[i]:o.valueTypes[i];o.tokenParse=o.tokenParse.replace(new RegExp("\\$"+i,"g"),r);}o.tokenParseRegExp=new RegExp(o.tokenParse,"i");}}else if(o.tokenText){o.tokenParseRegExp=new RegExp(o.tokenText,"i");}if(o.tokenFormat){if(o.tokenText){o.tokenFormat=o.tokenFormat.replace(/\#tokenText\#/g,o.tokenText);}}else if(o.tokenText){o.tokenFormat=o.tokenText;}o.format=o.format||f.bind(o);o.parse=o.parse||p.bind(o);o.test=o.test||t.bind(o);o.getCondition=o.getCondition||d.bind(o);o.getModelFilter=o.getModelFilter||b.bind(o);o._setOwner=s.bind(o);o.getTypeText=g.bind(o);o._createLocalType=c.bind(o);o.isEmpty=o.isEmpty||_.bind(o);return o;}function s(o){this.oFilterOperatorConfig=o;return this;}function b(C){var o=this.oFilterOperatorConfig.getOperator(C.operator);return new F({path:C.fieldPath,operator:o.filterOperator,value1:C.values[0],value2:C.values[1]});}function _(C,T){var h=false;for(var i=0;i<this.valueTypes.length;i++){var v=C.values[i];if(!v){h=true;break;}}return h;}function f(V,C,T){var h=this.tokenFormat,j=this.valueTypes.length;for(var i=0;i<j;i++){var v=V[i]!==undefined&&V[i]!==null?V[i]:"";if(this.valueTypes[i]!=="self"){T=this._createLocalType(this.valueTypes[i]);}var r=T?T.formatValue(v,"string"):v;h=h.replace(new RegExp("\\$"+i,"g"),r);}return h;}function p(T,o){var h=T.match(this.tokenParseRegExp);var r;if(h){r=[];for(var i=0;i<this.valueTypes.length;i++){if(this.valueTypes[i]!=="self"){o=this._createLocalType(this.valueTypes[i]);}try{var v=o?o.parseValue(h[i+1],"string"):h[i+1];if(o){o.validateValue(v);if(o.oConstraints&&o.oConstraints.toUpperCase===true){v=v.toUpperCase?v.toUpperCase():v;}}r.push(v);}catch(j){jQuery.sap.log.warning(j.message);throw new sap.ui.base.Exception(j.message);}}}return r;}function c(T){if(!this._oType){jQuery.sap.require(T);var o=jQuery.sap.getObject(T);this._oType=new o();}return this._oType;}function t(T,o){var h=this.tokenParseRegExp.test(T);if(h&&o){var v=this.parse(T,o);h=v.length==this.valueTypes.length;}return h;}function d(T,o){if(this.test(T,o)){var v=this.parse(T,o);return{operator:this.name,values:v};}return null;}a.prototype.getOperator=function(o){var O=this.mOperators[o];return O?O._setOwner(this):undefined;};D=true;a._addOperatorTo({name:"EEQ",showInSuggest:false,filterOperator:M.EQ,tokenParse:"^==(.*)$",tokenFormat:"$1 ($0)",valueTypes:["self"],longText:"EEQ",displayFormats:{DescriptionValue:"$1 ($0)",ValueDescription:"$0 ($1)",Description:"$1",Value:"$0"},format:function(v,C,T){var h=this.tokenFormat,j=this.valueTypes.length+1,r;var k=T.oFormatOptions&&T.oFormatOptions.displayFormat?T.oFormatOptions.displayFormat:"DescriptionValue";h=this.displayFormats[k];if(!v[1]){h=this.displayFormats["Value"];j=1;}for(var i=0;i<j;i++){r=v[i]||"";h=h.replace(new RegExp("\\$"+i,"g"),r);}return h;}},a._mOperators);a._addOperatorTo({name:"EQ",filterOperator:M.EQ,tokenParse:"^=([^=].*)$",tokenFormat:"=$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"BT",filterOperator:M.BT,tokenParse:"^(.+)\\.\\.\\.(.+)$",tokenFormat:"$0...$1",valueTypes:["self","self"]},a._mOperators);a._addOperatorTo({name:"LT",filterOperator:M.LT,tokenParse:"^<(.*)$",tokenFormat:"<$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"GT",filterOperator:M.GT,tokenParse:"^>(.*)$",tokenFormat:">$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"LE",filterOperator:M.LE,tokenParse:"^<=(.*)$",tokenFormat:"<=$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"GE",filterOperator:M.GE,tokenParse:"^>=(.*)$",tokenFormat:">=$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"StartsWith",filterOperator:M.StartsWith,tokenParse:"^([^\*].*)\\*$",tokenFormat:"$0*",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"EndsWith",filterOperator:M.EndsWith,tokenParse:"^\\*(.*[^\*])$",tokenFormat:"*$0",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"Contains",filterOperator:M.Contains,tokenParse:"^\\*(.*)\\*$",tokenFormat:"*$0*",valueTypes:["self"]},a._mOperators);a._addOperatorTo({name:"NE",filterOperator:M.NE,tokenParse:"^!=(.+)$",tokenFormat:"!=$0",valueTypes:["self"],exclude:true},a._mOperators);var D=false;Object.freeze(a._mOperators);return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterToken')){jQuery.sap.declare('sap.ui.mdc.FilterToken');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.m.Token');jQuery.sap.require('sap.m.Tokenizer');sap.ui.define("sap/ui/mdc/FilterToken",['jquery.sap.global','sap/ui/base/ManagedObject','sap/m/Token','sap/m/Tokenizer'],function(q,M,T,a){"use strict";var F=T.extend("sap.ui.mdc.FilterToken",{metadata:{library:"sap.ui.mdc",properties:{changeable:{type:"boolean",defaultValue:false}},events:{tokenChanged:{parameters:{text:{type:"string"}}}}}});F.prototype.init=function(){T.prototype.init.apply(this);this.bAllowTextSelection=true;this._bEditing=false;};F.prototype.setParent=function(p){if(p instanceof a){p.bAllowTextSelection=true;}M.prototype.setParent.apply(this,arguments);};F.prototype.setText=function(v){T.prototype.setText.call(this,v,true);this.getDomRef()&&(this.getDomRef().firstChild.innerText=this.getText());return this;};F.prototype._activateInput=function(){if(!this._bEditing){var i=this.getDomRef().firstChild;i.tabIndex="0";i.focus();i.setAttribute("contenteditable","true");this._bEditing=true;this.$().addClass("sapMTokenEditing");}};F.prototype._deactivateInput=function(){this.getDomRef().firstChild.tabIndex="-1";this.focus();var i=this.getDomRef().firstChild;var t=i.innerText;if(t!==this.getText()){var o=this.getText();this.setText(this.getDomRef().firstChild.innerText);this.fireTokenChanged({text:this.getText(),oldText:o});}this._bEditing=false;i.removeAttribute("contenteditable");this.$().removeClass("sapMTokenEditing");};F.prototype._onTokenPress=function(e){var s=this.getSelected(),c=e.ctrlKey||e.metaKey,S=e.shiftKey;T.prototype._onTokenPress.apply(this,arguments);if(s&&this.getChangeable()&&!c&&!S){this._activateInput();}};F.prototype.onsapfocusleave=function(e){if(this._bEditing){this._deactivateInput();}else{this._callBaseEventHandler(e,"onsapfocusleave");}};F.prototype.onsapenter=function(e){if(this._bEditing){this._deactivateInput();}else{this._callBaseEventHandler(e,"onsapfocusleave");}};F.prototype.oninput=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"oninput");}};F.prototype.onkeydown=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();if(e.keyCode===q.sap.KeyCodes.F2){this._deactivateInput();}}else{if(this.getChangeable()&&e.keyCode===q.sap.KeyCodes.F2){this._activateInput();}this._callBaseEventHandler(e,"onkeydown");}};F.prototype.onsapspace=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"onsapspace");}};F.prototype.onsapescape=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){this._deactivateInput();e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"onsapescape");}};F.prototype.onkeyup=function(e){if(this._bEditing||e.target===this.getDomRef().firstChild){e.stopImmediatePropagation();}else{this._callBaseEventHandler(e,"onkeyup");}};F.prototype._callBaseEventHandler=function(e,n){var p=this.getMetadata().getParent();if(p){p=p.getClass();if(p.prototype[n]){p.prototype[n].apply(this,[e]);}}};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterTokenRenderer')){jQuery.sap.declare('sap.ui.mdc.FilterTokenRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ui/mdc/FilterTokenRenderer",['jquery.sap.global','sap/ui/core/Renderer'],function(q,R){"use strict";var F=R.extend("sap.ui.mdc.FilterTokenRenderer");F.render=function(r,c){r.write("<div tabindex=\"-1\"");r.writeControlData(c);r.addClass("sapMToken");r.addClass("sapMFilterToken");r.writeAttribute("role","listitem");r.writeAttribute("aria-readonly",!c.getEditable());r.writeAttribute("aria-selected",c.getSelected());if(c.getSelected()){r.addClass("sapMTokenSelected");}if(!c.getEditable()){r.addClass("sapMTokenReadOnly");}r.writeClasses();var t=c.getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}var a={};a.describedby={value:c._sAriaTokenLabelId,append:true};if(c.getEditable()){a.describedby={value:c._sAriaTokenDeletableId,append:true};}r.writeAccessibilityState(c,a);r.write(">");this._renderInnerControl(r,c);if(c.getEditable()){r.renderControl(c._deleteIcon);}r.write("</div>");};F._renderInnerControl=function(r,c){var t=c.getTextDirection();r.write("<div");r.addClass("sapMTokenText");r.addClass("sapMFilterTokenText");r.writeStyles();r.writeClasses();if(t!==sap.ui.core.TextDirection.Inherit){r.writeAttribute("dir",t.toLowerCase());}r.writeAttribute("tabIndex","-1");r.write(">");r.writeEscaped(c.getText());r.write("</div>");};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.FixedValueListProvider')){jQuery.sap.declare('sap.ui.mdc.FixedValueListProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/FixedValueListProvider",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var F=B.extend("sap.ui.mdc.FixedValueListProvider",{constructor:function(p){B.apply(this);this._bShowAll=true;this._bShowHint=false;if(p){this._fInit=p.init;this._fSuggest=p.suggest;this._fSelect=p.select;this._bShowAll=p.enableShowAll!==undefined?p.enableShowAll:true;this._bShowHint=p.showHint!==undefined?p.showHint:false;this._maxWidth=p.maxWidth;this._bEnableFilterSuggest=p.enableFilterSuggest;this._keyPath=p.keyPath;this._descriptionPath=p.descriptionPath;if(p.control){this.associateFilterField(p.control);}}}});F.prototype.destroy=function(){this._oFilterField=null;this._oInput=null;this._oTable=null;};F.prototype.getTable=function(){return this._oTable;};F.prototype.setKeyPath=function(k){this._keyPath=k;};F.prototype.setDescriptionPath=function(d){this._descriptionPath=d;};F.prototype.setTable=function(t){this._oTable=t;var m=this._oFilterField.getAggregation("_input");m.removeAllSuggestionColumns();m.removeAllSuggestionRows();if(t){var b=t.getBindingInfo("items");var c=t.getColumns();for(var i=0;i<c.length;i++){var C=c[i].clone();m.addSuggestionColumn(C);}m.setMaxSuggestionWidth(this._maxWidth?this._maxWidth:(c.length*8+2)+"em");m.setModel(t.getModel());m.bindAggregation("suggestionRows",{path:b.path,template:b.template,parameters:b.parameters});}else{m.bindAggregation("suggestionRows",null);}};F.prototype.associateFilterField=function(f){this._oFilterField=f;this._oInput=f.getAggregation("_input");if(!(this._oInput instanceof sap.m.MultiInput)){q.sap.log.error("mdc:FixedValueListProvider","associateFilterField for "+this._oInput.getId()+" not possible!");return;}this._oInput.setShowSuggestion(true);this._oInput.setEnableSuggestionsHighlighting(false);this._oInput.setFilterSuggests(this._bEnableFilterSuggest);this._oInput.setShowTableSuggestionValueHelp(false);if(this._bShowHint){this._oInput.setPlaceholder("press space to get help");}this._oInput._getValueHelpIcon=function(){var _=sap.m.MultiInput.prototype._getValueHelpIcon.apply(this,arguments);if(_){_.setSrc(sap.ui.core.IconPool.getIconURI("slim-arrow-down"));}return _;};this._oInput.attachValueHelpRequest(function(e){var i=e.oSource;i._$input.val(" ");i._triggerSuggest(" ");});this._oInput.attachSuggest(function(e){if(this._fInit&&!this.getTable()){this._fInit(this);}if(this._fSuggest){this._fSuggest(this,e);}}.bind(this));this._oInput.setFilterFunction(function(v,i){var s=(v.lastIndexOf(" ")==v.length-1)&&this._bShowAll;v=v.trim();if(s){return true;}return sap.m.Input._DEFAULTFILTER_TABULAR(v,i);}.bind(this));this._oInput.addValidator(function(d){var t=d.text,r=d.suggestionObject,s=this._oInput,b=this._oFilterField.getBinding("conditions"),T=this._oFilterField._getDataType(),a=T.getMetadata().getName(),o,c,e=this._oFilterField.getFieldPath(),D,k,g,v;if(r){if(this._fSelect){if(this._fSelect(this,d)){return null;}}var h=r.getBindingContext();D=h.getObject();k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;g=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;o=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(o&&o.test(v,T)){c=b.getModel().addCondition(b.getModel().createItemCondition(e,k,g));s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});}}else{q.sap.log.info("mdc:FixedValueListProvider","validator check if one suggestionRow exist for "+t);if(s._getIsSuggestionPopupOpen&&s._getIsSuggestionPopupOpen()){var S=s.getSuggestionRows();var n=0,i=-1;S.some(function(I,j){if(I.getVisible()){n++;i=j;}return n>=2;});if(n===1){D=S[i].getBindingContext().getObject();if(this._fSelect){d.suggestionObject=S[i];if(this._fSelect(this,d)){return null;}}k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;g=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;o=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(o&&o.test(v,T)){c=b.getModel().addCondition(b.getModel().createItemCondition(e,k,g));s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});return null;}}}var O=this._oFilterField.getFilterOperatorConfig().getMatchingOperators(a,t);if(O.length!==0){o=O[0];c=o.getCondition(t,T);if(c){c.fieldPath=e;b.getModel().addCondition(c);s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});return null;}}s.setValue("");q.sap.delayedCall(100,this,function(){var v="=="+t;var o=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(o&&o.test(v,T)){c=b.getModel().addCondition(b.getModel().createItemCondition(e,t,t));this._oFilterField.fireChange({value:c,type:"added",valid:true});}});}return null;}.bind(this));};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.ODataSuggestProvider')){jQuery.sap.declare('sap.ui.mdc.ODataSuggestProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/ODataSuggestProvider",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var O=B.extend("sap.ui.mdc.ODataSuggestProvider",{constructor:function(p){B.apply(this);this._bShowAll=true;this._bShowHint=false;if(p){this._fInit=p.init;this._fSuggest=p.suggest;this._fSelect=p.select;this._bShowAll=p.enableShowAll!==undefined?p.enableShowAll:true;this._bShowHint=p.showHint!==undefined?p.showHint:false;this._maxWidth=p.maxWidth;this._bEnableFilterSuggest=p.enableFilterSuggest;this._keyPath=p.keyPath;this._descriptionPath=p.descriptionPath;if(p.control){this.associateFilterField(p.control);}}}});O.prototype.destroy=function(){this._oFilterField=null;this._oInput=null;this._oTable=null;};O.prototype.getTable=function(){return this._oTable;};O.prototype.setKeyPath=function(k){this._keyPath=k;};O.prototype.setDescriptionPath=function(d){this._descriptionPath=d;};O.prototype.setTable=function(t){this._oTable=t;var m=this._oFilterField.getAggregation("_input");m.removeAllSuggestionColumns();m.removeAllSuggestionRows();if(t){var b=t.getBindingInfo("items");var c=t.getColumns();for(var i=0;i<c.length;i++){var C=c[i].clone();m.addSuggestionColumn(C);}m.setMaxSuggestionWidth(this._maxWidth?this._maxWidth:(c.length*8+2)+"em");m.setModel(t.getModel());m.bindAggregation("suggestionRows",{path:b.path,template:b.template,parameters:b.parameters});}else{m.bindAggregation("suggestionRows",null);}};O.prototype.associateFilterField=function(f){this._oFilterField=f;this._oInput=f.getAggregation("_input");if(!(this._oInput instanceof sap.m.MultiInput)){q.sap.log.error("mdc:ODataSuggestProvider","associateFilterField for "+this._oInput.getId()+" not possible!");return;}this._oInput.setShowSuggestion(true);this._oInput.setEnableSuggestionsHighlighting(false);this._oInput.setFilterSuggests(this._bEnableFilterSuggest);this._oInput.setShowTableSuggestionValueHelp(false);if(this._bShowHint){this._oInput.setPlaceholder("press space to get help");}this._oInput.attachSuggest(function(e){if(this._fInit&&!this.getTable()){this._fInit(this);}if(this._fSuggest){this._fSuggest(this,e);}}.bind(this));this._oInput.setFilterFunction(function(v,i){var s=(v.lastIndexOf(" ")==v.length-1)&&this._bShowAll;v=v.trim();if(s){return true;}return sap.m.Input._DEFAULTFILTER_TABULAR(v,i);}.bind(this));this._oInput.addValidator(function(d){var t=d.text,r=d.suggestionObject,s=this._oInput,b=this._oFilterField.getBinding("conditions"),T=this._oFilterField._getDataType(),a=T.getMetadata().getName(),o,c,F=this._oFilterField.getFieldPath();var D;var k,e,v;if(r){if(this._fSelect){if(this._fSelect(this,d)){return null;}}var g=r.getBindingContext();D=g.getObject();k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;e=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;q.sap.log.info("mdc:ODataSuggestProvider","validator suggestionObject handled sValue "+v);o=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(o&&o.test(v,T)){c=b.getModel().addCondition(b.getModel().createItemCondition(F,k,e));s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});}}else{q.sap.log.info("mdc:ODataSuggestProvider","validator check if one suggestionRow exist for "+t);if(s._getIsSuggestionPopupOpen&&s._getIsSuggestionPopupOpen()){var S=s.getSuggestionRows();var n=0,i=-1;S.some(function(I,j){if(I.getVisible()){n++;i=j;}return n>=2;});if(n===1){D=S[i].getBindingContext().getObject();if(this._fSelect){d.suggestionObject=S[i];if(this._fSelect(this,d)){return null;}}k=this._keyPath&&D[this._keyPath]?D[this._keyPath]:null;e=this._descriptionPath&&D[this._descriptionPath]?D[this._descriptionPath]:null;v="=="+k;o=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(o&&o.test(v,T)){c=b.getModel().addCondition(b.getModel().createItemCondition(F,k,e));s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});return null;}}}q.sap.log.info("mdc:ODataSuggestProvider","validator text handled "+t);var h=this._oFilterField.getFilterOperatorConfig().getMatchingOperators(a,t);if(h.length!==0){o=h[0];c=o.getCondition(t,T);if(c){c.fieldPath=F;b.getModel().addCondition(c);s.setValue("");this._oFilterField.fireChange({value:c,type:"added",valid:true});return null;}}s.setValue("");q.sap.delayedCall(100,this,function(){var v="=="+t;q.sap.log.info("mdc:ODataSuggestProvider","validator EEQ text handling "+v);var o=this._oFilterField.getFilterOperatorConfig().getOperator("EEQ");if(o&&o.test(v,T)){c=b.getModel().addCondition(b.getModel().createItemCondition(F,t,t));this._oFilterField.fireChange({value:c,type:"added",valid:true});}});}return null;}.bind(this));};return O;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.OperatorSuggestProvider')){jQuery.sap.declare('sap.ui.mdc.OperatorSuggestProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/OperatorSuggestProvider",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var O=B.extend("sap.ui.mdc.OperatorSuggestProvider",{constructor:function(p){B.apply(this);this._bShowAll=true;this._bShowHint=false;if(p){this._bShowAll=p.enableShowAll!==undefined?p.enableShowAll:true;this._bShowHint=p.showHint!==undefined?p.showHint:false;if(p.control){this.associateFilterField(p.control);}}}});O.prototype.destroy=function(){this._oFilterField=null;this._oInput=null;};O.prototype.associateFilterField=function(f){this._oFilterField=f;this._oInput=f.getAggregation("_input");if(!(this._oInput instanceof sap.m.MultiInput)){q.sap.log.error("mdc:OperatorSuggestProvider","associateFilterField for "+this._oInput.getId()+" not possible!");return;}this._oInput.setShowSuggestion(true);this._oInput.setFilterSuggests(true);this._oInput.setEnableSuggestionsHighlighting(false);this._oInput.setMaxLength(0);this._oInput.setMaxSuggestionWidth("auto");if(this._bShowHint){this._oInput.setPlaceholder("press space to get help");}this._aOperators=[];this._oInput.bindAggregation("suggestionItems",{path:"suggest>/",template:new sap.ui.core.ListItem({key:"{suggest>key}",text:"{suggest>text}",additionalText:"{suggest>additionalText}"}),templateShareable:false});this._oInput.attachSuggest(function(e){if(this._aOperators.length===0){var o=this._oFilterField.getFilterOperatorConfig();var a=o.getOperatorsForType(this._oFilterField._getDataType().getMetadata().getName());a.forEach(function(b){var c=o.getOperator(b);if(c.showInSuggest!==undefined&&c.showInSuggest==false){return;}var t=c.textKey||"operators."+c.name+".longText";var T=c.getTypeText(t,this._oFilterField._getDataType().getName().toLowerCase());if(T===t){T=c.longText;}this._aOperators.push({key:b,additionalText:T});},this);var s=new sap.ui.model.json.JSONModel();s.setData(this._aOperators);this._oInput.setModel(s,"suggest");}}.bind(this));this._oInput.addValidator(function(d){});this._oInput.setFilterFunction(function(v,i){var k=i.getKey();var t=this._oFilterField._getDataType();var a=t.getMetadata().getName();var s=true;var e;v=v.trim();var o=this._oFilterField.getFilterOperatorConfig();var b=o.getMatchingOperators(a,v);if(b.length!==0){s=false;}var c=o.getOperator(k);if(c){if(s&&this._bShowAll){var d=v,g="";if(d===""){if(t.getName()==="Date"){d=new Date();}else if(t.getName()==="Integer"){d=123;}else if(t.getName()==="Float"){d=123.45;}else if(t.getName()==="Boolean"){d=true;}else{d="abc";}}if(g===""){if(t.getName()==="Date"){g=new Date();if(typeof d==="string"){g.setFullYear(g.getFullYear()+1);g=t.formatValue(g,"string");}else{g.setFullYear(d.getFullYear()+1);}}else if(t.getName()==="Integer"){g=d+1000;}else if(t.getName()==="Float"){g=d+1000;}else if(t.getName()==="Boolean"){g=false;}else{g="xyz";}}try{e=c.format([d,g],null,typeof d==="string"?null:t);}catch(h){e=c.format([]);}i.setText(e);return true;}if(c.test(v,t)){var V=c.parse(v,t);e=c.format(V,null,t);i.setText(e);return true;}return false;}else{return false;}}.bind(this));};return O;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.ControlSelector')){jQuery.sap.declare('sap.ui.mdc.experimental.ControlSelector');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');sap.ui.define("sap/ui/mdc/experimental/ControlSelector",['jquery.sap.global','sap/ui/core/Control'],function(q,C){"use strict";var a=C.extend("sap.ui.mdc.experimental.ControlSelector",{constructor:function(){C.apply(this,arguments);},metadata:{properties:{selectedIndex:{type:"int",defaultValue:-1},defaultIndex:{type:"int",defaultValue:0},renderRoot:{type:"boolean",defaultValue:false},reuseControls:{type:"boolean",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true},_current:{type:"sap.ui.core.Control",multiple:false,hidden:true}},associations:{use:{type:"sap.ui.mdc.ControlSelector",multiple:false}},defaultAggregation:"content"},renderer:function(r,o){var d=o.getCurrentContent(),R=o.getRenderRoot();if(!R&&d&&d.getVisible()){var D=o.getDomRef();if(q.sap.log.isLoggable(q.sap.log.Level.DEBUG)&&D){r.write("<!-- sap.ui.mdc.experimental.ControlSelector with id='"+o.getId()+"' and renderRoot=false, used old id='"+D.id+"' for rerendering -->");if(D.previousSibling&&D.previousSibling.nodeType===8){D.previousSibling.parentNode.removeChild(D.previousSibling);}}if(D){D.parentNode.removeChild(D);}r.renderControl(d);o._sOldId=d.getId();}else{r.write("<div ");if(!R){r.write(" style=\"display:none\"");}r.writeControlData(o);r.write(">");if(R){r.renderControl(d);}r.write("</div>");}}});var b=sap.ui.getCore().byId;var c=-1;a.prototype.init=function(){this._mClones=null;this._sOldId=null;this._oFree={};};a.prototype._setCurrent=function(o){this.setAggregation("_current",o);};a.prototype.getDomRef=function(){var d=q.sap.domById(this.getId());if(d||this.getRenderRoot()){return d;}else if(this._sOldId){return q.sap.domById(this._sOldId);}return null;};a.prototype._setTemplate=function(t,i){this.oTemplate=t;if(!this.getAggregation("_current")){var o=this.oTemplate._getCurrent(i);if(o){this._setCurrent(o.clone(this.getId()+"-content"));this.setProperty("selectedIndex",i,true);}else{this.oTemplate._unregisterClone(this);this.destroyContent();}}};a.prototype.validateAggregation=function(n,o){var r=C.prototype.validateAggregation.apply(this,arguments);if(n==="content"&&o instanceof a){throw new Error("sap.ui.mdc.experimental.ControlSelector cannot be used as content of another sap.ui.mdc.experimental.ControlSelector");}return r;};a.prototype._getPoolIndex=function(v){if(!this.oTemplate){return 0;}var d=this.oTemplate.getContent();if(!d||v<0||v>=d.length-1){v=0;}return v;};a.prototype._getCurrentInstance=function(i){var p=this._getPoolIndex(i),o=null;if(this.oTemplate.getReuseControls()&&this.oTemplate._oFree[p]&&this.oTemplate._oFree[p].length){o=this.oTemplate._oFree[p].pop();}else{var d=this.oTemplate._getCurrent(i);if(d){o=d.clone(this.getId()+"-"+c+"-content");}c++;}return o;};a.prototype.setSelectedIndex=function(i){var o=this.getSelectedIndex();this.setProperty("selectedIndex",i,true);if(o!=i){if(this.oTemplate){var d=this.getAggregation("_current");if(d){if(this.oTemplate.getReuseControls()){var p=this._getPoolIndex(o);if(!this.oTemplate._oFree[p]){this.oTemplate._oFree[p]=[];}this.oTemplate._oFree[p].push(d);}else{d.destroy("KeepDom");}}var e=this._getCurrentInstance(i);if(e){this._setCurrent(e);}}else{if(this._mClones){for(var n in this._mClones){b(n).setSelectedIndex(i);}}else{this.invalidate();}}}return this;};a.prototype._registerClone=function(i){if(!this._mClones){this._mClones={};this._attachModifyAggregation("content",this._updateClones,this);}this._mClones[i.getId()]=null;};a.prototype._unregisterClone=function(i){if(this._mClones){if(typeof i==="string"){delete this._mClones[i];}else if(i instanceof C){delete this._mClones[i.getId()];}if(Object.keys(this._mClones).length===0){this._detachModifyAggregation("content",this._updateClones,this);this._mClones=null;}}};a.prototype._updateClones=function(){if(this._mClones){for(var n in this._mClones){var o=b(n);if(o){o.destroyContent();o._setTemplate(this,o.getSelectedIndex());}else{this._unregisterClone(n);}}}};a.prototype.clone=function(i){var o;if(!this.oTemplate){o=C.prototype.clone.apply(this,[arguments[0],arguments[1],{cloneChildren:false,cloneBindings:true}]);o._setTemplate(this,this.getSelectedIndex());this._registerClone(o);return o;}else{o=C.prototype.clone.apply(this,arguments);o._setTemplate(this.oTemplate,this.getSelectedIndex());this.oTemplate._registerClone(o);return o;}};a.prototype.getCurrentContent=function(){if(this.oTemplate){return this.getAggregation("_current");}else{return this._getCurrent(this.getSelectedIndex());}};a.prototype.getContent=function(){if(this.oTemplate){return this.getAggregation("_current");}return this.getAggregation("content");};a.prototype._getCurrent=function(i){var d=this.getAggregation("content");if(d&&(i<0||i>=d.length)){q.sap.log.debug("Changing index of ControlSelector to defaultIndex: current is "+i);var D=this.getDefaultIndex();if(D<0||D>=d.length){q.sap.log.debug("Changing index of ControlSelector to 0: current is "+i);i=0;}else{i=D;}}if(d&&d[i]){return d[i];}return null;};a.prototype.setUse=function(i){var d=this.getAggregation("content");if(d&&d.length>0){q.sap.log.warning("Content is ignored for "+this.getId()+" because association 'use' is set to reference another ControlSelector instance.");this.destroyAggregation("content");}var u=b(i);if(!u){q.sap.log.warning("ControlSelector with id "+i+" is not available.");return;}if(!(u instanceof a)){q.sap.log.warning("Control with id "+i+" is not a ControlSelector.");return;}this.setAssociation("use",i);this.oTemplate=u;this._setTemplate(this.oTemplate,this.getSelectedIndex());this.oTemplate._registerClone(this);};a.prototype.destroy=function(){if(this._mClones){for(var n in this._mClones){var o=b(n);if(o){o.destroy();}}}else if(this.oTemplate){this.oTemplate._unregisterClone(this);}C.prototype.destroy.apply(this,arguments);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.DataObjectMetadata')){jQuery.sap.declare('sap.ui.mdc.experimental.DataObjectMetadata');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.DataType');jQuery.sap.require('sap.ui.base.Metadata');sap.ui.define("sap/ui/mdc/experimental/DataObjectMetadata",['jquery.sap.global','sap/ui/base/DataType','sap/ui/base/Metadata'],function(q,D,M){"use strict";var a=function(C,o){M.apply(this,arguments);};a.prototype=Object.create(M.prototype);var h=Object.prototype.hasOwnProperty;function c(n){return n.charAt(0).toUpperCase()+n.slice(1);}function b(f,n){return function(){q.sap.log.warning("Usage of deprecated feature: "+n);return f.apply(this,arguments);};}var K={SPECIAL_SETTING:-1,PROPERTY:0,EVENT:5};function S(C,n,i){i=typeof i!=='object'?{type:i}:i;this.name=n;this.type=i.type||'any';this.visibility=i.visibility||'public';this._oParent=C;this._sUID="special:"+n;this._iKind=K.SPECIAL_SETTING;}function P(C,n,i){i=typeof i!=='object'?{type:i}:i;this.name=n;this.type=i.type||'string';this.group=i.group||'Misc';this.defaultValue=i.defaultValue!==null?i.defaultValue:null;this.sGetter="get"+this.name.substring(0,1).toUpperCase()+this.name.substring(1);this.mandatory=!!i.mandatory;this.visibility='private';this._oParent=C;this._sUID=n;this._iKind=K.PROPERTY;this._oType=null;}P.prototype.generate=function(d){var t=this;d(t.name,function(){return this.getProperty(t);},function(v){return this.setProperty(t,v);});};P.prototype.getType=function(){return this._oType||(this._oType=D.getType(this.type));};function E(C,n,i){this.name=n;this.allowPreventDefault=i.allowPreventDefault||false;this.deprecated=i.deprecated||false;this.visibility='public';this.allowPreventDefault=!!i.allowPreventDefault;this.enableEventBubbling=!!i.enableEventBubbling;this._oParent=C;this._sUID='event:'+n;this._iKind=K.EVENT;var N=c(n);this._sMutator='attach'+N;this._sDetachMutator='detach'+N;this._sTrigger='fire'+N;}E.prototype.generate=function(e){var t=this,n=t.name,g=t.allowPreventDefault,i=t.enableEventBubbling;e(t._sMutator,function(d,f,o){this.attachEvent(n,d,f,o);return this;},t);e(t._sDetachMutator,function(f,o){this.detachEvent(n,f,o);return this;});e(t._sTrigger,function(p){return this.fireEvent(n,p,g,i);});};E.prototype.attach=function(i,d,f,l){return i[this._sMutator](d,f,l);};E.prototype.detach=function(i,f,l){return i[this._sDetachMutator](f,l);};E.prototype.fire=function(i,p,d,e){return i[this._sTrigger](p,d,e);};a.prototype.metaFactorySpecialSetting=S;a.prototype.metaFactoryProperty=P;a.prototype.metaFactoryEvent=E;a.prototype.applySettings=function(C){var t=this,s=C.metadata;M.prototype.applySettings.call(this,C);function n(i,F){var R={},N;if(i){for(N in i){if(h.call(i,N)){R[N]=new F(t,N,i[N]);}}}return R;}var r=/([a-z][^.]*(?:\.[a-z][^.]*)*)\./;function d(N){var m=r.exec(N);return(m&&m[1])||"";}this._sLibraryName=s.library||d(this.getName());this._mSpecialSettings=n(s.specialSettings,this.metaFactorySpecialSetting);this._mProperties=n(s.properties,this.metaFactoryProperty);this._mEvents=n(s.events,this.metaFactoryEvent);if(C.metadata.__version>1.0){this.generateAccessors();}};a.prototype.afterApplySettings=function(){M.prototype.afterApplySettings.call(this);var p=this.getParent();if(p&&p instanceof a){this._mAllEvents=q.extend({},p._mAllEvents,this._mEvents);this._mAllProperties=q.extend({},p._mAllProperties,this._mProperties);this._mAllSpecialSettings=q.extend({},p._mAllSpecialSettings,this._mSpecialSettings);}else{this._mAllEvents=this._mEvents;this._mAllProperties=this._mProperties;this._mAllSpecialSettings=this._mSpecialSettings;}};a.Kind=K;a.prototype.getLibraryName=function(){return this._sLibraryName;};a.prototype.addProperty=function(n,i){var p=this._mProperties[n]=new P(this,n,i);if(!this._mAllProperties[n]){this._mAllProperties[n]=p;}};a.prototype.hasProperty=function(n){return!!this._mAllProperties[n];};a.prototype.getProperty=function(n){var p=this._mAllProperties[n];return typeof p==='object'?p:undefined;};a.prototype.getProperties=function(){return this._mProperties;};a.prototype.getAllProperties=function(){return this._mAllProperties;};a.prototype.getPropertyLikeSetting=function(n){var p=this._mAllProperties[n];if(typeof p==='object'){return p;}p=this._mAllAggregations[n];return(typeof p==='object'&&p.altTypes&&p.altTypes.length>0)?p:undefined;};a.prototype.hasEvent=function(n){return!!this._mAllEvents[n];};a.prototype.getEvent=function(n){var e=this._mAllEvents[n];return typeof e==='object'?e:undefined;};a.prototype.getEvents=function(){return this._mEvents;};a.prototype.getAllEvents=function(){return this._mAllEvents;};a.prototype.addSpecialSetting=function(n,i){var s=new S(this,n,i);this._mSpecialSettings[n]=s;if(!this._mAllSpecialSettings[n]){this._mAllSpecialSettings[n]=s;}};a.prototype.hasSpecialSetting=function(n){return!!this._mAllSpecialSettings[n];};a.prototype.getPropertyDefaults=function(){var d=this._mDefaults,t;if(d){return d;}if(this.getParent()instanceof a){d=q.sap.newObject(this.getParent().getPropertyDefaults());}else{d={};}for(var s in this._mProperties){if(this._mProperties[s].defaultValue!==null){d[s]=this._mProperties[s].defaultValue;}else{t=D.getType(this._mProperties[s].type);if(t instanceof D){d[s]=t.getDefaultValue();}}}this._mDefaults=d;return d;};a.prototype.createPropertyBag=function(){if(!this._fnPropertyBagFactory){this._fnPropertyBagFactory=q.sap.factory(this.getPropertyDefaults());}return new(this._fnPropertyBagFactory)();};a.prototype.getJSONKeys=function(){if(this._mJSONKeys){return this._mJSONKeys;}var A={},j={};function d(m){var n,i,p;for(n in m){i=m[n];p=A[n];if(!p||i._iKind<p._iKind){A[n]=j[n]=i;}j[i._sUID]=i;}}d(this._mAllSpecialSettings);d(this.getAllProperties());d(this.getAllEvents());this._mJSONKeys=j;this._mAllSettings=A;return this._mJSONKeys;};a.prototype.getAllSettings=function(){if(!this._mAllSettings){this.getJSONKeys();}return this._mAllSettings;};a.prototype.generateAccessors=function(){var p=this.getClass().prototype,d=this.getName()+".",m=this._aPublicMethods,n;function e(g,i,s){if(!p.hasOwnProperty(g)){Object.defineProperty(p,g,{get:i,set:s});}}function f(g,i,j){if(!p[g]){p[g]=(j&&j.deprecated)?b(i,d+j.name):i;}m.push(g);}for(n in this._mProperties){this._mProperties[n].generate(e);}for(n in this._mEvents){this._mEvents[n].generate(f);}};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.FieldHelpBase')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.FieldHelpBase');jQuery.sap.require('sap.ui.core.Element');jQuery.sap.require('sap.m.Popover');sap.ui.define("sap/ui/mdc/experimental/FieldHelpBase",['sap/ui/core/Element','sap/m/Popover'],function(E,P){"use strict";var F=E.extend("sap.ui.mdc.experimental.FieldHelpBase",{metadata:{library:"sap.ui.mdc",properties:{selectedKey:{type:"string",defaultValue:""},filterValue:{type:"string",defaultValue:""}},aggregations:{_popover:{type:"sap.m.Popover",multiple:false,visibility:"hidden"}},events:{select:{parameters:{value:{type:"any"},additionalValue:{type:"any"},key:{type:"string"}}},navigate:{parameters:{value:{type:"any"},additionalValue:{type:"any"},key:{type:"string"}}},dataUpdate:{}}}});F.prototype.init=function(){};F.prototype.exit=function(){};F.prototype.setSelectedKey=function(k){this.setProperty("selectedKey",k,true);};F.prototype.setFilterValue=function(f){this.setProperty("filterValue",f,true);};F.prototype.open=function(){var p=this._getPopover();var f=this.getParent();if(f&&!p.isOpen()){var w=f.$().outerWidth();p.setContentMinWidth(w+"px");p.openBy(f);}};F.prototype.close=function(){var p=this.getAggregation("_popover");if(p){p.close();}};F.prototype.toggleOpen=function(){var p=this._getPopover();if(p.isOpen()){this.close();}else{this.open();}};F.prototype._createPopover=function(){var p=new sap.m.Popover(this.getId()+"-pop",{placement:sap.m.PlacementType.Bottom,showHeader:false,showArrow:false,afterOpen:this._handleAfterOpen.bind(this)});this.setAggregation("_popover",p,true);return p;};F.prototype._getPopover=function(){var p=this.getAggregation("_popover");if(!p){p=this._createPopover();}return p;};F.prototype._handleAfterOpen=function(){};F.prototype.openByTyping=function(){return false;};F.prototype.navigate=function(s){};F.prototype.getTextforKey=function(k){return"";};F.prototype._setContent=function(c){var p=this._getPopover();p.removeAllContent();p.addContent(c);return this;};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.FieldRenderer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.FieldRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('sap.ui.core.ValueState');sap.ui.define("sap/ui/mdc/experimental/FieldRenderer",['jquery.sap.global','sap/ui/core/Renderer','sap/ui/core/IconPool','sap/ui/core/ValueState'],function(q,R,I,V){"use strict";I.insertFontFaceStyle();var F=R.extend("sap.ui.mdc.experimental.FieldRenderer");F.render=function(r,f){var c={content:f._getContent(),editMode:f.getEditMode(),width:f.getWidth(),valueState:f.getValueState()};r.write("<div");r.writeControlData(f);r.addClass("sapUiMdcField");if(c.width){if(c.width==="content"){r.addStyle("width","auto");}else{r.addStyle("width",c.width);}}r.writeStyles();r.writeClasses();r.write(">");if(c.content){r.renderControl(c.content);}r.write("</div>");};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.ListFieldHelp')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.ListFieldHelp');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.m.List');jQuery.sap.require('sap.m.DisplayListItem');sap.ui.define("sap/ui/mdc/experimental/ListFieldHelp",['sap/ui/mdc/experimental/FieldHelpBase','sap/ui/model/base/ManagedObjectModel','sap/m/List','sap/m/DisplayListItem'],function(F,M,L,D){"use strict";var a=F.extend("sap.ui.mdc.experimental.ListFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{items:{type:"sap.ui.core.ListItem",multiple:true,singularName:"item"}},defaultAggregation:"items",events:{}}});a.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oManagedObjectModel=new M(this);};a.prototype.exit=function(){F.prototype.exit.apply(this,arguments);this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;};a.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);var P=this.getParent();if(P){p.setInitialFocus(P);}var i=new D({label:"{$field>text}",value:"{$field>additionalText}"});var f=new sap.ui.model.Filter("text",c.bind(this));this._oList=new L(this.getId()+"-List",{width:"100%",showNoData:false,mode:sap.m.ListMode.SingleSelectMaster,rememberSelections:false,items:{path:"$field>items",template:i,filters:f},selectionChange:_.bind(this)});this._oList.setModel(this._oManagedObjectModel,"$field");this._oList.bindElement({path:"/",model:"$field"});this._setContent(this._oList);return p;};a.prototype.setParent=function(p,A,s){F.prototype.setParent.apply(this,arguments);var P=this.getAggregation("_popover");if(P){P.setInitialFocus(p);}return this;};a.prototype.setSelectedKey=function(k){F.prototype.setSelectedKey.apply(this,arguments);if(this._oList){var I=this._oList.getItems();for(var i=0;i<I.length;i++){var o=I[i];var O=b.call(this,o);if(O.getKey()==k){o.setSelected(true);}else{o.setSelected(false);}}}return this;};a.prototype.setFilterValue=function(f){F.prototype.setFilterValue.apply(this,arguments);if(this._oList){var B=this._oList.getBinding("items");B.update();this._oList.updateItems();this.setSelectedKey(this.getSelectedKey());}return this;};a.prototype.addItem=function(i){this.addAggregation("items",i);if(!this._bUpdateItems){this.fireDataUpdate();}return this;};a.prototype.insertItem=function(i,I){this.insertAggregation("items",i,I);if(!this._bUpdateItems){this.fireDataUpdate();}return this;};a.prototype.removeItem=function(i){var r=this.removeAggregation("items",i);if(!this._bUpdateItems){this.fireDataUpdate();}return r;};a.prototype.removeAllItems=function(){var r=this.removeAllAggregation("items");if(!this._bUpdateItems){this.fireDataUpdate();}return r;};a.prototype.destroyItems=function(){this.destroyAggregation("items");if(!this._bUpdateItems){this.fireDataUpdate();}return this;};a.prototype.updateItem=function(){this._bUpdateItems=true;this.updateAggregation("items");this._bUpdateItems=false;this.fireDataUpdate();};a.prototype.openByTyping=function(){return true;};a.prototype.navigate=function(s){var p=this._getPopover();var S=this._oList.getSelectedItem();var i=this._oList.getItems();var I=i.length;var d=0;if(S){d=this._oList.indexOfItem(S);d=d+s;if(d<0){d=0;}else if(d>=I-1){d=I-1;}}else if(s>=0){d=s-1;}else{d=I+s;}var o=i[d];if(o){var O=b.call(this,o);o.setSelected(true);this.setProperty("selectedKey",O.getKey(),true);if(!p.isOpen()){this.open();}this.fireNavigate({value:o.getLabel(),additionalValue:o.getValue(),key:O.getKey()});}};F.prototype.getTextforKey=function(k){var I=this.getItems();for(var i=0;i<I.length;i++){var o=I[i];if(o.getKey()==k){return o.getText();}}return"";};function _(e){var i=e.getParameter("listItem");var s=e.getParameter("selected");if(s){var o=b.call(this,i);this.setProperty("selectedKey",o.getKey(),true);this.close();this.fireSelect({value:i.getLabel(),additionalValue:i.getValue(),key:o.getKey()});}}function b(i){var p=i.getBindingContextPath();return this._oManagedObjectModel.getProperty(p);}function c(t){var f=this.getFilterValue();if(!f||jQuery.sap.startsWithIgnoreCase(t,f)){return true;}else{return false;}}return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nInternalModel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nInternalModel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.comp.personalization.Util');sap.ui.define("sap/ui/mdc/experimental/P13nInternalModel",['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/model/json/JSONModel','sap/ui/comp/personalization/Util'],function(q,M,J,P){"use strict";var c=J.extend("sap.ui.mdc.experimental.P13nInternalModel",{constructor:function(i,s){J.apply(this,arguments);this._initialize();}});c.prototype._initialize=function(){var m=this.getProperty("/tableItems").map(function(p){if(typeof p==="string"){p=sap.ui.getCore().byId(p);}return{columnKey:p.getColumnKey(),selected:p.getSelected(),position:p.getPosition(),text:p.getText()};});this._sortBySelectedAndPosition(m);this.setData({items:m});this.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this.setSizeLimit(1000);};c.prototype.getModelItemByColumnKey=function(C){return this.getProperty("/items").find(function(m){return m.columnKey===C;});};c.prototype.getIndexOfModelItem=function(m){return this.getProperty("/items").indexOf(m);};c.prototype.selectModelItem=function(m,i){m.selected=i;var a=this.getProperty("/items");var b=this._getSelectedModelItemsBetween(m,a[0]);if(b.length&&b[0].position>m.position){this.moveModelItemPosition(m,b[0]);}else{b=this._getSelectedModelItemsBetween(m,a[a.length-1]);if(b.length&&b[0].position<m.position){this.moveModelItemPosition(m,b[0]);}}};c.prototype.moveModelItem=function(m,o){if(!m||!o){return;}var a=this.getProperty("/items");var i=a.indexOf(m);var I=a.indexOf(o);if(i<0||I<0||i>a.length-1||I>a.length-1){return;}var b=a.splice(i,1)[0];a.splice(I,0,b);this.setProperty("/items",a);};c.prototype.moveModelItemPosition=function(m,o){var s=this._getSelectedModelItemsBetween(m,o);if(!s.length){return;}var d=this.getProperty("/items");var i=d.indexOf(m);var I=d.indexOf(o);if(i<I){o=s[s.length-1];}else{o=s[s.length-1];}var e=q.extend(true,[],d);e.sort(function(a,b){if(a.position<b.position){return-1;}else if(a.position>b.position){return 1;}else{return 0;}});var f=e.splice(m.position,1)[0];e.forEach(function(a,b){a.position=b;});e.splice(o.position,0,f);e.forEach(function(a,b){a.position=b;});d.forEach(function(a,b){var g=P.getArrayElementByKey("columnKey",a.columnKey,e);this.setProperty("/items/"+b+"/position",g.position);},this);};c.prototype._getSelectedModelItemsBetween=function(m,o){var a=this.getProperty("/items");var i=a.indexOf(m);var I=a.indexOf(o);if(i===I){return[];}var b=[];if(i<I){b=a.slice(i+1,I+1);return b.filter(function(d){return!!d.selected;});}b=a.slice(I,i).reverse();return b.filter(function(d){return!!d.selected;});};c.prototype._sortBySelectedAndPosition=function(m){m.sort(function(a,b){if(a.selected===true&&(b.selected===false||b.selected===undefined)){return-1;}else if((a.selected===false||a.selected===undefined)&&b.selected===true){return 1;}else if(a.selected===true&&b.selected===true){if(a.position<b.position){return-1;}else if(a.position>b.position){return 1;}else{return 0;}}else if((a.selected===false||a.selected===undefined)&&(b.selected===false||b.selected===undefined)){if(a.text<b.text){return-1;}else if(a.text>b.text){return 1;}else{return 0;}}});};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nItem');jQuery.sap.require('sap.ui.core.Element');sap.ui.define("sap/ui/mdc/experimental/P13nItem",['sap/ui/core/Element'],function(E){"use strict";var P=E.extend("sap.ui.mdc.experimental.P13nItem",{metadata:{"abstract":true,library:"sap.ui.mdc",properties:{columnKey:{type:"string",defaultValue:undefined},text:{type:"string",defaultValue:undefined},tooltip:{type:"string",defaultValue:undefined}}}});return P;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nPanelFormatter')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nPanelFormatter');sap.ui.define("sap/ui/mdc/experimental/P13nPanelFormatter",[],function(){"use strict";var P={showCount:function(c,C){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText('COLUMNSPANEL_SELECT_ALL_WITH_COUNTER',[c,C]);},determineCount:function(i){this._updateCounts();return P.showCount(this.getCountOfSelectedItems(),this.getCountOfItems());},isTrue:function(v){return!!v;},showDimMeasureType:function(m){if(m.aggregationRole==="dimension"){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText('COLUMNSPANEL_TYPE_DIMENSION');}if(m.aggregationRole==="measure"){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText('COLUMNSPANEL_TYPE_MEASURE');}return;},createChartRoleTypes:function(i,b){var a=b.getObject();return new sap.ui.core.Item({key:a.key,text:a.text});}};return P;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSelectionItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSelectionItem');sap.ui.define("sap/ui/mdc/experimental/P13nSelectionItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nSelectionItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"},href:{type:"string",defaultValue:undefined},target:{type:"string",defaultValue:undefined},press:{type:"object",defaultValue:null}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortItem');sap.ui.define("sap/ui/mdc/experimental/P13nSortItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nSortItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"},sortOrder:{type:"string"}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.ControlProvider')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.ControlProvider');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.base.BindingParser');sap.ui.define("sap/ui/mdc/experimental/provider/ControlProvider",["sap/ui/base/ManagedObject","sap/ui/base/BindingParser"],function(M,B){"use strict";var C={mProvidedProperties:{},mProvidedFunctions:{}};C.provideAttribute=function(n,a,v){if(v!=null){n.setAttribute(a,v);}};C.provideProperty=function(c,p,v){if(v!=null){var b,P=c.getMetadata().getProperty(p);if(!P){return;}if(C.isPropertyAllowedToBeProvided(c,p,v)){c._oProviderData.mProvidedProperties[p]=v;b=C.getAsBinding(v);if(b){c.bindProperty(p,b);}else{P.set(c,v);}}}};C.provideAggregation=function(c,a,v,t,s){if(v!=null){var b,A=c.getMetadata().getAggregation(a);if(!A){return;}if(C.isPropertyAllowedToBeProvided(c,a,v)){c._oProviderData.mProvidedProperties[a]=v;b=C.getAsBinding(v);b.template=t;b.templateShareable=s;c.bindAggregation(a,b);}}};C.providePrepareCloneFunction=function(c,f,F){c._oProviderData.mProvidedFunctions[f]=F;F(c);};C.prepareClone=function(c){var f=c._oProviderData.mProvidedFunctions;for(var i in f){f[i](c);}};C.isPropertyAlreadyProvided=function(c,p,v){if(c._oProviderData.mProvidedProperties[p]&&c._oProviderData.mProvidedProperties[p]===v){return true;}return false;};C.isPropertyAllowedToBeProvided=function(c,p,v){if(c.isPropertyInitial(p)){return true;}if(C.isPropertyAlreadyProvided(c,p,v)&&c._oProviderData.mProvidedProperties[p]!==v){return true;}return false;};C.canControlBeProvided=function(c,p){if(!c){return false;}if(!c._oProviderData){c._oProviderData={mProvidedProperties:{},mProvidedFunctions:{},providedFrom:p};return true;}else if(c._oProviderData.providedFrom&&c._oProviderData.providedFrom===p){return true;}return false;};C.getAsBinding=function(b){if(typeof b=='string'){return M.bindingParser(b);}else if(typeof b=='object'){return b;}return undefined;};C.getAsString=function(b){if(typeof b=='string'){return b;}else if(typeof b=='object'){var r=JSON.stringify(b);r=r.replace(new RegExp("\"path\"","g"),"path");r=r.replace(new RegExp("\"parts\"","g"),"parts");r=r.replace(new RegExp("\"parameters\"","g"),"parameters");r=r.replace(new RegExp("\"expand\"","g"),"expand");r=r.replace(new RegExp("\"","g"),"'");return r;}return undefined;};C.mergeBindings=function(b,f){var s="{ parts: ["+b.join(",")+"] }";var o=C.getAsBinding(s);o.formatter=[f];return o;};return C;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.model.ModelAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.model.ModelAdapter');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/mdc/experimental/provider/model/ModelAdapter",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var M=B.extend("sap.ui.mdc.experimental.provider.model.ModelAdapter",{oMetaModel:undefined,sModelName:undefined,_mPropertyBag:{},constructor:function(m,s,a,c){this.oModel=m;this.oMetaModel=m.getMetaModel();this.sModelName=s;c=c||false;if(a){this.switchMetaContext(a,c);}this.putProperty("key",this.key);this.putProperty("visible",this.visible);this.putProperty("hidden",this.hidden);this.putProperty("enabled",this.enabled);this.putProperty("disabled",this.disabled);this.putProperty("required",this.required);this.putProperty("semantics",this.semantics);this.putProperty("ui5Type",this.ui5Type);this.putProperty("formatOptions",this.formatOptions);this.putProperty("tooltip",this.tooltip);this.putProperty("label",this.label);this.putProperty("filterable",this.filterable);this.putProperty("requiredInFilter",this.requiredInFilter);this.putProperty("sortable",this.sortable);},ready:function(){if(this.oMetaModel.loaded){return this.oMetaModel.loaded();}},switchMetaContext:function(m,c){var C;if(c){C=m;}else{this.oMetaContext=this.oMetaModel.getMetaContext(m);C=this.oMetaContext.getPath();}if(C&&C!=this.sMetaContext){this.sMetaContext=C;if(!this._mPropertyBag[this.sMetaContext]){this._mPropertyBag[this.sMetaContext]={};}}this.afterMetaContextSwitch(this.sMetaContext,m);},afterMetaContextSwitch:function(m){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method afterMetaContextSwitch must be redefined");},getModelName:function(){return this.sModelName;},putProperty:function(p,g,a,c){if(!c){c=this;}Object.defineProperty(this,p,{configurable:true,get:function(){if(!this._mPropertyBag[this.sMetaContext].hasOwnProperty(p)){this._mPropertyBag[this.sMetaContext][p]=g.apply(c,a);}return this._mPropertyBag[this.sMetaContext][p];}});},key:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method key must be redefined");},visible:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method visible must be redefined");},hidden:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isHidden must be redefined");},enabled:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isEnabled must be redefined");},disabled:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isDisabled must be redefined");},required:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isRequired must be redefined");},semantics:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method semantics must be redefined");},url:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isURL must be redefined");},password:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isPassword must be redefined");},phoneNumber:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isPhoneNumber must be redefined");},eMail:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method isEmail must be redefined");},label:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method getLabel must be redefined");},tooltip:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method getTooltip must be redefined");},ui5Type:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method getUI5Type must be redefined");},formatOptions:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method formatOptions must be redefined");},filterable:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method filterable must be redefined");},requiredInFilter:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method requiredInFilter must be redefined");},sortable:function(){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapter:  method sortable must be redefined");},asPath:function(s,w){var p=this.sModelName?this.sModelName+">"+s:s;if(!w){p="{path: '"+p+"'}";}return p;}});M.Semantics={eMail:1,password:2,url:3,phoneNumber:4,currency:5,measure:6};return M;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.model.ODataAdapter')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.model.ODataAdapter');sap.ui.define("sap/ui/mdc/experimental/provider/model/ODataAdapter",["./ModelAdapter"],function(M){"use strict";function s(S){var p=S.indexOf("(");return p>=0?S.slice(0,p):S;}var O=M.extend("sap.ui.mdc.experimental.provider.model.ODataAdapter",{_schemaCache:{},aExpand:[],constructor:function(m,a,b,c){M.prototype.constructor.apply(this,arguments);this.putProperty("fields",this.fields);this.putProperty("expand",this.expand);this.putProperty("navigationProperties",this.navigationProperties);this.putProperty("filterRestrictions",this.filterRestrictions);}});O.prototype.afterMetaContextSwitch=function(c,p){if(!this._schemaCache[c]){this._schemaCache[c]=this.oMetaModel.getProperty(c);this.schema=this._schemaCache[c];this._precalucateFieldControl();}else{this.schema=this._schemaCache[c];}this.oEntitySet=this.calculateEntitySet(p);};O.prototype.calculateEntitySet=function(p){var a,n,e,q,E,P=p.split("/");if(P[0]!==""){return null;}P.shift();E=this.oMetaModel.getODataEntitySet(s(P[0]));if(!E){return null;}P.shift();while(P.length){q=E.entityType;e=this.oMetaModel.getODataEntityType(q);n=s(P[0]);a=this.oMetaModel.getODataAssociationEnd(e,n);if(a){E=this.oMetaModel.getODataEntitySet(a.entitySet);}else{return null;}}return E;};O.prototype.resolveNavi=function(n){var p=n.split("/"),N=p[0];var a=this.oMetaModel.getODataAssociationSetEnd(this.schema,N);var o=this.oMetaModel.getODataEntitySet(a.entitySet);var b="/"+o.name+"/"+p[1];var m=this.oMetaModel.getMetaContext(b);var c=m.getPath();if(this.aExpand.indexOf(N)==-1){this.aExpand.push(N);}var d=new O(this.oModel,this.ModelName,c,true);d.oEntitySet=o;return d;};O.prototype.ui5Type=function(){if(this.oMetaModel.getUI5Type){return this.oMetaModel.getUI5Type(this.sMetaContext);}switch(this.schema.type){case"Edm.Boolean":return"sap.ui.model.odata.type.Boolean";case"Edm.Byte":return"sap.ui.model.odata.type.Byte";case"Edm.Date":return"sap.ui.model.odata.type.Date";case"Edm.DateTimeOffset":return"sap.ui.model.odata.type.DateTimeOffset";case"Edm.Decimal":return"sap.ui.model.odata.type.Decimal";case"Edm.Double":return"sap.ui.model.odata.type.Double";case"Edm.Guid":return"sap.ui.model.odata.type.Guid";case"Edm.Int16":return"sap.ui.model.odata.type.Int16";case"Edm.Int32":return"sap.ui.model.odata.type.Int32";case"Edm.Int64":return"sap.ui.model.odata.type.Int64";case"Edm.SByte":return"sap.ui.model.odata.type.SByte";case"Edm.Single":return"sap.ui.model.odata.type.Single";case"Edm.String":return"sap.ui.model.odata.type.String";case"Edm.TimeOfDay":return"sap.ui.model.odata.type.TimeOfDay";default:return"sap.ui.model.odata.type.String";}};O.prototype.formatOptions=function(){var f="";switch(this.ui5Type){case"sap.ui.model.odata.type.Boolean":break;case"sap.ui.model.odata.type.Byte":break;case"sap.ui.model.odata.type.Date":break;case"sap.ui.model.odata.type.DateTimeOffset":break;case"sap.ui.model.odata.type.Decimal":break;case"sap.ui.model.odata.type.Double":break;case"sap.ui.model.odata.type.Guid":break;case"sap.ui.model.odata.type.Int16":break;case"sap.ui.model.odata.type.Int32":break;case"sap.ui.model.odata.type.Int64":break;case"sap.ui.model.odata.type.SByte":break;case"sap.ui.model.odata.type.Single":break;case"sap.ui.model.odata.type.String":break;case"sap.ui.model.odata.type.TimeOfDay":break;default:break;}return f;};O.prototype.semantics=function(){if(this.getAnnotation("com.sap.vocabularies.Common.v1.Masked")!=null){return M.Semantics.password;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsEmailAddress")!=null){return M.Semantics.eMail;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsPhoneNumber")!=null){return M.Semantics.phoneNumber;}if(this.getAnnotation("com.sap.vocabularies.Communication.v1.IsUrl")!=null){return M.Semantics.url;}if(this.getAnnotation("Org.OData.Measures.V1.Unit")!=null){return M.Semantics.currency;}if(this.getAnnotation("Org.OData.Measures.V1.ISOCurrency")!=null){return M.Semantics.measure;}};O.prototype.key=function(){return this.schema.name;};O.prototype.visible=function(){var h=this._isAnnotationBoolean("com.sap.vocabularies.UI.v1.Hidden");var v=h?!h:true;if(v&&this.schema._fieldControl){v=this.schema._fieldControl.visible;}return v;};O.prototype.hidden=function(){var h=this._isAnnotationBoolean("com.sap.vocabularies.UI.v1.Hidden");var H=h?h:false;if(!H&&this.schema._fieldControl){H=this.schema._fieldControl.hidden;}return H;};O.prototype.enabled=function(){var u=this.getAnnotation("Org.OData.Core.V1.Immutable/Bool")||this.getAnnotation("Org.OData.Core.V1.Computed/Bool");var e=u?u=="false":true;if(e&&this.schema._fieldControl){e=this.schema._fieldControl.editable;}return e;};O.prototype.disabled=function(){var u=this.getAnnotation("Org.OData.Core.V1.Immutable/Bool")||this.getAnnotation("Org.OData.Core.V1.Computed/Bool");var d=u?u=="true":false;if(!d&&this.schema._fieldControl){d=this.schema._fieldControl.readonly;}return d;};O.prototype.required=function(){var r=this.getAnnotation("nullable");var R=r?r=="false":false;if(this.schema._fieldControl){R=this.schema._fieldControl.required;}else{R=R&&this.enabled;}return R;};O.prototype.tooltip=function(){return this.getAnnotation("com.sap.vocabularies.Common.v1.QuickInfo/String");};O.prototype.label=function(){return this.getAnnotation("com.sap.vocabularies.Common.v1.Label/String");};O.prototype.filterable=function(){return(this.filterRestrictions.NonFilterableProperties.indexOf(this.schema.name)===-1);};O.prototype.requiredInFilter=function(){return(this.filterRestrictions.RequiredProperties.indexOf(this.schema.name)!==-1);};O.prototype.sortable=function(){return true;};O.prototype.navigationProperties=function(){var i,n,N=this.getAnnotation("navigationProperty"),a=[];for(i=0;i<N.length;i++){n=N[i];a[n.name]=n;}return a;};O.prototype.expand=function(){return this.aExpand;};O.prototype.fields=function(){var i,f,F=this.getAnnotation("property"),a=[];for(i=0;i<F.length;i++){f=F[i];a[f.name]=new O(this.oModel,this.ModelName,this.sMetaContext+"/property/"+i,true);a[f.name].oEntitySet=this.oEntitySet;}return a;};O.prototype.filterRestrictions=function(){var i,a,f={NonFilterableProperties:[],RequiredProperties:[]};if(this.oEntitySet){a=this.getAnnotation("Org.OData.Capabilities.V1.FilterRestrictions",this.oEntitySet);if(a){if(a.NonFilterableProperties){for(i=0;i<a.NonFilterableProperties.length;i++){f.NonFilterableProperties.push(a.NonFilterableProperties[i].PropertyPath);}}if(a.RequiredProperties){for(i=0;i<a.RequiredProperties.length;i++){f.RequiredProperties.push(a.RequiredProperties[i].PropertyPath);}}}}return f;};O.prototype.getAnnotation=function(a,A){A=A||this.schema;var p=a.split("/");var i=0;while(A&&p[i]){A=A[p[i]];i++;}return A;};O.prototype._isAnnotationBoolean=function(a){var A=this.getAnnotation(a);var i=false;if(A!=null){i=A.Bool?(A.Bool=="true"):true;}return i;};O.prototype._precalucateFieldControl=function(){var f=this.getAnnotation("com.sap.vocabularies.Common.v1.FieldControl");if(f){var a={};this._schemaCache[this.sMetaContext]._fieldControl=a;if(f.EnumMember){switch(f.EnumMember){case"com.sap.vocabularies.Common.v1.FieldControlType/Hidden":a.visible=false;a.hidden=true;a.editable=false;a.readonly=true;a.required=false;break;case"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory":a.visible=true;a.hidden=false;a.editable=true;a.readonly=false;a.required=true;break;case"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly":a.visible=true;a.hidden=false;a.editable=false;a.readonly=true;a.required=false;break;default:a.visible=true;a.hidden=false;a.editable=true;a.readonly=true;a.required=false;break;}}else{var p=f.Path;if(this.getModelName()){p=this.getModelName()+">"+p;}a.visible="{= ${"+p+"} !== 0}";a.hidden="{= ${"+p+"} === 0}";a.editable="{= ${"+p+"} !== 1}";a.readonly="{= ${"+p+"} === 1}";a.required="{= ${"+p+"} === 7}";}}};O.prototype._enrichFromEntitySet=function(f,e){var i,F=this._getAnnotation("Org.OData.Capabilities.V1.FilterRestrictions",e);f.filterable=true;f.requiredInFilter=false;if(F){for(i=0;i<F.NonFilterableProperties;i++){if(f.name===F.NonFilterableProperties.PropertyPath){f.filterable=false;}}}};O.prototype.metadataContextOfField=function(f){var i=Object.keys(this.fields).indexOf(f.name);if(i>-1){return this.sMetaContext+"/property/"+i;}else{return"";}};return O;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.registry.Utils')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.registry.Utils');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/provider/registry/Utils",["sap/ui/core/Control","sap/m/library","sap/ui/mdc/experimental/provider/model/ModelAdapter"],function(C,l,M){"use strict";var I=l.InputType;return{convertToInputType:function(a){switch(a.semantics){case M.Semantics.password:return I.Password;case M.Semantics.eMail:return I.Email;case M.Semantics.phoneNumber:return I.Tel;case M.Semantics.url:return I.Url;default:var u=a.ui5Type;switch(u){case"sap.ui.model.odata.type.Int16":case"sap.ui.model.odata.type.Int32":case"sap.ui.model.odata.type.Int64":case"sap.ui.model.odata.type.Decimal":case"sap.ui.model.odata.type.Double":return I.Number;case"sap.ui.model.odata.type.TimeOfDay":return I.Time;case"sap.ui.model.odata.type.DateTime":case"sap.ui.model.odata.type.DateTimeBase":return I.DateTime;case"sap.ui.model.odata.type.DateTimeOffset":case"sap.ui.model.odata.type.Date":return I.Date;default:return I.Text;}}},getNameSpaceInfo:function(c){var n={};n.className=c;var m=c.split(".");n.localName=m.pop();n.nameSpace=m.join(".");return n;},className:function(x){var a=x.localName||x.baseName||x.nodeName;if(!a){return undefined;}return x.namespaceURI+"."+a;}};});};if(!jQuery.sap.isDeclared('sap.ui.mdc.model.DateRange')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.model.DateRange');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.model.CompositeType');jQuery.sap.require('sap.ui.model.FormatException');jQuery.sap.require('sap.ui.model.ParseException');sap.ui.define("sap/ui/mdc/model/DateRange",["jquery.sap.global","sap/ui/model/CompositeType","sap/ui/model/FormatException","sap/ui/model/ParseException"],function(q,C,F,P){"use strict";var D=C.extend("sap.ui.mdc.model.DateRange",{constructor:function(f,c){C.call(this,f,c);}});D.prototype.formatValue=function(v,t){if(!v||(!v[0]&&!v[1])){return null;}switch(t){case"any":return v;case"string":return v.join(" - ");default:throw new F("Don't know how to format "+this.getName()+" to "+t);}};D.prototype.parseValue=function(v,s){if(v===null||v===""){return null;}switch(s){case"string":return v.split(" - ");default:throw new P("Don't know how to parse "+this.getName()+" from "+s);}};D.prototype.validateValue=function(v){};return D;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.model.GenericType')){jQuery.sap.declare('sap.ui.mdc.model.GenericType');jQuery.sap.require('sap.ui.model.SimpleType');jQuery.sap.require('sap.ui.model.FormatException');jQuery.sap.require('sap.ui.model.ParseException');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.ui.model.json.JSONPropertyBinding');sap.ui.define("sap/ui/mdc/model/GenericType",['sap/ui/model/SimpleType','sap/ui/model/FormatException','sap/ui/model/ParseException','sap/ui/model/base/ManagedObjectModel','sap/ui/model/json/JSONPropertyBinding'],function(S,F,P,M,J){"use strict";sap.ui.model.base.ManagedObjectModelPropertyBinding.prototype.setType=function(t,i){if(t&&typeof t._setBinding==="function"){t=t._clone();t._setBinding(this);}J.prototype.setType.apply(this,[t,i]);};function _(t,h){if(typeof h==="function"){return{object:window,fnFunc:h};}else if(typeof h==="string"){if(jQuery.sap.startsWith(h,".")){if(t.oBinding){var o=t.oBinding.getModel().getRootObject();return{object:o,fnFunc:o[h.slice(1)]};}}else{return{object:window,fnFunc:jQuery.sap.getObject(h)};}}return null;}var G=S.extend("sap.ui.mdc.model.GenericType",{constructor:function(f,c){S.apply(this,arguments);this.sName="Generic";this.oBinding=null;}});G.prototype.formatValue=function(v,t){var h=_(this,this.oFormatOptions.formatter);if(h){return h.fnFunc.call(h.object,v,t,this.getPrimitiveType(t),this.oBinding);}return v;};G.prototype.parseValue=function(v,s){var h=_(this,this.oFormatOptions.parser);if(h){return h.fnFunc.call(h.object,v,s,this.getPrimitiveType(s),this.oBinding);}return v;};G.prototype.validateValue=function(v){var h=_(this,this.oFormatOptions.validator);if(h){return h.fnFunc.call(h.object,v);}return undefined;};G.prototype._setBinding=function(b){this.oBinding=b;};G.prototype._clone=function(){return new G(this.oFormatOptions,this.oConstaints);};return G;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.ConditionModel')){jQuery.sap.declare('sap.ui.mdc.ConditionModel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.model.Filter');sap.ui.define("sap/ui/mdc/ConditionModel",['jquery.sap.global','sap/ui/model/json/JSONModel','sap/ui/model/Filter','sap/ui/mdc/FilterOperatorConfig'],function(q,J,F,b){"use strict";var C=J.extend("sap.ui.mdc.ConditionModel",{constructor:function(){J.apply(this,arguments);this.setSizeLimit(1000);this._oMessageBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){this._oMessageBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");}.bind(this));if(!this.getProperty("/conditions")){this.setProperty("/conditions",[]);}if(!this.getProperty("/fieldPath")){this.setProperty("/fieldPath",{});}}});C._mModels={};C.prototype.destroy=function(){J.prototype.destroy.apply(this,arguments);delete this._mFieldPath;delete this._oMessageBundle;};C.prototype.clone=function(f){var c=new C();var a=this.getConditions(f);var d=[];a.forEach(function(e,i){d.push(q.extend(true,{},e));});c.setConditions(d);return c;};C.prototype.merge=function(f,c,s){this.removeAllConditions(f);var a=sap.ui.mdc.ConditionModel.removeEmptyConditions(c.getConditions(s));this.setConditions(a);this.checkUpdate(true,true);};C.mapConditions=function(c,t){if(t){for(var i=0;i<c.length;i++){c[i].fieldPath=t;}}return c;};C.cloneConditions=function(c){return q.extend(true,[],c);};C.removeEmptyConditions=function(c){for(var i=c.length-1;i>-1;i--){if(c[i].isEmpty){c.splice(parseInt(i,10),1);}}return c;};C.getFor=function(l,n){var k=l.getModel().getId()+"--"+l.getPath()+"#"+(n===undefined?"":n);var c=C._mModels[k];if(!c){c=new C();c._oListBinding=l;C._mModels[k]=c;}else if(c._oListBinding!==l){c._oListBinding=l;}return c;};C.destroyCM=function(c,n){var l=c._oListBinding;var k=l.getModel().getId()+"--"+l.getPath()+"#"+(n===undefined?"":n);delete C._mModels[k];c.destroy();};C._getAll=function(l){var o=[];var k=l.getModel().getId()+"--"+l.getPath();for(var m in C._mModels){if(m.indexOf(k)===0){var c=C._mModels[m];o.push(c);}}return o;};C._getAllKeys=function(l){var o=[];var k=l.getModel().getId()+"--"+l.getPath();for(var m in C._mModels){if(m.indexOf(k)===0){o.push(m);}}return o;};C.prototype.getConditions=function(f){var r=[];var c=this.getProperty("/conditions");c.forEach(function(o){if(!f||o.fieldPath===f){r.push(o);}});return r;};C.prototype.indexOf=function(c){var a=-1;var d=this.getProperty("/conditions");var s=JSON.stringify(c);var f=c.fieldPath;d.forEach(function(c,i){if(c.fieldPath===f){if(JSON.stringify(c)===s){a=i;}}});return a;};C.prototype.exist=function(c,f){return this.indexOf(c,f)>=0;};C.prototype.setConditions=function(c){for(var i=0;i<c.length;i++){this.insertCondition(-1,c[i],true);}};C.prototype.addCondition=function(c,f){return this.insertCondition(-1,c,f);};C.prototype.insertCondition=function(a,c,f){var s=c.fieldPath,d;this._checkIsEmpty(c);if(!f){var i=this.indexOf(c);if(i>=0){return this.getConditions()[i];}}d=this.getProperty("/conditions");if(a==-1){d.push(c);}else{d.splice(a,0,c);}this.checkUpdate(true,true);this._checkMaxConditions(s);return c;};C.prototype.createItemCondition=function(f,k,d){return this.createCondition(f,"EEQ",[k,d]);};C.prototype.createCondition=function(f,o,v){var n={fieldPath:f,operator:o,values:v};this._checkIsEmpty(n);return n;};C.prototype.removeCondition=function(f,i){var c=this.getProperty("/conditions");if(c.some(function(p,a,c){if(p.fieldPath===f){if(i===0){c.splice(a,1);return true;}i--;return false;}return false;})){this.checkUpdate(true,true);this._checkMaxConditions(f);}};C.prototype.removeAllConditions=function(f){var I=[];var c=this.getProperty("/conditions");c.forEach(function(p,i){if(!f||p.fieldPath===f){I.push(i);}});I.sort();for(var i=I.length-1;i>-1;i--){c.splice(I[i],1);}this.checkUpdate(true,true);};C.prototype.deleteConditions=function(c,B){var f;if(!c||!B){return;}if(!q.isArray(c)){c=[c];}var d=B.oModel.getProperty(B.getPath(),B.getContext())||[];if(q.isArray(c)&&d.length>0){var I=[],a,i,n;if(Array.isArray(d)){for(i=0;i<c.length;i++){I.push(d.indexOf(c[i].getProperty()));}I.sort();a=function(e){f=d[e].fieldPath;d.splice(e,1);};}else if(typeof oData==="object"){for(n in d){var s=c[i].getPath();s=s.substring(c[i].getPath().lastIndexOf("/")+1);I.push(n);}a=function(s){delete d[s];};}for(i=I.length-1;i>-1;i--){a(I[i]);}}B.getModel().checkUpdate(true,true);this._checkMaxConditions(f);};C.prototype._checkIsEmpty=function(c){var f=this.getFilterOperatorConfig();c=c||this.getConditions();if(!Array.isArray(c)){c=[c];}c.forEach(function(o){var O=f.getOperator(o.operator);o.isEmpty=O.isEmpty(o);});};C.prototype._checkRequiredConditions=function(s,f){var a=f?[f]:Object.keys(this._mFieldPath||{});var e=false;var m=this._oMessageBundle.getText("conditionmodel.REQUIRED_CONDITION_MISSING");a.forEach(function(f){if(this._mFieldPath&&this._mFieldPath[f]){var o=this._mFieldPath[f];if(o.getRequired()&&this.getConditions(f).length<=0){if(s){this.addFieldPathMessage(f,m);}e=true;}else{this.removeFieldPathMessage(f,m);}}},this);return!e;};C.prototype._checkMaxConditions=function(f){var a=f?[f]:Object.keys(this._mFieldPath||{});var e=false;a.forEach(function(f){if(this._mFieldPath&&this._mFieldPath[f]){var o=this._mFieldPath[f];var m=this._oMessageBundle.getText("conditionmodel.TOO_MANY_CONDITIONS");if(o.getMaxConditions()>=0&&this.getConditions(f).length>o.getMaxConditions()){this.addFieldPathMessage(f,m);e=true;}else{this.removeFieldPathMessage(f,m);}}},this);return!e;};C.prototype.addFilterField=function(f){var s=f.getFieldPath();if(!this._mFieldPath){this._mFieldPath={};}this._mFieldPath[s]=f;var o=this.getProperty("/fieldPath");if(!o[s]){o[s]={valueState:"None",valueStateText:"",messages:[]};}};C.prototype.removeFilterField=function(f){var s=f.getFieldPath();if(this._mFieldPath&&this._mFieldPath[s]){delete this._mFieldPath[s];}var o=this.getProperty("/fieldPath");if(o[s]){delete o[s];}};C.prototype._getFieldPathProperty=function(f){return this.getProperty("/fieldPath/")[f];};C.prototype.addFieldPathMessage=function(f,m){var o=this._getFieldPathProperty(f);if(!o.messages.some(function(I,i){if(I===m){return true;}return false;})){o.messages.push(m);}this._updateValueState(f);};C.prototype.setUIMessage=function(f,m){var o=this._getFieldPathProperty(f);o.uiMessage=m;this._updateValueState(f);};C.prototype.removeFieldPathMessage=function(f,m){var I;var o=this._getFieldPathProperty(f);if(o.messages.some(function(s,i){if(s===m){I=i;return true;}return false;})){o.messages.splice(I,1);}this._updateValueState(f);};C.prototype.removeUIMessage=function(f){var o=this._getFieldPathProperty(f);delete o.uiMessage;this._updateValueState(f);};C.prototype._updateValueState=function(f){var u=false,o=this._getFieldPathProperty(f),v="None",V="";if(o.uiMessage){v="Error";V=o.uiMessage;}else if(o.messages.length>0){v="Error";V=o.messages[o.messages.length-1];}if(o.valueState!==v){o.valueState=v;u=true;}if(o.valueStateText!==V){o.valueStateText=V;u=true;}if(u){this.checkUpdate(true,true);}};C.prototype.isValid=function(v,f){var a=f?[f]:Object.keys(this._mFieldPath||{});var V=this._checkRequiredConditions(v);a.forEach(function(f){var o=this._getFieldPathProperty(f);V=V&&o.valueState=="None";},this);return V;};C.prototype.applyFilters=function(v){if(this.isValid(v)){var f=this.getAllFilters();if(f){this._oListBinding.filter(f);}else{this._oListBinding.filter();}return true;}return false;};C.prototype.getAllFilters=function(){var o=C._getAll(this._oListBinding);var O=[];o.forEach(function(c){var f=c.getFilters();if(f){O.push(f);}});var f=null;if(O.length===1){f=O[0];}else if(O.length>1){f=new F({filters:O,and:true});}return f;};C.prototype.getFilterOperatorConfig=function(){var m=this._oListBinding&&this._oListBinding.getModel();return b.getFor(m);};C.prototype.getFilters=function(f){var i,l,o=[],c,t,s,n,p;var a=this.getFilterOperatorConfig();var d={};if(f===undefined){c=this.getConditions();}else if(typeof f==="string"){c=this.getConditions(f);}else{c=f||[];}for(i=0;i<c.length;i++){d[c[i].fieldPath]=true;}for(var e in d){l=[];t=null;for(i=0;i<c.length;i++){if(c[i].fieldPath===e){var O=a.getOperator(c[i].operator);var g=O.getModelFilter(c[i]);if(g.sPath.indexOf('*/')>-1){s=g.sPath.split('*/');if(s.length===2){n=s[0];p=s[1];g.sPath='L1/'+p;if(!t){t={path:n,operator:'Any',variable:'L1'};}l.push(g);}else{throw new Error("Not Implemented");}}else{l.push(g);}}}if(t){if(l.length===1){t.condition=l[0];}else if(l.length>1){t.condition=new F({filters:l,and:false});}l=[new F(t)];}if(l.length===1){o.push(l[0]);}else if(l.length>1){o.push(new F({filters:l,and:false}));}}if(o.length===1){return o[0];}else if(o.length>1){return new F({filters:o,and:true});}else{return null;}};C.prototype.serialize=function(){var c=q.extend(true,[],this.getData().conditions);c.forEach(function(o){delete o.isEmpty;},this);return'{"conditions":'+JSON.stringify(c)+"}";};C.prototype.serializeMeta=function(){var f=Object.keys(this._mFieldPath||{});var r="";f.forEach(function(s){if(this.getData().fieldPath[s].valueState!=="None"){r+=JSON.stringify(this.getData().fieldPath[s]);}},this);return'{"fieldPath":'+r+"}";};C.prototype.parse=function(o){var d=function(k,v){var a;if(!isNaN(parseInt(k,10))&&(typeof v==='string')){a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/.exec(v);if(a){return new Date(v);}}return v;};var r=this.getData();r.conditions=JSON.parse(o,d).conditions;this.setData(r);};C.serialize=function(l){var o=C._getAllKeys(l);var r="";o.forEach(function(c){var a=C._mModels[c];if(a.getData().conditions&&a.getData().conditions.length>0){r+=">>>"+c+"<<<";r+=a.serialize();}});return r;};C.serializeMeta=function(l){var o=C._getAllKeys(l);var r="";o.forEach(function(c){var a=C._mModels[c];r+=a.serializeMeta();});return r;};C.parse=function(o){var c=o.split(">>>");c.forEach(function(s){var p=s.split("<<<");if(p.length>1){if(C._mModels[p[0]]){C._mModels[p[0]].parse(p[1]);}else{var a=new C();a.parse(p[1]);C._mModels[p[0]]=a;}}});};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.CustomFieldHelp')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.CustomFieldHelp');sap.ui.define("sap/ui/mdc/experimental/CustomFieldHelp",['sap/ui/mdc/experimental/FieldHelpBase'],function(F){"use strict";var C=F.extend("sap.ui.mdc.experimental.CustomFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"content",events:{beforeOpen:{parameters:{value:{type:"any"}}}}}});C.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);p._getAllContent=function(){var f=this.getParent();if(f){var c=[];c.push(f.getContent());return c;}else{return this.getContent();}};return p;};C.prototype.fireSelectEvent=function(v,a){this.close();this.fireSelect({value:v,additionalValue:a});};C.prototype.open=function(){var f=this.getParent();var v;if(f){v=f.getValue();}this.fireBeforeOpen({value:v});F.prototype.open.apply(this,arguments);};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.DataObject')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.DataObject');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.EventProvider');sap.ui.define("sap/ui/mdc/experimental/DataObject",['jquery.sap.global','sap/ui/base/EventProvider','sap/ui/mdc/experimental/DataObjectMetadata'],function(q,E,D){"use strict";var a=E.extend("sap.ui.mdc.experimental.DataObject",{constructor:function(s,p){E.call(this);this._aLayers=[];this._aLayerImpl=[];this._aLayerContext=[];this._aInactiveLayers=[];this._sActiveLayer="";this._mLayeredProperties={};this._mProperties=null;this._mDefaultProperties={};this.addLayer("base");this.applySettings(s);},metadata:{properties:{name:{type:"string",mandatory:true,unique:true,defaultValue:""},parent:{type:"any",defaultValue:{}},extensions:{type:"any",defaultValue:{}}},events:{change:{}}}},D);a.prototype.getAdapter=function(){return this._oImpl;};a.prototype.hideLayer=function(n){var i=this._aLayers.indexOf(n);if(i>0){this._aInactiveLayers.push(i);}else if(i==0){q.sap.log.debug("Layer 'base' cannot be hidden");}};a.prototype.showLayer=function(n){var i=this._aLayers.indexOf(n);if(i>0){this._aInactiveLayers.splice(this._aInactiveLayers.indexOf(i));}else if(i==0){q.sap.log.debug("Layer 'base' is always shown");}};a.prototype.setLayer=function(n,i,c){if(!this._mLayeredProperties[n]){this.addLayer(n,i,c);}this._sActiveLayer=n;};a.prototype.addLayer=function(n,i,c){if(this._aLayers.indexOf(n)>-1){q.sap.log.debug("Layer with "+n+" already exists");return;}this._aLayers.push(n);this._aLayerImpl.push(i);this._aLayerContext.push(c);this._mLayeredProperties[n]={};this._sActiveLayer=n;this._mProperties=this._mLayeredProperties[this._sActiveLayer];};a.prototype.isValid=function(p,v){return true;};a.prototype.setProperty=function(p,v,l){if(typeof p==="string"){this.addLayer("api");p=this.getMetadata().getProperty(p);}if(this.isValid(p,v)){if(l){var i=this._aLayers.indexOf(l);if(i===-1){return;}this._mLayeredProperties[this._aLayers[i]][p.name]=v;}else{this._mProperties[p.name]=v;}}};a.prototype.getLayeredProperty=function(p,l,r){var v,i;if(typeof p==="string"){p=this.getMetadata().getProperty(p);}if(!l){l=this._sActiveLayer;}i=this._aLayers.indexOf(l)||this._aLayers.length-1;while(v===undefined&&i>-1){if(this._aInactiveLayers.indexOf(i)>-1){i--;continue;}v=this._mLayeredProperties[this._aLayers[i]][p.name];this._iActiveContextLayer=i;if(v===undefined){var I=this._aLayerImpl[i];if(I&&I[p.name]){v=I[p.name].apply(this,[v]);}}if(v===undefined&&i==0){if(typeof p.defaultValue==="function"){v=p.defaultValue.apply(this);}else{this._mLayeredProperties[this._aLayers[i]][p.name]=v=JSON.parse(JSON.stringify(p.defaultValue));}}i--;if(r){break;}}return v;};a.prototype.getProperty=function(p){return this.getLayeredProperty(p);};a.prototype.getContext=function(){return this._aLayerContext[this._iActiveContextLayer];};a.prototype.getProperties=function(){var p=this._mProperties;var r={};for(var n in p){r[n]=p[n];if(typeof p[n]==="object"&&p[n].hasOwnProperty("length")){r[n]=[];for(var i=0;i<p[n].length;i++){if(p[n][i]instanceof a){r[n][i]=p[n][i].getProperties();}}}}return r;};a.prototype.applySettings=function(s){if(!s||q.isEmptyObject(s)){return this;}var m=this.getMetadata(),v=m.getJSONKeys(),k,V,K;for(k in s){V=s[k];if((K=v[k])!==undefined){switch(K._iKind){case 0:this[K.name]=V;break;case 5:if(typeof V=="function"){this[K._sMutator](V);}else{this[K._sMutator](V[0],V[1],V[2]);}break;case-1:default:break;}}else{}}return this;};a.prototype.toJSON=function(l){var c=this._sActiveLayer,p=this.getMetadata().getAllProperties(),r={};if(l){this._sActiveLayer=l;}for(var n in p){if(n==="parent"){continue;}r[n]=this[n];}this._sActiveLayer=c;return r;};return a;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nColumnItem')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.experimental.P13nColumnItem');sap.ui.define("sap/ui/mdc/experimental/P13nColumnItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nColumnItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nFilterItem')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nFilterItem');sap.ui.define("sap/ui/mdc/experimental/P13nFilterItem",['sap/ui/mdc/experimental/P13nItem'],function(P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nFilterItem",{metadata:{library:"sap.ui.mdc",properties:{selected:{type:"boolean",defaultValue:false},position:{type:"int"},required:{type:"boolean"},control:{type:"sap.ui.core.Control"}}}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');jQuery.sap.require('sap.ui.core.XMLComposite');jQuery.sap.require('sap.ui.model.ChangeReason');sap.ui.define("sap/ui/mdc/experimental/P13nPanel",['jquery.sap.global','sap/m/library','sap/ui/core/XMLComposite','./P13nPanelFormatter','sap/ui/model/ChangeReason'],function(q,M,X,P,C){"use strict";var a=X.extend("sap.ui.mdc.experimental.P13nPanel",{formatter:P,metadata:{"abstract":true,library:"sap.ui.mdc",defaultAggregation:"items",properties:{internalModelToBeUpdated:"boolean",defaultValue:true,visibility:"hidden"},aggregations:{items:{type:"sap.ui.mdc.experimental.P13nItem",multiple:true,singularName:"item"}}}});a.prototype.init=function(){this.setModel(new sap.ui.model.resource.ResourceModel({bundleUrl:sap.ui.getCore().getLibraryResourceBundle("sap.m").oUrlInfo.url}),"i18n");};a.prototype.addItem=function(i){this.setInternalModelToBeUpdated(true);this.addAggregation("items",i);return this;};a.prototype.insertItem=function(i,I){this.setInternalModelToBeUpdated(true);this.insertAggregation("items",i,I);return this;};a.prototype.updateItems=function(r){this.updateAggregation("items");if(r===C.Change){this.setInternalModelToBeUpdated(true);}};a.prototype.removeItem=function(i){this.setInternalModelToBeUpdated(true);return this.removeAggregation("items",i);};a.prototype.removeAllItems=function(){this.setInternalModelToBeUpdated(true);return this.removeAllAggregation("items");};a.prototype.destroyItems=function(){this.setInternalModelToBeUpdated(true);this.destroyAggregation("items");return this;};a.prototype.onSearchFieldLiveChange=function(e){this._filterTableItems();};a.prototype._filterTableItems=function(){var f=[];var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};a.prototype._getTable=function(){return sap.ui.getCore().byId(this.getId()+"--IDTable")||null;};a.prototype._getSearchField=function(){return sap.ui.getCore().byId(this.getId()+"--IDSearchField")||null;};a.prototype._getSearchText=function(){var s=this._getSearchField();return s?s.getValue():"";};a.prototype._isFilteredBySearchText=function(){return!!this._getSearchText().length;};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSelectionPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSelectionPanel');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/mdc/experimental/P13nSelectionPanel",['jquery.sap.global','./P13nPanel'],function(q,P){"use strict";var a=P.extend("sap.ui.mdc.experimental.P13nSelectionPanel",{metadata:{library:"sap.ui.mdc"}});return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nSortPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nSortPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nSortPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nInternalModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nSortPanel",{metadata:{library:"sap.ui.mdc",properties:{columnKeyOfMarkedItem:{type:"string",defaultValue:undefined,visibility:"hidden"},internalModel:{type:"sap.ui.mdc.experimental.P13nInternalModel",visibility:"hidden"}}}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this.setInternalModelToBeUpdated(true);this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype._selectTableItem=function(t){this.getInternalModel().selectModelItem(this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(t)),t.getSelected());this._syncPosition();this._toggleMarkedTableItem(t);this._updateControlLogic();};b.prototype._moveTableItem=function(t,T){var m=this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(t));var o=this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(T));this.getInternalModel().moveModelItemPosition(m,o);this._syncPosition();this.getInternalModel().moveModelItem(m,o);this._removeStyleFromTableItem(this._getMarkedTableItem());this._sortTableItemsAccordingToInternalModel();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onPressButtonMoveToTop=function(){this._moveTableItem(this._getMarkedTableItem(),this._getVisibleTableItems()[0]);};b.prototype.onPressButtonMoveUp=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())-1]);};b.prototype.onPressButtonMoveDown=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())+1]);};b.prototype.onPressButtonMoveToBottom=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.length-1]);};b.prototype.onItemPressed=function(e){this._toggleMarkedTableItem(e.getParameter('listItem'));this._updateControlLogic();};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype.onSwitchButtonShowSelected=function(){this.setShowOnlySelectedItems(!this.getShowOnlySelectedItems());this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSearchFieldLiveChange=function(){this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype._filterTableItems=function(){var f=[];if(this._isFilteredByShowSelected()===true){f.push(new sap.ui.model.Filter("selected","EQ",true));}var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("aggregationRole",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};b.prototype._sortTableItemsAccordingToInternalModel=function(){var c=function(i,I){var m=this.getInternalModel().getModelItemByColumnKey(i.getColumnKey());var o=this.getInternalModel().getModelItemByColumnKey(I.getColumnKey());var d=this.getInternalModel().getIndexOfModelItem(m);var e=this.getInternalModel().getIndexOfModelItem(o);if(d<e){return-1;}else if(d>e){return 1;}return 0;};this._getTable().getBinding("items").sort(new sap.ui.model.Sorter({path:'',descending:false,group:false,comparator:c.bind(this)}));};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getMarkedTableItem=function(){return this._getTableItemByColumnKey(this.getColumnKeyOfMarkedItem());};b.prototype._toggleMarkedTableItem=function(t){this._removeStyleFromTableItem(this._getMarkedTableItem());var c=this._getColumnKeyByTableItem(t);if(c){this.setColumnKeyOfMarkedItem(c);this._addStyleToTableItem(t);}};b.prototype._getStyledAsMarkedTableItem=function(){var d=this._getTable().$().find(".sapMP13nColumnsPanelItemSelected");return d.length?q(d[0]).control()[0]:undefined;};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();return this._getTable().getItems().find(function(t,i){return C[i].getObject().getColumnKey()===c;});};b.prototype._getColumnKeyByTableItem=function(t){var i=this._getTable().indexOfItem(t);if(i<0){return null;}return this._getTable().getBinding("items").getContexts()[i].getObject().getColumnKey();};b.prototype._syncPosition=function(){this.getItems().forEach(function(i){var m=this.getInternalModel().getModelItemByColumnKey(i.getColumnKey());i.setPosition(m.position);},this);};b.prototype._addStyleToTableItem=function(t){if(t){t.addStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._removeStyleFromTableItem=function(t){if(t){t.removeStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._isFilteredByShowSelected=function(){return false;};b.prototype._updateControlLogic=function(){var v=this._getVisibleTableItems();this._getManagedObjectModel().setProperty("/@custom/isMoveUpButtonEnabled",v.indexOf(this._getMarkedTableItem())>0);this._getManagedObjectModel().setProperty("/@custom/isMoveDownButtonEnabled",v.indexOf(this._getMarkedTableItem())>-1&&v.indexOf(this._getMarkedTableItem())<v.length-1);};b.prototype._updateInternalModel=function(){if(!this.getInternalModelToBeUpdated()){return;}this.setInternalModelToBeUpdated(false);this._removeStyleFromTableItem(this._getMarkedTableItem());this.setInternalModel(new a({tableItems:this.getItems()}));this._sortTableItemsAccordingToInternalModel();this._filterTableItems();if(!this.getColumnKeyOfMarkedItem()){this.setColumnKeyOfMarkedItem(this._getColumnKeyByTableItem(this._getVisibleTableItems()[0]));}this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.model.ModelAdapterFactory')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.model.ModelAdapterFactory');jQuery.sap.require('sap.ui.model.MetaModel');sap.ui.define("sap/ui/mdc/experimental/provider/model/ModelAdapterFactory",["sap/ui/model/MetaModel","sap/ui/mdc/experimental/provider/model/ODataAdapter"],function(M,O){"use strict";var F={adapterCache:{},promiseCache:{},adapterClassCache:{"sap/ui/mdc/experimental/provider/model/ODataAdapter":O}};F.requestAdapter=function(m,s,a){var k=F._getKeyInfo(s,a);if(!m.getMetaModel()){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapterFactory: Only models with meta model are allowed");}if(!F.promiseCache[k.key]){F.promiseCache[k.key]=new Promise(function(r,b){var A=F.getAdapter(m,s,a);if(A){r(A);}else{sap.ui.require([a],function(c){var A=new c(m,s);if(A){F.adapterCache[k.key]=A;r(A);}else{b("Invalid class");}});}});}return F.promiseCache[k.key];};F.getAdapter=function(m,s,a){var k=F._getKeyInfo(s,a);var c=F.adapterClassCache[k.adapter];if(!m.getMetaModel()){throw new Error("sap.ui.mdc.experimental.provider.model.ModelAdapterFactory: Only models with meta model are allowed");}if(F.adapterCache[k.key]){return F.adapterCache[k.key];}else if(c){F.adapterCache[k.key]=new c(m,s);return F.adapterCache[k.key];}return null;};F._getKeyInfo=function(m,a){if(!a){a="sap/ui/mdc/experimental/provider/model/ODataAdapter";}var k={adapter:a,modelName:m,key:m+">"+a};return k;};F.cacheAdapterClass=function(a,A){F.adapterClassCache[a]=A;};return F;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.registry.ControlRegistry')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.registry.ControlRegistry');sap.ui.define("sap/ui/mdc/experimental/provider/registry/ControlRegistry",["./Utils","/sap/ui/mdc/experimental/provider/ControlProvider","sap/ui/mdc/experimental/provider/model/ModelAdapterFactory"],function(U,C,A){"use strict";var a={ControlProvider:C,Utils:U,AdapterFactory:A};a.getTemplateNodes=function(){return Object.keys(a._mTemplatingFunctions);};a.getProviderFunction=function(c){var n="";if(typeof c==='string'){n=c;}else{n=c.getMetadata().getName();}var p=a._mProviderFunctions[n];if(p!=null){return p;}else{return a._mProviderFunctions["sap.ui.mdc.Base"];}};a.getTemplatingFunction=function(n){var N="";if(typeof n==='string'){N=n;}else{N=U.className(n);}var v=a._mTemplatingFunctions[N];if(v!=null){return v;}else{return a._mTemplatingFunctions["sap.ui.mdc.Base"];}};a.registerControl=function(c,p,t,s){a._mProviderFunctions[c]=p;a._mTemplatingFunctions[c]=t;if(s){var b=s.replace(new RegExp("/","g"),".");jQuery.sap.require(b);A.cacheAdapterClass(s,jQuery.sap.getObject(b));}};a._mTemplatingFunctions={"sap.ui.mdc.Base":function(n,c,o){var i=n.getAttribute("id");n.removeAttribute("id");n.setAttribute("id",o.key+"---"+i);var l=n.getAttribute("labelFor");if(l){n.setAttribute("labelFor",o.key+"---"+l);}},"sap.m.Label":function(n,c,o){a._mTemplatingFunctions["sap.ui.mdc.Base"](n,c,o);C.provideAttribute(n,"text",o.label);},"sap.ui.mdc.FilterField":function(n,c,o){a._mTemplatingFunctions["sap.ui.mdc.Base"](n,c,o);C.provideAttribute(n,"required",o.required);C.provideAttribute(n,"type",o.type);C.provideAttribute(n,"fieldPath",o.path);}};a._mProviderFunctions={"sap.ui.mdc.Base":function(c,o){C.provideProperty(c,"visible",o.visible);C.provideProperty(c,"tooltip",o.tooltip);},"sap.m.InputBase":function(c,o){a._mProviderFunctions["sap.ui.mdc.Base"](c,o);C.provideProperty(c,"editable",o.enabled);C.provideProperty(c,"required",o.required);var l=c.getLabels();for(var i=0;i<l.length;i++){if(C.canControlBeProvided(l[i],c)){a.getProviderFunction(l[i])(l[i],o);}}},"sap.m.Input":function(c,o){a._mProviderFunctions["sap.m.InputBase"](c,o);var t=U.convertToInputType(o);C.provideProperty(c,"type",t);},"sap.m.Label":function(c,o){a._mProviderFunctions["sap.ui.mdc.Base"](c,o);C.provideProperty(c,"text",o.label);},"sap.ui.layout.form.FormElement":function(c,o){var l=c.getLabel();if(l&&C.canControlBeProvided(l,c)){a.getProviderFunction(l)(l,o);}var f=c.getFields();for(var i=0;i<f.length;i++){if(C.canControlBeProvided(f[i],c)){a.getProviderFunction(f[i])(f[i],o);}}},"sap.ui.mdc.FilterField":function(c,o){C.provideProperty(c,"required",o.required);C.provideProperty(c,"type",o.type);C.provideProperty(c,"fieldPath",o.path);C.provideAggregation(c,"conditions",o.conditions);C.providePrepareCloneFunction(c,"suggestion",o.suggestion.bind(o));}};a.resolveMetadataContextsDeep=function(n,c,o,m){var b=n.children,i=0;for(i=0;i<b.length;i++){var s=U.className(b[i]);if(s&&!b[i].getAttribute("metadataContexts")&&a._mTemplatingFunctions[s]){b[i].setAttribute("metadataContexts",m);}else{a.resolveMetadataContextsDeep(b[i],c,o,m);}}};a.determineWithModel=function(n){var p=n;while(p&&!p.hasAttribute("var")){p=p.parentElement;}if(p){return p.getAttribute("var");}return null;};return a;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nColumnPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nColumnPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nColumnPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nInternalModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nColumnPanel",{metadata:{library:"sap.ui.mdc",properties:{columnKeyOfMarkedItem:{type:"string",defaultValue:undefined,visibility:"hidden"},showOnlySelectedItems:{type:"boolean",defaultValue:false,visibility:"hidden"},internalModel:{type:"sap.ui.mdc.experimental.P13nInternalModel",visibility:"hidden"}}}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this.setInternalModelToBeUpdated(true);this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype._selectTableItem=function(t){this.getInternalModel().selectModelItem(this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(t)),t.getSelected());this._syncPosition();this._toggleMarkedTableItem(t);this._updateControlLogic();this._updateCounts();};b.prototype._moveTableItem=function(t,T){var m=this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(t));var o=this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(T));this.getInternalModel().moveModelItemPosition(m,o);this._syncPosition();this.getInternalModel().moveModelItem(m,o);this._removeStyleFromTableItem(this._getMarkedTableItem());this._sortTableItemsAccordingToInternalModel();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onPressButtonMoveToTop=function(){this._moveTableItem(this._getMarkedTableItem(),this._getVisibleTableItems()[0]);};b.prototype.onPressButtonMoveUp=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())-1]);};b.prototype.onPressButtonMoveDown=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())+1]);};b.prototype.onPressButtonMoveToBottom=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.length-1]);};b.prototype.onItemPressed=function(e){this._toggleMarkedTableItem(e.getParameter('listItem'));this._updateControlLogic();};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype.onSwitchButtonShowSelected=function(){this.setShowOnlySelectedItems(!this.getShowOnlySelectedItems());this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSearchFieldLiveChange=function(){this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype._filterTableItems=function(){var f=[];if(this._isFilteredByShowSelected()===true){f.push(new sap.ui.model.Filter("selected","EQ",true));}var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("aggregationRole",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};b.prototype._sortTableItemsAccordingToInternalModel=function(){var c=function(i,I){var m=this.getInternalModel().getModelItemByColumnKey(i.getColumnKey());var o=this.getInternalModel().getModelItemByColumnKey(I.getColumnKey());var d=this.getInternalModel().getIndexOfModelItem(m);var e=this.getInternalModel().getIndexOfModelItem(o);if(d<e){return-1;}else if(d>e){return 1;}return 0;};this._getTable().getBinding("items").sort(new sap.ui.model.Sorter({path:'',descending:false,group:false,comparator:c.bind(this)}));};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getMarkedTableItem=function(){return this._getTableItemByColumnKey(this.getColumnKeyOfMarkedItem());};b.prototype._toggleMarkedTableItem=function(t){this._removeStyleFromTableItem(this._getMarkedTableItem());var c=this._getColumnKeyByTableItem(t);if(c){this.setColumnKeyOfMarkedItem(c);this._addStyleToTableItem(t);}};b.prototype._getStyledAsMarkedTableItem=function(){var d=this._getTable().$().find(".sapMP13nColumnsPanelItemSelected");return d.length?q(d[0]).control()[0]:undefined;};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();return this._getTable().getItems().find(function(t,i){return C[i].getObject().getColumnKey()===c;});};b.prototype._getColumnKeyByTableItem=function(t){var i=this._getTable().indexOfItem(t);if(i<0){return null;}return this._getTable().getBinding("items").getContexts()[i].getObject().getColumnKey();};b.prototype._syncPosition=function(){this.getItems().forEach(function(i){var m=this.getInternalModel().getModelItemByColumnKey(i.getColumnKey());i.setPosition(m.position);},this);};b.prototype._addStyleToTableItem=function(t){if(t){t.addStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._removeStyleFromTableItem=function(t){if(t){t.removeStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._isFilteredByShowSelected=function(){return!!this.getShowOnlySelectedItems();};b.prototype._updateControlLogic=function(){var v=this._getVisibleTableItems();this._getManagedObjectModel().setProperty("/@custom/isMoveUpButtonEnabled",v.indexOf(this._getMarkedTableItem())>0);this._getManagedObjectModel().setProperty("/@custom/isMoveDownButtonEnabled",v.indexOf(this._getMarkedTableItem())>-1&&v.indexOf(this._getMarkedTableItem())<v.length-1);};b.prototype._updateCounts=function(){var c=0;this.getItems().forEach(function(i){if(i.getSelected()){c++;}});this._getManagedObjectModel().setProperty("/@custom/countOfSelectedItems",c);this._getManagedObjectModel().setProperty("/@custom/countOfItems",this.getItems().length);};b.prototype._updateInternalModel=function(){if(!this.getInternalModelToBeUpdated()){return;}this.setInternalModelToBeUpdated(false);this._removeStyleFromTableItem(this._getMarkedTableItem());this.setInternalModel(new a({tableItems:this.getItems()}));this._sortTableItemsAccordingToInternalModel();this._filterTableItems();if(!this.getColumnKeyOfMarkedItem()){this.setColumnKeyOfMarkedItem(this._getColumnKeyByTableItem(this._getVisibleTableItems()[0]));}this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();this._updateCounts();};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.P13nFilterPanel')){jQuery.sap.declare('sap.ui.mdc.experimental.P13nFilterPanel');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.m.library');sap.ui.define("sap/ui/mdc/experimental/P13nFilterPanel",['jquery.sap.global','sap/m/library','./P13nPanel','./P13nInternalModel'],function(q,M,P,a){"use strict";var b=P.extend("sap.ui.mdc.experimental.P13nFilterPanel",{metadata:{library:"sap.ui.mdc",properties:{columnKeyOfMarkedItem:{type:"string",defaultValue:undefined,visibility:"hidden"},showOnlySelectedItems:{type:"boolean",defaultValue:false,visibility:"hidden"},internalModel:{type:"sap.ui.mdc.experimental.P13nInternalModel",visibility:"hidden"}}}});b.prototype.init=function(){P.prototype.init.apply(this,arguments);this._proxyOnModelContextChange=q.proxy(this._onModelContextChange,this);this.attachModelContextChange(this._proxyOnModelContextChange);};b.prototype.refreshInitialState=function(){this.setInternalModelToBeUpdated(true);this.invalidate();};b.prototype._onModelContextChange=function(){if(!this.getModel()){return;}this._updateInternalModel();};b.prototype.onBeforeRendering=function(){this._updateInternalModel();};b.prototype.exit=function(){this.detachModelContextChange(this._proxyOnModelContextChange);};b.prototype._selectTableItem=function(t){this.getInternalModel().selectModelItem(this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(t)),t.getSelected());this._syncPosition();this._toggleMarkedTableItem(t);this._updateControlLogic();this._updateCounts();};b.prototype._moveTableItem=function(t,T){var m=this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(t));var o=this.getInternalModel().getModelItemByColumnKey(this._getColumnKeyByTableItem(T));this.getInternalModel().moveModelItemPosition(m,o);this._syncPosition();this.getInternalModel().moveModelItem(m,o);this._removeStyleFromTableItem(this._getMarkedTableItem());this._sortTableItemsAccordingToInternalModel();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onPressButtonMoveToTop=function(){this._moveTableItem(this._getMarkedTableItem(),this._getVisibleTableItems()[0]);};b.prototype.onPressButtonMoveUp=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())-1]);};b.prototype.onPressButtonMoveDown=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.indexOf(this._getMarkedTableItem())+1]);};b.prototype.onPressButtonMoveToBottom=function(){var v=this._getVisibleTableItems();this._moveTableItem(this._getMarkedTableItem(),v[v.length-1]);};b.prototype.onItemPressed=function(e){this._toggleMarkedTableItem(e.getParameter('listItem'));this._updateControlLogic();};b.prototype.onSelectionChange=function(e){e.getParameter("listItems").forEach(function(t){this._selectTableItem(t);},this);};b.prototype.onSwitchButtonShowSelected=function(){this.setShowOnlySelectedItems(!this.getShowOnlySelectedItems());this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype.onSearchFieldLiveChange=function(){this._removeStyleFromTableItem(this._getMarkedTableItem());this._filterTableItems();this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();};b.prototype._filterTableItems=function(){var f=[];if(this._isFilteredByShowSelected()===true){f.push(new sap.ui.model.Filter("selected","EQ",true));}var s=this._getSearchText();if(s){f.push(new sap.ui.model.Filter([new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("tooltip",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("role",sap.ui.model.FilterOperator.Contains,s),new sap.ui.model.Filter("aggregationRole",sap.ui.model.FilterOperator.Contains,s)],false));}this._getTable().getBinding("items").filter(f);};b.prototype._sortTableItemsAccordingToInternalModel=function(){var c=function(i,I){var m=this.getInternalModel().getModelItemByColumnKey(i.getColumnKey());var o=this.getInternalModel().getModelItemByColumnKey(I.getColumnKey());var d=this.getInternalModel().getIndexOfModelItem(m);var e=this.getInternalModel().getIndexOfModelItem(o);if(d<e){return-1;}else if(d>e){return 1;}return 0;};this._getTable().getBinding("items").sort(new sap.ui.model.Sorter({path:'',descending:false,group:false,comparator:c.bind(this)}));};b.prototype._getVisibleTableItems=function(){return this._getTable().getItems().filter(function(t){return!!t.getVisible();});};b.prototype._getMarkedTableItem=function(){return this._getTableItemByColumnKey(this.getColumnKeyOfMarkedItem());};b.prototype._toggleMarkedTableItem=function(t){this._removeStyleFromTableItem(this._getMarkedTableItem());var c=this._getColumnKeyByTableItem(t);if(c){this.setColumnKeyOfMarkedItem(c);this._addStyleToTableItem(t);}};b.prototype._getStyledAsMarkedTableItem=function(){var d=this._getTable().$().find(".sapMP13nColumnsPanelItemSelected");return d.length?q(d[0]).control()[0]:undefined;};b.prototype._getTableItemByColumnKey=function(c){var C=this._getTable().getBinding("items").getContexts();return this._getTable().getItems().find(function(t,i){return C[i].getObject().getColumnKey()===c;});};b.prototype._getColumnKeyByTableItem=function(t){var i=this._getTable().indexOfItem(t);if(i<0){return null;}return this._getTable().getBinding("items").getContexts()[i].getObject().getColumnKey();};b.prototype._syncPosition=function(){this.getItems().forEach(function(i){var m=this.getInternalModel().getModelItemByColumnKey(i.getColumnKey());i.setPosition(m.position);},this);};b.prototype._addStyleToTableItem=function(t){if(t){t.addStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._removeStyleFromTableItem=function(t){if(t){t.removeStyleClass("sapMP13nColumnsPanelItemSelected");}};b.prototype._isFilteredByShowSelected=function(){return!!this.getShowOnlySelectedItems();};b.prototype._updateControlLogic=function(){var v=this._getVisibleTableItems();this._getManagedObjectModel().setProperty("/@custom/isMoveUpButtonEnabled",v.indexOf(this._getMarkedTableItem())>0);this._getManagedObjectModel().setProperty("/@custom/isMoveDownButtonEnabled",v.indexOf(this._getMarkedTableItem())>-1&&v.indexOf(this._getMarkedTableItem())<v.length-1);};b.prototype._updateCounts=function(){var c=0;this.getItems().forEach(function(i){if(i.getSelected()){c++;}});this._getManagedObjectModel().setProperty("/@custom/countOfSelectedItems",c);this._getManagedObjectModel().setProperty("/@custom/countOfItems",this.getItems().length);};b.prototype._updateInternalModel=function(){if(!this.getInternalModelToBeUpdated()){return;}this.setInternalModelToBeUpdated(false);this._removeStyleFromTableItem(this._getMarkedTableItem());this.setInternalModel(new a({tableItems:this.getItems()}));this._sortTableItemsAccordingToInternalModel();this._filterTableItems();if(!this.getColumnKeyOfMarkedItem()){this.setColumnKeyOfMarkedItem(this._getColumnKeyByTableItem(this._getVisibleTableItems()[0]));}this._toggleMarkedTableItem(this._getMarkedTableItem());this._updateControlLogic();this._updateCounts();};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.provider.ProviderHook')){jQuery.sap.declare('sap.ui.mdc.experimental.provider.ProviderHook');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.core.XMLTemplateProcessor');jQuery.sap.require('sap.ui.core.util.XMLPreprocessor');sap.ui.define("sap/ui/mdc/experimental/provider/ProviderHook",["sap/ui/base/ManagedObject","sap/ui/mdc/experimental/provider/registry/ControlRegistry","sap/ui/core/XMLTemplateProcessor","sap/ui/core/util/XMLPreprocessor"],function(M,C,X,a){"use strict";var P={};P.apply=function(){X._preprocessMetadataContexts=function(c,n,o){var m=n.getAttribute("metadataContexts");if(m){var b=M.bindingParser(m,o);P._resolveMetadataContextPath(b);return b;}return undefined;};P._resolveMetadataContextPath=function(m){if(!m&&m.path){return;}var r=m.path[0]!=='/';if(!r&&m.context){delete m.context;jQuery.sap.log.debug("Metadata context has an absolute path, ignoring the given context '"+m.context+"'");}if(r&&m.context){m.path=m.context+"/"+m.path;delete m.context;r=false;}if(m.model==''){m.model=undefined;}return r;};M.prototype._processMetadataContexts=function(m,s){var k=Object.keys(m);for(var i=0;i<k.length;i++){var o=m[k[i]];if(!P._sanityChecks(o)){return;}this._oProviderData={};this._oProviderData.metadata=o;this._oProviderData.mProvidedProperties={};this._oProviderData.mProvidedFunctions={};this._oProviderData.relative=o.path[0]!=='/';if(this._oProviderData){this.attachModelContextChange(P._handleModelContextChange,P);}}};M.prototype._cloneMetadataContexts=function(c){if(this._oProviderData){c._oProviderData=this._oProviderData;C.ControlProvider.prepareClone(c);}};};P.registerVisitors=function(A){for(var i=0;i<A.length;i++){var c=A[i].replace(new RegExp("/","g"),".");jQuery.sap.require(c);C.AdapterFactory.cacheAdapterClass(A[i],jQuery.sap.getObject(c));}P.registerTemplating();};P.registerTemplating=function(){var i,n=C.getTemplateNodes();var p=function(o,c){var m=o.getAttribute("metadataContexts");if(m){var b=M.bindingParser(m,null);var r=P._resolveMetadataContextPath(b);if(!r&&b.preprocessModel){P.resolveContexts(o,c,b);}}else{c.visitAttributes(o);}};for(i=0;i<n.length;i++){var N=C.Utils.getNameSpaceInfo(n[i]);a.plugIn(p,N.nameSpace,N.localName);}};P.resolveContexts=function(n,c,m){var o,b=c.getSettings().models[m.preprocessModel];if(!b){var v=c.getViewInfo();var d=sap.ui.getCore().getComponent(v.componentId);b=d?d.oModels[m.preprocessModel]:null;var V={};V[m.model]=b?b.getContext("/"):null;o=c["with"](V,false);}else{o=c;}if(b){var p=m.path;var A=C.AdapterFactory.getAdapter(b,m.model,m.adapter);A.switchMetaContext(p);var t=C.getTemplatingFunction(n);t(n,o,A);var s=n.getAttribute("metadataContexts");o.visitAttributes(n);if(s){n.setAttribute("metadataContexts",s);}}};P._handleModelContextChange=function(e){var c=e.getSource();P._driveWithMetadata(c._oProviderData,c);};P._driveWithMetadata=function(p,c){if(!p.model){p.model=c.getModel(p.metadata.model);}if(!p.model){jQuery.sap.log.debug("Metadata context cannot be resolved yet");return;}if(p.relative){var s=c.getBindingContext(p.metadata.model);if(!s){jQuery.sap.log.debug("Metadata context cannot be resolved yet");return;}else{p.metadata.path=s+"/"+p.metadata.path;delete p.relative;}}var f=C.getProviderFunction(c);if(f){C.AdapterFactory.requestAdapter(p.model,p.metadata.model,p.metadata.adapter).then(function(A){A.ready().then(function(){A.switchMetaContext(p.metadata.path);f(c,A);});});}};P._sanityChecks=function(m){if(!m){jQuery.sap.log.warning("No metadata context available");return false;}if(typeof m=="string"){m=M.bindingParser(m);}if(!m.hasOwnProperty("path")||typeof m.path!=="string"){jQuery.sap.log.warning("Metadata context is missing a path or path is not a string");return false;}if(!m.hasOwnProperty("relative")){m.relative=!m.hasOwnProperty("context");}else if(typeof m.relative!=="boolean"){jQuery.sap.log.warning("Metadata relative information must be a boolean");return false;}if(m.hasOwnProperty("context")&&typeof m.context!=="string"){jQuery.sap.log.warning("Metadata context needs no context or a context path of type string");return false;}if(!m.hasOwnProperty("model")){m.model=undefined;jQuery.sap.log.debug("Metadata context is missing a model, assuming undefined model");}return true;};return P;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.mdc.library');sap.ui.define("sap/ui/mdc/library",['sap/ui/mdc/model/GenericType','sap/ui/mdc/experimental/provider/ProviderHook'],function(G,P){"use strict";sap.ui.getCore().initLibrary({version:"1.50.6",name:"sap.ui.mdc",dependencies:["sap.ui.core","sap.m"],types:["sap.ui.mdc.FieldDisplay","sap.ui.mdc.EditMode"],interfaces:[],controls:["sap.ui.mdc.experimental.Field","sap.ui.mdc.FilterField","sap.ui.mdc.FilterToken"],elements:["sap.ui.mdc.experimental.FieldHelpBase","sap.ui.mdc.experimental.CustomFieldHelp"],noLibraryCSS:false});sap.ui.mdc.FieldDisplay={Value:"Value",Description:"Description",ValueDescription:"ValueDescription",DescriptionValue:"DescriptionValue"};sap.ui.mdc.EditMode={Display:"Display",Editable:"Editable",ReadOnly:"ReadOnly",Disabled:"Disabled"};P.apply();return sap.ui.mdc;});};if(!jQuery.sap.isDeclared('sap.ui.mdc.FilterField')){jQuery.sap.declare('sap.ui.mdc.FilterField');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.m.MultiInput');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');sap.ui.define("sap/ui/mdc/FilterField",['jquery.sap.global','sap/ui/core/Control','sap/ui/model/json/JSONModel','./FilterFieldRenderer','sap/m/MultiInput','sap/ui/mdc/FilterToken','sap/ui/model/Filter','sap/ui/model/Sorter',"sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/model/DateRange",'sap/ui/mdc/library'],function(q,C,J,F,M,a,b,S,c,D,l){"use strict";var E=l.EditMode;var d=C.extend("sap.ui.mdc.FilterField",{constructor:function(i,s){this._oManagedObjectModel=null;this._oActiveDelegate=null;C.apply(this,arguments);},metadata:{properties:{showValueHelp:{type:"boolean",group:"Data",defaultValue:true},dataType:{type:"any",group:"Data",defaultValue:"sap.ui.model.type.String"},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},fieldPath:{type:"string",group:"Data",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"15rem"},editable:{type:"boolean",group:"Data",defaultValue:true},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},placeholder:{type:"string",group:"Behavior",defaultValue:""},required:{type:"boolean",group:"Misc",defaultValue:false},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null}},events:{valueHelpRequest:{},change:{parameters:{value:{type:"object"},type:{type:"string"},valid:{type:"boolean"}}},liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"}}}},aggregations:{_input:{type:"sap.ui.core.Control",multiple:false,hidden:true},conditions:{type:"sap.ui.mdc.Condition",multiple:true,_doesNotRequireFactory:true},content:{type:"sap.ui.core.Control",multiple:false}},publicMethods:[],defaultAggregation:"content"}});d.prototype.getFilterOperatorConfig=function(){if(!this._oFilterOpConfig&&this.getBinding("conditions")){var o=this.getBinding("conditions").getModel();this._oFilterOpConfig=o.getFilterOperatorConfig();}return this._oFilterOpConfig;};d.prototype.updateConditions=function(){var B=this.getBinding("conditions");if(B&&this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true);B.getModel().addFilterField(this);}return this;};d.prototype.setWidth=function(w){var o=this.getWidth();this.setProperty("width",w,true);if(o!=this.getWidth()){var i=this.getAggregation("_input");if(i){i.setWidth(w);}}return this;};d.prototype.setEditable=function(g){var o=this.getEditable();this.setProperty("editable",g,true);if(o!=this.getEditable()){var i=this.getAggregation("_input");if(i){i.setEditable(g);}}return this;};d.prototype.setPlaceholder=function(p){var o=this.getPlaceholder();this.setProperty("placeholder",p,true);if(o!=this.getPlaceholder()){var i=this.getAggregation("_input");if(i){i.setPlaceholder(p);}}return this;};d.prototype.setMaxConditions=function(m){this.setProperty("maxConditions",m,true);return this;};d.prototype.setRequired=function(r){var o=this.getRequired();this.setProperty("required",r,true);if(o!=this.getRequired()){var i=this.getAggregation("_input");if(i){i.setRequired(r);}}return this;};d.prototype.bindAggregation=function(n,B){if(n==="conditions"){var s=this.getFieldPath();if(s&&!B.filters){B.filters=new sap.ui.model.Filter({path:"fieldPath",test:this._matchFieldPath.bind(this)});}if(!B.sorter){B.sorter=new sap.ui.model.Sorter("position",false);}}return C.prototype.bindAggregation.apply(this,[n,B]);};d.prototype._matchFieldPath=function(v){var s=this.getFieldPath().toUpperCase();return s===v;};d.prototype.setFieldPath=function(v){var o=this.getFieldPath();this.setProperty("fieldPath",v);if(o!==this.getFieldPath()&&this.mBindingInfos["conditions"]){var g=new b({path:"fieldPath",test:this._matchFieldPath.bind(this)});var B=this.getBinding("conditions");if(B){B.filter(g);}else{this.mBindingInfos["conditions"].filters=g;}}return this;};d.prototype._handleTokenContentChange=function(o){};d.prototype._handleTokenChange=function(g){var s=g.getId(),v,B,h,O,n,j;if(s==="tokenUpdate"){if(g.getParameter("type")==="added"){s="change";v=g.getParameter("addedTokens")[0].getText().trim();}if(g.getParameter("type")==="removed"){var r=g.getParameter("removedTokens"),k=[];r.forEach(function(o){k.push(o.getBindingContext("$filterField"));});B=this.getBinding("conditions");B.getModel().deleteConditions(k,B);}}if(s==="change"){q.sap.log.info("mdc:FilterField","_handleTokenChange for "+s);var m=g.getSource(),t=this._getDataType(),p=t.getMetadata().getName();if(m._getIsSuggestionPopupOpen&&m._getIsSuggestionPopupOpen()){var u=m.getSuggestionRows();var i=0;u.forEach(function(I){if(I.getVisible()){i++;}});if(i===1){return;}}B=this.getBinding("conditions");if(m instanceof sap.m.Select){v=g.getParameter("selectedItem").getText();}else{v=v||g.getParameter("value");v=v.trim();}q.sap.log.info("mdc:FilterField","_handleTokenChange sValue "+v);if(!v){if(m instanceof sap.m.MultiInput){}else if(this.getMaxConditions()>=0&&B.getModel().getConditions(this.getFieldPath()).length>0){B.getModel().removeCondition(this.getFieldPath(),0);}B.getModel().removeUIMessage(this.getFieldPath());return;}if(m instanceof sap.m.DateRangeSelection){j=this.getFilterOperatorConfig().getOperator("BT");v=v.replace(" - ","...");h=j.getCondition(v,t);if(h){h.fieldPath=this.getFieldPath();B.getModel().addCondition(h);this.fireChange({value:h,type:"added",valid:true});if(this.getMaxConditions()>=0&&B.getModel().getConditions(this.getFieldPath()).length>1){B.getModel().removeCondition(this.getFieldPath(),0);}return;}}O=this.getFilterOperatorConfig().getMatchingOperators(p,v);if(O.length===0){var w=this.getFilterOperatorConfig().getDefaultOperator(p);n=this.getFilterOperatorConfig().getOperator(w);v=n.format([v]);}else{n=O[0];}try{if(n&&n.test(v,t)){j=n;B.getModel().removeUIMessage(this.getFieldPath());}}catch(x){B.getModel().setUIMessage(this.getFieldPath(),x.message);}if(j){h=j.getCondition(v,t);if(h){h.fieldPath=this.getFieldPath();B.getModel().addCondition(h);this.fireChange({value:h,type:"added",valid:true});if(m instanceof sap.m.MultiInput){m.setValue("");}if(m instanceof sap.m.Select||m instanceof sap.m.DatePicker||m instanceof sap.m.TimePicker){if(this.getMaxConditions()>=0&&B.getModel().getConditions(this.getFieldPath()).length>1){B.getModel().removeCondition(this.getFieldPath(),0);}}}}}};d.prototype.getConditions=function(){if(this.getBinding("conditions")){var g=this.getBinding("conditions").getContexts(),h=[];for(var i=0;i<g.length;i++){h.push(g[i].getProperty());}return h;}return[];};var f=function(o){var r="";if(o){var O=this.getFilterOperatorConfig().getOperator(o.operator);var v=o.values;r=O.format(v,o,this._getDataType());}return r;};d.prototype._getDefaultInput=function(){var o;if(!this.getAggregation("_input")){if(this.getProperty("dataType").indexOf("Boolean")>-1&&this.getMaxConditions()===1){o=new sap.m.Select(this.getId()+"-inner",{width:this.getWidth(),selectedKey:"{$filterField>conditions/0/values/0}",valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"},items:[new sap.ui.core.Item({key:"",text:""}),new sap.ui.core.Item({key:false,text:this._getDataType().formatValue(false,"string")}),new sap.ui.core.Item({key:true,text:this._getDataType().formatValue(true,"string")})]});}else if(this.getProperty("dataType").indexOf(".Time")>-1&&this.getMaxConditions()===1){o=new sap.m.TimePicker(this.getId()+"-inner",{editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:e},width:"{$filterField>width}",required:"{$filterField>required}",value:{path:"$filterField>conditions/0/values/0",type:this._getDataType(),mode:"OneWay"},valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"}});}else if(this.getProperty("dataType").indexOf("Date")>-1&&this.getMaxConditions()===1){o=new sap.m.DatePicker(this.getId()+"-inner",{editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:e},width:"{$filterField>width}",required:"{$filterField>required}",value:{path:"$filterField>conditions/0/values/0",type:this._getDataType(),mode:"OneWay"},valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"}});}else if(this.getProperty("dataType").indexOf("Date")>-1&&this.getMaxConditions()===2){o=new sap.m.DateRangeSelection(this.getId()+"-inner",{editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:e},width:"{$filterField>width}",required:"{$filterField>required}",value:{parts:[{path:"$filterField>conditions/0/values/0",type:this._getDataType()},{path:"$filterField>conditions/0/values/1",type:this._getDataType()}],mode:"OneWay",type:"sap.ui.mdc.model.DateRange"},valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"}});}else{var t={};t.path="conditions";t.model="$filterField";t.template=new a({tokenChanged:this._handleTokenContentChange.bind(this),text:{path:'$filterField>',formatter:f.bind(this)},tooltip:{path:'$filterField>',formatter:f.bind(this)}});t.templateShareable=false;o=new M(this.getId()+"-inner",{tokens:t,editable:{path:"$filterField>editMode",formatter:_},enabled:{path:"$filterField>editMode",formatter:e},width:"{$filterField>width}",required:"{$filterField>required}",placeholder:"{$filterField>placeholder}",enableMultiLineMode:true,showSuggestion:false,valueState:{path:"$filterField>/valueState",mode:"OneWay"},valueStateText:{path:"$filterField>/valueStateText",mode:"OneWay"},showValueHelp:"{$filterField>showValueHelp}"});o.attachTokenUpdate(this._handleTokenChange,this);o.attachTokenChange(this._handleTokenChange,this);o.attachValueHelpRequest(this.fireValueHelpRequest,this);o.attachLiveChange(this._handleContentLiveChange,this);o.updateTokens=null;}o.attachChange(this._handleTokenChange,this);this.setAggregation("_input",o);this._input=o;this._activateManagedObjectModel();}return this.getAggregation("_input");};function _(s){if(s&&s==E.Editable){return true;}else{return false;}}function e(s){if(s&&s!=E.Disabled){return true;}else{return false;}}d.prototype._handleContentLiveChange=function(o){var v;var g=false;if("value"in o.getParameters()){v=o.getParameter("value");}if("escPressed"in o.getParameters()){g=o.getParameter("escPressed");}this.fireLiveChange({value:v,escPressed:g});};d.prototype.getContent=function(){if(!this.getAggregation("content")){return this._getDefaultInput();}return this.getAggregation("content");};d.prototype.clone=function(){if(this._input){this._input.detachChange(this._handleTokenChange,this);this._input.detachTokenUpdate(this._handleTokenChange,this);this._input.detachTokenChange(this._handleTokenChange,this);this._input.detachValueHelpRequest(this.fireValueHelpRequest,this);var t=this._input.getBindingInfo("tokens").template;if(t){t.detachTokenChanged(this._handleTokenContentChange,this);}var o=C.prototype.clone.apply(this,arguments);if(t){t.attachTokenChanged(this._handleTokenContentChange,this);}this._input.attachChange(this._handleTokenChange,this);this._input.attachTokenUpdate(this._handleTokenChange,this);this._input.attachTokenChange(this._handleTokenChange,this);this._input.attachValueHelpRequest(this.fireValueHelpRequest,this);var g=o.getAggregation("_input");g.attachChange(o._handleTokenChange,o);g.attachTokenUpdate(o._handleTokenChange,o);g.attachTokenChange(o._handleTokenChange,o);g.attachValueHelpRequest(o.fireValueHelpRequest,o);var h=g.getBindingInfo("tokens").template;if(h){h.attachTokenChanged(o._handleTokenContentChange,o);}}return o;};d.prototype.setContent=function(o){this._deactivateManagedObjectModel();this.setAggregation("content",o);this._activateManagedObjectModel();return this;};d.prototype.destroyContent=function(){this._deactivateManagedObjectModel();this.destroyAggregation("content");this._activateManagedObjectModel();return this;};d.prototype._updateConditionModel=function(o){var B=this.getBinding("conditions");if(B&&o.getParameter("resolvedPath").indexOf("/conditions")===0){B.getModel().checkUpdate(true,true);}};d.prototype._activateManagedObjectModel=function(){var o=this.getContent();if(o){if(!this._oManagedObjectModel){this._oManagedObjectModel=new c(this);this._oManagedObjectModel.setSizeLimit(1000);this._oManagedObjectModel.attachEvent("propertyChange",this._updateConditionModel.bind(this));}o.setModel(this._oManagedObjectModel,"$filterField");o.bindElement({path:"/",model:"$filterField"});}};d.prototype._deactivateManagedObjectModel=function(){var o=this.getContent();if(o){o.unbindElement("$filterField");this._oManagedObjectModel.destroy();this._oManagedObjectModel=null;}};d.prototype.setParent=function(){C.prototype.setParent.apply(this,arguments);if(!this.getParent()){this._deactivateManagedObjectModel();}else{this._activateManagedObjectModel();}};d.prototype.setDataType=function(v){delete this._oDataType;this.setProperty("dataType",v,true);};d.mapEdmTypes={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};d.prototype._createDataType=function(t){var O=q.sap.getObject(t);if(!O){var o=this.getFilterOperatorConfig(),n;if(o){n=o.getParentType(t);}else{n=d.mapEdmTypes[t];}if(!n){q.sap.log.error("FilterField","dataType for "+t+" can not be created!");return null;}return this._createDataType(n);}return new O(this.getDataTypeFormatOptions(),this.getDataTypeConstraints());};d.prototype._getDataType=function(t){if(!this._oDataType){this._oDataType=this.getProperty("dataType");if(typeof this._oDataType==="string"){this._oDataType=this._createDataType(this._oDataType);}}return this._oDataType;};return d;},true);};if(!jQuery.sap.isDeclared('sap.ui.mdc.experimental.Field')){jQuery.sap.declare('sap.ui.mdc.experimental.Field');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.model.base.ManagedObjectModel');jQuery.sap.require('sap.ui.model.BindingMode');jQuery.sap.require('sap.m.Input');jQuery.sap.require('sap.m.Text');sap.ui.define("sap/ui/mdc/experimental/Field",['jquery.sap.global','sap/ui/core/Control','sap/ui/model/base/ManagedObjectModel','sap/ui/model/BindingMode','sap/m/Input','sap/m/Text','sap/ui/mdc/library'],function(q,C,M,B,I,T,l){"use strict";var D;var a;var b;var E=l.EditMode;var F=l.FieldDisplay;var c=C.extend("sap.ui.mdc.experimental.Field",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.mdc",properties:{value:{type:"any",defaultValue:null},additionalValue:{type:"any",defaultValue:null},dataType:{type:"string",group:"Data",defaultValue:'sap.ui.model.type.String'},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:""},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},required:{type:"boolean",group:"Data",defaultValue:false},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},display:{type:"sap.ui.mdc.FieldDisplay",defaultValue:F.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:sap.ui.core.TextAlign.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:null},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"}}},liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},dataChanged:{}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},fieldHelp:{type:"sap.ui.mdc.experimental.FieldHelpBase",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},publicMethods:[],defaultAggregation:"content",defaultProperty:"value"},_oManagedObjectModel:null});c.prototype.init=function(){this._oManagedObjectModel=new M(this);};c.prototype.exit=function(){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;};c.prototype.onBeforeRendering=function(){d.call(this);};c.prototype.setValue=function(v){this.setProperty("value",v);_.call(this,v);return this;};c.prototype.setDisplay=function(v){this.setProperty("display",v);_.call(this,this.getValue());return this;};function _(K){if(!this.isBound("additionalValue")){var v=this.getFieldHelp();if(v&&this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){var A;if(K){A=v.getTextforKey(K);}this.setAdditionalValue(A);}}}c.formatText=g;function d(){if(!this._getContent()){var v=this.getEditMode();var w=this.getDataType();var x;var y=this.getId()+"-inner";switch(v){case E.Display:switch(w){case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.TimeOfDay":x=new T(y,{text:{path:"$field>value",type:this._getDataType()},textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",wrapping:false});break;default:x=new T(y,{text:{parts:[{path:"$field>value"},{path:"$field>additionalValue"},{path:"$field>display"}],formatter:g},textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",wrapping:false});break;}break;default:switch(w){case"Edm.Date":x=j.call(this,y);break;case"Edm.DateTimeOffset":x=k.call(this,y);break;case"Edm.TimeOfDay":x=m.call(this,y);break;default:var P="$field>value";if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){P="$field>additionalValue";}x=new I(y,{value:{path:P},placeholder:"{$field>placeholder}",textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",required:"{$field>required}",editable:{path:"$field>editMode",formatter:e},enabled:{path:"$field>editMode",formatter:f},valueState:"{$field>valueState}",valueStateText:"{$field>valueStateText}",showValueHelp:!!this.getFieldHelp(),change:o.bind(this),liveChange:p.bind(this),valueHelpRequest:r.bind(this)});break;}break;}if(x){this.setAggregation("_content",x,true);n.call(this,x);}}}c.prototype._getContent=function(){return this.getContent()||this.getAggregation("_content");};function e(v){if(v&&v==E.Editable){return true;}else{return false;}}function f(v){if(v&&v!=E.Disabled){return true;}else{return false;}}function g(v,A,w){var x=v?v:"";var y=A?A:"";var z="";switch(w){case F.Description:z=y;break;case F.ValueDescription:z=x+" ("+y+")";break;case F.DescriptionValue:z=y+" ("+x+")";break;default:z=x;}if(z.replace){z=z.replace(" ()","");}return z;}function h(D,v){var w=new D(v,{value:{path:"$field>value",type:this._getDataType()},placeholder:"{$field>placeholder}",textAlign:"{$field>textAlign}",textDirection:"{$field>textDirection}",required:"{$field>required}",editable:{path:"$field>editMode",formatter:e},enabled:{path:"$field>editMode",formatter:f},valueState:"{$field>valueState}",valueStateText:"{$field>valueStateText}",width:"100%",change:o.bind(this)});return w;}function i(D){var v=this.getId()+"-inner";var w=h.call(this,D,v);this.setAggregation("_content",w);n.call(this,w);}function j(v){if(!D){D=sap.ui.require("sap/m/DatePicker");if(!D){sap.ui.require(["sap/m/DatePicker"],i.bind(this));return null;}}return h.call(this,D,v);}function k(v){if(!a){a=sap.ui.require("sap/m/DateTimePicker");if(!a){sap.ui.require(["sap/m/DateTimePicker"],i.bind(this));return null;}}return h.call(this,a,v);}function m(v){if(!b){b=sap.ui.require("sap/m/TimePicker");if(!b){sap.ui.require(["sap/m/TimePicker"],i.bind(this));return null;}}return h.call(this,b,v);}function n(v){v.setModel(this._oManagedObjectModel,"$field");v.bindElement({path:"/",model:"$field"});}c.prototype.setEditMode=function(v){var O=this.getEditMode();if(O!=v){if(this.getAggregation("_content")){this.destroyAggregation("_content");}this.setProperty("editMode",v);d.call(this);}return this;};c.prototype.setContent=function(v){var O=this.getContent();if(O){O.unbindElement("$field");if(O.getMetadata().getEvents().change){O.detachEvent("change",o,this);}if(O.getMetadata().getEvents().liveChange){O.detachEvent("liveChange",p,this);}}if(this.getAggregation("_content")){this.destroyAggregation("_content");}this.setAggregation("content",v);if(v){n.call(this,v);if(v.getMetadata().getEvents().change){v.attachEvent("change",o,this);}if(v.getMetadata().getEvents().liveChange){v.attachEvent("liveChange",p,this);}}else{d.call(this);}return this;};c.prototype.destroyContent=function(){var O=this.getContent();if(O){O.unbindElement("$field");if(O.getMetadata().getEvents().change){O.detachEvent("change",o,this);}}this.destroyAggregation("content");d.call(this);return this;};c.prototype.setFieldHelp=function(v){var O=this.getFieldHelp();if(O){O.detachEvent("select",s,this);O.detachEvent("navigate",t,this);O.detachEvent("dataUpdate",u,this);}this.setAggregation("fieldHelp",v);if(v){v.attachEvent("select",s,this);v.attachEvent("navigate",t,this);v.attachEvent("dataUpdate",u,this);_.call(this,this.getValue());}var w=this.getAggregation("_content");if(w&&w.setShowValueHelp){w.setShowValueHelp(!!v);}return this;};c.prototype.destroyFieldHelp=function(){var O=this.getFieldHelp();if(O){O.detachEvent("select",s,this);O.detachEvent("navigate",t,this);}this.destroyAggregation("fieldHelp");var v=this.getAggregation("_content");if(v&&v.setShowValueHelp){v.setShowValueHelp(false);}return this;};c.prototype.getIdForLabel=function(){var v;var w=this._getContent();if(w){v=w.getId();}else{v=this.getId();}return v;};function o(v){var V;var w=true;if("value"in v.getParameters()){V=v.getParameter("value");}else{V=this.getValue();}if("valid"in v.getParameters()){w=v.getParameter("valid");}var x=this.getFieldHelp();if(x){x.close();if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){V=x.getSelectedKey();}}this.fireChange({value:V,valid:w});}function p(v){var V;var P;var w=false;if("value"in v.getParameters()){V=v.getParameter("value");}if("escPressed"in v.getParameters()){w=v.getParameter("escPressed");}if("previousValue"in v.getParameters()){P=v.getParameter("previousValue");}else{P=this.getValue();}var x=this.getFieldHelp();if(x){x.setFilterValue(V);if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){x.setSelectedKey("");}if(x.openByTyping()){x.open();}}this.fireLiveChange({value:V,escPressed:w,previousValue:P});}c.prototype.getFocusDomRef=function(){var v=this._getContent();if(v){return v.getFocusDomRef();}else{return this.getDomRef();}};c.prototype.setDataType=function(v){delete this._oDataType;this.setProperty("dataType",v,true);};c.mapEdmTypes={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};c.prototype._createDataType=function(v){var O=q.sap.getObject(v);if(!O){var N=c.mapEdmTypes[v];if(!N){q.sap.log.error("Field","dataType for "+v+" can not be created!");return null;}return this._createDataType(N);}return new O(this.getDataTypeFormatOptions(),this.getDataTypeConstraints());};c.prototype._getDataType=function(v){if(!this._oDataType){this._oDataType=this.getProperty("dataType");if(typeof this._oDataType==="string"){this._oDataType=this._createDataType(this._oDataType);}}return this._oDataType;};c.prototype.enhanceAccessibilityState=function(v,A){var P=this.getParent();if(P&&P.enhanceAccessibilityState){P.enhanceAccessibilityState(this,A);}};c.prototype.onsapup=function(v){var w=this.getFieldHelp();if(w){v.preventDefault();v.stopPropagation();w.navigate(-1);}};c.prototype.onsapdown=function(v){var w=this.getFieldHelp();if(w){v.preventDefault();v.stopPropagation();w.navigate(1);}};function r(v){var w=this.getFieldHelp();if(w){w.setFilterValue("");w.toggleOpen();if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){w.setSelectedKey(this.getValue());}}}function s(v){var V=v.getParameter("value");var A=v.getParameter("additionalValue");var K=v.getParameter("key");var N;var w;if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){N=K;w=V;}else{N=V;w=A;}this.setProperty("value",N);this.setAdditionalValue(w);this.fireChange({value:N,valid:true});}function t(v){var V=v.getParameter("value");var K=v.getParameter("key");var N;if(this.getDisplay()==sap.ui.mdc.FieldDisplay.Description){N=K;}else{N=V;}var w=this.getAggregation("_content");if(w&&w._$input){w._$input.val(V);w._doSelect();}this.fireLiveChange({value:N});}function u(){_.call(this,this.getValue());}return c;},true);};

/*
* ! SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2017 SAP SE. All rights reserved
*/
sap.ui.define(["./Mode"],function(M){var U=M.extend("sap.collaboration.components.feed.UserMode",{constructor:function(f){M.apply(this,[f]);this._oList.setModel(this._oJamModel);}});U.prototype.start=function(){this._oList.attachUpdateFinished(this.onGroupSelectorUpdateFinished,this);this._oList.attachUpdateFinished(this.onUpdateFinished,this);this._oList.bindItems({path:"/Groups",template:this._oListItemTemplate});this._oFeedController.enableGroupFeed();};U.prototype.stop=function(){this._oList.detachUpdateFinished(this.onUpdateFinished,this);};U.prototype._updateSelectedGroupInViewDataModel=function(g){this._oViewDataModel.setProperty("/groupSelected",{Id:g.Id,Name:g.Name,WebURL:g.WebURL});this._oViewDataModel.setProperty("/feedEndpoint","/Groups('"+g.Id+"')/FeedEntries");};U.prototype.getAddPostPath=function(){return"/Groups('"+this._oViewDataModel.getProperty("/groupSelected/Id")+"')/FeedEntries";};U.prototype.displayFeedSourceSelectorPopover=function(c){this._oList.setBusy(true);this._oJamModel.refresh(true);this._oGroupSelectPopover.openBy(c);};U.prototype.onGroupSelected=function(e){var g=e.getSource().getSelectedItem().getBindingContext().getObject();this._updateSelectedGroupInViewDataModel(g);this._oGroupSelectPopover.close();};U.prototype.onBatchCompleted=function(){};U.prototype.onGroupSelectorUpdateFinished=function(){var l=this._oList.getItems();var f;var F;if(l.length>0){f=l[0];this._oList.setSelectedItem(f);F=f.getBindingContext().getObject();this._updateSelectedGroupInViewDataModel(F);}this._oList.detachUpdateFinished(this.onGroupSelectorUpdateFinished,this);};U.prototype.onUpdateFinished=function(){this._oList.setBusy(false);};return U;},true);

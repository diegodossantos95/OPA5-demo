/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.require("sap.collaboration.library");jQuery.sap.require("sap.collaboration.components.utils.CommonUtil");jQuery.sap.require("sap.ui.core.UIComponent");jQuery.sap.require("sap.ui.commons.Button");jQuery.sap.declare("sap.collaboration.components.fiori.notification.Component");jQuery.sap.require("sap.m.MessageBox");sap.ui.core.UIComponent.extend("sap.collaboration.components.fiori.notification.Component",{metadata:{properties:{oDataServiceUrl:{type:"sap.ui.core.URI",defaultValue:"/sap/opu/odata/sap/SM_INTEGRATION_SRV"},numberOfNotifications:{type:"int",defaultValue:10},transitionInterval:{type:"int",defaultValue:10},refreshInterval:{type:"int",defaultValue:300},notificationsTargetUrl:{type:"sap.ui.core.URI"}}},init:function(){this.iMillisecondsPerSecond=1000;this.oCommonUtil=new sap.collaboration.components.utils.CommonUtil();this.oLangBundle=this.oCommonUtil.getLanguageBundle();this.sStyleClassPrefix="sapClbNotif";},onBeforeRendering:function(){},onAfterRendering:function(){jQuery.sap.log.debug("Notification Component properties:",this.mProperties.toString(),"sap.collaboration.components.fiori.notification.Component.onAfterRendering()");jQuery.sap.log.debug("oDataServiceUrl: "+this.getODataServiceUrl());jQuery.sap.log.debug("numberOfNotifications: "+this.getNumberOfNotifications());jQuery.sap.log.debug("transitionInterval: "+this.getTransitionInterval());jQuery.sap.log.debug("refreshInterval: "+this.getRefreshInterval());jQuery.sap.log.debug("notificationsTargetUrl: "+this.getNotificationsTargetUrl());if(!this.oNotificationView){this.oNotificationView=sap.ui.view({id:this.getId()+"_NotificationView",viewData:{controlId:this.getId(),langBundle:this.oLangBundle,oDataServiceUrl:this.getODataServiceUrl(),numberOfNotifications:this.getNumberOfNotifications(),transitionInterval:this.getTransitionInterval()*this.iMillisecondsPerSecond,refreshInterval:this.getRefreshInterval()*this.iMillisecondsPerSecond,notificationsTargetUrl:this.getNotificationsTargetUrl(),styleClassPrefix:this.sStyleClassPrefix},type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.collaboration.components.fiori.notification.Notification"});}this.oNotificationView.placeAt(this.getId());},exit:function(){this.deactivateNotificationRefreshAndTransition();this.oNotificationView.destroy();},render:function(r){r.write("<div id='"+this.getId()+"'");r.addClass(this.sStyleClassPrefix+"Component");r.addClass(this.sStyleClassPrefix+"CursorPointer");r.writeClasses();r.write(">");r.write("</div>");},deactivateNotificationRefreshAndTransition:function(){this.oNotificationView.getController().deactivateNotificationTransition();this.oNotificationView.getController().deactivateNotificationRefresh();}});

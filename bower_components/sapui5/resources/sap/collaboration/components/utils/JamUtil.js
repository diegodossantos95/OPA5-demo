/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.collaboration.components.utils.JamUtil");sap.ui.base.Object.extend("sap.collaboration.components.utils.JamUtil",{FeedRenderedControllerConstants:{jamWidgetCSS:{avatar:false,skin:"gr",post_mode:"inline",reply_mode:"inline",mobile_mode:true,live_update:true}},JamFeedType:{Follows:"follows",Company:"company",Group:"group",ObjectGroup:"context",Object:"external"},JamCallback:{autocomplete:"autocomplete",post_status:"post_status",link:"link"},JamEventType:{mouseover:"mouseover",mouseout:"mouseout",click:"click"},loadFeedWidgetScript:function(j,l,L){var s=this;var S=j+"/assets/feed_widget_v1.js";jQuery.sap.includeScript(S,"sap.collaboration.feed.JamFeedWidget",l,L);jQuery.sap.log.info("Jam Feed Widget Script Loading Asynchronously","sap.collaboration.components.utils.JamUtil.loadFeedWidgetScript()");},initializeJamWidget:function(sJamURL){try{this.sapjam=eval('sapjam');this.sapjam.feedWidget.init(sJamURL+"/widget/v1/feed","single_use_token");jQuery.sap.log.info("Jam Feed Widget Initialized","sap.collaboration.components.utils.JamUtil.initializeJamWidget()");}catch(oError){jQuery.sap.log.error(oError,"","sap.collaboration.components.utils.JamUtil.initializeJamWidget()");throw oError;}},createJamWidget:function(sWidgetContainerID,oWidgetData){try{jQuery.sap.log.debug("Jam Feed Widget Properties:","","sap.collaboration.components.utils.JamUtil.createJamWidget()");jQuery.sap.log.debug("type: "+JSON.stringify(oWidgetData.type));jQuery.sap.log.debug("group_id: "+JSON.stringify(oWidgetData.group_id));jQuery.sap.log.debug("external_id: "+JSON.stringify(oWidgetData.external_id));jQuery.sap.log.debug("external_type: "+JSON.stringify(oWidgetData.external_type));jQuery.sap.log.debug("external_object: "+JSON.stringify(oWidgetData.external_object));this.sapjam=eval('sapjam');this.sapjam.feedWidget.create(sWidgetContainerID,oWidgetData);}catch(oError){jQuery.sap.log.error(oError,"","sap.collaboration.components.utils.JamUtil.createJamWidget()");throw oError;}},prepareWidgetData:function(j,f,g,b){var w;w={type:f,avatar:this.FeedRenderedControllerConstants.jamWidgetCSS.avatar,live_update:this.FeedRenderedControllerConstants.jamWidgetCSS.live_update,post_mode:this.FeedRenderedControllerConstants.jamWidgetCSS.post_mode,reply_mode:this.FeedRenderedControllerConstants.jamWidgetCSS.reply_mode,mobile_mode:this.FeedRenderedControllerConstants.jamWidgetCSS.mobile_mode,hide_bookmark:true,single_use_token:j};switch(f){case sap.collaboration.FeedType.follows:case sap.collaboration.FeedType.company:w.type=f;break;case sap.collaboration.FeedType.group:case sap.collaboration.FeedType.objectGroup:w.type=this.JamFeedType.Group;w.group_id=g;break;case sap.collaboration.FeedType.object:w.type=this.JamFeedType.Object;if(!b){var E=new Error("Object is undefined");jQuery.sap.log.error(E,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw E;}if(!b.id){var o=new Error("Property 'id' is undefined");jQuery.sap.log.error(o,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw o;}if(!b.type){var a=new Error("Property 'type' is undefined");jQuery.sap.log.error(a,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw a;}try{w.external_id=b.id;w.external_type=b.type;w.external_object=b;}catch(c){jQuery.sap.log.error(c,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw c;}break;default:var e="Feed Type not supported";jQuery.sap.log.error(e,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw new Error(e);}return w;},getJamSinglelUseTokens:function(c,a,A,C){var s=this;var x=new window.XMLHttpRequest();var S=c+"/single_use_tokens";x.open("POST",S,A);x.onreadystatechange=a;x.setRequestHeader("x-csrf-token",C);x.send();},getCSRFToken:function(e,a,A){var s=this;var x=new window.XMLHttpRequest();x.open("GET",e,A);x.onreadystatechange=a;x.setRequestHeader("x-csrf-token","fetch");x.send();}});

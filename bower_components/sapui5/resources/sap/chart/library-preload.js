sap.ui.predefine('sap/chart/coloring/ColorPalette',[],function(){"use strict";var P={};P.CRITICALITY={Positive:['sapUiChartPaletteSemanticGoodLight3','sapUiChartPaletteSemanticGoodLight2','sapUiChartPaletteSemanticGoodLight1','sapUiChartPaletteSemanticGood','sapUiChartPaletteSemanticGoodDark1','sapUiChartPaletteSemanticGoodDark2'],Critical:['sapUiChartPaletteSemanticCriticalLight3','sapUiChartPaletteSemanticCriticalLight2','sapUiChartPaletteSemanticCriticalLight1','sapUiChartPaletteSemanticCritical','sapUiChartPaletteSemanticCriticalDark1','sapUiChartPaletteSemanticCriticalDark2'],Negative:['sapUiChartPaletteSemanticBadLight3','sapUiChartPaletteSemanticBadLight2','sapUiChartPaletteSemanticBadLight1','sapUiChartPaletteSemanticBad','sapUiChartPaletteSemanticBadDark1','sapUiChartPaletteSemanticBadDark2'],Neutral:['sapUiChartPaletteSemanticNeutralLight3','sapUiChartPaletteSemanticNeutralLight2','sapUiChartPaletteSemanticNeutralLight1','sapUiChartPaletteSemanticNeutral','sapUiChartPaletteSemanticNeutralDark1','sapUiChartPaletteSemanticNeutralDark2']};P.EMPHASIS={Highlight:"sapUiChartPaletteQualitativeHue2",Others:"sapUiChartPaletteQualitativeHue1"};return P;});
sap.ui.predefine('sap/chart/coloring/ColoringUtils',['sap/chart/ChartLog','sap/chart/data/TimeDimension'],function(C,T){"use strict";var t=jQuery.type;var U={};
U.find=function(M,l){for(var i=0;i<l.length;i++){if(M===l[i].getName()){return l[i];}}return null;};
U.isNumber=function(){for(var i=0;i<arguments.length;i++){if(t(arguments[i])!=='number'){return false;}}return true;};
U.thresholdValue=function(v){v=v.filter(function(e){return v!=null;});var s=v.map(function(e){return t(e)==="string";});return function(o,A){for(var i=0;i<v.length;i++){var r;if(s[i]){if(o[v[i]]!=null){r=o[v[i]];}else{r=A[v[i]];}}else{r=v[i];}if(r!=null){return r;}}};};
U.isInRange=function(v,l,e,i,j){if(!U.isNumber(v,l,e)){return false;}var k=i?(l<=v):(l<v);var n=j?(v<=e):(v<e);return k&&n;};
U.assignColor=function(e,l){switch(l){case 1:return[e[3]];case 2:return[e[1],e[3]];case 3:return[e[1],e[3],e[5]];case 4:return e.slice(1,5);case 5:return e.slice(1,6);case 6:return e.slice(0,6);default:return null;}};
U.assignUnmentionedColor=function(e,l){switch(l){case 1:return[e[1]];case 2:return[e[1],e[5]];case 3:return[e[1],e[2],e[4]];case 4:return[e[1],e[2],e[4],e[5]];case 5:return e.filter(function(i){return i!==3;});default:return null;}};
U.dimOrMsrUse=function(o,p,D,s){var t=Object.keys(o).filter(function(e){return s.indexOf(e)>-1;});if(p.dimension&&p.measure){throw new C('error','activeColoring','Either "dimension" or "measure" can be set in activeColoring.parameters, but not both of them.');}else if(p.measure){t='MeasureValues';}else if(p.dimension){t='DimensionValues';}else if(t.length>1){throw new C('error','colorings.Criticality','Both "MeasureValues" and "DimensionValues" exist in Criticality, please resolve by activeColoring property.');}else if(t.length===1){t=t[0];}return t;};
var _=function(s,e,i,p,j){s.forEach(function(v){if(e.indexOf(v)<0){throw new C('error',i,p+v+j);}});};var c=function(e,M){var v=M.map(function(o){return o.getName();});_(e,v,'activeColoring.parameters.measure','Active measure, ',', should be visible.');};var a=function(e,D){var v=D.map(function(o){return o.getName();});_(e,v,'activeColoring.parameters.dimension','Active dimension, ',', should be visible.');};var m=function(e,i){var j=Object.keys(i);_(e,j,'activeColoring.parameters.measure','Active measure, ',', should be configured in coloring.');};var d=function(e,i){var j=Object.keys(i);_(e,j,'activeColoring.parameters.dimension','Active dimension, ',', should be configured in coloring.');};var b=function(e){if(e.length>1){throw new C('error','activeColoring.parameters.dimension','Multiple dimensions are defined. Please resolve by activeColoring property.');}};var f=function(e,v,t){var D=U.find(e,v);if(D instanceof T&&D.getRole()==='category'){throw new C('error','Colorings.'+t+'.DimensionValues','Do not support coloring on timeDimension, '+D.getName()+'.');}};var g=function(o){if(o.bMBC){throw new C('error','Colorings','Heatmap only support Criticality.MeasureValues.ConstantThresholds.');}};var h=function(D,o){if(!o.bWaterfall&&((o.bShowUnmentionedMsr&&D.aMsr.length>1)||o.bHasOtherSeriesDim||o.bIsPie&&D.aDim.length>1)){throw new C('error','Colorings.'+o.type+'.DimensionValues','Semantic coloring could not be applied if chart already has coloring.');}};
U.checkColoringDimension=function(A,D,e,o){var v=D.aDim;a(A,v);d(A,e);b(A);f(A[0],v,o.type);g(o);h(D,o);};
U.checkColoringMeasure=function(A,v,e){c(A,v);m(A,e);};
U.notIn=_;return U;});
sap.ui.predefine('sap/chart/coloring/criticality/DimensionValues',['sap/chart/coloring/ColoringUtils','sap/chart/ChartLog','sap/chart/data/TimeDimension','sap/chart/coloring/CriticalityType'],function(C,a,T,b){"use strict";var t=jQuery.type;var D={};var v=function(c,A,d,o){var e=jQuery.extend({},o),h=d.aDim.some(function(j){return j._getFixedRole()==="series"&&j.getName()!==A[0];});e.bHasOtherSeriesDim=h;e.type='Criticality';C.checkColoringDimension(A,d,c,e);var f=c[A[0]],g=Object.keys(f),i=C.find(A[0],d.aDim),I=i.getRole()==='series'?true:false;g.forEach(function(j){var k=f[j].Values,l=f[j].Legend;k=t(k)==='array'?k:[k];if(k.length>1&&!l){throw new a('error','Colorings.Criticality.DimensionValues','Legend is mandatory when one criticality type has multiple values.');}if((I||o.bIsPie)&&k.length>1){throw new a('error','Colorings.Criticality.DimensionValues','Criticality on Series Dimension, only single value could be assigned to each CriticalityType.');}});};
D.qualify=function(c,d,o,e){v(c,d,o,e);var s=d[0],f;if(s){f={dim:s,setting:c};}return f;};
D.parse=function(c,d,s,l,o){var S={},L={},e=c.dim,f=[],g=c.setting[e],n=[];jQuery.each(g,function(k,i){var j=(t(i)!=="array")?[i]:i;if(k!==b.Neutral){S[k]=j.map(function(p){return(t(p.Values)==="array")?p.Values:[p.Values];});f=Array.prototype.concat.apply(f,S[k]);}L[k]=j.map(function(p){var V=(t(p.Values)==="array")?p.Values[0]:p.Values;var q=(p.Legend!=null)?p.Legend:V;return q;});});if(g.Neutral){n=(t(g.Neutral.Values)==="array")?g.Neutral.Values:[g.Neutral.Values];}var N=function(i){return f.indexOf(i[e])===-1;};function h(V){return function(i){return V.indexOf(i[e])!==-1;};}var m={Negative:(S.Negative||[]).map(h),Critical:(S.Critical||[]).map(h),Positive:(S.Positive||[]).map(h),Neutral:[N]};return{callbacks:m,legend:L,aCriticalityValues:f.concat(n),status:s};};
D.getContextHandler=function(c,l,o){var d=c.dim,e=c.parsed.aCriticalityValues;return function(f){var V=f.getProperty(d),g=this.getDimensionByName(d);if(e.indexOf(V)===-1){if(g._getFixedRole()==="series"||o.bIsPie){var h=new a('error','Colorings.Criticality.DimensionValues','Criticality on Series Dimension, all series must be applied coloring.');c.chartLog=h;}else{c.parsed.legend.Neutral=l.getText("COLORING_TYPE_OTHER");}}};};
return D;});
sap.ui.predefine('sap/chart/coloring/criticality/measureValues/MeasureUtils',['sap/chart/coloring/ColoringUtils','sap/chart/coloring/criticality/measureValues/ThresholdsUtils','sap/chart/ChartLog','sap/chart/coloring/CriticalityType','sap/chart/data/MeasureSemantics'],function(C,T,a,b,M){"use strict";var t=jQuery.type;var c={Static:{},Calculated:{},DynamicThresholds:{},ConstantThresholds:{},Unmentioned:{}};var S=['Maximize','Minimize','Target'];
c.Static.validate=function(o,m,D,e,h){var j=o[m].Static;var k=function(q,r){if(p[r]===m){n=true;if(p.staticType){if(p.staticType!==j){var u='';Object.keys(M).forEach(function(q,v,w){var r=M[q];if(p[r]){if(v!==(w.length-1)){u+=p[r]+', ';}else{u+=p[r];}}});throw new a('error','Colorings.Criticality.Static','When '+u+' have semantic relationship, they must use the same Criticality type.');}}else{p.staticType=j;if(h[j]){throw new a('error','Colorings.Criticality.Static','Measures, '+h[j]+' and '+m+', which use Static Criticality must have different types.');}else{h[j]=m;}}return false;}};var n=false;for(var i=0;i<e.length;++i){var p=e[i];jQuery.each(M,k);if(n){break;}}return{supportMultiMsr:true};};
c.Static.parse=function(o,e,p){var m=o.msr?o.msr.getName():undefined;var h=o.settings[o.type];p.callbacks=c.Static.getCallbacks(h,m);var D=o.msr.getLabel()||o.msr.getName();var i=o.settings.Legend||{};p.legend[h]=(i[h]!=null)?i[h]:D;};
c.Static.getCallbacks=function(e,m){var h={};h[e]=[function(o){return o.hasOwnProperty(m);}];return h;};
c.Calculated.validate=function(o,m,D){var e=o[m].Calculated;var h=D.allDim.filter(function(i){return i===e;})[0];if(!h){throw new a('error','Colorings.Criticality.Calculated','Calculated property, '+e+', does not exist in data model.');}};
c.Calculated.parse=function(o,e,p,m){var h=o.settings[o.type];if(!C.find(h,e.aDims)){p.additionalDimensions.push(h);}p.status=e.oStatus;};
c.Calculated.getCallbacks=function(p,e,m){var h=function(o){return(o[p]===e)&&o.hasOwnProperty(m);};return[h];};
c.Calculated.getContextHandler=function(e,m,L){var o=e[0];var h=o.settings[o.type];return function(i){var j=o.parsed.status;j.legend=j.legend||{};j.callbacks=j.callbacks||{};o.parsed.legend=j.legend;o.parsed.callbacks=j.callbacks;var k=i.getProperty(h);if(b[k]){var n=this.getDimensionByName(h);var D=this.getDimensionByName(h).getDisplayText();e.legendTitle=e.legendTitle||n.getLabel();var p=n.getTextProperty();if(p&&D){var q=i.getProperty(p);o.parsed.legend[k]=q;}else if(k){o.parsed.legend[k]=L.getText("COLORING_TYPE_"+k.toUpperCase());}var r=o.msr.getName();var u=c.Calculated.getCallbacks(h,k,r);o.parsed.callbacks[k]=u;}};};
c.DynamicThresholds.validate=function(o,m,D){var h=D.allMsr;var i=[],j=o[m].DynamicThresholds,k;if(S.indexOf(j.ImprovementDirection)>-1){k=j.ImprovementDirection;}else{throw new a('error','Colorings.Criticality.DynamicThresholds','ImprovementDirection should be one of \'Maximize\', \'Minimize\' and \'Target\'.');}var n=[j.ToleranceRangeLowValue,j.DeviationRangeLowValue,j.AcceptanceRangeLowValue];var p=[j.ToleranceRangeHighValue,j.DeviationRangeHighValue,j.AcceptanceRangeHighValue];switch(k){case"Maximize":i=n;break;case"Minimize":i=p;break;case"Target":i=n.concat(p);break;default:}if(C.isNumber.apply(null,i)){throw new a('error','Colorings.Criticality.DynamicThresholds','Invalid Thresholds settings.');}i=i.filter(function(e){return typeof e=="string";});C.notIn(i,h,'Colorings.Criticality.DynamicThresholds','Thresholds measure, ',', does not exist in data model.');};
c.DynamicThresholds.parse=function(o,e,p,m,L){var h=o.settings[o.type];var i=o.msr?o.msr.getName():undefined;var D=h.ImprovementDirection.toLowerCase();var j={lo:h.ToleranceRangeLowValue,hi:h.ToleranceRangeHighValue};var k={lo:h.DeviationRangeLowValue,hi:h.DeviationRangeHighValue};var A={lo:h.AcceptanceRangeLowValue,hi:h.AcceptanceRangeHighValue};T.fillOmit(A,j,k);p.additionalMeasures=[A.lo,A.hi,j.lo,j.hi,k.lo,k.hi].filter(function(v){return t(v)==='string'&&e.aMsrs.filter(function(q){return q.getName()===v;}).length==0;});p.callbacks=T.improvement(D,i,A,j,k);var n={};jQuery.each(b,function(q,v){n[v]=L.getText("COLORING_TYPE_"+v.toUpperCase());});p.legend=jQuery.extend(true,{},n,o.settings.Legend);};
c.DynamicThresholds.getContextHandler=function(e,m,L){var o=e[0],h=o.settings[o.type],D=h.ImprovementDirection.toLowerCase();function _(i,k){var r;if(typeof k==="number"){r=k;}else{r=k?i.getProperty(k):null;if(typeof r==="string"){r=Number.parseFloat(r);}}return r;}return function(i){var j={};j.lo=_(i,h.ToleranceRangeLowValue);j.hi=_(i,h.ToleranceRangeHighValue);var k={};k.lo=_(i,h.DeviationRangeLowValue);k.hi=_(i,h.DeviationRangeHighValue);var A={};A.lo=_(i,h.AcceptanceRangeLowValue);A.hi=_(i,h.AcceptanceRangeHighValue);T.fillOmit(A,j,k);T.checkThreshold(D,A,j,k);};};
c.ConstantThresholds.validate=function(o,m){var e=o[m].ConstantThresholds;if(S.indexOf(e.ImprovementDirection)===-1){throw new a('error','Colorings.Criticality.ConstantThresholds','ImprovementDirection should be one of \'Maximize\', \'Minimize\' and \'Target\'.');}return{supportHeatMap:true};};
c.ConstantThresholds.parse=function(o,e,p,m,L){var h=o.settings[o.type];var i=o.msr?o.msr.getName():undefined;var j=o.msr?o.msr.getLabel()||o.msr.getName():undefined;var D=h.ImprovementDirection.toLowerCase();var k={lo:o.byAggregation.ToleranceRangeLowValue,hi:o.byAggregation.ToleranceRangeHighValue};var n={lo:o.byAggregation.DeviationRangeLowValue,hi:o.byAggregation.DeviationRangeHighValue};var A={lo:o.byAggregation.AcceptanceRangeLowValue,hi:o.byAggregation.AcceptanceRangeHighValue};T.fillOmit(A,k,n);T.checkThreshold(D,A,k,n,true);if(m){p.legend=T.MBCimprovement(D,A,k,n);}else{p.callbacks=T.improvement(D,i,A,k,n);p.legend=c.ConstantThresholds.getLegend(D,j,A,k,n,L);}};
var g="\u2265";var l="<";var d="\u2264";var f=">";var s={"<":">",">":"<","\u2265":"\u2264","\u2264":"\u2265"};
c.ConstantThresholds.getLegend=function(D,m,A,o,h,L){var i={};var j=h.hi;var k=h.lo;var n=o.hi;var p=o.lo;var q=A.hi;var r=A.lo;function u(x,y,z){var B=x.length;var E=x[0]===Number.POSITIVE_INFINITY;var F=x[0]===Number.NEGATIVE_INFINITY;var G=x[B-1]===Number.POSITIVE_INFINITY;var H=x[B-1]===Number.NEGATIVE_INFINITY;if(z&&x[0]===x[B-1]){return"";}if(y){if(B===5&&!(F&&G)){if(G||H){x=x.slice(0,3);}if(E||F){x=x.slice(2);}if(x.length<=1){return"";}}else if(B===3&&(E||F||G||H)){return"";}}x=x.map(function(e){if(e===Number.POSITIVE_INFINITY){return L.getText("POSITIVE_INFINITY");}else if(e===Number.NEGATIVE_INFINITY){return L.getText("NEGATIVE_INFINITY");}return e;});if(x.length===3&&C.isNumber(x[0])){var I=s[x[1]];x=[x[2],I,x[0]];}return x.join(" ");}var v=function(e){return e&&e.length>0;};var w=function(e){return e.filter(v).join(' , ');};switch(D){case'maximize':i={Positive:u([m,g,r]),Critical:u([k,d,m,l,p],true),Neutral:u([p,d,m,l,r],true),Negative:u([m,l,k])};break;case'minimize':i={Positive:u([m,d,q]),Critical:u([n,l,m,d,j],true),Neutral:u([q,l,m,d,n],true),Negative:u([m,f,j])};break;case'target':i={Positive:u([r,d,m,d,q],true),Critical:w([u([k,d,m,l,p],true,true),u([n,l,m,d,j],true,true)]),Neutral:w([u([p,d,m,l,r],true,true),u([q,l,m,d,n],true,true)]),Negative:w([u([m,l,k],true),u([m,f,j],true)])};break;default:}return i;};
c.ConstantThresholds.getContextHandler=function(e,m){if(m){var o=e[0];var h=o.msr.getName();var L=o.parsed.legend;return function(i){var v=i.getProperty(h);L.min=Math.min(L.min,v);L.max=Math.max(L.max,v);};}else{return null;}};
return c;});
sap.ui.predefine('sap/chart/coloring/criticality/measureValues/MeasureValues',['sap/chart/coloring/ColoringUtils','sap/chart/coloring/ColorPalette','sap/chart/coloring/criticality/measureValues/MeasureUtils','sap/chart/ChartLog','sap/chart/data/MeasureSemantics'],function(C,a,M,b,c){"use strict";var d={};var S=["Static","Calculated","DynamicThresholds","ConstantThresholds"];
function e(t,T,m,D,A,h,o,j){var r={supportMultiMsr:false,supportHeatMap:false};var k=A.length>1;if(M[t].validate){jQuery.extend(r,M[t].validate(h,m,D,T,j));}if(k&&!r.supportMultiMsr){throw new b('error','Colorings.Criticality','Only support multiple active measures when using Static Criticality.');}if(o.bMBC&&!r.supportHeatMap){throw new b('error','Colorings','Heatmap only support Criticality.MeasureValues.ConstantThresholds.');}}
var v=function(h,t,D,A,o){var V=D.aMsr;C.checkColoringMeasure(A,V,h);var j=[];A.forEach(function(m,k){var l=Object.keys(h[m]).filter(function(p){return S.indexOf(p)>-1;}).sort();var n=i(l);if(l.length>1&&!n){throw new b('error','Colorings.Criticality.MeasureValues','The combination of "DynamicThresholds"and "ConstantThresholds" or only one of "Static", "Calculated", "DynamicThresholds", or "ConstantThresholds" can be applied to the measure, '+m+'.');}if(!n&&l.length===1){e(l[0],t,m,D,A,h,o,j);}});function H(k){return k.some(function(l){return l._getFixedRole()==="series";});}if(H(D.aDim)||(o.bTimeChart&&o.bWaterfall&&D.aDim.length>1)||(o.bIsPie&&D.aDim.length)){throw new b('error','colorings.Criticality.MeasureValues','Semantic coloring could not be applied if chart already has coloring.');}};
function i(t){return t.length===2&&t[0]=="ConstantThresholds"&&t[1]==="DynamicThresholds";}
function f(h,m){var o=h.filter(function(j){return j.msr.getName()===m;})[0];return o;}
function g(h,t,m){if(h.sMethod==='Static'){var E=[];t.forEach(function(T){jQuery.each(c,function(j,k){var s=T[k];if(s){var o=f(h,T[k]);if(!o){jQuery.each(c,function(l,n){if(k!==n){var p=f(h,T[n]);if(p){var q=m.filter(function(q){return q.getName()===s;})[0];var r={msr:q,settings:{Static:p.settings.Static},type:'Static'};E.push(r);}}});}else{T.criticalityType=o.settings.Static;}}});});h.push.apply(h,E);}}
d.qualify=function(o,t,A,D,s,h){v(o,t,D,A,h);var j=[],m=[],k=D.aDim.map(function(l){return l.getName();}).sort();jQuery.each(o,function(l,n){var p=Object.keys(n);var q=C.find(l,D.aMsr);var E=p.filter(function(B){return B!=="Legend";}).sort();if(A.length&&A.indexOf(l)===-1){return;}var r=false,K;for(var w=0;w<E.length&&!r;w++){K=E[w];j.sMethod=K;if(K==="ConstantThresholds"){var x=null,G=null;for(var y=0;y<n[K].AggregationLevels.length;y++){if(n[K].AggregationLevels[y].VisibleDimensions){var z=n[K].AggregationLevels[y].VisibleDimensions.sort();if(z.join(",")===k.join(",")){x=n[K].AggregationLevels[y];}}else{G=n[K].AggregationLevels[y];}}x=x||G;if(x){r=true;if(!h.bFiltered){j.push({type:K,msr:q,settings:n,byAggregation:x});m.push(q.getName());}}}else{r=true;j.push({type:K,msr:q,settings:n});m.push(q.getName());}}if(!r){throw new b("error",'Colorings.Criticality.MeasureValues.ConstantThresholds',"No aggregation levels matched with current visible dimensions.");}if(i(E)){e(K,t,q.getName(),D,A,o,h);}});g(j,t,D.aMsr);if(j.length){var u=0;t.forEach(function(T){var l=false;jQuery.each(c,function(n,p){if(m.indexOf(T[p])>-1){l=true;return false;}});if(!l){T.iUnMentionedIndex=u++;}});if(u>3){throw new b("error",'Colorings.Criticality.MeasureValues',"Too many unmentioned measures (the maximum number is 3).");}}j.bShowUnmentionedMsr=h.bShowUnmentionedMsr;return j;};
d.parse=function(o,D,s,O,l){var m=O.bMBC,h={aMsrs:D.aMsr,aDims:D.aDim,oStatus:s},p={msr:o.msr,callbacks:{},additionalDimensions:[],legend:{}};M[o.type].parse(o,h,p,m,l);return p;};
d.getContextHandler=function(s,h,m,l){if(M[s].getContextHandler){return M[s].getContextHandler(h,m,l);}else{return null;}};
return d;});
sap.ui.predefine('sap/chart/coloring/criticality/measureValues/ThresholdsUtils',['sap/chart/coloring/ColoringUtils','sap/chart/coloring/CriticalityType','sap/chart/ChartLog'],function(C,a,b){"use strict";var T={};var M={formulas:{}};var N=a.Negative;var c=a.Critical;var P=a.Positive;var d=a.Neutral;
function g(u,s,l){return{upperBound:u,CriticalityType:s};}
T.fillOmit=function(A,t,D){D.hi=(D.hi==undefined)?Number.POSITIVE_INFINITY:D.hi;D.lo=(D.lo==undefined)?Number.NEGATIVE_INFINITY:D.lo;t.hi=(t.hi==undefined)?D.hi:t.hi;t.lo=(t.lo==undefined)?D.lo:t.lo;A.hi=(A.hi==undefined)?t.hi:A.hi;A.lo=(A.lo==undefined)?t.lo:A.lo;};
T.checkThreshold=function(D,A,t,o,e){var h;var l=C.isNumber(A.lo,o.lo,t.lo);var i=C.isNumber(A.hi,t.hi,o.hi);switch(D){case'maximize':h=l&&(o.lo<=t.lo&&t.lo<=A.lo);break;case'minimize':h=i&&(A.hi<=t.hi&&t.hi<=o.hi);break;case'target':h=(l&&i)&&(o.lo<=t.lo)&&(t.lo<=t.hi)&&(t.hi<=o.hi)&&(t.lo<=A.lo)&&(A.lo<=A.hi)&&(A.hi<=t.hi);break;default:}if(!h){var n=e?"ConstantThresholds":"DynamicThresholds";throw new b('error','Colorings.Criticality.'+n,'Invalid Thresholds settings.');}};
T.MBCimprovement=function(D,A,t,o){var h=o.hi;var i=o.lo;var j=t.hi;var k=t.lo;var l=A.hi;var m=A.lo;var s=[];var B,n;switch(D){case'maximize':B=[i,k,m,Number.POSITIVE_INFINITY];n=[N,c,d,P];break;case'minimize':B=[l,j,h,Number.POSITIVE_INFINITY];n=[P,d,c,N];break;case'target':B=[i,k,m,l,j,h,Number.POSITIVE_INFINITY];n=[N,c,d,P,d,c,N];break;default:throw new Error('Unsupported ImprovementDirection: '+D);}var r=[];switch(D){case'maximize':r[0]=(i===-Infinity);r[1]=(i===k);r[2]=(k===m);r[3]=(m===Infinity);break;case'minimize':r[0]=(l===-Infinity);r[1]=(l===j);r[2]=(j===h);r[3]=(h===Infinity);break;case'target':r[0]=(i===-Infinity);r[1]=(i===k);r[2]=(k===m);r[3]=(m===l);r[4]=(l===j);r[5]=(j===h);r[6]=(h===Infinity);break;default:throw new Error('Unsupported ImprovementDirection: '+D);}B=B.filter(function(e,p){return!r[p];});n=n.filter(function(e,p){return!r[p];});s=n.map(function(e,p){return g(B[p],e,0);});return{segments:s,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};};
function f(e){return[function(o,h){return e(o,h);}];}
T.improvement=function(D,m,A,t,o){var e=o.hi;var h=o.lo;var i=t.hi;var j=t.lo;var k=A.hi;var l=A.lo;var n=C.thresholdValue([e,Number.POSITIVE_INFINITY]);var p=C.thresholdValue([h,Number.NEGATIVE_INFINITY]);var q=C.thresholdValue([i,e,Number.POSITIVE_INFINITY]);var r=C.thresholdValue([j,h,Number.NEGATIVE_INFINITY]);var s=C.thresholdValue([k,i,e,Number.POSITIVE_INFINITY]);var u=C.thresholdValue([l,j,h,Number.NEGATIVE_INFINITY]);var v={};switch(D){case'maximize':v["Negative"]=(h==-Infinity)?null:f(M.formulas.maximize.negative(m,p));v["Critical"]=(h==j)?null:f(M.formulas.maximize.critical(m,p,r));v["Neutral"]=(j==l)?null:f(M.formulas.maximize.critical(m,r,u));v["Positive"]=(l==Infinity)?null:f(M.formulas.maximize.positive(m,u));break;case'minimize':v["Negative"]=(e==Infinity)?null:f(M.formulas.minimize.negative(m,n));v["Critical"]=(i==e)?null:f(M.formulas.minimize.critical(m,q,n));v["Neutral"]=(k==i)?null:f(M.formulas.minimize.neutral(m,s,q));v["Positive"]=(k==-Infinity)?null:f(M.formulas.minimize.positive(m,s));break;case'target':v["Negative"]=(h==-Infinity&&e===Infinity)?null:f(M.formulas.target.negative(m,p,n));v["Critical"]=(h==j&&i==e)?null:f(M.formulas.target.critical(m,p,r,q,n));v["Neutral"]=(j==l&&k==i)?null:f(M.formulas.target.neutral(m,r,u,s,q));v["Positive"]=f(M.formulas.target.positive(m,u,s));break;default:throw new Error('Unsupported ImprovementDirection: '+D);}return v;};
M.formulas.maximize={negative:function(m,D){return function(o,A){var n=o[m];var e=D(o,A);return C.isInRange(n,Number.NEGATIVE_INFINITY,e,null,false);};},critical:function(m,D,t){return function(o,A){var n=o[m];var e=D(o,A);var h=t(o,A);return C.isInRange(n,e,h,true,false);};},neutral:function(m,t,A){return function(o,e){var n=o[m];var h=t(o,e);var i=A(o,e);return C.isInRange(n,h,i,true,false);};},positive:function(m,A){return function(o,e){var n=o[m];var h=A(o,e);return C.isInRange(n,h,Number.POSITIVE_INFINITY,true);};}};M.formulas.minimize={negative:function(m,D){return function(o,A){var n=o[m];var e=D(o,A);return C.isInRange(n,e,Number.POSITIVE_INFINITY,false);};},critical:function(m,t,D){return function(o,A){var n=o[m];var e=t(o,A);var h=D(o,A);return C.isInRange(n,e,h,false,true);};},neutral:function(m,A,t){return function(o,e){var n=o[m];var h=A(o,e);var i=t(o,e);return C.isInRange(n,h,i,false,true);};},positive:function(m,A){return function(o,e){var n=o[m];var h=A(o,e);return C.isInRange(n,Number.NEGATIVE_INFINITY,h,null,true);};}};M.formulas.target={negative:function(m,D,e){return function(o,A){var n=o[m];var h=D(o,A);var i=e(o,A);var j=C.isInRange(n,Number.NEGATIVE_INFINITY,h,null,false);var k=C.isInRange(n,i,Number.POSITIVE_INFINITY,false);return j||k;};},critical:function(m,D,t,e,h){return function(o,A){var n=o[m];var i=D(o,A),j=t(o,A);var k=e(o,A),l=h(o,A);var p=C.isInRange(n,i,j,true,false);var q=C.isInRange(n,k,l,false,true);return p||q;};},neutral:function(m,t,A,e,h){return function(o,i){var n=o[m];var j=t(o,i),k=A(o,i);var l=e(o,i),p=h(o,i);var q=C.isInRange(n,j,k,true,false);var r=C.isInRange(n,l,p,false,true);return q||r;};},positive:function(m,A,e){return function(o,h){var n=o[m];var i=A(o,h);var j=e(o,h);return C.isInRange(n,i,j,true,true);};}};return T;});
sap.ui.predefine('sap/chart/coloring/emphasis/DimensionValues',['sap/chart/coloring/ColoringUtils','sap/chart/coloring/criticality/DimensionValues','sap/chart/ChartLog'],function(C,D,a){"use strict";var t=jQuery.type;var b={};var v=function(c,A,d,o){var e=jQuery.extend({},o);e.bHasOtherSeriesDim=d.aDim.some(function(h){return h._getFixedRole()==="series"&&h.getName()!==A[0];});e.type='Emphasis';C.checkColoringDimension(A,d,c,e);var f=c[A[0]],g=f.Values,l=f.Legend||{};if(g.length>1&&!l.Highlighted){throw new a('error','Colorings.Emphasis.DimensionValues','Legend.Highlighted is mandatory when Highlight has multiple values.');}};
b.qualify=function(c,d,o,e){v(c,d,o,e);var f;if(d[0]){f={dim:d[0],setting:c};}return f;};
b.parse=function(c,l){var L={},d=c.dim,o=c.setting[d],e=o.Values;var h=(t(e)==="array")?e:[e];var H=function(f){return h.indexOf(f[d])>-1;};if(o.Legend&&o.Legend.Highlighted!=null){L.Highlight=o.Legend.Highlighted;}else{L.Highlight=h[0];}if(o.Legend&&o.Legend.Others){L.Others=o.Legend.Others;}else{L.Others=l.getText("COLORING_TYPE_OTHER");}var m={Highlight:H};return{callbacks:m,legend:L};};
return b;});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/chart/AutoScaleMode',function(){"use strict";var A={DataSet:"DataSet",VisibleData:"VisibleData"};return A;},true);
sap.ui.predefine('sap/chart/Chart',['sap/chart/library','sap/viz/ui5/controls/VizFrame','sap/viz/ui5/controls/common/BaseControl','sap/viz/ui5/data/Dataset','sap/viz/ui5/data/FlattenedDataset','sap/viz/ui5/data/DimensionDefinition','sap/viz/ui5/data/MeasureDefinition','sap/chart/data/Dimension','sap/chart/data/TimeDimension','sap/chart/data/Measure','sap/ui/model/analytics/ODataModelAdapter','sap/chart/utils/RoleFitter','sap/chart/utils/ChartUtils','sap/chart/utils/ChartTypeAdapterUtils','sap/chart/utils/DateFormatUtil','sap/chart/utils/DataSourceUtils','sap/chart/utils/SelectionAPIUtils','sap/chart/utils/MeasureSemanticsUtils','sap/viz/ui5/controls/common/feeds/FeedItem','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/model/analytics/odata4analytics','sap/chart/TimeUnitType','sap/chart/coloring/Colorings','sap/chart/ChartLog','sap/chart/pagination/PagingController','sap/ui/core/LocaleData','sap/chart/SeriesColorTracker','sap/viz/ui5/format/ChartFormatter','sap/chart/utils/ValueAxisScaleUtils','sap/chart/AutoScaleMode','sap/chart/ScaleBehavior','sap/viz/ui5/utils/CommonUtil'],function(l,V,B,D,F,a,M,b,T,c,O,R,C,f,g,h,S,n,q,r,s,t,u,w,x,P,L,y,z,A,E,G,H){"use strict";
var I=B.extend("sap.chart.Chart",{
metadata:{library:"sap.chart",properties:{chartType:{type:"string",defaultValue:"bar"},uiConfig:{type:"object",group:"Misc"},visibleDimensions:{type:"string[]",defaultValue:[]},inResultDimensions:{type:"string[]",defaultValue:[]},visibleMeasures:{type:"string[]",defaultValue:[]},vizProperties:{type:"object",group:"Misc"},vizScales:{type:"object[]",group:"Misc"},isAnalytical:{type:"boolean"},selectionBehavior:{type:"sap.chart.SelectionBehavior",defaultValue:sap.chart.SelectionBehavior.DataPoint},selectionMode:{type:"sap.chart.SelectionMode",defaultValue:sap.chart.SelectionMode.Multi},enablePagination:{type:"boolean",defaultValue:false},enableStableColor:{type:"boolean",defaultValue:false},enableScalingFactor:{type:"boolean",defaultValue:false},customMessages:{type:"object",defaultValue:null},colorings:{type:"object",defaultValue:null},activeColoring:{type:"object",defaultValue:null},valueAxisScale:{type:"object",defaultValue:null}},aggregations:{data:{type:"sap.ui.core.Element",multiple:true,bindable:"bindable"},_vizFrame:{type:"sap.viz.ui5.controls.VizFrame",multiple:false,visibility:"hidden"},dimensions:{type:"sap.chart.data.Dimension",multiple:true},measures:{type:"sap.chart.data.Measure",multiple:true}},events:{drilledDown:{parameters:{dimensions:{type:"string[]"}}},drilledUp:{parameters:{dimensions:{type:"string[]"}}},renderComplete:{},selectData:{},deselectData:{},valueAxisFixedScaleTurnedOff:{}}},
renderer:function(o,d){o.write("<div");o.writeControlData(d);o.addStyle("width",d.getWidth());o.addStyle("height",d.getHeight());o.writeStyles();o.write(">");o.renderControl(d.getAggregation("_vizFrame"));o.write("</div>");}
});
I.getMetadata().getAggregation("data")._doesNotRequireFactory=true;
function J(v){return v.indexOf("%")!==-1?"100%":v;}
I.prototype.setHeight=function(v){this.setProperty("height",v);var o=this._getVizFrame();if(o){o.setHeight(J(this.getProperty("height")));}return this;};
I.prototype.setWidth=function(v){this.setProperty("width",v);var o=this._getVizFrame();if(o){o.setWidth(J(this.getProperty("width")));}return this;};
I.prototype.setChartType=function(d,e){this.setProperty("chartType",d,e);this._bIsPagingChartType=C.CONFIG.pagingChartTypes.indexOf(d)>-1;if(this._isEnablePaging()){this._getPagingController().init(false);}else{var o=this._getDataset();if(o){o.setPagingOption(null);o.setRange(-1,-1);}}this._invalidateBy({source:this,keys:{vizFrame:true}});this._bNeedToApplyDefaultProperties=true;return this;};
I.prototype.setColorings=function(v){this.setProperty("colorings",v);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this;};
I.prototype.setActiveColoring=function(v){this.setProperty("activeColoring",v);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this;};
I.prototype.setValueAxisScale=function(v){this._bEnbableValueAxisScale=true;this.setProperty("valueAxisScale",v);if(this._oValueScaleSetting&&this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff){this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff=false;this._oValueScaleSetting.resetValueAxisScale=true;}this._invalidateBy({source:this,keys:{vizFrame:true}});return this;};
I.prototype._setValueAxisScale=function(){var v=this.getValueAxisScale(),d=!this._rendered&&!!v,e=!(this._mNeedToUpdate['binding']&&this._oValueScaleSetting)&&this._bEnbableValueAxisScale;if(d||e){if(!this._bEnbableValueAxisScale){this._bEnbableValueAxisScale=true;}this._oValueScaleSetting=A.getValueAxisScaleSetting(this.getChartType(),v,this.getMeasures(),this.getVisibleMeasures());}};
I.prototype._getValueAxisScaleSetting=function(){return this._bEnbableValueAxisScale?this._oValueScaleSetting||{}:{};};
I.prototype._validateValueScaleOnDimChange=function(d,o){if(o&&this._oValueScaleSetting){var v=this.getValueAxisScale();if(v&&v.scaleBehavior===G.FixedScale){var e=[];d.forEach(function(k){var m=o.indexOf(k);if(m<0){e.push(k);}else{o.splice(m,1);}});e=e.concat(o);if(e.length>0){var i=false,j=this.getChartType();if(C.isStackedLikeChart(j)){i=true;e.forEach(function(k){if(k._getFixedRole()!=='series'){i=false;}});}if(!i){this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff=true;v.scaleBehavior=G.AutoScale;this.setProperty('valueAxisScale',v);this.fireValueAxisFixedScaleTurnedOff();if(this._oValueScaleSetting.resetValueAxisScale){v=this.getValueAxisScale();this.setProperty('valueAxisScale',v);}this._oValueScaleSetting=A.getValueAxisScaleSetting(j,v,this.getMeasures(),this.getVisibleMeasures());}}else{this._oValueScaleSetting=A.getValueAxisScaleSetting(this.getChartType(),v,this.getMeasures(),this.getVisibleMeasures());}}}};
I.prototype.removeDimension=function(d){var v=this._getVisibleDimensions()||[];var i;if(this.getIsAnalytical()===false&&d&&d.getName()){i=v.indexOf(d.getName());if(i!==-1){jQuery.sap.log.error('Data source does not support aggregation. The method "removeDimension" therefore cannot be used!');return;}}var o=this.removeAggregation("dimensions",d);if(o){i=v.indexOf(o.getName());if(i!==-1){v.splice(i,1);this.setVisibleDimensions(v);}var e=this.getInResultDimensions()||[];i=e.indexOf(o.getName());if(i!==-1){e.splice(i,1);this.setInResultDimensions(e);}}return o;};
I.prototype.removeAllDimensions=function(){var o;if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support aggregation. The method "removeAllDimensions" therefore cannot be used!');}else{o=this.removeAllAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([]);}return o;};
I.prototype.destroyDimensions=function(){var o;if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support aggregation. The method "destroyDimensions" therefore cannot be used!');}else{o=this.destroyAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([]);}return o;};
I.prototype.removeMeasure=function(m){var o=this.removeAggregation("measures",m);if(o){var v=this._getVisibleMeasures()||[],i=v.indexOf(o.getName());if(i!==-1){v.splice(i,1);this.setVisibleMeasures(v);}}return o;};
I.prototype.removeAllMeasures=function(){var o=this.removeAllAggregation("measures");this.setVisibleMeasures([]);return o;};
I.prototype.destroyMeasures=function(){var o=this.destroyAggregation("measures");this.setVisibleMeasures([]);return o;};
I.prototype._getVisibleDimensions=function(d){var o=this._getDrillStateTop();var e=o?o.dimensions:this.getProperty("visibleDimensions");return d?this._normalizeDorM(e,true):e;};
I.prototype.getVisibleDimensions=function(){var v=this._getVisibleDimensions();return this._aFeeds?v.filter(function(d){return this._aFeeds._unused.indexOf(d)===-1;},this):v;};
I.prototype._getVisibleMeasures=function(d){var o=this._getDrillStateTop();var m=o?o.measures:this.getProperty("visibleMeasures");return d?this._normalizeDorM(m):m;};
I.prototype.getVisibleMeasures=function(){var v=this._getVisibleMeasures();return this._aFeeds?v.filter(function(d){return this._aFeeds._unused.indexOf(d)===-1;},this):v;};
I.prototype.setVisibleDimensions=function(v,d){var m=this._dimensionSanityCheck({visible:v});this.setProperty("visibleDimensions",v,d);this.setProperty("inResultDimensions",m.inResult,d);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this;};
I.prototype.setInResultDimensions=function(i,d){var m=this._dimensionSanityCheck({inResult:i});this.setProperty("inResultDimensions",i,d);this.setProperty("visibleDimensions",m.visible,d);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});};
I.prototype.setVisibleMeasures=function(m,d){this.setProperty("visibleMeasures",m,d);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this;};
I.prototype.setEnableStableColor=function(v){v=!!v;if(this.getProperty("enableStableColor")!==v){this.setProperty("enableStableColor",v);this._invalidateBy({source:this,keys:{vizFrame:true}});}};
I.prototype.setEnablePagination=function(e,d){if(!this._bIsInitialized){this.setProperty("enablePagination",e,d);this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true,drillStack:true}});}return this;};
I.prototype._dimensionSanityCheck=function(d){var v=d.visible||this.getVisibleDimensions()||[],i=d.inResult||this.getInResultDimensions()||[];var m=[].concat(v).concat(i).reduce(function(e,j){var k=v.indexOf(j)!==-1,o=i.indexOf(j)!==-1;if(k&&o){e.common[j]=true;}else if(k){e.visible[j]=true;}else if(o){e.inResult[j]=true;}return e;},{visible:{},inResult:{},common:{}});m.visible=Object.keys(m.visible);m.inResult=Object.keys(m.inResult);m.common=Object.keys(m.common);return m;};
I.prototype._prepareFeeds=function(){if(!this._aFeeds){var d=this._normalizeDorM(this._getVisibleDimensions(),true),m=this._normalizeDorM(this._getVisibleMeasures(),false),i=this._normalizeDorM(this.getInResultDimensions(),true),e;this._sAdapteredChartType=this.getEnablePagination()?this.getChartType():f.adaptChartType(this.getChartType(),d);var v=this._getVisibleMeasures();e=this._normalizeDorM(this.getMeasures().filter(function(j){return v.indexOf(j.getName())===-1;}),false);this._aFeeds=R.fit(this._sAdapteredChartType,d,m,i,this._enableSemanticPattern(),e);if((!this._aFeeds._valid||this._aFeeds._unused.length)&&this._sAdapteredChartType!==this.getChartType()){this._sAdapteredChartType=this.getChartType();this._aFeeds=R.fit(this._sAdapteredChartType,d,m,i,this._enableSemanticPattern());}if(this._sAdapteredChartType!==this.getChartType()){this._bNeedToApplyDefaultProperties=true;}}return this._aFeeds;};
I.prototype._normalizeDorM=function(m,i){var d=i?this.getDimensions():this.getMeasures(),e=d.reduce(function(p,v){p[v.getName()]=v;return p;},{}),j=i?b:c;var o=m.reduce(function(o,p){var v;if(typeof p==="string"){v=p;}else if(p instanceof j){v=p.getName();}else{o.errors.push(p);}if(e[v]){o.normalized.push(e[v]);}else{o.errors.push(p);}return o;},{normalized:[],errors:[]});var k=o.normalized;if(o.errors.length>0){k.errors=o.errors;}return k;};
I.prototype._redundantsFromSelection=function(){var d=this._getVizFrame().vizSelection();if(!d||d.length===0){return{measureNames:{}};}var o=this._getContinuesSemanticTuples();var m=d.reduce(function(i,j){var p=[];for(var X in o){if(o.hasOwnProperty(X)){var Y=o[X];if(j.data[X]){p.push((j.data[Y.timeAxis]<Y.projectedValueStartTime)?Y.projected:Y.actual);}else{p.push(Y.actual);p.push(Y.projected);}}}jQuery.each(j.data,function(k,v){if(!(p.length>0&&p.indexOf(k)>-1)){if(!i[k]){i[k]=[];}if(i[k].indexOf(v)===-1){i[k].push(v);}}});return i;},{});var e=this._getVisibleDimensions().reduce(function(i,j){var v=m[j];if(v.length===1){i[j]=v[0];}return i;},{});e.measureNames=this._getVisibleMeasures().reduce(function(i,j){if(!m[j]){i[j]=true;}return i;},{});return e;};
I.prototype._deriveFilterFromSelection=function(){var v=this._getVisibleDimensions();var d=this;var e=this._getVizFrame().vizSelection().map(function(o){var j=v.reduce(function(k,p){var X=d.getDimensionByName(p);var Y;Y=o.data[p];if(C.CONFIG.timeChartTypes.indexOf(d._sAdapteredChartType)>-1&&X instanceof T){var Z=g.getInstance(X.getTimeUnit());if(Z){var $=Z.format.bind(Z);Y=$(new Date(o.data[p]));}}k.filters.push(new r({path:p,operator:s.EQ,value1:Y}));k.signature.push(p+"="+o.data[p]);return k;},{filters:[],signature:[]});j.signature=j.signature.join(";");return j;});var m=e.reduce(function(j,o){if(!j[o.signature]&&o.filters.length>0){j[o.signature]=new r(o.filters,true);}return j;},{});var i=Object.keys(m).map(function(k){return m[k];});if(i.length>1){return new sap.ui.model.Filter(i,false);}else if(i.length===1){return i[0];}else{return null;}};
I.prototype._checkDrilldownValid=function(i){var v=this._getVisibleDimensions().concat(this.getInResultDimensions()).reduce(function(e,j){e[j]=true;return e;},{});if(i.some(function(e){return v[e.getName()];})){jQuery.sap.log.error("Drill down not possible, because one of the given dimensions is already drilled down!");return false;}var m=i.reduce(function(e,j){e[j.getName()]=j;return e;},{});function d(e){if(jQuery.isArray(e.aFilters)){return e.aFilters.some(d);}else{return!!m[e.sPath];}}var o=this._getDrillStateTop();if(o&&o.filter&&d(o.filter)){jQuery.sap.log.error("Drill down not possible, because one of the given dimensions is already filtered!");return false;}return true;};
I.prototype._createDrillStack=function(){var v=this.getProperty("visibleDimensions")||[],d=this.getProperty("visibleMeasures")||[],e=[{dimensions:[],measures:d,filter:undefined}],j=[];for(var i=0;i<v.length;i++){j.push(v[i]);e.push({dimensions:j.slice(),measures:d,filter:undefined});}this._drillStateStack=e;};
I.prototype._invalidateBy=function(o){var d=o.source;var e=this._oCandidateColoringSetting?(this._oCandidateColoringSetting.additionalDimensions||[]):[];if(d===this){jQuery.each(o.keys||{},function(k,v){this._markForUpdate(k,v);}.bind(this));}else if(d instanceof c&&this._getVisibleMeasures().indexOf(d.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(o.property==="unitBinding"||(this.getColorings()&&(o.property==='semantics'||o.property==='semanticallyRelatedMeasures'))){this._markForUpdate("binding",true);}}else if(d instanceof b&&this._getVisibleDimensions().concat(e).indexOf(d.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(d.getDisplayText()&&(o.property==="textProperty"||o.property==="displayText")){this._markForUpdate("binding",true);}}this.invalidate(o);};
I.prototype._handleNonAnalyticalFeeding=function(){var d=this;var i=this.getInResultDimensions();var v=this._getVisibleDimensions(),e=this.getDimensions().map(function(o){return o.getName();});var j=[];e.forEach(function(m){if(d.getDimensionByName(m)){var o=d.getDimensionByName(m).getTextProperty();if(o){j.push(o);}}});var k=v.concat(e.filter(function(m){return(v.indexOf(m)<0);})).filter(function(m){return(j.indexOf(m)<0)&&(i.indexOf(m)<0);});this.setProperty("visibleDimensions",k);this._createDrillStack();};
I.prototype._markForUpdate=function(k,d){if(!this._mNeedToUpdate){this._mNeedToUpdate={};}this._mNeedToUpdate[k]=d;var o=this._updaters.onInvalidate[k];if(o){o.call(this);}};
I.prototype._updaters=(function(){return{onInvalidate:{vizFrame:function(){this._aFeeds=null;this._bColoringParsed=null;},checkBinding:function(){this._bColoringParsed=null;},binding:function(){this._bColoringParsed=null;},loopData:function(){this._bColoringParsed=null;}},checkBinding:function(){var o=this._getCandidateColoringSetting();var d=o.additionalDimensions;var e=o.additionalMeasures;if((d&&d.length)||(e&&e.length)){this._mNeedToUpdate["binding"]=true;}},drillStack:function(){this._createDrillStack();},dataSet:function(){this._getDataset().invalidate();},binding:function(){var o=this._getDataset().getBinding("data"),i=this.getInResultDimensions();if(!o){return;}var d=this._getVisibleDimensions(true).concat(this._normalizeDorM(i,true));var m=this._getVisibleMeasures(true);h.updateModel(this.getIsAnalytical())(this,d,m);var e=this._getDrillStateTop();if(d.length>0||m.length>0){this._getVizFrame()._readyToRender(false);this.setBusy(true);}this._bFilterCalledByChart=true;o.filter((e&&e.filter)?e.filter:undefined);if(this._bEnbableValueAxisScale){this._validateValueScaleOnDimChange(d,this._aDimensions);}this._aDimensions=d;},vizFrame:function(){var d=this,o=this._getDataset(),v=this._getVizFrame();if(this._mNeedToUpdate['binding']){if(this._isEnablePaging()){this._getPagingController().reset();this._oColoringStatus={};}else{this._getDataset().setPagingOption(null);}}else{this._markForUpdate('loopData',true);}if(this.getEnableStableColor()){this._oColorTracker.add(v._runtimeScales());v._runtimeScales(this._oColorTracker.get(),true);}else{this._resetRuntimeScale();}var m=this._isEnablePaging()?this._getPagingController().getMeasureRange():{};o.removeAllAggregation("dimensions",true);o.removeAllAggregation("measures",true);v.removeAllAggregation("feeds",true);if(this.getIsAnalytical()===false){this._handleNonAnalyticalFeeding();}var e=this._prepareFeeds();e._def.dim.forEach(function(X){o.addAggregation("dimensions",X,true);},this);e._def.msr.forEach(function(X){if(X){var Y=m[X.getIdentity()];if(Y){X.setRange([Y.min,Y.max]);}if(!d.getDimensionByName(X.getUnit())){X.setUnit(null);}o.addAggregation("measures",X,true);}},this);e.forEach(function(X){v.addFeed(X);});this._semanticTuples=e._semanticTuples;var i=this._getCandidateColoringSetting();var j=e._context||[];var k=i.additionalMeasures||[];var p=i.additionalDimensions||[];k.forEach(function(X){j.push({id:X,showInTooltip:false});o.addMeasure(new M({name:X,identity:X,value:'{'+X+'}'}));});p.forEach(function(X){j.push({id:X,showInTooltip:false});o.addDimension(new a({name:X,identity:X,value:'{'+X+'}'}));});o.setContext(j);v.invalidate();o.invalidate();v.setVizType(this._sAdapteredChartType);v._setCustomMessages(this.getCustomMessages());this._setValueAxisScale();if(!this._mNeedToUpdate['loopData']){this._setEffectiveScales();v.setVizProperties(this._getEffectiveProperties());}},loopData:function(){var v=this._getVizFrame();try{this._prepareData();}catch(e){if(e instanceof x){e.display();}else{throw e;}}var o=this._getEffectiveProperties();this._usingDisplayNameForSemantics(o);v.setVizProperties(o);this._setEffectiveScales();}};})();
I.prototype._getDrillStateTop=function(){return this._drillStateStack?this._drillStateStack[this._drillStateStack.length-1]:null;};
I.prototype._getVizFrame=function(){return this.getAggregation("_vizFrame");};
I.prototype._getDataset=function(){var v=this._getVizFrame();return v?v.getDataset():null;};
I.prototype._prepareData=function(){var o=this._getCandidateColoringSetting().contextHandler;var d=[];if(o){d.push(o);try{this._loopContext(d);}catch(e){if(e instanceof x){e.display();this._oCandidateColoringSetting={};}else{throw e;}}}this._oSemanticVizSettings=n.getSemanticVizSettings(this._sAdapteredChartType,this._semanticTuples,this._oCandidateColoringSetting,this._enableSemanticPattern(),this._bDataPointStyleSetByUser,this._bLegendSetByUser);};
I.prototype._getContexts=function(){var o=this.getBinding("data");if(o){if(this._isEnablePaging()&&this._getPagingController().isUnderPaging()){return this._getPagingController().getCurrentContexts();}else{var i=0;var d=o instanceof sap.ui.model.analytics.AnalyticalBinding?o.getTotalSize():o.getLength();return o.getContexts(i,d);}}else{return[];}};
I.prototype._loopContext=function(d){var e=this._getContexts();if(e.length>0&&!e.dataRequested){var i=this;e.forEach(function(o){d.forEach(function(j){j.call(i,o);});});}};
I.prototype._filterHandler=function(){if(!this._bFilterCalledByChart){this._bFilterCalledByCustomer=true;this._bColoringParsed=false;}this._bFilterCalledByChart=false;};
I.prototype._dataRefreshListener=function(e){if(e.getParameters().reason==='filter'){this._filterHandler();}};
I.prototype._bindingChangeListener=function(o){var v=this._getVizFrame();if(o.getParameters().reason==='filter'){this._filterHandler();}if(this.getEnableStableColor()){this._oColorTracker.add(v._runtimeScales());v._runtimeScales(this._oColorTracker.get(),true);}v.invalidate();this.setBusy(false);if(this._isEnablePaging()){this._getPagingController().bindingChanged();}else{v._readyToRender(true);}try{this._prepareData();}catch(e){if(e instanceof x){e.display();}}var d=this._getEffectiveProperties();this._usingDisplayNameForSemantics(d);v.setVizProperties(d);this._setEffectiveScales();this._bFilterCalledByChart=false;this._bFilterCalledByCustomer=false;};
I.prototype._resetRuntimeScale=function(){this._oColorTracker.clear();this._getVizFrame()._runtimeScales(this._oColorTracker.get(),true);};
I.prototype._hasUserSemanticProps=function(){var v=this.getProperty("vizProperties");if(v&&v.plotArea){if(v.plotArea.dataPointStyle||v.plotArea.seriesStyle){return true;}}return false;};
I.prototype._enableSemanticColoring=function(){var d=true;if(this._sAdapteredChartType==="heatmap"){var v=this.getProperty("vizScales")||[];var o=v.filter(function(e){return e.feed==="color";})[0];if(o){d=false;}}else{if(this._hasUserSemanticProps()){d=false;}}return d;};
I.prototype._enableSemanticPattern=function(){return!this._hasUserSemanticProps()&&C.CONFIG.nonSemanticPatternChartType.indexOf(this._sAdapteredChartType)===-1;};
I.prototype._hasSemanticPattern=function(){return this._enableSemanticPattern()&&n.hasSemanticRelation(this._semanticTuples);};
I.prototype._getContinuesSemanticTuples=function(){var d={};if(this._hasSemanticPattern()){d=this._semanticTuples.reduce(function(e,i){if(i.semanticMsrName){e[i.semanticMsrName]=i;}return e;},{});}return d;};
I.prototype._getContinuesSemanticMap=function(){var d=[];if(this._hasSemanticPattern()){d=this._semanticTuples.filter(function(e){return e.projectedValueStartTime;});}return d;};
I.prototype._getInternalVisibleMeasures=function(){var m=this._getVisibleMeasures();if(this._hasSemanticPattern()){m=m.concat(this._getContinuesSemanticMap().map(function(d){return d.semanticMsrName;}));}return m;};
I.prototype._buildSelectedDataPoints=function(o,d){var m=this._getInternalVisibleMeasures(),e=this._getVisibleDimensions().concat(this.getInResultDimensions()),i=this._getEffectiveContinuesDataPoints(d);return S.buildSelectionVizCtx(m,e,o,i);};
I.prototype._getEffectiveContinuesSeries=function(d){var e=d.slice(),i=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var m=e.map(function(j){return j.measures;});i.forEach(function(j){if(m.indexOf(j.actual)>-1||m.indexOf(j.projected)>-1){e=e.filter(function(k){return k.measures!==j.actual&&k.measures!==j.projected;});if(m.indexOf(j.actual)>-1&&m.indexOf(j.projected)>-1){e.push({measures:j.semanticMsrName});}}});}return e;};
I.prototype._getEffectiveContinuesDataPoints=function(d){var e=d.slice(),k=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var m,p,o,v;for(var i=0;i<e.length;i++){o=e[i].measures;for(var j=0;j<k.length;j++){v=k[j];m=o.indexOf(v.actual);if(m>-1){o.splice(m,1);}p=o.indexOf(v.projected);if(p>-1){o.splice(p,1);}if(m>-1||p>-1){o.push(v.semanticMsrName);}}}}return e;};
I.prototype._buildSelectEventData=function(d){if(d&&d.length>0&&this._hasSemanticPattern()){var v,e;var k=this._getContinuesSemanticMap();for(var i=0;i<d.length;i++){v=jQuery.extend(true,{},d[i].data);for(var j=0;j<k.length;j++){e=k[j];if(v.measureNames===e.semanticMsrName){if(v[e.timeAxis]<e.projectedValueStartTime){v.measureNames=e.actual;delete v[e.projected];delete v[e.semanticMsrName];}else{v.measureNames=e.projected;delete v[e.actual];delete v[e.semanticMsrName];}}else{if(v[e.actual]&&v.measureNames!==e.actual){delete v[e.actual];}if(v[e.projected]&&v.measureNames!==e.projected){delete v[e.projected];}}}d[i].data=v;}}};
I.prototype.addData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "addData" therefore cannot be used programmatically!');};
I.prototype.destroyData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "destroyData" therefore cannot be used programmatically!');};
I.prototype.getData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "getData" therefore cannot be used programmatically!');};
I.prototype.indexOfData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "indexOfData" therefore cannot be used programmatically!');};
I.prototype.insertData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "insertData" therefore cannot be used programmatically!');};
I.prototype.removeData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "removeData" therefore cannot be used programmatically!');};
I.prototype.removeAllData=function(){jQuery.sap.log.error('Chart manages the "data" aggregation only via data binding. The method "removeAllData" therefore cannot be used programmatically!');};
I.prototype._createOData4SAPAnalyticsModel=function(m){var o=null;try{o=new t.Model(new t.Model.ReferenceByModel(m));}catch(e){return undefined;}return o;};
I.prototype.getIsAnalytical=function(){return this.getProperty("isAnalytical");};
I.prototype.setIsAnalytical=function(v,d){if(this._bIsInitialized){jQuery.sap.log.error('The proeprty isAnalytical will programmatically set according to data source. The method "setIsAnalytical" therefore cannot be used!');}else{this.setProperty("isAnalytical",v,d);}};
I.prototype._setIsAnalyticalProperty=function(o,d){var v=o.findQueryResultByName(h.getEntitySet(this.getIsAnalytical())(d))!==undefined;if(this.getIsAnalytical()!==v){this.setProperty("isAnalytical",v);}};
I.prototype.bindAggregation=function(d,o){if(d==="data"){this._oBindingInfo=jQuery.extend(true,{},o);var m=this.getModel(o.model);var e;if(m){if(m instanceof sap.ui.model.json.JSONModel){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false);}else if(this.getEnablePagination()!==false){this.setProperty("enablePagination",false);}}else{e=this._createOData4SAPAnalyticsModel(m);this._setIsAnalyticalProperty(e,o);}if(this.getIsAnalytical()){if(o){var i=true;if(o.length!=undefined||this._isEnablePaging()){i=false;}o.parameters=jQuery.extend(true,{},{analyticalInfo:[{name:""}],useBatchRequests:true,provideGrandTotals:false,provideTotalsResultSize:false,autoexpand:false,reloadSingleUnitMeasures:true,noPaging:i},o.parameters);}O.apply(m);if(e){m.setAnalyticalExtensions(e);}}}}return B.prototype.bindAggregation.apply(this,arguments);};
I.prototype._bindAggregation=function(d,o){if(d==="data"){var m=this.getModel(o.model);if(m){if(m instanceof sap.ui.model.json.JSONModel){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false);}else if(this.getEnablePagination()!==false){this.setProperty("enablePagination",false);}}else{var e=this._createOData4SAPAnalyticsModel(m);this._setIsAnalyticalProperty(e,o);}if(this.getIsAnalytical()){if(o){var i=true;if(o.length!=undefined||this._isEnablePaging()){i=false;}o.parameters=jQuery.extend(true,{},{analyticalInfo:[{name:""}],useBatchRequests:true,provideGrandTotals:false,provideTotalsResultSize:false,autoexpand:false,reloadSingleUnitMeasures:true,noPaging:i},o.parameters);}O.apply(m);if(e){m.setAnalyticalExtensions(e);}}this._deriveColumns(m,o);}var j=this._getDataset();j.bindAggregation("data",o);this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}});}else{B.prototype._bindAggregation.apply(this,arguments);}};
I.prototype._dataErrorListener=function(e){var v=this._getVizFrame();if(v){v._readyToRender(true);v.invalidate();this.setBusy(false);}};
I.prototype.unbindAggregation=function(d,e){if(d==="data"){var o=this._getDataset();if(o){o.unbindAggregation.apply(o,arguments);}e=true;}return B.prototype.unbindAggregation.apply(this,[d,e]);};
I.prototype.unbindData=function(){if(!this.getIsAnalytical()){this.removeAllAggregation("dimensions");this.removeAllAggregation("measures");this.setProperty("visibleDimensions",[]);this.setProperty("inResultDimensions",[]);this.setProperty("visibleMeasures",[]);this._createDrillStack();}this.unbindAggregation("data");};
I.prototype._deriveColumns=function(m,o){var d=this.getAggregation("dimensions");var e=this.getAggregation("measures");if((d===null||d.length===0)&&(e===null||e.length===0)){var i=h.deriveColumns(this.getIsAnalytical())(m,o);i.dimensions.forEach(this.addDimension.bind(this));i.measures.forEach(this.addMeasure.bind(this));}};
I.prototype.onBeforeRendering=function(){B.prototype.onBeforeRendering.apply(this,arguments);var o=["onInvalidate","drillStack","dataSet","vizFrame","checkBinding","binding","loopData"];o.forEach(function(k){if(this._mNeedToUpdate[k]){this._updaters[k].call(this);}}.bind(this));jQuery.each(this._mNeedToUpdate,function(k){this._mNeedToUpdate[k]=false;}.bind(this));};
I.prototype.onAfterRendering=function(){this._showLoading(this._bLoading);this._rendered=true;};
I.prototype.onlocalizationChanged=function(){this._invalidateBy({source:this,keys:{vizFrame:true}});};
I.prototype.exit=function(){this._getDataset().unbindAggregation('data',true);this._oColorTracker.clear();B.prototype.exit.apply(this,arguments);var v=this._getVizFrame();if(this._delegateEventHandlers){this._delegateEventHandlers.forEach(function(o){v["detach"+o.name](o.handler,this);delete o.handler;},this);delete this._delegateEventHandlers;}v.detachRenderComplete(this._vizFrameRenderCompleteHandler,this);v.detachEvent("_zoomDetected",U.bind(this),this);v.detachEvent("_selectionDetails",W.bind(this),this);};
I.prototype.applySettings=function(){sap.ui.core.Control.prototype.applySettings.apply(this,arguments);var d=new F();d.attachEvent("dataChange",{},this._bindingChangeListener,this);d.attachEvent("dataRefresh",{},this._dataRefreshListener,this);d.attachEvent("dataError",{},this._dataErrorListener,this);var i=jQuery.extend(true,{},{'applicationSet':'fiori'},this.getUiConfig());this.setUiConfig(i);this._bNeedToApplyDefaultProperties=true;this._oSemanticVizSettings={};var v=new V({width:J(this.getWidth()),height:J(this.getHeight()),vizType:this.getChartType(),uiConfig:this.getUiConfig(),vizProperties:this._getEffectiveProperties()});v.setDataset(d);v.attachRenderComplete(null,this._updateLoadingIndicator.bind(this));v.attachEvent("_zoomDetected",U.bind(this));v.attachEvent("renderFail",null,function(e){var p=this._getPagingController();if(p._sLoadingTimer){jQuery.sap.clearDelayedCall(p._sLoadingTimer);p._sLoadingTimer=null;}this._showLoading(false);},this);this._rendered=false;v._readyToRender(false);this.setAggregation("_vizFrame",v);this._delegateEvents();this._sAdapteredChartType=this.getChartType();this._bIsInitialized=true;this._oCandidateColoringSetting={};this._oColoringStatus={};this._mNeedToUpdate={};this._oColorTracker=new y();if(this._isEnablePaging()){this._getPagingController();}};
I.prototype.setCustomMessages=function(o){this.setProperty("customMessages",o);var v=this._getVizFrame();if(v){v._setCustomMessages(o);}return this;};
I.prototype._getZoomInfo=function(){var v=this._getVizFrame();if(v){return v._getZoomInfo();}};
I.prototype.resetLayout=function(){this._invalidateBy({source:this,keys:{binding:true,vizFrame:true,drillStack:true,dataSet:true}});return this;};
I.prototype.setSelectedDataPoints=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var o=this.getBinding("data"),v=this._getVizFrame();if(!o||!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this;}v.vizSelection([],{clearSelection:true});v.vizSelection(this._buildSelectedDataPoints(o,d),{selectionMode:this.getSelectionMode()});}return this;};
I.prototype.addSelectedDataPoints=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var o=this.getBinding("data"),v=this._getVizFrame();if(!o||!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this;}v.vizSelection(this._buildSelectedDataPoints(o,d),{selectionMode:l.SelectionMode.Multi});}return this;};
I.prototype.getSelectedDataPoints=function(){var v=this._getVizFrame();if(!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return{count:0,dataPoints:[]};}var o=this._getContinuesSemanticTuples();var m=this._getVisibleMeasures(),d=this._getDataset(),e=v.vizSelection()||[],j={};for(var i=0,k=e.length;i<k;i++){var p=e[i],X=p.data._context_row_number;if(!j[X]){j[X]={index:X,measures:[],context:d.findContext({"_context_row_number":X})};}p.measures=S.filterVisibleMsr(p.data,m);if(!jQuery.isEmptyObject(o)){S.filterSemMsr(o,m,p);}j[X].measures=j[X].measures.concat(p.measures);if(p.unit){j[X].unit=jQuery.extend(true,j[X].unit,p.unit);}if(p.dataName){j[X].dataName=jQuery.extend(true,j[X].dataName,p.dataName);}}return{count:e.length,dataPoints:Object.keys(j).map(function(Y){return j[Y];})};};
I.prototype.removeSelectedDataPoints=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var o=this.getBinding("data"),v=this._getVizFrame();if(!v||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this;}var e=this._buildSelectedDataPoints(o,d);v.vizSelection(e,{deselection:true});}return this;};
I.prototype.setSelectedCategories=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="CATEGORY"){return this;}v.vizSelection([],{clearSelection:true});v.vizSelection(d.map(S.toVizCSCtx),{selectionMode:this.getSelectionMode()});}return this;};
I.prototype.addSelectedCategories=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="CATEGORY"){return this;}v.vizSelection(d.map(S.toVizCSCtx),{selectionMode:l.SelectionMode.Multi});}return this;};
I.prototype.removeSelectedCategories=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="CATEGORY"){return this;}v.vizSelection(d.map(S.toVizCSCtx),{deselection:true});}return this;};
I.prototype.getSelectedCategories=function(){var v=this._getVizFrame(),d=this.getSelectionBehavior().toUpperCase();if(!v||d!=="CATEGORY"){return{count:0,categories:[]};}else{var e=v.vizSelection();return{count:e.length,categories:(e.category||[]).map(S.fromVizCSCtx)};}};
I.prototype.setSelectedSeries=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="SERIES"){return this;}v.vizSelection([],{clearSelection:true});var i=this._getEffectiveContinuesSeries(d);v.vizSelection(i.map(S.toVizCSCtx),{selectionMode:this.getSelectionMode()});}return this;};
I.prototype.addSelectedSeries=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="SERIES"){return this;}var i=this._getEffectiveContinuesSeries(d);v.vizSelection(i.map(S.toVizCSCtx),{selectionMode:l.SelectionMode.Multi});}return this;};
I.prototype.removeSelectedSeries=function(d){if(this.getSelectionMode()!==l.SelectionMode.None){var v=this._getVizFrame(),e=this.getSelectionBehavior().toUpperCase();if(!v||e!=="SERIES"){return this;}var i=this._getEffectiveContinuesSeries(d);v.vizSelection(i.map(S.toVizCSCtx),{deselection:true});}return this;};
I.prototype.getSelectedSeries=function(){var v=this._getVizFrame(),d=this.getSelectionBehavior().toUpperCase();if(!v||d!=="SERIES"){return{count:0,series:[]};}else{var e=v.vizSelection(),i=(e.series||[]).map(S.fromVizCSCtx),j=[],k=this._getContinuesSemanticTuples();i=i.filter(function(m){var o=true;if(m&&m.measures){var p=k[m.measures];if(p&&p.semanticMsrName===m.measures){j.push({measures:p.actual});j.push({measures:p.projected});o=false;}}return o;});i=i.concat(j);return{count:e.length,series:i};}};
I.prototype.drillDown=function(d){if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support drillDown/drillUp. The method "drillDown" therefore cannot be used!');return;}if(d&&!(d instanceof Array)){d=[d];}var e=this._normalizeDorM(d,true);if(e.length===0){return;}if(!this._checkDrilldownValid(e)){jQuery.sap.log.warning("Drill down not possible for "+e+". Already drilled down.");return;}var o=this._getDrillStateTop(),m=this._redundantsFromSelection(),i=this._deriveFilterFromSelection();var j;if(i){j=!(o&&o.filter)?i:new r([i,o.filter],true);}this._drillStateStack.push({dimensions:o.dimensions.slice().concat(e.map(function(p){return p.getName();})).filter(function(p){return!m[p];}),measures:o.measures.filter(function(p){return!m.measureNames[p];}),filter:j,redundant:m});var k=e.map(function(p){return p.getName();});this.fireDrilledDown({dimensions:k});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}});};
I.prototype.drillUp=function(i){if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support drillDown/drillUp. The method "drillUp" therefore cannot be used!');return;}if(arguments.length===0){i=this._drillStateStack.length-2;}var o=this._drillStateStack[i];if(o&&i!=this._drillStateStack.length-1){var p=this._drillStateStack.pop();this._drillStateStack.splice(i+1);this.fireDrilledUp({dimensions:p.dimensions.filter(function(d){return o.dimensions.indexOf(d)===-1;})});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}});}};
I.prototype.getDrillStack=function(){if(this.getIsAnalytical()===false){jQuery.sap.log.error('Data source does not support drillDown/drillUp. The method "getDrillStack" therefore cannot be used!');return;}return jQuery.map(this._drillStateStack||[],function(o,i){return{dimension:o.dimensions.slice(),measure:o.measures.slice(),filter:o.filter};});};
I.prototype.setUiConfig=function(o){this.setProperty("uiConfig",o);if(this._getVizFrame()){this._getVizFrame().setUiConfig(o);}};
var K=(function(){var d=["interaction.selectability.mode","interaction.selectability.behavior"];function e(o,p){var j=o,v;v=p.reduce(function(m,X){if(j.hasOwnProperty(X)){m.push({parent:j,val:j[X],key:X});j=j[X];}return m;},[]);if(v.length!==p.length){return;}var k=v.pop();delete k.parent[k.key];while(v.length>0){k=v.pop();if(Object.keys(k.val).length>0){return;}else{delete k.parent[k.key];}}}function i(v,j){var o=jQuery.extend(true,{},v);d.forEach(function(p){delete o[p];e(o,p.split("."));});return o;}return{sanitize:i,modify:function(p,k,j){var m=k.split("."),o=p;while(m.length>1&&o.hasOwnProperty(m[0])){o=o[m.shift()];}var v=m[0];if(m.length===1&&o.hasOwnProperty(v)){o[v]=j(o[v]);}}};})();
I.prototype.setVizProperties=function(v){v=K.sanitize(v);this.setProperty("vizProperties",v);if(v.plotArea&&v.plotArea.dataPointStyle){this._bDataPointStyleSetByUser=true;this._invalidateBy({source:this,keys:{vizFrame:true,loopData:true}});}if(v.legend&&v.legend.title){this._bLegendSetByUser=true;}if(this._getVizFrame()){this._getVizFrame().setVizProperties(this._getEffectiveProperties());}};
I.prototype.getVizProperties=function(){var o=this._getVizFrame();var d=K.sanitize(o?o.getVizProperties():this.getProperty("vizProperties"));function e(i){var j=sap.viz.api.env.Format.numericFormatter();if(!j||jQuery.type(j.stripUnit)!=="function"){return i;}if(jQuery.type(i)==="string"){return j.stripUnit(i);}else if(jQuery.type(i)==="object"){jQuery.each(i,function(k,v){i[k]=j.stripUnit(v);});return i;}else{return i;}}K.modify(d,"plotArea.dataLabel.formatString",e);K.modify(d,"tooltip.formatString",e);return d;};
I.prototype.setVizScales=function(v){this.setProperty("vizScales",v);this._aVizValueScales=v.filter(function(o){return o.feed==="valueAxis"||o.feed==="valueAxis2"||o.feed==="actualValues";});if(this._aVizValueScales&&this._aVizValueScales.length>0){this._bEnbableValueAxisScale=false;}if(this._getVizFrame()){this._getVizFrame().setVizScales(v);}};
I.prototype.getVizScales=function(){var v=this._getVizFrame();return v?v.getVizScales():this.getProperty("vizScales");};
I.prototype.getVizUid=function(){return this._getVizFrame().getVizUid();};
I.prototype.zoom=function(o){this._getVizFrame().zoom(o);};
var N=["selectData","deselectData"];
I.prototype._delegateEvents=function(){if(this._delegateEventHandlers){return;}var v=this._getVizFrame();this._delegateEventHandlers=N.map(function(e){var d=e.charAt(0).toUpperCase()+e.slice(1);var i=function(o){var p=o.getParameters();this._buildSelectEventData(p.data);delete p.id;this.fireEvent(e,p);};i=i.bind(this);v["attach"+d](null,i);return{name:d,handler:i};},this);this._vizFrameRenderCompleteHandler=Q.bind(this);v.attachRenderComplete(null,this._vizFrameRenderCompleteHandler);v.attachEvent("_selectionDetails",W.bind(this));};
I.getChartTypes=sap.chart.api.getChartTypes;
I.prototype.getAvailableChartTypes=function(){var d=this._getVisibleDimensions(true),m=this._getVisibleMeasures(true);return C.CONFIG.chartTypes.reduce(function(o,e){var i=R.compatible(e,d,m);if(i.compatible){o.available.push({chart:e});}else{var j={};if(i.error.missing.dim){j.Dimension=i.error.missing.dim;}if(i.error.missing.time){j.DateTimeDimension=i.error.missing.time;}if(i.error.missing.msr){j.Measure=i.error.missing.msr;}o.unavailable.push({chart:e,error:j});}return o;},{available:[],unavailable:[]});};
I.prototype._getDynamicScaleProp=function(){return{general:{enableScalingFactor:this.getEnableScalingFactor()}};};
I.prototype._getEffectiveProperties=function(){var v={'title':{'visible':false}};if(this._bNeedToApplyDefaultProperties){v=jQuery.extend(true,v,this._getDefaultVizProperties());this._bNeedToApplyDefaultProperties=false;}v=jQuery.extend(true,v,this._oSemanticVizSettings.properties||{},this.getProperty("vizProperties"),this._getHostedVizProperties(),this._getPagingVizProperties(),this._getTimeProperties(),this._getValueAxisScaleSetting().property||{},this._getDynamicScaleProp());return v;};
I.prototype._setEffectiveScales=function(){var v=this._getVizFrame(),o=this.getProperty('vizScales'),d=this._getValueAxisScaleSetting(),e=(o||[]).filter(function(j){return j.feed==='color';});var i=H.extendScales(o,d.scale||[],this._oSemanticVizSettings.scales||[]);if(this._oSemanticVizSettings.replaceColorScales&&e.length===0){v.setVizScales(i,{replace:true});}else{v.setVizScales(i);}};
I.prototype._usingDisplayNameForSemantics=function(v){var d=function(o){if((typeof(o)==='undefined')||(o===null)){return false;}return true;};if(v.plotArea&&v.plotArea.dataPointStyle&&v.plotArea.dataPointStyle.rules){var e=this._getContexts();if(e.length>0&&!e.hasOwnProperty("dataRequested")){var k=this.getVisibleDimensions(),m=v.plotArea.dataPointStyle.rules;for(var i=0;i<m.length;i++){var p=m[i].dataContext;if(p&&p.length!==0){var X=Object.keys(p);if(!d(m[i].displayName)&&X.length===1){var Y=X[0];if(p[Y].hasOwnProperty("equal")&&k.indexOf(Y)!==-1){var Z=this.getDimensionByName(Y).getTextProperty();for(var j=0;j<e.length;j++){if(e[j].getProperty(Y)===p[Y].equal){var $=e[j].getProperty(Z);if(!d(Z)||!d($)||typeof($)==="object"||this.getDimensionByName(Y).getDisplayText()===false){m[i].displayName=p[Y].equal;break;}else{m[i].displayName=$;break;}}}}}}}}}};
I.prototype._getCandidateColoringSetting=function(){if(!this._bColoringParsed){if(this._enableSemanticColoring()){this._bColoringParsed=true;this._oCandidateColoringSetting={};var d={},o=this.getColorings(),i=this.getActiveColoring();d.aMsr=this._normalizeDorM(this.getVisibleMeasures());var j=this._getDrillStateTop();var k=[],v;if(j.redundant){var k=Object.keys(j.redundant).filter(function(Y){return Y!=='measureNames';});}v=this._normalizeDorM(this.getVisibleDimensions().concat(k),true);d.aDim=v;d.aInResultDim=this._normalizeDorM(this.getInResultDimensions(),true);d.allMsr=this.getMeasures().map(function(Y){return Y.getName();});d.allDim=this.getDimensions().map(function(Y){return Y.getName();});if(o){try{var m=jQuery.sap.getResourcePath("sap/chart/i18n/i18n.properties");var p=jQuery.sap.resources({url:m});var X={bFiltered:this._bFilterCalledByCustomer};this._oCandidateColoringSetting=w.getCandidateSetting(o,i,this._semanticTuples,d,this._oColoringStatus||{},this._sAdapteredChartType||this.getChartType(),p,X);}catch(e){if(e instanceof x){e.display();}else{throw e;}}}}else{this._oCandidateColoringSetting={};}}return this._oCandidateColoringSetting;};
I.prototype._hostedVizProperties={selectionMode:{prop:"interaction.selectability.mode"},selectionBehavior:{prop:"interaction.selectability.behavior"}};
I.prototype._getHostedVizProperties=function(){return Object.keys(this._hostedVizProperties).reduce(function(o,p){var d=this._hostedVizProperties[p].prop.split(".").reverse().reduce(function(o,e){var i={};i[e]=o;return i;},this.getProperty(p));return jQuery.extend(true,o,d);}.bind(this),{});};
I.prototype._getDefaultVizProperties=function(){var d='info/'+(this._sAdapteredChartType||this.getChartType());var i=(d.indexOf("info/100_")===0);var j=(d==="info/pie"||d==="info/donut");var o={interaction:{extraEventInfo:true}};return jQuery.extend(true,o,v({},d,["valueAxis.label.formatString","valueAxis2.label.formatString"],i?'':z.DefaultPattern.SHORTFLOAT),v({},d,["legend.formatString","sizeLegend.formatString"],z.DefaultPattern.SHORTFLOAT_MFD2),v({},d,["plotArea.dataLabel.formatString"],j?'':z.DefaultPattern.SHORTFLOAT_MFD2),v({},d,["tooltip.formatString"],i?'':z.DefaultPattern.STANDARDFLOAT));function k(e,X,Y){if(X.length===0){return Y;}e=e||{};var p=e[X[0]];e[X[0]]=k(p,X.slice(1),Y);return e;}function m(p,X){if(p==null||X.legnth===0){return p;}var e=p[X[0]];if(e&&e.children){return m(e.children,X.slice(1));}return e;}function v(e,X,Y,Z){var $=sap.viz.api.metadata.Viz.get(X);if($){var _=$.properties;Y.forEach(function(a1){a1=a1.split(".");var p=m(_,a1);if(p&&p.hasOwnProperty("defaultValue")){k(e,a1,Z);}});}return e;}};
I.prototype._getPagingVizProperties=function(){if(this._isEnablePaging()){var p={interaction:{zoom:{enablement:false},selectability:{mode:"NONE"}},plotArea:{isFixedDataPointSize:true}};return p;}else{return{};}};
I.prototype._getTimeProperties=function(){var d=["year","month","day"];var o=null;var e=this;var i=this.getVisibleDimensions().filter(function(_){var a1=e.getDimensionByName(_);return(a1 instanceof sap.chart.data.TimeDimension&&a1._getFixedRole()==="category");})[0];var j="ISO";var m,k,p;if(i){var v=this.getDimensionByName(i);switch(v.getTimeUnit()){case u.yearmonthday:d=["year","month","day"];break;case u.yearquarter:d=["year","quarter"];break;case u.yearmonth:d=["year","month"];break;case u.yearweek:d=["year","week"];var X=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),Y=L.getInstance(X),p=X.getRegion();m=Y.getMinimalDaysInFirstWeek();k=Y.getFirstDayOfWeek();k=k===0?7:k;j="Gregorian";break;case u.fiscalyear:d=["fiscal_year"];break;case u.fiscalyearperiod:d=["fiscal_period","fiscal_year"];break;default:}o=v.getFiscalYearPeriodCount();}var Z=this.getProperty("vizProperties");if(Z&&Z.timeAxis){var $=Z.timeAxis;if($.levels){d=$.levels;}if($.fiscal&&$.fiscal.periodNumbers){o=$.fiscal.periodNumbers;}}return{"timeAxis":{"levels":d,"fiscal":{"periodNumbers":o},"levelConfig":{"week":{"type":j,"minDays":m,"firstDayOfWeek":k,"region":p}}}};};
I.prototype.setSelectionMode=function(v){this.setProperty("selectionMode",v);var o=this._getVizFrame();if(o){o.setVizProperties({interaction:{selectability:{mode:v}}});}return this;};
I.prototype.getSelectionMode=function(){var v=this._getVizFrame();if(v){return v.getVizProperties().interaction.selectability.mode;}else{return this.getProperty("selectionMode");}};
I.prototype.setSelectionBehavior=function(v){this.setProperty("selectionBehavior",v);var o=this._getVizFrame();if(o){o.setVizProperties({interaction:{selectability:{behavior:v}}});}return this;};
I.prototype.setEnableScalingFactor=function(v){this.setProperty("enableScalingFactor",v);this._invalidateBy({source:this,keys:{vizFrame:true}});return this;};
I.prototype.getScalingFactor=function(){var v=this._getVizFrame();if(v){var d=v._states()["dynamicScale"];if(d){var e=null;var k=["primaryValues","secondaryValues"];var i=[d.valueAxis,d.valueAxis2];for(var j=0;j<k.length;j++){var m=i[j];if(m&&(m.symbol||m.unit)){e=e||{};var o=k[j];e[o]={scalingFactor:m.symbol};if(m.unit){e[o]["unit"]=m.unit;}}}return e;}}return null;};
I.prototype.getSelectionBehavior=function(){var v=this._getVizFrame();if(v){return v.getVizProperties().interaction.selectability.behavior;}else{return this.getProperty("selectionBehavior");}};
I.prototype.getDimensionByName=function(e){return this.getDimensions().filter(function(d){return d.getName()===e;})[0];};
I.prototype.getMeasureByName=function(d){return this.getMeasures().filter(function(m){return m.getName()===d;})[0];};
I.prototype.getTimeDimensions=function(){return this.getDimensions().filter(function(d){return d instanceof T;});};
I.prototype._isEnablePaging=function(){this._bMobile=sap.ui.Device.system.tablet||sap.ui.Device.system.phone;var d=this.getEnablePagination()&&this._bIsPagingChartType&&!this._bMobile;return d;};
function Q(e){var p=e.getParameters();delete p.id;if(this._isEnablePaging()){this._getPagingController().vizFrameRenderCompleted();}this.fireEvent("renderComplete",p);}
function U(e){var p=e.getParameters();delete p.id;this.fireEvent("_zoomDetected",p);}
function W(e){var p=e.getParameters();delete p.id;var d=this._getDataset();p.data.forEach(function(i){i.context=d.findContext({"_context_row_number":i.data._context_row_number});});this.fireEvent("_selectionDetails",p);}
I.prototype._showLoading=function(d){var $=this.$();if(!$){return;}if(!d){if(this._$loadingIndicator){this._$loadingIndicator.remove();}}else{if(!this._$loadingIndicator){this._$loadingIndicator=this._createLoadingIndicator();}this._updateLoadingIndicator();$.append(this._$loadingIndicator);}this._bLoading=d;};
I.prototype._createLoadingIndicator=function(){var $=jQuery(sap.ui.core.BusyIndicatorUtils.getElement());var d=jQuery("<p>").attr("class","loading-text").text("Loading");d.css({"position":"absolute","transform":"translateY(-3em)","width":"100%","text-align":"center"});d.insertBefore($.children()[0]);$.css({opacity:1});return $;};
I.prototype._updateLoadingIndicator=function(){var $=this.$();if(!$||!this._$loadingIndicator){return;}var d=this._sAdapteredChartType,e=d==="bar"||d.indexOf("horizontal")!==-1;var i=$.find(".v-plot-bound"),o=$.offset(),p={top:o.top,left:o.left,width:$.width(),height:$.height()};if(i.length){var j=i.offset(),k=i[0].getBoundingClientRect();p.top=j.top-1;p.left=j.left;p.width=k.width+1;if(e){p.height=Math.ceil(k.height+1);}else{p.height=Math.floor(k.height+1);}}this._$loadingIndicator.css(p);var m=this._$loadingIndicator.find(".loading-text");m.css({"top":p.height/2,"font-weight":sap.ui.core.theming.Parameters.get("sapUiChartTitleFontWeight"),"font-size":sap.ui.core.theming.Parameters.get("sapUiChartMainTitleFontSize"),"color":sap.ui.core.theming.Parameters.get("sapUiChartMainTitleFontSize")});this._$loadingIndicator.css({"background-color":sap.ui.core.theming.Parameters.get("sapUiExtraLightBG")});};
I.prototype._getRequiredDimensions=function(){var v=this._getVisibleDimensions(),i=this.getInResultDimensions();return this._normalizeDorM(v.concat(i),true);};
I.prototype._getRequiredMeasures=function(){return this._getVisibleMeasures(true);};
I.prototype.exportToSVGString=function(o){var d="<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"/>",v=this._getVizFrame();if(v){d=v.exportToSVGString(o);}return d;};
I.prototype._getPagingController=function(){if(!this._pagingController){this._pagingController=new P(this);}return this._pagingController;};
return I;});
sap.ui.predefine('sap/chart/ChartLog',[],function(){"use strict";
function C(t,n,m){this._type=t;this._name=n;this._message=m;}
C.prototype.display=function(){if(this._type==="error"){jQuery.sap.log.error("[Analytical Chart] "+this._name,this._message);}};
return C;});
sap.ui.predefine('sap/chart/ChartType',function(){"use strict";var C={Bar:"bar",Column:"column",Line:"line",Combination:"combination",Pie:"pie",Donut:"donut",Scatter:"scatter",Bubble:"bubble",Heatmap:"heatmap",Bullet:"bullet",VerticalBullet:"vertical_bullet",StackedBar:"stacked_bar",StackedColumn:"stacked_column",StackedCombination:"stacked_combination",HorizontalStackedCombination:"horizontal_stacked_combination",DualBar:"dual_bar",DualColumn:"dual_column",DualLine:"dual_line",DualStackedBar:"dual_stacked_bar",DualStackedColumn:"dual_stacked_column",DualCombination:"dual_combination",DualHorizontalCombination:"dual_horizontal_combination",DualStackedCombination:"dual_stacked_combination",DualHorizontalStackedCombination:"dual_horizontal_stacked_combination",PercentageStackedBar:"100_stacked_bar",PercentageStackedColumn:"100_stacked_column",PercentageDualStackedBar:"100_dual_stacked_bar",PercentageDualStackedColumn:"100_dual_stacked_column",Waterfall:"waterfall",HorizontalWaterfall:"horizontal_waterfall"};return C;},true);
sap.ui.predefine('sap/chart/ColoringType',function(){"use strict";var C={Criticality:"Criticality",Emphasis:"Emphasis"};return C;},true);
sap.ui.predefine('sap/chart/ScaleBehavior',function(){"use strict";var S={AutoScale:"AutoScale",FixedScale:"FixedScale"};return S;},true);
sap.ui.predefine('sap/chart/SeriesColorTracker',[],function(){"use strict";var _={color:true,color2:true};
function S(){this._mSeriesColor={};}
function s(c){var t=jQuery.type(c);switch(t){case"string":return'"'+c+'"';case"null":case"undefined":return t;case"array":return"["+c.map(s).join(",")+"]";case"object":return"{"+Object.keys(c).map(function(p){return'"'+p+'":'+s(c[p]);}).join(",")+"}";case"number":case"boolean":return String(c);default:return t+"<"+String(c)+">";}}
function g(m,b){var a;for(var i=0;i<m.length;++i){var c=m[i];if(c.fields.length===b.length){var f=true;for(var j=0;f&&j<b.length;++j){f=(b[j]===c.fields[j]);}if(f){a=c;}}}if(!a){a={fields:b.slice(),results:{}};m.push(a);}return a;}
S.prototype.add=function(r){var a=this._mSeriesColor,m;if(r){r.forEach(function(R){var f=R.feed;if(!_[f]){return;}m=a[f];if(!m){m=[];a[f]=m;}var c=g(m,R.fields);var b=c.results;R.results.forEach(function(o){var k=s(o.dataContext);if(!b[k]){b[k]=o;}});});}};
S.prototype.get=function(){var f=Object.keys(this._mSeriesColor);var m=this._mSeriesColor;var r=[];for(var i=0;i<f.length;++i){var a=m[f[i]];var c={feed:f[i],mappings:[]};for(var j=0;j<a.length;++j){var b=[];var d=a[j].results;var K=Object.keys(d);for(var k=0;k<K.length;++k){b.push(d[K[k]]);}c.mappings.push({results:b,fields:a[j].fields});}r.push(c);}return r;};
S.prototype.clear=function(){this._mSeriesColor={};};
return S;});
sap.ui.predefine('sap/chart/TimeUnitType',function(){"use strict";var T={Date:"Date",yearmonthday:"yearmonthday",yearquarter:"yearquarter",yearmonth:"yearmonth",yearweek:"yearweek",fiscalyear:"fiscalyear",fiscalyearperiod:"fiscalyearperiod"};return T;},true);
sap.ui.predefine('sap/chart/coloring/Colorings',["sap/chart/coloring/criticality/Criticality","sap/chart/coloring/emphasis/Emphasis",'sap/chart/ChartLog'],function(C,E,a){"use strict";var S=['Criticality','Emphasis'];
function c(o,A,d){var i=d.aInResultDim,b=A.coloring||null;if(i&&i.length){throw new a('error','',"Semantic coloring could not be applied if inResult Dimensions exist.");}if(!A||!A.coloring){throw new a('error','activeColoring',"The activeColoring is mandatory.");}if(S.indexOf(b)<0){throw new a('error','activeColoring',"The active coloring type, "+b+", is not supported.");}else if(Object.keys(o).indexOf(b)<0){throw new a('error','activeColoring',"The active coloring type, "+b+", should be configured in Coloring.");}}
function s(m){if(m.length<=1){return false;}if(m.length>2){return true;}var b,r,d=false;m.forEach(function(e){var n=e.getSemantics();if(n==="actual"&&!b){b=e;}else if(n==="reference"&&!r){r=e;}else{d=true;}});d=d||(b&&r&&b.getSemanticallyRelatedMeasures()!==r.getName());return d;}
return{getCandidateSetting:function(o,A,t,d,b,e,l,f){c(o,A||{},d);var g,h={},i={'Criticality':C,'Emphasis':E};g=i[A.coloring];h.bMBC=e==="heatmap";h.bShowUnmentionedMsr=!(e&&e.indexOf("scatter")>-1||e&&e.indexOf("bubble")>-1);h.bIsPie=e==="pie"||e==="donut";h.bWaterfall=e&&e.indexOf("waterfall")>-1;h.bTimeChart=e&&e.indexOf("timeseries")>-1;jQuery.extend(true,h,f);if(e==="timeseries_bullet"&&s(d.aMsr)){return{};}if(g){var j=g.getCandidateSetting(o,A,t,d,b,h,l);j.type=A.coloring;return j;}else{return{};}}};});
sap.ui.predefine('sap/chart/coloring/CriticalityType',function(){"use strict";var C={Negative:"Negative",Critical:"Critical",Positive:"Positive",Neutral:"Neutral"};return C;},true);
sap.ui.predefine('sap/chart/coloring/criticality/Criticality',['sap/chart/coloring/criticality/measureValues/MeasureValues','sap/chart/coloring/criticality/DimensionValues','sap/chart/coloring/ColoringUtils','sap/chart/coloring/ColorPalette','sap/chart/coloring/CriticalityType','sap/chart/data/MeasureSemantics'],function(M,D,C,a,b,c){"use strict";var t=jQuery.type;var S=['DimensionValues','MeasureValues'];var m=[b.Positive,b.Neutral,b.Critical,b.Negative,'Unmentioned'];var d=[b.Positive,b.Critical,b.Negative,b.Neutral];
function e(i,l){var r=[];l.forEach(function(s){i.forEach(function(o){if(o.chartLog){throw o.chartLog;}var k=o.parsed.callbacks[s]||[];k.forEach(function(n,p){var q,u;if(s==="Unmentioned"){q=C.assignUnmentionedColor(a.CRITICALITY.Neutral,k.length);u=o.parsed.legend[p];}else{q=C.assignColor(a.CRITICALITY[s],k.length);var L=o.parsed.legend[s];u=(t(L)==="array")?L[p]:L;}var R={callback:n,properties:{color:q[p]},displayName:u};r.push(R);});});});return r;}
function f(i){var o=i[0];var l=o.parsed.legend;var p=[],B=[];var n=l.segments[0].upperBound>l.min;var N=(l.segments.length<2)||(l.segments[l.segments.length-2].upperBound<l.max);l.segments.forEach(function(s){var q=C.assignColor(a.CRITICALITY[s.CriticalityType],1)[0];p.push(q);B.push(s.upperBound);});if(n){B=[l.min].concat(B);}else{p.splice(0,1);}if(N){B[B.length-1]=l.max;}else{p.splice(p.length-1,1);B.splice(B.length-1,1);}var k=p.length;if(p.length===1){p=[p[0],p[0]];k=2;}else if(p.length===0){return null;}return{feed:"color",palette:p,numOfSegments:k,legendValues:B};}
function g(i){var l;if(i&&i.legendTitle){l={title:{text:i.legendTitle,visible:true}};}return l;}
function h(i,l){return function(){var k,p;if(i.bMBC){k=f(i);}else{var r=e(i,l);p={plotArea:{dataPointStyle:{rules:r}},legend:g(i)};}return{colorScale:k,properties:p};};}
function j(T,i){var s=[c.Actual,c.Projected,c.Reference];var m=[b.Positive,b.Neutral,b.Critical,b.Negative];var k=[];var n=[];var l=false;T.forEach(function(o){var p=false;var q=[];o.order=[];if(o.criticalityType){l=true;}s.forEach(function(r){if(o[r]){var u=i.filter(function(v){return o[r]===v.msr.getName();})[0];if(u){p=true;o.order.push(r);}else{q.push(r);}}});o.order=o.order.concat(q);if(p){k.push(o);}else{n.push(o);}});if(l){k.sort(function(o,p){return m.indexOf(o.criticalityType)-m.indexOf(p.criticalityType);});}T.splice(0,T.length);T.push.apply(T,k.concat(n));}
return{getCandidateSetting:function(o,A,T,k,s,l,L){var n=o.Criticality||{},p=A.parameters||{};var u=C.dimOrMsrUse(n,p,k,S);var q={additionalMeasures:[],additionalDimensions:[]};var r=l.bMBC,Q,P,v;switch(u){case'DimensionValues':var w=p.dimension||Object.keys(n.DimensionValues);if(t(w)==='string'){w=[w];}Q=D.qualify(n.DimensionValues,w,k,l);if(Q){q.qualifiedSettings=Q;Q.parsed=D.parse(Q,k.aDim,s,L,l);q.contextHandler=D.getContextHandler(Q,L,l);q.ruleGenerator=h([Q],d);}break;case'MeasureValues':var x=p.measure||Object.keys(n.MeasureValues);if(t(x)==='string'){x=[x];}Q=M.qualify(n.MeasureValues,T,x,k,s,l);if(Q.sMethod){jQuery.each(Q,function(i,y){P=M.parse(y,k,s,l,L);jQuery.each(P.additionalMeasures,function(i,z){q.additionalMeasures.push(z);});jQuery.each(P.additionalDimensions,function(i,z){q.additionalDimensions.push(z);});y.parsed=P;if(y.settings.Legend&&y.settings.Legend.Title){Q.legendTitle=y.settings.Legend.Title;}});v=Q.sMethod;q.contextHandler=M.getContextHandler(v,Q,r,L);q.qualifiedSettings=Q;q.ruleGenerator=h(Q,m);Q.bMBC=r;j(T,Q);}break;default:return{};}if(Q.length){q.subType=u;}return q;},getLegendProps:g};});
sap.ui.predefine('sap/chart/coloring/emphasis/Emphasis',['sap/chart/coloring/emphasis/DimensionValues','sap/chart/coloring/ColorPalette','sap/chart/coloring/ColoringUtils','sap/chart/ChartLog','sap/chart/data/TimeDimension'],function(D,C,a,b,T){"use strict";var t=jQuery.type,S=['DimensionValues','MeasureValues'];
function c(d,l){var o=d[0];var e=o.parsed.callbacks.Highlight||[];var L=o.parsed.legend;var r=[];r.push({callback:e,properties:{color:C.EMPHASIS.Highlight},displayName:L.Highlight});var O={properties:{color:C.EMPHASIS.Others},displayName:L.Others};return{rules:r,others:O};}
function g(d,l){return function(){var p={plotArea:{dataPointStyle:c(d)}};return{properties:p};};}
return{getCandidateSetting:function(o,A,d,e,s,f,l){var E=o.Emphasis||{},p=A.parameters||{};var u=a.dimOrMsrUse(E,p,e,S);var h;switch(u){case'DimensionValues':var i=p.dimension||Object.keys(E.DimensionValues);if(t(i)==='string'){i=[i];}h=D.qualify(E.DimensionValues,i,e,f);if(h){h.parsed=D.parse(h,l);h.ruleGenerator=g([h]);}break;default:return{};}if(h.length){h.subType=u;}return h;}};});
sap.ui.predefine('sap/chart/data/Dimension',["sap/ui/core/Element","sap/chart/utils/ChartUtils"],function(E,C){"use strict";var _={category:true,category2:true,series:true};
var D=E.extend("sap.chart.data.Dimension",{metadata:{library:"sap.chart",properties:{name:{type:"string"},label:{type:"string"},textFormatter:{type:"function"},textProperty:{type:"string"},displayText:{type:"boolean",defaultValue:true},role:{type:"string",defaultValue:"category"}}}});
D.prototype.setLabel=C.makeNotifyParentProperty("label");D.prototype.setTextFormatter=C.makeNotifyParentProperty("textFormatter");var t=C.makeNotifyParentProperty("textProperty");
D.prototype.setTextProperty=function(v,s){return t.apply(this,arguments);};
D.prototype.setDisplayText=C.makeNotifyParentProperty("displayText");var r=C.makeNotifyParentProperty("role");
D.prototype.setRole=function(v,s){if(!_[v]){jQuery.error("Invalide Dimension role: "+v);}return r.apply(this,arguments);};
D.prototype._getFixedRole=function(){return this._sFixedRole||this.getRole();};
return D;});
sap.ui.predefine('sap/chart/data/Measure',["sap/ui/core/Element","sap/chart/utils/ChartUtils","sap/chart/data/MeasureSemantics"],function(E,C,M){"use strict";var _={axis1:true,axis2:true,axis3:true,axis4:true};
var a=E.extend("sap.chart.data.Measure",{metadata:{library:"sap.chart",properties:{name:{type:"string"},label:{type:"string"},unitBinding:{type:"string"},valueFormat:{type:"string",defaultValue:null},role:{type:"string",defaultValue:"axis1"},semantics:{type:"sap.chart.data.MeasureSemantics",defaultValue:M.Actual},semanticallyRelatedMeasures:{type:"object",defaultValue:null}}}});
a.prototype.setLabel=C.makeNotifyParentProperty("label");var r=C.makeNotifyParentProperty("role");
a.prototype.setRole=function(v,s){if(!_[v]){jQuery.error("Invalide Measure role: "+v);}return r.apply(this,arguments);};
a.prototype.setUnitBinding=C.makeNotifyParentProperty("unitBinding");a.prototype.setValueFormat=C.makeNotifyParentProperty("valueFormat");a.prototype.setSemantics=C.makeNotifyParentProperty("semantics");a.prototype.setSemanticallyRelatedMeasures=C.makeNotifyParentProperty("semanticallyRelatedMeasures");
a.prototype._getFixedRole=function(){return this._sFixedRole||this.getRole();};
return a;});
sap.ui.predefine('sap/chart/data/MeasureSemantics',function(){"use strict";var M={Actual:"actual",Reference:"reference",Projected:"projected"};return M;},true);
sap.ui.predefine('sap/chart/data/TimeDimension',["sap/chart/data/Dimension","sap/chart/utils/ChartUtils"],function(D,C){"use strict";
var T=D.extend("sap.chart.data.TimeDimension",{metadata:{library:"sap.chart",properties:{timeUnit:{type:"sap.chart.TimeUnitType"},fiscalYearPeriodCount:{type:"object"},projectedValueStartTime:{type:"any"}}}});
T.prototype.setTimeUnit=C.makeNotifyParentProperty("timeUnit");T.prototype.setFiscalYearPeriodCount=C.makeNotifyParentProperty("fiscalYearPeriodCount");T.prototype.setProjectedValueStartTime=C.makeNotifyParentProperty("projectedValueStartTime");return T;});
sap.ui.predefine('sap/chart/library',['jquery.sap.global','sap/viz/ui5/format/ChartFormatter','sap/ui/core/library','sap/viz/library','sap/chart/utils/RoleFitter','sap/chart/ChartType','sap/chart/AutoScaleMode','sap/chart/ScaleBehavior','sap/chart/data/MeasureSemantics','sap/chart/coloring/CriticalityType','sap/chart/ColoringType'],function(q,C,c,v,R,a,A,S,M){"use strict";sap.ui.getCore().initLibrary({name:"sap.chart",dependencies:["sap.ui.core","sap.viz"],types:["sap.chart.data.MeasureSemantics"],interfaces:[],controls:["sap.chart.Chart"],elements:["sap.chart.data.Dimension","sap.chart.data.TimeDimension","sap.chart.data.Measure"],noLibraryCSS:true,version:"1.50.6"});sap.chart.SelectionMode={Multi:"MULTIPLE",Single:"SINGLE",None:"NONE"};sap.chart.SelectionBehavior={DataPoint:"DATAPOINT",Category:"CATEGORY",Series:"SERIES"};sap.chart.MessageId={NoData:"NO_DATA",MultipleUnits:"MULTIPLE_UNITS"};sap.chart.api={};
sap.chart.api.getChartTypes=function(){var p=q.sap.getModulePath("sap.chart");var B=q.sap.resources({url:p+"/i18n/i18n.properties"});return Object.keys(sap.chart.ChartType).reduce(function(m,s){var d=sap.chart.ChartType[s];m[d]=B.getText("info/"+d);return m;},{});};
sap.chart.data=sap.chart.data||{};sap.chart.coloring=sap.chart.coloring||{};sap.chart.coloring.ImprovementDirectionType={Minimize:"Minimize",Target:"Target",Maximize:"Maximize"};
sap.chart.api.getChartTypeLayout=function(s,d,m){var D,e;if(!s){throw new Error("Invalid chart type: "+String(s));}if(d){D=d.map(function(f,i){if(f&&f.name){return{getName:function(){return f.name;},getRole:function(){return f.role||"category";}};}else{throw new Error("Invalid Dimension at ["+i+"]: "+String(f)+". Dimension should be an object of the format{name:'name'}.");}});}else{D=[];}if(m){e=m.map(function(f,i){if(f&&f.name){return{getName:function(){return f.name;},getRole:function(){return f.role||"axis1";}};}else{throw new Error("Invalid Measure at ["+i+"]: "+String(f)+". Measure should be an object of the format{name:'name'}.");}});}else{e=[];}var o=R.compatible(s,D,e);return{dimensions:o.used.Dimension||[],measures:o.used.Measure||[],errors:Object.keys(o.error||{}).reduce(function(E,f){return E.concat({cause:f,detail:o.error[f]});},[])};};
var b=C.getInstance();if(!(sap.viz.api.env.Format.numericFormatter()instanceof C)){sap.viz.api.env.Format.numericFormatter(b);}return sap.chart;});
sap.ui.predefine('sap/chart/pagination/PagingController',['sap/ui/model/Sorter'],function(S){"use strict";var P=500;
function i(b,s,l){var c=b.getContexts(s,l),n;if(c.length===0||c.dataRequested){n=true;}else{n=c.some(function(C){return C===undefined;});}return!n;}
var a=function(c){this._mMeasureRange={};this._iRenderedPageNo=-1;this._bUnderPaging=false;this._iMaxPageNo=-1;this._iRemainingRecords=-1;this._iOffset=null;this._oChart=c;this._bInitialized=false;this._aPagingSorters=null;this._bMinMaxQueried=false;this._oColorTracker=c._oColorTracker;var d=this._oChart._getDataset();if(d){d.setRange(0,P*2);}var v=this._oChart._getVizFrame();v.attachEvent("_scroll",a.prototype._scrollHandler.bind(this));};
a.prototype.bindingChanged=function(){if(!this._bInitialized||!this._bMinMaxQueried){this.init(true);}else if(this.isUnderPaging()){this.paging(this._scrollRatio);}};
a.prototype.reset=function(){this._bInitialized=false;this._iRenderedPageNo=0;this._mMeasureRange={};this._bMinMaxQueried=false;this._oColorTracker.clear();var b=this._oChart.getBinding("data");var d=this._oChart._getDataset();if(!d||!b){return;}var f=this._oChart._prepareFeeds();f._order=f._order.filter(function(F){return F!=="MND"&&this._oChart.getDimensions().map(function(v){return v.getName();}).indexOf(F)>-1;}.bind(this));this._aPagingSorters=null;this._oChart._getVizFrame()._runtimeScales(this._oColorTracker.get(),true);this._oChart._getVizFrame()._readyToRender(false);var l;if(this._oChart.getBindingInfo("data").length){l=Math.min(P*2,this._oChart.getBindingInfo("data").length);}else{l=P*2;}d.setRange(0,l);if(f._order.length){var s=this._oChart._aFeeds._order.map(function(p){return new S(p);});b.sort(s);this._aPagingSorters=s;}d.setPagingOption({bEnabled:false});};
a.prototype.getPagingSorters=function(){return this._aPagingSorters;};
a.prototype.isUnderPaging=function(){return!!this._bUnderPaging;};
a.prototype.init=function(n){this._bInitialized=true;this._bUnderPaging=false;var v=this._oChart._getVizFrame();var d=v.getDataset();var b=d.getBinding("data");if(!b){return;}var t=b instanceof sap.ui.model.analytics.AnalyticalBinding?b.getTotalSize():b.getLength();var p;if(t>=0){if(this._oChart.getBindingInfo("data").length){this._iTotalSize=Math.min(this._oChart.getBindingInfo("data").length,t);}else{this._iTotalSize=t;}if(this._iTotalSize>P*2){this._bUnderPaging=true;this._iMaxPageNo=Math.floor(this._iTotalSize/P)-1;this._iRemainingRecords=this._iTotalSize%P;this._iOffset=null;this._iRenderedPageNo=0;var c=P/this._iTotalSize;p={bEnabled:true,sMode:"reset",thumbRatio:c};d.setRange(0,P);if(n){this._bMinMaxQueried=true;this._queryMinMax(this._oChart,b,function(q){var m={};jQuery.each(q,function(M,r){m[M]={min:r.min.value,max:r.max.value};});this._mMeasureRange=m;this._oChart._invalidateBy({source:this._oChart,keys:{vizFrame:true}});this._oChart.setBusy(false);v._readyToRender(i(b,0,P));}.bind(this));}else{v._readyToRender(i(b,0,P));}this._bUnderPaging=true;}else{this._mMeasureRange={};p={bEnabled:false};this._bUnderPaging=false;d.setRange(0,this._iTotalSize);v._readyToRender(i(b,0,this._iTotalSize));}d.setPagingOption(p);}};
a.prototype.paging=function(r){var c=Math.floor(this._iTotalSize*r/P);var v=this._oChart._getVizFrame();c=Math.min(c,this._iMaxPageNo);this._iOffset=null;var s=Math.max((c-1)*P,0);var l,d;if(c===0){l=P;d=P;}else if(c===this._iMaxPageNo){l=P*2+this._iRemainingRecords;d=P+this._iRemainingRecords;}else{l=P*2;d=P;}this._iOffset=(this._iTotalSize*r-c*P)/d;if(this._iRenderedPageNo===c){var t={plot:{transform:{translate:{translateByPage:{context:this._middleCtx,offset:this._iOffset}}}}};v._states(t);}else{if(this._pagingTimer){jQuery.sap.clearDelayedCall(this._pagingTimer);}var D=v.getDataset();var b=D.getBinding("data");this._pagingTimer=jQuery.sap.delayedCall(50,this,function(){D.setRange(s,l);D.setPagingOption({bEnabled:true,sMode:"update",thumbRatio:null});var e=i(b,s,l);if(e){this._iRenderedPageNo=c;D.invalidate();v._readyToRender(true);v.invalidate();this._oColorTracker.add(v._runtimeScales());v._runtimeScales(this._oColorTracker.get(),true);}else{v._readyToRender(false);}});this._sLoadingTimer=this._sLoadingTimer||jQuery.sap.delayedCall(200,this,function(){this._oChart._showLoading(true);});}};
a.prototype.vizFrameRenderCompleted=function(){if(this._sLoadingTimer){jQuery.sap.clearDelayedCall(this._sLoadingTimer);this._sLoadingTimer=null;}this._oChart._showLoading(false);if(!this._bUnderPaging){return;}var v=this._oChart._getVizFrame();var d=v.getDataset();var b=d.getBinding("data");var r=this._iRenderedPageNo;if(r!==0){var m=r*P-1;this._middleCtx=b.getContexts(m,1)[0].getObject();}else{this._middleCtx=null;}if(this._middleCtx||this._iOffset){var t={plot:{transform:{translate:{translateByPage:{context:this._middleCtx,offset:this._iOffset}}}}};v._states(t);}};
a.prototype._scrollHandler=function(e){if(this._oChart._isEnablePaging()){this._scrollRatio=e.getParameters().position;this.paging(this._scrollRatio);}};
a.prototype._queryMinMax=function(c,b,C){var d=c._getRequiredDimensions().map(function(D){return D.getName();}),m=c._getRequiredMeasures().map(function(g){return g.getName();});var r=m.reduce(function(r,s){r[s]={min:{},max:{}};return r;},{});function e(){var A=m.every(function(s){return r[s].min.requested&&r[s].max.requested;});if(A){C(r);}}function o(s,k,D){r[s][k].requested=true;r[s][k].value=parseFloat(D&&D.results[0][s]);e();}function f(s,k,D){r[s][k].requested=true;r[s][k].error=D;e();}var q=m.reduce(function(q,s){return q.concat({urlParameters:{"$select":d.concat(s).join(","),"$top":1,"$orderby":s+" asc"},success:o.bind(null,s,"min"),error:f.bind(null,s,"min")},{urlParameters:{"$select":d.concat(s).join(","),"$top":1,"$orderby":s+" desc"},success:o.bind(null,s,"max"),error:f.bind(null,s,"max")});},[]);var p=b.getPath(),M=b.getModel();q.forEach(function(Q){M.read(p,Q);});return q;};
a.prototype.getCurrentContexts=function(){var v=this._oChart._getVizFrame();var d=v.getDataset();var r=d.getRange();var s=r.iStartIndex,l;if(this._iRenderedPageNo===0){l=r.iLength*2;}else{l=r.iLength;}return d.getBinding("data").getContexts(s,l);};
a.prototype.getMeasureRange=function(){return this._mMeasureRange;};
return a;});
sap.ui.predefine('sap/chart/utils/ChartTypeAdapterUtils',['sap/chart/utils/ChartUtils'],function(C){"use strict";var a={};
function t(c,d){var h=d.some(function(D){return D instanceof sap.chart.data.TimeDimension;});if(h){return C.CONFIG.oAdapteredChartTypes[c];}else{return c;}}
a.adaptChartType=function(c,d){if(C.CONFIG.oAdapteredChartTypes[c]){return t(c,d);}else{return c;}};
return a;});
sap.ui.predefine('sap/chart/utils/ChartUtils',['sap/chart/ChartType'],function(C){"use strict";var _={chartTypes:[C.Bar,C.Column,C.Line,C.Combination,C.Pie,C.Donut,C.Scatter,C.Bubble,C.Heatmap,C.Bullet,C.VerticalBullet,C.StackedBar,C.StackedColumn,C.StackedCombination,C.HorizontalStackedCombination,C.DualBar,C.DualColumn,C.DualLine,C.DualStackedBar,C.DualStackedColumn,C.DualCombination,C.DualHorizontalCombination,C.DualStackedCombination,C.DualHorizontalStackedCombination,C.PercentageStackedBar,C.PercentageStackedColumn,C.PercentageDualStackedBar,C.PercentageDualStackedColumn,C.Waterfall,C.HorizontalWaterfall],pagingChartTypes:[C.Bar,C.Column,C.Line,C.Combination,C.Bullet,C.VerticalBullet,C.StackedBar,C.StackedColumn,C.StackedCombination,C.HorizontalStackedCombination,C.DualBar,C.DualColumn,C.DualLine,C.DualStackedBar,C.DualStackedColumn,C.DualCombination,C.DualHorizontalCombination,C.DualStackedCombination,C.DualHorizontalStackedCombination,C.PercentageStackedBar,C.PercentageStackedColumn,C.PercentageDualStackedBar,C.PercentageDualStackedColumn],timeChartTypes:["timeseries_line","timeseries_column","timeseries_bubble","timeseries_scatter","timeseries_combination","dual_timeseries_combination","timeseries_bullet","timeseries_stacked_column","timeseries_100_stacked_column","timeseries_waterfall"],oAdapteredChartTypes:{"line":"timeseries_line","column":"timeseries_column","scatter":"timeseries_scatter","bubble":"timeseries_bubble","combination":"timeseries_combination","dual_combination":"dual_timeseries_combination","vertical_bullet":"timeseries_bullet","stacked_column":"timeseries_stacked_column","100_stacked_column":"timeseries_100_stacked_column","waterfall":"timeseries_waterfall"},nonSemanticPatternChartType:[C.Combination,C.Pie,C.Donut,C.Scatter,C.Bubble,C.Heatmap,C.StackedBar,C.StackedColumn,C.StackedCombination,C.HorizontalStackedCombination,C.DualStackedBar,C.DualStackedColumn,C.DualCombination,C.DualHorizontalCombination,C.DualStackedCombination,C.DualHorizontalStackedCombination,C.PercentageStackedBar,C.PercentageStackedColumn,C.PercentageDualStackedBar,C.PercentageDualStackedColumn,C.Waterfall,C.HorizontalWaterfall,"timeseries_bubble","timeseries_scatter","timeseries_combination","dual_timeseries_combination","timeseries_stacked_column","timeseries_100_stacked_column","timeseries_waterfall"],lineChartType:[C.Line,C.DualLine,'timeseries_line']};return{CONFIG:_,makeNotifyParentProperty:function(p){return function(v,s){var o=this.mProperties[p];v=this.validateProperty(p,v);if(jQuery.sap.equal(o,v)){return this;}this.setProperty(p,v,s);if(s){return this;}var P=this.getParent();if(P&&typeof P._invalidateBy==="function"){P._invalidateBy({source:this,property:p,oldValue:o,newValue:v});}return this;};},isStackedLikeChart:function(c){return c.indexOf('stacked')>=0||c.indexOf('waterfall')>=0;},isBulletChart:function(c){return c.indexOf('bullet')>=0;}};});
sap.ui.predefine('sap/chart/utils/DataSourceUtils',['sap/chart/data/Dimension','sap/chart/data/TimeDimension','sap/chart/data/Measure','sap/chart/TimeUnitType'],function(D,T,M,a){"use strict";
function g(i,B){var p=B.path;var n=(B.parameters||{}).entitySet;if(!n){n=p.split("/")[1];if(n.indexOf("(")!=-1){n=n.split("(")[0]+(i?"Results":"Set");}}return n;}
function _(r,s,t){return"{/#"+r+"/"+s+"/@sap:"+t+"}";}
function d(p,C){var f=D;if(p.type==="Edm.DateTime"&&p['sap:display-format']==="Date"){f=T;C.timeUnit=a.Date;}else if(p.type==="Edm.String"&&a[p['sap:semantics']]){f=T;C.timeUnit=p['sap:semantics'];}return f;}
var b={getEntitySet:g.bind(null,true),deriveColumns:function(m,B){var r=m.getAnalyticalExtensions().findQueryResultByName(b.getEntitySet(B));if(!r){throw new Error("value of the \"isAnalytical\" property does not match the Data Service in use");}var R=r.getEntityType().getQName();R=R.slice(R.lastIndexOf(".")+1);var s=r.getEntityType().getSchema().namespace;var f=b.makeDimension.bind(this,R,s,r);var h=b.makeMeasure.bind(this,R);return{dimensions:jQuery.map(r.getAllDimensions(),f),measures:jQuery.map(r.getAllMeasures(),h)};},makeDimension:function(r,R,o,f){var s=f.getName();var C={name:s,label:_(r,s,"label"),textProperty:_(r,s,"text")};var A=b.ANNOTATION_ACCESS_TEMPLATE.replace(/%SCHEMANS/,R).replace(/%RESULTTYPE/,r).replace(/%DIMENSION/,s);var u=o.getModel().getODataModel().getMetaModel().getProperty(A);var h=d(u,C);return new h(C);},makeMeasure:function(r,m){return new M({name:m.getName(),label:_(r,m.getName(),"label")});},updateModel:function(C){function f(n,p,q){var t=n.getTextProperty(),j=[{name:n.getName(),grouped:false,inResult:!!p,visible:!q}];if(n.getDisplayText()&&t){j.push({name:t,grouped:false,inResult:!!p,visible:!q});}return j;}function h(n){var u=n.getUnitBinding(),j=[{name:n.getName(),total:false,inResult:false,visible:true}];if(u){j.push({name:u,total:false,inResult:false,visible:true});}return j;}var B=C.getBinding("data");if(!B){return;}var i=C._getVisibleDimensions(true);var m=C._getVisibleMeasures(true);var I=C._normalizeDorM(C.getInResultDimensions(),true);var j=i.reduce(function(j,n){return j.concat(f(n));},[]).concat(I.reduce(function(j,n){return j.concat(f(n,true,true));},[])).concat(m.reduce(function(j,n){return j.concat(h(n));},[]));var o=C._getCandidateColoringSetting();var k=o.additionalMeasures||[];var l=o.additionalDimensions||[];if(k.length){j=j.concat(C._normalizeDorM(k).reduce(function(n,p){return n.concat(h(p));},[]));}if(l.length){j=j.concat(C._normalizeDorM(l,true).reduce(function(n,p){return n.concat(f(p));},[]));}B.updateAnalyticalInfo(j);},ANNOTATION_ACCESS_TEMPLATE:"/dataServices/schema/[${"+"namespace"+"}==='%SCHEMANS']/entityType/[${"+"name"+"}==='%RESULTTYPE']/property/[${"+"name"+"}==='%DIMENSION']/"};var c={getEntitySet:g.bind(null,false),deriveColumns:function(m,B){var o=m.getMetaModel(),C={dimensions:[],measures:[]};if(o){var q=o.getODataEntitySet(c.getEntitySet(B)).entityType;var E=o.getODataEntityType(q);jQuery.each(E.property,function(i,p){var f=c.CLAZZ[p.type];if(!f){throw new Error("Unsupported type: "+p.type);}var h={name:p.name};if(p.hasOwnProperty("sap:label")){h.label=p["sap:label"];}if(f===M){C.measures.push(new f(h));}else{if(p.hasOwnProperty("sap:text")){h.textProperty=p["sap:text"];}f=d(p,h);C.dimensions.push(new f(h));}});}return C;},CLAZZ:{"Null":D,"Edm.Binary":D,"Edm.Boolean":D,"Edm.Byte":M,"Edm.DateTime":D,"Edm.Decimal":M,"Edm.Double":M,"Edm.Single":M,"Edm.Guid":D,"Edm.Int16":M,"Edm.Int32":M,"Edm.Int64":M,"Edm.SByte":M,"Edm.String":D,"Edm.Time":D,"Edm.DateTimeOffset":D},updateModel:function(C,f,m){if(C.getModel()instanceof sap.ui.model.odata.ODataModel){var h=f.reduce(function(h,o){if(o.getTextProperty()){return h.concat(o.getName(),o.getTextProperty());}else{return h.concat(o.getName());}},[]);var i=m.reduce(function(i,o){if(o.getUnitBinding()){return i.concat(o.getName(),o.getUnitBinding());}else{return i.concat(o.getName());}},[]);C._oBindingInfo.parameters=C._oBindingInfo.parameters||{};C._oBindingInfo.parameters.entitySet=c.getEntitySet(C._oBindingInfo);C._oBindingInfo.parameters.select=h.concat(i).join(",");C.bindData(C._oBindingInfo);if(C._isEnablePaging()&&C._getPagingController().getPagingSorters()){C.getBinding("data").sort(C._getPagingController().getPagingSorters());}}else{return;}}};
function e(m){return function(i){var f=i?b:c;return f[m];};}
return{deriveColumns:e("deriveColumns"),updateModel:e("updateModel"),getEntitySet:e("getEntitySet")};});
sap.ui.predefine('sap/chart/utils/DateFormatUtil',['sap/chart/TimeUnitType','sap/ui/core/format/DateFormat'],function(T,D){"use strict";var P={};P[T.yearmonthday]="yyyyMMdd";P[T.yearquarter]="yyyyQQQQQ";P[T.yearmonth]="yyyyMM";P[T.yearweek]="yyyyww";
function g(t){var p=P[t];if(p){return D.getDateInstance({pattern:p});}else{return null;}}
return{getInstance:g};});
sap.ui.predefine('sap/chart/utils/MeasureSemanticsUtils',['sap/chart/coloring/ColoringUtils','sap/chart/coloring/ColorPalette','sap/chart/data/MeasureSemantics','sap/chart/coloring/CriticalityType','sap/chart/ChartLog','sap/chart/ColoringType','sap/chart/coloring/criticality/Criticality','sap/chart/utils/ChartUtils'],function(C,c,M,d,f,g,h,j){"use strict";var k=['sapUiChartPaletteQualitativeHue1','sapUiChartPaletteQualitativeHue2','sapUiChartPaletteQualitativeHue3','sapUiChartPaletteQualitativeHue4','sapUiChartPaletteQualitativeHue5','sapUiChartPaletteQualitativeHue6','sapUiChartPaletteQualitativeHue7','sapUiChartPaletteQualitativeHue8','sapUiChartPaletteQualitativeHue9','sapUiChartPaletteQualitativeHue10','sapUiChartPaletteQualitativeHue11'],D=[['sapUiChartPaletteSequentialHue1','sapUiChartPaletteSequentialHue1Light2','sapUiChartPaletteSequentialHue1Dark1'],['sapUiChartPaletteSequentialHue2','sapUiChartPaletteSequentialHue2Light2','sapUiChartPaletteSequentialHue2Dark1']],S='sapUiChartPaletteSequentialNeutralDark2',l='sapUiChartPaletteSemanticNeutral',L={actual:'solid',projected:'dash',reference:'dot'},P={projected:'diagonalLightStripe',reference:'noFill'};var m=[d.Positive,d.Neutral,d.Critical,d.Negative];
function r(a){var R={};if(a.getSemanticallyRelatedMeasures){var b=a.getSemanticallyRelatedMeasures();if(b){if(b.projectedValueMeasure){R.projected=b.projectedValueMeasure;}if(b.referenceValueMeasure){R.reference=b.referenceValueMeasure;}return R;}}return R;}
function n(a,I){var b=a.reduce(function(b,e){b[e.getName()]={msr:e,sem:(e.getSemantics&&e.getSemantics())||"actual",rel:r(e)};return b;},{});jQuery.each(b,function(z,A){if(A.sem==="actual"){jQuery.each(A.rel,function(B,T){if(b[T]&&b[T].sem!==B){delete A.rel[B];var E=new f("error","Semantic Pattern",T+" shouldn't be used as "+B+" in semantic relation. ");E.display();}});}});if(I){for(var i=0;i<I.length;i++){var e=I[i];var R=r(e);if(R.projected&&R.reference&&b[R.projected]&&b[R.reference]){b[R.projected]={msr:e,sem:'projected',rel:{reference:R.reference}};}}}return b;}
function o(e,i,z){var T=[],A=0,B;jQuery.each(e.slice().sort(function(a,b){var E=i[a.getName()].sem,F=i[b.getName()].sem;if(E<F){return-1;}else if(E>F){return 1;}else{return e.indexOf(a)-e.indexOf(b);}}),function(a,b){var N=b.getName();if(!i[N]){return;}var E=i[N];var F={};var G;F[z?'actual':E.sem]=N;if(b.getLabel){G=b.getLabel();if(G){F.labels={};F.labels[E.sem]=G;}}F.index=A++;if(!z&&(E.sem==="actual"||E.sem==="projected")){if(E.rel.projected){if(i[E.rel.projected]){F.projected=E.rel.projected;if(i[E.rel.projected].msr.getLabel){G=i[E.rel.projected].msr.getLabel();if(G){F.labels=jQuery.extend(true,F.labels,{projected:G});}}delete i[E.rel.projected];}else{B=new f('error','Semantic Pattern',E.msr.getName()+' has an invalid projected semantic relation.');B.display();}}if(E.rel.reference){if(i[E.rel.reference]){F.reference=E.rel.reference;if(i[E.rel.reference].msr.getLabel){G=i[E.rel.reference].msr.getLabel();if(G){F.labels=jQuery.extend(true,F.labels,{reference:G});}}delete i[E.rel.reference];}else{B=new f('error','Semantic Pattern',E.msr.getName()+' has an invalid reference semantic relation.');B.display();}}delete i[N];}F.order=[M.Actual,M.Projected,M.Reference];T.push(F);});return T;}
var p=function(a,b){if(!a.dataPointStyle){a=jQuery.extend(true,a,{"dataPointStyle":{"rules":[],others:null}});}a.dataPointStyle.rules.push(b);};var q=function(a,i,b){var e,z;if(a.indexOf('dual')===-1){z=k;e=k.length;}else{var A=(b==='valueAxis')?0:1;z=D[A];e=z.length;}return{actual:z[i%e],projected:z[i%e],reference:z[i%e]};};var s=function(T,a,b){if(T.projectedValueStartTime&&T.timeAxis&&a!==M.Reference){b=b||function(){return true;};var i=function(e){return e.hasOwnProperty(T.semanticMsrName);};if(a===M.Actual){return function(e){return b(e)&&i(e)&&(new Date(e[T.timeAxis]).getTime()<T.projectedValueStartTime);};}else if(a===M.Projected){return function(e){return b(e)&&i(e)&&(new Date(e[T.timeAxis]).getTime()>=T.projectedValueStartTime);};}}else{b=b||function(e){return e.hasOwnProperty(T[a]);};return b;}};var t=function(T,a,b,e){var i,z;if(a){if(T.iUnMentionedIndex==undefined){z=l;}else{i=C.assignUnmentionedColor(c.CRITICALITY.Neutral,e.unMentionedTuplesNumber);z=i[T.iUnMentionedIndex];}}else{if(b===M.Reference&&e.hasSingleReference){z=S;}else{i=q(e.chartType,T.index,T.valueAxisID);z=i[b];}}return z;};var u=function(T,a,b,e,i){var z,A,B={},E;var F=T[b];var G;(a||[]).forEach(function(J){if(J.parsed.msr&&J.parsed.msr.getName()===F){A=J.parsed;G=J.type;}});var H=(T.labels&&T.labels[b])?T.labels[b]:F;if(T.semanticMsrName&&(b===M.Actual||b===M.Projected)){B[T.semanticMsrName]=H;}if(A){m.forEach(function(J){var K=A.callbacks[J];if(K){var I=s(T,b,K[0]);z=C.assignColor(c.CRITICALITY[J],K.length)[0];E={"color":z,"pattern":P[b]};if(j.CONFIG.lineChartType.indexOf(i.chartType)>-1){E.lineType=L[b];if(G==='Static'){E.lineColor=z;}}p(e,{"callback":I,"properties":E,"displayName":A.legend[J],"dataName":B});}});}else{if(!a||a.bShowUnmentionedMsr){var I=s(T,b);z=t(T,a,b,i);E={'color':z,"pattern":P[b]};if(j.CONFIG.lineChartType.indexOf(i.chartType)>-1){E.lineType=L[b];E.lineColor=z;}p(e,{"callback":I,"properties":E,"displayName":H,"dataName":B});}}};var v=function(a){return a.reference&&(!(a.actual||a.projected));};var w=function(T,a,b,e){var i=(T.filter(function(z){return z.reference;}).length===1);var U=T.filter(function(z){return z.hasOwnProperty('iUnMentionedIndex');}).length;T.forEach(function(z){z.order.forEach(function(A){var N=true;if(e.indexOf('bullet')>-1){N=(A!==M.Reference||v(z));}if(z.hasOwnProperty(A)&&N){var B={chartType:e,hasSingleReference:i,unMentionedTuplesNumber:U};u(z,a,A,b,B);}});});};var x=function(a,b,i,E,z,A){i=i||{};var B=(i.type===g.Criticality&&i.subType==="MeasureValues"&&!(i.qualifiedSettings&&i.qualifiedSettings.bMBC));var F={};if(!z){F.plotArea={dataPointStyle:null};}if(!A){F.legend={title:{text:null,visible:a.indexOf('waterfall')>-1?true:false}};}var G,H=true;if((E&&y(b))||B){var I=B?i.qualifiedSettings:null;w(b,I,F.plotArea,a);jQuery.extend(true,F.legend,h.getLegendProps(I));}else if(i.ruleGenerator){try{var J=i.ruleGenerator();jQuery.extend(true,F,J.properties);G=J.colorScale;}catch(e){if(e instanceof f){e.display();}else{throw e;}}}if(G){H=false;}return{properties:F,scales:G?[G]:[],replaceColorScales:H};};
function y(T){if(T){return T.some(function(a){return a.hasOwnProperty(M.Projected)||a.hasOwnProperty(M.Reference);});}return false;}
return{getTuples:function(a,i,b){return o(a,n(a,i),b);},getSemanticVizSettings:x,hasSemanticRelation:y};});
sap.ui.predefine('sap/chart/utils/RoleFitter',['sap/viz/ui5/data/DimensionDefinition','sap/viz/ui5/data/MeasureDefinition','sap/viz/ui5/controls/common/feeds/FeedItem','sap/viz/ui5/controls/common/feeds/AnalysisObject','sap/chart/TimeUnitType','sap/chart/utils/DateFormatUtil','sap/chart/utils/ChartUtils','sap/chart/utils/RoleMapper','sap/chart/ChartLog'],function(D,M,F,A,T,a,C,R,b){"use strict";var s=function(){return sap.viz.vizservices.BVRService.suggestFeeds.apply(null,arguments);};var c=function(f,i){var r=sap.viz.vizservices.FeedService.validate(f,i);if(!r.valid){var k=r.results?r.results.bindings:null;if(k&&Object.keys(k).every(function(m){return k[m].allowMND&&(!k[m].missing||k[m].missing===1)&&!k[m].incorrect;})){return{valid:true};}}return r;};var _=[{"types":"*","toViz":{"category|category2":"categoryAxis","series":"color","axis1|axis2|axis3|axis4":"valueAxis"}},{"types":"column|bar|stacked_bar|stacked_column|line|combination|100_stacked_bar|100_stacked_column|stacked_combination|horizontal_stacked_combination","toViz":{}},{"types":"scatter|bubble|time_bubble|timeseries_scatter|timeseries_bubble","toViz":{"category|category2":"@context","axis1":"valueAxis","axis2":"valueAxis2"}},{"types":"bubble|time_bubble","toViz":{"axis3":"bubbleWidth"}},{"types":"pie|donut","toViz":{"category|series|category2":"color","axis1|axis2|axis3|axis4":"size"}},{"types":"bullet|vertical_bullet","toViz":{"axis1|axis2|axis3|axis4":"@semanticBulletMsrs"}},{"types":"dual_combination|dual_horizontal_combination|dual_stacked_bar|100_dual_stacked_bar|dual_stacked_column|100_dual_stacked_column|dual_bar|dual_column|dual_line|dual_stacked_combination|dual_horizontal_stacked_combination","toViz":{"axis1":"valueAxis","axis2|axis3|axis4":"valueAxis2"}},{"types":"timeseries_line|timeseries_column|timeseries_combination|timeseries_stacked_column|timeseries_100_stacked_column","toViz":{"category":"timeAxis"}},{"types":"timeseries_scatter","toViz":{"category":R,"axis2|axis3":false}},{"types":"timeseries_bubble","toViz":{"category":R,"axis2":false,"axis3":"bubbleWidth"}},{"types":"dual_timeseries_combination","toViz":{"category":"timeAxis","axis1":"valueAxis","axis2|axis3|axis4":"valueAxis2"}},{"types":"heatmap","toViz":{"category":"categoryAxis","category2|series":"categoryAxis2","axis1|axis2|axis3|axis4":"color"}},{"types":"waterfall|horizontal_waterfall","toViz":{"series":"waterfallType"}},{"types":"timeseries_bullet","toViz":{"category|series":"timeAxis","axis1|axis2|axis3|axis4":"@semanticBulletMsrs"}},{"types":"timeseries_waterfall","toViz":{"category|series":"timeAxis"}}].reduce(function(m,f){var i=Object.keys(f.toViz).reduce(function(i,k){k.split("|").forEach(function(r){i[r]=f.toViz[k];return i;});return i;},{});f.types.split("|").forEach(function(k){if(!m.hasOwnProperty(k)){m[k]=[];}m[k].push(i);});return m;},{});var d=Object.keys(_).reduce(function(m,f){if(f!=="*"){m[f]=jQuery.extend.apply(null,[true,{}].concat(_["*"].concat(_[f])));}return m;},{});
function e(f,k,v){var i=(typeof k==="function")?k:function(o){return o[k];};return f.reduce(function(o,m){var n=i(m),r=(typeof v==="function")?v(m):m;if(n&&!o[n]){o[n]=[r];}else if(n){o[n].push(r);}return o;},{});}
function g(m,f){var o={},r;f.forEach(function(v){var i=v._sFixedRole||v.getRole();if(m.hasOwnProperty(i)){var k=m[i];if(k){if(typeof k==="function"){if(!r){r=new k();}k=r.toFeedingId(v);}if(!o[k]){o[k]=[];}o[k].push(v);}}});return o;}
var L={from:F.fromLightWeightFmt,build:function(o){var f=[];jQuery.each(o.dims,function(k,v){f.push({id:k,type:"Dimension",values:v.map(h("Dimension"))});});jQuery.each(o.msrs,function(k,v){f.push({id:k,type:"Measure",values:v.map(h("Measure"))});});return f;}};
function h(f){return function(o){var i=o.getName();if(i==="MND"){return{id:"MND",type:"MND"};}var k={id:i,name:i,type:f};if(o instanceof sap.chart.data.TimeDimension){k.dataType="Date";}return k;};}
function w(o,p){var n=o.getName(),f=o.getLabel(),i=o.getTextProperty(),k=o.getTextFormatter(),m=o.getDisplayText();var r={identity:n,name:f||n,value:"{"+n+"}"};if(typeof k==="function"){r.displayValue={formatter:k,parts:[{path:n,type:new sap.ui.model.type.String()}]};if(i){r.displayValue.parts.push({path:i,type:new sap.ui.model.type.String()});}}else if(m&&i){r.displayValue="{"+i+"}";}var v=new D(r);if(p&&o instanceof sap.chart.data.TimeDimension){var O=a.getInstance(o.getTimeUnit());if(O){var P=O.parse.bind(O);v.getBindingInfo("value").formatter=function(V){return P(V);};}v.setDataType("Date");v._setTimeUnit(o.getTimeUnit());}return v;}
function j(m){var n=m.getName();var o=new M({identity:n,name:m.getLabel()||n,value:"{"+n+"}"});o._setUnitBinding(m.getUnitBinding());return o;}
function l(f,i){var m=sap.viz.api.metadata.Viz.get("info/"+f),k=e(m.bindings,"role"),n=e(i,"id"),o=k["layout.category"]||[],S=k["mark.color"]||[];if(o.length===0){return[];}else{var O=[];jQuery.each(o.concat(S),function(r,v){var P=n[v.id];if(P&&P.length>0){jQuery.each(P[0].values,function(Q,V){O.push(V.id);});}});return O;}}
function p(f){return C.CONFIG.timeChartTypes.indexOf(f)>-1;}
function q(f){return f&&f.indexOf('bullet')>-1;}
function t(i){jQuery.each(i,function(f,m){if(m&&(m.getSemantics&&m.getSemantics()!=='actual'||m.getSemanticallyRelatedMeasures&&!jQuery.isEmptyObject(m.getSemanticallyRelatedMeasures()))){new b('error','Semantic Pattern'," Semantic pattern rule defined in invisible measures doesn't work.").display();}});}
function u(f,i,m,k,n){var r=d[f];var o={dims:g(r,i),msrs:g(r,m)};if(q(f)){o.invisibleMsrs=n;}else{t(n);}var v=null,S=null;if(o.dims["@context"]){v=o.dims["@context"];delete o.dims["@context"];}var O=false;if(!k){if(R.semantics.hasSemanticMeasures(o)){var P;if(C.CONFIG.nonSemanticPatternChartType.indexOf(f)===-1){P=new b('error','Semantic Pattern',"Semantic pattern doesn't work when there is dataPointStyle or seriesStyle defined.");O=true;}else{P=new b('error','Semantic Pattern',f+" doesn't support semantic pattern feature.");O=true;}P.display();}}S=R.semantics.semanticPatternMsrs(o,f,O);v=(v||[]).concat(S.contexts);var Q=L.build(o);Q.contexts=v;Q.semanticTuples=S.semanticTuples;return Q;}
var I=[{chartTypes:"bar,column,line,combination,heatmap,bullet,vertical_bullet,stacked_bar,stacked_column,stacked_combination,horizontal_stacked_combination,dual_bar,dual_column,dual_line,dual_stacked_bar,dual_stacked_column,dual_combination,dual_horizontal_combination,dual_stacked_combination,dual_horizontal_stacked_combination,100_stacked_bar,100_stacked_column,100_dual_stacked_bar,100_dual_stacked_column,waterfall,horizontal_waterfall".split(","),feed:"categoryAxis"},{chartTypes:"donut,pie,scatter,bubble".split(","),feed:"color"}];
function x(f,k,m){var i,n;for(i=0;i<I.length;i++){if(I[i].chartTypes.indexOf(f)!==-1){n=I[i].feed;break;}}var o=k.some(function(v){return v.id===n;});if(!o){var r=s("info/"+f,k,[{id:"MND",type:"MND"}]).feedItems;k.splice(0,k.length);r.forEach(function(v){if(v.values.length>0){k.push(v);}});k=H(f,k);}for(i=0;i<k.length;i++){if(k[i].id===n&&k[i].type==="Dimension"){k[i].values=k[i].values.concat(m.map(function(v){return{id:v.getName(),name:v.getName(),type:"Dimension",inResult:true};}));}}return c("info/"+f,k);}
function y(f){f.forEach(function(o){o._sFixedRole=o.getRole();});}
function z(f,i,k){i.forEach(function(o){o.values.forEach(function(m){var n=k.filter(function(n){return n.getName()===m.id;})[0];if(n){jQuery.each(d[f],function(r,v){if(v===o.id){n._sFixedRole=r;return false;}});}});});}
function B(f,i){var k=f.indexOf('timeseries_bullet')===-1;if(!k){k=i.length>1&&i.every(function(m){return(m.actual&&m.reference)||(m.projected&&m.reference);});}return k;}
function E(k,m,n,r,O,P){var Q=m.concat(n).concat(r);y(Q);var S=u(k,m,n,O,P);var V=c("info/"+k,S);var U=S.contexts,W=S.semanticTuples,X=[];if(!V.valid){S=J(k,V,S,m,n);V=c("info/"+k,S);z(k,S,Q);if(C.CONFIG.nonSemanticPatternChartType.indexOf(k)===-1&&O){if(B(k,W)){S=u(k,m,n,O);U=S.contexts;W=S.semanticTuples;}}}else{z(k,S,Q);}if(W){X=W.filter(function(f){return f.projectedValueStartTime;});}if(V.valid&&r&&r.length>0){var Y=e(m,function(o){return o.getName();});x(k,S,r.filter(function(o){return!Y[o.getName()];}));}var Z=S.reduce(function(i,f){f.values.forEach(function(v){i[v.id]=true;});return i;},{});var $=L.from(S);if(U){U.forEach(function(f){Z[f.getName()]=true;});$._context=U.map(function(f){var o=f.getName();var v=true;for(var i=0;i<X.length;i++){if(o===X[i].actual||o===X[i].projected){v=false;break;}}return{id:o,showInTooltip:v};});}$._unused=K(S,m,n).filter(function(f){return!Z[f];});$._def=N(m,V.valid?r:[],n,Z,W,p(k));$._order=l(k,S);$._valid=V.valid;$._semanticTuples=W;return $;}
function G(f){return e(sap.viz.api.metadata.Viz.get("info/"+f).bindings,"id");}
function H(f,i,m){m=m||G(f);i.forEach(function(o){o.type=m[o.id][0].type;});return i;}
function J(f,V,i,m,n){var o=G(f),r=false,O=false;var P=V.results.bindings;Object.keys(P).forEach(function(k){if(!o[k]){return;}if(o[k][0].type==="Measure"){O=true;}if(o[k][0].type==="Dimension"&&!(P[k].allowMND&&(!P[k].missing||P[k].missing===1))){r=true;}});var Q=i.filter(function(k){return!((k.type==="Dimension")?r:O);}),S=Q.reduce(function(k,Y){(Y.values||[]).forEach(function(v){k[v.id]=true;});return k;},{});if(i.contexts){i.contexts.forEach(function(k){S[k.getName()]=true;});}var U=m.map(h("Dimension")),W=n.map(h("Measure"));var X=s("info/"+f,Q,U.concat(W).filter(function(k){return!S[k.id];})).feedItems;H(f,X,o);return X;}
function K(i,k,m){var U=i.reduce(function(n,f){f.values.forEach(function(v){n[v.id]=true;});return n;},{});return k.concat(m).filter(function(n){return!U[n.getName()];}).map(function(n){return n.getName();});}
function N(f,k,m,v,S,p){var o;if(p){var n;for(var i=0;i<f.length;i++){if(f[i]instanceof sap.chart.data.TimeDimension){n=f[i];break;}}o=a.getInstance(n.getTimeUnit());}return{dim:f.reduce(function(V,r){if(v[r.getName()]){V.push(w(r,p));}return V;},[]).concat(k.map(function(r){var O=w(r);O._setInResult(true);return O;})),msr:m.reduce(function(V,r){if(v[r.getName()]){V.push(j(r));}return V;},[]).concat((S||[]).reduce(function(r,O){if(O.timeAxis&&O.projectedValueStartTime){r.push(new M({identity:O.actual+"-"+O.projected,name:((O.labels&&O.labels.actual)||O.actual)+"-"+((O.labels&&O.labels.projected)||O.projected),value:{parts:[O.timeAxis,O.actual,O.projected],formatter:function(P){var Q=P,U;if(P&&P.length>1){var V=P[0];if(V){if(o){var W=o.parse(V);if(W){U=W.getTime();}}else{U=new Date(V).getTime();}if(U&&(U<O.projectedValueStartTime)){Q=P[1];}else{Q=P[2];}}}return Q;}}}));}return r;},[]))};}
return{fit:E,compatible:function(f,i,m){var n="info/"+f,r={used:{},error:null,compatible:true};var O=u(f,i,m),V=c(n,O);if(!V.valid){O=J(f,V,O,i,m);V=c(n,O);r.needFix=true;}if(V.valid){r.used=e(O,function(o){return o.type;},function(o){return o.values.filter(function(v){return v.type==="Dimension"||v.type==="Measure";}).map(function(v){return v.id;});});jQuery.each(r.used,function(k,v){r.used[k]=v.reduce(function(o,U){return o.concat(U);},[]);});}else{r.compatible=false;var P=sap.viz.api.metadata.Viz.get(n).bindings,Q=e(P,"type",function(o){return o.id;}),S={dim:0,msr:0,time:0};jQuery.each(V.results.bindings,function(k,v){if(!v.missing){return;}if(Q.Dimension.indexOf(k)!==-1&&!(v.allowMND&&v.missing===1)){S[k==="timeAxis"?"time":"dim"]+=v.missing;}else if(Q.Measure.indexOf(k)!==-1){S.msr+=v.missing;}});r.error={missing:S};}return r;}};});
sap.ui.predefine('sap/chart/utils/RoleMapper',['sap/chart/data/TimeDimension','sap/chart/utils/MeasureSemanticsUtils','sap/chart/utils/ChartUtils','sap/chart/utils/DateFormatUtil','sap/chart/data/MeasureSemantics','sap/chart/ChartLog'],function(T,M,C,D,c,d){"use strict";
function R(F){this._bTimeFed=false;}
R.prototype.toFeedingId=function(o){if(o instanceof T&&!this._bTimeFed){this._bTimeFed=true;return"timeAxis";}else{return"@context";}};
function e(a){return C.CONFIG.timeChartTypes.indexOf(a)>-1;}
function s(S,m,o){var a={actualValues:[],targetValues:[]};jQuery.each(S,function(i,t){if(t.actual){a.actualValues.push(m[t.actual]);t.valueAxisID='actualValues';}if(t.projected){a.actualValues.push(m[t.projected]);t.valueAxisID='actualValues';}if(t.reference){if((t.actual||t.projected)){a.targetValues.push(m[t.reference]);t.valueAxisID='targetValues';}else{a.actualValues.push(m[t.reference]);t.valueAxisID='actualValues';}}});delete o["@semanticBulletMsrs"];jQuery.extend(o,a);}
function f(S,m){var a=m["@semanticBulletMsrs"];if(a){var F={actualValues:[]};for(var i=0;i<a.length;i++){F.actualValues.push(a[i]);}for(var i=0;i<S.length;i++){S[i].valueAxisID='actualValues';}delete m["@semanticBulletMsrs"];jQuery.extend(m,F);}}
R.semantics={hasSemanticMeasures:function(F){return Object.keys(F.msrs).some(function(k){var r=false;var m=F.msrs[k];r=m.some(function(a){if(a.getSemantics){var b=a.getSemantics();return b&&b!=='actual';}});return r;});},semanticPatternMsrs:function(F,g,I){var A=[],h=[],m={},j,k;var l=e(g)&&(F.dims.timeAxis&&F.dims.timeAxis.length===1);var n=['valueAxis','valueAxis2'];var o=Object.keys(F.msrs).sort(function(a,b){return n.indexOf(a)-n.indexOf(b);});var p=this.hasSemanticMeasures(F);o.forEach(function(a){var b=F.msrs[a],E;jQuery.extend(true,m,b.reduce(function(m,H){m[H.getName()]=H;return m;},{}));if(g&&g.indexOf('bullet')>-1&&F.invisibleMsrs){E=F.invisibleMsrs.filter(function(H){return H.getSemantics()==='actual'&&H.getSemanticallyRelatedMeasures();});}if(jQuery.isEmptyObject(F.dims)){k=new d('error','Semantic Pattern',"Semantic Pattern doesn't work when there is no dimension.");I=I||true;}else if(F.dims.color&&F.dims.color.length>0){k=new d('error','Semantic Pattern',"Semantic pattern doesn't work when there is series dimension.");I=I||true;}var G=M.getTuples(b,E,I);G.forEach(function(H){H.valueAxisID=a;});if(p&&I&&k){k.display();}A=A.concat(G);});if(g&&g.indexOf('bullet')>-1){l=l&&A.some(function(t){return t.actual&&t.projected;});j=A.some(function(t){return(t.actual&&t.projected)||(t.actual&&t.reference)||(t.projected&&t.reference);});if(j&&(!l)){s(A,m,F.msrs);}else{f(A,F.msrs);}}if((!I)&&l){var S=[];var q=function(a){var b=S.indexOf(a.getName())===-1;if(!b){h.push(a);}return b;};for(var i=0;i<A.length;i++){var t=A[i];var r=F.dims.timeAxis[0];var u=r.getProjectedValueStartTime();if(u){var v=r.getTimeUnit(),w;if(v==='fiscalyearperiod'||v==='fiscalyear'){w=u;}else{var x=D.getInstance(v);if(x){if(x.parse(u)){w=x.parse(u).getTime();}}else{w=new Date(u).getTime();}}if(w){var y=F.msrs[t.valueAxisID];if(t.actual&&t.projected){t.timeAxis=F.dims.timeAxis[0].getName();t.projectedValueStartTime=w;t.semanticMsrName=t.actual+"-"+t.projected;S.push(t.actual);S.push(t.projected);y.push(m[t.actual].clone().setName(t.semanticMsrName));}F.msrs[t.valueAxisID]=y.filter(q);}else{k=new d('error','Semantic Pattern',"The value of projectedValueStartTime is invalid.");k.display();}}}}if((A.length>0)&&(!I)){var z=[];var B=['actual','projected','semanticMsrName','reference'];A.forEach(function(a){for(var i=0;i<B.length;i++){if(a[B[i]]){z.push(a[B[i]]);}}});jQuery.each(F.msrs,function(E){F.msrs[E].sort(function(a,b){return z.indexOf(a.getName())-z.indexOf(b.getName());});});}return{semanticTuples:A,contexts:h};}};return R;});
sap.ui.predefine('sap/chart/utils/SelectionAPIUtils',[],function(){"use strict";
function m(k){return k.reduce(function(l,K){l[K]=true;return l;},{});}
function t(v,V){var e=m(v);function g(C){return V.reduce(function(p,D){if(C.hasOwnProperty(D)){p[D]=C[D];}return p;},{});}return function(r,C){return r.filter(function(M){return e[M];}).map(function(M){var D=g(C);D[M]="*";return{data:D};});};}
function a(C){var V={data:{}},M=C.measures,D=C.dimensions;if(M){V.data.measureNames=(M instanceof Array)?{"in":M}:M;}jQuery.each(D||{},function(k,v){V.data[k]=(v instanceof Array)?{"in":v}:v;});return V;}
function f(V){var D=V.data;return Object.keys(D).reduce(function(o,k){var v=D[k];if(v.in&&v.in instanceof Array){v=v.in;}if(k==="measureNames"){o.measures=v;}else if(!o.dimensions){o.dimensions={};o.dimensions[k]=v;}else{o.dimensions[k]=v;}return o;},{});}
function b(v,V,B,C){var e=t(v,V);return C.reduce(function(D,o){var g=B.getContexts(o.index,1);if(g.length>0){D=D.concat(e(o.measures,g[0].getObject()));}return D;},[]);}
function c(e,v){return Object.keys(e).filter(function(M){return(v.indexOf(M)!==-1);});}
function d(s,v,D){if(s){var I,e;for(e in s){if(s.hasOwnProperty(e)&&D.data[e]){var g=s[e];I=(D.data[g.timeAxis]<g.projectedValueStartTime)?g.projected:g.actual;}}if(I){D.measures=D.measures.filter(function(M){return(M!==I);});if(D.dataName){D.dataName=Object.keys(D.dataName).reduce(function(h,k,i){if(v.indexOf(k)!==-1){h[k]=D.dataName[k];}return h;},{});if(jQuery.isEmptyObject(D.dataName)){delete D.dataName;}}}else{var u=[];for(var k in s){if(s.hasOwnProperty(k)){e=s[k];u.push(e.actual);u.push(e.projected);}}D.measures=D.measures.filter(function(M){return u.indexOf(M)===-1;});}}}
return{makeLookUp:m,toVizCtx:t,toVizCSCtx:a,fromVizCSCtx:f,buildSelectionVizCtx:b,filterVisibleMsr:c,filterSemMsr:d,match:function(r,v,M){return Object.keys(r).every(function(k){if(M.indexOf(k)!==-1){return v.hasOwnProperty(k);}else{return r[k]===v[k];}});}};});
sap.ui.predefine('sap/chart/utils/ValueAxisScaleUtils',['sap/chart/AutoScaleMode','sap/chart/ScaleBehavior','sap/chart/ChartLog','sap/chart/utils/ChartUtils'],function(A,S,C,a){"use strict";var V={};
V.getValueAxisScaleSetting=function(c,v,b,d){var m=b.filter(function(t){return d.indexOf(t.getName())!==-1;});var r,M,B={};m.forEach(function(t){M=t.getName();r=t._getFixedRole();if(r==='axis1'||r==='axis2'){if(!B[r]){B[r]={measures:[],min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};}B[r].measures.push(M);}});var o,f=v&&v.scaleBehavior===S.FixedScale,i=a.isStackedLikeChart(c)&&m.length>1,e=(v&&v.fixedScaleSettings&&v.fixedScaleSettings.measureBoundaryValues)||{};if(f){if(i){var s=(v&&v.fixedScaleSettings&&v.fixedScaleSettings.stackedMultipleMeasureBoundaryValues)||[];if(s&&s.length>0){var g=function(h){return s.filter(function(t){return t.measures&&t.measures.length>0&&t.measures.sort().toString()===h.measures.sort().toString();});};for(var k in B){if(B.hasOwnProperty(k)){var h=B[k];var j=g(h);if(j&&j.length>0){o=j[j.length-1].boundaryValues;if(o&&(isFinite(o.minimum)&&typeof o.minimum=="number")||(isFinite(o.maximum)&&typeof o.maximum=="number")){h.min=o.minimum;h.max=o.maximum;}}}}}}else{m.forEach(function(t){r=t._getFixedRole();if(r==='axis1'||r==='axis2'){M=t.getName();o=e[M];if(!o||!(isFinite(o.minimum)&&typeof o.minimum=="number")||!(isFinite(o.maximum)&&typeof o.maximum=="number")){B[r].min=Number.NEGATIVE_INFINITY;B[r].max=Number.POSITIVE_INFINITY;}else{if(B[r].min>o.minimum){B[r].min=o.minimum;}if(B[r].max<o.maximum){B[r].max=o.maximum;}}}});}}f=false;var l=[],I=a.isBulletChart(c);for(var k in B){if(B.hasOwnProperty(k)){var h=B[k];var n=!(isFinite(h.min)&&typeof h.min=="number"&&isFinite(h.max)&&typeof h.max=="number");var p=k==='axis1'?"valueAxis":"valueAxis2";if(I){p='actualValues';}if(n){if(v&&v.scaleBehavior===S.FixedScale){new C('error','Chart.ValueAxisScale',p+' was switched to auto scale, because minimum or maximum value is missing in measure').display();}}else if(h.min>h.max){new C('error','Chart.ValueAxisScale',p+' was switched to auto scale, because minimum value exceeds maximum value').display();}else{f=true;}l.push({"feed":p,"type":"linear","min":n?"auto":h.min,"max":n?"auto":h.max});}}var P={};if(!f){var z=true,q=false;if(v&&v.autoScaleSettings&&v.autoScaleSettings.zeroAlwaysVisible===false){z=false;}if(v&&v.autoScaleSettings&&v.autoScaleSettings.syncWith===A.VisibleData){q=true;}P={plotArea:{adjustScale:!z},interaction:{syncValueAxis:q}};}return{scale:l,property:P};};
return V;});
jQuery.sap.registerPreloadedModules({
"name":"sap/chart/library-preload",
"version":"2.0",
"modules":{
	"sap/chart/manifest.json":'{\n  "_version": "1.2.0",\n  "sap.app": {\n    "_version": "1.2.0",\n    "id": "sap.chart",\n    "type": "library",\n    "embeds": [],\n    "applicationVersion": {\n      "version": "1.50.6"\n    },\n    "title": "Smart viz control based on Vizframe",\n    "description": "Smart viz control based on Vizframe",\n    "ach": "BI-CVM",\n    "resources": "resources.json",\n    "offline": true\n  },\n  "sap.ui": {\n    "_version": "1.1.0",\n    "technology": "UI5",\n    "supportedThemes": []\n  },\n  "sap.ui5": {\n    "_version": "1.1.0",\n    "dependencies": {\n      "minUI5Version": "1.50",\n      "libs": {\n        "sap.ui.core": {\n          "minVersion": "1.50.6"\n        },\n        "sap.viz": {\n          "minVersion": "1.50.6"\n        }\n      }\n    }\n  }\n}'
}});
//# sourceMappingURL=library-preload.js.map
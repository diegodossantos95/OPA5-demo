sap.ui.define(["jquery.sap.global","sap/ui/base/ObjectPool"],function(q,O){var D;function g(){if(!D){q.sap.require("sap/ui/thirdparty/d3");D=sap.ui.require("sap/ui/thirdparty/d3");}return D;}function P(){var p=q.sap.getModulePath("sap.suite.ui.commons.networkgraph.layout","/D3ForceWorker.js");this._worker=new Worker(p);}P.prototype.getWorker=function(){return this._worker;};P.prototype.init=function(){};P.prototype.reset=function(){this._worker.onmessage=null;this._worker.onerror=null;};var a={};a._pool=new O(P);a._d3Path=q.sap.getModulePath("sap.ui.thirdparty","/d3.js");function r(p,b){var c=p.graph;var f=g().layout.force().nodes(c.nodes).links(c.links).alpha(p.alpha).friction(p.friction).charge(p.charge).start();setTimeout(f.stop,p.maximumDuration);f.on("end",function(){b(c);});}a.layout=function(p){var u=false;return new Promise(function(b,c){if(Worker&&u){var o=a._pool.borrowObject(),w=o.getWorker();w.postMessage({sD3Source:a._d3Path,graph:p.graph,alpha:p.alpha,friction:p.friction,charge:p.charge,maximumDuration:p.maximumDuration});w.onmessage=function(e){a._pool.returnObject(o);if(e.data.stacktrace){c(e.data);}else{b(e.data);}};w.onerror=function(e){c(e);a._pool.returnObject(o);};}else{r(p,b);}});};return a;},true);

/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(['jquery.sap.global','./library','./util/DateUtils','sap/ui/core/Control','sap/suite/ui/commons/DateRangeSliderInternal'],function(q,l,D,C,a){"use strict";var b=C.extend("sap.suite.ui.commons.DateRangeSlider",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},enabled:{type:"boolean",group:"Appearance",defaultValue:true},editable:{type:"boolean",group:"Behavior",defaultValue:true},visible:{type:"boolean",group:"Misc",defaultValue:true},showBubbles:{type:"boolean",group:"Misc",defaultValue:true},smallStepWidth:{type:"float",group:"Appearance",defaultValue:null},totalUnits:{type:"int",group:"Appearance",defaultValue:null},stepLabels:{type:"boolean",group:"Misc",defaultValue:false},labels:{type:"string[]",group:"Misc",defaultValue:null},min:{type:"object",group:"Behavior",defaultValue:null},max:{type:"object",group:"Behavior",defaultValue:null},value:{type:"object",group:"Behavior",defaultValue:null},value2:{type:"object",group:"Behavior",defaultValue:null},pinGrip:{type:"boolean",group:"Misc",defaultValue:false},pinGrip2:{type:"boolean",group:"Misc",defaultValue:false}},events:{change:{},liveChange:{}}}});var c="d";var M="m";b.prototype.init=function(){this._oDateRangeSliderInternal=new a({id:this.getId()+"-dateRangeSliderInternal"});b.setPropertiesBasedOnSliderInternal(this);this._oDateRangeSliderInternal.attachChange(function(e){this.handleChange(e);},this);this._oDateRangeSliderInternal.attachLiveChange(function(e){this.handleLiveChange(e);},this);};b.areDaysSameBasedOnGranularity=function(f,s,g){var S;switch(g){case(c):S=D.dateDaysEqual(f,s);break;case(M):S=D.dateMonthsEqual(f,s);break;default:S=false;}return S;};b.isMinBeforeMax=function(m,d,g){var e=false;if(m.getFullYear()<d.getFullYear()){e=true;}else if(m.getFullYear()===d.getFullYear()){if(m.getMonth()<d.getMonth()){e=true;}else if(m.getMonth()===d.getMonth()&&g===c){if(m.getDate()<d.getDate()){e=true;}}}if(!e){q.sap.log.error("DateRangeSlider: Min Date = "+m+" should be before Max Date = "+d);}return e;};b.isValueEqualOrAfterMin=function(m,v,g){var V=false;if(m.getFullYear()<v.getFullYear()){V=true;}else if(m.getFullYear()===v.getFullYear()){if(m.getMonth()<v.getMonth()){V=true;}else if(m.getMonth()===v.getMonth()&&g===M){V=true;}else if(m.getMonth()===v.getMonth()&&g===c){if(m.getDate()<=v.getDate()){V=true;}}}if(!V){q.sap.log.error("DateRangeSlider: Value Date = "+v+" should be after or equal to Min Date = "+m);}return V;};b.isValue2EqualOrBeforeMax=function(v,m,g){var V=false;if(v.getFullYear()<m.getFullYear()){V=true;}else if(v.getFullYear()===m.getFullYear()){if(v.getMonth()<m.getMonth()){V=true;}else if(v.getMonth()===m.getMonth()&&g===M){V=true;}else if(v.getMonth()===m.getMonth()&&g===c){if(v.getDate()<=m.getDate()){V=true;}}}if(!V){q.sap.log.error("DateRangeSlider: Value2 Date = "+v+" should be before or equal to Max Date = "+m);}return V;};b.isValueBeforeOrEqualValue2=function(v,V,g){var d=false;if(v.getFullYear()<V.getFullYear()){d=true;}else if(v.getFullYear()===V.getFullYear()){if(v.getMonth()<V.getMonth()){d=true;}else if(v.getMonth()===V.getMonth()&&g===M){d=true;}else if(v.getMonth()===V.getMonth()&&g===c){if(v.getDate()<=V.getDate()){d=true;}}}if(!d){q.sap.log.error("DateRangeSlider: Value Date = "+v+" should be before or equal to Value2 Date = "+V);}return d;};b.prototype.setMin=function(m){if(D.isValidDate(m)&&b.isMinBeforeMax(m,new Date(this.getMax()),this._sGranularity)&&!b.areDaysSameBasedOnGranularity(new Date(this.getMin()),m,this._sGranularity)){D.resetDateToStartOfDay(m);this._oDateRangeSliderInternal.setMinDate(m);b.setPropertiesBasedOnSliderInternal(this);}};b.prototype.setMax=function(m){if(D.isValidDate(m)&&b.isMinBeforeMax(new Date(this.getMin()),m,this._sGranularity)&&!b.areDaysSameBasedOnGranularity(new Date(this.getMax()),m,this._sGranularity)){D.resetDateToEndOfDay(m);this._oDateRangeSliderInternal.setMaxDate(m);b.setPropertiesBasedOnSliderInternal(this);}};b.prototype.setValue=function(v){if(D.isValidDate(v)&&b.isValueBeforeOrEqualValue2(v,new Date(this.getValue2()),this._sGranularity)&&b.isValueEqualOrAfterMin(new Date(this.getMin()),v,this._sGranularity)&&!b.areDaysSameBasedOnGranularity(new Date(this.getValue()),v,this._sGranularity)){D.resetDateToStartOfDay(v);this._oDateRangeSliderInternal.setValueDate(v);b.setPropertiesBasedOnSliderInternal(this);}};b.prototype.getValue=function(){var v=this._oDateRangeSliderInternal.getValueDate();return v;};b.prototype.setValue2=function(v){if(D.isValidDate(v)&&b.isValueBeforeOrEqualValue2(new Date(this.getValue()),v,this._sGranularity)&&!b.areDaysSameBasedOnGranularity(new Date(this.getValue2()),v,this._sGranularity)&&b.isValue2EqualOrBeforeMax(v,new Date(this.getMax()),this._sGranularity)){D.resetDateToStartOfDay(v);this._oDateRangeSliderInternal.setValue2Date(v);b.setPropertiesBasedOnSliderInternal(this);}};b.prototype.getValue2=function(){var v=this._oDateRangeSliderInternal.getValue2Date();return v;};b.prototype.setVisible=function(v){this._oDateRangeSliderInternal.setVisible(v);this.setProperty("visible",v);};b.prototype.setEnabled=function(e){this._oDateRangeSliderInternal.setEnabled(e);this.setProperty("enabled",e);};b.prototype.setLabels=function(L){this._oDateRangeSliderInternal.setLabels(L);this.setProperty("labels",L);};b.prototype.setStepLabels=function(s){this._oDateRangeSliderInternal.setStepLabels(s);this.setProperty("stepLabels",s);};b.prototype.setEditable=function(e){this._oDateRangeSliderInternal.setEditable(e);this.setProperty("editable",e);};b.prototype.setWidth=function(t){this._oDateRangeSliderInternal.setWidth(t);this.setProperty("width",t);};b.prototype.setShowBubbles=function(s){this._oDateRangeSliderInternal.setShowBubbles(s);this.setProperty("showBubbles",s);};b.prototype.setSmallStepWidth=function(s){this._oDateRangeSliderInternal.setSmallStepWidth(s);this.setProperty("smallStepWidth",s);};b.prototype.setTotalUnits=function(t){this._oDateRangeSliderInternal.setTotalUnits(t);this.setProperty("totalUnits",t);};b.setPropertiesBasedOnSliderInternal=function(d){d.setProperty("min",d._oDateRangeSliderInternal.getMinDate());d.setProperty("max",d._oDateRangeSliderInternal.getMaxDate());d.setProperty("value",d._oDateRangeSliderInternal.getValueDate());d.setProperty("value2",d._oDateRangeSliderInternal.getValue2Date());d._sGranularity=d._oDateRangeSliderInternal._sGranularity;};b.prototype.setDayGranularity=function(){this._oDateRangeSliderInternal.setDayGranularity();if(this._oDateRangeSliderInternal.isActive()){this._oDateRangeSliderInternal.rerender();}b.setPropertiesBasedOnSliderInternal(this);return this;};b.prototype.setMonthGranularity=function(){var m=D.numberOfMonthsApart(this.getMin(),this.getMax());if(m>=1){this._oDateRangeSliderInternal.setMonthGranularity();if(this._oDateRangeSliderInternal.isActive()){this._oDateRangeSliderInternal.rerender();}b.setPropertiesBasedOnSliderInternal(this);}else{q.sap.log.error("DateRangeSlider.setMonthGranularity(): Max Date should be 1 month after Min Date.");}return this;};b.prototype.setDateFormat=function(d){this._oDateRangeSliderInternal.setDateFormat(d);if(this._oDateRangeSliderInternal.isActive()){this._oDateRangeSliderInternal.rerender();}};b.prototype.setPinGrip=function(p){this._oDateRangeSliderInternal.setPinGrip(p);this.setProperty("pinGrip",p);};b.prototype.setPinGrip2=function(p){this._oDateRangeSliderInternal.setPinGrip2(p);this.setProperty("pinGrip2",p);};b.prototype.exit=function(){this._oDateRangeSliderInternal.destroy();this._oDateRangeSliderInternal=null;};b.prototype.handleChange=function(e){var v=e.getParameter("value");var V=e.getParameter("value2");this.fireChange({value:v,value2:V});};b.prototype.handleLiveChange=function(e){var v=e.getParameter("value");var V=e.getParameter("value2");this.fireLiveChange({value:v,value2:V});};return b;});

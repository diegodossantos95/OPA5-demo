/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(['jquery.sap.global','sap/m/Image','sap/ui/core/Control','sap/m/Text','sap/ui/core/library'],function(q,I,C,T,a){"use strict";var P=C.extend("sap.suite.ui.commons.PictureZoomIn",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{description:{type:"string",group:"Misc",defaultValue:null},imageSrc:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null}},aggregations:{busyIndicator:{type:"sap.ui.core.Control",multiple:false}}}});P.prototype.init=function(){var t=this;q(window).resize(function(e){t._calculateImg();});q(document).keyup(function(e){if(e.keyCode===27){t.exit();q.sap.byId(t.getId()).remove();}});if(typeof q(document).tap==="function"){q(document).tap(function(){t.exit();q.sap.byId(t.getId()).remove();});}this._oImage=new I(this.getId()+"-image",{}).addStyleClass("sapSuiteUiCommonsPictureZoomInImg");this._oDescription=new T(this.getId()+"-description",{textAlign:a.TextAlign.Center});this._oDescription.addStyleClass("sapSuiteUiCommonsPictureZoomInDesc");};P.prototype.onBeforeRendering=function(){this._oImage.setSrc(this.getImageSrc());this._oDescription.setText(this.getDescription());};P.prototype._calculateImg=function(){var i=q.sap.domById(this.getId()+"-image");var d=q.sap.byId(this.getId()+"-description");if(!i){return;}var w=q.sap.byId(this.getId());if(i.naturalWidth<w.width()&&i.naturalHeight<w.height()-d.outerHeight(true)){i.style.width=i.naturalWidth+"px";i.style.height=i.naturalHeight+"px";}else if(i.naturalHeight/(w.height()-d.outerHeight(true))>i.naturalWidth/w.width()){i.style.height=""+(98-d.outerHeight(true)*100/w.height())+"%";i.style.width="auto";}else{i.style.width='96%';i.style.height='auto';}var o=q.sap.byId(this.getId()+"-image");var W=w.width();var b=o.width();var c=o.height();if(W>=b){o.css("left",(W-b)/2);}var e=(w.height()-c-d.outerHeight(true))/2;o.css("top",e);d.css("top",e+c);};P.prototype.onAfterRendering=function(){var t=this;var i=q.sap.byId(this.getId()+"-image");var b=q.sap.byId(this.getId()+"-busy");i.hide();if(b.length){b.show();}else{this.setBusy(true);}i.load(function(){if(b.length){b.hide();}else{t.setBusy(false);}i.show();t._calculateImg();});};P.prototype.exit=function(){if(this._oImage){this._oImage.destroy();}if(this._oDescription){this._oDescription.destroy();}};return P;});

sap.ui.define(["jquery.sap.global","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/CustomShape"],function(q,S,a,C){"use strict";var A=function(s){this._oStatusIndicator=s;};A.prototype.getValue=function(s,i){var p=s.getParent();if(!p instanceof a){q.sap.log.fatal("Shape should be always direct child of ShapeGroup.");return i;}if(!this._oStatusIndicator._discreteThresholdsEnabled()){return i;}var b=this._getStatusIndicatorValue(p,i);var d=this._oStatusIndicator._getDiscreteThresholdForValue(b);var c=d?d.getValue():0;return this._getGroupValue(p,c);};A.prototype.getColor=function(s,i){var p=s.getParent();if(p instanceof C){i=p.getDisplayedValue();p=p.getParent();}var b=this._getStatusIndicatorValue(p,i);var n=s._getCssFillColor();if(this._oStatusIndicator._propertyThresholdsEnabled()){var P=this._oStatusIndicator._getPropertyThresholdForValue(b);if(P){n=P.getFillColor();}}return n;};A.prototype._getStatusIndicatorValue=function(c,s){var t=this;var g=this._oStatusIndicator.getGroups();var i=0;g.some(function(G){var f=G.getWeight()/t._getTotalWeight();if(G!==c){var F=100*f;i+=F;return false;}var b=s*f;i+=b;return true;});return i;};A.prototype._getGroupValue=function(c,s){var g=this._oStatusIndicator.getGroups();var t=this._getTotalWeight();var r=0;g.some(function(G){var f=G.getWeight()/t;var n;if(s===0){n=0;}else if(s>=100*f){n=100;}else{n=s/f;}s-=n*f;if(c!==G){return false;}r=n;return true;});return r;};A.prototype._getTotalWeight=function(){return this._oStatusIndicator.getGroups().reduce(function(i,g){return i+g.getWeight();},0);};return A;});

/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/ui/Device","sap/m/ValueColor"],function(q,D,V){"use strict";var R={};R.FORM_RATIO=100;R.BACKGROUND_CIRCLE_BORDER_WIDTH=1;R.BACKGROUND_CIRCLE_RADIUS=(R.FORM_RATIO/2.0)-(R.BACKGROUND_CIRCLE_BORDER_WIDTH/2.0);R.RING_WIDTH=8.75;R.RING_CORE_RADIUS=R.BACKGROUND_CIRCLE_RADIUS-(R.RING_WIDTH/2.0)-R.BACKGROUND_CIRCLE_BORDER_WIDTH;R.SVG_VIEWBOX_CENTER_FACTOR="50%";R.X_ROTATION=0;R.SWEEP_FLAG=1;R.PADDING_WIDTH=0.22;R.NUMBER_FONT_SIZE=23.5;R.EDGE_CASE_SIZE_USE_SMALL_FONT=54;R.EDGE_CASE_SIZE_SHOW_TEXT=46;R.EDGE_CASE_SIZE_MICRO_CHART=24;R.render=function(r,c){if(!c._bThemeApplied){return;}this._writeDivStartElement(c,r);this._writeSVGStartElement(c,r);this._writeBackground(r);if(this._renderingOfInnerContentIsRequired(c)){this._writeBorders(r);if(this._innerCircleRequired(c)){this._writeCircle(c,r);}else{this._writeCircleWithPathElements(c,r);}this._writeText(c,r);}r.write("</svg>");r.write("</div>");};R._writeDivStartElement=function(c,r){r.write("<div");r.writeControlData(c);var a=c._getTooltipText();r.writeAttribute("role","img");r.writeAttributeEscaped("aria-label",a);if(c.hasListeners("press")){r.addClass("sapSuiteUiMicroChartPointer");r.writeAttribute("tabindex","0");}r.addClass("sapSuiteRMC");var s="sapSuiteRMCSize"+c.getSize();r.addClass(q.sap.encodeHTML(s));r.writeClasses();r.writeStyles();r.write(">");};R._writeSVGStartElement=function(c,r){var p;if(!sap.ui.getCore().getConfiguration().getRTL()){p="xMaxYMid meet";}else{p="xMinYMid meet";}var s="sapSuiteRMCSize"+c.getSize();r.write("<svg class=\"sapSuiteRMC "+q.sap.encodeHTML(s)+"\" focusable=\"false"+"\" viewBox=\"0 0 "+R.FORM_RATIO+' '+R.FORM_RATIO+"\" preserveAspectRatio=\""+q.sap.encodeHTML(p)+"\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">");};R._writeBackground=function(r){r.write("<circle class=\"sapSuiteRMCCircleBackground\" cx=\""+R.SVG_VIEWBOX_CENTER_FACTOR+"\" cy=\""+R.SVG_VIEWBOX_CENTER_FACTOR+"\" r=\""+R.BACKGROUND_CIRCLE_RADIUS+"\" stroke-width=\""+this.BACKGROUND_CIRCLE_BORDER_WIDTH+"\" />");};R._writeBorders=function(r){var f=R.RING_CORE_RADIUS+(R.RING_WIDTH/2.0)-(R.BACKGROUND_CIRCLE_BORDER_WIDTH/2.0),a=R.RING_CORE_RADIUS-(R.RING_WIDTH/2.0)+(R.BACKGROUND_CIRCLE_BORDER_WIDTH/2.0);r.write("<circle");r.addClass("sapSuiteRMCRing");r.writeClasses();r.writeAttribute("cx",R.SVG_VIEWBOX_CENTER_FACTOR);r.writeAttribute("cy",R.SVG_VIEWBOX_CENTER_FACTOR);r.writeAttribute("r",f);r.writeAttribute("stroke-width",R.BACKGROUND_CIRCLE_BORDER_WIDTH);r.write("/>");r.write("<circle");r.addClass("sapSuiteRMCRing");r.writeClasses();r.writeAttribute("cx",R.SVG_VIEWBOX_CENTER_FACTOR);r.writeAttribute("cy",R.SVG_VIEWBOX_CENTER_FACTOR);r.writeAttribute("r",a);r.writeAttribute("stroke-width",R.BACKGROUND_CIRCLE_BORDER_WIDTH);r.write("/>");};R._writeCircle=function(c,r){var C=this._getFullCircleColor(c);r.write("<circle");if(c._isValueColorValid()||C==="sapSuiteRMCRemainingCircle"){r.addClass(q.sap.encodeHTML(C));}else{r.writeAttributeEscaped("stroke",C);}r.writeClasses();r.writeStyles();r.write("cx=\""+R.SVG_VIEWBOX_CENTER_FACTOR+"\" cy=\""+R.SVG_VIEWBOX_CENTER_FACTOR+"\" r=\""+R.RING_CORE_RADIUS+"\" fill=\"transparent\" stroke-width=\""+R.RING_WIDTH+"px\" />");};R._writeCircleWithPathElements=function(c,r){var l=c.getPercentage()>50?1:0;var p=this._getPercentageForCircleRendering(c)-R.PADDING_WIDTH;var P=this._calculatePathCoordinates(c,p,false);this._writePath1(l,P,c,r);p=this._getPercentageForCircleRendering(c)+R.PADDING_WIDTH;P=this._calculatePathCoordinates(c,p,true);this._writePath2(l,P,c,r);};R._writePath1=function(l,p,c,r){var P="M"+p[0]+" "+p[1]+" A "+R.RING_CORE_RADIUS+" "+R.RING_CORE_RADIUS+", "+R.X_ROTATION+", "+l+", "+R.SWEEP_FLAG+", "+p[2]+" "+p[3];var C=this._getPathColor(c);r.write("<path");r.addClass("sapSuiteRMCPath");if(c._isValueColorValid()||C==="sapSuiteRMCRemainingCircle"){r.addClass(q.sap.encodeHTML(C));}else{r.writeAttributeEscaped("stroke",C);}r.writeClasses();r.writeStyles();r.write("d=\""+q.sap.encodeHTML(P)+"\" fill=\"transparent\" stroke-width=\""+R.RING_WIDTH+"px\" />");};R._writePath2=function(l,p,c,r){var P="M"+p[2]+" "+p[3]+" A "+R.RING_CORE_RADIUS+" "+R.RING_CORE_RADIUS+", "+R.X_ROTATION+", "+(1-l)+", "+R.SWEEP_FLAG+", "+p[0]+" "+p[1];r.write("<path class=\"sapSuiteRMCPath sapSuiteRMCRemainingCircle\" d=\""+q.sap.encodeHTML(P)+"\" fill=\"transparent\" stroke-width=\""+R.RING_WIDTH+"px\" />");};R._writeText=function(c,r){r.write("<text class=\"sapSuiteRMCFont\" text-anchor=\"middle\" alignment-baseline=\"middle\""+"\" font-size=\""+R.NUMBER_FONT_SIZE+"\" x=\""+R.SVG_VIEWBOX_CENTER_FACTOR+"\" y=\""+q.sap.encodeHTML(this._getVerticalViewboxCenterFactorForText())+"\"> "+q.sap.encodeHTML(this._generateTextContent(c))+"</text>");};R._renderingOfInnerContentIsRequired=function(c){if(c._getPercentageMode()||(c.getTotal()!==0)){return true;}else{return false;}};R._getVerticalViewboxCenterFactorForText=function(){if(D.browser.msie||D.browser.mozilla||D.browser.edge){return"57%";}else{return"51%";}};R._innerCircleRequired=function(c){return c.getPercentage()>=100||c.getPercentage()<=0;};R._calculatePathCoordinates=function(c,p,h){var C=[];var P=0;var f=R.FORM_RATIO/2;if(h){P=2*R.PADDING_WIDTH/100*2*Math.PI;}C.push(f+R.RING_CORE_RADIUS*Math.cos(-Math.PI/2.0-P));C.push(f+R.RING_CORE_RADIUS*Math.sin(-Math.PI/2.0-P));C.push(f+R.RING_CORE_RADIUS*Math.cos(-Math.PI/2.0+p/100*2*Math.PI));C.push(f+R.RING_CORE_RADIUS*Math.sin(-Math.PI/2.0+p/100*2*Math.PI));return C;};R._getPercentageForCircleRendering=function(c){var p=c.getPercentage();var P=p;if(p>99-R.PADDING_WIDTH){P=99-R.PADDING_WIDTH;}if(p<1+R.PADDING_WIDTH){P=1+R.PADDING_WIDTH;}return P;};R._handleOnAfterRendering=function(c){var p,P;var t=c.$().find("text");var s=c.$().children("svg");if(c.getSize()==="Responsive"){if(c.getParent()!==undefined&&c.getParent()!==null&&c.getParent().getHeight!==undefined&&c.getParent().getHeight!==null){P=parseFloat(c.getParent().$().height())-2;c.$().height(P);s.height(P);}if(c.getParent()!==undefined&&c.getParent()!==null&&c.getParent().getWidth!==undefined&&c.getParent().getWidth!==null){p=parseFloat(c.getParent().$().width())-2;c.$().width(p);s.width(p);}}if(c.getSize()==="Responsive"){if(parseInt(s.css("height"),10)<R.EDGE_CASE_SIZE_MICRO_CHART||parseInt(s.css("width"),10)<R.EDGE_CASE_SIZE_MICRO_CHART){c.$().hide();return;}if(parseInt(s.css("height"),10)<=R.EDGE_CASE_SIZE_SHOW_TEXT||parseInt(s.css("width"),10)<=R.EDGE_CASE_SIZE_SHOW_TEXT){t.hide();}}var T=this._getTextColorClass(c);var C=s.attr("class")||"";if(C.indexOf(T)<0){var n=C+" "+T;var S=parseInt(s.css("height"),10);if(S<=R.EDGE_CASE_SIZE_USE_SMALL_FONT){n+=" sapSuiteRMCSmallFont";}s.attr("class",n);}};R._getTextColorClass=function(c){switch(c.getValueColor()){case V.Good:return"sapSuiteRMCGoodTextColor";case V.Error:return"sapSuiteRMCErrorTextColor";case V.Critical:return"sapSuiteRMCCriticalTextColor";default:return"sapSuiteRMCNeutralTextColor";}};R._getFullCircleColor=function(c){if(c.getPercentage()>=100){return this._getPathColor(c);}if(c.getPercentage()<=0){return"sapSuiteRMCRemainingCircle";}};R._getPathColor=function(c){var v=c.getValueColor();if(c._isValueColorValid()){switch(v){case V.Good:return"sapSuiteRMCPathGood";case V.Error:return"sapSuiteRMCPathError";case V.Critical:return"sapSuiteRMCPathCritical";default:return"sapSuiteRMCPathNeutral";}}else{return v;}};R._generateTextContent=function(c){if(c.getPercentage()===100){return c._rb.getText("RADIALMICROCHART_PERCENTAGE_TEXT",[100]);}if(c.getPercentage()===0){return c._rb.getText("RADIALMICROCHART_PERCENTAGE_TEXT",[0]);}if(c.getPercentage()>=100){q.sap.log.error("Values over 100%("+c.getPercentage()+"%) are not supported");return c._rb.getText("RADIALMICROCHART_PERCENTAGE_TEXT",[100]);}if(c.getPercentage()<=0){q.sap.log.error("Values below 0%("+c.getPercentage()+"%) are not supported");return c._rb.getText("RADIALMICROCHART_PERCENTAGE_TEXT",[0]);}return c._rb.getText("RADIALMICROCHART_PERCENTAGE_TEXT",[c.getPercentage()]);};return R;},true);

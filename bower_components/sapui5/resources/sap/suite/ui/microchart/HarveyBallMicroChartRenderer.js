/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/m/library',"sap/ui/Device","./library"],function(q,M,D,l){"use strict";var H={};H._iReferenceControlHeight=72;H._iReferenceControlWidth=168;H.render=function(r,c){if(!c._bThemeApplied){return;}this._calculatePath(c);var C=c.getColorPalette();var R=sap.ui.getCore().getConfiguration().getRTL();var a=c.getAltText();var t="";var v="";var V="";var f=false;var b=0;var s="";var d=C.length>0?C[0]:null;var i=this._oPath.center;if(l._isThemeHighContrast()){i-=1;}if(M.ValueCSSColor.isValid(d)){d=q.sap.encodeHTML(C[0]);}else{d=null;}if(c.getItems().length){var p=c.getItems()[0];b=p.getFraction();s="sapSuiteHBMCSemanticColor"+q.sap.encodeHTML(p.getColor());v=p.getFractionLabel()?p.getFractionLabel():v+p.getFraction();V=p.getFractionScale()?p.getFractionScale().substring(0,3):V;f=p.getFormattedLabel();}if(f){var F=c._parseFormattedValue(v);V=F.scale.substring(0,3);v=F.value;}var T=c.getTotal();var e=c.getTotalLabel()?c.getTotalLabel():""+c.getTotal();if(c.getTotalScale()){t=c.getTotalScale().substring(0,3);}if(c.getFormattedLabel()){var o=c._parseFormattedValue(e);t=o.scale.substring(0,3);e=o.value;}var g=5;if(v){v=(v.length>=g&&(v[g-1]==="."||v[g-1]===","))?v.substring(0,g-1):v.substring(0,g);}if(e){e=(e.length>=g&&(e[g-1]==="."||e[g-1]===","))?e.substring(0,g-1):e.substring(0,g);}var S="sapSuiteHBMCSize"+c.getSize();r.write("<div");r.writeControlData(c);r.writeAttribute("role","presentation");r.writeAttributeEscaped("aria-label",a);r.addClass("sapSuiteHBMC");r.addClass(c.getIsResponsive()?"sapSuiteHBMCResponsive":q.sap.encodeHTML(S));if(c.hasListeners("press")){r.addClass("sapSuiteUiMicroChartPointer");r.writeAttribute("tabindex","0");}r.writeClasses();if(!c.getIsResponsive()&&c.getWidth()){r.addStyle("width",c.getWidth());}r.writeStyles();r.write(">");r.write("<div");r.addClass("sapSuiteHBMCChart");r.addClass(c.getIsResponsive()?"sapSuiteHBMCResponsive":q.sap.encodeHTML(S));r.writeClasses();r.addStyle("display","inline-block");r.writeStyles();r.write(">");r.write("<svg");r.writeAttribute("id",c.getId()+"-harvey-ball");if(c.getIsResponsive()){r.addClass("sapSuiteHBMCChart");r.addClass("sapSuiteHBMCResponsive");r.writeClasses();r.writeAttributeEscaped("viewBox",this._getSvgViewBoxProperties());}else{r.writeAttributeEscaped("width",this._oPath.size);r.writeAttributeEscaped("height",this._oPath.size);}r.writeAttribute("focusable",false);r.write(">");r.write("<g>");r.write("<circle");if(R&&c.getIsResponsive()){r.writeAttributeEscaped("cx",H._iReferenceControlWidth-this._oPath.center);}else{r.writeAttributeEscaped("cx",this._oPath.center);}r.writeAttributeEscaped("cy",this._oPath.center);r.writeAttributeEscaped("r",i);r.addClass("sapSuiteHBMCBackgroundCircle");r.writeClasses();r.write("/>");if(b&&b>=T){r.write("<circle");if(R&&c.getIsResponsive()){r.writeAttributeEscaped("cx",H._iReferenceControlWidth-this._oPath.center);}else{r.writeAttributeEscaped("cx",this._oPath.center);}r.writeAttributeEscaped("cy",this._oPath.center);r.writeAttributeEscaped("r",i-this._oPath.border);r.addClass("sapSuiteHBMCSegment");if(d){r.addStyle("fill",d);r.writeStyles();}else{r.addClass(q.sap.encodeHTML(s));}r.writeClasses();r.write("/>");}else if(b>0){r.write("<path");r.writeAttribute("id",c.getId()+"-segment");r.addClass("sapSuiteHBMCSegment");if(d){r.addStyle("fill",d);r.writeStyles();}else{r.addClass(q.sap.encodeHTML(s));}r.writeClasses();r.writeAttributeEscaped("d",this._serializePieChart());r.write("/>");}r.write("</g>");if(c.getIsResponsive()){if(c.getShowFractions()){r.write("<text");r.writeAttribute("id","sapSuiteHBMCTopText");if(R&&(D.browser.msie||D.browser.edge)){r.writeAttribute("text-anchor","end");}else{r.writeAttribute("text-anchor","start");}r.writeAttribute("x","80");r.writeAttribute("y","30");r.addClass("sapSuiteHBMCResponsive");r.addClass("sapSuiteHBMCValueContainer");if(!d){r.addClass(q.sap.encodeHTML(s));}r.writeClasses();r.write(">");if(!R){this.renderFractionLabel(r,v,d,R);this.renderFractionScale(r,V,d,R);}else{this.renderFractionScale(r,V,d,R);this.renderFractionLabel(r,v,d,R);}r.write("</text>");}if(c.getShowTotal()){r.write("<text");r.writeAttribute("id","sapSuiteHBMCBottomText");if(!R){r.writeAttributeEscaped("x",H._iReferenceControlWidth);}else{r.writeAttribute("x","0");}r.writeAttribute("y","65");if(R&&(D.browser.msie||D.browser.edge)){r.writeAttribute("text-anchor","start");}else{r.writeAttribute("text-anchor","end");}r.addClass("sapSuiteHBMCResponsive");r.addClass("sapSuiteHBMCTotal");r.addClass("sapSuiteHBMCTotalContainer");r.writeClasses();r.write(">");if(!R){this.renderTotalLabel(r,e,R);this.renderTotalScale(r,t,R);}else{this.renderTotalScale(r,t,R);this.renderTotalLabel(r,e,R);}r.write("</text>");}}r.write("</svg>");r.write("</div>");if(!c.getIsResponsive()){r.write("<div");r.addClass("sapSuiteHBMCValueContainer");r.addClass(q.sap.encodeHTML(S));r.writeClasses();r.addStyle("display",c.getShowFractions()?"inline-block":"none");r.writeStyles();r.write(">");this.renderLabel(r,c,[s,S,"sapSuiteHBMCValue"],v,d,"-fraction");this.renderLabel(r,c,[s,S,"sapSuiteHBMCValueScale"],V,d,"-fraction-scale");r.write("</div>");r.write("<div");r.addClass("sapSuiteHBMCTotalContainer");r.addClass(q.sap.encodeHTML(S));r.writeClasses();if(R){r.addStyle("left","0");}else{r.addStyle("right","0");}r.addStyle("display",c.getShowTotal()?"inline-block":"none");r.writeStyles();r.write(">");this.renderLabel(r,c,[s,S,"sapSuiteHBMCTotal"],e,d,"-total");this.renderLabel(r,c,[s,S,"sapSuiteHBMCTotalScale"],t,d,"-total-scale");r.write("</div>");}r.write("</div>");};H.renderFractionLabel=function(r,f,c,R){r.write("<tspan");if(R){r.writeAttribute("dx","4.8px");}if(c){r.addStyle("fill",c);r.writeStyles();}r.write(">");r.writeEscaped(f);r.write("</tspan>");};H.renderFractionScale=function(r,f,c,R){r.write("<tspan");r.writeAttribute("font-size","0.8rem");if(!R){r.writeAttribute("dx","4.8px");}if(c){r.addStyle("fill",c);r.writeStyles();}r.write(">");r.writeEscaped(f);r.write("</tspan>");};H.renderTotalLabel=function(r,t,R){r.write("<tspan");if(R){r.writeAttribute("dx","4.8px");}else if(D.browser.msie||D.browser.edge){r.writeAttribute("dx","-4.8px");}r.write(">");r.writeEscaped(t);r.write("</tspan>");};H.renderTotalScale=function(r,t,R){r.write("<tspan");if(!R){r.writeAttribute("dx","4.8px");}r.write(">");r.writeEscaped(t);r.write("</tspan>");};H.renderLabel=function(r,c,C,L,s,I){var u=!(C.indexOf("sapSuiteHBMCTotal")>-1||C.indexOf("sapSuiteHBMCTotalScale")>-1);r.write("<span");r.writeAttribute("id",c.getId()+I);for(var i=0;i<C.length;i++){if(i===0&&s&&u){r.addStyle("color",s);r.writeStyles();}else{r.addClass(q.sap.encodeHTML(C[i]));}}r.writeClasses();r.write(">");if(L){r.writeEscaped(L);}r.write("</span>");};H._getSvgViewBoxProperties=function(){return"0 0 "+H._iReferenceControlWidth+" "+H._iReferenceControlHeight;};H._calculatePath=function(c){var s=c.getSize();var t=c.getTotal();var f=0;if(c.getItems().length){f=c.getItems()[0].getFraction();}var i=false;if(s=="Auto"){i=q("html").hasClass("sapUiMedia-Std-Phone");}if(s=="S"||s=="XS"){i=true;}var m=i?56:72;if(c.getIsResponsive()){m=H._iReferenceControlHeight;}var C=m/2;var b=4;var r=sap.ui.getCore().getConfiguration().getRTL();var R;if(c.getIsResponsive()&&r){R=true;}else{R=false;}this._oPath={initial:{x:!R?C:H._iReferenceControlWidth-C,y:C,x1:!R?C:H._iReferenceControlWidth-C,y1:C},lineTo:{x:!R?C:H._iReferenceControlWidth-C,y:b},arc:{x1:C-b,y1:C-b,xArc:0,largeArc:0,sweep:1,x2:"",y2:""},size:m,border:b,center:C};var a=f/t*360;if(a<10){this._oPath.initial.x-=1.5;this._oPath.initial.x1+=1.5;this._oPath.arc.x2=this._oPath.initial.x1;this._oPath.arc.y2=this._oPath.lineTo.y;}else if(a>350&&a<360){this._oPath.initial.x+=1.5;this._oPath.initial.x1-=1.5;this._oPath.arc.x2=this._oPath.initial.x1;this._oPath.arc.y2=this._oPath.lineTo.y;}else{var d=Math.PI/180.0;var e=this._oPath.center-this._oPath.border;var g;if(!R){g=e*Math.cos((a-90)*d)+this._oPath.center;}else{g=e*Math.cos((a-90)*d)+H._iReferenceControlWidth-this._oPath.center;}var h=this._oPath.size-(e*Math.sin((a+90)*d)+this._oPath.center);this._oPath.arc.x2=g.toFixed(2);this._oPath.arc.y2=h.toFixed(2);}var L=t/f<2?1:0;this._oPath.arc.largeArc=L;};H._serializePieChart=function(){var p=this._oPath;return["M",p.initial.x,",",p.initial.y," L",p.initial.x,",",p.lineTo.y," A",p.arc.x1,",",p.arc.y1," ",p.arc.xArc," ",p.arc.largeArc,",",p.arc.sweep," ",p.arc.x2,",",p.arc.y2," L",p.initial.x1,",",p.initial.y1," z"].join("");};return H;},true);

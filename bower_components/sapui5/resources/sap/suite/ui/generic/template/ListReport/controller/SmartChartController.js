sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";function g(s,c,t){function o(){var d,i,T,e,C;var A=c.getOwnerComponent().getAppComponent();var f=A.getConfig();if(f&&f.pages[0]&&f.pages[0].component&&f.pages[0].component.settings&&f.pages[0].component.settings._quickVariantSelectionX&&f.pages[0].component.settings._quickVariantSelectionX.variants){s.oTableTabData={aTableIsDirty:{},oCurrentBindingParams:{}};s.oIconTabBar=c.byId("template::IconTabBar");if(f.pages[0].component.settings._quickVariantSelectionX.showCounts){var I=s.oIconTabBar.getItems();for(d in I){S(I,d,0);}}s.aSmartTablesCharts={};for(i in f.pages[0].component.settings._quickVariantSelectionX.variants){T=sap.suite.ui.generic.template.js.AnnotationHelper.getIconTabFilterKey(f.pages[0].component.settings._quickVariantSelectionX.variants[i]);e=sap.suite.ui.generic.template.js.AnnotationHelper.getSmartTableId(f.pages[0].component.settings._quickVariantSelectionX.variants[i]);s.aSmartTablesCharts[T]=c.byId(e);if(!s.oSmartTable){s.oSmartTable=s.aSmartTablesCharts[T];}else{s.aSmartTablesCharts[T].setVisible(false);}s.oTableTabData.aTableIsDirty[s.aSmartTablesCharts[T].getId()]=false;}s.oSmartFilterbar.attachSearch(function(E){C=s.oSmartTable;if(C instanceof sap.ui.comp.smartchart.SmartChart){C.rebindChart(E);}else if(C instanceof sap.ui.comp.smarttable.SmartTable){C._reBindTable(E);}if(f.pages[0].component.settings._quickVariantSelectionX.showCounts){u();}for(i in s.oTableTabData.aTableIsDirty){s.oTableTabData.aTableIsDirty[i]=true;}s.oTableTabData.aTableIsDirty[s.oSmartTable.getId()]=false;s.oTableTabData.searchButtonPressed=true;});if(f.pages[0].component.settings._quickVariantSelectionX.enableAutobinding){s.oSmartFilterbar.search();}}}function a(e){var C=e.getSource();var d=C.getParent();s.fnUpdateTableOnSelectionChange(d);}function S(f,i,d){f[i].setCount(d);}function u(){var T,i,d;var m=s.oSmartTable.getModel();var I=c.byId("template::IconTabBar");var f=I.getItems();for(T in f){var F=[];var e=c.byId("listReport-"+f[T].getKey());var h=t.oCommonUtils.getSelectionVariantFilters(e);for(i in s.oTableTabData.oCurrentBindingParams.filters){F.push(s.oTableTabData.oCurrentBindingParams.filters[i]);}for(i in h){F.push(h[i]);}d=e.getEntitySet();m.read("/"+d+"/$count",{urlParameters:s.oTableTabData.oCurrentBindingParams.parameters.select,filters:F,groupId:"updateTabCounts",success:S.bind(null,f,T),error:function(D,r){}});}}function b(e){var E=e.getSource();var d=e.getParameter("itemContexts")&&e.getParameter("itemContexts")[0];s.oTemplateUtils.oCommonEventHandlers.onListNavigate(E,s,d);}return{onSmartChartInit:o,onChartSelectData:a,onDetailsActionPress:b};}return B.extend("sap.suite.ui.generic.template.ListReport.controller.SmartChartHelper_PoC",{constructor:function(s,c,t){q.extend(this,g(s,c,t));}});});

sap.ui.define(["jquery.sap.global","sap/ui/core/format/DateFormat","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/table/AnalyticalTable","sap/ui/comp/smarttable/SmartTable","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/lib/testableHelper","sap/suite/ui/generic/template/detailTemplates/detailUtils","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/js/AnnotationHelper","sap/ui/core/mvc/ViewType","sap/ui/table/Table","sap/m/Table"],function(q,D,M,a,F,S,A,b,c,t,d,E,J,f,V,U,R){"use strict";function I(s){return s.data("inlineCreate")==="true";}function g(C){return C.getProperty("key")==="enableLazyLoading"&&C.getProperty("value")==="true";}function l(s){if(s.getCustomData().some(g)){s.setBindingContext(null);}}function L(s){s.getSubSections().forEach(l);}return{getMethods:function(v,T,C){var B=d.getControllerBase(v,T,C);B.state.aUnsavedDataCheckFunctions=[];var h;var o;function m(){if(T.oServices.oApplication.getBusyHelper().isBusy()){q.sap.log.info("Activation of object suppressed, since App is currently busy");return;}q.sap.log.info("Activate object");var e=T.oServices.oCRUDManager.activateDraftEntity();e.then(function(j){T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_SAVED"));if(j&&j.context){T.oServices.oViewDependencyHelper.setAllPagesDirty([C.getOwnerComponent().getId()]);T.oServices.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());T.oServices.oNavigationController.navigateToContext(j.context,undefined,true);}});var i={activationPromise:e};T.oComponentUtils.fire(C,"AfterActivate",i);}function n(){T.oServices.oApplication.performAfterSideEffectExecution(m);}function p(e){if(I(e.getSource())){var i=e.getParameter("bindingParams");if(i.filters&&i.filters.length){var j=new F(i.filters);i.filters=new F({filters:[new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:true}),j],and:true}),new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:false}),new F({filters:[j,new F({path:"HasActiveEntity",operator:"EQ",value1:false})],and:false})],and:true})],and:false});}var k=i.sorter[0]&&i.sorter[0].getGroupFunction();var x=k&&function(a1){var b1=a1.getObject();if(b1.IsActiveEntity||b1.HasActiveEntity){var c1=q.extend({},k(a1));c1.key=c1.key.charAt(0)==="ยง"?"ยง"+c1.key:c1.key;return c1;}return{key:"ยง",text:T.oCommonUtils.getText("NEW_ENTRY_GROUP")};};i.sorter.unshift(new S("HasActiveEntity",false,x));}}function O(e,i){var j=e;if(i){j=j+" - "+i;}var k=document.URL;if((k.indexOf("(")==0)){k="%28"+k.slice(1,k.length);}if((k.lastIndexOf(")")==(k.length-1))){k=k.slice(0,(k.length-1))+"%29";}sap.m.URLHelper.triggerEmail(null,j,k);}function r(e,i){var j=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:e+" "+i}}});j.open();}function s(){return o.getHeaderTitle();}function u(e){var i=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.fragments.ShareSheet",{shareEmailPressed:function(){var j=i.getModel("share");O(j.getProperty("/objectTitle"),j.getProperty("/objectSubtitle"));},shareJamPressed:function(){var j=i.getModel("share");r(j.getProperty("/objectTitle"),j.getProperty("/objectSubtitle"));}},"share",function(x,j){var a1=sap.ui.getCore().getLibraryResourceBundle("sap.m");j.setProperty("/emailButtonText",a1.getText("SEMANTIC_CONTROL_SEND_EMAIL"));j.setProperty("/jamButtonText",a1.getText("SEMANTIC_CONTROL_SHARE_IN_JAM"));j.setProperty("/bookmarkButtonText",a1.getText("SEMANTIC_CONTROL_SAVE_AS_TILE"));var b1=q.sap.getObject("sap.ushell.Container.getUser");j.setProperty("/jamVisible",!!b1&&b1().isJamActive());});var j=i.getModel("share");var k=s();j.setProperty("/objectTitle",k.getProperty("objectTitle"));j.setProperty("/objectSubtitle",k.getProperty("objectSubtitle"));j.setProperty("/bookmarkCustomUrl",document.URL);i.openBy(e.getSource());}function w(){var e=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(i){var j=i.getSource();var k=j.getBindingContext("buttons");var x=k.getProperty("link");var a1=k.getProperty("param");var b1=x.intent;var c1=b1.split('#')[1].split('-')[0];var d1=b1.split('-')[1].split('?')[0].split('~')[0];var e1={target:{semanticObject:c1,action:d1},params:a1};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(e1);}},"buttons");return e;}function y(){var e=T.oServices.oApplication.getBusyHelper();if(e.isBusy()){return;}var i=C.getOwnerComponent();var j=i.getNavigationProperty();var k=T.oCommonUtils;var x=C.byId("objectPageHeader");var a1,b1;if(x.getProperty("objectTitle")!==""){if(x.getProperty("objectSubtitle")!==""){b1=[" ",x.getProperty("objectTitle").trim(),x.getProperty("objectSubtitle")];a1=k.getText("DELETE_WITH_OBJECTINFO",b1);}else{b1=[x.getProperty("objectTitle").trim()];a1=k.getText("DELETE_WITH_OBJECTTITLE",b1);}}else{a1=k.getText("ST_GENERIC_DELETE_SELECTED");}var c1=C.getOwnerComponent().getModel("_templPriv");var d1=c1.getProperty("/generic/viewLevel");var e1=T.oServices.oApplication.getFclProxyForView(d1);if(d1===1&&e1.isNextObjectLoadedAfterDelete()){var f1=T.oServices.oApplication.getListReportTable();e1.storeTableToShowObjectPageAfterDelete(f1,i.getBindingContext()&&i.getBindingContext().getPath());}M.show(a1,{icon:M.Icon.WARNING,styleClass:T.oCommonUtils.getContentDensityClass(),title:k.getText("DELETE"),actions:[M.Action.DELETE,M.Action.CANCEL],onClose:function(g1){if(g1===M.Action.DELETE){var h1=T.oServices.oCRUDManager.deleteEntity();h1.then(function(){T.oServices.oViewDependencyHelper.setParentToDirty(i,j,1);T.oServices.oViewDependencyHelper.unbindChildren(i,true);if(!e1.supressNavigationUpAfterDeletion()){v.navigateUp();}});var i1={deleteEntityPromise:h1};e.setBusy(h1);T.oComponentUtils.fire(C,"AfterDelete",i1);}}});}function z(e){T.oServices.oApplication.performAfterSideEffectExecution(y);}function G(e){var i,j;if(e){j=e.context||e;if(T.oServices.oDraftController.getDraftContext().hasDraft(j)){T.oServices.oViewDependencyHelper.setRootPageToDirty();i=e.context&&e.context.context||e.context||e;}}if(i){if(B.fclInfo.navigteToDraft){B.fclInfo.navigteToDraft(i);}else{T.oServices.oNavigationController.navigateToContext(i,undefined,true,2);}}else{var k=T.oComponentUtils.getTemplatePrivateModel();k.setProperty("/objectPage/displayMode",2);}v.setEditable(true);}var H;function K(e){T.oServices.oCRUDManager.editEntity(e).then(function(i){if(i.draftAdministrativeData){H(i.draftAdministrativeData.CreatedByUserDescription||i.draftAdministrativeData.CreatedByUser);}else{G(i.context);}});}H=function(e){var i=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){i.close();K(true);},onCancel:function(){i.close();}},"Dialog");var j=i.getModel("Dialog");var k=T.oCommonUtils.getText("DRAFT_LOCK_EXPIRED",[e]);j.setProperty("/unsavedChangesQuestion",k);i.open();};var N;function P(){N=N||T.oCommonUtils.getText("NEW_OBJECT");return N;}function Q(e,i,j){if(!j.getContent){return;}j.getContent().forEach(function(k){if(k instanceof b){if(i||e[k.getTableBindingPath()]){if(k.isInitialised()){T.oCommonUtils.refreshSmartTable(k);}else{k.attachInitialise(function(){T.oCommonUtils.refreshSmartTable(k);});}if(!i){T.oServices.oApplicationController.executeSideEffects(C.getOwnerComponent().getBindingContext(),[],[k.getTableBindingPath()]);}}}});}function W(e){var i=sap.ui.getCore().byId(s().getId()+"-lock");i.setVisible(e);}function X(){var j="{\"SelectionVariantID\":\"\"}";var k=C.getOwnerComponent();var a1=k.getEntitySet();var b1=k.getModel();var c1=b1.getMetaModel();var d1=c1.getODataEntitySet(a1);var e1=c1.getODataEntityType(d1.entityType);var f1=e1.property;var g1=[];for(var x in f1){var h1=f1[x]["com.sap.vocabularies.Common.v1.FieldControl"]&&f1[x]["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(h1&&g1.indexOf(h1)<0){g1.push(h1);}}var i1=C.getView().getBindingContext();var j1=i1.getObject();var k1=new c();for(var i in f1){var l1=f1[i].type;var m1=f1[i].name;var n1=j1[f1[i].name];if(g1.indexOf(m1)>-1){continue;}if(m1&&(n1||l1==="Edm.Boolean")){if(l1==="Edm.Time"&&n1.ms!==undefined){n1=n1.ms;}if(typeof n1!=="string"){try{n1=n1.toString();}catch(e){n1=n1+"";}}k1.addParameter(m1,n1);}}j=k1.toJSONString();return j;}function Y(e,i){var j=true;var k=i.getModel();var x=T.oCommonUtils.getDeleteRestrictions(i);var a1=x&&x.Deletable&&x.Deletable.Path;if(a1){j=k.getProperty(a1,e);}return j;}function Z(e){var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=e.getSource();var x=T.oCommonUtils.getOwnerControl(k);var a1=T.oCommonUtils.getSelectedContexts(x);if(a1.length===0){M.error(T.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:T.oCommonUtils.getContentDensityClass()});return;}var b1=[];var c1=[];for(var i=0;i<a1.length;i++){if(Y(a1[i],x)){b1.push(a1[i].getPath());}else{c1.push(a1[i]);}}if(c1.length>0){M.error(T.oCommonUtils.getText("ST_GENERIC_DELETE_UNDELETABLE_SUBITEMS",[c1.length,a1.length]),{styleClass:T.oCommonUtils.getContentDensityClass()});}var d1=T.oServices.oCRUDManager.deleteEntities(b1);j.setBusy(d1);T.oServices.oApplicationController.executeSideEffects(x.getBindingContext(),[],[x.getTableBindingPath()]);d1.then(function(){T.oServices.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());T.oCommonUtils.refreshSmartTable(x);});}function $(){var i=C.byId("imageDialog")||T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");return i;}v.refreshFacets=function(e,i){var j=Q.bind(null,e,i);var k=function(x){x.getBlocks().forEach(j);x.getMoreBlocks().forEach(j);};o.getSections().forEach(function(x){x.getSubSections().forEach(k);});};v.getHeaderInfoTitleForNavigationMenue=function(){var e=C.byId("objectPageHeader");var i=e.getProperty("objectTitle");var j=T.oComponentUtils.getTemplatePrivateModel();var k=j.getProperty("/generic/viewLevel");T.oServices.oApplication.subTitleForViewLevelChanged(k,i);};v.onComponentActivate=B.onComponentActivate;v.draftResume=function(e,j,k){var x=e.getObject();if(!x||!x.hasOwnProperty("IsActiveEntity")||x.IsActiveEntity!==false){return;}var a1=C.getView().getModel();var b1=a1.getMetaModel();var c1=b1.getODataEntitySet(C.getOwnerComponent().getEntitySet());var d1=b1.getODataEntityType(c1.entityType);var e1="";var f1="";var g1=d1["com.sap.vocabularies.Common.v1.SemanticKey"];for(var i in g1){var h1=g1[i];if(f1===""){f1=j[h1.PropertyPath];}else{f1=f1+"-"+j[h1.PropertyPath];}}var i1="-";if(k&&k.LastChangeDateTime!==null){var j1=D.getDateTimeInstance({pattern:"MMMM d, yyyy HH:mm",style:"long"});i1=j1.format(k.LastChangeDateTime);}var k1=[e1,f1,i1];var l1=T.oCommonUtils.getText("DRAFT_FOUND_RESUME",k1);var m1;var n1=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.DraftResumeDialog",{onDraftResume:function(){n1.close();T.oServices.oNavigationController.navigateToContext(m1.getProperty("/siblingContext"),null,true);},onDraftDiscard:function(){n1.close();C.getView().getModel("ui").setProperty("/enabled",true);T.oServices.oCRUDManager.deleteEntity(true);W(false);m1.getProperty("/activeEntity").HasDraftEntity=false;T.oServices.oViewDependencyHelper.setAllPagesDirty();},onResumeDialogClosed:function(){m1.setProperty("/siblingContext",null);m1.setProperty("/activeEntity",null);}},"Dialog");m1=n1.getModel("Dialog");m1.setProperty("/draftResumeText",l1);m1.setProperty("/siblingContext",e);m1.setProperty("/activeEntity",j);n1.open();};v.beforeRebind=function(){o.getSections().forEach(L);};v.afterRebind=function(){o._triggerVisibleSubSectionsEvents();};var K=t.testable(K,"editEntity");var Y=t.testable(Y,"isEntryDeletable");var _={onInit:function(){o=C.byId("objectPage");var e=s();v.aBreadCrumbs=e&&e.getBreadCrumbsLinks();B.onInit();T.oCommonUtils.executeGlobalSideEffect();o.attachEvent("subSectionEnteredViewPort",function(i){var j=i.getParameter("subSection");if(j){var k=T.oComponentUtils.getHeaderDataAvailablePromise()||Promise.resolve();k.then(function(){j.setBindingContext();});}});},handlers:{addEntry:function(e){var i=e.getSource();var j=T.oCommonUtils.getOwnerControl(i);var k=I(j);if(!i.data("CrossNavigation")&&k){T.oCommonEventHandlers.addEntry(i,true);return;}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.addEntry(i,false);},q.noop,B.state);},deleteEntries:Z,onSelectionChange:function(e){T.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onCancel:function(e){var i="Proceed";var j;if(T.oComponentUtils.isNonDraftCreate()||!h){i="LeavePage";}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var k=T.oComponentUtils.getTemplatePrivateModel();k.setProperty("/objectPage/displayMode",1);if(T.oComponentUtils.isNonDraftCreate()){v.setEditable(false);}else if(h){v.setEditable(false);}if(T.oComponentUtils.isNonDraftCreate()||!h){T.oServices.oNavigationController.navigateBack();}},q.noop,B.state,i,j,e);},onContactDetails:function(e){T.oCommonEventHandlers.onContactDetails(e);},onPressDraftInfo:function(e){var i=C.getView().getBindingContext();var j=sap.ui.getCore().byId(e.getSource().getId()+(e.getId()==="markChangesPress"?"-changes":"-lock"));T.oCommonUtils.showDraftPopover(i,j);},onShareObjectPageActionButtonPress:u,onRelatedApps:function(e){var x,a1,b1,c1,d1,e1,f1;var g1,h1,i1,j1,k1;x=e.getSource();i1=sap.ushell&&sap.ushell.Container;a1=i1&&i1.getService("URLParsing");b1=a1.parseShellHash(document.location.hash);j1=b1.semanticObject;k1=b1.action;c1=C.getView&&C.getView().getBindingContext();var l1=C.getOwnerComponent().getModel().getMetaModel();var m1=c1.getObject();var n1=m1.__metadata.type;var o1=l1.getODataEntityType(n1);var p1=o1["com.sap.vocabularies.Common.v1.SemanticKey"];var q1={};if(p1&&p1.length>0){for(var j=0;j<p1.length;j++){var r1=p1[j].PropertyPath;if(!q1[r1]){q1[r1]=[];q1[r1].push(m1[r1]);}}}else{for(var k in o1.key.propertyRef){var s1=o1.key.propertyRef[k].name;if(!q1[s1]){q1[s1]=[];q1[s1].push(m1[s1]);}}}d1=C.getOwnerComponent().getAppComponent();e1=i1&&i1.getService("CrossApplicationNavigation");f1=e1.getLinks({semanticObject:j1,params:q1,ui5Component:d1});g1=w();h1=g1.getModel("buttons");h1.setProperty("/buttons",[]);g1.openBy(x);f1.done(function(t1){var u1=[];t1.sort(function(y1,z1){if(y1.text<z1.text){return-1;}if(y1.text>z1.text){return 1;}return 0;});for(var i=0;i<t1.length;i++){var v1=t1[i];var w1=v1.intent;var x1=w1.split("-")[1].split("?")[0];if(x1!==k1){u1.push({enabled:true,text:v1.text,link:v1,param:q1});}}if(u1.length===0){u1.push({enabled:false,text:T.oCommonUtils.getText("NO_RELATED_APPS")});}h1.setProperty("/buttons",u1);});},onSemanticObjectLinkPopoverLinkPressed:function(e){T.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,B.state);},onEdit:function(e){var i=e.getSource();if(i.data("CrossNavigation")){T.oCommonEventHandlers.onEditNavigateIntent(i);return;}h=true;K();},onSave:function(){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}var e=C.getView().getBindingContext();var i=C.getView().getModel().getPendingChanges();i=i&&i[e.getPath().replace("/","")]||{};var j=Object.keys(i)||[];var k=T.oComponentUtils.isNonDraftCreate();var x=j.indexOf("__metadata");if(x>-1){j.splice(x,1);}var a1=T.oServices.oCRUDManager.saveEntity();a1.then(function(c1){var d1=T.oComponentUtils.getTemplatePrivateModel();d1.setProperty("/objectPage/displayMode",1);if(!T.oComponentUtils.isDraftEnabled()){v.setEditable(false);}else if(T.oComponentUtils.isDraftEnabled()){v.setEditable(false);}if(k){if(c1&&c1.getPath()!=="/undefined"){T.oServices.oNavigationController.navigateToContext(c1,undefined,true);}else{v.setEditable(false);T.oServices.oNavigationController.navigateBack();}T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_CREATED"));}else{T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_SAVED"));if(!T.oComponentUtils.isDraftEnabled()&&!h){T.oServices.oNavigationController.navigateBack();}}if(j.length>0){T.oServices.oApplicationController.executeSideEffects(e,j);}});var b1={saveEntityPromise:a1};T.oComponentUtils.fire(C,"AfterSave",b1);},onActivate:n,onSmartFieldUrlPressed:function(e){T.oCommonEventHandlers.onSmartFieldUrlPressed(e,B.state);},onBreadCrumbUrlPressed:function(e){T.oCommonEventHandlers.onBreadCrumbUrlPressed(e,B.state);},onDiscardDraft:function(e){T.oCommonEventHandlers.onDiscardDraft(e);},onDelete:z,onCallActionFromToolBar:function(e){T.oCommonEventHandlers.onCallActionFromToolBar(e,B.state);},onCallAction:function(e){var i=C.getOwnerComponent();var j=i.getNavigationProperty();var k=T.oCommonUtils.getCustomData(e);var x=[];x.push(C.getView().getBindingContext());if(x[0]&&k.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var a1={functionImportPath:k.Action,contexts:x,sourceControl:"",label:k.Label,operationGrouping:k.InvocationGrouping,navigationProperty:C.getOwnerComponent().getNavigationProperty()};T.oServices.oCRUDManager.callAction(a1).then(function(b1){var c1=b1&&b1[0];if(c1&&c1.response&&c1.response.context&&(!c1.actionContext||c1.actionContext&&c1.response.context.getPath()!==c1.actionContext.getPath())){T.oServices.oViewDependencyHelper.setParentToDirty(i,j,1);}});},q.noop,B.state,"Proceed");}},onDataFieldForIntentBasedNavigation:function(e){T.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,B.state);},onDataFieldWithIntentBasedNavigation:function(e){T.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,B.state);},onChartInit:function(e){var i=e.getSource().getChart();var j=C._templateEventHandlers.onSelectionChange;i.attachSelectData(j).attachDeselectData(j);},onDataReceived:function(e){T.oCommonEventHandlers.onDataReceived(e);},onBeforeRebindDetailTable:function(e){T.oCommonEventHandlers.onBeforeRebindTable(e);C.onBeforeRebindTableExtension(e);p(e);if(e.getSource().getTable()instanceof A){var i=e.getParameter("bindingParams");i.parameters.entitySet=e.getSource().getEntitySet();}},onShowDetails:function(e){T.oCommonEventHandlers.onShowDetails(e.getSource(),B.state);},onListNavigate:function(e){if(!C.onListNavigationExtension(e)){T.oCommonEventHandlers.onListNavigate(e.getSource(),B.state);}},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var j=X();T.oCommonUtils.semanticObjectLinkNavigation(i,j,C);},q.noop,B.state,q.noop);},onSemanticObjectLinkNavigationPressed:function(e){var i=e.getParameters();var j=e.getSource();T.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(j,i);},onSemanticObjectLinkNavigationTargetObtained:function(e){var i=e.getParameters();var j=e.getSource();T.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(j,i,B.state);},onSemanticObjectLinkNavigationTargetObtainedSmartLink:function(e){var i,j;i=e.getParameters();j=e.getSource();j=j.getParent().getParent().getParent().getParent();T.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(j,i,B.state);},onHeaderImagePress:function(e){var i=$();var j=e.getSource().getId();i.addAriaLabelledBy(j);var k=i.getModel("headerImage");k.setProperty("/src",e.getSource().getSrc());if(sap.ui.Device.system.phone){i.setProperty("stretch",true);}i.open();},onInlineDataFieldForAction:function(e){var i=e.getSource();var j=T.oCommonUtils.getElementCustomData(i);var k=T.oCommonUtils.getOwnerControl(i);var x=k.getParent().getTableBindingPath();var a1=[i.getBindingContext()];T.oCommonUtils.triggerAction(a1,x,j,i,B.state);},onInlineDataFieldForIntentBasedNavigation:function(e){T.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),B.state);},onDeterminingDataFieldForAction:function(e){var i=[this.getView().getBindingContext()];var j=e.getSource();var k=T.oCommonUtils.getElementCustomData(j);var x=this.getView().getBindingPath();T.oCommonUtils.triggerAction(i,x,k);},onBeforeRebindChart:function(e){var i=e.getSource();i.oModels=i.getChart().oPropagatedProperties.oModels;},onTableInit:function(e){var i=e.getSource();var j=C.getOwnerComponent().getModel("_templPriv");T.oCommonUtils.checkToolbarIntentsSupported(i,j);},onSearchObjectPage:function(e){var i=(e.getSource().getParent()).getParent();i.data("searchString",e.getSource().getValue());i.data("allowSearch",true);i.data("tableId",i.getId());i.data("objectPath",i.getBindingContext().getPath());i.rebindTable();}},formatters:{formatDefaultObjectTitle:function(e,i){if(i||!e){return;}var j=C.getView().getBindingContext();var k=j&&j.getObject();if(e&&k&&(k.IsActiveEntity===undefined||k.IsActiveEntity===false||k.HasActiveEntity===false)){return P();}}},extensionAPI:new E(T,C,B)};_.handlers=q.extend(B.handlers,_.handlers);return _;}};});

/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/extensionAPI/extensionAPI"],function(q,U,J,e){"use strict";var R={},j="sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport";function h(c,u){if(!c.extensionAPI){return;}var d=c.component.getBindingContext();var D=d&&d.getPath();if(!u&&(!d||D===c.currentContextPath)){return;}c.currentContextPath=D;var M=c.component.getModel();var C=(c.firstTime&&c.component.stStart)||c.component.stRefresh;c.firstTime=false;if(C){C.call(c.component,M,d,c.extensionAPI);}}function m(c,C,t){var o={component:c,firstTime:true,currentContextPath:null};var H=h.bind(null,o);var r={pathUnchangedCallBack:H};o.proxy=r;if(c.stRefresh||c.stStart){c.attachEvent("modelContextChange",H.bind(null,false));}var O=c.onBeforeRendering;c.onBeforeRendering=function(){c.onBeforeRendering=O;c._stProxy=r;var E=e.getExtensionAPIPromise(c.oContainer);E.then(function(d){o.extensionAPI=d;delete c._stProxy;H();});if(O){O.apply(c,arguments);}};if(C){var p=c.getMetadata().getProperties();var M={};for(var P in p){M[P]=c.getProperty(P);}var a=new J(M);c.setModel(a,C);var s=c.setProperty||q.noop;c.setProperty=function(n,v){s.apply(c,arguments);a.setProperty("/"+n,v);q.sap.log.debug(c.getId()+":"+c.getMetadata().getName()+": setProperty "+n+"="+v,j);};c.getComponentModel=c.getComponentModel||function(){return a;};if(t){var u=function(d,b){var v=b.getValue();if(v!==c.getProperty(d)){s.call(c,d,v);}};for(P in p){var b=a.bindProperty("/"+P);b.attachChange(u.bind(null,P,b));}}}}R.mixInto=function(c,C,t){if(!(c instanceof U)){throw new Error("Reuse component must be an instance of sap.ui.core.UIComponent");}m(c,C,t);};return R;});

sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var C={};function g(c,o){var h;var H=null;var a;var b;var I=false;var d=[];var e=[];function f(i){var $;var _=c.getModel();if(i){if(_){$=_.getProperty(i);}}else{var a1=c.getBindingContext();if(a1){$=a1.getObject();}}return!!($&&$.__metadata&&$.__metadata.created);}function j(){return c.getModel("_templPriv");}function k(){return j().getProperty("/generic/viewLevel");}function l(){return o.preprocessorsData;}function m(){return o.oParameterModel;}function n(){var i=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:i.getText("ST_ERROR"),dataLoadFailedText:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(i,$,_){if(typeof _!=="function"){throw new Error("Event handler must be a function");}e.push({template:i,event:$,handler:_});}function D($,_,a1){for(var i=e.length;i--;){if(e[i].handler===a1&&e[i].event===_&&e[i].template===$){e.splice(i,1);}}}function F($,_,a1){for(var i=0;i<e.length;i++){if(e[i].event===_&&e[i].template===$){e[i].handler(a1);}}}function p(i){return i.getMetadata().getName();}function r(){return o.oApplication.isComponentActive(c);}function P(i,$){var _=o.oNavigationObserver.getProcessFinished(true);_.then(function(){if(r()){if($){z(true);}F(p(o.oController),"PageDataLoaded",{context:i});}});}function s(){h.then(function(i){if(i){P(i);}});}function S(){o.oHeaderLoadingObserver.startProcess();if(!b){var i=new Promise(function($){b=$;});o.oApplication.getBusyHelper().setBusy(i);}}function t(){I=true;if(!H){h=new Promise(function(i){H=i;});}if(!c.getComponentContainer().getElementBinding().isSuspended()){S();}}function E(){if(b){b();b=null;}o.oHeaderLoadingObserver.stopProcess();}function u(i){var $=i.getSource().getBoundContext();if($){return $;}if(c.getComponentContainer().getElementBinding().isSuspended()){$=null;}else{$=C;}U();E();return $;}function N(){var i=n();var $=c.getAppComponent().getNavigationController();$.navigateToMessagePage({title:i.dataLoadFailedTitle,text:i.dataLoadFailedText,description:"",viewLevel:k()});}function v(){I=false;if(!a){return;}if(a===C){N();}else if(!c.getComponentContainer().getElementBinding().isSuspended()){if(H){H(a);}(o.methods.updateBindingContext||q.noop)();}else{return;}H=null;a=null;}function w(i){E();if(I){a=u(i);}v();}function x(i){a=u(i);v();o.oHeaderLoadingObserver.stopProcess();}function R(i){var $={};var _=l();if(_.rootContextExpand&&_.rootContextExpand.length){$.expand=_.rootContextExpand.join(",");}o.oHeaderLoadingObserver.startProcess();if(o.methods.beforeRebind){o.methods.beforeRebind();}h=new Promise(function(a1){a=null;H=a1;c.getComponentContainer().bindElement({path:i,events:{dataRequested:t,dataReceived:w,change:x},parameters:$,batchGroupId:"Changes",changeSetId:"Changes"});});if(o.methods.afterRebind){o.methods.afterRebind();}}function U(){var i=c.getComponentContainer();i.unbindElement();a=null;}function y(){var $=O();var _=($.length===d.length);for(var i=0;i<$.length&&_;i++){_=$[i]===d[i];}d=$;return!_;}function z($){var _=o.reuseComponentProxies;for(var i=0;i<_.length;i++){_[i].pathUnchangedCallBack($);}}function G(i,$){var _=y();if(!i){if(o.routingSpec&&o.routingSpec.noOData){P(null,_);}return;}var a1=c.getComponentContainer();if(!a1){return;}if(f(i)){U();a1.setBindingContext(a1.getModel().getContext(i));Promise.all([o.oViewRenderdPromise,o.viewRegisterd]).then(z.bind(null,true));}else{var b1=a1.getElementBinding();if(b1){if(b1.getPath()===i){if(b1.isSuspended()){b1.resume();v();}if(I){S();}o.oApplication.getBusyHelper().getUnbusy().then(z.bind(null,_&&o.routingSpec.noOData));if(!$){s();}return;}else if(!$){U();}}var c1=c.getModel("ui");c1.setProperty("/enabled",false);c1.setProperty("/editable",false);R(i);s();}}function J(){var i=c.getComponentContainer();var $=i.getBindingContext();var _=$&&$.getPath();var a1=_&&f(_);if(a1){i.setBindingContext();return;}var b1=i.getElementBinding();if(b1&&!b1.isSuspended()){if(o.oTemplateContract.oValidationMessageBinding.getLength()){U();}else{b1.suspend();}E();}}function K(i){o.oApplication.setBackNavigation(i);}function L(i){return o.oApplication.registerContext(i);}function M(){return o.oApplication.getBreadCrumbInfo(c.getEntitySet());}function O(){return o.oApplication.getCurrentKeys(k());}function Q(){return o.oApplication.getCommunicationModel(c);}function T(i){return o.oApplication.getCommunicationObject(c,i);}function V(i,$,_,a1){o.oApplication.navigateRoute(i,$,o,_,a1);}function W(){var i=c.getEntitySet();var $=o.oTemplateContract.mEntityTree[i];return $.headerTitle;}function X(){var i=c.getEntitySet();var $=o.oTemplateContract.mEntityTree[i];return $.isDraft;}function Y(){return!(o.routingSpec&&o.routingSpec.noOData);}function Z(){return h;}return{setEditableNDC:function(i){o.oApplication.setEditableNDC(i);},getEditableNDC:function(){return o.oApplication.getEditableNDC();},getBusyHelper:function(){return o.oApplication.getBusyHelper();},isNonDraftCreate:f,attach:function(i,$,_){A(p(i),$,_);},detach:function(i,$,_){D(p(i),$,_);},fire:function(i,$,_){F(p(i),$,_);},isListReportTemplate:function(){return sap.suite.ui.generic.template.js.AnnotationHelper.isListReportTemplate(o.routeConfig);},getPreprocessorsData:l,getParameterModelForTemplating:m,bindComponent:G,suspendBinding:J,setBackNavigation:K,getTemplatePrivateModel:j,registerContext:L,getViewLevel:k,getBreadCrumbInfo:M,getCurrentKeys:O,getCommunicationModel:Q,getCommunicationObject:T,navigateRoute:V,getTitleFromTreeNode:W,isDraftEnabled:X,isODataBased:Y,isComponentActive:r,navigateToDataLoadedFailedPage:N,getHeaderDataAvailablePromise:Z};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils",{constructor:function(c,o){q.extend(this,g(c,o));}});});

/* SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.apf.ui.representations.utils.paginationHandler");(function(){'use strict';sap.apf.ui.representations.utils.PaginationHandler=function(){this.pagingOption={top:100,skip:0};};sap.apf.ui.representations.utils.PaginationHandler.prototype.constructor=sap.apf.ui.representations.utils.PaginationHandler;function _(t){this.pagingOption.skip=t.getData().tableData.length;this.pagingOption.top=99;}function a(t){var T=t.oTableRepresentation.getModel();var p=T.getData();t.oTableRepresentation.getParent().setBusy(true);sap.ui.getCore().applyChanges();_.bind(this)(T);var A=t.oApi.getActiveStep();t.oApi.updatePath(function(s,S){if(s===A){T.setData(p);t.markSelectionInTable();t.oTableRepresentation.getParent().setBusy(false);}});}function i(t){if(this.pagingOption.skip<t.nDataResponseCount){return true;}}function b(t){var l=new sap.m.Link({text:"More"}).addStyleClass("loadMoreLink");if(i.bind(this)(t)){c(l);}return l;}function c(l){var L,k;if(l){L=l;k=sap.ui.getCore().getRenderManager().getHTML(L);}jQuery(".loadMoreLink").remove();jQuery(jQuery(".tableRepresentation > div:first-child")).append(k);}function d(t){if(!jQuery(".openToggleImage").length&&i.bind(this)(t)){return true;}}function e(t,l){if(d.bind(this)(t)){a.bind(this)(t);if(i.bind(this)(t)){c(l);}else{jQuery(".loadMoreLink").remove();}}}function f(t){var s=this;var l=b.bind(s)(t);l.attachPress(function(){e.bind(s)(t,l);});}function g(t,s){var k=jQuery(s).prop("scrollHeight")-jQuery(s).prop("offsetHeight")-5;var l=jQuery(s).prop("scrollTop");if((k<=l)&&!jQuery(".openToggleImage").length&&i.bind(this)(t)){return true;}}function h(t,s){if(g.bind(this)(t,s)){a.bind(this)(t);}}function j(t){var s=this;jQuery('.sapUiTableVSb').on("scroll",function(){h.bind(s)(t,this);});}sap.apf.ui.representations.utils.PaginationHandler.prototype.attachPaginationOnTable=function(t){if(sap.ui.Device.system.desktop){j.bind(this)(t);}else{f.bind(this)(t);}};sap.apf.ui.representations.utils.PaginationHandler.prototype.getPagingOption=function(t){var k,s;if(t){k=t;s=0;}else if(this.pagingOption.top!==100&&this.pagingOption.skip!==0){k=this.pagingOption.top;s=this.pagingOption.skip;}else{k=100;s=0;}this.pagingOption={inlineCount:t?false:true,top:k,skip:s};return this.pagingOption;};sap.apf.ui.representations.utils.PaginationHandler.prototype.resetPaginationOption=function(){this.pagingOption={top:100,skip:0};};}());

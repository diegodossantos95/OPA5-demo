/*!
* SAP APF Analysis Path Framework
* 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
*/
jQuery.sap.declare('sap.apf.modeler.ui.utils.sortDataHandler');jQuery.sap.require("sap.apf.core.constants");(function(){'use strict';var p=sap.apf.modeler.ui.utils.CONSTANTS.propertyTypes;sap.apf.modeler.ui.utils.SortDataHandler=function(P,o,s,t){this.oParentView=P;this.oStepPropertyMetadataHandler=s;this.oParentObject=o;this.oTextReader=t;};sap.apf.modeler.ui.utils.SortDataHandler.prototype.constructor=sap.apf.modeler.ui.utils.RepresentationBasicDataHandler;function _(s,P,b){var v,V={},o={};o.oConfigurationEditor=s.oParentView.getViewData().oConfigurationEditor;o.oParentObject=s.oParentObject;o.oCoreApi=s.oParentView.getViewData().oCoreApi;o.oConfigurationHandler=s.oParentView.getViewData().oConfigurationHandler;o.oStepPropertyMetadataHandler=s.oStepPropertyMetadataHandler;o.sPropertyType=P;V.oViewDataForPropertyType=o;V.aPropertiesToBeCreated=b;v=new sap.ui.view({viewName:"sap.apf.modeler.ui.view.propertyTypeHandler",type:sap.ui.core.mvc.ViewType.XML,id:s.oParentView.getController().createId("id"+P),viewData:V});s.oParentView.getController().byId("idSortLayout").insertItem(v);s.oParentView.attachEvent(sap.apf.modeler.ui.utils.CONSTANTS.events.step.SETTOPNPROPERTIES,v.getController().handleSettingTopNProperties.bind(v.getController()));}function a(s){var P,b=[];s.forEach(function(S){P={};P.sProperty=S.property;P.sContext=S.ascending?"true":"false";b.push(P);});return b;}sap.apf.modeler.ui.utils.SortDataHandler.prototype.instantiateRepresentationSortData=function(){var P=a(this.oParentObject.getOrderbySpecifications());if(P.length===0){P=[{sProperty:this.oTextReader("none"),sContext:"true"}];}_(this,p.REPRESENTATIONSORT,P);};sap.apf.modeler.ui.utils.SortDataHandler.prototype.instantiateStepSortData=function(){var P=[{sProperty:this.oStepPropertyMetadataHandler.getProperties()[0],sContext:"true"}];this.destroySortData();if(this.oParentObject.getTopN()&&this.oParentObject.getTopN().orderby.length!==0){P=a(this.oParentObject.getTopN().orderby);}_(this,p.STEPSORT,P);};sap.apf.modeler.ui.utils.SortDataHandler.prototype.destroySortData=function(){this.oParentView.getController().byId("idSortLayout").destroyItems();};})();

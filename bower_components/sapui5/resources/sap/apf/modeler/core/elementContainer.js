/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.apf.modeler.core.elementContainer");(function(){'use strict';sap.apf.modeler.core.ElementContainer=function(n,E,i,d){var e,a,r=new RegExp("^"+n+"-([123456789]\\d*)$"),b=new RegExp("^"+n);var t=this;i.instances.messageHandler.check(n!==undefined,"ElementContainer: Element has been created without name");if(!d){e=new i.constructors.Hashtable(i.instances.messageHandler);a=0;}else{e=d.elements;a=d.elementCounter;}this.generateId=function(){return n+"-"+(++a);};this.createElement=function(f,S){var g;g=t.generateId();return c(f,g,S);};this.createElementWithProposedId=function(f,p,S){function g(k){var m=r.exec(k);if(m){var l=parseInt(m[1],10);if(l>a){a=l;}}}var h;var j=e.getItem(p);if(j){return t.createElement(f,S);}h=c(f,p,S);g(p);return h;};this.removeElement=function(f){return e.removeItem(f);};this.getElement=function(f){return e.getItem(f);};this.updateElement=function(f,g){i.instances.messageHandler.check(f!==undefined,"ElementContainer: Element has been updated with undefined elementId");if((!g.getId)||g.getId()!==f){g.getId=function(){return f;};}e.setItem(f,g);return f;};this.setElement=function(f,g){var h;if(g){if(!(e.getItem(g))){i.instances.messageHandler.putMessage(i.instances.messageHandler.createMessageObject({code:'11006',aParameters:[g]}));return undefined;}t.updateElement(g,f);return g;}h=t.createElement(f);return h.getId();};this.getElements=function(){var l=[];e.forEachOrdered(function(f,g){l.push(g);});return l;};this.moveUpOrDown=function(f,g){return e.moveUpOrDown(f,g);};this.moveBefore=function(f,m){return e.moveBefore(f,m);};this.moveToEnd=function(f){return e.moveToEnd(f);};this.copyElement=function(f){var g,h,j;g=e.getItem(f);if(!g){return;}j=t.generateId();if(g.copy&&typeof g.copy==="function"){h=g.copy(j);}else{h=sap.apf.modeler.core.ConfigurationObjects.deepDataCopy(g);}h.getId=function(){return j;};e.setItem(j,h);return j;};this.copy=function(f){var g={elements:new i.constructors.Hashtable(i.instances.messageHandler),elementCounter:a};var h;var j;e.getKeysOrdered().forEach(function(k){h=e.getItem(k);j=sap.apf.modeler.core.ConfigurationObjects.deepDataCopy(h);if(f&&k.indexOf(n)===0){k=k.replace(b,f);}i.instances.messageHandler.check(k!==undefined,"ElementContainer: Element has been created without name in copy - 1");if(typeof j==="object"&&j.getId&&typeof j.getId==="function"){j.getId=function(){return k;};}g.elements.setItem(k,j);});i.instances.messageHandler.check(n!==undefined||f!==undefined,"ElementContainer: Element has been created without name in copy 2");return new sap.apf.modeler.core.ElementContainer((f||n),E,i,g);};function c(f,g,S){var h;i.instances.messageHandler.check(g!==undefined,"ElementContainer: Element has been created with undefined id");if(typeof S==='function'){h=new S(g,i);}else if(typeof E==='function'){if(E!==sap.apf.modeler.core.ElementContainer){h=new E(g,i);}else{h=new E(g,undefined,i);}}else{h={};}h.getId=function(){return g;};if(f){h=jQuery.extend(h,f);}e.setItem(g,h);return h;}};}());

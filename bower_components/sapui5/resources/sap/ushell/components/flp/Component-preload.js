jQuery.sap.registerPreloadedModules({"name":"Component-preload","version":"2.0","modules":{"sap/ushell/components/flp/ActionMode.js":function(){
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define([],function(){"use strict";var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe('launchpad','actionModeInactive',this.scrollToViewPoint,this);this.oEventBus.subscribe('launchpad','actionModeActive',this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(m){this.oModel=m;};};A.prototype.activate=function(){var t;this.oModel.setProperty('/tileActionModeActive',true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds(this.oModel);var d=sap.ui.getCore().byId("dashboardGroups");d.addLinksToUnselectedGroups();t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(sap.ushell.resources.i18n.getText("exitEditMode"));t.setText(sap.ushell.resources.i18n.getText("exitEditMode"));if(t.data("isShellHeader")){t.setSelected(true);}}this.oEventBus.publish('launchpad','actionModeActive');};A.prototype.scrollToViewPoint=function(){var d=this.viewPoint;d.restoreLastFocusedTile=true;if(!this.oModel.getProperty('/tileActionModeActive')){var j=jQuery(".sapUshellTileContainerHeader[tabindex=0]");if(j&&j.length>0){var a=j[0].closest('.sapUshellTileContainer');if(a){d.restoreLastFocusedTileContainerById=a.id;}}}d.iDuration=0;window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToGroup",d),0);};A.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions"),T;this.oModel.setProperty('/tileActionModeActive',false);this.oEventBus.publish("launchpad",'actionModeInactive',this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}sap.ui.require(['sap/m/MessageToast'],function(M){M.show(sap.ushell.resources.i18n.getText("savedChanges"),{duration:4000});});T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateEditMode"));T.setText(sap.ushell.resources.i18n.getText("activateEditMode"));if(T.data("isShellHeader")){T.setSelected(false);}}};A.prototype.toggleActionMode=function(m,s,d){var t=m.getProperty('/tileActionModeActive');var c=m.getProperty('/topGroupInViewPortIndex');var h=m.getProperty("/homePageGroupDisplay");if(!d){d=[];}var v=d.filter(function(f){return f.getVisible();});var a=v[c];if(a){var e=t?-49:49;var b=(h==="tabs")?d[0].getDomRef():a.getDomRef();var S=0;if(b){S=b.offsetTop;}var g=document.getElementById("sapUshellDashboardPage-cont").scrollTop-S;this.viewPoint={group:v[c],fromTop:g+e};}else{this.viewPoint={fromTop:0};}if(t){this.deactivate();}else{this.activate();}};A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find('.sapUshellTileContainerContent');j.addClass("sapUshellTileContainerEditMode");};A.prototype._openActionsMenu=function(e,v){var t=this,T=v?v:e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),a=[],o=sap.ui.getCore().byId("TileActions"),i,n,b,c,d,h,f,g;if(T){d=T.getBindingContext().getObject().object;a=l.getTileActions(d);}t.oTileControl=T;jQuery(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");f=jQuery(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");f.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Bottom,afterClose:function(){$(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",t.oTileControl);}});}else{o.destroyButtons();}if(a.length===0||T.oParent.getProperty("isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<a.length;i++){c=a[i];h=function(c){return function(){t._handleActionPress(c,T);};}(c);b=new sap.m.Button({text:c.text,icon:c.icon,press:h});o.addButton(b);}}g=e.getSource().getActionSheetIcon?e.getSource().getActionSheetIcon():undefined;if(g){o.openBy(g);}else{var m=sap.ui.getCore().byId(e.getSource().getId()+"-action-more");if(m){o.openBy(m);}else{o.openBy(e.getSource());}}};A.prototype._handleActionPress=function(a,t){if(a.press){a.press.call(a,t);}else if(a.targetURL){if(a.targetURL.indexOf("#")===0){hasher.setHash(a.targetURL);}else{window.open(a.targetURL,'_blank');}}else{sap.ui.require(['sap/m/MessageToast'],function(M){M.show("No Action");});}};return new A();},true);},"sap/ushell/components/flp/Component.js":function(){sap.ui.define(['sap/ushell/components/flp/launchpad/DashboardManager','sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/flp/ComponentKeysHandler','sap/ushell/components/flp/CustomRouter'],function(D,r,U,C,a){return U.extend("sap.ushell.components.flp.Component",{metadata:{routing:{config:{viewType:"JS",controlAggregation:"pages",controlId:"navContainerFlp",clearAggregation:false,routerClass:a},targets:{appFinder:{viewName:"sap.ushell.components.flp.launchpad.appfinder.AppFinder"},home:{viewName:"sap.ushell.components.flp.launchpad.dashboard.DashboardContent"}},routes:[{name:"home",target:'home',pattern:"home"}]},version:"1.50.6",library:"sap.ushell.components.flp",dependencies:{libs:["sap.m"]},config:{semanticObject:'Shell',action:'home',title:r.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true}},PERS_KEY:"flp.settings.FlpSettings",parseOldCatalogParams:function(u){"use strict";var p=jQuery.sap.getUriParameters(u).mParams,v,k;for(k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf('/')!==-1?encodeURIComponent(v):v;}}return p;},handleNavigationFilter:function(n){"use strict";var s=sap.ushell.Container.getService("URLParsing").parseShellHash(n),p;if(s&&s.semanticObject==='shell'&&s.action==='catalog'){p=this.parseOldCatalogParams(n);setTimeout(function(){this.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify(p)});}.bind(this),0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}return this.oShellNavigation.NavigationFilterStatus.Continue;},createContent:function(){"use strict";this.oRouter=this.getRouter();this.oModel=new sap.ui.model.json.JSONModel({animationMode:'full',groups:[],animationRendered:false,tagFiltering:true,searchFiltering:true,catalogSelection:true,tileActionModeEnabled:false,tileActionModeActive:false,isInDrag:false,rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:true,editTitle:false,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableNotificationsPreview:false,previewNotificationItems:[],viewPortState:sap.ushell.Container.getRenderer('fiori2').getCurrentViewportState(),draggedTileLinkPersonalizationSupported:true});this.bCoreResourcesLoaded=!!jQuery.sap.isDeclared('sap.fiori.core-ext-light',true);sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","enablePreviewNotificationChanged",this.updateNotificationConfiguration,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/flp/FLPAnalytics"]);});sap.ui.getCore().getEventBus().subscribe("sap.ushell","coreResourcesFullyLoaded",function(){this.bCoreResourcesLoaded=true;this.updateNotificationConfiguration();},this);this.oModel.setSizeLimit(10000);this.setModel(this.oModel);this.oConfig=this.getComponentData().config;this.oShellConfig=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();sap.ui.getCore().getEventBus().subscribe('launchpad','afterSwitchState',this._handleShellViewPortSateChange,this);var n,m,h,H,s,p,c,P=(this.oConfig&&(this.oConfig.enablePersonalization||this.oConfig.enablePersonalization===undefined))&&(this.oShellConfig&&this.oShellConfig.enablePersonalization||this.oShellConfig.enablePersonalization===undefined);if(P){this.oRouter.addRoute({name:"catalog",target:'appFinder',pattern:"catalog/:filters:"});this.oRouter.addRoute({name:"appFinder",target:'appFinder',pattern:"appFinder/{menu}/:filters:"});}this.oRouter.addRoute({name:"all",target:'home',pattern:":all*:"});this._setConfigurationToModel(this.oConfig);var d={model:this.oModel,config:this.oConfig,router:this.oRouter};this.oDashboardManager=new D("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");m=window.matchMedia("(min-width: 800px)");h=function(b){this.oModel.setProperty("/isPhoneWidth",!b.matches);}.bind(this);if(m.addListener){m.addListener(h);h(m);}sap.ui.getCore().getEventBus().subscribe("launchpad","togglePane",this._createAndAddGroupList,this);this.bContactSupportEnabled=sap.ushell.Container.getService("SupportTicket").isEnabled();if(this.bContactSupportEnabled){jQuery.sap.require("sap.ushell.UserActivityLog");sap.ushell.UserActivityLog.activate();}n=this.initNavContainer();this.setInitialConfiguration();this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleNavigationFilter,this));H=hasher.getHash();s=sap.ushell.Container.getService("URLParsing").parseShellHash(H);if(s&&s.semanticObject==='shell'&&s.action==='catalog'){p=this.parseOldCatalogParams(H);c=this.getMetadata().getConfig();this.oShellNavigation.toExternal({target:{semanticObject:c.semanticObject,action:c.action}});this.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify(p)});}if(this.oConfig.enableHomePageSettings!==false){sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._addFlpSettings,this);}return n;},_createAndAddGroupList:function(c,e,d){"use strict";if(d.currentContent&&(d.currentContent.indexOf('groupList')!==-1||!d.currentContent.length)){var o=this.oConfig,g=this.runAsOwner(function(){return this.oDashboardManager.getGroupListView(o);}.bind(this));if(!g.alreadyCreated){g.groupList.setModel(this.oModel);g.groupList.setModel(r.i18nModel,"i18n");sap.ushell.renderers.fiori2.RendererExtensions.setLeftPaneContent(g.groupList,"home");}}},_setConfigurationToModel:function(c){"use strict";var m=this.oModel,t,R=sap.ushell.Container.getRenderer('fiori2').getModelConfiguration();this.updateNotificationConfiguration();if(c){if(c.enablePersonalization!==undefined&&this.oShellConfig.enablePersonalization!==undefined){m.setProperty("/personalization",c.enablePersonalization&&this.oShellConfig.enablePersonalization);}else if(c.enablePersonalization!==undefined){m.setProperty("/personalization",c.enablePersonalization);}else if(this.oShellConfig.enablePersonalization!==undefined){m.setProperty("/personalization",this.oShellConfig.enablePersonalization);}if(c.enableLockedGroupsCompactLayout!==undefined){m.setProperty("/enableLockedGroupsCompactLayout",c.enableLockedGroupsCompactLayout);}if(c.enableCatalogSelection!==undefined){m.setProperty("/catalogSelection",c.enableCatalogSelection);}if(c.enableTilesOpacity!==undefined){m.setProperty("/tilesOpacity",c.enableTilesOpacity);}if(c.enableDragIndicator!==undefined){m.setProperty("/enableDragIndicator",c.enableDragIndicator);}t=false;if(c.enableActionModeMenuButton!==undefined){m.setProperty("/actionModeMenuButtonEnabled",c.enableActionModeMenuButton);t=c.enableActionModeMenuButton;}if(c.enableRenameLockedGroup!==undefined){m.setProperty("/enableRenameLockedGroup",c.enableRenameLockedGroup);}else{m.setProperty("/enableRenameLockedGroup",false);}if(c.enableActionModeFloatingButton!==undefined){m.setProperty("/actionModeFloatingButtonEnabled",c.enableActionModeFloatingButton);t=t||c.enableActionModeFloatingButton;}m.setProperty("/tileActionModeEnabled",t);if(c.enableTileActionsIcon!==undefined){m.setProperty("/tileActionsIconEnabled",sap.ui.Device.system.desktop?c.enableTileActionsIcon:false);}if(c.enableHideGroups!==undefined){m.setProperty("/enableHideGroups",c.enableHideGroups);}if(c.title){m.setProperty("/title",c.title);}if(c.enableEasyAccess!=undefined&&!c.enableEasyAccess){m.setProperty("/enableEasyAccessSAPMenu",c.enableEasyAccess);m.setProperty("/enableEasyAccessUserMenu",c.enableEasyAccess);m.setProperty("/enableEasyAccessUserMenuSearch",c.enableEasyAccess);m.setProperty("/enableEasyAccessSAPMenuSearch",c.enableEasyAccess);}else{if(c.enableEasyAccessSAPMenu!==undefined){m.setProperty("/enableEasyAccessSAPMenu",c.enableEasyAccessSAPMenu);if(!c.enableEasyAccessSAPMenu){m.setProperty("/enableEasyAccessSAPMenuSearch",false);}else{if(c.enableEasyAccessSAPMenuSearch!==undefined){m.setProperty("/enableEasyAccessSAPMenuSearch",c.enableEasyAccessSAPMenuSearch);}else{m.setProperty("/enableEasyAccessSAPMenuSearch",true);}}}else{m.setProperty("/enableEasyAccessSAPMenu",c.enableEasyAccess);if(c.enableEasyAccessSAPMenuSearch!==undefined){m.setProperty("/enableEasyAccessSAPMenuSearch",c.enableEasyAccessSAPMenuSearch);}else{m.setProperty("/enableEasyAccessSAPMenuSearch",c.enableEasyAccess);}}if(c.enableEasyAccessUserMenu!==undefined){m.setProperty("/enableEasyAccessUserMenu",c.enableEasyAccessUserMenu);if(!c.enableEasyAccessUserMenu){m.setProperty("/enableEasyAccessUserMenuSearch",false);}else{if(c.enableEasyAccessUserMenuSearch!==undefined){m.setProperty("/enableEasyAccessUserMenuSearch",c.enableEasyAccessUserMenuSearch);}else{m.setProperty("/enableEasyAccessUserMenuSearch",true);}}}else{m.setProperty("/enableEasyAccessUserMenu",c.enableEasyAccess);if(c.enableEasyAccessUserMenuSearch!==undefined){m.setProperty("/enableEasyAccessUserMenuSearch",c.enableEasyAccessUserMenuSearch);}else{m.setProperty("/enableEasyAccessUserMenuSearch",c.enableEasyAccess);}}}if(c.enableSearchFiltering!==undefined){m.setProperty("/searchFiltering",c.enableSearchFiltering);}else if(c.enableCatalogSearch!==undefined){m.setProperty("/searchFiltering",c.enableCatalogSearch);}else{m.setProperty("/searchFiltering",true);}if(c.enableTagFiltering!==undefined){m.setProperty("/tagFiltering",c.enableTagFiltering);}else if(c.enableCatalogTagFilter!==undefined){m.setProperty("/tagFiltering",c.enableCatalogTagFilter);}else{m.setProperty("/tagFiltering",true);}if(c.sapMenuServiceUrl!==undefined){m.setProperty("/sapMenuServiceUrl",c.sapMenuServiceUrl);}if(c.userMenuServiceUrl!==undefined){m.setProperty("/userMenuServiceUrl",c.userMenuServiceUrl);}if(c.easyAccessNumbersOfLevels!==undefined){m.setProperty("/easyAccessNumbersOfLevels",c.easyAccessNumbersOfLevels);}var d=c.enableHomePageSettings!==false?this._getCurrentHomePageGroupDisplay():jQuery.Deferred().resolve();d.done(function(s){s=s||c.homePageGroupDisplay;if(s!==undefined){m.setProperty("/homePageGroupDisplay",s);}});m.setProperty("/enableHelp",!!this.oShellConfig.enableHelp);m.setProperty("/disableSortedLockedGroups",!!c.disableSortedLockedGroups);if(R.animationMode){m.setProperty("/animationMode",R.animationMode);}}},initNavContainer:function(c){"use strict";var n=new sap.m.NavContainer({id:"navContainerFlp",defaultTransitionName:'show'});return n;},setInitialConfiguration:function(){"use strict";this.oRouter.initialize();if(!sap.ui.Device.system.phone){C.init(this.oModel,this.oRouter);sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppKeysHandler(C.handleFocusOnMe);var t=r.i18n,s=[];s.push({text:"Alt+H",description:t.getText("hotkeyHomePage")});if(this.oModel.getProperty("/personalization")){s.push({text:"Alt+A",description:t.getText("hotkeyAppFinder")});s.push({text:"Ctrl+Enter",description:t.getText("hotkeySaveEditing")});}sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppShortcuts(C.handleShortcuts,s);}sap.ui.getCore().getEventBus().publish("launchpad","initialConfigurationSet");},_handleShellViewPortSateChange:function(n,e,E){"use strict";var c=E?E.getParameter('to'):'';this.oModel.setProperty('/viewPortState',c);},updateNotificationConfiguration:function(c,e,d){"use strict";var t=this,R=sap.ushell.Container.getRenderer('fiori2').getModelConfiguration(),o=sap.ui.Device,E=R.enableNotificationsUI,n=sap.ushell.Container.getService("Notifications").isEnabled(),N=R.appState!=="embedded"&&R.appState!=="headerless"&&R.appState!=="merged"&&R.appState!=="standalone",o=sap.ui.Device,u=true,p=true,b,f=o.system.desktop||sap.ui.Device.system.tablet||sap.ui.Device.system.combi;if(!this.bCoreResourcesLoaded){return;}if(n===true){b=sap.ushell.Container.getService("Notifications").getUserSettingsFlags();b.done(function(g){u=g.previewNotificationEnabled;t.oModel.setProperty("/userEnableNotificationsPreview",u);t.oModel.setProperty("/configEnableNotificationsPreview",p);if(p&&E&&n&&f&&N){t.oModel.setProperty("/enableNotificationsPreview",u);}});}},_addFlpSettings:function(){"use strict";if(this.bFlpSettingsAdded){return;}var R=sap.ushell.Container.getRenderer("fiori2"),o=r.i18n,t=this;var f;var e={title:o.getText('FlpSettings_entry_title'),entryHelpID:"flpSettingsEntry",value:function(){return jQuery.Deferred().resolve(" ");},content:function(){f=sap.ui.xmlview({viewName:"sap.ushell.components.flp.settings.FlpSettings",viewData:{initialDisplayMode:t.oModel.getProperty("/homePageGroupDisplay")||"scroll"}});return jQuery.Deferred().resolve(f);},onSave:function(){var d=f.getController().onSave();var b=t._getPersonalizer("homePageGroupDisplay").setPersData(d);b.fail(function(c){jQuery.sap.log.error("Failed to save the anchor bar mode in personalization",c,"sap.ushell.components.flp.settings.FlpSettings");});t.oModel.setProperty("/homePageGroupDisplay",d);return jQuery.Deferred().resolve();},onCancel:function(){return jQuery.Deferred().resolve();},icon:"sap-icon://home"};R.addUserPreferencesEntry(e);this.bFlpSettingsAdded=true;},_getCurrentHomePageGroupDisplay:function(){'use strict';var d=this._getPersonalizer('homePageGroupDisplay').getPersData();d.fail(function(e){jQuery.sap.log.error("Failed to load anchor bar state from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});return d;},_getPersonalizer:function(i){"use strict";if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;},exit:function(){"use strict";sap.ui.getCore().getEventBus().unsubscribe('launchpad','shellViewStateChanged',this._handleShellViewPortSateChange,this);this.oDashboardManager.destroy();}});});},"sap/ushell/components/flp/ComponentKeysHandler.js":function(){sap.ui.define(['sap/ushell/ui/launchpad/AccessibilityCustomData'],function(A){"use strict";var c=function(){this.aTileWrapperClasses=['.sapUshellTile','.sapUshellLinkTile'];};c.prototype={keyCodes:jQuery.sap.KeyCodes,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),handleCatalogKey:function(){this.oRouter.navTo("appFinder",{'menu':'catalog'});},handleHomepageKey:function(){this.oRouter.navTo("home");var m=sap.ui.getCore().byId("meAreaHeaderButton");if(m&&m.getSelected()){m.firePress();return;}var n=sap.ui.getCore().byId("NotificationsCountButton");if(n&&n.getSelected()){n.firePress();}},handleDoneEditMode:function(){var i=this.oModel.getProperty('/tileActionModeActive');if(i){var d=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(d){d.firePress();}}},getNumberOfTileInRow:function(p,i){var j=jQuery(i?".sapUshellLinkTile:first":".sapUshellTile:first");if(!j.length){return false;}var a;if(p==="catalog"){a=jQuery("#catalogTiles .sapUshellTileContainerContent").width();}else{a=jQuery("#dashboardGroups").width();}var n=Math.floor(a/j.outerWidth(true));return n;},goToTileContainer:function(k){var i=this.oModel.getProperty('/tileActionModeActive');if(i){C.goToFirstVisibleTileContainer();}else{C.goToLastVisitedTile();}return true;},goToLastVisitedTile:function(j,l){var a=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),t=this.oModel.getProperty("/topGroupInViewPortIndex");var b=j||jQuery(a.get(t));var d=b.find('.sapUshellTile:visible')["first"](),e,f;if(b&&l){e=b.find(".sapUshellTile:visible[tabindex='0']");f=b.find(".sapMGTLineMode:visible[tabindex='0']");}else{e=jQuery(".sapUshellTile:visible[tabindex='0']");f=jQuery(".sapMGTLineMode:visible[tabindex='0']");}if(!d.length&&!e.length&&!f.length){return false;}if(e.length){this.setTileFocus(e);return true;}if(f.length){this.setTileFocus(f);return true;}this.setTileFocus(d);return true;},goToFirstVisibleTileContainer:function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),t=this.oModel.getProperty("/topGroupInViewPortIndex"),a=jQuery(j.get(t));if(!a[0]){return false;}this.setTileContainerSelectiveFocus(a);return true;},goToFirstTileOfSiblingGroup:function(s,e){e.preventDefault();var a=jQuery(document.activeElement).closest(".sapUshellDashboardGroupsContainerItem");if(!a.length)return;var t='first',n=a[s+"All"](".sapUshellDashboardGroupsContainerItem:has(.sapUshellTile:visible):not(.sapUshellCloneArea)");if(!n.length){n=a;t=(s==="next")?'last':'first';}else{n=n.first();}var j=n.find(".sapUshellTile:visible")[t]();this.moveScrollDashboard(j);return false;},animateTileMoveInGroup:function(g,f,s){var d=jQuery.Deferred();sap.ushell.Layout.initGroupDragMode(g);var t=g.getTiles().slice();var a=t.indexOf(f);var b=t.indexOf(s);t.splice(b,1,f);t.splice(a,1,s);var e=sap.ushell.Layout.organizeGroup(t);setTimeout(function(){sap.ushell.Layout.renderLayoutGroup(g,e);},0);setTimeout(function(){sap.ushell.Layout.endDragMode();d.resolve();},300);return d.promise();},_getTileMode:function(t){return t.getMode?t.getMode():'ContentMode';},_moveTileInGroup:function(g,f,s,d){var a=this._getTileMode(f),b=this._getTileMode(s),e=sap.ui.getCore().getEventBus();if(a===b){e.publish("launchpad","movetile",this._getTileMoveInfo({group:g,dstGroup:g,firstTile:f,secondTile:s}));}else{e.publish("launchpad","convertTile",this._getTileConvertInfo({group:g,firstTile:f,secondTile:s,direction:d}));}},_getDestinationTileIndex:function(m){var g=m.group.getBindingContext().getObject(),t,a=m.dstGroup?this._getGroupTiles(m.dstGroup,m.secondTile):this._getGroupTiles(m.group,m.secondTile),f=m.firstTile.getMode?m.firstTile.getMode():'ContentMode',s=m.secondTile.getMode?m.secondTile.getMode():'ContentMode',b=f!==s;if(b||m.dstGroup!==m.group){if(m.direction&&(m.direction==="left"||m.direction==="up")){t=a.length;}else if(m.direction){t=0;}}else{if(s==='LineMode'){t=m.secondTile.getBindingContext()?g.links.indexOf(m.secondTile.getBindingContext().getObject()):0;}else{t=m.secondTile.getBindingContext()?g.tiles.indexOf(m.secondTile.getBindingContext().getObject()):0;}}return t;},moveTileInGroup:function(g,f,s,d){var a=this._getTileMode(f),b=this._getTileMode(s);document.activeElement.blur();if(sap.ushell.Layout.isAnimationsEnabled()&&(a===b)){this.animateTileMoveInGroup(g,f,s,d).then(function(){this._moveTileInGroup(g,f,s,d);}.bind(this));}else{this._moveTileInGroup(g,f,s,d);}},animateMoveTileToDifferentGroup:function(s,d,a,b){var e=jQuery.Deferred();sap.ushell.Layout.initGroupDragMode(s);sap.ushell.Layout.initGroupDragMode(d);var f=s.getTiles().slice();var g=d.getTiles().slice();var t=f.indexOf(a);if(b==="left"||b==="up"){g.push(f.splice(t,1)[0]);}if(b==="right"||b==="down"){g.unshift(f.splice(t,1)[0]);}var h=sap.ushell.Layout.organizeGroup(f);var i=sap.ushell.Layout.organizeGroup(g);var j=sap.ushell.Layout.getTilePositionInMatrix(a,i);var k=d.getDomRef().querySelector(".sapUshellInner").getBoundingClientRect();var l=sap.ushell.Layout.calcTranslate(j.row,j.col);var m=k.left+l.x;var n=k.top+l.y;var o=jQuery("#dashboardGroups");var D=o.get(0).getBoundingClientRect();var p=a.getDomRef().getBoundingClientRect();var q=(-D.top)+p.top;var r=(-D.left)+p.left;var u=(-D.top)+n;var v=(-D.left)+m;o.css("position","relative");var w=a.$().clone().removeAttr("id data-sap-ui").css({"transform":"translate3d("+r+"px, "+q+"px, 0px)","list-style-type":"none","transition":"transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)",position:"absolute",left:0,top:0});o.append(w);a.$().css("visibility","hidden");w.height();w.css("transform","translate3d("+v+"px, "+u+"px, 0px)");setTimeout(function(){sap.ushell.Layout.renderLayoutGroup(s,h);sap.ushell.Layout.renderLayoutGroup(d,i);});setTimeout(function(){sap.ushell.Layout.endDragMode();w.remove();o.removeAttr("style");e.resolve();},300);return e.promise();},_moveTileToDifferentGroup:function(s,d,a,n,b){var t=this._getTileMoveInfo({group:s,dstGroup:d,firstTile:a,secondTile:n,direction:b}),e=this._getTileConvertInfo({group:s,dstGroup:d,firstTile:a,secondTile:n,direction:b}),E=sap.ui.getCore().getEventBus(),f=a.getMode?a.getMode():"ContentMode",g=n.getMode?n.getMode():'ContentMode';if(f===g){E.publish("launchpad","movetile",t);}else{E.publish("launchpad","convertTile",e);}},moveTileToDifferentGroup:function(s,d,a,n,b){var f=this._getTileMode(a),e=this._getTileMode(n);document.activeElement.blur();if(sap.ushell.Layout.isAnimationsEnabled()&&(e===f)){this.animateMoveTileToDifferentGroup(s,d,a,n,b).then(function(){this._moveTileToDifferentGroup(s,d,a,n,b);}.bind(this));}else{this._moveTileToDifferentGroup(s,d,a,n,b);}},moveTile:function(d){var j=jQuery(".sapUshellDashboardView"),a=sap.ui.getCore().byId(j.attr("id")),p=sap.ushell.Container.getService("LaunchPage"),t,i;a.getModel().setProperty('/isInDrag',true);setTimeout(function(){a.getModel().setProperty('/isInDrag',false);},300);if(this.oModel.getProperty("/personalization")){var b=this.getGroupAndTilesInfo();if(!b||b.group.getProperty('isGroupLocked')){return;}t=b.curTile.getBindingContext().getObject().object;i=p.isLinkPersonalizationSupported(t);var m=true,I,n=this.getNextTile(d,b,I,m,!i);if(!n){return;}else{var e=n.getParent();}if(e===b.group){this.moveTileInGroup(b.group,b.curTile,n,d);}else{this.moveTileToDifferentGroup(b.group,e,b.curTile,n,d);}}},_getTileMoveInfo:function(m){var f=m.firstTile.getMode?m.firstTile.getMode():'ContentMode',s=this._getDestinationTileIndex(m),j=jQuery(".sapUshellDashboardView"),d=sap.ui.getCore().byId(j.attr("id")),a=d.getController(),t=a._getTileUuid(m.firstTile),g=m.dstGroup?this._getGroupTiles(m.dstGroup,m.secondTile):this._getGroupTiles(m.group,m.secondTile),G=m.dstGroup?m.dstGroup:m.group,T;T={sTileId:t,sToItems:f==='LineMode'?'links':'tiles',sFromItems:f==='LineMode'?'links':'tiles',sTileType:f==='LineMode'?'link':'tile',toGroupId:G.getGroupId?G.getGroupId():G.groupId,toIndex:s,callBack:function(o){setTimeout(function(){this.setTileFocus(jQuery(o.getDomRef()));}.bind(this),100);}.bind(this)};return T;},_getGroupTiles:function(g,t){var a=this._getTileMode(t);return a==='LineMode'?g.getLinks():g.getTiles();},_getTileConvertInfo:function(m){var d=m.dstGroup?m.dstGroup:m.group,s=this._getDestinationTileIndex(m),t={toGroupId:d.getGroupId?d.getGroupId():d.groupId,toIndex:s,tile:m.firstTile,srcGroupId:m.group.getGroupId?m.group.getGroupId():m.group.groupId,longDrop:false,callBack:function(T){setTimeout(function(){this.setTileFocus(jQuery(T.getDomRef()));}.bind(this),100);}.bind(this)};return t;},_findClosestTile:function(d,t,a){var j;if(a.getMode&&a.getMode()==="LineMode"&&(j=a.$().find(".sapMGTLineStyleHelper"))){if(j.length===1){var b=j.get(0).getBoundingClientRect();}else if(d==="down"){var b=j.get(j.length-1).getBoundingClientRect();}else if(d==="up"){var b=j.get(0).getBoundingClientRect();}}else{var b=(a instanceof HTMLElement)?a.getBoundingClientRect():a.getDomRef().getBoundingClientRect();}var e=b.right-((b.right-b.left)/2);if(a.getMode&&a.getMode()==="LineMode"){var m=a.$().height()>parseInt(a.$().css("line-height"),10);if(m){e=(d==="down")?b.right:b.left;}}var f=t.indexOf(a);var s=d==="down"?1:-1;var n,g,r;var h=Infinity;for(var i=f+s;!n;i+=s){var k=t[i];if(!k){break;}var l;if(k.getMode&&k.getMode()==="LineMode"&&(l=k.$().find(".sapMGTLineStyleHelper"))){if(l.length===1){var o=l.get(0).getBoundingClientRect();}else if(d==="down"){for(var i=0;i<l.length;i++){if(b.bottom<l.get(i).getBoundingClientRect().bottom){var o=l.get(i).getBoundingClientRect();break;}}}else if(d==="up"){for(var i=l.length-1;i>=0;i--){if(b.top>l.get(i).getBoundingClientRect().top){var o=l.get(i).getBoundingClientRect();break;}}}}else{var o=(k instanceof HTMLElement)?k.getBoundingClientRect():k.getDomRef().getBoundingClientRect();}if(d==="down"&&b.bottom>=o.bottom){continue;}if(d==="up"&&b.top<=o.top){continue;}if(g&&r!=o.top){n=g;break;}r=o.top;var p=Math.abs(o.left-e);var q=Math.abs(o.right-e);var u=p>q?q:p;if(h>u){h=u;g=k;r=o.top;}else{n=g;}}return n||g;},getNextUpDownTileWithScreenPosition:function(d,i,m,p){var g=!(p&&m)?i.tiles.concat(i.links):i.tiles;if(!g.length){g.push(i.group.oPlusTile)}var n=this.getNextGroup(d,i);if(n){var a=!(p&&m)?n.getTiles().concat(n.getLinks()):n.getTiles();if(!a.length){a.push(n.oPlusTile);}}a=a?a:[];var b=d==="down"?g.concat(a):a.concat(g);return this._findClosestTile(d,b,i.curTile);},getNextUpDownTileWithLayout:function(d,i,m){var n,a;var b=d==="down"?1:-1;var e=!i.tiles.length&&!i.links.length;var I=i.group.getIsGroupLocked();var f=jQuery(i.curTile.getDomRef()).hasClass('sapUshellPlusTile');var l=i.group.getLinks();var g=sap.ushell.Layout.organizeGroup(i.curTile.isLink?i.links:i.tiles,i.curTile.isLink);var t=sap.ushell.Layout.getTilePositionInMatrix(i.curTile,g);if(!t&&!e&&!f){return;}if(!g[t.row+b]){if(!i.curTile.isLink&&l.length&&d==='down'){if(!m){return l[0];}}if(i.curTile.isLink&&i.tiles.length&&d==='up'){return i.tiles[i.tiles.length-1];}t=e||f?{row:0,col:0}:t;a=this.getNextGroup(d,i);if(!a){return;}e=!a.getTiles().length&&!a.getLinks().length;if(!e){var F=this._getAggregationToFocusInNextGroup(a,d);var N=this._isNextTileLink(F);g=sap.ushell.Layout.organizeGroup(F,N);b=0;t.row=d==="down"?0:g.length-1;}}if(e&&I){return undefined;}if(e){return a.oPlusTile;}if(typeof g[t.row+b][t.col]==="object"&&!e){n=g[t.row+b][t.col];}else{n=this.getNextUpDownTile(g,t.row+b,t.col,d);}return n;},_isNextTileLink:function(t){if(t&&t.length){var j=jQuery(t[0].getDomRef());return j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");}return false;},_getAggregationToFocusInNextGroup:function(n,d,m,p){var g=function(){if(n.getTiles().length){return n.getShowPlaceholder()?[].concat(n.getTiles(),n.oPlusTile):n.getTiles();}};var a=function(){if(n.getLinks().length){return!(p&&m)?n.getLinks():undefined;}};var i=sap.ui.getCore().getConfiguration().getRTL();if(i){if(d==="down"||d==="left"){return g()||a();}else if(d==="up"||d==="right"){return a()||g();}}else{if(d==="down"||d==="right"){return g()||a();}else if(d==="up"||d==="left"){return a()||g();}}},isLastLineFull:function(l){var m=this.getNumberOfTileInRow(),a=l[l.length-1].filter(Boolean);return a.length===m;},getNextUpDownTile:function(l,r,a,d){var n=r,b=l.length,e,f=d==="up"?-1:1;while((n>=0&&n<b)&&!e){if(typeof l[n][a]!=="object"){e=l[n][a];}n=n+f;}if(e){return;}n=r;while((typeof l[n][a]!=="object")&&a>=0){a--;}return l[n][a];},getNextTile:function(d,i,I,m,p){var n,a=sap.ui.getCore().getConfiguration().getRTL()?-1:1,b=d==="right"?1:-1;if(i.pageName==='catalog'){n=this.getNextTileInCatalog(i,d);}else{if(d==="left"||d==="right"){var e=i.curTileIndex+(a*b);var f=i.curTile.isLink?i.links:i.tiles;if(f[e]&&!(m&&f[e].getDomRef().className.indexOf("sapUshellPlusTile")>0)){n=f.length?f[e]:undefined;}if(n){return n;}if(a==1){if(d==="right"&&!i.curTile.isLink&&i.links.length&&!p){return i.links[0];}if(d==="left"&&i.curTile.isLink&&i.tiles.length){return i.group.getShowPlaceholder()?i.group.oPlusTile:i.tiles[i.tiles.length-1];}}else{if(d==="left"&&!i.curTile.isLink&&i.links.length&&!p){return i.links[0];}if(d==="right"&&i.curTile.isLink&&i.tiles.length){return i.group.getShowPlaceholder()?i.group.oPlusTile:i.tiles[i.tiles.length-1];}}var g=this.getNextGroup(d,i);if(!g){return;}else{var h=this._getAggregationToFocusInNextGroup(g,d,m,p);if(h&&h.length){var l=h.length-1;if(d==="right"){n=h[a===1?0:l];}else{n=h[a===1?l:0];}}else{n=g.oPlusTile;}}}if(d==="down"||d==="up"){n=this.getNextUpDownTileWithScreenPosition(d,i,m,p);}}return n;},getNextTileInCatalog:function(a,d){var n,b,e,s,t,l,w,f,o,g=sap.ui.getCore().getConfiguration().getRTL()?-1:1,h=!a.tiles.length,j=d==="right"?1:-1;if(d=='right'||d=='left'){n=!h?a.tiles[a.curTileIndex+(g*j)]:undefined;return n;}if(a.curTileIndex==='0'&&d==='up'){return undefined;}b=this.whichTileRow(a.curTileIndex,a);o=parseFloat(a.curTile.getDomRef().offsetLeft);if(d=="down"){e=a.tiles.slice(a.curTileIndex+1,a.curTileIndex+(a.sizeOfLine*2));}else{s=(s>0)?s:0;e=a.tiles.slice(s,a.curTileIndex).reverse();}for(var i=0,k=e.length;i<k;i++){t=e[i].getDomRef();l=parseFloat(t.offsetLeft);w=parseFloat(t.offsetWidth);f=l+w;if(l<=o&&f>=o){n=e[i];return n;}}if(this.nextRowIsShorter(d,b,a)){n=this.getNextTileInShorterRow(d,b,a);return n;}},getNextTileInShorterRow:function(d,a,i){var l=d==='down'?this.getLastTileIdInRow(i,a+1):this.getLastTileIdInRow(i,a-1);return i.tiles[l];},getLastTileIdInRow:function(a,l){var b=0;for(var i=0;i<a.rowsData.length;i++){b+=a.rowsData[i];if(i===l){break;}}return b-1;},nextRowIsShorter:function(d,a,i){if(d==='down'&&a!=i.rowsData.length-1){return i.rowsData[a]>i.rowsData[a+1];}if(d==='up'&&a!=0){return i.rowsData[a]>i.rowsData[a-1];}else{return false;}},getNextGroup:function(d,i){var n,g=i.group.getParent().getGroups(),a=sap.ui.getCore().getConfiguration().getRTL(),b=g.indexOf(i.group);if(d==="right"||d==="left"){if(a){d=(d==="right")?"up":"down";}else{d=(d==="right")?"down":"up";}}if(d==="down"||d==="up"){var e=d==="up"?-1:1;n=g[b+e];if(!n){return;}while(!n.getVisible()&&(b>=0&&b<g.length)){b=b+e;n=g[b];if(!n){return;}}}if(!n.getVisible()){return;}return n;},getGroupAndTilesInfo:function(j,p){if(!j){j=this.getFocusOnTile(jQuery(document.activeElement));}if(!j.length){return;}if(!j.hasClass("sapUshellTile")&&!j.hasClass("sapUshellLinkTile")){j=j.closest(".sapUshellTile, .sapUshellLinkTile");}var a=sap.ui.getCore().byId(j.attr('id'));var b=j.closest(".sapUshellTileContainer");var g=sap.ui.getCore().byId(b.attr('id'));var r;var t;var l;if(!g.getTiles){a=g;g=g.getParent();}a.isLink=j.hasClass('sapUshellLinkTile')||j.hasClass('sapMGTLineMode');if(g.getTiles){t=g.getTiles();l=g.getLinks();if(g.getShowPlaceholder()&&!a.isLink){t.push(g.oPlusTile);}}var s=this.getNumberOfTileInRow(p,a.isLink);return{pageName:p,curTile:a,curTileIndex:a.isLink?l.indexOf(a):t.indexOf(a),tiles:t,links:l,sizeOfLine:s,group:g,rowsData:r};},whichTileRow:function(a,b){var t=0,i;for(i=0;i<b.rowsData.length;i++){t+=b.rowsData[i];if(a<t){return i;}}},goToSiblingElementInTileContainer:function(d,j,p){var a=j.closest('.sapUshellTileContainer'),b,e,f;if(b=this.getFocusTileContainerBeforeContent(j)){if(d==='up'||d==="left"){this._goToNextTileContainer(b,d);}else{f=a.find('.sapUshellTileContainerHeader:first');this.setTabIndexOnTileContainerHeader(f);f.focus();}return;}if(b=this.getFocusTileContainerHeader(j)){if(d==='up'){this.setTabIndexOnTileContainerHeader(f);if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,d);}}else if(d==="down"){e=a.find('.sapUshellTile:first');if(e.length){var t=jQuery(e);this.moveScrollDashboard(t);}else{this._goToNextTileContainer(b,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,"left");}}else{f=j.closest(".sapUshellTileContainerHeader");f.focus();}}else if(d==="right"){var g=j.hasClass("sapMInputBaseInner");if(!g){e=a.find('.sapUshellTile:first');if(e.length){this.setTileFocus(e);}else{this._goToNextTileContainer(b,"down");}}}return;}if(b=this.getFocusOnTile(j)){this.goFromFocusedTile(d,b,p,true);return;}if(b=this.getFocusOnTileContainerAfterContent(j)){if(d==='up'||d==="left"){this._goToFirstTileInTileContainer(b);}else{this._goToNextTileContainer(b,d);}}},_goToNextTileContainer:function(j,d){var a=j.closest('.sapUshellTileContainer'),b=jQuery('.sapUshellTileContainer:visible'),n=(d==='down')?1:-1,e,f;e=jQuery(b[b.index(a)+n]);if(e){f=e.find('.sapUshellTileContainerHeader');if(d==='down'){if(!this._goToTileContainerBeforeContent(e)){this.setTabIndexOnTileContainerHeader(f);this.setTileContainerSelectiveFocus(e);}}else{if(this._goToTileContainerAfterContent(e)){return;}if(d==='up'){if(!this._goToFirstTileInTileContainer(e)){this.setTabIndexOnTileContainerHeader(f);f.focus();}}else if(d==='left'){if(!this._goToLastTileInTileContainer(e)){this.setTabIndexOnTileContainerHeader(f);f.focus();}}}}},_goToLastTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTile:last'),d=a.find('.sapUshellLinkTile:last');if(!d.length&&!b.length){return false;}this.setTileFocus(d.length?d:b);return true;},_goToFirstTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=jQuery(a.find('.sapUshellTile').get(0));if(b.length){this.setTileFocus(b);return true;}else{return false;}},_goToTileContainerBeforeContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerBeforeContent button:visible');if(b.length){b.focus();return true;}else{return false;}},_goToTileContainerAfterContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerAfterContent button:visible');if(b.length){b.focus();return true;}else{return false;}},goFromFocusedTile:function(d,j,p,i){var a=this.getGroupAndTilesInfo(j,p),n,b,e,f,g,I;if(!a){return;}n=this.getNextTile(d,a,i);if(i){b=jQuery(j).closest('.sapUshellTileContainer');if(!n){if(d==='down'||d==='right'){g=jQuery(b).find('.sapUshellTileContainerAfterContent button:visible');g.focus();return;}if(d==='up'){this.setTabIndexOnTileContainerHeader(b.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(b);return;}if(d==='left'){f=b.find('.sapUshellTileContainerHeader');f.focus();}}else{e=jQuery(n.getDomRef()).closest('.sapUshellTileContainer');I=b.length&&e.length&&(b.attr('id')===e.attr('id'));if(I){var t=jQuery(n.getDomRef());this.moveScrollDashboard(t);}else{if(d==='down'||d==='right'){if(!this._goToTileContainerAfterContent(b)){this.setTabIndexOnTileContainerHeader(e.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(e);}}else if(d==='up'||'left'){f=b.find('.sapUshellTileContainerHeader');this.setTabIndexOnTileContainerHeader(f);f.focus();}}}}else if(n){var t=jQuery(n.getDomRef());this.moveScrollDashboard(t);}},deleteTile:function(j){var t=j.attr("id");if(!t){return;}var T=sap.ui.getCore().byId(t);var a=this.getGroupAndTilesInfo(j);var n=this.getNextTile("right",a);if(!n||(n&&n.getParent()!=a.group)){n=this.getNextTile("left",a);}if(!n||(n&&n.getParent()!=a.group)){n=a.group.oPlusTile;}if(n){if(!a.curTile.isLink){this.setTileFocus(jQuery(n.getDomRef()));}setTimeout(function(g,b){var d=g.getTiles();if(!d.length){if(a.links.length&&a.curTile.isLink){n=this.getNextTile("right",a);if(!n||(n&&n.getParent()!=a.group)){n=a.curTile;}this.setTileFocus(jQuery(n.getDomRef()));return;}if(a.group.getProperty('defaultGroup')){var f=this.getNextGroup("right",a);n=f.getTiles()[0]||f.oPlusTile;this.setTileFocus(jQuery(n.getDomRef()));}this.setTileFocus(jQuery(g.oPlusTile.getDomRef()));return;}var n;for(var i=0;i<d.length;i++){if(d[i].getProperty('uuid')==b){n=d[i];break;}}if(n){this.setTileFocus(jQuery(n.getDomRef()));}}.bind(this,a.group,n.getProperty('uuid')),100);}var e=sap.ui.getCore().getEventBus();e.publish("launchpad","deleteTile",{tileId:T.getUuid()});},setTabIndexOnTileContainerHeader:function(j){jQuery(".sapUshellTileContainerHeader").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var a=j.find('.sapUshellContainerTitle:first'),b=j.find('.sapUshellContainerHeaderActions:first');j.attr('tabindex',0);a.attr('tabindex',0);b.find('button').attr('tabindex',0);}},setTileContainerSelectiveFocus:function(j){var a=j.find('.sapUshellTileContainerBeforeContent button'),b=j.find('.sapUshellTileContainerHeader:first'),B=a.length&&a.is(":visible");if(B){a.focus();}else if(b.length){this.setTabIndexOnTileContainerHeader(b);b.focus();}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){var n=sap.ui.getCore().byId('navContainerFlp'),o=n.getCurrentPage(),a=n?n.getCurrentPage().getViewName():undefined,b;var i=!!((a==="sap.ushell.components.flp.launchpad.appfinder.AppFinder")&&(o.getController().getCurrentMenuName()==="catalog"));b=j.find('[tabindex]');if(i){var h=C;h.setFocusOnCatalogTile(b.eq(0));}}jQuery(".sapUshellTile").attr("tabindex",-1);jQuery(".sapMGTLineMode").attr("tabindex",-1);jQuery(".sapUshellLinkTile").attr("tabindex",-1);j.attr("tabindex",0);var d=jQuery("#Fiori2LoadingDialog")[0];if(!d||d.style.visibility==="hidden"){if(j.prop("tagName")==="DIV"&&jQuery(j).hasClass("sapUshellLinkTile")&&j.getMode==undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();var t;if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var e=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(e){e.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=jQuery(".sapUshellTile[tabindex=0]"),a,v;if(p.length){jQuery(".sapUshellTileContainerContent").find('[tabindex*=0]').attr("tabindex",-1);a=p.find('[tabindex], a').andSelf().filter('[tabindex], a');a.attr("tabindex",-1);}if(!j){v=jQuery(".sapUshellTile:visible,.sapUshellAppBox:visible");if(v.length){j=jQuery(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(j){var a=j.closest(".sapUshellTileContainer")[0].id,y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(a).getBoundingClientRect().top;y+=49;jQuery('#sapUshellDashboardPage section').stop().animate({scrollTop:y},0,function(){this.setTileFocus(j);}.bind(this));},moveGroupFromDashboard:function(d,j){var a,t=jQuery(".sapUshellDashboardGroupsContainerItem"),i,b;a=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(a);b=d=="up"||d=="left"?i-1:i+1;this.moveGroup(i,b);},moveGroup:function(f,t){var g=jQuery(".sapUshellDashboardGroupsContainerItem"),n=jQuery(".sapUshellDisableDragAndDrop").length;if(t<0||t>=g.length||t<n){return;}var a=sap.ui.getCore();var d={fromIndex:f,toIndex:t};var b=a.getEventBus();b.publish("launchpad","moveGroup",d);setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[t];this.setTabIndexOnTileContainerHeader(jQuery(e));jQuery(e).focus();}.bind(this),100);},getFocusGroupFromDashboard:function(j){var i=j.closest('.sapUshellTileContainerHeader').length&&j[0].tagName==='H2';return i?j:false;},getFocusTileContainerBeforeContent:function(j){var a=j.closest('.sapUshellTileContainerBeforeContent');return a.length?a:false;},getFocusTileContainerHeader:function(j){var a=j.closest('.sapUshellTileContainerHeader');return a.length?a:false;},getFocusOnTileContainerAfterContent:function(j){var a=j.closest('.sapUshellTileContainerAfterContent');return a.length?a:false;},getFocusOnTile:function(j){var a;jQuery.each(this.aTileWrapperClasses,function(i,t){var b=j.closest(t);a=b.length?b:false;return!(a);});return a;},renameGroup:function(){var j=jQuery(document.activeElement);var a=this.getFocusGroupFromDashboard(j);if(a){a.click();}},arrowsButtonsHandler:function(d,e){var j=jQuery(document.activeElement),i=this.oModel.getProperty('/tileActionModeActive');if(j.hasClass("sapUshellAnchorItem")){e.preventDefault();this.handleAnchorNavigationItemsArrowKeys(d);}else{if(i){if(!j.hasClass('sapMInputBaseInner')){e.preventDefault();this.goToSiblingElementInTileContainer(d,j);}}else{e.preventDefault();this.goFromFocusedTile(d,j);}}},_preventBrowserDefaultScrollingBehavior:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},handleAnchorNavigationItemsArrowKeys:function(d){var a=jQuery(".sapUshellAnchorItem:visible"),j=jQuery(document.activeElement),i=a.index(j),n=j,I=sap.ui.getCore().getConfiguration().getRTL();if(I){d=d==='left'?'right':'left';}if(d==="left"||d==="up"){if(i>0){n=a.get(i-1);}}else if(d==="right"||d==="down"){if(i<a.length-1){n=a.get(i+1);}}this.setAnchorItemFocus(jQuery(n));},setAnchorItemFocus:function(j){jQuery(".sapUshellAnchorItem").attr("tabindex",-1);j.attr("tabindex",0);j.focus();},appFinderHomeEndButtonsHandler:function(d,k){k.preventDefault();var v=jQuery(".sapUshellTile:visible,.sapUshellAppBox:visible"),j=jQuery(document.activeElement),a;if(v.length){if(d==="home"){a=jQuery(v.get(0));}if(d==="end"){a=jQuery(v.get(v.length-1));}}if(a){this.appFinderFocusAppBox(j,a);}},appFinderPageUpDownButtonsHandler:function(d,k){k.preventDefault();var j=jQuery(document.activeElement);var a=jQuery(j.parents()[2]);var n=this.getNextCatalog(d,a);if(n){var b=n.find("li"),f=jQuery(b.get(0));}if(f.length){this.appFinderFocusAppBox(j,f);}else if(d==="down"){var e=a.find("li"),l=jQuery(e.get(e.length-1));this.appFinderFocusAppBox(j,l);}},homeEndButtonsHandler:function(s,e){var j=jQuery(document.activeElement),t;if(j.hasClass("sapUshellAnchorItem")){e.preventDefault();this.setAnchorItemFocus(jQuery(".sapUshellAnchorItem:visible:"+s));return;}if(j.hasClass("sapUshellTile")&&j.closest("#dashboardGroups").length){e.preventDefault();if(e.ctrlKey===true){t=jQuery(".sapUshellTile:visible:not('.sapUshellPlusTile')")[s]();}else{t=j.parent().find(".sapUshellTile:visible:not('.sapUshellPlusTile')")[s]();}this.setTileFocus(t);return;}},deleteButtonHandler:function(){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var j,a=jQuery(document.activeElement);if(j=this.getFocusOnTile(a)){if(!j.hasClass('sapUshellLockedTile')&&!j.hasClass('sapUshellPlusTile')){this.deleteTile(j);}return;}}},ctrlPlusArrowKeyButtonsHandler:function(d){var j,a=jQuery(document.activeElement);if((j=this.getFocusOnTile(a))){this.moveTile(d);return;}if(j=this.getFocusTileContainerHeader(a)){var b=j.closest('.sapUshellTileContainerContent');if(b.hasClass('sapUshellTileContainerDefault')||b.hasClass('sapUshellTileContainerLocked')){return;}else{this.moveGroupFromDashboard(d,j);}}},spaceButtonHandler:function(e){var j=jQuery(document.activeElement);if(j.hasClass("sapUshellTile")){e.preventDefault();var g=j.find('[role="button"]');if(g){var a=g.attr("id");var b=sap.ui.getCore().byId(a),i=this.oModel.getProperty('/tileActionModeActive');if(b&&!i){b.firePress();return false;}}j.click();return false;}},goToFirstAnchorNavigationItem:function(){this.setAnchorItemFocus(jQuery(".sapUshellAnchorItem:visible:first"));},goToSelectedAnchorNavigationItem:function(){this.setAnchorItemFocus(jQuery(".sapUshellAnchorItemSelected"));return jQuery(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(k,f){var h=C,n=sap.ui.getCore().byId('navContainerFlp'),o=n.getCurrentPage(),a=o.getViewName();if(a=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent"){if(f){if(k.shiftKey){var b=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(b.length){b.focus();}else{h.goToTileContainer(k);}}else{if(!h.goToSelectedAnchorNavigationItem()){C.goToLastVisitedTile()}}}else{h.mainKeydownHandler(k);h.dashboardKeydownHandler(k);}}if(a=="sap.ushell.components.flp.launchpad.appfinder.AppFinder"){if(f){if(!k.shiftKey){var d=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(d&&d.getVisible()){d.focus();}else{h.appFinderFocusMenuButtons(k);}}else{h.setFocusOnCatalogTile();}}else{h.mainKeydownHandler(k);h.appFinderKeydownHandler(k);}}},groupHeaderNavigation:function(){var j=jQuery(document.activeElement),a;if(j.hasClass("sapUshellTileContainerHeader")){a=j.find(".sapUshellContainerTitle");a.focus();}else if(a=j.closest(".sapUshellTileContainerHeader")){a.focus();}},handleShortcuts:function(e){var h=C;if(e.altKey){switch(String.fromCharCode(e.keyCode)){case'A':if(h.oModel.getProperty("/personalization")){h.handleCatalogKey();}break;case'H':h.handleHomepageKey();break;}}if(e.ctrlKey&&e.keyCode===13){h.handleDoneEditMode();}},mainKeydownHandler:function(e){e=e||window.event;switch(e.keyCode){case this.keyCodes.SPACE:this.spaceButtonHandler(e);break;case this.keyCodes.HOME:this.homeEndButtonsHandler("first",e);break;case this.keyCodes.END:this.homeEndButtonsHandler("last",e);break;}},appFinderKeydownHandler:function(k){var h=C;if(k.srcElement.id!="appFinderSearch-I"){switch(k.keyCode){case h.keyCodes.ARROW_UP:h.appFinderUpDownHandler("up",k);break;case h.keyCodes.ARROW_DOWN:h.appFinderUpDownHandler("down",k);break;case h.keyCodes.ARROW_RIGHT:h.appFinderRightLeftHandler("right",k);break;case h.keyCodes.ARROW_LEFT:h.appFinderRightLeftHandler("left",k);break;case h.keyCodes.PAGE_UP:h.appFinderPageUpDownButtonsHandler('up',k);break;case h.keyCodes.PAGE_DOWN:h.appFinderPageUpDownButtonsHandler('down',k);break;case h.keyCodes.HOME:h.appFinderHomeEndButtonsHandler("home",k);break;case h.keyCodes.END:h.appFinderHomeEndButtonsHandler("end",k);break;}}},appFinderFocusAppBox:function(j,a){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");a.find(".sapUshellPinButton").attr("tabindex","0");a.attr("tabindex","0").focus();},appFinderFocusMenuButtons:function(k){var b=jQuery("#catalog, #userMenu, #sapMenu").filter("[tabindex=0]");if(b.length){b.eq(0).focus();k.preventDefault();return true;}else{return false;}},appFinderUpDownHandler:function(d,k){k.preventDefault();var j=jQuery(document.activeElement);if(!j.is(".sapUshellAppBox, .sapUshellTile")){return;}var a=jQuery(j.parents()[2]);var b=a.find("li.sapUshellAppBox, li.sapUshellTile"),e=jQuery.makeArray(b),n=[];var f=this.getNextCatalog(d,a);if(f){var g=f.find("li.sapUshellAppBox, li.sapUshellTile"),n=jQuery.makeArray(g);}var h=d==="down"?e.concat(n):n.concat(e);var i=jQuery(this._findClosestTile(d,h,j.get(0)));this.appFinderFocusAppBox(j,i);},getNextCatalog:function(d,a){var n;if(d==="down"){n=a.next();}if(d==="up"){n=a.prev();}if(!n){return;}return n;},appFinderRightLeftHandler:function(d,k){k.preventDefault();var j=jQuery(document.activeElement);if(!j.is(".sapUshellAppBox, .sapUshellTile")){return;}var a=jQuery(j.parents()[2]);var b=a.find("li.sapUshellAppBox, li.sapUshellTile");var i=b.index(j);var e=d==="right"?i+1:i-1,f;if(e>=0&&e<b.length){f=jQuery(b[e]);}else if(e<0){var n=this.getNextCatalog("up",a);if(n){var g=n.find("li.sapUshellAppBox, li.sapUshellTile");if(g.length){f=jQuery(g.get(g.length-1));}else{return;}}}else if(e===b.length){var n=this.getNextCatalog("down",a);if(n){var g=n.find("li");if(g.length){f=jQuery(g.get(0));}else{return;}}}this.appFinderFocusAppBox(j,f);},dashboardKeydownHandler:function(k){var h=C;switch(k.keyCode){case h.keyCodes.F2:h.renameGroup();break;case h.keyCodes.F7:h.groupHeaderNavigation();break;case h.keyCodes.DELETE:h.deleteButtonHandler();break;case h.keyCodes.BACKSPACE:h.deleteButtonHandler();break;case h.keyCodes.ARROW_UP:if(k.ctrlKey===true){h._preventBrowserDefaultScrollingBehavior(k);h.ctrlPlusArrowKeyButtonsHandler("up");}else{h.arrowsButtonsHandler("up",k);}break;case h.keyCodes.ARROW_DOWN:if(k.ctrlKey===true){h._preventBrowserDefaultScrollingBehavior(k);h.ctrlPlusArrowKeyButtonsHandler("down");}else{h.arrowsButtonsHandler("down",k);}break;case h.keyCodes.ARROW_RIGHT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("right");}else{h.arrowsButtonsHandler("right",k);}break;case h.keyCodes.ARROW_LEFT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("left");}else{h.arrowsButtonsHandler("left",k);}break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroup("prev",k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroup("next",k);break;}return true;},init:function(m,r){this.oModel=m;this.oRouter=r;}};var C=new c();return C},true);},"sap/ushell/components/flp/CustomRouter.js":function(){sap.ui.define(function(){"use strict";var C=sap.ui.core.routing.Router.extend("sap.ushell.components.flp.CustomRouter",{constructor:function(){sap.ui.core.routing.Router.apply(this,arguments);this.attachRouteMatched(this._onHandleRouteMatched,this);},navTo:function(){if(!this._bIsInitialized){this.initialize();}sap.ui.core.routing.Router.prototype.navTo.apply(this,arguments);},destroy:function(){sap.ui.core.routing.Router.prototype.destroy.apply(this,arguments);},_onHandleRouteMatched:function(e){var p=e.getParameters(),t=sap.ui.getCore().byId(p.config.controlId);var r=this.getTarget(p.config.target).display();t.to(r.oTargetParent);setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","launchpadCustomRouterRouteMatched");},0);}});return C;});},"sap/ushell/components/flp/FLPAnalytics.js":function(){sap.ui.define(function(){"use strict";var o=["appOpened","deleteTile","createGroup","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){jQuery.sap.log.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.flp.FLPAnalytics");}}function h(c,d,D){var A=hasher.getHash(),f;window.swa.custom1={ref:A};switch(d){case'appOpened':s(A);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Direct Launch",[l[A].title]);E.unsubscribe("launchpad","appOpened",h);break;case'bookmarkTileAdded':f=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[f,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:f]);break;case'actionModeActive':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case'catalogTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case'dashboardTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case'dashboardTileLinkClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}jQuery(window).unload(function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId('viewPortContainer').attachAfterNavigate(b,t);}catch(e){jQuery.sap.log.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.flp.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(c,i,d){E.subscribe("launchpad",c,h,t);});},false);},"sap/ushell/components/flp/launchpad/DashboardLoadingManager.js":function(){
// @copyright@
sap.ui.define(["sap/ui/base/EventProvider",'sap/ushell/ui/launchpad/TileState'],function(E,T){"use strict";var D=E.extend("sap.ushell.components.flp.launchpad.DashboardLoadingManager",{metadata:{publicMethods:[]},constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","refresTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},manageDynamicTiles:function(){var v;jQuery.sap.measure.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var l=sap.ushell.Container.getService("LaunchPage"),k,V,n={},c=jQuery.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){var t=this.oActiveDynamicTiles[k];var a=t.object;l.setTileVisible(a,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;var a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){l.setTileVisible(a,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;jQuery.sap.measure.end("DashboardLoadingManagerActiveDynamicTile");},isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]==undefined&&this.oResolvedTiles[t.uuid]==undefined){return false;}else{return true;}},manageBusyIndicatorTiles:function(){jQuery.sap.measure.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}jQuery.sap.measure.end("DashboardLoadingManagerBusyIndicators");},setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},_refreshTiles:function(){var l=sap.ushell.Container.getService("LaunchPage");for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){l.setTileVisible(a,true);}};},_setTilesNoVisibility:function(){var l=sap.ushell.Container.getService("LaunchPage");for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){l.setTileVisible(a,false);}delete this.oActiveDynamicTiles[t.uuid];};},manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]==undefined&&this.oResolvedTiles[c.oTile.uuid]==undefined){r.push(c);}}for(v=0;v<r.length;v++){c=r[v];this.oDashboardManager.getTileView(c.oTile,c.iGroup);}}});return D;});},"sap/ushell/components/flp/launchpad/DashboardManager.js":function(){
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/ushell/services/Message','sap/ui/base/EventProvider','sap/ushell/ui/launchpad/TileState',"sap/ushell/components/flp/launchpad/PagingManager","sap/ushell/components/flp/launchpad/DashboardLoadingManager"],function(M,E,T,P,D){"use strict";var g=function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);};var c=E.extend("sap.ushell.components.flp.launchpad.DashboardManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","attachEvent","detachEvent","attachEventOnce","createTile","deleteCatalogTileFromGroup","resetGroupsOnFailure","createGroupAndSaveTile"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.getDashboardManager&&sap.ushell.components.flp.launchpad.getDashboardManager()){return sap.ushell.components.flp.launchpad.getDashboardManager();}sap.ushell.components.flp.launchpad.getDashboardManager=jQuery.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=s.model;this.oConfig=s.config;this.oRouter=s.router;this.oSortableDeferred=$.Deferred();this.oSortableDeferred.resolve();this.aRequestQueue=[];this.aPendingCatalogQueue=[];this.bRequestRunning=false;this.tagsPool=[];this.skippedProcessCatalogs=0;this.registerEvents();this.oTileCatalogToGroupsMap={};this.iTabSelected=0;this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.oSegmentedTabTileViewDB={};this.oPopover=null;this.tileUuid=null;this.segmentsStore=[];this.iMinNumOfBUForBlindLoading=1500;this.bIsScorllModeAccordingKPI=false;this.oGroupNotLockedFilter=new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false);this.bLinkPersonalizationSupported=this.oPageBuilderService.isLinkPersonalizationSupported();this.oDashboardLoadingManager=new D("loadingManager",{oDashboardManager:this});if(this.oRouter){var t=this.oRouter.getTarget('home');t.attachDisplay(function(e){this.oDashboardView=e.getParameter('view');}.bind(this));}this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));},isBlindLoading:function(){var i=this.oModel.getProperty("/homePageGroupDisplay")==="scroll"&&this.bIsScorllModeAccordingKPI;return this.oModel.getProperty("/tileActionModeActive")||i;},createMoveActionDialog:function(i){var G=this.oGroupNotLockedFilter,m=new sap.m.SelectDialog(i,{title:sap.ushell.resources.i18n.getText('moveTileDialog_title'),rememberSelections:false,search:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v),b=e.getSource().getBinding("items");b.filter([f,G]);},contentWidth:'400px',contentHeight:"auto",confirm:function(e){var C=e.getParameter("selectedContexts");this.publishMoveActionEvents(e,C,"move"+this.tileType);}.bind(this),cancel:function(){var C=jQuery('.sapUshellTile[tabindex="0"]')[0];if(C){C.focus();}},items:{path:"/groups",filters:[G],template:new sap.m.StandardListItem({title:"{title}"})}});return m;},publishMoveActionEvents:function(e,C,m){var o=sap.ui.getCore().getEventBus();if(C.length){var s=this.tileType==="link"?"links":"tiles";o.publish("launchpad",m,{sTileId:this.tileUuid,sToItems:s,sFromItems:s,sTileType:s,toGroupId:C[0].getObject().groupId,toIndex:C[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:e.getSource().getId()});o.publish("launchpad","scrollToGroup",{groupId:C[0].getObject().groupId,groupChanged:false,focus:false});}},_changeLinksScope:function(e){var t=this;if(this.bLinkPersonalizationSupported){var i=e.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(G,a){if(!G.isGroupLocked){t._changeGroupLinksScope(G,i?'Actions':'Display');}});}},_changeGroupLinksScope:function(G,s){var t=this;G.links.forEach(function(l,i){t._changeLinkScope(l.content[0],s);});},_changeLinkScope:function(l,s){var L=l.getScope?l:l.getContent()[0];if(this.bLinkPersonalizationSupported&&L.setScope){L.setScope(s);}},registerEvents:function(){var e=sap.ui.getCore().getEventBus();e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","createGroup",this._createGroup,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","movetile",this._moveTile,this);e.subscribe("launchpad","movelink",this._moveLink,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("renderCatalog",this.loadAllCatalogs,this);e.subscribe("showCatalog",this.updateTilesAssociation,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","convertTile",this._convertTile,this);this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));},_addFLPActionsToTile:function(t){var l=this.bLinkPersonalizationSupported&&this.oPageBuilderService.isLinkPersonalizationSupported(t),a=[];a.push(this._getMoveTileAction(t));if(l){a.push(this._getConvertTileAction(t));}return a;},_getConvertTileAction:function(t){var e=sap.ui.getCore().getEventBus(),a=this,s=a.oPageBuilderService.getTileType(t);return{text:s==='link'?sap.ushell.resources.i18n.getText('ConvertToTile'):sap.ushell.resources.i18n.getText('ConvertToLink'),press:function(S){e.publish("launchpad","convertTile",S);}};},_getMoveTileAction:function(t){var a=this;return{text:sap.ushell.resources.i18n.getText('moveTileDialog_action'),press:function(){a.tileType=a.oPageBuilderService.getTileType(t);a.tileUuid=a.getModelTileById(a.oPageBuilderService.getTileId(t),a.tileType==="link"?"links":"tiles").uuid;var m=a.tileType==="tile"?a.moveTileDialog:a.moveLinkDialog;if(a.tileType==="tile"||(a.tileType==="link")){if(!m){m=a.createMoveActionDialog("move"+a.tileType+"Dialog");m.setModel(a.oModel);if(a.tileType==="tile"){a.moveTileDialog=m;}else{a.moveLinkDialog=m;}}else{m.getBinding("items").filter([a.oGroupNotLockedFilter]);}m.open();}}};},_handleTileAppearanceAnimation:function(s){if(!s){return;}var p=["webkit",""];function a(e,t){for(var i=0;i<p.length;i++){t=t.toLowerCase();s.attachBrowserEvent(p[i]+t,function(o){if(o.originalEvent&&o.originalEvent.animationName==="sapUshellTileEntranceAnimation"){s.removeStyleClass("sapUshellTileEntrance")}},false);}}a(s,"AnimationEnd");s.addStyleClass("sapUshellTileEntrance");},destroy:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);e.unsubscribe("launchpad","createGroup",this._createGroup,this);e.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);e.unsubscribe("launchpad","resetGroup",this._resetGroup,this);e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.unsubscribe("launchpad","moveGroup",this._moveGroup,this);e.unsubscribe("launchpad","deleteTile",this._deleteTile,this);e.unsubscribe("launchpad","movetile",this._moveTile,this);e.unsubscribe("launchpad","movelink",this._moveLink,this);e.unsubscribe("launchpad","sortableStart",this._sortableStart,this);e.unsubscribe("launchpad","sortableStop",this._sortableStop,this);e.unsubscribe("renderCatalog",this.loadAllCatalogs,this);e.unsubscribe("showCatalog",this.updateTilesAssociation,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ushell.components.flp.launchpad.getDashboardManager=undefined;},_refreshTiles:function(){var t=this,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){jQuery.each(o.tiles,function(n,a){t.oPageBuilderService.refreshTile(a.object);});});},_sortableStart:function(){this.oSortableDeferred=$.Deferred();},_createBookmark:function(C,e,d){var t=d.group?d.group.object:"";delete d.group;this._addRequest($.proxy(function(){var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.always($.proxy(this._checkRequestQueue,this));r.done(function(){if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'));}});r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'));}});},this));},_addBookmarkToModel:function(C,e,d){var t=d.tile,G,o=d.group,s,a,n,i,b,N,I;if(!d||!t){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!o){G=this.getModel().getProperty("/groups");for(I=0;I<G.length;I++){if(G[I].isDefaultGroup===true){o=G[I].object;break;}}}s=this.oPageBuilderService;a=s.getTileType(t);n=this._getTileModel(t,s.isGroupLocked(o),a,this._addModelToTileViewUpdateQueue);this.getTileView(n);i=this._getIndexOfGroupByObject(o);b=this.oModel.getProperty("/groups/"+i);b.tiles.push(n);b.visibilityModes=sap.ushell.utils.calcVisibilityModes(b,true);N=b.tiles.length;this._updateModelWithTileView(i,N);this.oModel.setProperty("/groups/"+i,b);},_refreshGroupInModel:function(C,e,G){var l=sap.ushell.Container.getService("LaunchPage"),s='Failed to refresh group with id:'+G+' in the model',t=this;l.getGroups().fail(jQuery.sap.log.error(s,null,"sap.ushell.components.flp.launchpad.DashboardManager")).done(function(a){a.some(function(o){if(l.getGroupId(o)===G){l.getDefaultGroup().done(function(d){var i=G===d.getId()?true:false,b=t._getGroupModel(o,i),f=t._getIndexOfGroupByObject(b.object);t.oModel.setProperty("/groups/"+f,b);});return true;}});});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(f){return $.proxy(function(){var o=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){f.apply(null,o);});},this);},_addRequest:function(r){this.aRequestQueue.push(r);if(!this.bRequestRunning){this.bRequestRunning=true;this.aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this.aRequestQueue.length===0){this.bRequestRunning=false;}else{this.aRequestQueue.shift()();}},_requestFailed:function(){this.aRequestQueue=[];this.bRequestRunning=false;},_createGroup:function(C,e,d){var G=this._getGroupModel(null),a=this.oModel.getProperty("/groups"),m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);window.setTimeout(function(){m.setProperty("/groups/"+a.length,G);},500);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);},_createGroupAt:function(C,e,d){var n=parseInt(d.location,10),G=this.oModel.getProperty("/groups"),o=this._getGroupModel(null,false,n===G.length,d),m=this.oModel,i;o.index=n;G.splice(n,0,o);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}for(i=n+1;i<G.length;i++){G[i].index++;}m.setProperty("/groups",G);},_getIndexOfGroup:function(G){var n=null,a=this.oModel.getProperty("/groups");jQuery.each(a,function(b,o){if(o.groupId===G){n=b;return false;}});return n;},_getIndexOfGroupByObject:function(G){var n=null,a=this.oModel.getProperty("/groups"),s=this.oPageBuilderService.getGroupId(G);a.every(function(m,b){var C=this.oPageBuilderService.getGroupId(m.object);if(C===s){n=b;return false;}return true;}.bind(this));return n;},_getPathOfGroup:function(G){return"/groups/"+this._getIndexOfGroup(G);},_getPathOfTile:function(t){var G=this.oModel.getProperty("/groups"),n=null,a=null,s,e=function(b,o){if(o.uuid===t){a=b;return false;}};jQuery.each(G,function(b,o){jQuery.each(o.tiles,e);if(a!==null){n=b;s="tiles";return false;}jQuery.each(o.links,e);if(a!==null){n=b;s="links";return false;}});return n!==null?"/groups/"+n+"/"+s+"/"+a:null;},_moveInArray:function(a,n,b){if(b>=a.length){var k=b-a.length;while((k--)+1){a.push(undefined);}}a.splice(b,0,a.splice(n,1)[0]);},_updateGroupIndices:function(a){var k;for(k=0;k<a.length;k++){a[k].index=k;}},_deleteGroup:function(C,e,d){var t=this,G=d.groupId,s,a=this.oModel.getProperty("/groups"),n=this._getIndexOfGroup(G),i=a.length-1===n,o=null,r,m,b,B;b=i?n-1:n;this._destroyGroupModel("/groups/"+n);o=a.splice(n,1)[0].object;if(i){this.oModel.setProperty("/groups/"+b+"/isLastGroup",i);}s=sap.ushell.Container.getService("LaunchPage").getGroupId(o);m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",a);this._updateGroupIndices(a);if(b>=0){B=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(B.publish,B,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[b].groupId}),200);}window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var f=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o);try{r=this.oPageBuilderService.removeGroup(o);}catch(h){this._resetGroupsOnFailure("fail_to_delete_group_msg");return;}r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.DELETE_GROUP,[f,s]);this._showLocalizedMessage("group_deleted_msg",[f]);}.bind(this));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_resetGroup:function(C,e,d){var t=this,G=d.groupId,n=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+n),s,a,r,b;this.oModel.setProperty("/groups/"+n+"/sortable",false);a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);s=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o.object);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.resetGroup(o.object);}catch(f){this._resetGroupsOnFailure("fail_to_reset_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(G,o,R){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.RESET_GROUP,[s,a]);var n=t._getIndexOfGroup(G);this._loadGroup(n,R||o.object,this._addAndUpdateModelWithTileView);this._showLocalizedMessage("group_reset_msg",[o.title]);this.oModel.setProperty("/groups/"+n+"/sortable",true);b=sap.ui.getCore().byId('dashboardGroups').getGroupControlByGroupId(G);if(b.getBindingContext().getObject().links&&b.getBindingContext().getObject().links.length&&!b.getIsGroupLocked()){this._changeGroupLinksScope(b.getBindingContext().getObject(),this.oModel.getProperty("/tileActionModeActive")?sap.m.GenericTileScope.Actions:sap.m.GenericTileScope.Display);}if(b){b.rerender();this.updateTilesAssociation();sap.ushell.utils.handleTilesVisibility();}},this,G,o)));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_moveGroup:function(C,e,d){var f=d.fromIndex,t=d.toIndex,G=this.oModel.getProperty("/groups"),m=this.oModel,a=this.oModel.getProperty("/tileActionModeActive"),r,o,s,b=this,i,h;if(!a){f=this._adjustFromGroupIndex(f,G);}o=G[f];s=o.groupId;if(!a){t=this._adjustToGroupIndex(t,G,s);}h=G[t].object;this._moveInArray(G,f,t);this._updateGroupIndices(G);m.setProperty("/groupList-skipScrollToGroup",true);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}G[G.length-1].isLastGroup=true;m.setProperty("/groups",G);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var o=this.oModel.getProperty(this._getPathOfGroup(s));try{this._getOriginalGroupIndex(h).done(function(n){r=this.oPageBuilderService.moveGroup(o.object,n);r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(b.analyticsConstants.PERSONALIZATION,b.analyticsConstants.MOVE_GROUP,[o.title,f,t,s]);});r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg")));r.always($.proxy(this._checkRequestQueue,this));}.bind(this));}catch(j){this._resetGroupsOnFailure("fail_to_move_group_msg");return;}},this));},_adjustToGroupIndex:function(t,a,b){var v=0,I=false,i=0;for(i=0;i<a.length&&v<t;i++){if(a[i].isGroupVisible){if(a[i].groupId===b){I=true;}else{v++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(a,b){var v=0,i;for(i=0;i<b.length;i++){if(b[i].isGroupVisible){v++;}if(v===a+1){return i;}}return a;},_getOriginalGroupIndexByIndex:function(n){var G=this.oModel.getProperty("/groups"),s=G[n].object;return this._getOriginalGroupIndex(s);},_getOriginalGroupIndex:function(s){var a=this.oPageBuilderService,t=this,G=this.oPageBuilderService.getGroups(),d=new jQuery.Deferred();G.done(function(b){var n=null;jQuery.each(b,function(e,o){if(a.getGroupId(o)===a.getGroupId(s)){n=e;return false;}});d.resolve(n);});G.fail(function(){t._showLocalizedErrorHelper("fail_to_load_groups_msg")();d.reject();});return d;},_changeGroupTitle:function(C,e,d){var n=d.newTitle,G=this.oModel.getProperty("/groups"),s=d.groupId,a=d.groupId,b=this._getIndexOfGroup(s),o=this.oModel.getProperty("/groups/"+b),O=o.title,r,t=this;this.oModel.setProperty("/groups/"+b+"/title",n);if(!o.object){this._addRequest($.proxy(function(){try{if(b===G.length-1){r=this.oPageBuilderService.addGroup(n,b);r.done(this._handleAfterSortable($.proxy(function(s,N){var b=this._getIndexOfGroup(s);this._loadGroup(b,N);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,s]);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));r.always($.proxy(this._checkRequestQueue,this));}else{this._getOriginalGroupIndexByIndex(b+1).done(function(h){r=this.oPageBuilderService.addGroupAt(n,h);r.done(this._handleAfterSortable($.proxy(function(s,N){var b=this._getIndexOfGroup(s);this._loadGroup(b,N);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,s]);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));r.always($.proxy(this._checkRequestQueue,this));}.bind(this));}}catch(f){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}},this));}else{this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.setGroupTitle(o.object,n);}catch(f){this._resetGroupsOnFailure("fail_to_rename_group_msg");return;}r.done(function(){a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,a]);});r.fail(this._handleAfterSortable($.proxy(function(s,O){var h=this._getPathOfGroup(s);this._showLocalizedError("fail_to__msg");this.oModel.setProperty(h+"/title",O);this._requestFailed();},this,s)));r.always($.proxy(this._checkRequestQueue,this));},this));}},createTile:function(d){var C=d.catalogTileContext,o=d.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,r,a=jQuery.Deferred(),R={},b;b=sap.ui.getCore().getEventBus();$.proxy(b.publish,b,"launchpad","addTile",{catalogTileContext:C,groupContext:o});if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addTile(C.getProperty("src"),o.getProperty("object"));}catch(e){this._resetGroupsOnFailure("fail_to_add_tile_msg");return;}var t=this;r.done(function(f){var h=t._getPathOfGroup(s),i=sap.ushell.Container.getService("LaunchPage").getTileTitle(f);t._addTileToGroup(h,f);R={group:G,status:1,action:'add'};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,i]);a.resolve(R);}).fail(function(){R={group:G,status:0,action:'add'};a.resolve(R);}).always(function(){t._checkRequestQueue();});},this));return a.promise();},createGroup:function(t){var d=jQuery.Deferred();if(!sap.ushell.utils.validHash(t)){return d.reject({status:0,action:'createNewGroup'});}var G=this._getGroupModel(null,false,true);var a=this.oModel.getProperty("/groups");var s=G.groupId;var i=a.length;if(i>0){a[i-1].isLastGroup=false;}G.title=t;G.index=i;G.editMode=false;a.push(G);this.oModel.setProperty("/groups/",a);this._addRequest(function(t){try{var r=this.oPageBuilderService.addGroup(t);}catch(e){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable(function(s,n){var b=this._getIndexOfGroup(s);this._loadGroup(b,n);var C=new sap.ui.model.Context(this.oModel,"/groups/"+b);d.resolve(C);}.bind(this,s)));r.fail(function(b){this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"));var R={group:b.group,status:0,action:'createNewGroup'};d.resolve(R);}.bind(this));r.always($.proxy(this._checkRequestQueue,this));}.bind(this,t));return d.promise();},createGroupAndSaveTile:function(d){var C=d.catalogTileContext,n=d.newGroupName,a=jQuery.Deferred(),r={};if(sap.ushell.utils.validHash(n)&&C){this.createGroup(n).then(function(o){var p=this.createTile({catalogTileContext:C,groupContext:o});p.done(function(b){r={group:b.group,status:1,action:'addTileToNewGroup'};a.resolve(r);}).fail(function(b){r={group:b.group,status:0,action:'addTileToNewGroup'};a.resolve(r);});}.bind(this));}return a.promise();},_deleteTile:function(C,e,d){var t=this,s=d.tileId||d.originalTileId,G=this.oModel.getProperty("/groups"),i=d.items||'tiles';jQuery.each(G,function(n,o){var f=false;jQuery.each(o[i],function(a,b){if(b.uuid===s||b.originalTileId===s){t._destroyTileModel("/groups/"+n+"/"+i+"/"+a);var h=o[i].splice(a,1)[0],r,j=sap.ushell.Container.getService("LaunchPage").getTileTitle(h.object),k=sap.ushell.Container.getService("LaunchPage").getCatalogTileId(h.object),l=sap.ushell.Container.getService("LaunchPage").getCatalogTileTitle(h.object),m=sap.ushell.Container.getService("LaunchPage").getTileId(h.object),p=t.oModel.getProperty("/personalization");o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);t.oModel.setProperty("/groups/"+n,o);t._addRequest(function(){try{r=t.oPageBuilderService.removeTile(o.object,h.object);}catch(q){this._resetGroupsOnFailure("fail_to_remove_tile_msg");return;}r.done(t._handleAfterSortable(function(){t._showLocalizedMessage("tile_deleted_msg",[j,o.title]);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.DELETE_TILE,[j||m,k,l,o.title]);}));r.fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg")));r.always($.proxy(t._checkRequestQueue,t));});sap.ushell.utils.handleTilesVisibility();f=true;return false;}});if(f){return false;}});},_sendDeleteTileRequest:function(G,t){var r,a=sap.ushell.Container.getService('LaunchPage');try{r=a.removeTile(G,t.object);}catch(e){jQuery.sap.log.error("deleteCatalogTileFromGroup ; removeTile ; Exception occurred: "+e);}return r;},deleteCatalogTileFromGroup:function(d){var t=this,s=decodeURIComponent(d.tileId),G=d.groupIndex,o=this.oModel.getProperty("/groups/"+G),a=sap.ushell.Container.getService("LaunchPage"),b=jQuery.Deferred(),e=[],f,p,h;f=o.tiles.filter(function(i){var j=a.getCatalogTileId(i.object);if(j!==s){return true;}else{p=jQuery.Deferred();h=t._sendDeleteTileRequest(o.object,i);h.done((function(b){return function(){b.resolve({status:true});};})(p));h.fail((function(b){return function(){b.resolve({status:false});};})(p));e.push(p);return false;}});o.tiles=f;o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,true);jQuery.when.apply(jQuery,e).done(function(r){var S=true,i=0,j=e.length;for(i;i<j;i++){if(!r.status){S=false;break;}}if(S){t.oModel.setProperty("/groups/"+G,o);}b.resolve({group:o,status:S,action:'remove'});});return b.promise();},_getGroupIndex:function(i){var G=this.oModel.getProperty("/groups"),o=this._getNewGroupInfo(G,i);if(o){return o.newGroupIndex;}},_convertTile:function(C,e,d){var s=d.tile?d.tile:d,n=d.srcGroupId?this._getGroupIndex(d.srcGroupId):undefined,G=d.srcGroupId?this.oModel.getProperty("/groups/"+n):s.getParent().getBindingContext().getObject(),t=s.getBindingContext().sPath.split("/"),o=s.getBindingContext().getObject(),a=t[t.length-2],b=o.uuid,f=parseInt(t[t.length-1],10),h=d.toIndex!==undefined?d.toIndex:undefined,r,A=this.oModel.getProperty("/tileActionModeActive"),i=d.toGroupId?this._getGroupIndex(d.toGroupId):G.index,j=d.toGroupId?this.oModel.getProperty("/groups/"+i):G;var I=this._getIndexForConvert(a,f,h,G,j),k={"tileIndex":f,"groupIndex":n,"group":G};this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(o.object,I.tileIndex,I.newTileIndex,G.object,j.object,a==="links"?"tile":"link");}catch(l){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}o.tileIsBeingMoved=true;r.done(this._handleAfterSortable($.proxy(function(b,m){var p=this._getPathOfTile(b);if(p){this._checkRequestQueue();this.oPageBuilderService.getTileView(m).done(function(v){if(a==="tiles"){this._attachLinkPressHandlers(v);this._addDraggableAttribute(v);this._changeLinkScope(v,A&&a!=='links'?'Actions':'Display');}var q={"tileIndex":h,"groupIndex":i,"group":j},u={"tile":o,"view":v,"type":a,"tileObj":m};this.replaceTileViewAfterConvert(k,q,u);this.updateTilesAssociation();sap.ushell.utils.handleTilesVisibility();if(d.callBack){d.callBack(v);}}.bind(this));}},this,b)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));},this));},replaceTileViewAfterConvert:function(s,d,t){var o=t.tile,a=o.content;o.tileIsBeingMoved=false;o.content=[t.view];o.object=t.tileObj;o.originalTileId=this.oPageBuilderService.getTileId(t.tileObj);s.group[t.type].splice(s.tileIndex,1);if(d.tileIndex!==undefined){d.group[t.type==="tiles"?"links":"tiles"].splice(d.tileIndex,0,o);}else{d.group[t.type==="tiles"?"links":"tiles"].push(o);}this.oModel.setProperty("/groups/"+d.groupIndex,d.group);this.oModel.setProperty("/groups/"+s.groupIndex,s.group);if(t.type==="links"){this._handleTileAppearanceAnimation(o.content[0].getParent());}else{this._handleTileAppearanceAnimation(o.content[0]);}if(a&&a[0]){a[0].destroy();}},_getIndexForConvert:function(t,a,n,G,d){var b;if(t==="tiles"){if(n!==undefined){b=d[t].length+n;}else{b=d[t].length+d["links"].length;}if(G.groupId===d.groupId){b--;}}else{b=n?n:G['tiles'].length;a+=G["tiles"].length;}return{"tileIndex":a,"newTileIndex":b};},_getIndexForMove:function(t,a,n,d,s){var b;if(t==="tiles"){b=n!==undefined?n:d[t].length;}else{if(n!==undefined){b=d["tiles"].length+n;}else{b=d["tiles"].length+d["links"].length;}a+=s["tiles"].length;}return{"tileIndex":a,"newTileIndex":b};},_moveLink:function(C,e,d){this._moveTile(C,e,d);},_getTileInfo:function(G,t,i){var o;jQuery.each(G,function(n,a){var f=false;jQuery.each(a[i],function(b,d){if(d.uuid===t){o={"oTile":d,"tileIndex":b,"oGroup":a,"groupIndex":n};f=true;return false;}});return!f;});return o;},_getNewGroupInfo:function(G,n){var N;jQuery.each(G,function(a,t){if(t.groupId===n){N={"oNewGroup":t,"newGroupIndex":a};}});return N;},_moveTile:function(C,e,d){var n=d.toIndex,N=d.toGroupId,t=d.sTileId,s=d.source,a=d.sTileType==="tiles"||d.sTileType==="tile"?"tile":"link",b=d.sToItems,f=d.sFromItems,h=sap.ushell.Container.getService("LaunchPage"),A=this.oModel.getProperty("/tileActionModeActive"),G=this.oModel.getProperty("/groups"),S,o,r,p,i,j,I={};i=this._getTileInfo(G,t,f);j=this._getNewGroupInfo(G,N);if(i.oGroup.groupId==j.oNewGroup.groupId&&(s==="movetileDialog"||n===null||s==="movelinkDialog")){return;}if(a==="link"){i.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(a==="tile"&&b==='tiles'){if(n&&n>j.oNewGroup[b].length){n=j.oNewGroup[b].length;}}if(i.oGroup.groupId===N&&b===f){if(n===null||n===undefined){i.oGroup[b].splice(i.tileIndex,1);n=i.oGroup[b].length;i.oGroup[b].push(i.oTile);}else{n=this._adjustTileIndex(n,i.oTile,i.oGroup,b);this._moveInArray(i.oGroup[b],i.tileIndex,n);}this.oModel.setProperty("/groups/"+i.groupIndex+"/"+b,i.oGroup[b]);}else{p=this.oModel.getProperty("/personalization");i.oGroup[f].splice(i.tileIndex,1);i.oGroup.visibilityModes=sap.ushell.utils.calcVisibilityModes(i.oGroup,p);this.oModel.setProperty("/groups/"+i.groupIndex+"/"+f,i.oGroup[f]);if(n===null||n===undefined){n=j.oNewGroup[b].length;j.oNewGroup[b].push(i.oTile);}else{n=this._adjustTileIndex(n,i.oTile,j.oNewGroup,b);j.oNewGroup[b].splice(n,0,i.oTile);}j.oNewGroup.visibilityModes=sap.ushell.utils.calcVisibilityModes(j.oNewGroup,p);this.oModel.setProperty("/groups/"+j.newGroupIndex+"/"+b,j.oNewGroup[b]);}this.updateTilesAssociation();sap.ushell.utils.handleTilesVisibility();S=this.oModel.getProperty("/groups/"+i.groupIndex);o=this.oModel.getProperty("/groups/"+j.newGroupIndex);I=this._getIndexForMove(f,i.tileIndex,n,j.oNewGroup,S);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(i.oTile.object,I.tileIndex,I.newTileIndex,S.object,o.object,a);}catch(k){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}i.oTile.tileIsBeingMoved=true;r.done(this._handleAfterSortable($.proxy(function(t,l){var m,u=[h.getTileTitle(i.oTile.object),h.getGroupTitle(S.object),h.getGroupTitle(o.object),t];sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.MOVE_TILE,u);m=this._getPathOfTile(t);if(m){this.oModel.setProperty(m+"/object",l);this.oModel.setProperty(m+"/originalTileId",this.oPageBuilderService.getTileId(l));this._checkRequestQueue();this.oPageBuilderService.getTileView(l).done(function(v){var q=this.oModel.getProperty(m+"/content");if(b==='links'){this._changeLinkScope(v,A?"Actions":"Display");this._attachLinkPressHandlers(v);this._addDraggableAttribute(v);this._handleTileAppearanceAnimation(v);i.oTile.content=[v];this.oModel.setProperty(m,jQuery.extend({},i.oTile));this.oModel.setProperty("/groups/"+j.newGroupIndex+"/"+b,this.oModel.getProperty("/groups/"+j.newGroupIndex+"/"+b));}else{this.oModel.setProperty(m+"/content",[v]);}if(q&&q[0]){var w=v.onAfterRendering;v.onAfterRendering=function(){w.apply(this);q[0].destroy();v.onAfterRendering=w;}}this.oModel.setProperty(m+"/tileIsBeingMoved",false);if(d.callBack){d.callBack(v);}}.bind(this));}},this,t)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));},this));},_adjustTileIndex:function(n,t,a,I){var v=0,b=false,i=0;for(i=0;i<a[I].length&&v<n;i++){if(a[I][i].isTileIntentSupported){if(a[I][i]===t){b=true;}else{v++;}}}if(b){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},loadAllCatalogs:function(C,e,d){var G=new jQuery.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.loadPersonalizedGroups();}this._destroyAllGroupModels("/catalogs");this._destroyAllTileModels("/catalogTiles");this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];jQuery.sap.measure.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");jQuery.sap.measure.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.getCatalogTiles");jQuery.sap.measure.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(a){jQuery.sap.measure.end("FLP:DashboardManager.GetCatalogsRequest");jQuery.sap.measure.end("FLP:DashboardManager.getCatalogTiles");jQuery.when.apply(jQuery,this.aPromises).then(function(){t.onDoneLoadingCatalogs(a);});s();}.bind(this)).fail(t._showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},updateCatalogTilesToGroupsMap:function(){var C=this.getModel().getProperty("/catalogs"),i,t,a,G,b,d,e,f,A,o,s=sap.ushell.Container.getService("LaunchPage");if(C){for(i=0;i<C.length;i++){d=C[i].appBoxes;if(d){for(f=0;f<d.length;f++){A=d[f];t=encodeURIComponent(s.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];a=G?G:[];A.associatedGroups=a;}}b=C[i].customTiles;if(b){for(e=0;e<b.length;e++){o=b[e];t=encodeURIComponent(s.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];a=G?G:[];o.associatedGroups=a;}}}}this.getModel().setProperty("/catalogs",C);},_getIsIntentSupported:function(C){var s=sap.ushell.Container.getService("LaunchPage"),i=!!(s.isTileIntentSupported(C));return i;},_getIsAppBox:function(C){if(!sap.ushell.Container){return false;}var s=sap.ushell.Container.getService("LaunchPage"),i=!!(s.getCatalogTileTargetURL(C)&&(s.getCatalogTilePreviewTitle(C)||s.getCatalogTilePreviewSubtitle(C)));return i;},createCatalogAppBoxes:function(C,G){var s=sap.ushell.Container.getService("LaunchPage"),a=encodeURIComponent(s.getCatalogTileId(C)),b=this.oTileCatalogToGroupsMap[a]||[],t=s.getCatalogTileTags(C)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n=undefined;if(C.tileResolutionResult){n=C.tileResolutionResult.navigationMode;}if(G){s.getCatalogTileView(C);}return{id:a,associatedGroups:b,src:C,title:s.getCatalogTilePreviewTitle(C),subtitle:s.getCatalogTilePreviewSubtitle(C),icon:s.getCatalogTilePreviewIcon(C),keywords:G?(s.getCatalogTileKeywords(C)||[]).join(','):[],tags:t,navigationMode:n,url:s.getCatalogTileTargetURL(C)};},addCatalogToModel:function(C){var s=sap.ushell.Container.getService("LaunchPage"),o={title:s.getCatalogTitle(C),id:s.getCatalogId(C),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]},p;jQuery.sap.measure.resume("FLP:DashboardManager.getCatalogTiles");p=s.getCatalogTiles(C);this.aPromises.push(p);p.done(function(a){jQuery.sap.measure.pause("FLP:DashboardManager.getCatalogTiles");if(!a.length){return;}this.aPendingCatalogQueue.push({oCatalogEntry:a,oCatalogModel:o});if(this.skippedProcessCatalogs<10){clearTimeout(this.oprocessCatalogsTimer);this.skippedProcessCatalogs++;this.oprocessCatalogsTimer=setTimeout(function(){this.processPendingCatalogs();}.bind(this),20);}}.bind(this)).fail(this._showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},processPendingCatalogs:function(){var t=this,C=this.oModel.getProperty('/catalogs'),p,o,a,e,i,b,d,f,h=sap.ui.getCore().getEventBus(),A,j=this.oModel.getProperty('/masterCatalogs')||[{title:g("all")}];jQuery.sap.measure.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(this.aPendingCatalogQueue.length>0){p=this.aPendingCatalogQueue.shift(),o=p.oCatalogEntry,a=p.oCatalogModel,e=this.searchModelCatalogByTitle(a.title),b=this.oModel.getProperty('/catalogSearchEntity');if(e.result){d=this.oModel.getProperty('/catalogs')[e.indexOfPreviousInstanceInModel];i=false;}else{i=true;d=a;}o.forEach(function(o,k){if(this._getIsIntentSupported(o)){if(this._getIsAppBox(o)){A=this.createCatalogAppBoxes(o,true);d.appBoxes.push(A);b.appBoxes.push(A);}else{f=this.createCatalogTiles(o);d.customTiles.push(f);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}this.aFnToGetTileView.push((function(o){return function(){var f=t.createCatalogTiles(o,true);b.customTiles.push(f);};})(o));}}}.bind(this));if(d.appBoxes.length>0||d.customTiles.length>0){if(i){C.push(a);j.push({title:a.title});}}}this.oModel.setProperty('/masterCatalogs',j);this.oModel.setProperty('/catalogs',C);h.publish("launchpad","afterCatalogSegment");jQuery.sap.measure.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty('/catalogs'),d=false,i,n=0,G=false;$.each(b,function(e,t){if(t.title===sap.ushell.resources.i18n.getText('catalogsLoading')){G=true;}else if(a==t.title){i=e;n=t.numberOfTiles;d=true;return false;}});return{result:d,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},getTagList:function(m){var i={},d=0,t=[],e,o,s;for(d=0;d<this.tagsPool.length;d++){o=this.tagsPool[d];if(i[o]){i[o]++;}else{i[o]=1;}}for(e in i){t.push({tag:e,occ:i[e]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(s.length===0){this.oModel.setProperty("/tagFiltering",false);}if(m){this.oModel.setProperty("/tagList",s.slice(0,m));}else{this.oModel.setProperty("/tagList",s);}},onDoneLoadingCatalogs:function(C){if(!C.length){this.oModel.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noCatalogs'));}var e=sap.ui.getCore().getEventBus();e.publish("launchpad","catalogContentLoaded");var s=sap.ushell.Container.getService("LaunchPage"),l=C.filter(function(o){return!s.getCatalogError(o);});if(l.length!==C.length){this._showLocalizedError("partialCatalogFail");}if(this.oModel.getProperty("/tagFiltering")===true){this.getTagList();}sap.ushell.utils.handleTilesVisibility();},createCatalogTiles:function(C,G){var s=sap.ushell.Container.getService("LaunchPage"),t,a=encodeURIComponent(s.getCatalogTileId(C)),b=this.oTileCatalogToGroupsMap[a]||[],d=s.getCatalogTileTags(C)||[];if(d.length>0){this.tagsPool=this.tagsPool.concat(d);}t=new T({state:"Loading"});if(G){s.getCatalogTileView(C);}return{associatedGroups:b,src:C,catalog:C.title,catalogId:C.id,title:s.getCatalogTileTitle(C),tags:d,keywords:G?(s.getCatalogTileKeywords(C)||[]).join(','):[],id:a,size:s.getCatalogTileSize(C),content:[t],isTileIntentSupported:s.isTileIntentSupported(C),tileType:C.tileType};},calculateCatalogTileIndex:function(a,n,t){var r=parseInt(a*100000,10);r+=(n!==undefined?n:0)+t;return r;},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),s=sap.ushell.Container.getService("LaunchPage"),i=0,o,t,a,b,d,e;for(i=0;i<G.length;i++){o=G[i];a=o.tiles;if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(s.getCatalogTileId(a[t].object));d=this.oTileCatalogToGroupsMap[b]||[];e=s.getGroupId(o.object);if(d.indexOf(e)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)&&!o.isGroupLocked){d.push(e);}this.oTileCatalogToGroupsMap[b]=d;}}}},_showLocalizedMessage:function(m,p,t){sap.ushell.Container.getService("Message").show(t||M.Type.INFO,g(m,p),p);},_showLocalizedError:function(m,p){this._showLocalizedMessage(m,p,M.Type.ERROR);},_showLocalizedErrorHelper:function(m,p){var t=this;return function(){t._showLocalizedError(m,p);};},_resetGroupsOnFailureHelper:function(m){var t=this;return function(G){t._showLocalizedError(m);t._requestFailed();setTimeout(function(){t.loadGroupsFromArray(G);});};},_resetGroupsOnFailure:function(m,p){this._requestFailed();this._showLocalizedError(m,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(G,s){var a,o,S,b;for(a=0;a<s.length;a++){S=s[a];b=S.index;o=G[b];if(o){o.isRendered=true;o.tiles=o.tiles.concat(S.tiles);o.links=o.links.concat(S.links);}}return G;},createGroupsModelFrame:function(G,p){var a,C=[],o,f;f=function(b){var d=jQuery.extend({},b);d.tiles=[];d.pendingLinks=[];d.links=[];return d;};for(a=0;a<G.length;a++){o=G[a];C[a]=f(o);C[a].isRendered=false;C[a].visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);}return C;},_splitGroups:function(s,G,f){var a,t,b=s,p=f,d=[],e,h,i,j=["tiles","pendingLinks"],o=1,C,I=(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==='tabs'),k;C=function(l){var m=jQuery.extend({},l);m.tiles=[];m.pendingLinks=[];return m;};for(a=0;a<G.length;a++){k=G[a];e=C(k);d.push(e);for(h=0;h<j.length;h++){i=j[h];o=this.PagingManager.getSizeofSupportedElementInUnits(i==='pendingLinks'?'link':'tile');for(t=0;t<k[i].length;t++){if(p<=0){p=b;if(d){if(I){d.iGroupIndex=a;}this.segmentsStore.push(d);}e=C(k);d=[];d.push(e);}e[i].push(k[i][t]);p-=o;}}if(I){if(d){d.iGroupIndex=a;this.segmentsStore.push(d);d=[];}}}if(d){if(!I){this.segmentsStore.push(d);}}},_processSegment:function(m){var e=sap.ui.getCore().getEventBus(),a,b,t;if(this.segmentsStore.length>0){a=this.segmentsStore.shift();b=a[0].index;t=m[b].tiles.length+m[b].pendingLinks.length;if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==='tabs'){if(a.iGroupIndex===this.iTabSelected){this.getSegmentContentViews(a);}else{if(!this.oSegmentedTabTileViewDB[a.iGroupIndex]){this.oSegmentedTabTileViewDB[a.iGroupIndex]=[];}this.oSegmentedTabTileViewDB[a.iGroupIndex].push(a);}}else{this.getSegmentContentViews(a);}}m=this._bindSegment(m,a);this.oModel.setProperty('/groups',m);this._updateModelWithTileView(b,t);this._handleSegment();}else{this._updateModelWithTileView(0,0);sap.ushell.utils.handleTilesVisibility();e.publish("launchpad","dashboardModelContentLoaded");}},getSegmentContentViews:function(a){var n,b,s,S;for(n=0;n<a.length;n++){s=a[n];for(b=0;b<s.tiles.length;b++){S=s.tiles[b];this.getTileView(S);}for(b=0;b<s.links.length;b++){S=s.links[b];this.getTileView(S,s.index);}}},getSegmentTabContentViews:function(C,e,p){var n,s,S=p.iSelectedGroup,G;G=this.oModel.getProperty("/groups/"+S);for(n=0;n<G.tiles.length;n++){s=G.tiles[n];this.getTileView(s);}for(n=0;n<G.links.length;n++){s=G.links[n];this.getTileView(s,S);}this.oSegmentedTabTileViewDB[S]=[];},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},_handleSegment:function(){clearTimeout(this.oSegmentTimer);this.oSegmentTimer=setTimeout(function(){this._processSegment(this.oModel.getProperty('/groups'));}.bind(this),100);},loadGroupsFromArray:function(G){var t=this;jQuery.sap.measure.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");this.oPageBuilderService.getDefaultGroup().done(function(d){if(G.length==0&&d==undefined){return;}var i=0,l=[],b,a=G.indexOf(d),n,N,e=[],o,f,h,s,m,j,k,p,q={desktop:5,tablet:10,phone:15},r=0,u=0,v,w=0,z,A=0,B;G.splice(a,1);while(i<G.length){o=G[i];f=t.oPageBuilderService.isGroupLocked(o);if(f){l.push(o);G.splice(i,1);}else{i++;}}n=l.length;if(!t.oModel.getProperty('/disableSortedLockedGroups')){l.sort(function(x,y){var C=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),F=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return C<F?-1:1;});}b=l;b.push(d);b.push.apply(b,G);G=b;h=G.length;m=t.oModel.getProperty("/groups/length");t.oModel.setProperty("/groups/indexOfDefaultGroup",n);for(i=h;i<m;++i){t._destroyGroupModel("/groups/"+i);}if(!t.PagingManager){t.PagingManager=new P('dashboardPaging',{supportedElements:{tile:{className:'sapUshellTile'},link:{className:'sapUshellLinkTile'}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});}if(t.PagingManager.currentPageIndex===0){t.PagingManager.moveToNextPage();r=t.PagingManager._calcElementsPerPage();}k=t.PagingManager.getSizeofSupportedElementInUnits('link');p=t.PagingManager.getSizeofSupportedElementInUnits('tile');jQuery.sap.measure.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<h;++i){N=t._getGroupModel(G[i],i===n,i===h-1);N.index=i;w+=N.tiles.length*p+N.links.length*k;if(N.isGroupVisible){A+=N.tiles.length*p+N.links.length*k;}t.bIsScorllModeAccordingKPI=A>t.iMinNumOfBUForBlindLoading;e.push(N);}t.oModel.setProperty("/iSelectedGroup",s);jQuery.sap.measure.end("FLP:DashboardManager._getGroupModel");if(sap.ui.Device.system.desktop){u=q.desktop;}else if(sap.ui.Device.system.tablet){u=q.tablet;}else{u=q.phone;}j=(w-r)/u;if(j<14){j=14;}v=t.createGroupsModelFrame(e,t.oModel.getProperty("/personalization"));t._splitGroups(j,e,r);jQuery.sap.measure.start("FLP:DashboardManager._processSegment","_processSegment","FLP");t._processSegment(v);for(var i=0;i<v.length;i++){if(v[i].isGroupVisible&&v[i].visibilityModes[0]){t.oModel.setProperty("/groups/"+i+"/isGroupSelected",true);t.oModel.setProperty("/iSelectedGroup",i);t.iTabSelected=i;break;}}if(t.oModel.getProperty("/homePageGroupDisplay")&&t.oModel.getProperty("/homePageGroupDisplay")==='tabs'){z=t.getDashboardView();B=z.oDashboardGroupsBox;B.getBinding('groups').filter([z.oFilterSelectedGroup]);}jQuery.sap.measure.end("FLP:DashboardManager._processSegment");t.oModel.setProperty("/groups/length",v.length);if(t.oModel.getProperty('/currentState/stateName')==="catalog"){}jQuery.sap.measure.end("FLP:DashboardManager.loadGroupsFromArray");}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"));},_loadGroup:function(n,G,h){var t=this,s="/groups/"+n,d=t.oModel.getProperty("/groups/indexOfDefaultGroup"),i=t.oModel.getProperty(s).isLastGroup,o,N;this._destroyGroupModel(s);o=this.oModel.getProperty(s+"/groupId");N=this._getGroupModel(G,n===d,i,undefined,h);if(o){N.groupId=o;}N.index=n;N.isRendered=true;this.oModel.setProperty(s,N);},_getGroupModel:function(G,d,l,o,h){var s=this.oPageBuilderService,a=(G&&s.getGroupTiles(G))||[],m=[],b=[],i,e,f=this.getModel();e=f.getProperty("/personalization");var j=G&&s.isGroupLocked(G)?true:false;for(i=0;i<a.length;++i){var t=a[i],k=s.getTileType(t).toLowerCase();if(k==="tile"){m.push(this._getTileModel(a[i],j,k,h));}else if(k==="link"){b.push(this._getTileModel(a[i],j,k,h));}else{jQuery.sap.log.error("Unknown tile type: '"+k+"'",undefined,"sap.ushell.components.flp.launchpad.DashboardManager");}}return{title:(d&&g("my_group"))||(G&&s.getGroupTitle(G))||(o&&o.title)||"",object:G,groupId:jQuery.sap.uid(),links:b,pendingLinks:[],tiles:m,isDefaultGroup:d||false,editMode:!G,isGroupLocked:j,visibilityModes:[true,true],removable:!G||s.isGroupRemovable(G),sortable:e,isGroupVisible:!G||s.isGroupVisible(G),isEnabled:!d,isLastGroup:l||false,isRendered:o?!!o.isRendered:false,isGroupSelected:false};},_hasPendingLinks:function(m){for(var i=0;i<m.length;i++){if(m[i].content[0]===undefined){return true;}}return false;},_addTileToGroup:function(G,t){var s=G+"/tiles",o=this.oModel.getProperty(G),n=this.oModel.getProperty(s).length,a=this.oPageBuilderService,b=a.getTileType(t);var i=this.oModel.getProperty(G+"/isGroupLocked"),p=this.oModel.getProperty("/personalization");o.tiles[n]=this._getTileModel(t,i,b,this._addModelToTileViewUpdateQueue);this.getTileView(o.tiles[n]);o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);this._updateModelWithTileView(o.index,n);this.oModel.setProperty(G,o);},_addAndUpdateModelWithTileView:function(t,o){this._addModelToTileViewUpdateQueue(t,o);this._updateModelWithTileView(0,0);},_addModelToTileViewUpdateQueue:function(t,o){this.tileViewUpdateQueue.push({uuid:t,view:o});},_updateModelWithTileView:function(s,a){var t=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=setTimeout(function(){t.tileViewUpdateTimeoutID=undefined;t.oSortableDeferred.done(function(){t._updateModelWithTilesViews(s,a);});},50);},_updateGroupModelWithTilesViews:function(t,s,h,i){var o,u,S,l,a=s||0;for(var j=a;j<t.length;j=j+1){o=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){u=this.tileViewUpdateQueue[q];if(o.uuid==u.uuid){h.push(q);if(u.view){if(i){o.content=[u.view];}else{o.content[0].destroy();o.content=[u.view];}this.oDashboardLoadingManager.setTileResolved(o);S=this.oPageBuilderService.getTileSize(o.object);l=((S!==null)&&(S==="1x2"))||false;if(o['long']!==l){o['long']=l;}}else{o.content[0].setState("Failed");}break;}}}},_updateModelWithTilesViews:function(s,a){var G=this.oModel.getProperty("/groups"),b=s||0,h=[];if(!G||this.tileViewUpdateQueue.length===0){return;}for(var i=b;i<G.length;i=i+1){this._updateGroupModelWithTilesViews(G[i].tiles,a,h);if(G[i].links){this._updateGroupModelWithTilesViews(G[i].links,a,h,true);if(G[i].pendingLinks.length>0){if(!G[i].links){G[i].links=[];}G[i].links=G[i].links.concat(G[i].pendingLinks);G[i].pendingLinks=[];}}}var t=[],d;for(d=0;d<this.tileViewUpdateQueue.length;d++){if(h.indexOf(d)===-1){t.push(this.tileViewUpdateQueue[d]);}}this.tileViewUpdateQueue=t;this.oModel.setProperty("/groups",G);},getModelTileById:function(i,I){var G=this.oModel.getProperty('/groups'),m,f=false;G.every(function(o,a){o[I].every(function(t,a){if(t.uuid===i||t.originalTileId===i){m=t;f=true;}return!f;});return!f;});return m;},_addDraggableAttribute:function(v){if(this.isIeHtml5DnD()){v.addEventDelegate({onAfterRendering:function(){this.$().attr("draggable","true");}.bind(v)});}},_attachLinkPressHandlers:function(v){var e=sap.ui.getCore().getEventBus(),t=v.attachPress?v:v.getContent()[0];t.attachPress(function(o){var b=v.getBindingContext().getObject().tileIsBeingMoved;if(!b&&this.getScope&&this.getScope()==="Actions"){switch(o.getParameters().action){case"Press":sap.ushell.components.flp.ActionMode._openActionsMenu(o,v);break;case"Remove":var a=v.getBindingContext().getObject().uuid;e.publish("launchpad","deleteTile",{tileId:a,items:'links'});break;}}else{sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");}});},getTileView:function(t,G){var d,a=this,s=this.oPageBuilderService,m,b,o,u=this._addModelToTileViewUpdateQueue,e,n=false,f=t.uuid;if(a.oDashboardLoadingManager.isTileViewRequestIssued(t)){return;}this.oDashboardLoadingManager.setTileInProgress(t);s.setTileVisible(t.object,false);d=s.getTileView(t.object);d.done(function(v){if(v.oController&&!t.isCustomTile){t.target=v.oController.navigationTargetUrl;}e=v;if(e.getComponentInstance){jQuery.sap.measure.average("FLP:getComponentInstance","get info for navMode","FLP1");var C=e.getComponentInstance().getComponentData();if(C&&C.properties){t.navigationMode=C.properties.navigationMode;}jQuery.sap.measure.end("FLP:getComponentInstance");}a.oDashboardLoadingManager.setTileResolved(t);m=v.getMode?v.getMode():"ContentMode";if(a.bLinkPersonalizationSupported&&m==="LineMode"){a._attachLinkPressHandlers(e);a._addDraggableAttribute(e);if(G!=undefined){b=a.oModel.getProperty("/groups");if(b[G]){t.content=[e];o=a.oModel.getProperty("/groups/"+G+"/links");a.oModel.setProperty("/groups/"+G+"/links",[]);a.oModel.setProperty("/groups/"+G+"/links",o);}}}else{if(a.isBlindLoading()){if(t.content.length>0){t.content[0].destroy();}t.content=[e];if(G){var h=a.oModel.getProperty("/groups/"+G);a.oModel.setProperty("/groups/"+G,h);}}}if(a.isBlindLoading()){var S=a.oPageBuilderService.getTileSize(t.object);var l=((S!==null)&&(S==="1x2"))||false;if(t['long']!==l){t['long']=l;}}else{if(m==="LineMode"){t.content=[e];if(n){o=a.oModel.getProperty("/groups/"+G+"/links");a.oModel.setProperty("/groups/"+G+"/links",[]);a.oModel.setProperty("/groups/"+G+"/links",o);}}else if(t.content.length===0){t.content=[e];}else{u.apply(a,[f,e]);a._updateModelWithTileView(0,0);}}});d.fail(function(){if(a.sTileType==="link"){if(!this.bLinkPersonalizationSupported){e=new T({state:"Failed"});}else{var L=sap.ushell.Container.getService("LaunchPage");var h=L.getCatalogTilePreviewSubtitle(t);h=(!h||!h.length)?undefined:h;var i=L.getCatalogTilePreviewTitle(t);i=((!i||!i.length)&&!h)?sap.ushell.resources.i18n.getText('cannotLoadLinkInformation'):i;e=new sap.m.GenericTile({mode:"LineMode",state:"Failed",header:i,subheader:h});}}else{e=new T({state:"Failed"});}t.content=[e];});if(!e){if(s.getTileType(t.object)==="link"){n=true;e=new sap.m.GenericTile({mode:"LineMode"});}else{e=new T();}t.content=[e];}},_getTileModel:function(t,i,s,u){var a=this.oPageBuilderService,b=jQuery.sap.uid(),o,d;this.sTileType=s;var S=a.getTileSize(t);var l=[];if(s==="link"){l=[new sap.m.GenericTile({mode:"LineMode"})];}d={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":a.getTileId(t),"uuid":b,"tileCatalogId":encodeURIComponent(a.getCatalogTileId(t)),"content":l,"long":((S!==null)&&(S==="1x2"))||false,"target":a.getTileTarget(t)||"","debugInfo":a.getTileDebugInfo(t),"isTileIntentSupported":a.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":this.oModel.getProperty("/tileActionsIconEnabled")||false,"navigationMode":this.navigationMode};return d;},isIeHtml5DnD:function(){return!!((sap.ui.Device.browser.msie||sap.ui.Device.browser.edge)&&sap.ui.Device.browser.version>=11&&(sap.ui.Device.system.combi||sap.ui.Device.system.tablet));},_destroyAllGroupModels:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){for(i=0;i<G.length;i=i+1){this._destroyGroupModel(G[i]);}}},_destroyGroupModel:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t;if(G){this._destroyAllTileModels(G.tiles);}},_destroyAllTileModels:function(t){var a=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(a){for(i=0;i<a.length;i=i+1){this._destroyTileModel(a[i]);}}},_destroyTileModel:function(t){var o=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(o&&o.content){for(i=0;i<o.content.length;i=i+1){o.content[i].destroy();}}},loadPersonalizedGroups:function(){var t=this,G=this.oPageBuilderService.getGroups(),d=new jQuery.Deferred();G.done(function(a){t.loadGroupsFromArray(a);d.resolve();});G.fail(function(){t._showLocalizedErrorHelper("fail_to_load_groups_msg")();d.reject();});return d;}});return c;});},"sap/ushell/components/flp/launchpad/PagingManager.js":function(){sap.ui.define(["sap/ui/base/EventProvider"],function(E){"use strict";var P=E.extend("sap.ushell.components.flp.launchpad.PagingManager",{metadata:{publicMethods:["setElementClass","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components.flp.launchpad.getPagingManager=jQuery.sap.getter(this.getInterface());this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.supportedElements=c;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},_calcElementMatrix:function(c){var e=jQuery("<div>").addClass(c);jQuery('body').append(e);var a=e.height();var b=e.width();if(a<20||b<40){b=40;a=20;}e.remove();return{width:b,height:a};},_calcElementsPerPage:function(){var s,b,a,m,a,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}});return P;});},"sap/ushell/components/flp/launchpad/appfinder/AppFinder.controller.js":function(){sap.ui.define(['sap/ushell/ui/launchpad/AccessibilityCustomData','sap/ushell/ui5service/ShellUIService'],function(A,S){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.AppFinder",{onInit:function(){sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem('backBtn',true);sap.ushell.Container.getRenderer("fiori2").showHeaderItem('homeBtn',true);});var v=this.getView(),m=v.getModel(),s=v.showEasyAccessMenu;if(!m.getProperty("/groups")||m.getProperty("/groups").length===0){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadPersonalizedGroups();}this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=v.parentComponent.getComponentData().config;this.catalogView=sap.ui.view("catalogView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.Catalog",height:"100%",viewData:{parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel()}});this.catalogView.addStyleClass('sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce');this._addViewCustomData(this.catalogView,"appFinderCatalogTitle");this.oRouter=this.getView().parentComponent.getRouter();this.oRouter.getRoute("catalog").attachPatternMatched(function(e){this._navigateTo.apply(this,["appFinder","catalog"]);}.bind(this));this.oRouter.getRoute("appFinder").attachPatternMatched(this._handleAppFinderNavigation.bind(this));if(!s){v.oPage.addContent(this.catalogView);setTimeout(function(){jQuery('#catalogSelect').focus();},0);}sap.ui.Device.resize.attachHandler(this._resizeHandler.bind(this));},_resizeHandler:function(){var s=this._showOpenCloseSplitAppButton();var c=this.oSubHeaderModel.getProperty('/openCloseSplitAppButtonVisible');if(s!=c){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',s);if(s){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);}}this._toggleViewWithToggleButtonClass(s);},_handleAppFinderNavigation:function(e){var v=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(e);v.createSubHeader();this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(v.showEasyAccessMenu){this.onShow(e);}else if(v._showSearch('catalog')){v.updateSubHeader('catalog',false);this._toggleViewWithSearchAndTagsClasses('catalog');}sap.ui.getCore().getEventBus().publish("showCatalog");sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");},_showOpenCloseSplitAppButton:function(){return!sap.ui.Device.orientation.landscape||sap.ui.Device.system.phone;},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty('/activeMenu',null);this.oSubHeaderModel.setProperty('/search',{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty('/tag',{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel;}this.oSubHeaderModel=new sap.ui.model.json.JSONModel();this._resetSubHeaderModel();return this.oSubHeaderModel;},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel('subHeaderModel'),a=e.getSource().getSelectedItems(),T=a.length>0,o={tagMode:T,selectedTags:[]};a.forEach(function(b,i){o.selectedTags.push(b.getText());});s.setProperty('/activeMenu',this.getCurrentMenuName());s.setProperty('/tag',o);},searchHandler:function(e){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadCustomTilesKeyWords();var s=e.getSource().getValue();if(s==null||e.getParameter('clearButtonPressed')){return;}var o=this.oSubHeaderModel.getProperty('/search');var a=this.oSubHeaderModel.getProperty('/activeMenu');if(this.getCurrentMenuName()!=a){a=this.getCurrentMenuName();}if(!o.searchMode&&!e.getParameter('clearButtonPressed')){o.searchMode=true;}if(o.searchMode&&sap.ui.Device.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}if(s!=o.searchTerm){if(this.containsOnlyWhiteSpac(s)){s='*';}o.searchTerm=s;}this.oSubHeaderModel.setProperty("/search",o);this.oSubHeaderModel.setProperty("/activeMenu",a);this.oSubHeaderModel.refresh(true);},_preloadAppHandler:function(){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState");}this._updateShellHeader(this.oView.oPage.getTitle());}.bind(this),0);},getCurrentMenuName:function(){return this.currentMenu;},_navigateTo:function(n,m){var g=this.oView.getModel().getProperty("/groupContext");var G=g?g.path:null;if(G){this.oRouter.navTo(n,{'menu':m,filters:JSON.stringify({targetGroup:encodeURIComponent(G)})},true);}else{this.oRouter.navTo(n,{'menu':m},true);}},getSystemsModels:function(){var t=this;if(this.getSystemsPromise){return this.getSystemsPromise;}var g=new jQuery.Deferred();this.getSystemsPromise=g.promise();var m=["userMenu","sapMenu"].map(function(a){var s=new sap.ui.model.json.JSONModel();s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return t.getSystems(a).then(function(r){s.setProperty("/systemsList",r);return s;});});jQuery.when.apply(jQuery,m).then(function(u,s){g.resolve(u,s);});return this.getSystemsPromise;},onSegmentButtonClick:function(e){switch(e.getParameters().id){case"catalog":this._navigateTo("appFinder","catalog");break;case"userMenu":this._navigateTo("appFinder","userMenu");break;case"sapMenu":this._navigateTo("appFinder","sapMenu");break;}},onShow:function(e){var p=e.getParameter('arguments');var m=p.menu;if(m===this.getCurrentMenuName()){return;}var v=this.getView();v._updateSearchWithPlaceHolder(m);this._updateCurrentMenuName(m);this.getSystemsModels().then(function(u,s){var a=s.getProperty("/systemsList");var b=u.getProperty("/systemsList");v.oPage.removeAllContent();var c=(this.currentMenu==='sapMenu'?a:b);if(c&&c.length){v.updateSubHeader(this.currentMenu,true);}else if(v._showSearch(this.currentMenu)){v.updateSubHeader(this.currentMenu,false);}if(this.currentMenu==='catalog'){v.oPage.addContent(this.catalogView);}else if(this.currentMenu==='userMenu'){if(!this.userMenuView){this.userMenuView=new sap.ui.view("userMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.EasyAccess",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:u,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu")}});this._addViewCustomData(this.userMenuView,"appFinderUserMenuTitle");}v.oPage.addContent(this.userMenuView);}else if(this.currentMenu==='sapMenu'){if(!this.sapMenuView){this.sapMenuView=new sap.ui.view("sapMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.EasyAccess",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:s,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu")}});this._addViewCustomData(this.sapMenuView,"appFinderSapMenuTitle");}v.oPage.addContent(this.sapMenuView);}this._setFocusToSegmentedButton(c);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}this.oSubHeaderModel.refresh(true);}.bind(this));},_updateCurrentMenuName:function(m){var v=this.getView();if(!v.showEasyAccessMenu||(m==="sapMenu"&&!v.enableEasyAccessSAPMenu)||(m==="userMenu"&&!v.enableEasyAccessUserMenu)){this.currentMenu="catalog";}else{this.currentMenu=m;}this._toggleViewWithSearchAndTagsClasses(m);},_toggleViewWithSearchAndTagsClasses:function(m){var v=this.getView();if(v._showSearch(m)){v.oPage.addStyleClass('sapUshellAppFinderSearch');}else{v.oPage.removeStyleClass('sapUshellAppFinderSearch');}if(v._showSearchTag(m)){v.oPage.addStyleClass('sapUshellAppFinderTags');}else{v.oPage.removeStyleClass('sapUshellAppFinderTags');}},_toggleViewWithToggleButtonClass:function(b){var v=this.getView();if(b){v.oPage.addStyleClass('sapUshellAppFinderToggleButton');}else{v.oPage.removeStyleClass('sapUshellAppFinderToggleButton');}},_setFocusToSegmentedButton:function(s){var v=this.getView();if(s&&s.length){var b=v.segmentedButton.getSelectedButton();setTimeout(function(){jQuery("#"+b).focus();},0);}else{setTimeout(function(){jQuery('#catalogSelect').focus();},0);}},_getPathAndHandleGroupContext:function(e){var p=e.getParameter('arguments');var d=p.filters;var D=d?JSON.parse(d):d;var P=(D&&decodeURIComponent(D.targetGroup))||"";P=P==='undefined'?undefined:P;this._updateModelWithGroupContext(P);},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.oView.getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},getSystems:function(m){var d=new jQuery.Deferred();var c=sap.ushell.Container.getService("ClientSideTargetResolution");if(!c){d.reject("cannot get ClientSideTargetResolution service");}else{c.getEasyAccessSystems(m).done(function(s){var a=[];var b=Object.keys(s);for(var i=0;i<b.length;i++){var C=b[i];a[i]={"systemName":s[C].text,"systemId":C};}d.resolve(a);}).fail(function(e){d.reject("An error occurred while retrieving the systems: "+e);});}return d.promise();},_addViewCustomData:function(v,t){var r=sap.ushell.resources.i18n;v.addCustomData(new A({key:"role",value:"region",writeToDom:true}));v.addCustomData(new A({key:"aria-label",value:r.getText(t),writeToDom:true}));},_initializeShellUIService:function(){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_updateShellHeader:function(t){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle(t);this.oShellUIService.setHierarchy([{icon:'sap-icon://home',title:'Home',intent:'#'}]);},containsOnlyWhiteSpac:function(t){if(!t||t==="")return false;var T=t;return(!T.replace(/\s/g,'').length)}});},false);},"sap/ushell/components/flp/launchpad/appfinder/AppFinder.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.AppFinder",{createContent:function(){this.oController=this.getController();this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.setModel(this.parentComponent.getModel());this.enableEasyAccessSAPMenu=this.getModel().getProperty("/enableEasyAccessSAPMenu");this.enableEasyAccessUserMenu=this.getModel().getProperty("/enableEasyAccessUserMenu");if((!this.enableEasyAccessSAPMenu&&!this.enableEasyAccessUserMenu)||(sap.ui.Device.system.phone||sap.ui.Device.system.tablet&&(!sap.ui.Device.system.combi))){this.showEasyAccessMenu=false;}else{this.showEasyAccessMenu=true;}var r=sap.ushell.resources.i18n;this.oPage=new sap.m.Page("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?r.getText("appFinderTitle"):r.getText("appFinder_group_context_title",t);}}});return this.oPage;},_showSearch:function(m){var M="searchFiltering";if(m==="userMenu"){M="enableEasyAccessUserMenuSearch";}else if(m==="sapMenu"){M="enableEasyAccessSAPMenuSearch";}return this.getModel().getProperty("/"+M);},_showSearchTag:function(m){if(m==="userMenu"||m==="sapMenu"){return false;}return this.getModel().getProperty("/tagFiltering");},onAfterHide:function(){var c=this.getController(),r=c.oSubHeaderModel.getProperty("/search/searchMode")||c.oSubHeaderModel.getProperty("/search/searchTerm");if(r){c._resetSubHeaderModel();this.oAppFinderSearchControl.setValue("");}},createSubHeader:function(){if(!this.oToolbar){this.oToolbar=new sap.m.Toolbar("appFinderSubHeader",{});this.oToolbar.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipforward:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}},onAfterRendering:function(){jQuery("#catalog").attr("accesskey","a");}});this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"2",writeToDom:true}));this.oToolbar.addStyleClass('sapUshellAppFinderHeader');this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);}if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new sap.m.ToggleButton("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?sap.ushell.resources.i18n.getText("ToggleButtonHide"):sap.ushell.resources.i18n.getText("ToggleButtonShow"))}.bind(this),tooltip:sap.ushell.resources.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.addEventDelegate({onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton);}},updateSubHeader:function(m,e){var s,a;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(e){s=this.createSegmentedButtons(m);this.oPage.addStyleClass('sapUshellAppFinderWithEasyAccess');this.oToolbar.addContent(s);}if(this._showSearch(m)){a=this.createSearchControl(m);this.oToolbar.addContent(a);}this.getController()._updateCurrentMenuName(m);},createSegmentedButtons:function(m){var c,r,s,b,a,i;if(this.segmentedButton){this.segmentedButton.setSelectedButton(m);return this.segmentedButton;}c=this.getController();r=sap.ushell.resources.i18n;s=[];s.push(new sap.m.Button("catalog",{text:r.getText("appFinderCatalogTitle"),press:function(e){c.onSegmentButtonClick(e);}}));if(this.enableEasyAccessUserMenu){s.push(new sap.m.Button('userMenu',{text:r.getText("appFinderUserMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}if(this.enableEasyAccessSAPMenu){s.push(new sap.m.Button('sapMenu',{text:r.getText("appFinderSapMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}this.segmentedButton=new sap.m.SegmentedButton("appFinderSegmentedButtons",{buttons:s});this.segmentedButton.addEventDelegate({onsaptabprevious:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(!o.getVisible()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}});this.segmentedButton.setSelectedButton(m);b=this.segmentedButton.getButtons();for(i=0;i<b.length;i++){a=b[i];a.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:a.getId()+"View",writeToDom:true}));}return this.segmentedButton;},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);jQuery('#appFinderSearch input').select();},createSearchControl:function(m){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new sap.m.FlexBox("appFinderSearchContainer");}this.oAppFinderSearchContainer.removeAllItems();if(m==='catalog'&&this._showSearchTag('catalog')){this.createTagControl();this.oAppFinderSearchContainer.addItem(this.oAppFinderTagFilter);}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new sap.m.SearchField("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:'subHeaderModel>/search/searchTerm',mode:sap.ui.model.BindingMode.OneWay}}).addStyleClass('help-id-catalogSearch');this.oAppFinderSearchControl.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:"",writeToDom:true}));this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}}});}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(m);return this.oAppFinderSearchContainer;},_updateSearchWithPlaceHolder:function(m){var s="";if(m==='catalog'){s="EasyAccessMenu_SearchPlaceHolder_Catalog";}else if(m==='userMenu'){s="EasyAccessMenu_SearchPlaceHolder_UserMenu";}else if(m==='sapMenu'){s="EasyAccessMenu_SearchPlaceHolder_SAPMenu";}if(s&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(sap.ushell.resources.i18n.getText(s));this.oAppFinderSearchControl.setTooltip(sap.ushell.resources.i18n.getText(s));}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter;}this.oAppFinderTagFilter=new sap.m.MultiComboBox("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",items:{path:"/tagList",sorter:new sap.ui.model.Sorter("tag",false,false),template:new sap.ui.core.ListItem({text:"{tag}",key:"{tag}"})},selectionChange:[this.oController.onTagsFilter,this.oController]}).addStyleClass('help-id-catalogTagFilter');return this.oAppFinderTagFilter;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.AppFinder";}});},false);},"sap/ushell/components/flp/launchpad/appfinder/Catalog.controller.js":function(){sap.ui.define(["sap/ushell/components/flp/launchpad/PagingManager"],function(P){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.Catalog",{oPopover:null,onInit:function(){this.categoryFilter="";this.oMainModel=this.oView.getModel();this.oSubHeaderModel=this.oView.getModel("subHeaderModel");var t=this,s=this.oSubHeaderModel.bindProperty("/tag/selectedTags"),S=this.oSubHeaderModel.bindProperty("/search"),T=this.oSubHeaderModel.bindProperty("/tag/tagMode");sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.getRoute("catalog").attachPatternMatched(function(e){t.onShow(e);});r.getRoute("appFinder").attachPatternMatched(function(e){t.onShow(e);});this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;S.attachChange(t.handleSearchModelChanged.bind(this));s.attachChange(t.handleSearchModelChanged.bind(this));T.attachChange(t.handleSearchModelChanged.bind(this));var o=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");o.attachChange(t.handleToggleButtonModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){}if(!this.PagingManager){this.lastCatalogId=0;this.PagingManager=new P('catalogPaging',{supportedElements:{tile:{className:'sapUshellTile'}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.getView().getCatalogContainer().setPagingManager(this.PagingManager);}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);});t._handleAppFinderWithDocking();sap.ui.getCore().getEventBus().subscribe("launchpad","appFinderWithDocking",t._handleAppFinderWithDocking,this);},_decodeUrlFilteringParameters:function(u){var U=u?JSON.parse(u):u,h=(U&&U.tagFilter&&U.tagFilter)||"";if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(U&&U.catalogSelector&&U.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(U&&U.tileFilter&&U.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(){if(this.categoryFilter){this.categoryFilter=sap.ushell.resources.i18n.getText('all')===this.categoryFilter?'':this.categoryFilter;this.getView().getModel().setProperty("/categoryFilter",this.categoryFilter);return;}if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,'');this.oSubHeaderModel.setProperty('/search',{searchMode:true,searchTerm:this.searchFilter});}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty('/tag',{tagMode:true,selectedTags:this.tagFilter});}},onShow:function(e){var v,u=e.getParameter('arguments').filters;v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}$.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(u);this._applyFilters();},resetPageFilter:function(){this.lastCatalogId=0;this.allocateTiles=this.PagingManager.getNumberOfAllocatedElements();this.getView().getCatalogContainer().setCategoryAllocateTiles(this.allocateTiles);},allocateNextPage:function(){var c=this.getView().getCatalogContainer();if(!this.nAllocatedTiles||this.nAllocatedTiles===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();c.setCategoryAllocateTiles(this.allocateTiles);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:f,targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify(p)},true);},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify(p)},true);},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:f?encodeURIComponent(f):"",tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog','filters':JSON.stringify(p)});},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},_isTagFilteringChanged:function(s){var S=s.length===this.tagFilter.length,i=S;if(!i){return true;}s.some(function(t,I){i=jQuery.inArray(t,this.tagFilter)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,S){var u={tileFilter:s&&s.length?encodeURIComponent(s):'',tagFilter:S.length?JSON.stringify(S):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog','filters':JSON.stringify(u)});},handleSearchModelChanged:function(){var a=this.oSubHeaderModel.getProperty('/activeMenu'),s=this.oSubHeaderModel.getProperty('/search/searchMode'),t=this.oSubHeaderModel.getProperty('/tag/tagMode'),p,S=this.oSubHeaderModel.getProperty('/search/searchTerm'),b=this.oSubHeaderModel.getProperty('/tag/selectedTags'),o,f=[],c;if(this.oView.getId().indexOf(a)!==-1){if(s||t){this.oView.setCategoryFilterSelection();if(!this.oView.oCatalogEntrySearchContainer.getBinding("customTilesContainer")){this.oView.oCatalogEntrySearchContainer.bindAggregation("customTilesContainer",{path:"/catalogSearchEntity/customTiles",template:this.oView.oTileTemplate,templateShareable:true});}if(!this.oView.oCatalogEntrySearchContainer.getBinding("appBoxesContainer")){this.oView.oCatalogEntrySearchContainer.bindAggregation("appBoxesContainer",{path:"/catalogSearchEntity/appBoxes",template:this.oView.oAppBoxesTemplate,templateShareable:true});}if(b&&b.length>0){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(T){var i,h;if(b.length===0){return true;}for(i=0;i<b.length;i++){h=b[i];if(T.indexOf(h)===-1){return false;}}return true;}.bind(this);f.push(o);}S=S?S.replace(/\*/g,''):S;if(S){var d=S.split(/[\s,]+/);var k=new sap.ui.model.Filter(jQuery.map(d,function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v));}),true);var e=new sap.ui.model.Filter($.map(d,function(v){return(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v));}),true);var g=new sap.ui.model.Filter($.map(d,function(v){return(v&&new sap.ui.model.Filter("subtitle",sap.ui.model.FilterOperator.Contains,v));}),true);f.push(k);f.push(e);f.push(g);}this.oView.oCatalogEntrySearchContainer.getBinding("customTilesContainer").filter(f);this.oView.oCatalogEntrySearchContainer.getBinding("appBoxesContainer").filter(f);c=this.oView.oCatalogEntrySearchContainer.getNumberResults();this.bSearchResults=(c.nAppboxes+c.nCustom>0);this.oView.oCatalogEntrySearchContainer.setAfterHandleElements(function(i){var n=i.getNumberResults();this.bSearchResults=(n.nAppboxes+n.nCustom>0);this.oView.splitApp.toDetail(this.getView()._calculateDetailPageId());}.bind(this));this._showHideSelectedMasterItem(false);if(this._isTagFilteringChanged(b)){this._setUrlWithTagsAndSearchTerm(S,b);}}else{this._showHideSelectedMasterItem(true);this.setCategoryFilter(this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);}else{this._restoreSelectedMasterItem();}},_handleAppFinderWithDocking:function(){if(jQuery(".sapUshellContainerDocked").length>0){if(jQuery("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}else{this.oView.splitApp.setMode(sap.m.SplitAppMode.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true);}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}}else{if(window.innerWidth<1024&&window.innerWidth>715){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(sap.m.SplitAppMode.ShowHideMode);}}},_showHideSelectedMasterItem:function(i){var c=this.oView.splitApp.getMasterPage('catalogSelect'),C=c.getSelectedItem();if(C){C.toggleStyleClass("sapUshellHideSelectedListItem",!i);}},_restoreSelectedMasterItem:function(){var c=this.oView.splitApp.getMasterPage('catalogSelect'),o=sap.ui.getCore().byId(this.selectedCategoryId);if(o){this.categoryFilter=o.getTitle();}c.setSelectedItem(o);},handleToggleButtonModelChanged:function(){var b=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible"),B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(B!=this.bCurrentButtonToggled){if(!sap.ui.Device.system.phone){if(b){if(B&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}}else{if(b){if(B&&!this.oView.splitApp.isMasterShown()){var c=sap.ui.getCore().byId('catalogSelect');this.oView.splitApp.backMaster(c);}else if(this.oView.splitApp.isMasterShown()){var d=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(d);}}}}this.bCurrentButtonToggled=B;},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);this.oSubHeaderModel.setProperty('/search/searchMode',false);this.oSubHeaderModel.setProperty('/tag/tagMode',false);if(sap.ui.Device.system.phone||sap.ui.Device.system.tablet){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',!this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled'));}this.handleSearchModelChanged();},onCategoryFilter:function(e){var m=e.getSource(),s=m.getSelectedItem(),S=s.getBindingContext(),M=S.getModel();if(M.getProperty("static",S)){M.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{M.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=jQuery(e.oSource.getDomRef()),a=j.find(".sapMGT");a.attr("tabindex","-1");},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var a=e.getSource(),t=a.getBindingContext().getObject(),p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=sap.ushell.Container.getService("LaunchPage").getAppBoxPressHandler(t);if(p){p(t);}else{var u=a.getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}else{window.open(u,'_blank');}}},onTilePinButtonClick:function(e){var l=sap.ushell.Container.getService("LaunchPage");var d=l.getDefaultGroup();d.done(function(D){var c=e.getSource(),s=c.getBindingContext(),m=this.getView().getModel(),g=m.getProperty("/groupContext/path");if(g){this._handleTileFooterClickInGroupContext(s,g);}else{var a=m.getProperty("/groups");var l=sap.ushell.Container.getService("LaunchPage");var b=this.getCatalogTileDataFromModel(s);var t=b.tileData.associatedGroups;var G=[];var i=0;var f=a.map(function(k){var r,n,T;r=l.getGroupId(k.object);n=!($.inArray(r,t)==-1);T={id:r,title:this._getGroupTitle(D,k.object),selected:n};G.push(T);i++;return{selected:n,initiallySelected:n,oGroup:k};}.bind(this));var h=jQuery("#groupsPopover-popover");if(h.length===1){var p=sap.ui.getCore().byId("sapUshellGroupsPopover");p.destroy();}var j=new sap.ui.view("sapUshellGroupsPopover",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",viewData:{groupData:f,title:l.getCatalogTileTitle(m.getProperty(s.sPath).src),enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),sourceContext:s,catalogModel:this.getView().getModel(),catalogController:this}});j.getController().setSelectedStart(G);j.open(c).then(this._handlePopoverResponse.bind(this,s,b));}}.bind(this));},_getGroupTitle:function(d,g){var l=sap.ushell.Container.getService("LaunchPage"),t;if(l.getGroupId(d)===l.getGroupId(g)){t=sap.ushell.resources.i18n.getText("my_group");}else{t=l.getGroupTitle(g);}return t;},_handlePopoverResponse:function(s,c,r){if(!r.addToGroups.length&&!r.newGroups.length&&!r.removeFromGroups.length){return;}var m=this.getView().getModel();var g=m.getProperty("/groups");var p=[];r.addToGroups.forEach(function(a){var i=g.indexOf(a);var G=new sap.ui.model.Context(m,"/groups/"+i);var b=this._addTile(s,G);p.push(b);}.bind(this));r.removeFromGroups.forEach(function(a){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(a);var b=this._removeTile(t,i);p.push(b);}.bind(this));r.newGroups.forEach(function(a){var n=(a.length>0)?a:sap.ushell.resources.i18n.getText("new_group_name");var b=this._createGroupAndSaveTile(s,n);p.push(b);}.bind(this));jQuery.when.apply(jQuery,p).then(function(){var a=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(c,r,a);}.bind(this));},_handlePopoverGroupsActionPromises:function(c,p,r){var e=r.filter(function(g,i,r){return!g.status;});if(e.length){var E=this.prepareErrorMessage(e,c.tileData.title);var d=sap.ushell.components.flp.launchpad.DashboardManager();d.resetGroupsOnFailure(E.messageId,E.parameters);return;}var t=[];var l=sap.ushell.Container.getService("LaunchPage");p.allGroups.forEach(function(g){if(g.selected){var h=l.getGroupId(g.oGroup.object);t.push(h);}});var m=this.getView().getModel();if(p.newGroups.length){var a=m.getProperty("/groups");var n=a.slice(a.length-p.newGroups.length);n.forEach(function(g){var h=l.getGroupId(g.object);t.push(h);});}m.setProperty(c.bindingContextPath+"/associatedGroups",t);var f=(!!p.addToGroups[0])?p.addToGroups[0].title:"";if(!f.length&&p.newGroups.length){f=p.newGroups[0];}var b=(!!p.removeFromGroups[0])?p.removeFromGroups[0].title:"";var D=this.prepareDetailedMessage(c.tileData.title,p.addToGroups.length+p.newGroups.length,p.removeFromGroups.length,f,b);sap.m.MessageToast.show(D,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=this._getCatalogTileIndexInModel(s),o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}d.resetGroupsOnFailure(e.messageId,e.parameters);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else{if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},getCatalogTileDataFromModel:function(s){var b=s.getPath(),m=s.getModel(),t=m.getProperty(b);return{tileData:t,bindingContextPath:b,isBeingProcessed:t.isBeingProcessed?true:false};},_addTile:function(t,g){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createTile({catalogTileContext:t,groupContext:g});p.done(function(b){a.resolve(b);});return a;},_removeTile:function(t,i){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(b){a.resolve(b);});return a;},_createGroupAndSaveTile:function(t,n){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b);});return a;},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);}});},false);},"sap/ushell/components/flp/launchpad/appfinder/Catalog.view.js":function(){sap.ui.define(['sap/ui/core/HTML','sap/ui/core/IconPool','sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton','sap/ushell/ui/launchpad/CatalogEntryContainer','sap/ushell/ui/launchpad/CatalogTileContainer','sap/ushell/ui/launchpad/CatalogsContainer','sap/ushell/ui/launchpad/Panel','sap/ushell/ui/launchpad/Tile','sap/ushell/ui/launchpad/TileContainerUtils'],function(H,I,A,P,C,a,b,c,T,d){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.Catalog",{oController:null,createContent:function(o){var t=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var m=this.parentComponent.getModel();this.setModel(m);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oController=o;function i(L){return((L!==null)&&(L==="1x2"||L==="2x2"))||false;}function f(v){return parseInt(v,10)||0;}function g(e,v,G,w,x,y){var z;if(w){var R=sap.ushell.resources.i18n,B=$.inArray(x,G);z=R.getText(B!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",y);}else{z=G&&G.length?v:e;}return z;}var h=new P({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,v,G,w){if(G){var x=$.inArray(w,e);return x!==-1;}else{return!!v;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,v,G,w,x,y,z){return g(e,v,G,x,y,z);}},press:[o.onTilePinButtonClick,o]});var j=new P({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,v,G,w){if(G){var x=$.inArray(w,e);return x!==-1;}else{return!!v;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,v,G,w,x,y,z){return g(e,v,G,x,y,z);}},press:[o.onTilePinButtonClick,o]});this.oAppBoxesTemplate=new A({title:'{title}',icon:'{icon}',subtitle:'{subtitle}',url:'{url}',navigationMode:'{navigationMode}',pinButton:j,press:[o.onAppBoxPressed,o]});j.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));j.addStyleClass("sapUshellPinButton");h.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));h.addStyleClass("sapUshellPinButton");this.oTileTemplate=new T({tileViews:{path:"content",factory:function(e,v){return v.getObject();}},"long":{path:"size",formatter:i},index:{path:"id",formatter:f},tileCatalogId:"{id}",pinButton:h,press:[o.catalogTilePress,o],afterRendering:o.onTileAfterRendering});this.oCatalogSelect=new sap.m.List("catalogSelect",{visible:"{/catalogSelection}",name:"Browse",rememberSelections:true,mode:"SingleSelectMaster",items:{path:"/masterCatalogs",template:new sap.m.StandardListItem({type:"Active",title:"{title}"})},showNoData:false,itemPress:[o._handleCatalogListItemPress,o]});this.getCatalogSelect=function(){return this.oCatalogSelect;};var k=this.oCatalogSelect.onAfterRendering;this.oCatalogSelect.addEventDelegate({onsaptabnext:function(v){try{v.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipforward:function(v){try{v.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipback:function(v){try{v.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var w=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(w.getVisible()){w.focus();}else{sap.ushell.components.flp.ComponentKeysHandler.appFinderFocusMenuButtons(v);}}catch(e){}}});if(m.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass('help-id-catalogCategorySelect');}this.setCategoryFilterSelection=function(e){var v=t.getCatalogSelect(),w=v.getItems(),x=t.oController.oSubHeaderModel.getProperty('/tag/tagMode'),y=t.oController.oSubHeaderModel.getProperty('/search/searchMode'),z=e;if(y||x){v.setSelectedItem();}else{w.forEach(function(L,B){if(L.getTitle()===z){v.setSelectedItem(L);}});}};this.oCatalogSelect.onAfterRendering=function(){var e=t.oController.categoryFilter||sap.ushell.resources.i18n.getText('all');t.setCategoryFilterSelection(e);if(k){k.apply(this,arguments);}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0]);}setTimeout(function(){var v=jQuery("#catalog, #userMenu, #sapMenu").filter("[tabindex=0]");if(v.length){v.eq(0).focus();}else{jQuery("#catalog").focus();}},0);};var l=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(l){l.apply(this,arguments);}};var E=sap.ui.getCore().getEventBus(),D,u=function(){this.splitApp.toMaster('catalogSelect','show');if(!sap.ui.Device.system.phone){D=this._calculateDetailPageId();if(D!=this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(D);}}};E.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(u.bind(this),500);},this);E.subscribe("launchpad","afterCatalogSegment",u,this);var n=new H("sapUshellCatalogAccessibilityTileText",{content:"<div style='height: 0px; width: 0px; overflow: hidden; float: left;'>"+sap.ushell.resources.i18n.getText("tile")+"</div>"});var p=new C({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new sap.m.MessagePage({visible:true,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});this.oCatalogsContainer=new b("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:p},busy:true});this.oCatalogsContainer.addStyleClass('sapUshellCatalogTileContainer');this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var v=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader"),w=jQuery(e.srcControl.getDomRef());if(v.getVisible()&&!v.getPressed()&&!w.hasClass("sapUshellPinButton")){e.preventDefault();var x=sap.ui.getCore().byId("appFinderSearch");x.focus();}},onsapskipback:function(e){var v=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(v.getVisible()&&!v.getPressed()){e.preventDefault();v.focus();}}});this.oCatalogsContainer.onAfterRendering=function(){var e=sap.ui.getCore().byId('catalogTilesDetailedPage');if(!this.getBusy()){e.setBusy(false);jQuery.sap.measure.end("FLP:AppFinderLoadingStartToEnd");}else{e.setBusy(true);}jQuery("#catalogTilesDetailedPage-cont").scroll(function(){var v=sap.ui.getCore().byId('catalogTilesDetailedPage'),w=v.getScrollDelegate(),x=w.getScrollTop(),y=w.getMaxScrollTop();if(y-x<=30+t.oController.PagingManager.getTileHeight()){t.oController.allocateNextPage();}});};this.oCatalogEntrySearchContainer=new C({header:"{i18n>results_count}"});this.oCatalogEntrySearchContainer.addStyleClass('sapUshellCatalogTileContainer');this.oCatalogsSearchContainer=new b("catalogSearchContainer",{catalogs:[this.oCatalogEntrySearchContainer]});this.wrapCatalogsContainerInDetailPage=function(e,v){var w=new sap.m.Page(v,{showHeader:false,showFooter:false,showNavButton:false,content:[new c({translucent:true,content:e}).addStyleClass("sapUshellCatalogPage")]});return w},this.getCatalogContainer=function(){return this.oCatalogsContainer;};new sap.m.Page({showHeader:false,showFooter:false,showNavButton:false,content:[new c({translucent:true,content:[n,this.getCatalogContainer()]}).addStyleClass("sapUshellCatalogPage")]});var q=this.wrapCatalogsContainerInDetailPage([n,this.getCatalogContainer()],'catalogTilesDetailedPage'),r=new sap.m.Page('catalogMessagePage',{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]}),s=this.wrapCatalogsContainerInDetailPage([this.oCatalogsSearchContainer],'catalogTilesSearchPage');s.addEventDelegate({onAfterShow:function(e){jQuery(".sapUshellTile").find('[tabindex*=0]').attr("tabindex",-1);jQuery(".sapUshellAppBox:visible, .sapUshellTile:visible").first().attr("tabindex",0);}});var S=new sap.m.BusyIndicator('catalogSelectBusyIndicator',{size:"1rem"});this.splitApp=new sap.m.SplitApp('catalogViewMasterDetail',{masterPages:[S,this.oCatalogSelect],detailPages:[q,s,r]});document.toSearch=function(){this.splitApp.toDetail('catalogTilesSearchPage');}.bind(this);document.toDetail=function(){this.splitApp.toDetail('catalogTilesDetailedPage');}.bind(this);document.toMessage=function(){this.splitApp.toDetail('catalogMessagePage');}.bind(this);return this.splitApp;},_calculateDetailPageId:function(){var s=this.getModel('subHeaderModel');var S=s.getProperty('/search/searchMode');var t=s.getProperty('/tag/tagMode');var e=this.getModel().getProperty("/catalogs");var i;if(S||t){i=this.getController().bSearchResults?'catalogTilesSearchPage':'catalogMessagePage';}else if(e&&!e.length){i="catalogMessagePage";}else{i="catalogTilesDetailedPage";}return i;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.Catalog";}});},false);},"sap/ushell/components/flp/launchpad/appfinder/EasyAccess.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.oView=this.getView();var e=this.oView.getModel("easyAccessSystemsModel");var s=e.bindProperty("/systemSelected");s.attachChange(t.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new sap.ui.model.json.JSONModel();this.oView.hierarchyFolders.setModel(this.easyAccessModel,"easyAccess");this.oView.hierarchyApps.setModel(this.easyAccessModel,"easyAccess");var S=this.oView.getModel("subHeaderModel");var T=S.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var o=S.bindProperty("/search");o.attachChange(t.handleSearchModelChanged.bind(this));}this.checkIfSystemSelectedAndLoadData();},onAfterRendering:function(){setTimeout(function(){this.oView.hierarchyApps.getController()._updateAppBoxedWithPinStatuses();}.bind(this),0);},checkIfSystemSelectedAndLoadData:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,s);}},navigateHierarchy:function(p,f){this.oView.hierarchyFolders.setBusy(false);var e=this.easyAccessModel.getProperty(p?p:"/");if(typeof e.folders!="undefined"){this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);return;}this.oView.hierarchyFolders.setBusy(true);this.getMenuItems(this.menuName,this.systemId,e.id,e.level).then(function(p,r){this.easyAccessModel.setProperty(p+"/folders",r.folders);this.easyAccessModel.setProperty(p+"/apps",r.apps);this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);this.oView.hierarchyFolders.setBusy(false);}.bind(this,p),function(a){this.handleGetMenuItemsError(a);}.bind(this));},handleSearch:function(s){var i=!this.hierarchyAppsSearchResults;if(i){this.hierarchyAppsSearchResults=new sap.ui.view(this.getView().getId()+"hierarchyAppsSearchResults",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this)}});this.easyAccessSearchResultsModel=new sap.ui.model.json.JSONModel();this.easyAccessSearchResultsModel.setSizeLimit(10000);this.hierarchyAppsSearchResults.setModel(this.easyAccessSearchResultsModel,"easyAccess");this.hierarchyAppsSearchResults.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);this.hierarchyAppsSearchResults.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));}this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(s,this.searchResultFrom).then(function(r){this.easyAccessSearchResultsModel.setProperty("/apps",r.results);this.easyAccessSearchResultsModel.setProperty("/total",r.count);this.searchResultFrom=r.results.length;if(i){this.oView.splitApp.addDetailPage(this.hierarchyAppsSearchResults);}this.hierarchyAppsSearchResults.updateResultSetMessage(parseInt(r.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==this.hierarchyAppsSearchResults){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults");}}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false);}.bind(this));},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}var s=this.oView.getModel("subHeaderModel");var S=s.getProperty("/search/searchTerm");this._getSearchResults(S,this.searchResultFrom).then(function(r){var c=this.easyAccessSearchResultsModel.getProperty("/apps");var n=c.slice();Array.prototype.push.apply(n,r.results);this.easyAccessSearchResultsModel.setProperty("/apps",n);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false)}this.searchResultFrom=n.length;}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}}.bind(this));},_getSearchResults:function(s,f){var d=new jQuery.Deferred();var S=this._getODataRequestForSearchUrl(this.menuName,this.systemId,s,f);var r={requestUri:S};var c=this._callODataService(r,this.handleSuccessOnReadFilterResults);c.done(function(a){d.resolve(a);});c.fail(function(e){d.reject(e);});return d.promise();},getSystemNameOrId:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){return s.name||s.id;}return;},adjustUiOnSystemChange:function(){var c=this.easyAccessModel.getData();if(this.systemId&&c&&c.id){this.easyAccessCache[this.systemId]=c;}var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;var n=this.easyAccessCache[this.systemId];if(n){this.easyAccessModel.setData(n);this.navigateHierarchy("",false);}else{this.oView.hierarchyFolders.setBusy(true);this.oView.hierarchyApps.setBusy(true);this.loadMenuItemsFirstTime(this.menuName,s);}}},handleToggleButtonModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/openCloseSplitAppButtonVisible");var B=s.getProperty("/openCloseSplitAppButtonToggled");var S=this.getView().splitApp;if(b){if(B&&!S.isMasterShown()){S.showMaster();}else if(S.isMasterShown()){S.hideMaster();}}},handleSearchModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var a=s.getProperty("/activeMenu");if(this.getView().getId().indexOf(a)===-1){return;}var S=s.getProperty("/search/searchTerm");var b=s.getProperty("/search/searchMode");if(b){sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(S){this.handleSearch(S);}}else{sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue('');this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps");}},loadMenuItemsFirstTime:function(m,s){return this.getMenuItems(m,s.systemId,"",0).then(function(r){r.text=s.systemName||s.systemId;this.easyAccessModel.setData(r);this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);this.navigateHierarchy("",false);}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.hierarchyFolders.updatePageBindings("/",false);this.oView.hierarchyApps.getController().updatePageBindings("/");}.bind(this));},handleGetMenuItemsError:function(e){var E=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(M){M.error(E);});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);},getErrorMessage:function(e){var m="";if(this.menuName=="SAP_MENU"){m=this.translationBundle.getText("easyAccessSapMenuNameParameter");}else if(this.menuName=="USER_MENU"){m=this.translationBundle.getText("easyAccessUserMenuNameParameter");}if(e){if(e.message){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e.message]);}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e]);}}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",m);}},getMenuItems:function(m,s,e,a,n){var d=new jQuery.Deferred();if(m!="SAP_MENU"&&m!="USER_MENU"){d.reject("Invalid menuType parameter");return d.promise();}if(typeof s!=="string"||s===""){d.reject("Invalid systemId parameter");return d.promise();}if(typeof e!=="string"){d.reject("Invalid entityId parameter");return d.promise();}if(typeof a!=="number"){d.reject("Invalid entityLevel parameter");return d.promise();}if(n&&typeof n!=="number"){d.reject("Invalid numberOfNextLevels parameter");return d.promise();}if(e==""){a=0;}var N;var M=this.getView().getModel();var c=M.getProperty("/easyAccessNumbersOfLevels");if(c){N=c;}else if(n){N=n;}else{N=this.DEFAULT_NUMBER_OF_LEVELS;}var l=a+N+1;var S=this._getODataRequestUrl(m,s,e,l);var r={requestUri:S};var C=this._callODataService(r,this.handleSuccessOnReadMenuItems,{systemId:s,entityId:e,iLevelFilter:l});C.done(function(b){d.resolve(b);});C.fail(function(b){d.reject(b);});return d.promise();},_callODataService:function(r,s,S){var t=this;var d=new jQuery.Deferred();if(!S){S={};}sap.ui.require(["sap/ui/thirdparty/datajs"],function(){OData.read(r,function(R,o){if(R&&R.results&&o&&o.statusCode===200){var a=s.bind(t,R,S)();d.resolve(a);}},function(m){d.reject(m);});});return d.promise();},handleSuccessOnReadMenuItems:function(r,p){var R=this._oDataResultFormatter(r.results,p.systemId,p.entityId,p.iLevelFilter);return R;},handleSuccessOnReadFilterResults:function(r){var u;r.results.forEach(function(R,i){u=this._appendSystemToUrl(R,this.systemId);R.url=u}.bind(this));return{results:r.results,count:r.__count}},_appendSystemToUrl:function(d,s){if(d.url){return d.url+(d.url.indexOf('?')>0?'&':'?')+'sap-system='+s;}},_oDataResultFormatter:function(r,s,e,l){var f={};var R={};if(e==""){R={id:"root",text:"root",level:0,folders:[],apps:[]};f.root=R;}else{R={id:e,folders:[],apps:[]};f[e]=R;}var o;for(var i=0;i<r.length;i++){o=r[i];var p;if(o.level=="01"){p=f["root"];}else{p=f[o.parentId];}var m={id:o.Id,text:o.text,subtitle:o.subtitle,icon:o.icon,level:parseInt(o.level,10)};if(o.type=='FL'){m.folders=[];m.apps=[];if(o.level==l-1){m.folders=undefined;m.apps=undefined;}if(p&&p.folders){p.folders.push(m);}f[o.Id]=m;}else{m.url=this._appendSystemToUrl(o,s);if(p&&p.apps){p.apps.push(m);}}}return R;},_getODataRequestUrl:function(m,s,e,l){var S=this._getServiceUrl(m);var L;if(l<10){L="0"+l;}else{L=l.toString();}var a="";if(e){if(decodeURIComponent(e)===e){e=encodeURIComponent(e);}a="('"+e+"')/AllChildren";}S=S+";o="+s+"/MenuItems"+a+"?$filter=level lt '"+L+"'&$orderby=level,text";return S;},_getODataRequestForSearchUrl:function(m,s,t,f){var S=this._getServiceUrl(m);var n=this.SEARCH_RESULTS_PER_REQUEST;var t=this._removeWildCards(t);var f=!f?0:f;S=S+";o="+s+"/MenuItems"+"?$filter=type ne 'FL' and substringof('"+t+"', text) or substringof('"+t+"', subtitle) or substringof('"+t+"', url)&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+f+"&$top="+n;return S;},_getServiceUrl:function(m){var s;var M=this.getView().getModel();if(m=="SAP_MENU"){var S=M.getProperty("/sapMenuServiceUrl");if(S){s=S;}else{s=this.DEFAULT_URL+"/EASY_ACCESS_MENU";}}else if(m=="USER_MENU"){var u=M.getProperty("/userMenuServiceUrl");if(u){s=u;}else{s=this.DEFAULT_URL+"/USER_MENU";}}return s;},_removeWildCards:function(t){return t.replace(/\*/g,"");}});},false);},"sap/ushell/components/flp/launchpad/appfinder/EasyAccess.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.EasyAccess",{BUSY_INDICATOR_DELAY:1000,createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.hierarchyFolders=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}});this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"navigation",writeToDom:true}));this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessListNavigationContainer"),writeToDom:true}));this.hierarchyApps=new sap.ui.view(this.getId()+"hierarchyApps",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c)}});this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyApps.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));this.splitApp=new sap.m.SplitApp({masterPages:this.hierarchyFolders,detailPages:this.hierarchyApps});this.splitApp.setInitialMaster(this.hierarchyFolders);this.splitApp.setInitialDetail(this.hierarchyApps);return this.splitApp;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.EasyAccess";}});},false);},"sap/ushell/components/flp/launchpad/appfinder/GroupListPopover.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",{onInit:function(){var v=this.getView(),g=v.getViewData().groupData;this.oPopoverModel=new sap.ui.model.json.JSONModel({userGroupList:g});v.oPopover.setModel(this.oPopoverModel);},okButtonHandler:function(e){e.preventDefault();e._bIsStopHandlers=true;var v=this.getView(),u=this.oPopoverModel.getProperty("/userGroupList"),r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};u.forEach(function(g){if(g.selected===g.initiallySelected){return;}if(g.selected){r.addToGroups.push(g.oGroup);}else{r.removeFromGroups.push(g.oGroup);}});if(v.newGroupInput&&v.newGroupInput.getValue().length){r.newGroups.push(v.newGroupInput.getValue());}v.oPopover.close();v.deferred.resolve(r);},_closeButtonHandler:function(e){e._bIsStopHandlers=true;var v=this.getView();v.oPopover.close();v.deferred.reject();},_createGroupAndSaveTile:function(t,n){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b);});return a;},groupListItemClickHandler:function(o){o.oSource.setSelected(!o.oSource.getSelected());var i=o.oSource.getBindingContextPath(),p=o.oSource.getModel(),s=o.oSource.getSelected()?true:false;this.addRemoveTileFromGroup(i,p,s);},getGroupsBeforeChanges:function(p){var m=this.getView().getViewData().sourceContext.oModel;return m.getProperty(p+"/associatedGroups");},getGroupsAfterChanges:function(p){var g=sap.ui.getCore().byId("groupsPopover");return g.getModel().getProperty("/userGroupList");},checkboxClickHandler:function(o){var v=this.getView(),p=v.getViewData().sourceContext.sPath,g=this.getGroupsBeforeChanges(p),G=this.getGroupsAfterChanges(),l=sap.ushell.Container.getService("LaunchPage"),P=o.oSource.getModel(),s=o.getParameter("selected"),a=0,i=0,d=false,b;while(l.isGroupLocked(G[i].oGroup.object)===true){i++;}for(i;i<G.length;i++){var e=false;if(d===true){break;}for(a=0;a<g.length;a++){if(l.getGroupId(G[i].oGroup.object)===g[a]){e=true;if(G[i].selected===false){d=true;b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}}if(G[i].selected===true&&e===false){b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}},addRemoveTileFromGroup:function(i,p,t){var a=this.getView(),c=this.getView().getViewData().catalogController,b=this.getView().getViewData().catalogModel,T=this.getView().getViewData().sourceContext,g=b.getProperty("/groups"),d=g.indexOf(p.getProperty(i).oGroup),G=new sap.ui.model.Context(b,"/groups/"+d),l=sap.ushell.Container.getService("LaunchPage"),s=l.getGroupId(b.getProperty("/groups/"+d).object);if(t){var A=c._addTile(T,G);A.done(function(f){var h=a.getViewData().sourceContext,C=b.getProperty(h+"/associatedGroups");C.push(s);b.setProperty(h+"/associatedGroups",C);})}else{var e=T.getModel().getProperty(T.getPath()).id,r=c._removeTile(e,d);r.done(function(f){var h=a.getViewData().sourceContext,C=b.getProperty(h+"/associatedGroups"),j=jQuery.inArray(s,C);if(j>=0){C.splice(j,1);}b.setProperty(h+"/associatedGroups",C);})}},_switchGroupsPopoverButtonPress:function(){var g="groupsPopover-popover";if(sap.ui.Device.system.phone){g="groupsPopover-dialog";}if(sap.ui.getCore().byId(g).getContent()[0].getId()==="newGroupNameInput"){var u=this.oPopoverModel.getProperty("/userGroupList"),r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};if(this.getView().newGroupInput.getValue().length){r.newGroups.push(this.getView().newGroupInput.getValue());}this.getView().oPopover.close();this.getView().deferred.resolve(r);}else{this._closeButtonHandler(this);}},_navigateToCreateNewGroupPane:function(){var v=this.getView();if(!v.headBarForNewGroup){v.headBarForNewGroup=v._createHeadBarForNewGroup();}if(!v.newGroupInput){v.newGroupInput=v._createNewGroupInput();}v.oPopover.removeAllContent();v.oPopover.addContent(v.newGroupInput);v.oPopover.setCustomHeader(v.headBarForNewGroup);v.oPopover.setContentHeight("");setTimeout(function(){v.oPopover.getBeginButton().setText(sap.ushell.resources.i18n.getText("okDialogBtn"));},0);if(v.oPopover.getEndButton()){v.oPopover.getEndButton().setVisible(true);}if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()==="newGroupNameInput")&&!v.oPopover.getEndButton()){v.oPopover.setEndButton(v._createCancelButton());};setTimeout(function(){v.oPopover.getEndButton().setText(sap.ushell.resources.i18n.getText("cancelBtn"));},0);if(v.getViewData().singleGroupSelection){this._setFooterVisibility(true);};setTimeout(function(){v.newGroupInput.focus();},0);},setSelectedStart:function(s){this.start=s;},_afterCloseHandler:function(){var v=this.getView(),c=this.getView().getViewData().catalogModel;if(c){var s=c.getProperty(this.getView().getViewData().sourceContext+"/associatedGroups");this.showToastMessage(s,this.start);}v.oGroupsContainer.destroy();if(v.headBarForNewGroup){v.headBarForNewGroup.destroy();}if(v.newGroupInput){v.newGroupInput.destroy();}v.oPopover.destroy();v.destroy();},showToastMessage:function(e,s){var a=0,r=0,f,b,c={};e.forEach(function(d,g){c[d]=d;});s.forEach(function(g,i){if(c[g.id]){if(g.selected===false){a++;f=g.title;}}else{if(g.selected===true){r++;b=g.title;}}});var m=this.getView().getViewData().catalogController.prepareDetailedMessage(this.getView().getViewData().title,a,r,f,b);if(m){sap.m.MessageToast.show(m,{duration:6000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}},_backButtonHandler:function(){var v=this.getView();v.oPopover.removeAllContent();if(v.getViewData().singleGroupSelection){this._setFooterVisibility(false);}if(!sap.ui.Device.system.phone){v.oPopover.setContentHeight(v.iPopoverDataSectionHeight+"px");}else{v.oPopover.setContentHeight("100%");}v.oPopover.setVerticalScrolling(true);v.oPopover.setHorizontalScrolling(false);v.oPopover.addContent(v.oGroupsContainer);v.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));v.oPopover.setCustomHeader();v.newGroupInput.setValue('');if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()!="newGroupNameInput")){v.oPopover.getEndButton().setVisible(false);};setTimeout(function(){v.oPopover.getBeginButton().setText(sap.ushell.resources.i18n.getText("close"));},0);},_setFooterVisibility:function(v){var f=sap.ui.getCore().byId("groupsPopover-footer");if(f){f.setVisible(v);}}});},false);},"sap/ushell/components/flp/launchpad/appfinder/GroupListPopover.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",{createContent:function(c){this.iPopoverDataSectionHeight=192;this.oGroupsContainer=this._createPopoverContainer(this.iPopoverDataSectionHeight);this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:"Auto",title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',beginButton:this._createCloseButton(),content:this.oGroupsContainer,afterClose:this.getController()._afterCloseHandler.bind(this.getController())});this.oPopover.setInitialFocus('newGroupItem');},open:function(o){if(document.body.clientHeight-o.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom");}this.oPopover.openBy(o);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false);}this.deferred=jQuery.Deferred();return this.deferred.promise();},_createPopoverContainer:function(p){var n=this._createNewGroupUiElements(),g=this._createPopoverGroupList();var a=new sap.m.ScrollContainer({id:"popoverContainer",horizontal:false,vertical:true,content:[n,g]});if(!sap.ui.Device.system.phone){a.setHeight((p-2)+"px");}else{a.setHeight("100%");}return a;},_createNewGroupUiElements:function(){var n=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:this.getController()._navigateToCreateNewGroupPane.bind(this.getController())});var N=new sap.m.List({});if(this.getViewData().enableHelp){n.addStyleClass('help-id-newGroupItem');}N.addItem(n);N.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#popoverContainer .sapMListModeMultiSelect li, #popoverContainer .sapMListModeSingleSelectMaster li").first();j.focus();}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#closeButton");j.focus();}catch(e){}}});return N;},_createNewGroupInput:function(){var n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;n.addStyleClass("sapUshellCatalogNewGroupInput");return n;},_createHeadBarForNewGroup:function(){var b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:this.getController()._backButtonHandler.bind(this.getController()),tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");var h=new sap.m.Bar({contentLeft:[b],contentMiddle:[new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")})]});return h;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.GroupListPopover";},_createPopoverGroupList:function(){var l=new sap.m.DisplayListItem({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:sap.m.ListType.Active,press:this.getController().groupListItemClickHandler.bind(this.getController())});var u=[];u.push(new sap.ui.model.Filter("oGroup/isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getViewData().enableHideGroups){u.push(new sap.ui.model.Filter("oGroup/isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}var s=this.getViewData().singleGroupSelection,L=new sap.m.List({mode:s?sap.m.ListMode.SingleSelectMaster:sap.m.ListMode.MultiSelect,growing:true,growingThreshold:200,items:{path:"/userGroupList",template:l,filters:u}});if(s){L.attachSelect(this.getController().okButtonHandler.bind(this.getController()));}else{L.attachSelectionChange(this.getController().checkboxClickHandler.bind(this.getController()));}L.addEventDelegate({onsapup:function(E){try{E.preventDefault();var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}catch(e){jQuery.sap.log.error("Groups popup Accessibility `up` key failed");}}});return L;},_createOkButton:function(){var o=new sap.m.Button({id:"okButton",press:this.getController().okButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){jQuery.sap.log.error("Groups popup Accessibility `shift-tab` key failed");}}});return o;},_createCancelButton:function(){return new sap.m.Button({id:"cancelButton",press:this.getController()._closeButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("cancelBtn")});},_createCloseButton:function(){return new sap.m.Button({id:"closeButton",press:this.getController()._switchGroupsPopoverButtonPress.bind(this.getController()),text:sap.ushell.resources.i18n.getText(sap.ushell.resources.i18n.getText("close"))});}});},false);},"sap/ushell/components/flp/launchpad/appfinder/HierarchyApps.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems");}},getCrumbsData:function(p,m){var a=p.split("/");a.splice(a.length-2,2);var n=[];while(a.length){var P=a.join("/");var t=m.getProperty(P+"/text");n.unshift({text:t,path:P});a.splice(a.length-2,2);}return n;},_updateAppBoxedWithPinStatuses:function(p){var v=this.getView();if(!p){p=v.layout.getBinding("items").getPath();}var e=v.getModel("easyAccess");var a=e.getProperty(p)?e.getProperty(p):[];var b=sap.ushell.Container.getService("Bookmark");var c=a.map(function(d){return b.countBookmarks(d.url).then(function(f){d.bookmarkCount=f;return d;});});jQuery.when.apply(jQuery,c).then(function(){var a=Array.prototype.slice.call(arguments);e.setProperty(p,a);});},updatePageBindings:function(p){this.getView().layout.bindAggregation("items","easyAccess>"+p+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(p+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+p+"/text");var c=this.getCrumbsData(p,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",c);var n=this.getView().getModel("easyAccess").getProperty(p+'/apps');this.getView().updateResultSetMessage(n.length,false);},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}var u=e.getSource().getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}},_handleSuccessMessage:function(a,p){var m;var n=p.addToGroups?p.addToGroups.length:0;var b=p.newGroups?p.newGroups.length:0;var t=n+b;if(t===1){var g;if(n===1){g=p.addToGroups[0].title;}else{g=p.newGroups[0];}m=sap.ushell.resources.i18n.getText("appAddedToSingleGroup",[a.text,g]);}else{m=sap.ushell.resources.i18n.getText("appAddedToSeveralGroups",[a.text,t]);}if(t>0){sap.m.MessageToast.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}return m;},_prepareErrorMessage:function(e,a){var g,A,f,n=0,c=false,m;for(var i in e){g=e[i].group;A=e[i].action;if(A=='addBookmark_ToExistingGroup'){n++;if(n==1){f=g.title;}}else if(A=='addBookmark_ToNewGroup'){n++;if(n==1){f=g;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[a,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[a]});}return m;},_handleBookmarkAppPopoverResponse:function(a,p){var b=[];p.newGroups.forEach(function(g){b.push(this._createGroupAndAddBookmark(g,a));}.bind(this));p.addToGroups.forEach(function(g){b.push(this._addBookmark(g,a));}.bind(this));jQuery.when.apply(jQuery,b).then(function(){var r=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(a,p,r);}.bind(this));},_handlePopoverGroupsActionPromises:function(a,p,r){var e=r.filter(function(b,i,r){return!b.status;});if(e.length){var E=this._prepareErrorMessage(e,a.text);var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.resetGroupsOnFailure(E.messageId,E.parameters);return;}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(a,p);},_createGroupAndAddBookmark:function(n,a){var d=sap.ushell.components.flp.launchpad.getDashboardManager();var b=jQuery.Deferred(),r={};var c=d.createGroup(n);c.done(function(e){var f=this._addBookmark(e.getObject(),a,true);f.done(function(g){b.resolve(g);}).fail(function(){r={group:n,status:0,action:'addBookmark_ToNewGroup'};b.resolve(r);});}.bind(this)).fail(function(){r={group:n,status:0,action:'addBookmark_NewGroupCreation'};b.resolve(r);});return b.promise();},_addBookmark:function(g,a,i){var b=sap.ushell.Container.getService("Bookmark");var d=jQuery.Deferred(),r={};var c=b.addBookmark({url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon},g.object);var e=i?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";c.done(function(){r={group:g,status:1,action:e};d.resolve(r);}).fail(function(){r={group:g,status:0,action:e};d.resolve(r);});return d.promise();},showSaveAppPopover:function(e){var m=this.getView().getModel();var a=e.oSource.getParent().getBinding("title").getContext().getObject();if(!!m.getProperty("/groupContext").path){var g=m.getProperty("/groupContext").path;var G=m.getProperty(g);var c={newGroups:[],addToGroups:[G]};this._handleBookmarkAppPopoverResponse(a,c);return;}var b=m.getProperty("/groups").map(function(f){return{selected:false,initiallySelected:false,oGroup:f};});var p=new sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",viewData:{groupData:b,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),singleGroupSelection:true}});var d=p.open(e.oSource);d.then(this._handleBookmarkAppPopoverResponse.bind(this,a));},resultTextFormatter:function(s,t){var r=sap.ushell.resources.i18n;if(s){var S=s.systemName?s.systemName:s.systemId;var R="";if(t){R=r.getText('search_easy_access_results',[t,S]);}return R;}return"";},showMoreResultsVisibilityFormatter:function(a,t){if(a&&a.length<t){return true;}return false;},showMoreResultsTextFormatter:function(a,t){if(!a||!t){return"";}var c=a.length;return sap.ushell.resources.i18n.getText('EasyAccessSearchResults_ShowMoreResults',[c,t]);}});},true);},"sap/ushell/components/flp/launchpad/appfinder/HierarchyApps.view.js":function(){sap.ui.define(['sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton'],function(A,P){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",{createContent:function(c){this.oController=c;function g(G,b,s,a,d){var r=sap.ushell.resources.i18n,t;if(s){var i=jQuery.inArray(a,G);var T=i!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=r.getText(T,d);}else{t=b?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new P({icon:'sap-icon://pushpin-off',selected:{path:"easyAccess>bookmarkCount",formatter:function(b){return(!!b);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,b,s,a,d){return g(G,b,s,a,d);}},press:c.showSaveAppPopover.bind(c)});p.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[c.onAppBoxPressed,c]});this.oItemTemplate.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new sap.m.FlexBox(this.getId()+'_hierarchyAppsLayout',{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:sap.m.FlexWrap.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(a){if(a.getKey()==="tabindex"){a.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new sap.m.MessagePage({visible:false,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});var C=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new sap.ui.model.json.JSONModel({crumbs:[]});this.linkTemplate=new sap.m.Link({text:"{crumbs>text}",press:function(e){var a=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(a.path,false);}.bind(this)});this.breadcrumbs=new sap.m.Breadcrumbs({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");C.push(this.breadcrumbs);}else{this.resultText=new sap.m.Text({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:c.resultTextFormatter.bind(c)}}).addStyleClass('sapUshellEasyAccessSearchResultText');this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"3",writeToDom:true}));C.push(this.resultText);this.showMoreResultsLink=new sap.m.Button({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsTextFormatter.bind(c)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsVisibilityFormatter.bind(c)},type:sap.m.ButtonType.Transparent});}C.push(this.oMessagePage);C.push(this.layout);if(this.showMoreResultsLink){C.push(this.showMoreResultsLink)}return C;},updateResultSetMessage:function(i,I){var e;if(I){e='noFilteredItems';}else{e='EasyAccessMenu_NoAppsToDisplayMessagePage_Text';}if(i){if(I){this.resultText.updateProperty('text');this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=sap.ushell.resources.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(b){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(b);}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps";}});},true);},"sap/ushell/components/flp/launchpad/appfinder/HierarchyFolders.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(s){if(s){this.setSystemSelected(s);}else{this.setSystemSelected(undefined);this.onSystemSelectionPress();}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress();});},onExit:function(){if(this.oDialog){this.destroyDialog();}},onAfterRendering:function(){var j=jQuery('#'+this.getView().getId());j.on("click",function(e){this.exitSearchMode();}.bind(this));},getPersonalizer:function(){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"flp.launchpad.appfinder.HierarchyFolders",item:"lastSelectedSystem"};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;},getSelectedSystem:function(){var d=new jQuery.Deferred();var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length===1){var e=s[0];this.setSystemSelectedInPersonalization(e);d.resolve(e);}else{this.getSelectedSystemInPersonalization().then(function(p){if(p){var S=false;for(var i=0;i<s.length;i++){if((s[i].systemName&&s[i].systemName===p.systemName)||(s[i].systemId===p.systemId)){S=true;d.resolve(p);}}if(!S){d.resolve();this.setSystemSelectedInPersonalization();}}else{d.resolve();}}.bind(this));}return d.promise();},setSystemSelected:function(s){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",s);this.setSystemSelectedInPersonalization(s);},getSelectedSystemInPersonalization:function(){var d=new jQuery.Deferred();this.getPersonalizer().getPersData().then(function(p){if(p){d.resolve(p);}else{d.resolve();}},function(e){jQuery.sap.log.error("Failed to get selected system from the personalization",e,"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders");d.reject();});return d.promise();},setSystemSelectedInPersonalization:function(s){this.getPersonalizer().setPersData(s).fail(function(e){jQuery.sap.log.error("Failed to save selected system in the personalization",e,"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders");});},onSystemSelectionPress:function(){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length<=1){return;}var d=this.createDialog();d.open();},createDialog:function(){var t=this;if(!this.oDialog){this.oDialog=new sap.m.SelectDialog({id:"systemSelectionDialog",title:t.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new sap.m.StandardListItem({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:t.titleFormatter},description:{parts:["systemName","systemId"],formatter:t.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:t.selectedFormatter.bind(this)}})},confirm:t.systemConfirmHandler.bind(t),search:t.systemSearchHandler.bind(t),cancel:t.destroyDialog.bind(t)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"));}return this.oDialog;},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null;},systemConfirmHandler:function(e){var i=e.getParameters().selectedItem;var s=i.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog();},systemSearchHandler:function(e){var v=e.getParameter("value");var f=new sap.ui.model.Filter("systemName",sap.ui.model.FilterOperator.Contains,v);var F=new sap.ui.model.Filter("systemId",sap.ui.model.FilterOperator.Contains,v);var s=new sap.ui.model.Filter({filters:[F,f],and:false});var b=e.getSource().getBinding("items");b.filter(s);},titleFormatter:function(s,a){return s||a;},descriptionFormatter:function(s,a){if(s){return a;}return null;},selectedFormatter:function(s,a){var u=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!u){return false;}if(s){return(u.systemName===s);}else{return(u.systemId===a);}},systemSelectorTextFormatter:function(s){if(s){if(s.systemName){return s.systemName;}else{return s.systemId;}}else{return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem");}},exitSearchMode:function(){var s=this.getView().getModel('subHeaderModel');s.setProperty('/search/searchMode',false);s.refresh(true);}});},true);},"sap/ushell/components/flp/launchpad/appfinder/HierarchyFolders.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",{createContent:function(c){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.treePath="";this.systemSelectorText=new sap.m.Text({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:c.systemSelectorTextFormatter.bind(c)}});this.oItemTemplate=new sap.m.StandardListItem({title:"{easyAccess>text}",type:"Navigation",press:function(){var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new sap.m.List({showSeparators:sap.m.ListSeparators.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var l=this.getItems();t.finishEasyAccessAnimation(true);l.forEach(function(L){L.onsapspace=L.onsapenter;});},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this.pageMenu=new sap.m.Page({showNavButton:false,enableScrolling:true,headerContent:new sap.m.Bar({contentLeft:[new sap.m.Label({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:c.systemSelectorTextFormatter.bind(c)}})],contentRight:[new sap.m.Button({text:this.translationBundle.getText("action_change"),type:sap.m.ButtonType.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},press:[c.onSystemSelectionPress,c]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});this.pageMenu.attachNavButtonPress(function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this));return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var b=this.pageMenu.$().find(".sapMBarLeft button");if(b.length){b.focus();}else{setTimeout(function(){this.pageMenu.$().find("header + header").focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this.pageMenu.setShowNavButton(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});},true);},"sap/ushell/components/flp/launchpad/dashboard/DashboardContent.controller.js":function(){sap.ui.define(['./DashboardUIActions','sap/ushell/ui/launchpad/TileContainer','sap/ushell/utils'],function(D,T,u){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.isActionModeInited=false;this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe("launchpad","appClosed",this._resizeHandler,this);e.subscribe("launchpad","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe('launchpad','actionModeInactive',this._handleGroupVisibilityChanges,this);e.subscribe("launchpad",'animationModeChange',this._handleAnimationModeChange,this);e.subscribe("launchpad",'switchTabBarItem',this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",u.handleTilesVisibility,false);this.sViewId="#"+this.oView.getId();if(sap.ui.Device.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(sap.ui.Device.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0));this.isNotificationPreviewLoaded=false;this._setCenterViewPortShift();},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("launchpad","appClosed",this._resizeHandler,this);e.unsubscribe("launchpad","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad",'switchTabBarItem',this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",u.handleTilesVisibility,false);},onAfterRendering:function(){var e=sap.ui.getCore().getEventBus(),m,t,g,i,a;e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);sap.ui.Device.orientation.attachHandler(function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible');if(j.length){m=this.getView().getModel();t=m.getProperty('/topGroupInViewPortIndex');if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty('/editTitle');this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);jQuery(window).bind("resize",function(){clearTimeout(a);a=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));if(this.getView().getModel().getProperty("/personalization")&&!this.isActionModeInited){sap.ui.require(["sap/ushell/components/flp/ActionMode"],function(A){A.init(this.getView().getModel());}.bind(this));this.isActionModeInited=true;}this._updateTopGroupInModel();},_setCenterViewPortShift:function(){var v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(true);}},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),o=t.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(o)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},dashboardTilePress:function(e){var t=e.getSource();if(t&&document.activeElement.tagName!=="INPUT"){if(t&&sap.ui.getCore().byId(t.getId())){sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(t.$());}}sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick");},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();m.setProperty('/iSelectedGroup',t);m.setProperty('/topGroupInViewPortIndex',t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),j=$(s).find('.sapUshellTileContainer'),o=j.not('.sapUshellHidden').first().offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,a=0;if(!j||!o){return a;}j.each(function(){if(!jQuery(this).hasClass("sapUshellHidden")){var c=jQuery(this).parent().offset().top;t.push([c,c+jQuery(this).parent().height()]);}});var b=n+f;jQuery.each(t,function(i,c){var e=c[0],g=c[1];if(e-24<=b&&b<=g){a=i;return false;}});return a;},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=400;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){u.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);if(!sap.ui.Device.system.phone){v.oAnchorNavigationBar.closeOverflowPopup();}if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,a=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A,c,v=this.getView();sap.ui.require(['sap/m/MessageBox'],function(M){A=M.Action;c=(i?A.DELETE:r.getText('ResetGroupBtn'));m.confirm(r.getText(i?'delete_group_msg':'reset_group_msg',s),function(o){if(o===c){e.publish("launchpad",i?'deleteGroup':'resetGroup',{groupId:a});}},r.getText(i?'delete_group':'reset_group'),[c,A.CANCEL]);v.oAnchorNavigationBar.updateVisibility();});},_modelLoaded:function(){this.bModelInitialized=true;sap.ushell.Layout.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){this.oDashboardUIActionsModule=new D();this.oDashboardUIActionsModule.initializeUIActions(this);},_forceBrowserRerenderElement:function(e){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(a){a(function(){var d=e.style.display;e.style.display='none';e.style.display=d;});}else{jQuery.sap.log.info('unsupported browser for animation frame');}},_webkitMobileRenderFix:function(){if(sap.ui.Device.browser.chrome||sap.ui.Device.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){this._addBottomSpace();u.handleTilesVisibility();var i=jQuery.find("#dashboardGroups:visible").length;if(sap.ushell.Layout&&i){sap.ushell.Layout.reRenderGroupsLayout(null);this._initializeUIActions();}},_handleAnimationModeChange:function(c,e,a){var m=this.getView().getModel();m.setProperty('/animationMode',a);},_appOpenedHandler:function(c,e,d){var v,p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){u.setTilesNoVisibility();v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}}if(sap.ushell.components.flp.ActionMode&&sap.ushell.components.flp.ActionMode.oModel&&sap.ushell.components.flp.ActionMode.oModel.getProperty("/tileActionModeActive")){sap.ushell.components.flp.ActionMode.toggleActionMode(m,"Menu Item");}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction();}},_addBottomSpace:function(){u.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,v=this.oView.oDashboardGroupsBox.getGroups(),f=d.fromTop>0?d.fromTop:0;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(v){jQuery.each(v,function(n,G){if(G.getGroupId()===g){var y=document.getElementById(G.sId).offsetTop;jQuery('.sapUshellDashboardView section').stop().animate({scrollTop:y+f},0);sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(jQuery("#"+G.getId()+" li").first());return false;}});u.addBottomSpace();}},_scrollToGroupByName:function(c,e,d){var g=this.getView().getModel().getProperty("/groups"),G=d.groupName,l=sap.ushell.Container.getService('LaunchPage');jQuery.each(g,function(n,o){if(l.getGroupTitle(o.object)===G){this._scrollToGroup(c,e,{groupId:o.groupId});}}.bind(this));},_scrollToGroup:function(c,e,d,i){var g,i=d.iDuration==undefined?500:d.iDuration,v=this.getView(),m=v.getModel(),M=m.getProperty('/animationMode')==='minimal',t=this;if(M){i=0;}if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}t.iAnimationDuration=i;if(this.oView.oDashboardGroupsBox.getGroups()){jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;setTimeout(function(){y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;var a=jQuery(document.getElementById(G.sId)).find(".sapUshellTileContainerHeader").height();var b=jQuery(document.getElementById(G.sId)).find(".sapUshellTileContainerBeforeContent").height();var I=G.getModel().getProperty('/tileActionModeActive');y=a>0&&!I?y+48:y+b+8;jQuery('.sapUshellDashboardView section').stop().animate({scrollTop:y},t.iAnimationDuration,function(){if(d.groupChanged){if(!d.restoreLastFocusedTile){sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(jQuery("#"+G.getId()+" li").first());}}if(d.restoreLastFocusedTile){var s="#"+G.getId();var l=false;if(d.restoreLastFocusedTileContainerById){s="#"+d.restoreLastFocusedTileContainerById;l=true;}sap.ushell.components.flp.ComponentKeysHandler.goToLastVisitedTile(jQuery(s),l);}});if(d.isInEditTitle){G.setEditMode(true);}},0);if(d.groupId||d.groupChanged){t._addBottomSpace();}u.handleTilesVisibility();return false;}});}},_handleDrop:function(e,a){var l=sap.ushell.Layout.getLayoutEngine(),t=l.layoutEndCallback(),i=!t.dstArea,E=sap.ui.getCore().getEventBus(),n,b,s,d=jQuery.Deferred(),v=this.getView(),m=v.getModel(),c=m.getProperty('/homePageGroupDisplay')&&m.getProperty('/homePageGroupDisplay')==='tabs',f=m.getProperty('/tileActionModeActive'),I=true,g=!!(m.getProperty("/personalization")&&(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge)&&sap.ui.Device.browser.version>=11&&(sap.ui.Device.system.combi||sap.ui.Device.system.tablet)),p=sap.ushell.Container.getService("LaunchPage"),o=t.tile.getBindingContext().getObject().object,h=p.isLinkPersonalizationSupported(o);sap.ushell.Layout.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(t.dstGroup){var j=t.dstGroup.getBindingContext(),k=j.getProperty(j.sPath).isGroupLocked;I=i&&k;}if(!t.tileMovedFlag||(g&&l.isTabBarCollision())||I||(!h&&t.dstArea==='links')){E.publish("launchpad","sortableStop");return;}if(!f&&!c&&t.dstArea==="links"&&!t.dstGroupData.getLinks().length){E.publish("launchpad","sortableStop");return;}n=true;b=true;if((t.srcGroup!==t.dstGroup)){n=b=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){b=false;}s=this._getTileUuid(t.tile);if(t.srcGroup&&t.srcGroup.removeAggregation&&t.srcArea){t.srcGroup.removeAggregation('tiles',t.tile,n);}var S=t.dstGroupData&&t.dstGroupData.insertAggregation&&t.dstArea===t.srcArea;if(S){t.tile.sParentAggregationName=t.dstArea;t.dstGroupData.insertAggregation(t.dstArea,t.tile,t.dstTileIndex,b);this._showDropToastMessage(t);d=this._handleSameTypeDrop(t,s,S);}else{this._showDropToastMessage(t);if(i){d=this._handleShortDrop(t,s,S);}else{d=this._handleConvertDrop(t,S,a);}}if(this.getView().getModel()){this.getView().getModel().setProperty('/draggedTileLinkPersonalizationSupported',true);}E.publish("launchpad","sortableStop");return d.promise();},_showDropToastMessage:function(t){var s=this._getTileTitle(t),d=t.dstGroup.getHeaderText?t.dstGroup.getHeaderText():t.dstGroup.getTitle(),a=sap.ushell.resources.i18n.getText('added_tile_to_group'),b=s+' '+a+' '+d,c=t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,e=t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId;if(c!==e){sap.m.MessageToast.show(sap.ushell.resources.i18n.getText(b));}},_handleSameTypeDrop:function(t,s,S){var e=sap.ui.getCore().getEventBus(),d=jQuery.Deferred();t.tile._getBindingContext().oModel.setProperty(t.tile._getBindingContext().sPath+'/draggedInTabBarToSourceGroup',false);e.publish("launchpad","movetile",{sTileId:s,sToItems:t.dstArea?t.dstArea:"tiles",sFromItems:t.srcArea?t.srcArea:"tiles",sTileType:t.dstArea?t.dstArea.substr(0,t.dstArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:S,callBack:function(){d.resolve();}});return d.promise();},_handleShortDrop:function(t,s,S){var e=sap.ui.getCore().getEventBus(),d=jQuery.Deferred();e.publish("launchpad","movetile",{sTileId:s,sToItems:t.srcArea||"tiles",sFromItems:t.srcArea||"tiles",sTileType:t.srcArea?t.srcArea.substr(0,t.srcArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:S,callBack:function(){d.resolve();}});return d.promise();},_handleConvertDrop:function(t,s,a){var e=sap.ui.getCore().getEventBus(),d=jQuery.Deferred();e.publish("launchpad","convertTile",{toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,tile:sap.ui.getCore().byId(a.id),srcGroupId:t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_getTileTitle:function(t){var m=this.getView().getModel(),b=t.tile.getBindingContext().getPath(),o=m.getProperty(b).object,s=sap.ushell.Container.getService('LaunchPage').getTileTitle(o);return s;},_getTileUuid:function(t){var s=t.getMode?t.getMode():'ContentMode',a;if(s==='LineMode'){a=t.getUuid?t.getUuid():t.getBindingContext().getObject().uuid;}else{a=t.getUuid?t.getUuid():t.getBindingContext().getObject().getParent().getUuid();}return a;},_handleDrag:function(e,a){var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback(),p=sap.ushell.Container.getService("LaunchPage"),o=t.tile.getBindingContext().getObject().object,i=p.isLinkPersonalizationSupported(o),v=this.getView(),m=v.getModel();if(m){m.setProperty('/draggedTileLinkPersonalizationSupported',i);}},_handleTabBarItemPressEventHandler:function(c,e,d){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups"),G=d.iGroupIndex;for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+G+"/isGroupSelected",true);this._handleTabBarItemPress(c,e,G);},_handleTabBarItemPress:function(c,e,g,E){var v=this.getView(),m=v.getModel(),G=m.getProperty("/groups"),s,h=0,f,i;if(E){s=E.getParameter("group").getIndex();}else{s=g;}sap.ui.getCore().getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:s});for(i=0;i<s;i++){if(!G[i].isGroupVisible||!G[i].visibilityModes[0]){h++;}}f=s-h;v.oDashboardGroupsBox.removeLinksFromUnselectedGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){sap.ushell.utils.handleTilesVisibility();},0);},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel(),s=m.getProperty("/iSelectedGroup"),g,i;if(sap.ui.Device.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}if(s!==undefined){m.setProperty("/groups/"+s+"/isGroupSelected",false);}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);m.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e);}else{if(!m.getProperty("/tileActionModeActive")){v.oDashboardGroupsBox.getBinding("groups").filter([new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true)]);}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter('group'),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(d){var i,p=d.getSource().getBindingContext().getPath(),a=p.split("/");i=window.parseInt(a[a.length-1],10);if(d.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i,isRendered:true});},_notificationsUpdateCallback:function(){var t=this,r=5,a=0,R=this.getView().getModel().getProperty("/previewNotificationItems"),n=[],N=[],b,c,d,e,f,i,o,g=false,m=r-R.length-1;sap.ushell.Container.getService("Notifications").getNotifications().done(function(h){if(!h){return;}var j=sap.ui.getCore().byId("notifications-preview-container"),v;if(!this.isNotificationPreviewLoaded){j.setEnableBounceAnimations(true);}if(R&&R.length){for(f=0;f<R.length;f++){var O=R[f].originalItemId,k=false;for(i=0;i<h.length;i++){if(h[i].Id===O){k=true;break;}if(R[f].originalTimestamp>h[i].CreatedAt){break;}}if(!k){R.splice(f,1);g=true;f--;}}}if(R&&R.length>0){b=R[0].originalTimestamp;c=sap.ushell.Container.getService("Notifications")._formatAsDate(b);}for(f=0;(f<h.length)&&(a<r);f++){d=h[f].CreatedAt;e=sap.ushell.Container.getService("Notifications")._formatAsDate(d);if((c?e>c:true)){n[a]=h[f];a++;}}var l=n.length;if(R&&R.length>0&&R.length<r&&h.length>R.length){b=R[R.length-1].originalTimestamp;c=sap.ushell.Container.getService("Notifications")._formatAsDate(b);a=0;for(f=0;(f<h.length)&&(a<=m);f++){d=h[f].CreatedAt;e=sap.ushell.Container.getService("Notifications")._formatAsDate(d);if(e<c){n[l+a]=h[f];a++;}}}if(n.length===0&&!g){this._disableNotificationPreviewBouncingAnimation(j);return;}for(i=0;i<n.length;i++){o=new sap.m.NotificationListItem({hideShowMoreButton:true,title:n[i].SensitiveText?n[i].SensitiveText:n[i].Text,description:n[i].SubTitle,datetime:u.formatDate(n[i].CreatedAt),priority:sap.ui.core.Priority[n[i].Priority.charAt(0)+n[i].Priority.substr(1).toLowerCase()],press:function(E){var s=this.getBindingContext().getPath(),p=s.split("/"),P="/"+p[1]+"/"+p[2],q=this.getModel().getProperty(P),S=q.NavigationTargetObject,A=q.NavigationTargetAction,w=q.NavigationTargetParams,x=q.originalItemId,y=sap.ushell.Container.getService("Notifications");u.toExternalWithParameters(S,A,w);var z=y.markRead(x);z.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedMarkRead'));});},close:function(E){var s=this.getBindingContext().getPath(),p=s.split("/"),P="/"+p[1]+"/"+p[2],q=this.getModel().getProperty(P),w=q.originalItemId,R=t.getView().getModel().getProperty("/previewNotificationItems"),x=sap.ushell.Container.getService("Notifications"),y=x.dismissNotification(w);y.done(function(){var i;for(i=0;i<R.length;i++){if(R[i].originalItemId===w){break;}}R.splice(i,1);t.getView().getModel().setProperty("/previewNotificationItems",R);});y.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedDismiss'));t.getView().getModel().setProperty("/previewNotificationItems",R);});}}).addStyleClass("sapUshellNotificationsListItem");N.push({previewItemId:o.getId(),originalItemId:n[i].Id,originalTimestamp:n[i].CreatedAt,NavigationTargetObject:n[i].NavigationTargetObject,NavigationTargetAction:n[i].NavigationTargetAction,NavigationTargetParams:n[i].NavigationTargetParams});v=sap.ui.getCore().byId('viewPortContainer');if(v.getCurrentState()==="RightCenter"){o.addStyleClass("sapUshellRightFloatingContainerItemBounceOut");}}if(R.length===0){t.getView().getModel().setProperty("/previewNotificationItems",N);this._disableNotificationPreviewBouncingAnimation(j);return;}for(f=N.length-1;f>-1;f--){if(R.length>=r){setTimeout(function(){R.pop();t.getView().getModel().setProperty("/previewNotificationItems",R);},1000);}if(N[f].originalTimestamp>R[0].originalTimestamp){R.unshift(N[f]);}else{R.push(N[f]);}}t.getView().getModel().setProperty("/previewNotificationItems",R);this._disableNotificationPreviewBouncingAnimation(j);}.bind(this)).fail(function(){});},_disableNotificationPreviewBouncingAnimation:function(n){if(!this.isNotificationPreviewLoaded){this.isNotificationPreviewLoaded=true;n.setEnableBounceAnimations(false);}},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(b.publish,b,c,e,d),1);},_changeGroupVisibility:function(g){var b=g.getPath(),m=g.getModel(),G=m.getProperty(b+'/isGroupVisible'),v=this.getView();m.setProperty(b+'/isGroupVisible',!G);v.oAnchorNavigationBar.updateVisibility();},_handleGroupVisibilityChanges:function(c,e,o){var l=sap.ushell.Container.getService('LaunchPage'),m=this.getView().getModel(),C=u.getCurrentHiddenGroupIds(m),s=C.length===o.length,i=s,p;C.some(function(h,I){if(!i){return true;}i=jQuery.inArray(h,o)!==-1;return!i;});if(!i){p=l.hideGroups(C);p.done(function(){m.updateBindings('groups');}.bind(this));p.fail(function(){var a=sap.ushell.Container.getService('Message');a.error(sap.ushell.resources.i18n.getText('hideGroups_error'));});}},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(S){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService;}.bind(this));},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel();var g=m.getProperty("/groups");for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(var i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(var i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.adjustItemSelection(f);v.oAnchorNavigationBar.setSelectedItemIndex(f);m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.removeLinksFromAllGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});},false);},"sap/ushell/components/flp/launchpad/dashboard/DashboardContent.view.js":function(){sap.ui.define(['sap/ushell/Layout','./DashboardGroupsBox','sap/ushell/override','sap/ushell/resources','sap/ushell/ui/launchpad/AnchorItem','sap/ushell/ui/launchpad/Tile','sap/ushell/ui/launchpad/TileContainer','sap/ushell/ui/shell/RightFloatingContainer'],function(L,D,o,r,A,T,a,R){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{createContent:function(c){var d,V=sap.ui.getCore().byId("viewPortContainer"),C,b=sap.ushell.components.flp.launchpad.getDashboardManager?sap.ushell.components.flp.launchpad.getDashboardManager():undefined,t=this;this.isTouch=sap.ui.Device.system.combi?false:(sap.ui.Device.system.phone||sap.ui.Device.system.tablet);this.isCombi=sap.ui.Device.system.combi;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();this.addStyleClass("sapUshellDashboardView");this.ieHtml5DnD=this.oModel.getProperty("/personalization")&&b&&b.isIeHtml5DnD();sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().subscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","enablePreviewNotificationChanged",this._enablePreviewNotificationChanged,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","coreResourcesFullyLoaded",this._enableAnchorBarOverflowAndCreateFooter,this);sap.ui.getCore().byId('navContainerFlp').attachAfterNavigate(this.onAfterNavigate,this);this.addEventDelegate({onBeforeFirstShow:function(){var b=sap.ushell.components.flp.launchpad.getDashboardManager();b.loadPersonalizedGroups();this.onAfterNavigate();}.bind(this),onAfterShow:function(){this.getController()._addBottomSpace();this.getController()._updateShellHeader();this._onAfterDashboardShow();}.bind(this),onAfterHide:function(e){}});this.oAnchorNavigationBar=this._getAnchorNavigationBar(c);d=new D();this.oDashboardGroupsBox=d.createGroupsBox(c,this.oModel);C=this._previewNotificationEnabled();if(V){V.shiftCenterTransitionEnabled(C);}var u=function(n){var B=this.mBindingInfos[n],e=this.getMetadata().getJSONKeys()[n],f;jQuery.each(this[e._sGetter](),jQuery.proxy(function(i,v){this[e._sRemoveMutator](v);},this));jQuery.each(B.binding.getContexts(),jQuery.proxy(function(i,v){f=B.factory(this.getId()+"-"+i,v)?B.factory(this.getId()+"-"+i,v).setBindingContext(v,B.model):"";this[e._sMutator](f);},this));};this.oPreviewNotificationsContainerPlaceholder=new R({id:'notifications-preview-container-placeholder',visible:{path:'/enableNotificationsPreview',formatter:function(v){return t._handleNotificationsPreviewVisibility.apply(t,[v]);}}}).addStyleClass('sapUshellPreviewNotificationsConainer');this.oPreviewNotificationsContainer=new R({id:'notifications-preview-container',top:4,right:'1rem',actAsPreviewContainer:true,floatingContainerItems:{path:"/previewNotificationItems",factory:function(f,e){return sap.ui.getCore().byId(e.getObject().previewItemId);}},insertItemsWithAnimation:{path:'/animationMode',formatter:function(s){return s!=='minimal';}},visible:{path:'/enableNotificationsPreview',formatter:this._handleNotificationsPreviewVisibility.bind(this)}}).addStyleClass('sapContrastPlus').addStyleClass('sapContrast');this.oPreviewNotificationsContainer.updateAggregation=u;this.oFilterSelectedGroup=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);this.oPage=new sap.m.Page('sapUshellDashboardPage',{customHeader:this.oAnchorNavigationBar,content:[this.oDashboardGroupsBox]});var O=this.oPage.onAfterRendering;this.oPage.onAfterRendering=function(){if(O){O.apply(this,arguments);}var e=this.getDomRef(),s=e.getElementsByTagName('section');jQuery(s[0]).off("scrollstop",c.handleDashboardScroll);jQuery(s[0]).on("scrollstop",c.handleDashboardScroll);};if(!!jQuery.sap.isDeclared('sap.fiori.core-ext-light',true)){this._enableAnchorBarOverflowAndCreateFooter();}return[this.oPage,this.oPreviewNotificationsContainerPlaceholder,this.oPreviewNotificationsContainer];},_handleNotificationsPreviewVisibility:function(e){var b=sap.ushell.Container.getRenderer('fiori2'),c=b.getCurrentViewportState(),i=c==='Center',n=sap.ushell.Container.getService('Notifications');this.oDashboardGroupsBox.toggleStyleClass('sapUshellDashboardGroupsContainerSqueezed',e);this.oAnchorNavigationBar.toggleStyleClass('sapUshellAnchorNavigationBarSqueezed',e);e=e&&i;if(e){if(!this.bNotificationsRegistered){n.registerNotificationsUpdateCallback(this.oController._notificationsUpdateCallback.bind(this.oController));this.bNotificationsRegistered=true;}if(n.isFirstDataLoaded()){setTimeout(function(){if(this.oController&&this.oController._notificationsUpdateCallback){this.oController._notificationsUpdateCallback();}}.bind(this),300);}if(!this.bSubscribedToViewportStateSwitch){this.bHeadsupNotificationsInitialyVisible=b.getRightFloatingContainerVisibility();sap.ui.getCore().getEventBus().subscribe("launchpad","afterSwitchState",this._handleViewportStateSwitch,this);this.bSubscribedToViewportStateSwitch=true;}}return e;},_fOnAfterAnchorBarRenderingHandler:function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){if(x){this.addStyleClass("help-id-homeAnchorNavigationBarItem");}}else{if(x){this.addStyleClass("help-id-anchorNavigationBarItem");}}},_getAnchorItemTemplate:function(){var b=new A({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,i,v){if(!v[t?1:0]){return false;}return i||t;}},locked:"{isGroupLocked}",isGroupDisabled:{parts:['isGroupLocked','/isInDrag','/homePageGroupDisplay'],formatter:function(i,I,s){return i&&I&&s==='tabs';}},afterRendering:this._fOnAfterAnchorBarRenderingHandler});return b;},_getAnchorNavigationBar:function(c){var b=this._getAnchorItemTemplate(),d=new sap.ushell.ui.launchpad.AnchorNavigationBar("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(e){this._handleAnchorItemPress(e);},c],groups:{path:"/groups",template:b},overflowEnabled:false});d=this._extendAnchorNavigationBar(d);d.addStyleClass("sapContrastPlus");b.attachBrowserEvent("focus",function(){d.setNavigationBarItemsVisibility();});return d;},_extendAnchorNavigationBar:function(b){var e=jQuery.extend(b,{onsapskipforward:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(E,this.bGroupWasPressed);this.bGroupWasPressed=false;},onsaptabnext:function(E){E.preventDefault();var j=jQuery(":focus");if(!j.parent().parent().siblings().hasClass("sapUshellAnchorItemOverFlow")||(j.parent().parent().siblings().hasClass("sapUshellAnchorItemOverFlow")&&j.parent().parent().siblings().hasClass("sapUshellShellHidden"))){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(E);this.bGroupWasPressed=false;}else{var c=jQuery(".sapUshellAnchorItemOverFlow button");c.focus();}},onsapskipback:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);},onsaptabprevious:function(E){E.preventDefault();var j=jQuery(":focus");if(!j.parent().hasClass("sapUshellAnchorItemOverFlow")){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}else{var c=jQuery(".sapUshellAnchorItem:visible:first");if(!c.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}else{sap.ushell.components.flp.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}}},onsapenter:function(E){E.srcControl.getDomRef().click();},onsapspace:function(E){E.srcControl.getDomRef().click();}});return e;},_addActionModeButtonsToDashboard:function(){if(sap.ushell.components.flp.ActionMode){sap.ushell.components.flp.ActionMode.init(this.getModel());}},_createActionModeMenuButton:function(){var t=this,b={},c,d={id:"ActionModeBtn",text:r.i18n.getText("activateEditMode"),icon:'sap-icon://edit',press:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var e=this.oDashboardGroupsBox.getGroups();sap.ushell.components.flp.ActionMode.toggleActionMode(this.oModel,"Menu Item",e);this.oAnchorNavigationBar.updateVisibility();var v=sap.ui.getCore().byId('viewPortContainer');if(v.getCurrentState()!="Center"){sap.ui.getCore().byId("viewPortContainer").switchState("Center");}if(this.oModel.getProperty("/homePageGroupDisplay")){if(this.oModel.getProperty("/tileActionModeActive")){if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.oDashboardGroupsBox.getBinding("groups").filter([]);var g=this.oModel.getProperty("/groups"),s;for(var i=0;i<g.length;i++){if(g[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return g[s].groupId}},groupChanged:false,focus:true});}else{this.oDashboardGroupsBox.getBinding("groups").filter([]);}}else{this.getController()._deactivateActionModeInTabsState();}}}.bind(this)};this.oTileActionsButton=sap.ui.getCore().byId(d.id);if(this.oTileActionsButton&&this.oTileActionsButton.data("isShellHeader")){jQuery.sap.measure.start("FLP:DashboardContent,view._createActionModeMenuButton","attach press and text to edit home page button","FLP");this.oTileActionsButton.setTooltip(d.text);this.oTileActionsButton.setText(d.text);this.oTileActionsButton.attachPress(d.press);jQuery.sap.measure.end("FLP:DashboardContent,view._createActionModeMenuButton");}else{b.controlType="sap.ushell.ui.launchpad.ActionItem";b.oControlProperties=d;b.bIsVisible=true;b.bCurrentState=true;b.controlType="sap.ushell.ui.launchpad.ActionItem";b.oControlProperties=d;b.bIsVisible=true;b.bCurrentState=true;c=sap.ushell.Container.getRenderer("fiori2").addUserAction(b).done(function(e){t.oTileActionsButton=e;if(t.oModel.getProperty("/enableHelp")){t.oTileActionsButton.addStyleClass('help-id-ActionModeBtn');}});}},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass('sapUshellAcionItemActive');}},_enablePreviewNotificationChanged:function(c,e,d){this.oModel.setProperty("/userEnableNotificationsPreview",d.bPreviewEnabled);},_enableAnchorBarOverflowAndCreateFooter:function(c,e,d){if(this.oFooter){return;}this.oAnchorNavigationBar.setOverflowEnabled(true);this.oDoneBtn=new sap.m.Button('sapUshellDashboardFooterDoneBtn',{type:sap.m.ButtonType.Emphasized,text:r.i18n.getText("closeEditMode"),tooltip:r.i18n.getText("doneBtnTooltip"),press:function(){jQuery("#sapUshellDashboardPage .sapUshellAnchorNavigationBarSqueezed").toggleClass("sapUshellAnchorBarEditMode");var b=this.oDashboardGroupsBox.getGroups();sap.ushell.components.flp.ActionMode.toggleActionMode(this.oModel,"Menu Item",b);this.oAnchorNavigationBar.updateVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.getController()._deactivateActionModeInTabsState();}}.bind(this)});this.oDoneBtn.addEventDelegate({onsapskipforward:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);},onsapskipback:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabprevious:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabnext:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}});this.oFooter=new sap.m.OverflowToolbar('sapUshellDashboardFooter',{visible:{parts:['/tileActionModeActive','/viewPortState'],formatter:function(b,C){return b&&C==='Center';}},layoutData:new sap.m.OverflowToolbarLayoutData({moveToOverflow:false}),content:[new sap.m.ToolbarSpacer(),this.oDoneBtn]});this.oPage.setFooter(this.oFooter);this.oPage.setFloatingFooter(true);},_previewNotificationEnabled:function(){var c=this.oModel.getProperty("/configEnableNotificationsPreview"),u=this.oModel.getProperty("/userEnableNotificationsPreview");return(c&&u);},_createActionButtons:function(){var e=this.oModel.getProperty("/personalization");if(e){if(this.oModel.getProperty("/actionModeMenuButtonEnabled")){this._createActionModeMenuButton();}}},onAfterNavigate:function(e){var n=sap.ui.getCore().byId('navContainerFlp'),c=n?n.getCurrentPage().getViewName():undefined,i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent",b=sap.ushell.Container.getRenderer("fiori2"),d=sap.ui.getCore().byId("ActionModeBtn");if(d){if(d.data){if(d.data("isShellHeader")){d.setVisible(true);}}}if(b.toggleOverFlowActions){b.toggleOverFlowActions();}if(i){b.createExtendedShellState("dashboardExtendedShellState",function(){this._createActionButtons();b.setHeaderHiding(false);if(!sap.ui.Device.system.phone){b.showRightFloatingContainer(false);}}.bind(this));this.getController()._setCenterViewPortShift();this._addActionModeButtonsToDashboard();setTimeout(function(){if(sap.ushell.Container){b.applyExtendedShellState("dashboardExtendedShellState");}},0);if(this.oAnchorNavigationBar&&this.oAnchorNavigationBar.anchorItems){this.oAnchorNavigationBar.setNavigationBarItemsVisibility();this.oAnchorNavigationBar.adjustItemSelection(this.oAnchorNavigationBar.getSelectedItemIndex());}if(document.activeElement&&document.activeElement.tagName==="BODY"){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}}},_handleViewportStateSwitch:function(c,e,d){var C=d.getParameter('to');if(C=='Center'){var n=sap.ui.getCore().byId("notifications-preview-container");if(n&&n.setFloatingContainerItemsVisiblity){n.setFloatingContainerItemsVisiblity(true);}}},_handleHeadsupNotificationsPresentation:function(c){var b=sap.ushell.Container.getRenderer('fiori2'),i=c==='Center',p=this.oPreviewNotificationsContainer.getDomRef(),h=p&&p.getBoundingClientRect(),P=h?h.bottom<0:false,s=i?P:this.bHeadsupNotificationsInitialyVisible;b.showRightFloatingContainer(s);},_onAfterDashboardShow:function(e){var j=jQuery('.sapUshellTileContainer:visible'),n=sap.ui.getCore().byId('navContainerFlp'),c=n?n.getCurrentPage().getViewName():undefined,i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent",t=this.oModel.getProperty('/tileActionModeActive'),v,p;if(i){if(!t){sap.ushell.utils.handleTilesVisibility();sap.ushell.utils.refreshTiles();var b=this.oModel.getProperty('/topGroupInViewPortIndex'),d=jQuery(j[b]),f=j.find("li[class*='sapUshellTile']li[tabindex=0]"),g=d.find('.sapUshellTile:first'),h;if(f.length){h=f;}else if(g.length){h=g;}else{h=jQuery("#configBtn");}p=this.oModel.getProperty('/enableNotificationsPreview');v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(p);}setTimeout(function(){h.focus();},0);}this.onAfterNavigate();}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.dashboard.DashboardContent";},_isInDeashboard:function(){var n=sap.ui.getCore().byId("viewPortContainer"),c=sap.ui.getCore().byId("dashboardGroups");return((n.getCurrentCenterPage()==="application-Shell-home")&&(c.getModel().getProperty("/currentViewName")==="home"));},exit:function(){if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}sap.ui.core.mvc.View.prototype.exit.apply(this,arguments);sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRendered",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","coreResourcesFullyLoaded",this._enableAnchorBarOverflowAndCreateFooter,this);if(this.bSubscribedToViewportStateSwitch){sap.ui.getCore().getEventBus().unsubscribe("launchpad","afterSwitchState",this._handleViewportStateSwitch,this);this.bSubscribedToViewportStateSwitch=false;}}});},false);},"sap/ushell/components/flp/launchpad/dashboard/DashboardGroupsBox.js":function(){sap.ui.define(["sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/base/Object","sap/ushell/ui/launchpad/DashboardGroupsContainer"],function(A,b,D){"use strict";var a=b.extend("sap.ushell.components.flp.launchpad.dashboard.DashboardGroupsBox",{metadata:{publicMethods:["createGroupsBox"]},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox&&sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox()){return sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox();}sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox=jQuery.sap.getter(this.getInterface());this.oController=undefined;this.oGroupsContainer=undefined;this.bTileContainersContentAdded=false;this.isLinkPersonalizationSupported=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported();sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._addTileContainersContent,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._addTileContainersContent,this);sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox=undefined;},createGroupsBox:function(c,m){this.oController=c;var t=this,f,g,T=this._getTileContainerTemplate(c,m),E=function(){return t.oModel.getProperty('/enableLockedGroupsCompactLayout')&&!t.oModel.getProperty('/tileActionModeActive');},d=function(G){var e,p;if(G&&(e=G.getDomRef())){p=e.querySelector('.sapUshellPlusTile');if(p){return p;}}return null;},r=function(l){var p=d(l.currentGroup),e=d(l.endGroup),i=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length===0);if(i){t._hidePlusTile(e);}else{t._showPlusTile(e);}if(l.currentGroup!==l.endGroup){t._showPlusTile(p);}};f=function(){sap.ushell.Layout.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);sap.ushell.Layout.getLayoutEngine().setReorderTilesCallback.call(sap.ushell.Layout.layoutEngine,r);};g=function(){if(!sap.ushell.Layout.isInited){sap.ushell.Layout.init({getGroups:this.getGroups.bind(this),getAllGroups:t.getAllGroupsFromModel.bind(t),isTabBarActive:t.isTabBarActive.bind(t),isLockedGroupsCompactLayoutEnabled:E,animationsEnabled:(t.oModel.getProperty('/animationMode')==='full')}).done(f);sap.ui.Device.media.attachHandler(function(){if(!this.bIsDestroyed){sap.ushell.Layout.reRenderGroupsLayout(null);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);var o=this.getDomRef();c.getView().sDashboardGroupsWrapperId=!jQuery.isEmptyObject(o)&&o.parentNode?o.parentNode.id:'';}sap.ushell.Layout.reRenderGroupsLayout(null);if(this.getGroups().length){if(c.bModelInitialized){c._initializeUIActions();}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");c._addBottomSpace();if(this.getModel().getProperty("/tilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}var F=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);var G=t.oModel.getProperty('/homePageGroupDisplay'),h=t.oModel.getProperty("/tileActionModeActive");if(G&&G==="tabs"&&!h){this.getBinding("groups").filter([F]);}else if(!h){F=new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true);this.getBinding("groups").filter([F]);}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs";};this.oGroupsContainer=new D("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T},displayMode:"{/homePageGroupDisplay}",afterRendering:g});this.oGroupsContainer.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellAnchorItem:visible:first");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}else{sap.ushell.components.flp.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}},onsapskipforward:function(e){e.preventDefault();var h=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(h.length){h.focus();}else{if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(e.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}},onsaptabnext:function(e){if(t.oModel.getProperty("/tileActionModeActive")){var j=jQuery(document.activeElement).closest(".sapUshellTileContainerHeader");if(!j||j.length===0){e.preventDefault();var h=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(h.length){h.focus();}}else{var i=jQuery(document.activeElement).closest(".sapUshellTileContainer");var k=jQuery(document.activeElement).hasClass("sapUshellContainerTitle");var l=i.find('.sapUshellHeaderActionButton');var n=l&&l.length>0;var o=false;if(n){o=document.activeElement.id===l.last()[0].id;}if((k&&!n)||(o)){e.preventDefault();var H=i.find(".sapUshellTile:visible, sapUshellLink:visible").length>0;if(H){sap.ushell.components.flp.ComponentKeysHandler.goToLastVisitedTile(i,true);}else{var h=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(h.length){h.focus();}else{if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(e.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}}}}}else{e.preventDefault();if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(e.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}},onsaptabprevious:function(e){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(":focus");if(!t.oModel.getProperty("/tileActionModeActive")||j.hasClass("sapUshellTileContainerHeader")){e.preventDefault();var h=jQuery(".sapUshellAnchorItem:visible:first"),i=jQuery(".sapUshellAnchorItemOverFlow");if(!i&&!h.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}if(i.hasClass("sapUshellShellHidden")){sap.ushell.components.flp.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}else{i.find("button").focus();}}else if(t.oModel.getProperty("/tileActionModeActive")){var k=jQuery(document.activeElement);if(k.hasClass('sapUshellTile')){e.preventDefault();var l=k.closest(".sapUshellTileContainer");var n=l.find('.sapUshellHeaderActionButton:visible').last();if(n.length>0){n.focus();}else{l.find('.sapUshellContainerTitle').focus();}}}}});this.oModel=m;return this.oGroupsContainer;},getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups");},_getTileContainerTemplate:function(c,m){var t=this,T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',ieHtml5DnD:c.getView().ieHtml5DnD,enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showEmptyLinksAreaPlaceHolder:{parts:['links/length','/isInDrag','/homePageGroupDisplay'],formatter:function(n,i,s){return i&&s==='tabs'&&!n;}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(d){return(d||!this.groupHasTiles())&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(d,i,v){if(!v[d?1:0]){return false;}return i||d;}},hidden:{parts:['/tileActionModeActive','isGroupVisible'],formatter:function(i,I){return i&&!I;}},links:this._getLinkTemplate(),tiles:this._getTileTemplate(),add:function(e){if(document.toDetail){document.toDetail();}t.oController.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})});},afterRendering:jQuery.proxy(this._tileContainerAfterRenderingHandler,t)});return T;},_getLinkTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,c){return c.getObject();}},afterRendering:function(e){var j=jQuery(this.getDomRef().getElementsByTagName("a"));j.attr("tabindex",-1);}}),filters:[f]};}else{return{path:"links",factory:function(i,c){return c.getObject().content[0];},filters:[f]};}},_getTileTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);var t=new sap.ushell.ui.launchpad.Tile({"long":"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),T;if(c){T=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:T.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.flp.ActionMode._openActionsMenu(e);}},showActions:function(e){sap.ushell.components.flp.ActionMode._openActionsMenu(e);},deletePress:function(e){var T=e.getSource(),t=T.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(t)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(e){jQuery.sap.measure.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");jQuery.sap.measure.start("FLP:OpenApplicationonClick","Open Application","FLP");function c(){jQuery.sap.measure.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(c);}v.attachAfterNavigate(c);}});return{path:"tiles",templateShareable:true,template:t,filters:[f]};},_tileContainerAfterRenderingHandler:function(e){e.oSource.bindProperty("showBackground","/tileActionModeActive");e.oSource.bindProperty("showDragIndicator",{parts:['/tileActionModeActive','/enableDragIndicator'],formatter:function(I,d){return I&&d&&!this.getIsGroupLocked()&&!this.getDefaultGroup();}});e.oSource.bindProperty("showEmptyLinksArea",{parts:['/tileActionModeActive','links/length',"isGroupLocked",'/isInDrag','/homePageGroupDisplay'],formatter:function(t,n,c,I,s){if(n){return true;}else if(c){return false;}else{return t||I&&s==='tabs';}}});e.oSource.bindProperty("showMobileActions",{parts:['/tileActionModeActive'],formatter:function(I){return I&&!this.getDefaultGroup();}});e.oSource.bindProperty("showIcon",{parts:['/isInDrag','/tileActionModeActive'],formatter:function(I,c){return(this.getIsGroupLocked()&&(I||c));}});e.oSource.bindProperty("deluminate",{parts:['/isInDrag'],formatter:function(I){return this.getIsGroupLocked()&&I;}});e.oSource.bindProperty("transformationError",{parts:['/isInDrag','/draggedTileLinkPersonalizationSupported'],formatter:function(I,d){return I&&!d;}});if(this.bTileContainersContentAdded&&!e.oSource.getBeforeContent().length){var g=e.oSource.getModel().getProperty("/groups"),i;for(i=0;i<g.length;i++){if(g[i].groupId===e.oSource.getGroupId()){break;}}this._addTileContainerContent(i);}sap.ushell.Layout.reRenderGroupsLayout(null);this._updateFirstGroupHeaderVisibility(e.oSource.getProperty('tileActionModeActive'),e.oSource.getModel().getProperty('/homePageGroupDisplay')!=="tabs");},_updateFirstGroupHeaderVisibility:function(I,e){var g=this.oGroupsContainer.getGroups(),f=undefined,v=0;for(var i=g.length-1;i>=0;--i){g[i].setShowGroupHeader(I||e);if(g[i].getProperty("visible")){v++;f=i;}}if(f!==undefined)g[f].setShowGroupHeader(I||(v==1&&e));},_addTileContainersContent:function(){if(!this.bTileContainersContentAdded){var g=this.oGroupsContainer.getGroups();g.forEach(function(c,d){this._addTileContainerContent(d);}.bind(this));this.bTileContainersContentAdded=true;}},_addTileContainerContent:function(g){var G=this.oGroupsContainer.getGroups()[g],B;if(G){B=G.getBindingContext().getPath()+'/';G.addBeforeContent(this._getBeforeContent(this.oController,B));G.addAfterContent(this._getAfterContent(this.oController,B));sap.ui.require(["sap/ushell/ui/launchpad/GroupHeaderActions"],function(c){var h=new c({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive',B+'isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");G.addHeaderAction(h);}.bind(this));}},_getBeforeContent:function(c){var d=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["/tileActionModeActive"],formatter:function(t){return(!this.getParent().getIsGroupLocked()&&!this.getParent().getDefaultGroup()&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:[this.oController._addGroupHandler]}).addStyleClass("sapUshellAddGroupButton");d.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return d;},_getAfterContent:function(c){var d=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,e){return(i&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:[this.oController._addGroupHandler]}).addStyleClass("sapUshellAddGroupButton");d.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return d;},_getHeaderActions:function(){var s=new sap.m.Button({text:{path:'isGroupVisible',formatter:function(i){if(sap.ui.Device.system.phone){this.setIcon(i?"sap-icon://hide":"sap-icon://show");}return sap.ushell.resources.i18n.getText(i?'HideGroupBtn':'ShowGroupBtn');}},visible:{parts:['/tileActionModeActive','/enableHideGroups','isGroupLocked','isDefaultGroup'],formatter:function(i,I,c,e){return i&&I&&!c&&!e;}},press:function(e){var S=e.getSource(),g=S.getBindingContext();this.oController._changeGroupVisibility(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");var d=new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var S=e.getSource(),g=S.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");return[s,d];},_hidePlusTile:function(p){if(p){p.className+=" sapUshellHidePlusTile";}},_showPlusTile:function(p){if(p){p.className=p.className.split(' '+'sapUshellHidePlusTile').join('');}}});return a;});},"sap/ushell/components/flp/launchpad/dashboard/DashboardUIActions.js":function(){sap.ui.define(["sap/ui/base/Object"],function(b){"use strict";var D=b.extend("sap.ushell.components.flp.launchpad.dashboard.DashboardUIActions",{metadata:{publicMethods:["initializeUIActions"]},constructor:function(i,s){this.aTabBarItemsLocation=[];if(sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions&&sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions()){return sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions();}sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions=jQuery.sap.getter(this.getInterface());this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null;},initializeUIActions:function(c){this.oController=c;if(c.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray();}var d=c.getView().sDashboardGroupsWrapperId,a,r=sap.ui.getCore().getConfiguration().getRTL(),C={containerSelector:'#dashboardGroups',wrapperSelector:d?"#"+d:undefined,rootSelector:"#shell"},o=jQuery.extend(true,{},C,{switchModeDelay:1000,isTouch:c.getView().isTouch,isCombi:c.getView().isCombi,debug:false}),l={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"},w={type:"tiles",draggableSelector:".sapUshellTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},W={type:"links",draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},e={type:"groups",draggableSelector:".sapUshellTileContainerHeader",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync};if(c.getView().oDashboardGroupsBox.getGroups().length){if(c.getView().getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){sap.ui.require(['sap/ushell/UIActions'],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new U(jQuery.extend(true,{},o,t)).enable();this.oGroupUIActions=new U(jQuery.extend(true,{},o,g));this.oLinkUIActions=new U(jQuery.extend(true,{},o,l)).enable();a=c.getView().getModel().getProperty("/tileActionModeActive");if(a){this.oGroupUIActions.enable();}}.bind(this));}else{sap.ui.require(['sap/ushell/UIActionsWin8'],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=U.getInstance(jQuery.extend(true,{},C,w)).enable();this.oLinkUIActions=U.getInstance(jQuery.extend(true,{},C,W)).enable();this.oGroupUIActions=U.getInstance(jQuery.extend(true,{},C,e)).enable();}.bind(this));}}}},_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions();},_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable();}},_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},_handleTileDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY,this.aTabBarItemsLocation);}},_handleTileDragAndScrollContinuation:function(m){var a=jQuery("#anchorNavigationBar").height(),A=jQuery("#anchorNavigationBar").offset(),i=A.top;if(m<i){sap.ushell.Layout.getLayoutEngine()._cancelLongDropTimmer();}return sap.ushell.Layout.getLayoutEngine()._isTabBarCollision(m);},_fillTabBarItemsArray:function(){var i=jQuery(".sapUshellAnchorItem"),l=i.length,a,B=10,t=0,T=[],I,o,c,n;for(a=0;a<l;a++){I=i[a];o=I.getBoundingClientRect();T[a]=o.width;}for(a=0;a<l;a++){c=T[a];if(c===0){continue;}n=Math.round(c/B);for(var d=t;d<t+n;d++){this.aTabBarItemsLocation[d]=a;}t=d;}},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},_changeTileDragAndDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop(),j,t,c,a,f,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.offset.left)&&(a.top===t.offset.top)){continue;}t.position=c;t.offset=a;C=j.data("clone");if(!C){continue;}f=t.position.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.position,d);C.stop(true,false).animate({left:f,top:T},{duration:250},{easing:"swing"});}},_preventTextSelection:function(){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}},_handleStartDragTile:function(e,t){var s,T;this._preventTextSelection();sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.initDragMode();}jQuery(t).find("a").removeAttr('href');this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},_onBeforeCreateLinkClone:function(e,L){sap.ushell.Layout.getLayoutEngine().saveLinkBoundingRects(L);},_handleLinkDrop:function(e,t,a){var d=jQuery.Deferred(),p;if(sap.ushell.Layout.isTabBarActive()){sap.ushell.Layout.tabBarTileDropped();}if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){jQuery(a.clone).animate({opacity:0},100,function(){});}if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}if(sap.ushell.Layout.getLayoutEngine().isLinkIntersected()||sap.ushell.Layout.getLayoutEngine().isOriginalAreaChanged()){p=this.oController._handleDrop.call(this.oController,e,t);}if(p){p.then(function(){jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');setTimeout(function(){d.resolve();}.bind(this),300);});}else{setTimeout(function(){d.resolve();}.bind(this),0);}return d.promise();},_handleTileDrop:function(e,t,a){if(sap.ushell.Layout.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,a);}else{return this._handleTileToTileDrop(e,t,a);}},_handleTileToLinkDrop:function(e,t,a){return this._handleLinkDrop(e,t,a);},_handleTileToTileDrop:function(e,t,a){var j,h,T,c=function(e,t){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},h=jQuery(".sapUshellTabBarHoverOn");h.removeClass("sapUshellTabBarHoverOn");T=jQuery(".sapUshellTileDragOpacity");T.removeClass("sapUshellTileDragOpacity");if(sap.ushell.Layout.isTabBarActive()){sap.ushell.Layout.tabBarTileDropped();}if(sap.ushell.Layout.isTabBarActive()&&sap.ushell.Layout.isOnTabBarElement()){if(a&&a.clone){var d=jQuery.Deferred();j=jQuery(a.clone);j.css("display","none");setTimeout(function(){d.resolve();c.call(this,e,t);}.bind(this),300);return d.promise();}else{c.apply(this,arguments);}}if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){var f=jQuery.Deferred();j=jQuery(a.clone);var g=a.clone.getBoundingClientRect();var p=t.getBoundingClientRect();var s=j.css("transform").split(",");var i=p.top-g.top;var k=p.left-g.left;var l=parseInt(s[4],10)+k;var m=parseInt(s[5],10)+i;j.css({"transform":"translate3d("+l+"px, "+m+"px, 0px)","transition":"transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)"});setTimeout(function(){f.resolve();c.call(this,e,t);}.bind(this),300);return f.promise();}else{c.apply(this,arguments);}},_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',true);}},_endUIHandler:function(){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',false);}},_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable();}var g=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=g.find(".sapUshellContainerTitle"),t=a.height(),c=a.width(),d,f,h,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!sap.ui.Device.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?jQuery(".sapUshellViewPortCenter").width()+this.oGroupUIActions.getMove().x+c:this.oGroupUIActions.getMove().x-(c/2)});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());jQuery.sap.log.info('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);d=jQuery("#dashboardGroups").offset().top;f=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;h=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=f-d-h;jQuery('.sapUshellDashboardView section').animate({scrollTop:s},0);},_handleGroupsUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},_handleGroupDrop:function(e,u){var B=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this._handleGroupMoved(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable();}},_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty('/isInDrag',false);},100);}},_setController:function(c){this.oController=c;}});return D;});},"sap/ushell/components/flp/launchpad/group_list/GroupList.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.group_list.GroupList",{onInit:function(){this.sViewId="#"+this.getView().getId();this.sGroupListId="#"+this.getView().oGroupList.getId();this.handleScroll=this._fHandleScroll.bind(this);},onAfterRendering:function(){this.jqView=jQuery(this.sViewId);this.jgGroupList=jQuery(this.sGroupListId);var e=sap.ui.getCore().getEventBus();e.unsubscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.subscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.unsubscribe("grouplist","DashboardRerender",this._addScroll,this);e.subscribe("grouplist","DashboardRerender",this._addScroll,this);e.unsubscribe("launchpad","dashboardScroll",this.handleScroll,this);e.subscribe("launchpad","dashboardScroll",this.handleScroll,this);this._addScroll();},_addScroll:function(){var t=this;setTimeout(function(){this.dashboardElement=document.querySelector(".sapUshellDashboardView section");if(this.dashboardElement){this.dashboardElement.removeEventListener('scroll',t.handleScroll);this.dashboardElement.addEventListener('scroll',t.handleScroll);}}.bind(this),0);},_fHandleScroll:function(){var m=this.getView().getModel(),t=m.getProperty("/topGroupInViewPortIndex");if(!m.getProperty("/scrollingToGroup")){if(!m.getProperty("/groupList-skipScrollToGroup")){var g=jQuery('#groupList li.sapUshellGroupLI');var s=g.removeClass('sapUshellSelected').eq(t);s.addClass('sapUshellSelected');var a=document.getElementById('groupListPage-cont');var b=a.scrollTop;var c=b+a.offsetHeight;var d=s[0]?s[0].offsetTop:undefined;if(d<b){jQuery('#groupListPage section').animate({scrollTop:g[t].offsetTop},0);}else if(d+s[0].offsetHeight>c){jQuery('#groupListPage section').animate({scrollTop:b+g[t].offsetHeight},0);}}sap.ushell.utils.handleTilesVisibility();}},_handleGroupListItemPress:function(e){var s=e.getSource(),f;f=e.getParameter("action")==="sapenter";this._handleScrollToGroup(s,false,f);},_handleScrollToGroup:function(g,a,f){if(!g){return;}var t=this;document.querySelector(".sapUshellDashboardView").removeEventListener('scroll',t.handleScroll);this._publishAsync("launchpad","scrollToGroup",{group:g,groupChanged:a,focus:f});},_handleScrollAnimationEnd:function(){var t=this;document.querySelector(".sapUshellDashboardView").addEventListener('scroll',t.handleScroll);this.getView().getModel().setProperty("/scrollingToGroup",false);},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(b.publish,b,c,e,d),1);}});},true);},"sap/ushell/components/flp/launchpad/group_list/GroupList.view.js":function(){sap.ui.define(['sap/ui/core/IconPool','sap/ushell/ui/launchpad/GroupListItem','sap/ushell/override'],function(I,G,o){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.group_list.GroupList",{createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();var t=this,g=this._getGroupListItemTemplate(c);this.bAnimate=sap.ui.Device.system.desktop;this.isTouch=!sap.ui.Device.system.desktop;this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oGroupList.onAfterRendering=function(){this.data("sap-ui-fastnavgroup","false",false);jQuery("#groupListFooter").attr("data-sap-ui-fastnavgroup","false");t.oController.handleScroll();};this.oGroupList.updateItems=o.updateAggregatesFactory("items");if(this.getViewData().enablePersonalization===undefined||this.getViewData().enablePersonalization!==false){this.oActionList=new sap.m.List({items:[]});var a=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){a.call(this,e);};var b=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList]});b.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[this.oGroupList]});this.groupListPage.addStyleClass("sapUshellPersonalizationOn");}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[this.oGroupList]});}this.addStyleClass("sapUshellGroupList");return[this.groupListPage];},_getGroupListItemTemplate:function(c){var O=function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem");if(x){this.addStyleClass("help-id-homeGroupListItem");}}else{this.addStyleClass("sapUshellGroupListItem");if(x){this.addStyleClass("help-id-groupListItem");}}jQuery(this.getDomRef()).attr("tabindex","0");};return new G({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",numberOfTiles:"{tiles/length}",afterRendering:O,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e);},c],visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,i,v){if(!v[t?1:0]){return false;}return i||t;}}});},getControllerName:function(){return"sap.ushell.components.flp.launchpad.group_list.GroupList";}});},true);},"sap/ushell/components/flp/settings/FlpSettings.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller"],function(C){"use strict";return C.extend("sap.ushell.components.flp.settings.FlpSettings",{DISPLAY_MODES:{'scroll':0,'tabs':1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){this.oConfModel=new sap.ui.model.json.JSONModel({});this.oConfModel.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),flexAlignItems:sap.ui.Device.system.phone?'Stretch':'Start',textAlign:sap.ui.Device.system.phone?'Begin':'End',textDirection:sap.ui.Device.system.phone?'Column':'Row',labelWidth:sap.ui.Device.system.phone?"auto":"12rem"});this.getView().setModel(this.oConfModel,"config");var r=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties")});this.getView().setModel(r,"i18n");var i=this.getView().getViewData().initialDisplayMode;this.iCurrentMode=this.DISPLAY_MODES[i]||this.DISPLAY_MODES.scroll;},onBeforeRendering:function(){this.oConfModel.setProperty("/displayMode",this.iCurrentMode);},onSave:function(){this.iCurrentMode=this.oConfModel.getProperty("/displayMode");return this.DISPLAY_MODES.getName(this.iCurrentMode);}});});},"sap/ushell/components/flp/settings/FlpSettings.view.xml":'<View controllerName="sap.ushell.components.flp.settings.FlpSettings"\n      width="100%"\n      xmlns:m="sap.m">\n\n    <m:VBox visible="true" class="sapUiSmallMargin">\n        <m:items>\n            <m:HBox>\n                <m:items>\n                    <m:Label text="{i18n>AnchorBarLabel}:"\n                             class="sapUshellFlpSettingsLabel"\n                             width="{config>/labelWidth}"\n                             textAlign="{config>/textAlign}"/>\n\n                    <m:VBox>\n                        <m:items>\n                            <m:RadioButtonGroup selectedIndex="{config>/displayMode}">\n                                <m:buttons>\n                                    <m:RadioButton text="{i18n>anchorBarScrollMode}" class="sapUshellAnchorBarScrollMode"/>\n                                    <m:RadioButton text="{i18n>anchorBarTabMode}" class="sapUshellAnchorBarTabsMode"/>\n                                </m:buttons>\n                            </m:RadioButtonGroup>\n                            <m:VBox class ="sapUshellFlpSettingsDescriptionBorder">\n                                <m:items>\n                                    <m:Text text="{i18n>homePageGroupDisplayDescriptionText}" class="sapUshellFlpSettingsDescription" />\n                                    <!-- second paragraph will be shown only if the user has edit option for his dashboard -->\n                                    <m:Text text="{i18n>homePageGroupDisplayDescriptionText_secondParagraph}"\n                                            class="sapUshellFlpSettingsDescription"\n                                            visible="false"/>\n                                </m:items>\n                            </m:VBox>\n                        </m:items>\n                    </m:VBox>\n                </m:items>\n            </m:HBox>\n        </m:items>\n    </m:VBox>\n</View>'}});

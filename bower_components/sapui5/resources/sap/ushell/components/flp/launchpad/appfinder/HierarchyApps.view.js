// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/ushell/ui/appfinder/AppBox','sap/ushell/ui/appfinder/PinButton'],function(A,P){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",{createContent:function(c){this.oController=c;function g(G,b,s,a,d){var r=sap.ushell.resources.i18n,t;if(s){var i=jQuery.inArray(a,G);var T=i!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=r.getText(T,d);}else{t=b?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new P({icon:'sap-icon://pushpin-off',selected:{path:"easyAccess>bookmarkCount",formatter:function(b){return(!!b);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,b,s,a,d){return g(G,b,s,a,d);}},press:c.showSaveAppPopover.bind(c)});p.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[c.onAppBoxPressed,c]});this.oItemTemplate.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new sap.m.FlexBox(this.getId()+'_hierarchyAppsLayout',{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:sap.m.FlexWrap.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(a){if(a.getKey()==="tabindex"){a.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new sap.m.MessagePage({visible:false,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});var C=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new sap.ui.model.json.JSONModel({crumbs:[]});this.linkTemplate=new sap.m.Link({text:"{crumbs>text}",press:function(e){var a=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(a.path,false);}.bind(this)});this.breadcrumbs=new sap.m.Breadcrumbs({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");C.push(this.breadcrumbs);}else{this.resultText=new sap.m.Text({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:c.resultTextFormatter.bind(c)}}).addStyleClass('sapUshellEasyAccessSearchResultText');this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"3",writeToDom:true}));C.push(this.resultText);this.showMoreResultsLink=new sap.m.Button({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsTextFormatter.bind(c)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsVisibilityFormatter.bind(c)},type:sap.m.ButtonType.Transparent});}C.push(this.oMessagePage);C.push(this.layout);if(this.showMoreResultsLink){C.push(this.showMoreResultsLink)}return C;},updateResultSetMessage:function(i,I){var e;if(I){e='noFilteredItems';}else{e='EasyAccessMenu_NoAppsToDisplayMessagePage_Text';}if(i){if(I){this.resultText.updateProperty('text');this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=sap.ushell.resources.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(b){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(b);}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps";}});},true);

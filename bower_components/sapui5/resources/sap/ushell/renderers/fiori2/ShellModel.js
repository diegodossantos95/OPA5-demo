// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(function(){"use strict";var a=sap.ui.Device.system.phone;var m={animationMode:"full",searchAvailable:false,title:"",searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:false,enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",userStatus:undefined,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},customStatesDelta:{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}},states:{"blank":{"stateName":"blank","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"blank-home":{"stateName":"blank-home","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"home":{"stateName":"home","showCurtain":false,"headerHiding":false,"headerVisible":true,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"headItems":['meAreaHeaderButton'],"headEndItems":["sf"],"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"app":{"stateName":"app","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":["sf"],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"search":"","headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"minimal":{"stateName":"minimal","showCurtain":false,"headerHiding":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"standalone":{"stateName":"standalone","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"embedded":{"stateName":"embedded","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"headerless":{"stateName":"headerless","showCurtain":false,"headerHiding":a,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"merged":{"stateName":"merged","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"headerHiding":a,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"merged-home":{"stateName":"merged-home","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}}},userPreferences:{entries:[]},};function v(i,c,s){return c!=undefined;}function n(i,c,s){return true;}function u(c,V,C){C.setProperty(c,V);}function S(){var M;var c;var s;var C;var e;var o;var I;var d;var E;var f;var t;var g;this.createDefault=function(){var r=function(h,i,D){if(D.sProperty=="actions"){var A=D.oModel.getProperty(D.path);if(A&&A.length===0&&D.aIds&&D.aIds.length>0){this._renderShellState();}}}.bind(this);this.createTriggers([{sName:'onAddFirstAction',fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",r,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",r,this);}}],false,["blank","blank-home"]);this.createInspection("actions",[{fnCondition:function(i,h,T){return(i&&i.length>0)||(h&&h.length>0);},fnAction:function(i,h,T){if(h.indexOf("meAreaHeaderButton")===-1){T.addHeaderItem(["meAreaHeaderButton"],true);}}}],false,["blank-home","blank"]);};this.init=function(h){M=new sap.ui.model.json.JSONModel(m);s=M;c={};e={};o={};I=false;d=false;f=false;t=[];g=true;E=undefined;if(h){jQuery.sap.measure.start("FLP:ShellModel.init","moveShellHeaderEndItems","FLP");if(h.moveEditHomePageActionToShellHeader){this._moveActionsToShellHeader("ActionModeBtn");}if(h.moveContactSupportActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("ContactSupportBtn");}if(h.moveGiveFeedbackActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("EndUserFeedbackBtn");}if(h.moveAppFinderActionToShellHeader){this._moveActionsToShellHeader("openCatalogBtn");}if(h.moveUserSettingsActionToShellHeader){this._moveActionsToShellHeader("userSettingsBtn");}jQuery.sap.measure.end("FLP:ShellModel.init");}this.createDefault();var i=h&&h.appState?h.appState:"home";this.switchState(i);};this.destroy=function(){M=undefined;s=undefined;c=undefined;e=undefined;o=undefined;I=undefined;d=undefined;g=undefined;f=undefined;E=undefined;sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRendered",this._attachPressToUserSettings,this);};this.getModel=function(){return M;};this._moveCustomeDataActionBtnToShellHeader=function(h){for(var k in m.customStatesDelta){var i=m.customStatesDelta[k];var A=i.actions;var j=A.indexOf(h);if(j!=-1){m.customStatesDelta[k].actions.splice(j,1);j=m.states[k].headEndItems.indexOf(h);if(j===-1){m.states[k].headEndItems.push(h);}}}var B=sap.ui.getCore().byId(h);if(!B){var l;if(h==="ContactSupportBtn"){l=new sap.ushell.ui.footerbar.ContactSupportButton("tempContactSupportBtn",{visible:true});}else{if(h==="EndUserFeedbackBtn"){l=new sap.ushell.ui.footerbar.EndUserFeedback("EndUserFeedbackHandlerBtn",{});}}var p=l.getIcon();var q=l.getText();var r=function(){l.firePress();};var w=new sap.ushell.ui.shell.ShellHeadItem(h,{icon:p,tooltip:q,text:q,showSeparator:false});if(h==="ContactSupportBtn"){w.attachPress(r);}if(h==="EndUserFeedbackBtn"){w.setVisible(false);}w.data("isShellHeader",true);}};this._attachPressToUserSettings=function(){jQuery.sap.measure.start("FLP:ShellModel._attachPressToUserSettings","_attachPressToUserSettings","FLP");var h=sap.ui.getCore().byId("userSettingsBtn");h.attachPress(function(){var i=sap.ui.getCore().byId('meArea');if(!i.oSettingsDialog.getModel()){i.oSettingsDialog.setModel(i.getModel());}var O=function(){i.oSettingsDialog.open();sap.ui.getCore().byId("viewPortContainer").detachAfterSwitchStateAnimationFinished(O);};var j=sap.ui.getCore().byId('viewPortContainer');if(j.getCurrentState()!="Center"){sap.ui.getCore().byId("viewPortContainer").attachAfterSwitchStateAnimationFinished(O);sap.ui.getCore().byId("viewPortContainer").switchState("Center");}else{O();}});jQuery.sap.measure.end("FLP:ShellModel._attachPressToUserSettings");};this._moveActionsToShellHeader=function(h){var k;for(k in m.states){var i=m.states[k];if(k==="blank"||k==="blank-home"){continue;}if(h==="ActionModeBtn"){if(k==="app"){continue;}}var A=i.actions;var j=A.indexOf(h);if(j!=-1){m.states[k].actions.splice(j,1);}j=m.states[k].headEndItems.indexOf(h);if(j===-1){m.states[k].headEndItems.push(h);}}if(h==="userSettingsBtn"){var l="userSettingsBtn";var p=sap.ushell.resources.i18n.getText("userSettings");var q='sap-icon://action-settings';var U=sap.ui.getCore().byId(l);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._attachPressToUserSettings,this);if(!U){var r=new sap.ushell.ui.shell.ShellHeadItem(l,{icon:q,tooltip:p,text:p,showSeparator:false});r.data("isShellHeader",true);}}};this.switchState=function(h,i){var p=h[0]==="/"?h:"/states/"+h,j=M.getProperty(p),k=M.getProperty("/currentState")||{},l=["home","embedded-home","headerless-home","merged-home","blank-home"];if(!!i){M.setProperty("/lastState",k);}this._destroyManageQueue(l);M.setProperty("/currentState",jQuery.extend(true,{},{},j));if(!e[h]){e[h]={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState(h)};}C=e[h].customShellState;E=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,h,i){this.updateStateProperty("showPane",V,h,i);};this.setHeaderHiding=function(h){this.updateStateProperty("headerHiding",h,true);};this.setHeaderVisibility=function(V,h,i){this.updateStateProperty("headerVisible",V,h,i);};this.showLogo=function(h,i){this.updateStateProperty("showLogo",true,h,i,false);};this.addHeaderItem=function(i,h,j){this._addHeaderItemInCorrectOrder("headItems",i,h,j);};this._removeReservedItemId=function(r,h,i){var A=false,R=i.indexOf(r);if(R>-1){i.splice(R,1);A=true;}R=h.indexOf(r);if(R>-1){h.splice(R,1);A=true;}return A;};this._addHeaderItemInCorrectOrder=function(p,i,h,j){var k=this;function V(l,q,r){var A=3-l.length;q.forEach(function(w,x){var y=(w==='meAreaHeaderButton'||w==='backBtn'||w==='homeBtn');if(l[w]===-1&&!y){A--;}});if(A<0){jQuery.sap.log.warning("Maximum of three items has been reached, cannot add more items.");return false;}return true;}function U(l,q,r){jQuery.sap.measure.start("FLP:ShellModel.fnUpdate","update shell head end items","FLP");var w=r.getProperty(l),x=[],y=q.slice(0);if(k._removeReservedItemId("meAreaHeaderButton",w,y)===true){x.push("meAreaHeaderButton");}if(k._removeReservedItemId("backBtn",w,y)===true){x.push("backBtn");}if(k._removeReservedItemId("homeBtn",w,y)===true){x.push("homeBtn");}w.some(function(z){if(x.length<3){x.push(z);}else{return true;}});y.some(function(z){if(x.length<3){x.push(z);}else{return true;}});r.setProperty(l,x);jQuery.sap.measure.end("FLP:ShellModel.fnUpdate");}this._setShellItem(p,i,h,j,V,U);};this.removeHeaderItem=function(i,h,j){this._removeShellItem("headItems",i,h,j);};this.addHeaderEndItem=function(i,h,j,D){if(i.length){this._addUpToSixItem("headEndItems",i,h,j,D);}};this.removeHeaderEndItem=function(i,h,j){this._removeShellItem("headEndItems",i,h,j);};this.addSubHeader=function(i,h,j){if(i.length){this._addShellItem("subHeader",i,h,j);}};this.removeSubHeader=function(i,h,j){this._removeShellItem("subHeader",i,h,j);};this.addActionButton=function(i,h,j,k){if(k){this._addActionButtonAtStart("actions",i,h,j);}else{this._addActionButton("actions",i,h,j);}};this.removeActionButton=function(i,h,j){this._removeShellItem("actions",i,h,j);};this.addToolAreaItem=function(i,h,j){if(i.length){this._addToolAreaItem("toolAreaItems",i,h,j);}};this.removeToolAreaItem=function(i,h,j){this._removeShellItem("toolAreaItems",i,h,j);};this.addLeftPaneContent=function(i,h,j){if(i.length){this._addShellItem("paneContent",i,h,j);}};this.removeLeftPaneContent=function(i,h,j){this._removeShellItem("paneContent",i,h,j);};this.addRightFloatingContainerItem=function(i,h,j){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,h,j);}};this.removeRightFloatingContainerItem=function(i,h,j){this._removeShellItem("RightFloatingContainerItems",i,h,j);};this.showSettingsButton=function(h,i){this.addActionButton(["userSettingsBtn"],h,i,false);};this.showSignOutButton=function(h,i){this.addActionButton(["logoutBtn"],h,i,false);};this.showRightFloatingContainer=function(h){this._showRightFloatingContainer(h);};this.addFloatingActionButton=function(i,h,j){if(i.length){this._addShellItem("floatingActions",i,h,j);}};this.removeFloatingActionButton=function(i,h,j){this._removeShellItem("floatingActions",i,h,j);};this.updateStateProperty=function(p,V,h,i,D){this._setShellItem(p,V,h,i,v,u,D);};this._handleTriggers=function(N){var T,h,i=[],A={};g=false;while(t.length>0){T=t.pop();if(N[T.sName]){i.push(T);A[T.sName]=T;}else{T.fnUnRegister(this);}}for(var j in N){if(N.hasOwnProperty(j)){if(!A[j]){h=N[j];h.fnRegister(this);i.push(h);}}}t=i;g=true;};this._registerTriggers=function(T){var i;g=false;for(i=0;i<T.length;i++){T[i].fnRegister(this);t.push(T[i]);}g=true;};this.createTriggers=function(T,h,j){var N=[];var U=function(T,r){var w;if(!r.aTriggers){r.aTriggers=[];}for(w=0;w<T.length;w++){var x={sName:T[w].sName,fnRegister:T[w].fnRegister,fnUnRegister:T[w].fnUnRegister};N.push(x);r.aTriggers.push(x);}};if(h===true){var k=s.getProperty("/currentState/");U(T,k);if(!I){this._registerTriggers(N);}}else{var i,l=s.getProperty('/currentState/stateName');for(i=0;i<j.length;i++){var p=j[i],P="/states/"+p,q=M.getProperty(P);N=[];U(T,q);if(l===p){if(!I){this._registerTriggers(N);}}}}};this.createInspection=function(A,h,j,k){var l=function(M,A,h){var y,z;if(!M.oCheckPoints){M.oCheckPoints=[];}if(!M.oCheckPoints[A]){M.oCheckPoints[A]=[];}y=M.oCheckPoints[A];for(z=0;z<h.length;z++){p=h[z];y.push({fnCondition:p.fnCondition,fnCheckPoint:p.fnAction});}};if(j===true){var p,q=s.getProperty("/currentState");l(q,A,h);if(!f&&!I){l(C.getProperty("/currentState"),A,h);}this._renderShellState();}else{var i,r=s.getProperty('/currentState/stateName');for(i=0;i<k.length;i++){var w=k[i],P="/states/"+w,x=M.getProperty(P);l(x,A,h);if(r===w){if(!I){this._renderShellState();}}}}};this.showShellItem=function(p,h,V){var j,k,l=this._getModelStates(h),q=this.getModel().getData().states,r="/currentState"+p;for(var i=0;i<l.length;i++){k=q[l[i]];j="/states/"+k.stateName+p;s.setProperty(j,V);}if(s.getProperty("/currentState/stateName")===h){s.setProperty(r,V);}};this.addCustomItems=function(h,i,j,k){if(this._isValidStateEntry(h)){this._isValidStateEntry(h).fnAdd(i,j,k);}else{throw new Error("Invalid state entry:"+h);}};this.removeCustomItems=function(h,i,j,k){if(this._isValidStateEntry(h)){this._isValidStateEntry(h).fnRemove(i,j,k);}else{throw new Error("Invalid state entry:"+h);}};this.createExtendedShellState=function(h,i){var B=M.getProperty("/currentState/stateName"),j,k=this._createCustomShellState(h);if(!e[B]){e[B]={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}j=e[B].extendedShellStates;if(j[h]){return false;}s=k;f=true;i();if(j[h]){j[h].customState=k;}else{j[h]={managedObjects:[],customState:k};}s=M;f=false;return true;};this.applyExtendedShellState=function(h){E=h;this._renderShellState();};this.addEntryInShellStates=function(h,i,A,r,j){var k,l;if(!c[h]){c[h]={fnAdd:A,fnHide:r};var p=this._getStatesList();for(k=0;k<p.length;k++){l=p[k];M.setProperty("/states/"+l+"/"+h,j[l]);}this["remove"+i]=r;this["add"+i]=A;}else{throw new Error("State entry already exsists:"+h);}};this.addElementToManagedQueue=function(i){var h=s.getProperty("/currentState/stateName"),B=M.getProperty("/currentState/stateName"),j,k=i.getId();if(!e[B]){e[B]={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}j=e[B].extendedShellStates;if(!j[h]){j[h]={managedObjects:[],customState:undefined};}j[h].managedObjects.push(k);var l=o[k];if(l){l.nRefCount++;}else{l={oItem:i,nRefCount:1};o[k]=l;}};this.updateNeededTriggersMap=function(h,T){var i;if(!T){return;}for(i=0;i<T.length;i++){h[T[i].sName]=T[i];}};this._renderShellState=function(){var B=M.getProperty("/currentState/stateName"),p=B[0]==="/"?B:"/states/"+B,h,i,j=jQuery.extend(true,{},{},M.getProperty(p)),k=e[B],l,N={};if(k){l=k.customShellState.getProperty("/currentState");}var q=new sap.ui.model.json.JSONModel({"currentState":jQuery.extend(true,{},{},j)});s=q;I=true;if(E){if(k.extendedShellStates[E]){h=k.extendedShellStates[E].customState;i=h.getProperty("/currentState");this._addCustomShellStates(i);}}if(l){this._addCustomShellStates(l);}s=M;if(j&&j.aTriggers){this.updateNeededTriggersMap(N,j.aTriggers);}if(i&&i.aTriggers){this.updateNeededTriggersMap(N,i.aTriggers);}if(l&&l.aTriggers){this.updateNeededTriggersMap(N,l.aTriggers);}if(g){this._handleTriggers(N);}M.setProperty("/currentState",q.getProperty("/currentState"));I=false;q.destroy();};this._addCustomShellStates=function(T){this.addHeaderItem(T.headItems,true);this.addToolAreaItem(T.toolAreaItems,true);this.addHeaderEndItem(T.headEndItems,true);this.addSubHeader(T.subHeader,true);this.addRightFloatingContainerItem(T.RightFloatingContainerItems,true);this.addActionButton(T.actions,true,undefined,false);this.addLeftPaneContent(T.paneContent,true);this.addFloatingActionButton(T.floatingActions,true);this._setCurrentApplicationInformation(T.application);this.showRightFloatingContainer(T.showRightFloatingContainer);this.setHeaderHiding(T.headerHiding);this.setHeaderVisibility(T.headerVisible,true);if(T.showLogo){this.showLogo(true);}};this._createCustomShellState=function(h){var i={"currentState":{"stateName":h,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var j=M.getProperty("/customStatesDelta"),k=j[h];if(k){jQuery.extend(i.currentState,k);}return new sap.ui.model.json.JSONModel(i);};this._setCurrentApplicationInformation=function(A){if(!A){A={};}this.updateStateProperty("application",A,true);};this._showRightFloatingContainer=function(h){this._setShellItem("showRightFloatingContainer",h,true,[],v,u);};this._addActionButtonAtStart=function(p,i,h,j){function U(k,l,q){var A=q.getProperty(k),r=[],O=l.indexOf("openCatalogBtn");if(O>-1){l.splice(O,1);r.push("openCatalogBtn");}else{if(A[0]==="openCatalogBtn"){A.splice(0,1);r.push("openCatalogBtn");}}r=r.concat(l).concat(A);q.setProperty(k,r);}this._setShellItem(p,i,h,j,n,U);};this._addActionButton=function(p,i,h,j){function U(k,l,q){var A=q.getProperty(k);var L=A.indexOf("logoutBtn");if(L>-1){A.splice.apply(A,[L,0].concat(l));}else{A=A.concat(l);}var O=A.indexOf("openCatalogBtn"),r=[];if(O>-1){A.splice(O,1);r.push("openCatalogBtn");r=r.concat(A);}else{r=A;}q.setProperty(k,r);}this._setShellItem(p,i,h,j,n,U);};this.setFloatingContainerContent=function(p,i,h,j){function V(k,i,l){return i.length===1;}function U(k,i,l){l.setProperty(k,i);}this._setShellItem(p,i,h,j,V,U);};this._addUpToSixItem=function(p,i,h,j,D){function V(k,l,q){var r=0,w,x;if(l.length===1&&l[0]==="endItemsOverflowBtn"){return true;}for(w=0;w<k.length;w++){x=k[w];if(x!=="endItemsOverflowBtn"){r++;}if(r+l.length>6){jQuery.sap.log.warning("maximum of six items has reached, cannot add more items.");return false;}if(l.indexOf(x)>-1){return false;}}return true;}function U(k,l,q){var r=q.getProperty(k),w=r.slice(0);w=w.sort();var x=w.indexOf("sf");if(x!=-1){w.splice(x,1);w.splice(0,0,"sf");}w=w.concat(l);var y=w.indexOf("NotificationsCountButton");if(y!=-1){w.splice(y,1);w.splice(w.length,0,"NotificationsCountButton");}var z=w.indexOf("copilotBtn");if(z!=-1){w.splice(z,1);if(w.indexOf("sf")!=-1){w.splice(1,0,"copilotBtn");}else{w.splice(0,0,"copilotBtn");}}q.setProperty(k,w);}this._setShellItem(p,i,h,j,V,U,D);};this._addShellItem=function(p,i,h,j){function V(k,i,l){if(k.length>0){jQuery.sap.log.warning("You can only add one item. Replacing existing item: "+k[0]+" in state: "+l+", with the new item: "+i[0]+".");}return true;}function U(k,l,q){q.setProperty(k,i.slice(0));}this._setShellItem(p,i,h,j,V,U);};this._addRightFloatingContainerItem=function(p,i,h,j){function U(k,l,q){var r=q.getProperty(k);r=r.concat(l);q.setProperty(k,r);}this._setShellItem(p,i,h,j,n,U);};this._addToolAreaItem=function(p,i,h,j){function U(l,i,q){var r=q.getProperty(l);r.push(i);q.setProperty(l,r);}var k,P=this._getPassStates(j);for(k=0;k<P.length;k++){this.showShellItem("/toolAreaVisible",P[k],true);}this._setShellItem(p,i,h,j,n,U);};this._removeShellItem=function(p,i,h,j){function V(k,l){var q,i,r;for(r=0;r<l.length;r++){i=l[r];q=k.indexOf(i);if(q<0){jQuery.sap.log.warning("You cannot remove Item: "+i+", the headItem does not exists.");return false;}}return true;}function U(k,l,q){var r=q.getProperty(k),w,i,x;for(x=0;x<l.length;x++){i=l[x];w=r.indexOf(i);if(w>-1){r.splice(w,1);}}q.setProperty(k,r);}this._setShellItem(p,i,h,j,V,U);};this._commitCheckPoints=function(h,i,j){var k;for(k=0;k<h.length;k++){if(h[k].fnCondition(i,j,this)){h[k].fnCheckPoint(i,j,this);}}};this._setShellItem=function(p,O,h,k,V,U,D){var l,q;var r=Array.isArray(O)?O.slice(0):O;if(h===true){l="/currentState/"+p;q=s.getProperty(l);if(V(q,r,"currentState")===false){return;}if(I&&!d){var B=M.getProperty("/currentState/stateName"),P="/states/"+B,w=M.getProperty(P),x=e[B];d=true;if(w.oCheckPoints){var y=w.oCheckPoints[p];if(y&&y.length){this._commitCheckPoints(y,q,r);}}if(E){if(x.extendedShellStates[E]){var z=x.extendedShellStates[E].customState,A=z.getProperty("/currentState");if(A&&A.oCheckPoints&&A.oCheckPoints[p]){this._commitCheckPoints(A.oCheckPoints[p],q,r);}}}var F=x.customShellState.getProperty("/currentState");if(F&&F.oCheckPoints&&F.oCheckPoints[p]){y=F.oCheckPoints[p];if(y&&y.length){this._commitCheckPoints(y,q,r);}}d=false;}if(!f&&!I){U(l,r,C);sap.ui.getCore().getEventBus().publish('launchpad','updateShell',{oModel:s,path:l,aIds:r,sProperty:p});this._renderShellState();}else{U(l,r,s);}}else{var G=D?k:this._getPassStates(k),i,H=s.getProperty('/currentState/stateName');for(i=0;i<G.length;i++){var J=G[i],j;l="/states/"+J+"/"+p;q=s.getProperty(l);if(V(q,r,J)===false){continue;}var K=this._getModelStates(J,D);for(j=0;j<K.length;j++){l="/states/"+K[j]+"/"+p;U(l,r,s);if(H===K[j]){if(!I){this._renderShellState();}}}}}};this._getPassStates=function(h){var p=[],i;h=h||[];for(i=0;i<h.length;i++){if(h[i]!==undefined){if(h[i]!=="home"&&h[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(h[i]);}}if(!p.length){p=["app","home"];}return p;};this._getModelStates=function(h,D){var i=[];if(h==="app"&&!D){var j=["app","minimal","standalone","embedded","headerless","merged","blank"];i=i.concat(j);}else if(h==="home"&&!D){var j=["home","embedded-home","headerless-home","merged-home","blank-home"];i=i.concat(j);}else{i.push(h);}return i;};this._getStatesList=function(){var h=M.getProperty("/states");return Object.keys(h);};this._destroyManageQueue=function(h){var i,j,k,l,B,p,q;for(i in e){if(e.hasOwnProperty(i)){if(!h||h.indexOf(i)===-1){B=e[i].extendedShellStates;for(p in B){if(B.hasOwnProperty(p)){q=B[p].managedObjects;for(j=0;j<q.length;j++){k=q[j];l=o[k];l.nRefCount--;if(l.nRefCount===0){l.oItem.destroy();}}delete B[p];}}delete e[i];}}}};this._isValidStateEntry=function(N){return!!c[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(h,i){f=i;s=h;};}var b=new S();return b;},true);

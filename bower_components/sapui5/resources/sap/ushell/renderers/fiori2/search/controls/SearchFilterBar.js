sap.ui.define(['sap/m/Toolbar'],function(){"use strict";return sap.m.Toolbar.extend("sap.ushell.renderers.fiori2.search.controls.SearchFilterBar",{constructor:function(o){var t=this;o=jQuery.extend({},{design:sap.m.ToolbarDesign.Info},o);sap.m.Toolbar.prototype.constructor.apply(t,[o]);t.addStyleClass('sapUshellSearchFilterContextualBar');t.filterFormatter=t.filterFormatter.bind(t);t.filterText=new sap.m.Text({text:{parts:[{path:"/uiFilter/defaultConditionGroup/conditions"},{path:"/facets"}],formatter:t.filterFormatter},tooltip:{parts:[{path:"/uiFilter/defaultConditionGroup/conditions"},{path:"/facets"}],formatter:t.filterFormatter}}).addStyleClass("sapUshellSearchFilterText");t.filterText.setMaxLines(1);t.filterText.clampText();t.addContent(t.filterText);t.addContent(new sap.m.ToolbarSpacer());t.resetButton=new sap.ui.core.Icon({src:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip")}).addStyleClass("sapUshellSearchFilterResetButton");t.addContent(t.resetButton);},filterFormatter:function(c,f){var g=function(a){return a.label;};if(c.length===0){return"";}c=this.sortConditions(c,f);var l=[];for(var i=0;i<c.length;i++){var s=jQuery.map(c[i].conditions,g);l=l.concat(s);}return sap.ushell.resources.i18n.getText("filtered_by",l.join(', '));},sortConditions:function(c,f){var i;var g=function(e,v,l){for(var i=0;i<l.length;++i){if(l[i][e]===v){return i;}}return-1;};var a=function(t,f){for(var i=0;i<f.length;++i){if(f[i].title===t){return f[i];}}return null;};var n=[];for(i=0;i<c.length;++i){n.push(c[i].clone());}c=n;c.sort(function(e,h){return g('title',e.label,f)-g('title',h.label,f);});for(i=0;i<c.length;++i){var b=c[i];var d=a(b.label,f);if(!d){continue;}b.conditions.sort(function(e,h){return g('label',e.label,d.items)-g('label',h.label,d.items);});}return c;},renderer:'sap.m.ToolbarRenderer',onAfterRendering:function(){var t=this;t.resetButton.attachPress(function(){t.getModel().resetFilterConditions(true);});var $=jQuery('.sapUshellSearchFilterText');$.attr('aria-label',sap.ushell.resources.i18n.getText("filtered_by_aria_label"));}});});

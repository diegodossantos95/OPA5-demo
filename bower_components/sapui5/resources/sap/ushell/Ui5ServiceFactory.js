// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service"],function(S,a,b){"use strict";var A;function s(i){A=i;}function g(){return A;}function c(m){return!!/^[^_].+/.test(m);}function d(o){var p,P=[];for(p in o){P.push(p);}return P;}function e(u,p,P,i){d(u).filter(c).filter(function(n){var v=u[n];p[n]=v;return typeof v==="function";}).forEach(function(F){p[F]=p[F].bind(u);if(i){h(P,p,F);}});}function f(C){var G;if(typeof C==="undefined"){return true;}if(!jQuery.isPlainObject(C)){return false;}if(!C.scopeType){return false;}G=jQuery.sap.getObject("scopeObject.getId",undefined,C);if(typeof G!=="function"){return false;}return true;}function h(p,P,m){var o=P[m];P[m]=function(){var i,n,A=g();if(!p||p.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+m+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined;}n=new Array(arguments.length);for(i=0;i<n.length;++i){n[i]=arguments[i];}return o.apply(P,n);};}function j(p,u){var P,i;P={};i=typeof p==="object";e(u,P,p,i);if(i&&p.scopeType==="component"&&p.scopeObject&&p.scopeObject.getId){s(p.scopeObject.getId());}return P;}function k(u){return new Promise(function(r,R){try{var U=sap.ushell.Container.getService(u);r(U);}catch(E){R(E);}});}function l(u){var U=a.extend("sap.ushell.ui5service."+u+"Factory",{createInstance:function(p){return new Promise(function(r,R){k(u).then(function(o){var i,m,n;if(!f(p)){jQuery.sap.log.error("Invalid context for "+u+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");R("Invalid Context for "+u+" service");return;}m=j(p,o,u);n=b.extend("sap.ushell.ui5service."+u,{getInterface:function(){return m;}});i=new n(p);r(i);},function(G){R(G);});});}});return new U();}return{createServiceFactory:l};});

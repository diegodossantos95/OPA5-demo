// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define([],function(){"use strict";var c;function H(){return Object.create(null,{post:{value:r.bind(null,"POST")},get:{value:r.bind(null,"GET")},put:{value:r.bind(null,"PUT")},delete:{value:r.bind(null,"DELETE")},options:{value:r.bind(null,"OPTIONS")}});function f(U){return r("OPTIONS",U,{headers:{"x-csrf-token":"fetch"}}).then(function(R){var n=R.getResponseHeader("x-csrf-token");u(n);return n;});}function g(R,U,h){if(h&&h["x-csrf-token"]!==undefined){return new Promise(function(b,d){b(undefined);});}switch(R){case"HEAD":case"GET":case"OPTIONS":return new Promise(function(b,d){b("fetch");});case"POST":case"PUT":case"DELETE":if(c){return new Promise(function(b,d){b(c);});}else{return f(U);}default:throw new Error("Unsupported request method: "+R);}}function u(n){c=n;}function a(x){return Object.create(null,{status:{value:x.status},statusText:{value:x.statusText},responseText:{value:x.responseText},responseHeaders:{value:x.getAllResponseHeaders()},getResponseHeader:{value:x.getResponseHeader.bind(x)}});}function r(R,U,C){var h,o,x=new XMLHttpRequest();C=C||{};h=!C.headers?[]:Object.keys(C.headers).map(function(s){return{name:s,value:this[s]};},C.headers);o=C.data;return new Promise(function(b,d){g(R,U,C.headers).then(function(s){x.open(R,U);h.forEach(function(e){x.setRequestHeader(e.name,e.value);});if(s){x.setRequestHeader("x-csrf-token",s);}x.addEventListener("load",function handleLoadedRequest(){var e=a(x);return x.status<200||x.status>299?d(e):b(e);});x.send(o?JSON.stringify(o):undefined);}).catch(function(e){jQuery.sap.log.error(e,null,"sap.ushell.util.HttpClient");d(e);})});}}return new H();},true);

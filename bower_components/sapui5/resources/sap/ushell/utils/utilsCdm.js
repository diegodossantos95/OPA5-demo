sap.ui.define(["sap/ushell/utils"],function(u){"use strict";function g(o,A){return u.getMember(o,A);}function m(k,s,A){var i={};i.semanticObject=s.semanticObject;i.action=s.action;i.title=s.title||g(A,"sap|app.title");i.info=s.info||g(A,"sap|app.info");i.icon=s.icon||g(A,"sap|ui.icons.icon");i.subTitle=s.subTitle||g(A,"sap|app.subTitle");i.shortTitle=s.shortTitle||g(A,"sap|app.shortTitle");var t,T,I=false;i.resolutionResult=jQuery.extend(true,{},g(A,"sap|platform|runtime"));i.resolutionResult=i.resolutionResult||{};if(g(A,"sap|platform|runtime")){i.resolutionResult["sap.platform.runtime"]=jQuery.extend(true,{},g(A,"sap|platform|runtime"));}if(g(A,"sap|ui.technology")==="GUI"){i.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){i.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"&&i.resolutionResult["sap.platform.runtime"]){if(i.resolutionResult["sap.platform.runtime"].uri){i.resolutionResult["sap.platform.runtime"].url=i.resolutionResult["sap.platform.runtime"].uri;i.resolutionResult.url=i.resolutionResult["sap.platform.runtime"].uri;}}i.resolutionResult.applicationType=this._formatApplicationType(i.resolutionResult,A);i.resolutionResult.systemAlias=i.resolutionResult.systemAlias||s.systemAlias;i.resolutionResult.text=i.title;i.deviceTypes=g(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(s.deviceTypes||{},M)){i.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(i.deviceTypes,M)){i.deviceTypes[M]=true;}i.deviceTypes[M]=!!i.deviceTypes[M];});i.signature=s.signature||{};i.signature.parameters=i.signature.parameters||{};i.signature.additionalParameters=(s.signature||{}).additionalParameters||"allowed";var b=s.indicatorDataSource||g(A,"sap|app.indicatorDataSource");var o=b?"#Shell-dynamicTile":"#Shell-staticTile";if(g(A,"sap|app.type")==="tile"||g(A,"sap|flp.type")==="tile"){o=i.resolutionResult;o.url=g(A,"sap|platform|runtime.componentProperties.url");o.componentName=g(A,"sap|ui5.componentName");if(g(A,"sap|platform|runtime.includeManifest")){o.componentProperties=o.componentProperties||{};o.componentProperties.manifest=jQuery.extend(true,{},A);delete o.componentProperties.manifest["sap.platform.runtime"];}T=g(A,"sap|app.crossNavigation.outbounds.target");I=true;}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}if(g(A,"sap|flp.tileSize")){t=g(A,"sap|flp.tileSize");}i.tileResolutionResult={title:i.title,subTitle:i.subTitle,icon:i.icon,size:t,info:i.info,tileComponentLoadInfo:o,indicatorDataSource:b};i.tileResolutionResult.isCustomTile=I;if(T){i.tileResolutionResult.targetOutbound=T;}return i;}function f(r,A){var s=r.applicationType;if(s){return s;}var c=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+c;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}return"URL";}function a(s){var t=this;if(!s){return[];}var i=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var b=g(o,"sap|app.crossNavigation.inbounds");if(b){var l=Object.keys(b).sort();l.forEach(function(I){var c=b[I];var r=t._mapOne(I,c,o);if(r){i.push(r);}});}}catch(E){jQuery.sap.log.error("Error in application "+A+": "+E,E.stack);}});}catch(e){jQuery.sap.log.error(e);jQuery.sap.log.error(e.stack);return[];}return i;};return{formatSite:a,_mapOne:m,_formatApplicationType:f};},true);

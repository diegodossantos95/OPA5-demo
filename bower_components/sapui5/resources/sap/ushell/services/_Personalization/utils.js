// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private"],function(u,c,p){"use strict";function a(e,i){var j;for(j in i){if(typeof i[j]!=='function'){if(i.hasOwnProperty(j)){if(j===e){return true;}}}}return false;}function b(C){return p.S_CONTAINER_PREFIX+C;}function d(C,s,_,e){var P="",l,A;if(typeof C!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}if(C.length>40){jQuery.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}s=this._adjustScope(s);P=b(C);l=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;A=_;if(s&&s.validity===0){if(l){s.validity=1440;}else{A=e;}}return{oAdapterForScope:A,oScope:s,sPrefixedContainerKey:P};}function f(s){var C=c,D={validity:Infinity,keyCategory:C.keyCategory.GENERATED_KEY,writeFrequency:C.writeFrequency.HIGH,clientStorageAllowed:false};if(!s){return D;}D.validity=s&&s.validity;if(D.validity===null||D.validity===undefined||typeof D.validity!=="number"){D.validity=Infinity;}if(!(typeof D.validity==="number"&&((D.validity>=0&&D.validity<1000)||D.validity===Infinity))){D.liftime=Infinity;}D.keyCategory=a(s.keyCategory,C.keyCategory)?s.keyCategory:D.keyCategory;D.writeFrequency=a(s.writeFrequency,C.writeFrequency)?s.writeFrequency:D.writeFrequency;if(typeof s.clientStorageAllowed==='boolean'&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){D.clientStorageAllowed=s.clientStorageAllowed;}return D;}function g(o){if(o===undefined){return undefined;}try{return JSON.parse(o);}catch(e){return undefined;}}function h(o){if(o===undefined){return undefined;}try{return JSON.parse(JSON.stringify(o));}catch(e){return undefined;}}return{adjustScope:f,adjustScopePickAdapter:d,cloneToObject:g,clone:h,addContainerPrefix:b};});

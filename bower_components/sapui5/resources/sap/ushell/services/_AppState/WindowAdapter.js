// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/_AppState/LimitedBuffer"],function(L){"use strict";var W=50;function a(){this._init.apply(this,arguments);}a.prototype._init=function(s,b,c){var i=c&&c.config&&c.config.initialAppStates||{};var I=c&&c.config&&c.config.initialAppStatesPromise;this._oServiceInstance=s;this._oBackendAdapter=b;if(!a.prototype.data){a.prototype.data=new L(W);}if(I){I.then(function(i){if(typeof i==="object"){Object.keys(i).forEach(function(k){a.prototype.data.addAsHead(k,i[k]);});}});}Object.keys(i).forEach(function(k){a.prototype.data.addAsHead(k,i[k]);});};a.prototype.saveAppState=function(k,s,d,A,c,t){this.sComponent=c;var D=new jQuery.Deferred();a.prototype.data.addAsHead(k,d);if(this._oBackendAdapter&&!t){return this._oBackendAdapter.saveAppState(k,s,d,A,c);}D.resolve();return D.promise();};a.prototype.loadAppState=function(k){var d=new jQuery.Deferred(),b=a.prototype.data.getByKey(k);if(b){setTimeout(function(){d.resolve(k,b.value);},0);return d.promise();}if(this._oBackendAdapter){this._oBackendAdapter.loadAppState(k).done(function(k,D){a.prototype.data.addAsHead(k,D);d.resolve(k,D);}).fail(d.reject.bind(d));return d.promise();}d.reject("AppState.js loadAppState: Application State could not be loaded");return d.promise();};return a;});

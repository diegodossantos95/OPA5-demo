/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/XMLComposite','sap/ui/base/ManagedObject','sap/ui/Device','sap/fe/controls/_FilterBar/FilterBarController','sap/ui/model/odata/v4/AnnotationHelper','sap/fe/controls/_FilterBar/FilterBarAnnotationHelper'],function(q,X,M,D,F){"use strict";var a=X.extend("sap.fe.FilterBar",{metadata:{designTime:true,properties:{entitySetContext:{type:"any",invalidate:"template"},liveUpdate:{type:"boolean",defaultValue:!D.system.phone,invalidate:"template"},searchOnStart:{type:"boolean",defaultValue:true,invalidate:"template"},filterSummary:{type:"string",defaultValue:"",invalidate:false},enabled:{type:"boolean",defaultValue:true,invalidate:false},conditionModelName:{type:"string",invalidate:false}},events:{search:{},change:{}},aggregations:{},publicMethods:[]},alias:"this",fragment:"sap.fe.controls._FilterBar.FilterBar"});var i=function(){var c=this.oFilterBarController.getConditionModel();this.oFilterBarController.createSuggestProviders();if(!this.bInitialized&&c){this.bInitialized=true;if(this.getSearchOnStart()&&this.getEnabled()){this._bIsReady=true;this.fireSearch();}var C=c.bindProperty("/",c.getContext("/"));C.attachChange(this.handleChange.bind(this));if(!this.getEnabled()){this.getInnerFilterBar().setBusy(true);}this.detachModelContextChange(i);}};a.prototype.onAfterRendering=function(){var s=this.oFilterBarController.getSearchControl();if(s){s.attachBrowserEvent("blur",function(e){});}};a.prototype.init=function(){this._bIsReady=false;this.oFilterBarController=new F(this);this.attachModelContextChange(i);};a.prototype.getInnerFilterBar=function(){return this.get_content();};a.prototype.handleChange=function(){if(this.getLiveUpdate()&&this.getEnabled()){this.fireSearch();this.oFilterBarController.setFilterSummary();this.fireChange();}};a.prototype.handleSearch=function(e){this.fireSearch();this.oFilterBarController.setFilterSummary();this.fireChange();};a.prototype.handleSearchChange=function(e){var t=this,s;if(t._iSearchCounter){t._iSearchCounter++;}else{t._iSearchCounter=1;}s=t._iSearchCounter;if(this.getLiveUpdate()){setTimeout(function(){if(s===t._iSearchCounter){t.fireSearch();t.oFilterBarController.setFilterSummary();t.fireChange();delete t._iSearchCounter;}},400);}};a.prototype.isReady=function(){return this._bIsReady;};a.prototype.handleGo=function(){this._bIsReady=true;this.fireSearch();this.oFilterBarController.setFilterSummary();this.fireChange();};a.prototype.handleSuggest=function(e){this.oFilterBarController.handleSuggest(e);};a.prototype.handleValueHelpRequest=function(e){this.oFilterBarController.handleValueHelpRequest(e);};a.prototype.createFixedValueList=function(e){this.oFilterBarController.createFixedValueList(e);};a.prototype.setEnabled=function(e){this.getInnerFilterBar().setBusy(!e);this.setProperty("enabled",e);if(e){if(this.bInitialized&&this.getSearchOnStart()){this._bIsReady=true;this.fireSearch();}}};a.prototype.onBeforeRendering=function(){this.oFilterBarController.setFilterSummary();};a.prototype.getQueryParameters=function(e){return this.oFilterBarController.getQueryParameters(e);};a.prototype.getAppState=function(){return this.oFilterBarController.getAppState();};a.prototype.setAppState=function(A){this.oFilterBarController.setAppState(A||{});if(!this.getLiveUpdate()){this.handleGo();}};return a;},true);

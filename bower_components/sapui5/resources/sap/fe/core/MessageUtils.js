/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/m/MessageToast","sap/m/MessageItem","sap/m/MessageView","sap/ui/layout/form/SimpleForm","sap/ui/model/message/MessageModel","sap/m/NavContainer","sap/m/Page","sap/m/Dialog","sap/m/Button","sap/ui/core/Title","sap/m/Label","sap/m/Text","sap/ui/core/message/Message","sap/m/Toolbar","sap/m/ToolbarSpacer"],function(q,B,M,a,b,S,c,N,P,D,d,T,L,e,f,g,h){"use strict";function j(t){function H(E){var m=[];function n(v){v.getSource().getParent().getParent().getParent().to("errorMessagesPage");v.getSource().getParent().getParent().getParent().getParent().getButtons()[0].setVisible(true);}if(!(E instanceof Array)){E=Array(E);}var o=new a({counter:'{counter}',title:'{message}',subtitle:'{additionalText}',longtextUrl:'{descriptionUrl}',type:'{type}',description:'{description}'});var l=new b({items:{path:'/',template:o}});l.setModel(sap.ui.getCore().getMessageManager().getMessageModel());var p=new S({width:"100%"});if(E.length>0){if(E[0].status){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_HTTP_STATUS"),design:"Bold"}));p.addContent(new e({text:E[0].status}));}if(E[0].statusText){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_EXCEPTION_CATEGORY"),design:"Bold"}));p.addContent(new e({text:E[0].statusText}));}if(E[0].error){if(E[0].error["@SAP__common.Application"]){p.addContent(new T({text:t.getText("SAPFE_TECHNICAL_DETAILS_GROUP_APPLICATION")}));if(E[0].error["@SAP__common.Application"].ComponentId){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_COMPONENT_ID"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.Application"].ComponentId}));}if(E[0].error["@SAP__common.Application"].ServiceId){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_ODATA_SERVICE"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.Application"].ServiceRepository+"\n"+E[0].error["@SAP__common.Application"].ServiceId+"\n"+E[0].error["@SAP__common.Application"].ServiceVersion}));}}p.addContent(new T({text:"Error Resolution"}));if(E[0].error["@SAP__common.TransactionId"]){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_TRANSACTION_ID"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.TransactionId"]}));}if(E[0].error["@SAP__common.Timestamp"]){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_TIMESTAMP"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.Timestamp"]}));}if(E[0].error["@SAP__common.ErrorResolution"]){if(E[0].error["@SAP__common.ErrorResolution"].Analysis){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_ANALYSIS"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.ErrorResolution"].Analysis}));}if(E[0].error["@SAP__common.ErrorResolution"].Note){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_SAP_NOTE"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.ErrorResolution"].Note}));}if(E[0].error["@SAP__common.ErrorResolution"].DetailedNote){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_SAP_DETAILED_NOTE"),design:"Bold"}));p.addContent(new e({text:E[0].error["@SAP__common.ErrorResolution"].DetailedNote}));}}if(E[0].error.details&&E[0].error.details[0]&&E[0].error.details[0].message){p.addContent(new T({text:t.getText("SAPFE_TECHNICAL_DETAILS_GROUP_MESSAGES")}));for(var i=0;i<E[0].error.details.length;i++){p.addContent(new L({text:t.getText("SAPFE_TECHNICAL_DETAILS_MESSAGES")+" "+(i+1),design:"Bold"}));p.addContent(new e({text:E[0].error.details[i].message+", "+E[0].error.details[i].code+", "+E[0].error.details[i]["@SAP__common.Severity"]}));m.push(new f({"message":E[0].error.details[i].message,"code":E[0].error.details[i].code,"type":E[0].error.details[i]["@SAP__common.Severity"],"longtextUrl":E[0].error.details[i].longtext_url}));}sap.ui.getCore().getMessageManager().addMessages(m);}}}if(!this.errorMessagesPage){this.errorMessagesPage=new P({id:"errorMessagesPage",customHeader:[new g({design:"Transparent",content:[new h(),new sap.m.Title({text:t.getText("SAPFE_ERROR_MESSAGES_PAGE_TITLE")}),new h()]})]});}if(this.errorMessagesPage.getContent()){this.errorMessagesPage.removeAllContent();}this.errorMessagesPage.addContent(l);if(p.getContent().length>0){if(!this.technicalDetailsPage){this.technicalDetailsPage=new P({id:"technicalDetailsPage",customHeader:new g({design:"Transparent",content:[new d({type:"Back",press:n}),new h(),new sap.m.Title({text:t.getText("SAPFE_TECHNICAL_MESSAGES_PAGE_TITLE")}),new h()]})});}if(this.technicalDetailsPage.getContent()){this.technicalDetailsPage.removeAllContent();}this.technicalDetailsPage.addContent(p);}var r=[];if(!!this.errorMessagesPage){r.push(this.errorMessagesPage);}if(!!this.technicalDetailsPage){r.push(this.technicalDetailsPage);}var s=new N({height:"100%",width:"100%",defaultTransitionName:"show",pages:r});var u=new D({contentWidth:"37.5em",contentHeight:"25em",showHeader:false,state:'Error',content:s,resizable:true,draggable:true,ariaLabelledBy:new sap.ui.core.InvisibleText({text:t.getText("SAPFE_ERROR_MESSAGES_PAGE_TITLE")}),beginButton:new d({press:function(){s.to("technicalDetailsPage");this.setVisible(false);},text:t.getText("SAPFE_TECHNICAL_MESSAGES_PAGE_TITLE")}),endButton:new d({press:function(){sap.ui.getCore().getMessageManager().removeAllMessages();u.close();},text:t.getText("SAPFE_CLOSE")}),verticalScrolling:false});if(!this.technicalDetailsPage){u.getBeginButton().setVisible(false);}u.open();}function k(i){M.show(i);}return{handleRequestFailed:H,handleSuccess:k};}return B.extend("sap.fe.core.MessageUtils.js",{constructor:function(t){q.extend(this,j(t));}});});

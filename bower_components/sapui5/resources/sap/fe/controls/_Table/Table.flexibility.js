sap.ui.define([],function(){"use strict";function a(M,i,l,t,o,b){var c=b.getMetaModel(),d=c.requestObject(M);return d.then(function(){var I=t.getInnerTable(),p=c.createBindingContext(M),T=o.getProperty(t,"type"),f,v;if(T==='ResponsiveTable'){f="sap.fe.controls._Table.ResponsiveTable.AddColumnChange";}else if(T==='GridTable'){f="sap.fe.controls._Table.GridTable.AddGridTableColumnChange";}try{var v=sap.ui.view({viewContent:'<core:View xmlns:core="sap.ui.core"><core:Fragment fragmentName="'+f+'" type="XML"/></core:View>',type:"XML",async:true,preprocessors:{xml:{bindingContexts:{dataField:p},models:{dataField:c}}}});}catch(e){jQuery.sap.log.error(e);}return v.loaded().then(function(){var C=v.getContent()[0].getColumns()[0],g,L,h;if(l){if(T==='ResponsiveTable'){h=C.getHeader();}else if(T==='GridTable'){var h=C.getLabel();}h.setText(l);}o.insertAggregation(I,"columns",C,i);if(T==='ResponsiveTable'){g=v.getContent()[1];L=o.getBindingTemplate(I,"items");o.insertAggregation(L,"cells",g,i);}return C;});});}function r(e,t,M){var I=t.getInnerTable(),T=M.getProperty(t,"type"),l,C=M.getAggregation(I,"columns"),b,R={},o,d,f;for(var i=0;i<C.length;i++){if(M.getId(C[i])===e){d=C[i];f=M.getAggregation(d,"customData");for(var c=0;c<f.length;c++){if(M.getProperty(f[c],"key")==="metaContextPath"){R.metaContextPath=M.getProperty(f[c],"value");}}R.index=i;R.id=M.getId(d);if(T==='ResponsiveTable'){o=M.getAggregation(d,"header");}else if(T==='GridTable'){o=M.getAggregation(d,"label");}R.label=M.getProperty(o,"text");M.removeAggregation(I,"columns",d);if(T==='ResponsiveTable'){l=M.getBindingTemplate(I,"items");b=M.getAggregation(l,"cells");M.removeAggregation(l,"cells",b[i]);}return R;}}}function m(e,t,T,M){var I=T.getInnerTable(),c=M.getAggregation(I,"columns"),s=M.getProperty(T,"type"),l,C;for(var i=0;i<c.length;i++){if(M.getId(c[i])===e){M.removeAggregation(I,"columns",c[i]);M.insertAggregation(I,"columns",c[i],t);if(s==='ResponsiveTable'){l=M.getBindingTemplate(I,"items");C=M.getAggregation(l,"cells");M.removeAggregation(l,"cells",C[i]);M.insertAggregation(l,"cells",C[i],t);}}}}return{"addColumn":{applyChange:function(c,t,p){var C=c.getDefinition(),M=C.content.bindingString,l=C.content.label,i=C.content.index,o=p.modifier,b=p.appComponent||p.view,d=b?b.getModel():undefined;if(!d instanceof sap.ui.model.odata.v4.ODataModel){jQuery.sap.log.error("Change can't be applied without a container having a Odata v4 model assigned");return false;}return a(M,i,l,t,o,d).then(function(e){c.setRevertData({elementId:o.getId(e)});});},revertChange:function(c,t,p){var R=c.getRevertData();if(R){r(R.elementId,t,p.modifier);c.resetRevertData();}else{jQuery.sap.log.error("Attempt to revert an unapplied change.");return false;}return true;}},"moveColumns":{applyChange:function(c,t,p){var C=c.getDefinition(),M=C.content.movedElements;for(var x=0;x<M.length;x++){m(M[x].element,M[x].targetIndex,t,p.modifier);}return true;},revertChange:function(c,t,p){var C=c.getDefinition(),M=C.content.movedElements;for(var x=0;x<M.length;x++){m(M[x].element,M[x].sourceIndex,t,p.modifier);}return true;}},"removeColumn":{applyChange:function(c,t,p){var C=c.getDefinition(),R;R=r(C.content.removedElement,t,p.modifier);c.setRevertData(R);return true;},revertChange:function(c,t,p){var R=c.getRevertData();if(R){return a(R.metaContextPath,R.id,R.index,R.label,t,p.modifier).then(function(){c.resetRevertData();});}else{jQuery.sap.log.error("Attempt to revert an unapplied change.");return false;}}},"setTableType":{applyChange:function(c,t,p){var C=c.getDefinition(),s=t.getType(),M=p.modifier;M.setProperty(t,"type",C.content.tableType);c.setRevertData({originalTableType:s});return true;},revertChange:function(c,t,p){var R=c.getRevertData(),M=p.modifier;if(R){M.setProperty(t,"type",R.originalTableType);}else{jQuery.sap.log.error("Attempt to revert an unapplied change.");return false;}}}};},false);

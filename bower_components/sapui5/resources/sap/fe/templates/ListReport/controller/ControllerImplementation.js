/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/mdc/ConditionModel"],function(q,C){"use strict";return{getMethods:function(v,t,c){var T,f;function a(){var F=f.getAppState();if(!F){return;}var o={filterBar:F};t.setAppStateContainer(o);}function A(o){if(!o){o=t.getAppStateContainer();}if(o){f.setAppState(o.filterBar);}}function s(){var g=q.sap.getObject("sap.ushell.Container.getUser");var S={bookmarkTitle:document.title,bookmarkCustomUrl:function(){var h=hasher.getHash();return h?("#"+h):window.location.href;},isShareInJamActive:!!g&&g().isJamActive()};var o=c.getOwnerComponent().getModel("_templPriv");o.setProperty("/listReport/share",S);}return{onInit:function(){T=c.byId("template::Table");f=c.getView().byId("template::FilterBar");f.setEnabled(false);s();var F=new q.Deferred();var o=new q.Deferred();var b=function(){F.resolve();f.detachModelContextChange(b);};f.attachModelContextChange(b);var d=function(){o.resolve();T.detachModelContextChange(d);};T.attachModelContextChange(d);Promise.all([F,o]).then(function(){var l=T.getListBinding();var e=C.getFor(l);c.getView().setModel(e,"sap.fe.cm");t.getAppStateLoaded().then(function(){var g=t.getAppStateContainer();if(g){A(g);}t.attachAppStateChanged(A);f.setEnabled(true);});});},handlers:{onSearch:function(){if(this.getView().byId("template::FilterBar").getLiveUpdate()===false){a();}},onFilterBarChange:function(){if(this.getView().byId("template::FilterBar").getLiveUpdate()){a();}},onItemPress:function(e){var m=c.getOwnerComponent().getAppComponent().getMetadata().getManifest();var E=c.getOwnerComponent().getEntitySet();var o=m["sap.fe"].entitySets[E];var O=o.entry.default.outbound;if(m["sap.app"]&&m["sap.app"].crossNavigation&&m["sap.app"].crossNavigation.outbounds&&m["sap.app"].crossNavigation.outbounds[O]){var d=m["sap.app"].crossNavigation.outbounds[O];var p={};if(d.parameters){var b=e.getParameters().listItem.getBindingContext();for(var P in d.parameters){if(d.parameters[P].value.format==="binding"){p[P]=b.getProperty(d.parameters[P].value.value);}}}var g=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");g&&g.toExternal({target:{semanticObject:d.semanticObject,action:d.action},params:p});}},callAction:function(e){t.getActionController().callAction(e);},showError:function(e){var S=e.getParameters();var E=S.getParameter("error");t.getMessageUtils().handleRequestFailed(E);},onShareListReportActionButtonPress:function(e){var l=c.getView().getModel("sap.fe.i18n").getResourceBundle();if(!this._oShareActionButton){this._oShareActionButton=sap.ui.xmlfragment("sap.fe.templates.listReport.view.fragments.ShareSheet",{shareEmailPressed:function(){sap.m.URLHelper.triggerEmail(null,l.getText("SAPFE_EMAIL_SUBJECT",[document.title]),document.URL);},shareJamPressed:function(){}});this.getView().addDependent(this._oShareActionButton);}this._oShareActionButton.openBy(e.getSource());}},formatters:{},extensionAPI:null};}};});

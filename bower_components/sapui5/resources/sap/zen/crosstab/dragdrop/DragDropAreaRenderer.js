jQuery.sap.declare("sap.zen.crosstab.dragdrop.DragDropAreaRenderer");
sap.zen.crosstab.dragdrop.DragDropAreaRenderer=function(c){"use strict";var h;var m;var M;var p;var d;var D;var i;var a;var I;var o;var b={"sIdSuffix":"droparea_above","sCssClassName":"sapzencrosstab-rowAboveCellDropArea"};var e={"sIdSuffix":"droparea_below","sCssClassName":"sapzencrosstab-rowBelowCellDropArea"};var f={"sIdSuffix":"droparea_before","sCssClassName":"sapzencrosstab-columnBeforeCellDropArea"};var g={"sIdSuffix":"droparea_after","sCssClassName":"sapzencrosstab-columnAfterCellDropArea"};var j={"sIdSuffix":"droparea_after","sCssClassName":"sapzencrosstab-columnAfterCellDropAreaWithSort"};this.addStylesToHtmlString=function(H,C){if(C){for(var s in C){if(C.hasOwnProperty(s)){H=H+s+":"+C[s]+";";}}}return H;};this.applyCssStyles=function(J,C){if(C&&J){for(var s in C){if(C.hasOwnProperty(s)){J.css(s,C[s]);}}}};this.createDiv=function(C,s,k,l,A,n,P){return this.createFlexDiv(C,c.getRenderSizeDiv(),s,k,l,A,n,P);};this.createFlexDiv=function(C,J,s,k,l,A,n,P){var q=C.getId()+"_"+s;var r;var H;r=$(document.getElementById(q));if(r.length===0){H="<div id=\""+q+"\" class=\""+k+"\" style=\"";if(l){H=this.addStylesToHtmlString(H,l);}H=H+"\"></div>";if(!P){J.append(H);}else{J.prepend(H);}r=$(document.getElementById(q));r.data("xtabcellid",C.getId());}if(A){this.applyCssStyles(r,A);}if(n){n(r);}return r;};this.createBeforeDropArea=function(C,k){var r;var B;var t;var H;var s;r=o.getBoundingClientRect(document.getElementById(C.getId()));B=(r.begin-d);t=0;H=i;if(k.iTop){t=k.iTop-D;H=i-t;}if(k.iBottom){H=k.iBottom-D-t;}s={"top":t+"px","height":H+"px"};if(I){s.right=B+"px";}else{s.left=B+"px";}return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,s);};this.createAfterDropArea=function(C,k){var r;var B;var s;var S=null;var A=null;var t;var H;var l;r=o.getBoundingClientRect(document.getElementById(C.getId()));B=(r.end-d);t=0;H=i;if(k.iTop){t=k.iTop-D;H=i-t;}if(k.iBottom){H=k.iBottom-D-t;}S={"top":t+"px","height":H+"px"};if(I){S.right=B+"px";l="right";}else{S.left=B+"px";l="left";}A=function(J){J.css(l,(B-(J.outerWidth()/2.0))+"px");};return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,S,A);};this.createAboveDropArea=function(C,k){var r;var t;var w;var B;var s;r=o.getBoundingClientRect(document.getElementById(C.getId()));t=r.top-D;B=0;w=a;if(k.iBegin){B=(k.iBegin-d);w=a-B;}if(k.iEnd){w=k.iEnd-d-B;}s={"top":t+"px","width":w+"px"};if(I){s.right=B+"px";}else{s.left=B+"px";}return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,s);};this.createBelowDropArea=function(C,k){var r;var t;var s=null;var A=null;var w;var B;r=o.getBoundingClientRect(document.getElementById(C.getId()));t=r.bottom-D;B=0;w=a;if(k.iBegin){B=(k.iBegin-d);w=a-B;}if(k.iEnd){w=k.iEnd-d-B;}s={"top":t+"px","width":w+"px"};if(I){s.right=B+"px";}else{s.left=B+"px";}A=function(J){J.css("top",(t-(J.outerHeight()/2.0))+"px");};return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,s,A);};this.createDropAreasForPivotDimHeaderCell=function(C){var s;if(M===0){this.createBeforeDropArea(C,f);}else if(m===0){this.createAboveDropArea(C,b);}this.createBelowDropArea(C,e);this.createAfterDropArea(C,C.getSort()?j:g);};this.checkNeedsDropAreaByLookAheadCell=function(l,A,s){var k=true;var L=null;if(l){if(l.isSplitPivotCell()===true){L=h.getDimensionInfoByRowCol(l,A);}else{L=h.getDimensionInfoByRowCol(l);}if(L){k=L.sDimensionName!==s;}}return k;};this.createDropAreasForDimHeaderCell=function(C){var s=null;var k="";var l=false;var L;var n=null;var q=C.getTableCol();var r=C.getTableRow();if(c.getHeaderInfo().isBottomRightDimHeaderCell(C)===true){if(M===0){this.createBeforeDropArea(C,f);}else if(m===0){this.createAboveDropArea(C,b);}if(!C.getScalingAxis()||C.getScalingAxis()==="ROWS"){this.createBelowDropArea(C,e);}if(!C.getScalingAxis()||C.getScalingAxis()==="COLS"){this.createAfterDropArea(C,C.getSort()?j:g);}}else if((r<m&&c.getHeaderInfo().isRightColDimHeaderCell(C)===true)||(c.getHeaderInfo().isBottomRowDimHeaderCell(C)===true&&q<M)){k=h.getDimensionInfoByRowCol(C).sDimensionName;if(c.getHeaderInfo().isBottomRowDimHeaderCell(C)===true){if(q===0){this.createBeforeDropArea(C,f);}l=true;L=q+C.getColSpan();if(L<=M){n=c.getTableCellWithColSpan(r,L);l=(n.getScalingAxis()&&n.getScalingAxis()==="ROWS")||this.checkNeedsDropAreaByLookAheadCell(n,"ROWS",k);}if(l){this.createAfterDropArea(C,C.getSort()?j:g);}}if(c.getHeaderInfo().isRightColDimHeaderCell(C)===true){if(r===0){this.createAboveDropArea(C,b);}l=true;L=r+C.getRowSpan();if(L<=m){n=c.getTableCellWithRowSpan(L,q);l=(n.getScalingAxis()&&n.getScalingAxis()==="COLS")||this.checkNeedsDropAreaByLookAheadCell(n,"COLS",k);}if(l===true){this.createBelowDropArea(C,e);}}}};this.init=function(k,l){p=k;o=l;h=c.getHeaderInfo();m=c.getTableMaxDimHeaderRow();M=c.getTableMaxDimHeaderCol();i=c.getRenderSizeDiv().outerHeight();a=c.getRenderSizeDiv().outerWidth();I=c.getPropertyBag().isRtl();var r=o.getBoundingClientRect(c.getRenderSizeDiv()[0]);d=r.begin;D=r.top;};this.renderDimHeaderDropAreas=function(){var r=0;var C=0;var k=null;var l=p.getTableRow();var n=p.getTableCol();while(C<n){k=c.getTableCellWithColSpan(l,C);if(k){this.createDropAreasForDimHeaderCell(k);C=C+k.getColSpan();}}while(r<=l){k=c.getTableCellWithRowSpan(r,n);if(k){this.createDropAreasForDimHeaderCell(k);r=r+k.getRowSpan();}}};this.renderSplitPivotCellDragAreas=function(C,J){if(c.getPropertyBag().isRtl()){this.createFlexDiv(C,J,"dragarea_rows","sapzencrosstab-pivotCellRowsDimDragArea",{"position":"absolute","bottom":"0px","right":"0px","border-left":"0px solid transparent;"},{"border-bottom-width":J.outerHeight()+"px","border-left-width":J.outerWidth()+"px"},null,true);this.createFlexDiv(C,J,"dragarea_cols","sapzencrosstab-pivotCellColsDimDragArea",{"position":"absolute","top":"0px","left":"0px","border-right":"0px solid transparent;"},{"border-top-width":J.outerHeight()+"px","border-right-width":J.outerWidth()+"px"},null,true);}else{this.createFlexDiv(C,J,"dragarea_rows","sapzencrosstab-pivotCellRowsDimDragArea",{"position":"absolute","bottom":"0px","left":"0px","border-right":"0px solid transparent;"},{"border-bottom-width":J.outerHeight()+"px","border-right-width":J.outerWidth()+"px"},null,true);this.createFlexDiv(C,J,"dragarea_cols","sapzencrosstab-pivotCellColsDimDragArea",{"position":"absolute","top":"0px","right":"0px","border-left":"0px solid transparent;"},{"border-top-width":J.outerHeight()+"px","border-left-width":J.outerWidth()+"px"},null,true);}};this.repositionDropAreasForHeaderScrolling=function(){var k;var J;var B;var l;var C;if(c.isHeaderHScrolling()){k=c.getRenderSizeDiv().find("div .sapzencrosstab-columnAfterCellDropArea, .sapzencrosstab-columnAfterCellDropAreaWithSort");if(k){$.each(k,function(n,q){J=$(q);l=c.getRenderSizeDiv().find("#"+$.sap.encodeCSS(J.data("xtabcellid")));if(l.length>0){C=o.getBoundingClientRect(l[0]);B=C.end-d-J.outerWidth()/2.0;J.css(I?"right":"left",B+"px");}});}}};this.createExternalDimDropAreasForMemberCell=function(C){var J=this.createAboveDropArea(C,b);var k=this.createBeforeDropArea(C,f);return{"oJqAboveArea":J,"oJqBeforeArea":k};};};

jQuery.sap.require("sap.zen.crosstab.paging.PagingConstants");jQuery.sap.require("sap.zen.crosstab.rendering.RenderingConstants");jQuery.sap.declare("sap.zen.crosstab.paging.Page");
sap.zen.crosstab.paging.Page=function(p,P,o){"use strict";var s=sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN;var a=0;var b=0;var c=o.getTileRowCnt();var d=o.getTileColCnt();var C=o.getCellMerger();var D=o.getDataHandler();var e=o.getCrosstab();var f=e.getDimensionHeaderArea();var g=e.getColumnHeaderArea();var r=e.getRowHeaderArea();var h=e.getDataArea();var j={};var A=[];k();function k(){A.push(f.getAreaType());A.push(g.getAreaType());A.push(r.getAreaType());A.push(h.getAreaType());}this.getPageKey=function(){return P;};this.getRow=function(){return oPageCoordinates.iRow;};this.getCol=function(){return oPageCoordinates.iCol;};this.getPosition=function(){return p;};this.getStatus=function(){return s;};this.setStatus=function(N){s=N;};this.getPageDataRowCnt=function(){return a;};this.getPageDataColCnt=function(){return b;};this.receiveData=function(i,K){a=i.sentdatarows;b=i.sentdatacols;c=i.tilerows;d=i.tilecols;D.determineBasicAreaData(i,K);w();var L={};L.iRowOffset=p.iRow*c;L.iColOffset=p.iCol*d;L.bIsFirstPage=K;L.oCrosstabAreasToBeFilled=j;L.oCrosstabData=i;D.jsonToDataModel(L);z();x();};this.removeData=function(){s=sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN;j={};y(h);n();l();};function l(){var i=0;var K=null;for(i=0;i<A.length;i++){K=j[A[i]];if(K){F(K,false);K.oArea.decreaseLoadingPageCnt();}}}function m(i,T){var K=v(i,T);if(K.iRefCnt===0){K.iStatus=sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN;o.setHeaderTileInfo(i,T,K);y(i);}}function n(){m(f,0);m(r,p.iRow);m(g,p.iCol);}function q(){u(f,0);u(r,p.iRow);u(g,p.iCol);}function t(i,T,s){var K=o.getHeaderTileInfo(i,T);K.iStatus=s;o.setHeaderTileInfo(i,T,K);}function u(i,T){var K=o.getHeaderTileInfo(i,T);K.iRefCnt++;o.setHeaderTileInfo(i,T,K);}function v(i,T){var K=o.getHeaderTileInfo(i,T);K.iRefCnt--;o.setHeaderTileInfo(i,T,K);return K;}function w(){j={};y(h,0);if(o.getHeaderTileInfo(r,p.iRow).iStatus!==sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED){y(r,p.iRow);}if(o.getHeaderTileInfo(g,p.iCol).iStatus!==sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED){y(g,p.iCol);}if(o.getHeaderTileInfo(f,0).iStatus!==sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED){y(f,0);}}function x(){var i=0;var K=null;for(i=0;i<A.length;i++){K=j[A[i]];if(K){G(K,false);H(K,false);K.oArea.decreaseLoadingPageCnt();}}}function y(i,T){var K=i.getAreaType();var L={};L.oArea=i;L.oAreaRegion=I(i);L.iTileIndex=T;j[K]=L;}this.provideLoadingCells=function(i){s=sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING;B(i);q();E();};function z(){s=sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED;var i=null;i=j[g.getAreaType()];if(i){C.mergeColHeaderCells(p.iCol);t(i.oArea,p.iCol,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED);}i=j[r.getAreaType()];if(i){C.mergeRowHeaderCells(p.iRow);t(i.oArea,p.iRow,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED);}i=j[f.getAreaType()];if(i){t(i.oArea,0,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED);}}function B(i){j={};y(h,0);if(i.isDataArea()){if(o.getHeaderTileInfo(r,p.iRow).iStatus===sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN){y(r,p.iRow);t(r,p.iRow,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING);}if(o.getHeaderTileInfo(g,p.iCol).iStatus===sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN){y(g,p.iCol);t(g,p.iCol,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING);}if(o.getHeaderTileInfo(f,0).iStatus===sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN){y(f,0);t(f,0,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING);}}else{if(i.isColHeaderArea()){y(i,p.iCol);t(i,p.iCol,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING);}else if(i.isRowHeaderArea()){y(i,p.iRow);t(i,p.iRow,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING);}else if(i.isDimensionHeaderArea()){y(i,0);t(i,0,sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING);}}}function E(){var i=0;var K=null;for(i=0;i<A.length;i++){K=j[A[i]];if(K){F(K,true);G(K,true);H(K,true);K.oArea.increaseLoadingPageCnt();}}}function F(i,K){var R=0;var L=0;var M=null;var N=i.oAreaRegion;var O=i.oArea;for(R=N.iStartRow;R<=N.iEndRow;R++){for(L=N.iStartCol;L<=N.iEndCol;L++){if(K){M=J(O,R,L);}O.insertCell(M,R,L);}}}function G(i,K){var L=i.oAreaRegion;var M=i.oArea;var N=0;for(N=L.iStartCol;N<=L.iEndCol;N++){M.changeColWidthTemporaryFlag(N,P,K);}}function H(i,K){var L=i.oAreaRegion;var M=i.oArea;var R=0;for(R=L.iStartRow;R<=L.iEndRow;R++){M.changeRowHeightTemporaryFlag(R,P,K);}}function I(i){var K={};if(i.isDimHeaderArea()){K.iStartRow=0;K.iEndRow=i.getRowCnt()-1;K.iStartCol=0;K.iEndCol=i.getColCnt()-1;}else if(i.isRowHeaderArea()){K.iStartRow=p.iRow*c;K.iEndRow=Math.min(K.iStartRow+c-1,i.getRowCnt()-1);K.iStartCol=0;K.iEndCol=i.getColCnt()-1;}else if(i.isColHeaderArea()){K.iStartRow=0;K.iEndRow=i.getRowCnt()-1;K.iStartCol=p.iCol*d;K.iEndCol=Math.min(K.iStartCol+d-1,i.getColCnt()-1);}else if(i.isDataArea()){K.iStartRow=p.iRow*c;K.iEndRow=Math.min(K.iStartRow+c-1,i.getRowCnt()-1);K.iStartCol=p.iCol*d;K.iEndCol=Math.min(K.iStartCol+d-1,i.getColCnt()-1);}return K;}function J(i,R,K){var L=null;if(i.isDataArea()){L=new sap.zen.crosstab.DataCell();L.addStyle(sap.zen.crosstab.rendering.RenderingConstants.STYLE_DATA_CELL);}else{L=new sap.zen.crosstab.HeaderCell();L.addStyle(sap.zen.crosstab.rendering.RenderingConstants.STYLE_HEADER_CELL);L.setRowSpan(1);L.setColSpan(1);}L.setArea(i);L.setRow(R);L.setCol(K);L.setLoading(true);L.addStyle(sap.zen.crosstab.rendering.RenderingConstants.STYLE_LOADING);return L;}};

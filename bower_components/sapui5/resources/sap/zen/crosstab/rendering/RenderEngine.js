jQuery.sap.declare("sap.zen.crosstab.rendering.RenderEngine");jQuery.sap.require("sap.zen.crosstab.rendering.ScrollbarRenderer");jQuery.sap.require("sap.zen.crosstab.rendering.ScrollManager");jQuery.sap.require("sap.zen.crosstab.rendering.DomElementProvider");jQuery.sap.require("sap.zen.crosstab.utils.Measuring");jQuery.sap.require("sap.zen.crosstab.rendering.RenderingConstants");jQuery.sap.require("sap.zen.crosstab.rendering.CrossRequestManager");jQuery.sap.require("sap.zen.crosstab.utils.Utils");
sap.zen.crosstab.rendering.RenderEngine=function(c){"use strict";var C=c.getColumnHeaderArea();var d=c.getDimensionHeaderArea();var r=c.getRowHeaderArea();var D=c.getDataArea();var R=null;var s=null;var o=null;var t=null;var a=null;var l="";var I=false;var n=[];var b=new sap.zen.crosstab.rendering.DomElementProvider();var m=new sap.zen.crosstab.utils.Measuring(c,b);var e=new sap.zen.crosstab.rendering.CrossRequestManager(c,this);var S=null;var h=null;var f=false;var g=false;var k={bHasHScrollbar:false,bHasVScrollbar:false,bHasHHeaderScrollbar:false};var A=[];var p=true;var q=false;var u=-1;var v=-1;var w=0;var x=false;this.isIE8Mode=function(){return f;};this.renderResizeOutline=function(){if((c.getWidth()==="auto"&&c.hResize())||(c.getHeight()==="auto"&&c.vResize())){var i=c.getId();var j=i+"_resizeDiv";var n1=i+"_resizeFrame";var o1=0;var p1=0;t=b.getElement(i);if(t&&t[0]){t.css("overflow","hidden");var q1=m.getTableDivBordersAndPadding();o1=q1.borders.iTopBorderWidth;p1=q1.borders.iLeftBorderWidth;o=jQuery.sap.byId(j);o.css("visibility","visible");o.css("top",-o1+"px");o.css("left",-p1+"px");a=jQuery.sap.byId(n1);a.css("width",c.getIntWidth()+"px");a.css("height",c.getIntHeight()+"px");a.css("top",-o1+"px");a.css("left",-p1+"px");a.css("visibility","visible");var r1=t.find("#"+$.sap.encodeCSS(c.getId()+"_hScrollTab"));if(r1&&r1.length>0){r1.appendTo(a);r1.css("position","absolute");var s1=c.getPropertyBag().getToolbarHeight();r1.css("bottom",s1+"px");r1.css("left","0px");}var t1=t.find("#"+$.sap.encodeCSS(c.getId()+"_vScrollTab"));if(t1&&t1.length>0){t1.appendTo(a);t1.css("position","absolute");t1.css("top","0px");t1.css(c.getPropertyBag().isRtl()?"left":"right","0px");}if(c.getPropertyBag().hasToolbar()){var u1=t.find("#"+$.sap.encodeCSS(c.getId()+"_toolbar"));if(u1&&u1.length>0){u1.appendTo(a);u1.css("position","absolute");u1.css("left","0px");u1.css("bottom","0px");}}}}};this.removeResizeOutline=function(){if(o){o.css("visibility","hidden");o=null;}if(t){t.css("overflow","hidden");t=null;}if(a){a.css("visibility","hidden");a=null;}};this.addAfterFinishRenderingHandler=function(i){if($.inArray(i,A)===-1){A.push(i);}};this.removeAfterFinishRenderingHandler=function(i){var j=$.inArray(i,A);if(j!==-1){A.splice(j,1);}};this.removeAllAfterFinishRenderingHandlers=function(){A=[];};this.renderCell=function(i,j,n1){var o1=i.getCell(j,n1);if(o1){R.renderControl(o1);}return o1;};this.renderArea=function(i,j,n1,o1,p1,q1){if(!j){j=0;}if(!n1){n1=0;}if(!o1){o1=0;}if(!p1){p1=0;}var r1=j+n1;var s1=o1+p1;var t1=0;var u1=0;r1=Math.min(r1,i.getRowCnt());s1=Math.min(s1,i.getColCnt());for(t1=j;t1<r1;t1++){if(q1){R.write("<tr");R.writeAttribute("class",q1);R.write(">");}else{R.write("<tr>");}for(u1=o1;u1<s1;u1++){this.renderCell(i,t1,u1);}R.write("</tr>");}};this.setDeferredVScrollPosDetermination=function(i){g=i;};function y(){f=false;if($.browser.msie){if($.browser.version.substring(0,2)==="8."){f=true;}if($.browser.fVersion&&$.browser.fVersion===8){f=true;}}}this.beginRendering=function(){c.block();y();x=c.getUtils().isMsIE();R=sap.ui.getCore().createRenderManager();h1();t=b.getElement(c.getId());t.css("visibility",(c.getPropertyBag().isDebugMode()===true)?"visible":"hidden");if(e.hasSavedInfo()){var i=e.getSavedHScrollInfo();if(i){C.setRenderStartCol(i.iPos);if(i.bScrolledToEnd){C.setRenderColCnt(C.getColCnt()-C.getRenderStartCol());}e.restoreColWidths();}var j=e.getSavedVScrollInfo();if(j){r.setRenderStartRow(j.iPos);if(j.bScrolledToEnd){r.setRenderRowCnt(r.getRowCnt()-r.getRenderStartRow());}}}};this.finishRendering=function(j){var i=0;var n1=null;var o1;var p1;this.showLoadingVisualization();if(R){R.destroy();}R=null;m.reset();t=b.getElement(c.getId());t.css("visibility","visible");e.savedInfoHandled();c.restoreFocusOnCell();this.setDivSizeValidity();var q1=c.getSelectionHandler();if(q1){q1.ensureCellsSelected();}if(!c.hasLoadingPages()&&c.hasData()){p1=c.getHeaderInfo();if(p1){p1.setupPivotCell();}o1=c.getDragDropHandler();if(o1&&c.getPropertyBag().isDragDropEnabled()){o1.initDragDrop(j);}if(j&&c.getColResizer()&&c.getPropertyBag().isEnableColResize()){c.getColResizer().initialize();}}for(i=0;i<A.length;i++){n1=A[i];if(n1){n1();}}c.unblock();};this.renderDimensionHeaderArea=function(){var i=0;var j=d.getRowCnt();var n1=0;var o1=d.getColCnt();this.renderArea(d,i,j,n1,o1,"sapzencrosstab-HeaderRow");d.setRenderSize(i,j,n1,o1);R.flush(b.getElement(d.getId())[0]);};this.renderDataArea=function(){var i=0;var j=0;var n1=0;var o1=0;if(r.hasContent()){i=r.getRenderStartRow();j=r.getRenderRowCnt();}else{i=0;j=D.getRowCnt();}if(C.hasContent()){n1=C.getRenderStartCol();o1=C.getRenderColCnt();}else{n1=0;o1=D.getColCnt();}var p1=z(i,j,n1,o1);var q1=B(i,j,n1,o1);if(p1){F(p1);H(p1,i,j,n1,o1,this);}else if(q1){G(q1);J(q1,i,j,n1,o1,this);R.flush(b.getElement(D.getId())[0]);}else{this.renderArea(D,i,j,n1,o1);R.flush(b.getElement(D.getId())[0]);}D.setRenderSize(i,j,n1,o1);};function z(i,j,n1,o1){if(n1!==D.getRenderStartCol()||o1!==D.getRenderColCnt()||j!==D.getRenderRowCnt()){return 0;}var p1=D.getRenderStartRow()+D.getRenderRowCnt();var q1=i+j;var r1=q1-p1;if(Math.abs(r1)<j){return r1;}return 0;}function B(i,j,n1,o1){if(i!==D.getRenderStartRow()||j!==D.getRenderRowCnt()||o1!==D.getRenderColCnt()){return 0;}var p1=D.getRenderStartCol()+D.getRenderColCnt();var q1=n1+o1;var r1=q1-p1;if(Math.abs(r1)<o1){return r1;}return 0;}function E(j){var i=null;var n1;if(x===true){if(c.getPropertyBag().isDragDropEnabled()===true){n1=j.find("td");$.each(n1,function(o1,p1){var q1=$(p1);if(q1.data("ui-draggable")){q1.draggable("destroy");}if(q1.data("ui-droppable")){q1.droppable("destroy");}q1.off();});}i=j.clone(true).off();}else{i=j.clone();}return i;}function F(j){var n1=$(document.getElementById(D.getId()));var o1=E(n1);var p1=$(o1[0].firstChild);var q1=p1.find('> tr');if(j>0){for(var i=0;i<j;i++){$(q1[i]).remove();}}else{var r1=q1.length;for(var i=r1+j;i<r1;i++){$(q1[i]).remove();}}n1.replaceWith(o1);b.addElement(D.getId(),$(document.getElementById(D.getId())));}function G(n1){var o1=$(document.getElementById(D.getId()));var p1=E(o1);var q1=$(p1[0].firstChild);var r1=q1.find('> tr');var s1=r1.length;if(n1>0){for(var i=0;i<s1;i++){var t1=$(r1[i]).find("> td");for(var j=0;j<n1;j++){$(t1[j]).remove();}}}else{for(var i=0;i<s1;i++){var t1=$(r1[i]).find("> td");var u1=t1.length-Math.abs(n1)-1;for(var j=t1.length-1;j>u1;j--){$(t1[j]).remove();}}}o1.replaceWith(p1);b.addElement(D.getId(),$(document.getElementById(D.getId())));}function H(i,j,n1,o1,p1,q1){var r1=$(document.getElementById(D.getId()).firstChild);var s1=r1.html();var t1=Math.abs(i);var u1;if(i>0){R.write(s1);u1=n1+j-i;q1.renderArea(D,u1,t1,o1,p1);}else{u1=j;q1.renderArea(D,u1,t1,o1,p1);R.write(s1);}R.flush(r1[0]);}function J(j,n1,o1,p1,q1,r1){var s1=$(document.getElementById(D.getId()).firstChild);var t1;var u1=s1.find("> tr");if(j>0){t1=p1+q1-j;for(var i=0;i<u1.length;i++){var v1=$(u1[i]);var w1=v1.html();R.write("<tr>");R.write(w1);for(var x1=t1;x1<p1+q1;x1++){R.renderControl(D.getCell(n1+i,x1));}R.write("</tr>");}}else{t1=p1;for(var i=0;i<u1.length;i++){var v1=$(u1[i]);var w1=v1.html();R.write("<tr>");for(var x1=t1;x1<t1-j;x1++){R.renderControl(D.getCell(n1+i,x1));}R.write(w1);R.write("</tr>");}}}this.renderColHeaderArea=function(i,j){var n1="";var o1=0;var p1=0;var q1=b.getElement(C.getId());var r1=m.getAreaWidth(d);var s1=0;var t1=c.getContentWidth();var u1=C.getColCnt();var v1=0;var w1=0;var x1,y1;var z1,A1;var B1;var C1=C.getRowCnt();var D1=0;var E1=o1;var F1;var G1=c.getId()+"_ColHeaderRow_";var H1=null;if(!j){t1-=r1;}if(!c.getPropertyBag().isDebugMode()){q1.hide();}q1.html("");var I1=false;if(c.getPropertyBag().isPixelScrolling()){H1=O;o1=0;v1=u1;}else{H1=N;o1=i;v1=u1-o1;I1=this.isHScrolledToEnd();}while(H1(p1,v1,w1,t1,I1)){n1=q1[0].innerHTML;if(!n1){L(q1);}E1=o1+p1;D1=0;y1=C.getFinalColWidth(E1);if(!y1){D1++;}while(H1(p1,v1,w1,t1,I1)&&y1){p1++;w1+=y1;y1=C.getFinalColWidth(o1+p1);D1++;}F1=E1+D1;for(x1=0;x1<C1;x1++){z1=G1+x1;B1=q1.find("#"+$.sap.encodeCSS(z1))[0];A1=B1.innerHTML;R.write("<tr id=\""+z1+"\" class=\"sapzencrosstab-HeaderRow\">");R.write(A1);for(var J1=E1;J1<F1;J1++){var K1=null;if(J1===o1){K1=C.getCellWithColSpan(x1,J1);}else{K1=C.getCell(x1,J1);}if(K1){R.renderControl(K1);}}R.write("</tr>");}R.flush(q1[0]);if(!C.getFinalColWidth(E1)){var L1=q1.outerWidth()-s1;w1+=L1;p1++;}s1=q1.outerWidth();}C.setRenderSize(0,C.getRowCnt(),o1,p1);q1.show();};function K(){return(C.getRenderStartCol()>0);}this.appendColumnsAfterResize=function(){var i=b.getElement(C.getId());var j=0;var n1=0;var o1=0;if(C.getRenderStartCol()>0&&C.getRenderStartCol()+C.getRenderColCnt()===C.getColCnt()){var p1=c.getContentWidth()-m.getAreaWidth(d);var q1=i.outerWidth();j=q1;var r1=false;if(!c.getPropertyBag().isDebugMode()){i.hide();}while(q1<=p1&&C.getRenderStartCol()>0){this.appendLeftCols(C,1);this.appendLeftCols(D,1);r1=true;o1=C.getFinalColWidth(C.getRenderStartCol());if(o1){q1+=o1;}else{n1=i.outerWidth()-j;q1+=n1;}j=i.outerWidth();}i.show();if(r1){this.adjustRowHeights(d,C);this.adjustRowHeights(r,D);this.adjustColWidths(C,D);m.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!S){S=e.getScrollManager();}S.commandHScrolledToEnd();}}i=b.getElement(C.getId());};function L(i){var j=C.getRowCnt();var n1=0;for(n1=0;n1<j;n1++){R.write("<tr");R.writeAttribute("class","sapzencrosstab-HeaderRow");R.writeAttribute("id",c.getId()+"_ColHeaderRow_"+n1);R.write(">");R.write("</tr>");}R.flush(i[0]);}function M(i){var j=i+1;var n1=0;var o1=n1+r.getColCnt();var p1=0;var q1=0;for(p1=i;p1<j;p1++){R.write("<tr");R.writeAttribute("class","sapzencrosstab-HeaderRow");R.write(">");for(q1=n1;q1<o1;q1++){var r1=r.getCellWithRowSpan(p1,q1);if(r1){R.renderControl(r1);}}R.write("</tr>");}}this.isVScrolledToEnd=function(){var i=false;if(S){i=S.isVScrolledToEnd();}return i;};this.isHScrolledToEnd=function(){var i=false;if(S){i=S.isHScrolledToEnd();}return i;};function N(i,j,n1,o1,p1){return((n1<o1)||p1)&&i<j;}function O(i,j){return i<j;}this.renderRowHeaderArea=function(i){var j="";var n1=b.getElement(r.getId());var o1=0;var p1=m.getAreaHeight(d);var q1=p1;var r1=c.getContentHeight();var s1=r.getRowCnt();var t1=0;var u1=1;var v1=r.getId();var w1=null;if(!c.getPropertyBag().isDebugMode()){n1.hide();}$(document.getElementById(v1).firstChild).html("");var x1=false;if(c.getPropertyBag().isPixelScrolling()){w1=O;i=0;t1=s1;}else{w1=N;t1=s1-i;x1=this.isVScrolledToEnd();}while(w1(o1,t1,q1,r1,x1)){j=$(document.getElementById(v1).firstChild).html()||"";R.write(j);u1=1;if(o1>0){if(c.getPropertyBag().isPixelScrolling()){u1=t1-o1;}else{if(o1<t1-2){u1=3;}else if(o1<t1-1){u1=2;}}this.renderArea(r,i+o1,u1,0,r.getColCnt(),"sapzencrosstab-HeaderRow");}else{M(i);}R.flush(n1[0]);o1+=u1;q1=p1+n1.outerHeight();}n1.show();r.setRenderSize(i,o1,0,r.getColCnt());if(f){Q(r);}};function P(r,i,j){var n1=1;var o1=r.getCell(i,j,true);if(!o1){while(!o1&&i>0){i--;n1++;o1=r.getCell(i,j,true);}}return n1;}function Q(r){var i=r.getRenderStartRow()+r.getRenderRowCnt()-1;var j=r.getRenderStartCol();var n1=j+r.getRenderColCnt()-1;var o1=0;var p1=null;var q1=1;for(o1=j;o1<=n1;o1++){p1=r.getCellWithRowSpan(i,o1);if(p1){q1=P(r,i,o1);p1.setHtmlIE8RowSpan(q1);}}}this.appendRowsAfterResize=function(){var i=b.getElement(r.getId());var j=0;var n1=0;var o1=0;if(r.getRenderStartRow()>0){var p1=c.getContentHeight()-m.getAreaHeight(d);var q1=i.outerHeight();j=q1;var r1=false;if(!c.getPropertyBag().isDebugMode()){i.hide();}while(q1<=p1&&r.getRenderStartRow()>0&&r.getRenderStartRow()+r.getRenderRowCnt()===r.getRowCnt()){this.appendTopRows(r,1);this.appendTopRows(D,1);r1=true;o1=r.getFinalRowHeight(r.getRenderStartRow());if(o1){q1+=o1;}else{n1=i.outerHeight()-j;q1+=n1;}j=i.outerHeight();}i.show();if(r1){this.adjustRowHeights(r,D);this.adjustColWidths(d,r);this.adjustColWidths(C,D);m.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!S){S=e.getScrollManager();}S.commandVScrolledToEnd();}}i=b.getElement(r.getId());};this.setUserColWidths=function(i){if(!i.hasContent()||!i.hasUserColWidths()){return;}i.calculateColGranularity();var j=i.measureColGranularityCells();i.applyColWidthsToGranularityCells(j);var n1=b.getElement(i.getId());var o1=E(n1);W(i,n1,o1,true);n1.replaceWith(o1);n1=$(document.getElementById(i.getId()));X(i,n1,true);b.addElement(i.getId(),$(document.getElementById(i.getId())));i.setColGranularityCalculatedAndMeasured(true);};this.adjustColWidths=function(j,n1){if(!n1.hasContent()||!j.hasContent()){if(!j.hasUserColWidths()&&!n1.hasUserColWidths()){return;}}var o1=b.getElement(j.getId());var p1=b.getElement(n1.getId());j.calculateColGranularity();n1.calculateColGranularity();var q1=j.measureColGranularityCells();var r1=n1.measureColGranularityCells();j.setColGranularityCalculatedAndMeasured(false);n1.setColGranularityCalculatedAndMeasured(false);var i=0;var s1;for(i=j.getRenderStartCol();i<q1.length;i++){s1=Math.max(q1[i]||0,r1[i]||0);q1[i]=s1;r1[i]=s1;}j.applyColWidthsToGranularityCells(q1,j.hasUserColWidths());n1.applyColWidthsToGranularityCells(r1,n1.hasUserColWidths());var t1=E(o1);var u1=E(p1);W(j,o1,t1);W(n1,p1,u1);o1.replaceWith(t1);p1.replaceWith(u1);o1=$(document.getElementById(j.getId()));p1=$(document.getElementById(n1.getId()));X(j,o1);X(n1,p1);if(n1.isRowHeaderArea()&&c.getNewLinesCnt()>0&&c.getCallValueHelpCommand()){U();}b.addElement(j.getId(),$(document.getElementById(j.getId())));b.addElement(n1.getId(),$(document.getElementById(n1.getId())));};function T(i,j){var n1=null;var o1=null;var p1=null;var q1=null;var r1=0;var s1=null;var t1=r.getColGranularity();var u1=0;var v1=t1[r1].iWidth;var w1=0;var x1=0;var y1=0;var z1=0;var A1=0;var B1=null;var C1=0;for(r1=0;r1<j;r1++){s1=r.getCell(i,r1);if(s1&&s1.isEntryEnabled()){o1=$(document.getElementById(s1.getId()));n1=$(document.getElementById(s1.getId()+"_cellLayoutDiv"));q1=sap.zen.crosstab.utils.Utils.getWidthFromStyle(n1);if(t1&&t1.length>0){v1=t1[r1].iWidth;w1=parseInt(o1.css("padding-left"))||0;x1=parseInt(o1.css("padding-right"))||0;y1=parseInt(o1.css("border-left-width"))||0;z1=parseInt(o1.css("border-right-width"))||0;u1=v1-w1-x1-y1-z1;n1.css("width",u1+"px");A1=$(n1.find("td")[1]).outerWidth();B1=$(n1.find("td")[0]);w1=parseInt(B1.css("padding-left"))||0;x1=parseInt(B1.css("padding-right"))||0;p1=B1.find("#"+$.sap.encodeCSS(s1.getId()+"_contentDiv"));C1=u1-w1-x1-A1;p1.css("width",C1+"px");}}}}function U(){var j=r.getRenderColCnt();var n1=r.getRenderRowCnt();var o1=r.getRenderStartRow();var p1=r.getRowCnt();var q1=c.getNewLinesCnt();var r1=0;var i=0;if(c.isNewLinesTop()){if(o1<q1){for(r1=o1;r1<q1;r1++){T(r1,j);}}}else if(c.isNewLinesBottom()){var s1=(o1+n1)-(p1-q1);if(s1>0){var t1=o1+n1-1;for(i=0;i<s1;i++){T(t1,j);t1--;}}}}this.adjustRowHeights=function(j,n1){if(!n1.hasContent()||!j.hasContent()){return;}var o1=b.getElement(j.getId());var p1=b.getElement(n1.getId());j.calculateRowGranularity();n1.calculateRowGranularity();var q1=j.measureRowGranularityCells();var r1=n1.measureRowGranularityCells();var i=0;var s1;for(i=j.getRenderStartRow();i<q1.length;i++){s1=Math.max(q1[i]||0,r1[i]||0);q1[i]=s1;r1[i]=s1;}var t1=n1.isColHeaderArea()?n1.getLevelCells():null;var u1=j.applyRowHeightsToGranularityCells(q1,t1);u1=u1||n1.applyRowHeightsToGranularityCells(r1,t1);if(u1===true&&k&&k.bHasHScrollbar===true&&!c.getPropertyBag().isPixelScrolling()){if(S){c.setScrollInvalidate(u1);}}var v1=E(o1);var w1=E(p1);Y(j,o1,v1);Y(n1,p1,w1);o1.replaceWith(v1);p1.replaceWith(w1);o1=$(document.getElementById(j.getId()));p1=$(document.getElementById(n1.getId()));Z(j,o1);Z(n1,p1);if(x){V(j);V(n1);}b.addElement(j.getId(),$(document.getElementById(j.getId())));b.addElement(n1.getId(),$(document.getElementById(n1.getId())));};function V(i){var j=i.getCellsWithLineBreakTexts();var n1=0;var o1=0;var p1=0;var q1=0;var r1=0;var s1=0;var t1=null;var u1=null;if(j){p1=i.getRenderStartRow();q1=p1+i.getRenderRowCnt()-1;r1=i.getRenderStartCol();s1=r1+i.getRenderColCnt()-1;for(n1=p1;n1<=q1;n1++){for(o1=r1;o1<=s1;o1++){t1=i.getCell(n1,o1);if(t1){t1=j[t1.getId()];if(t1){u1=$(document.getElementById(t1.getId()+"_contentDiv"));if(u1&&u1.length>0){u1.css("height",u1.outerHeight()+"px");}}}}}}}function V(i){var j=i.getCellsWithLineBreakTexts();var n1=0;var o1=0;var p1=0;var q1=0;var r1=0;var s1=0;var t1=null;var u1=null;if(j){p1=i.getRenderStartRow();q1=p1+i.getRenderRowCnt()-1;r1=i.getRenderStartCol();s1=r1+i.getRenderColCnt()-1;for(n1=p1;n1<=q1;n1++){for(o1=r1;o1<=s1;o1++){t1=i.getCell(n1,o1);if(t1){t1=j[t1.getId()];if(t1){u1=$(document.getElementById(t1.getId()+"_contentDiv"));if(u1&&u1.length>0){u1.css("height",u1.outerHeight()+"px");}}}}}}}function W(j,n1,o1,p1){var i=0;var q1=j.getColGranularity();var r1=null;var s1=null;var t1=null;var u1=null;var v1=0;for(i=0;i<q1.length;i++){r1=q1[i];if(r1){if(p1===true){if(!j.isFixedColWidthSet(r1.iCol)){continue;}}s1=n1.find("#"+$.sap.encodeCSS(r1.sId));t1=o1.find("#"+$.sap.encodeCSS(r1.sId));v1=c1(s1,r1.iWidth,j.getCell(r1.iRow,r1.iCol));var w1=sap.ui.getCore().getControl(r1.sId);if(w1.isEntryEnabled()&&j.isRowHeaderArea()){u1=$(t1.find("#"+$.sap.encodeCSS(r1.sId+"_cellLayoutDiv")));}else{u1=$(t1.find("#"+$.sap.encodeCSS(r1.sId+"_contentDiv")));}u1.width(v1);}}}function X(j,n1,o1){var i=0;var p1=j.getColGranularity();var q1=null;var r1=null;var s1=null;var t1=0;var u1={};for(i=0;i<p1.length;i++){q1=p1[i];if(q1){if(o1===true){if(!j.isFixedColWidthSet(q1.iCol)){continue;}}r1=n1.find("#"+$.sap.encodeCSS(q1.sId));t1=r1.outerWidth();if(t1>q1.iWidth){if(!s1){s1=E(n1);}b1(j,n1,s1,q1,u1);}}}if(s1){n1.replaceWith(s1);}}function Y(j,n1,o1){var i=0;var p1=j.getRowGranularity();var q1=null;var r1=null;var s1=null;var t1=null;var u1=0;for(i=0;i<p1.length;i++){q1=p1[i];if(q1){r1=n1.find("#"+$.sap.encodeCSS(q1.sId));s1=o1.find("#"+$.sap.encodeCSS(q1.sId));t1=s1.parent();u1=d1(r1,q1.iHeight);t1.height(u1);}}}function Z(j,n1){var i=0;var o1=j.getRowGranularity();var p1=null;var q1=null;var r1=0;var s1=null;var t1={};for(i=0;i<o1.length;i++){p1=o1[i];if(p1){q1=n1.find("#"+$.sap.encodeCSS(p1.sId));var u1=q1.parent();r1=u1.outerHeight();if(r1>p1.iHeight){if(!s1){s1=E(n1);}a1(j,n1,s1,p1,t1);}}}if(s1){n1.replaceWith(s1);}}function _(i,j){var n1=0;if(f){var o1=i.find("table");if(o1===null||o1.length===0){n1=e1(i,j);}}else{n1=e1(i,j);}return n1;}function a1(j,n1,o1,p1,q1){var r1=j.getRenderStartCol()+j.getRenderColCnt();var s1=0;var t1=null;var u1=0;var i=0;var v1=j.getCalculatedRowHeights();var w1=null;var x1=null;var y1=null;var z1=0;var A1=0;var B1;var C1;for(s1=j.getRenderStartCol();s1<r1;s1++){t1=j.getCellWithColSpan(p1.iRow,s1);if(!t1){t1=j.getCellWithRowSpan(p1.iRow,s1);if(t1&&(s1<p1.iCol)&&t1.getEffectiveRowSpan()>1){if(!q1[t1.getId()]){q1[t1.getId()]=t1;}else{t1=null;}}}if(t1){x1=n1.find("#"+$.sap.encodeCSS(t1.getId()));y1=o1.find("#"+$.sap.encodeCSS(t1.getId()));if(x1.length>0){u1=0;A1=f?t1.getHtmlIE8RowSpan():t1.getEffectiveRowSpan();B1=j.getRenderRowCnt()-(Math.max(t1.getRow(),j.getRenderStartRow())-j.getRenderStartRow());C1=Math.min(B1,A1);for(i=0;i<C1;i++){u1+=v1[p1.iRow+i]||0;}z1=_(x1,u1);w1=$(y1.find("#"+$.sap.encodeCSS(t1.getId()+"_contentDiv")));w1.css("line-height",z1+"px");if(t1.getEffectiveRowSpan()>1){q1[t1.getId()]=t1;}}}}}function b1(j,n1,o1,p1,q1){var r1=0;var s1=null;var t1=null;var u1=null;var v1=null;var w1=0;var x1=0;var i=0;var y1=j.getCalculatedColWidths();var z1;var A1;var B1;var C1=j.getRenderStartRow()+j.getRenderRowCnt();for(r1=j.getRenderStartRow();r1<C1;r1++){s1=j.getCellWithRowSpan(r1,p1.iCol);if(!s1){s1=j.getCellWithColSpan(r1,p1.iCol);if(s1&&(r1<p1.iRow)&&s1.getEffectiveColSpan()>1){if(!q1[s1.getId()]){q1[s1.getId()]=s1;}else{s1=null;}}}if(s1){t1=n1.find("#"+$.sap.encodeCSS(s1.getId()));u1=o1.find("#"+$.sap.encodeCSS(s1.getId()));if(t1.length>0){x1=0;z1=s1.getEffectiveColSpan();A1=j.getRenderColCnt()-(Math.max(s1.getCol(),j.getRenderStartCol())-j.getRenderStartCol());B1=Math.min(A1,z1);for(i=0;i<B1;i++){x1+=y1[p1.iCol+i]||0;}w1=c1(t1,x1,s1);if(s1.isEntryEnabled()&&j.isRowHeaderArea()){v1=$(u1.find("#"+$.sap.encodeCSS(s1.sId+"_cellLayoutDiv")));}else{v1=$(u1.find("#"+$.sap.encodeCSS(s1.getId()+"_contentDiv")));}v1.width(w1);if(s1.getEffectiveColSpan()>1){q1[s1.getId()]=s1;}}}}}function c1(i,j,n1){var o1=parseInt(i.css("padding-left"))||0;var p1=parseInt(i.css("padding-right"))||0;var q1=parseInt(i.css("border-left-width"))||0;var r1=parseInt(i.css("border-right-width"))||0;var s1=0;var t1=0;if(n1!==null&&n1.isEntryEnabled()){if(n1.isEntryEnabled()&&n1.getArea().isRowHeaderArea()){var u1=$(i.find("#"+$.sap.encodeCSS(n1.getId()+"_cellLayoutDiv")));}else{var u1=i.find("#"+$.sap.encodeCSS(n1.getId()+"_contentDiv"));}s1=parseInt(u1.css("border-left-width"))||0;t1=parseInt(u1.css("border-right-width"))||0;}var v1=Math.max(1,j-o1-p1-q1-r1-s1-t1);return v1;}function d1(i,j){var n1=$(i).parent();var o1=parseInt(n1.css("border-top-width"),10)||0;var p1=parseInt(n1.css("border-bottom-width"),10)||0;var q1=j+o1+p1;return q1;}function e1(i,j){var n1=parseInt(i.css("padding-top"))||0;var o1=parseInt(i.css("padding-bottom"))||0;var p1=parseInt(i.css("border-top-width"))||0;var q1=parseInt(i.css("border-bottom-width"))||0;var r1=j-n1-o1-p1-q1;return r1;}this.determineHeaderScrollbarVisible=function(){if(k){var i=0;var j=null;var n1=null;var o1=false;if(d.getColCnt()>0){i=m.getAreaSize(d).iWidth;n1=$(document.getElementById(c.getId()+"_dimHeaderArea_container"));j=$(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}if(i===0){if(r.getColCnt()>0){i=m.getAreaSize(r).iWidth;n1=$(document.getElementById(c.getId()+"_rowHeaderArea_container"));j=$(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}}if(i>0){o1=(n1.outerWidth()>j.outerWidth());}k.bHasHHeaderScrollbar=o1;}if(!k||!k.bHasHHeaderScrollbar){c.setHeaderHScrolling(false);}};this.determineDefaultScrollbarsVisible=function(){k={};var i=m.getAreaSize(d);var j=m.calculateRenderSize();var n1=m.getRenderSizeDivSize(c);var o1=c.getContentWidth();var p1=c.getContentHeight();var q1=m.getBrowserScrollbarWidth();var r1=null;var s1=D.getRenderColCnt()===D.getColCnt();var t1=D.getRenderRowCnt()===D.getRowCnt();k.bHasHScrollbar=((j.iWidth>o1||!s1)&&n1.iWidth>i.iWidth);k.bHasVScrollbar=((j.iHeight>p1||!t1)&&n1.iHeight>i.iHeight);if(k.bHasHScrollbar&&!k.bHasVScrollbar){r1=m.getRenderSizeDivBorders();if(p1<=j.iHeight+q1+r1.borders.iBottomBorderWidth+r1.borders.iTopBorderWidth){k.bHasVScrollbar=true;}}else if(!k.bHasHScrollbar&&k.bHasVScrollbar){r1=m.getRenderSizeDivBorders();if(o1<=j.iWidth+q1+r1.borders.iRightBorderWidth+r1.borders.iLeftBorderWidth){k.bHasHScrollbar=true;}}};this.determineScrollbarsVisible=function(){this.determineDefaultScrollbarsVisible();this.determineHeaderScrollbarVisible();};this.setAdjustFrameDivs=function(i){p=i;};this.removeOuterDivBorders=function(){var i=$(jQuery.sap.byId(c.getId()+"_renderSizeDiv"));i.css("border-bottom-width","");i.css("border-top-width","");i.css("border-left-width","");i.css("border-right-width","");};this.setDivSizeValidity=function(){q=!c.getRowHeaderArea().hasLoadingPages()&&!c.getColumnHeaderArea().hasLoadingPages();};this.calculateRenderSizeDivSize=function(){if(p||!q){var i=m.calculateRenderSize(true);var j=$(jQuery.sap.byId(c.getId()+"_renderSizeDiv"));var n1=m.getRenderSizeDivBorders(j);if(u!==-1){n1.borders.iBottomBorderWidth=u;}var o1=c.getContentWidth()-n1.borders.iLeftBorderWidth-n1.borders.iRightBorderWidth;var p1=i.iWidth;j.width(Math.min(o1,p1)+"px");var q1=c.getContentHeight()-n1.borders.iBottomBorderWidth-n1.borders.iTopBorderWidth;var r1=i.iHeight;j.height(Math.min(q1,r1)+"px");}};this.adjustRenderSizeDivSize=function(){if(p||!q){var i=$(jQuery.sap.byId(c.getId()+"_renderSizeDiv"));var j=m.getRenderSizeDivBorders(i);if(u!==-1){j.borders.iBottomBorderWidth=u;}var n1=m.getRenderSizeDivSize().iHeight;if(u!==-1){n1+=u;}var o1=m.getRenderSizeDivSize().iWidth;var p1=c.getContentHeight();if(k.bHasHScrollbar||k.bHasHHeaderScrollbar){p1-=m.getBrowserScrollbarWidth();}if(c.getRenderMode()===sap.zen.crosstab.rendering.RenderingConstants.RENDERMODE_COMPACT){var q1=(k.bHasHScrollbar||k.bHasHHeaderScrollbar)?m.getBrowserScrollbarWidth():0;var r1=c.getPropertyBag().getToolbarHeight();var s1=n1+q1+j.borders.iBottomBorderWidth+j.borders.iTopBorderWidth+r1;var t1=p1+q1+r1;if(t1>=s1){p1=s1;var t=b.getElement(c.getId());t.css("height",p1+"px");if(u===-1){u=parseInt(i.css("border-bottom-width"),10);}i.css("border-bottom-width","0px");}}if(n1>=p1){if(u===-1){u=parseInt(i.css("border-bottom-width"),10);}i.css("border-bottom-width","0px");}var u1=Math.min(n1,p1);i.css("height",u1);var v1=c.getContentWidth();if(k.bHasVScrollbar){v1-=m.getBrowserScrollbarWidth();}if(c.getRenderMode()===sap.zen.crosstab.rendering.RenderingConstants.RENDERMODE_COMPACT){var w1=k.bHasVScrollbar?m.getBrowserScrollbarWidth():0;var x1=o1+w1+j.borders.iLeftBorderWidth+j.borders.iRightBorderWidth;var y1=v1+w1;if(y1>=x1){v1=x1;var t=b.getElement(c.getId());t.css("width",v1+"px");i.css("border-right-width","0px");}}if(o1>=v1){i.css("border-right-width","0px");}var z1=Math.min(o1,v1);i.css("width",z1);this.adjustGlassPaneSize();}};this.adjustGlassPaneSize=function(){var j=c.getGlassPane();var i=c.getRenderSizeDiv();j.css("width",i.outerWidth()+"px");j.css("height",i.outerHeight()+"px");};this.renderScrollbars=function(){this.determineScrollbarsVisible();if(k.bHasHScrollbar||k.bHasVScrollbar||k.bHasHHeaderScrollbar){if(!S){S=e.getScrollManager();}if(k.bHasHHeaderScrollbar){h=e.getHeaderScrollManager();}if(s){s.destroy();s=null;}s=new sap.zen.crosstab.rendering.ScrollbarRenderer(c,R,m,b);s.renderScrollbars(k);s.attachHandlers(S.hScrollHandler,S.vScrollHandler,k.bHasHHeaderScrollbar?h.hScrollHandler:null);f1();}else{S=null;}};function f1(){var i=0;for(i=0;i<n.length;i++){n[i]();}}this.setScrollbarSteps=function(){if(s){s.setScrollbarSteps();}};this.adjustScrollDivSizes=function(){var i=jQuery.sap.byId(c.getId()+"_lowerLeft");var j=i.outerWidth();var n1=m.getRenderSizeDivSize();var o1=(n1.iWidth-j)+"px";var p1=jQuery.sap.byId(c.getId()+"_lowerRight_scrollDiv");p1.width(o1);var q1=jQuery.sap.byId(c.getId()+"_upperRight_scrollDiv");q1.width(o1);var r1=jQuery.sap.byId(c.getId()+"_upperLeft");var s1=r1.outerHeight();if(!s1){var t1=jQuery.sap.byId(c.getId()+"_upperRight");s1=t1.outerHeight();}var u1=(n1.iHeight-s1)+"px";p1.height(u1);var v1=jQuery.sap.byId(c.getId()+"_lowerLeft_scrollDiv");v1.height(u1);};this.appendLeftCols=function(i,j){var n1=Math.max(0,i.getRenderStartCol()-j);var o1=Math.max(0,i.getRenderStartCol()-1);var p1=j;if(n1===o1){p1=1;}var q1=i.getRenderStartRow();var r1=q1+i.getRenderRowCnt()-1;var s1=null;var t1=0;var u1=0;var v1=0;var w1=$(document.getElementById(i.getId()));var x1=w1.children("tbody");if(x1.length===0){w1.append("<tbody></tbody>");x1=w1.children("tbody");for(v1=q1;v1<=r1;v1++){x1.append("<tr/>");}}var y1=x1.children("tr");for(v1=q1;v1<=r1;v1++){var z1=y1[t1];u1=0;for(var A1=n1;A1<=o1;A1++){if(u1===0){s1=i.getCellWithColSpan(v1,A1);}else{s1=i.getCell(v1,A1);}if(s1){var B1=s1.getColSpan();if(B1>1){var C1=s1.getEffectiveColSpan();var D1=Math.min(p1,(i.getRenderStartCol()-n1));var E1=C1-(D1-u1);if(E1>0){var F1=$(z1).find("> :first-child");F1.remove();}}R.renderControl(s1);}u1++;}var G1=$($(y1[t1])).html();R.write(G1);R.flush(z1);t1++;}var H1=i.getRenderColCnt();var I1=o1-n1+1;i.setRenderColCnt(H1+I1);i.setRenderStartCol(n1);};this.appendTopRows=function(n1,o1){var p1=Math.max(0,n1.getRenderStartRow()-o1);var q1=Math.max(0,n1.getRenderStartRow()-1);var r1=o1;if(p1===q1){r1=1;}var s1=n1.getRenderStartCol();var t1=s1+n1.getRenderColCnt()-1;var u1=$(document.getElementById(n1.getId()));var v1=u1.children("tbody");if(v1.length===0){u1.append("<tbody/>");v1=u1.children("tbody");}var w1=v1.html();var x1=[];var y1=0;var z1=0;var A1=null;if(!c.getPropertyBag().isDebugMode()){v1.hide();}for(var B1=p1;B1<=q1;B1++){z1=0;R.write("<tr");R.writeAttribute("class","sapzencrosstab-HeaderRow");R.write(">");for(var C1=s1;C1<=t1;C1++){A1=null;if(y1===0){A1=n1.getCellWithRowSpan(B1,C1);}else{A1=n1.getCell(B1,C1);}if(A1){var D1=A1.getRowSpan();if(D1>1){var E1=A1.getEffectiveRowSpan();var F1=E1-(r1-y1);if(F1>0){x1.push(C1);}}R.renderControl(A1);}z1++;}R.write("</tr>");y1++;}var G1=[];if(x1.length>0){var H1=$(document.getElementById(n1.getId())).children("tbody").children("tr");var I1=$(H1[0]);var i=0;for(i=0;i<x1.length;i++){var A1=I1.find("> :nth-child("+(x1[i]+1)+")");if(A1.length>0){var J1=A1.attr('id');G1.push(J1);}}for(var j=0;j<G1.length;j++){var K1=I1.find("#"+$.sap.encodeCSS(G1[j]));K1.remove();}R.write("<tr");R.writeAttribute("class","sapzencrosstab-HeaderRow");R.write(">");R.write(I1.html()+"</tr>");for(i=1;i<H1.length;i++){R.write("<tr");R.writeAttribute("class","sapzencrosstab-HeaderRow");R.write(">");R.write($(H1[i]).html()+"</tr>");}}else{R.write(w1);}n1.setRenderStartRow(p1);n1.setRenderRowCnt(n1.getRenderRowCnt()+q1-p1+1);R.flush(v1[0]);v1.show();};function g1(i,j,n1){var o1=0;var p1=j.getScrollPosition();var q1={};q1.parameters={};q1.oSource=j;q1.parameters.oldScrollPos=p1;if(c.getPropertyBag().isPixelScrolling()||n1){o1=Math.max(0,Math.min(i,parseInt(j.getContentSize(),10)));q1.parameters.action="Drag";}else{o1=Math.max(0,Math.min(i,j.getSteps()));q1.parameters.action="STEP";}q1.getParameters=function(){return this.parameters;};q1.parameters.newScrollPos=o1;q1.parameters.forward=(o1-p1)>0;return q1;}this.scrollHorizontal=function(i){if(c.getHScrollbar()){var j=g1(i,c.getHScrollbar());c.getHScrollbar().setScrollPosition(j.getParameters().newScrollPos);S.hScrollHandler(j,true);}};this.scrollVertical=function(i,j){if(c.getVScrollbar()){var n1=g1(i,c.getVScrollbar());c.getVScrollbar().setScrollPosition(n1.getParameters().newScrollPos);var o1=false;if(!j){o1=true;}S.vScrollHandler(n1,o1);}};this.scrollHeaderHorizontal=function(i){var j=c.getHorizontalHeaderScrollbar();if(j){var n1=g1(i,j,true);j.setScrollPosition(n1.getParameters().newScrollPos);h.hScrollHandler(n1);}};this.getMeasuringHelper=function(){return m;};this.reset=function(i){e.reset();if(!i){e.clearSavedColWidths();}S=null;m.reset();if(s){s.destroy();s=null;}n=[];q=false;u=-1;};this.adjustScrollPositions=function(i){if(k.bHasHScrollbar||k.bHasVScrollbar){if(g&&c.getPropertyBag().isPixelScrolling()){var j=0;var n1=e.getSavedVScrollInfo();if(n1){var D=c.getDataArea();var o1=m.getAreaHeight(D);var p1=D.getRowCnt();var q1=Math.round(o1/p1);j=n1.iPos*q1;}S.setVScrollPos(j);}var r1=undefined;var s1=undefined;if(e){if(e.hasSavedInfo()){var t1=e.getSavedHScrollInfo();if(t1){r1=t1.bScrolledToEnd;}t1=e.getSavedVScrollInfo();if(t1){s1=t1.bScrolledToEnd;}}}S.moveScrollbars(k,i,r1,s1);g=false;}if(c.isHeaderHScrolling()===true){if(e&&e.hasSavedInfo()===true){h.setHScrollData(e.getHeaderScrollData());h.moveScrollbars();}}};this.hasCrosstabSizeChanged=function(){return m.hasCrosstabSizeChanged(true);};this.getTableDivValues=function(){return m.getTableDivBordersAndPadding();};function h1(){var t=c.getTableDiv();var i=C.getId();var j=r.getId();var n1=d.getId();var o1=D.getId();b.addElement(c.getId(),t);b.addElement(i,t.find("#"+$.sap.encodeCSS(i)));b.addElement(j,t.find("#"+$.sap.encodeCSS(j)));b.addElement(n1,t.find("#"+$.sap.encodeCSS(n1)));b.addElement(o1,t.find("#"+$.sap.encodeCSS(o1)));}this.showLoadingIndicator=function(){if(!l&&!I){l=setTimeout(i1,300);}else if(I){i1();}};function i1(){I=true;var t=b.getElement(c.getId());t.addClass("sapzencrosstab-TableDivLoading");var i=t.find("#"+$.sap.encodeCSS(c.getId()+"_loadingAnimationDiv"));var j=parseInt(i.css("width"),10);var n1=parseInt(i.css("height"),10);var o1=m.getRenderSizeDivSize(c);var p1=o1.iWidth/2-j/2;var q1=o1.iHeight/2-n1/2;i.css("top",q1+"px");i.css("left",p1+"px");i.css("visibility","visible");}function j1(){if(l){clearTimeout(l);l="";}}this.hideLoadingIndicator=function(){j1();var t=b.getElement(c.getId());t.removeClass("sapzencrosstab-TableDivLoading");var i=t.find("#"+$.sap.encodeCSS(c.getId()+"_loadingAnimationDiv"));if(i&&i[0]){i.css("visibility","hidden");}I=false;};this.showLoadingVisualization=function(){if(D.hasLoadingPages()){this.showLoadingIndicator();}else{this.hideLoadingIndicator();}};this.moveScrollDivs=function(){if(S){if(k){if(k.bHasHScrollbar){S.positionHScrollDiv();}if(k.bHasVScrollbar){S.positionVScrollDiv();}}}};this.getCrossRequestManager=function(){return e;};this.registerNewScrollbarsNotification=function(i){if($.inArray(i,n)===-1){n.push(i);}};this.checkScrollbarSize=function(){if(k.bHasVScrollbar){var i=$(document.getElementById(c.getId()+'_upperRightPad'));var j=null;if(c.hasDimensionHeaderArea()){j=$(document.getElementById(c.getId()+'_upperLeft_scrollDiv'));}else if(c.hasColHeaderArea()){j=$(document.getElementById(c.getId()+'_upperRight_scrollDiv'));}if(i!==null&&i.length>0&&j!==null&&j.length>0){var n1=j.outerHeight();if(n1!==i.outerHeight()){if(s){s.adjustVScrollbarHeight(n1);}}}}if(k.bHasHScrollbar){var o1=$(document.getElementById(c.getId()+'_lowerLeftPad'));var p1;if(c.hasRowHeaderArea()){p1=$(document.getElementById(c.getId()+'_lowerLeft_scrollDiv'));}else{p1=$(document.getElementById(c.getId()+'_upperLeft_scrollDiv'));}var q1=p1.outerWidth();if(q1!==o1.outerWidth()){if(s){s.adjustHScrollbarWidth(q1);}}}};this.updateRenderingOfInputCellAfterCheck=function(i){var j=$(document.getElementById(i.getId()));if(j.length>0){var n1=sap.zen.crosstab.CellStyleHandler.getCompleteStyleName(sap.zen.crosstab.rendering.RenderingConstants.STYLE_INVALID_VALUE,i.getCellType());if(i.hasStyle(sap.zen.crosstab.rendering.RenderingConstants.STYLE_INVALID_VALUE)===true){j.addClass(n1);}else{j.removeClass(n1);}var o1=j.find("#"+$.sap.encodeCSS(i.getId()+"_contentDiv"));o1.html(i.getText());}};this.updateHeaderScrollbarSizes=function(){if(s){s.setHorizontalHeaderScrollbarSteps();s.adjustHorizontalHeaderScrollbarContainerSize();}};function k1(i,j){var n1=$(document.getElementById(c.getId()+i));if(n1.length>0){if(j===true){n1.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").addClass("sapzencrosstab-removeRightBorder");}else{n1.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").removeClass("sapzencrosstab-removeRightBorder");}}}function l1(j,i){if(j&&j.length>0){j.addClass("sapzencrosstab-lowerScrollHeaderSeparator");k1("_rowHeaderArea",true);}if(i&&i.length>0){i.addClass("sapzencrosstab-upperScrollHeaderSeparator");k1("_dimHeaderArea",true);}}function m1(j,i){if(j&&j.length>0){j.removeClass("sapzencrosstab-lowerScrollHeaderSeparator");k1("_rowHeaderArea",false);}if(i&&i.length>0){i.removeClass("sapzencrosstab-upperScrollHeaderSeparator");k1("_dimHeaderArea",false);}}this.getLeftScrollDivs=function(){var j=null;var i=null;if(c.hasRowHeaderArea()){j=$(document.getElementById(c.getId()+'_lowerLeft_scrollDiv'));}if(c.hasDimensionHeaderArea()){i=$(document.getElementById(c.getId()+'_upperLeft_scrollDiv'));}return{"oJqRowHeaderDiv":j,"oJqDimHeaderDiv":i};};this.determineUnrestrictedRightAreaWidth=function(){var i=0;var j;var n1;var o1=1;if(c.hasDimensionHeaderArea()){j=c.getDimensionHeaderArea();}else if(c.hasRowHeaderArea()){j=c.getRowHeaderArea();}if(j&&j.getRenderColCnt()>0){n1=c.getTableCellWithSpans(0,j.getRenderColCnt()-1);if(n1){o1=parseInt($(document.getElementById(n1.getId())).css("border-right-width"),10);}}if(D){D.saveData();}if(C){C.saveData();}this.renderRightAreas(true);this.determineDefaultScrollbarsVisible();i=this.getRightAreaContainerWidth()+(k.bHasVScrollbar?m.getBrowserScrollbarWidth():0)+o1;if(D){$(document.getElementById(D.getId())).find("tbody").empty();D.restoreData();}if(C){$(document.getElementById(C.getId())).find("tbody").empty();C.restoreData();}return i;};this.calculateLeftAreaHeaderWidth=function(i,j,n1){var o1=0;var p1=c.getPropertyBag().getMaxHeaderWidth();var q1=c.getPropertyBag().getUserHeaderWidth();var r1;var s1=Math.round(i/2.0);if(p1>0){if(q1>0){o1=Math.min(p1,q1);}else{o1=Math.min(p1,j);}}else{o1=q1;}if(o1>=i){o1=0;}if(o1>=j){o1=0;}if(j+n1>i){if(this.hasRightArea()){if(o1===0){if(n1<=s1){r1=c.getRenderSizeDiv();o1=i-n1-parseInt(r1.css("border-right-width"),10)-parseInt(r1.css("border-left-width"),10)-1;}else if(j<=s1){o1=j;}else{o1=s1;}}}else{o1=i;}}else{o1=0;}o1=this.limitHeaderWidth(o1);return o1;};this.enableHeaderResizeHandle=function(i){var j;j=$(document.getElementById(c.getId()+"_headerResizeHandle"));if(j&&j.length>0){j.css("visibility",i?"visible":"hidden");}};this.forceHeaderWidth=function(){var j=null;var i=null;var n1=0;var o1=0;var p1=0;var q1=0;var r1=null;var s1=0;if(c.hasRowHeaderArea()===false&&c.hasDimensionHeaderArea()===false){return;}r1=this.getLeftScrollDivs();j=r1.oJqRowHeaderDiv;i=r1.oJqDimHeaderDiv;n1=this.getLeftAreaContainerWidth();if(this.hasRightArea()){o1=this.determineUnrestrictedRightAreaWidth();}q1=c.getContentWidth();p1=this.calculateLeftAreaHeaderWidth(q1,n1,o1);if(p1>0){this.setDivWidth(j,p1);this.setDivWidth(i,p1);c.setHeaderHScrolling(true);w=p1;l1(j,i);this.enableHeaderResizeHandle(true);}else{c.setHorizontalHeaderScrollbar(null);c.setHeaderHScrolling(false);w=0;m1(j,i);this.enableHeaderResizeHandle(false);c.getUtils().sendClientScrollPosUpdate(0,undefined,undefined,undefined,true);c.getPropertyBag().setUserHeaderWidth(0);this.sendHeaderLimit("N0",true);}};this.hasRightArea=function(){return c.hasDataArea()||c.hasColHeaderArea();};this.hasLeftArea=function(){return c.hasDimensionHeaderArea()||c.hasRowHeaderArea();};this.getLeftAreaContainerWidth=function(){var i=0;var j=null;if(c.hasDimensionHeaderArea()===true){j=$(document.getElementById(c.getId()+"_dimHeaderArea_container"));i=j.outerWidth();}else if(c.hasRowHeaderArea()===true){j=$(document.getElementById(c.getId()+"_rowHeaderArea_container"));i=j.outerWidth();}return i;};this.getRightAreaContainerWidth=function(){var i=0;var j=null;if(c.hasColHeaderArea()===true){j=$(document.getElementById(c.getId()+"_colHeaderArea_container"));i=j.outerWidth();}else if(c.hasDataArea()===true){j=$(document.getElementById(c.getId()+"_dataArea_container"));i=j.outerWidth();}return i;};this.getSectionWidth=function(){var i=this.getLeftAreaContainerWidth();var j=this.getRightAreaContainerWidth();var n1=null;var o1=null;var p1=0;var q1=0;if(c.hasDimensionHeaderArea()){n1=$(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}else if(c.hasRowHeaderArea()){n1=$(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}p1=sap.zen.crosstab.utils.Utils.getWidthOfMarginBorderPadding(n1);if(c.hasColHeaderArea()){o1=$(document.getElementById(c.getId()+"_upperRight_scrollDiv"));}else if(c.hasDataArea()){o1=$(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));}q1=sap.zen.crosstab.utils.Utils.getWidthOfMarginBorderPadding(o1);var r1=i+j+p1+q1;return r1;};this.updateHeaderResizeDiv=function(){var j=$(document.getElementById(c.getId()+"_headerResizeHandle"));var i=null;var n1=0;var o1=c.getPropertyBag().getMaxHeaderWidth();if(j&&j.length>0){n1=w;if(isNaN(n1)||!n1){if(o1>0){n1=Math.min(n1,o1);}var p1=this.getLeftAreaContainerWidth();var q1=$(document.getElementById(c.getId()+"_renderSizeDiv")).outerWidth();var r1=j.outerWidth();n1=(p1<=q1)?(p1):(q1-r1);}if(c.getPropertyBag().isRtl()){j.css("right",n1+"px");}else{j.css("left",n1+"px");}}};this.getIntHeaderLimit=function(i){var j;var n1;if(i.indexOf("N")===0){n1=i.substring(1);}else{n1=i;}j=parseInt(n1,10);return j;};this.sendHeaderLimit=function(i,j){var n1=c.getUserHeaderWidthCommand();var o1=0;o1=this.getIntHeaderLimit(i);if(v===o1){return;}if(n1&&n1.length>0){v=o1;e.saveColWidths();n1=n1.replace("__HEADER_WIDTH__",i);c.getUtils().executeCommandAction(n1,j);}};this.getHeaderScrollManager=function(){return h;};this.limitHeaderWidth=function(i){var j=c.getPropertyBag().getMaxHeaderWidth();var n1=0;if(j>0&&i>0){n1=Math.min(j,i);}else{n1=i;}return n1;};this.setDivWidth=function(j,i){var n1="";if(j&&j.length>0){if(!i){n1="100%";}else{n1=i+"px";}j.css("width",n1);}};this.renderLeftAreas=function(){this.renderDimensionHeaderArea();this.setUserColWidths(c.getDimensionHeaderArea());this.renderRowHeaderArea(c.getRowHeaderArea().getRenderStartRow());this.setUserColWidths(c.getRowHeaderArea());this.adjustColWidths(c.getDimensionHeaderArea(),c.getRowHeaderArea());};this.renderRightAreas=function(i){var j=C.getRenderStartCol();if(i===true){j=0;}this.renderColHeaderArea(j,i);this.setUserColWidths(c.getColumnHeaderArea());this.renderDataArea();this.setUserColWidths(c.getDataArea());this.adjustColWidths(c.getColumnHeaderArea(),c.getDataArea());};this.renderCrosstabAreas=function(){var i=c.isHeaderScrollingConfigured();this.renderLeftAreas();if(i===true&&!c.isPreparedDom()){this.forceHeaderWidth();}this.renderRightAreas();this.adjustRowHeights(c.getDimensionHeaderArea(),c.getColumnHeaderArea());this.adjustRowHeights(c.getRowHeaderArea(),c.getDataArea());};this.getScrollManager=function(){return S;};this.getScrollbarVisibility=function(){return k;};};
